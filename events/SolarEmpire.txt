add_namespace = solarempire
add_namespace = solarempiresparkles

country_event = { #Luna/Twilight discover DB
	id = solarempire.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1"}
	title = solarempire.1.t
	desc = { text = solarempire.1.d_luna
		trigger = {  has_character = EQS_princess_luna }
	}
	desc = { text = solarempire.1.d_no_luna
		trigger = { NOT = { has_character = EQS_princess_luna } }
	}
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.1.a
        trigger = {
            has_character = EQS_princess_luna
        }
        set_country_flag = EQS_had_luna
		EQS_princess_luna = {
			remove_unit_leader_role = yes
			if = {
				limit = {
					is_high_command = yes
				}
				remove_advisor_role = {
					slot = high_command
				}
			}
			if = {
				limit = {
					is_army_chief = yes
				}
				remove_advisor_role = {
					slot = army_chief
				}
			}
			#using a flag doesnt seem to work
			set_character_flag = EQS_luna_leader_disabled 
			promote_character = alicornrule
		}
        if = {
            limit = {
                has_idea = EQS_princess_luna_idea
            }
            remove_ideas = EQS_princess_luna_idea
        }
	}
    option = {
		name = solarempire.1.b
        trigger = {
            NOT = { has_character = EQS_princess_luna }
        }
		set_country_flag = SOL_twilight_captured
        if = {
            limit = {
                EQS_twilight_sparkle = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_twilight_sparkle
        }
	}
}

country_event = { #Mane six confront DB
	id = solarempire.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.2"}
	title = solarempire.2.t
	desc = { text = solarempire.2.d_m6_together_th
		trigger = { 
            controls_state = 5
            NOT = { 
                has_global_flag = rarity_captured 
                has_country_flag = SOL_twilight_captured
            } 
        }
	}
    desc = { text = solarempire.2.d_m6_together
		trigger = { 
            NOT = {
                controls_state = 5
            }
            NOT = { 
                has_global_flag = rarity_captured 
                has_country_flag = SOL_twilight_captured
            } 
        }
	}
	desc = { text = solarempire.2.d_m6_separated
		trigger = { 
            OR = { 
                has_global_flag = rarity_captured 
                has_country_flag = SOL_twilight_captured
            } 
        }
	}
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.2.a
        custom_effect_tooltip = EQS_SOL_elements_blocked_tt
        if = {
            limit = {
                NOT = { 
                    has_country_flag = SOL_twilight_captured
                } 
            }
            set_country_flag = SOL_twilight_captured
            if = {
                limit = {
                    EQS_twilight_sparkle = {
                        is_hired_as_advisor = yes
                    }
                }
                deactivate_advisor = EQS_twilight_sparkle
            }
        }
        
        if = {
            limit = {
                EQS_applejack = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_applejack
        }
        if = {
            limit = {
                EQS_rainbowdash = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_rainbowdash
        }
        if = {
            limit = {
                EQS_fluttershy = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_fluttershy
        }
        if = {
            limit = {
                EQS_rarity = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_rarity
        }
        if = {
            limit = {
                EQS_pinkie_pie = {
                    is_hired_as_advisor = yes
                }
            }
            deactivate_advisor = EQS_pinkie_pie
        }
        hidden_effect = {
            EQS_applejack = {
                set_nationality = SOL
            }
            EQS_rainbowdash = {
                set_nationality = SOL
            }
            EQS_fluttershy = {
                set_nationality = SOL
            }
            EQS_rarity = {
                set_nationality = SOL
            }
            EQS_pinkie_pie = {
                set_nationality = SOL
            }
        }
	}
}
country_event = { #Formation of Solar Empire
	id = solarempire.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.3"}
	title = solarempire.3.t
	desc = { text = solarempire.3.d_canterlot
		trigger = { 
            controls_state = 3
        }
	}
    desc = { text = solarempire.3.d_no_canterlot
		trigger = { 
            NOT = {
                controls_state = 3
            }
        }
	}
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.3.a
        add_country_leader_trait = solar_empress
        add_political_power = 100
        add_stability = -0.25
        add_popularity = {
            ideology = fascism
            popularity = 0.10
        }
        set_cosmetic_tag = EQS_SOL
        set_party_name = { ideology = fascism long_name = EQS_SOL_solarist name = EQS_SOL_solarist }
        hidden_effect = {
            news_event = { id = news.sol.4 hours = 3 }
            if = {
                limit = {
                    3 = {
                        is_owned_and_controlled_by = ROOT
                    }
                }
                set_capital = {
                    state = 3
                    remember_old_capital = no
                }
            }
        }
        every_enemy_country = {
            add_ideas = SOL_enemy_debuff_idea
        }
        set_province_name = { id = 6023 name = EQS_SOL_invicta_vp }
        if = {
            limit = {
                is_faction_leader = no
            }
            create_faction = "SOL_faction"
        }
        else = {
            set_faction_name = SOL_faction
        }
	}
}

# country_event = {
	# id = solarempire.2
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.2"}
	# title = solarempire.2.t
	# desc = solarempire.2.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes

	# option = {
		# name = solarempire.2.a
		# if = {
			# limit = {
				# EQS_princess_celestia = {
					# is_field_marshal = no
				# }
			# }
			# add_field_marshal_role = {
				# character = EQS_princess_celestia
				# traits = { supernova pony_race_trait }
				# skill = 7
				# legacy_id = 1337
				# attack_skill = 7
				# defense_skill = 5
				# planning_skill = 5
				# logistics_skill = 5
			# }
			# custom_effect_tooltip = daybreaker_stats_tp
		# }
		# else = {
			# EQS_princess_celestia = {
				# add_unit_leader_trait = supernova
			# }
		# }
		#if = {
		#	limit = { is_ai = yes }
		#	if = {
		#		limit = { has_country_flag = remove_db_70_days }
		#		hidden_effect = {
		#			clr_country_flag = remove_db_70_days
		#			country_event = { id = solarempire.1 days = 320 }
		#		}
		#		custom_effect_tooltip = solarempire.2.a.tp_70
		#	}
		#	else = {
		#		custom_effect_tooltip = solarempire.2.a.tp_40
		#		hidden_effect = { country_event = { id = solarempire.1 days = 160 } }
		#	}
		#}
		#else = {
		#	if = {
		#		limit = { has_country_flag = remove_db_70_days }
		#		hidden_effect = {
		#			clr_country_flag = remove_db_70_days
		#			country_event = { id = solarempire.1 days = 160 }
		#		}
		#		custom_effect_tooltip = solarempire.2.a.tp_70
		#	}
		#	else = {
		#		custom_effect_tooltip = solarempire.2.a.tp_40
		#		hidden_effect = { country_event = { id = solarempire.1 days = 80 } }
		#	}
		#}
	# }
# }

country_event = { #Defections and desertions of harmonists
	id = solarempire.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.4"}
	title = solarempire.4.t
	desc = solarempire.4.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.4.a
        add_stability = -0.1
        add_manpower = -20000
        custom_effect_tooltip = EQS_SOL_ponies_defect_tt
        hidden_effect = {
            #ironic
            EQS_sweetie_drops = {
                set_nationality = SOL
            }
            EQS_grannysmith = {
                set_nationality = SOL
            }
            EQS_flash_magnus = {
                set_nationality = SOL
            }
            EQS_rockhoof = {
                set_nationality = SOL
            }
            EQS_maudpie = {
                set_nationality = SOL
            }
            EQS_limestone = {
                set_nationality = SOL
            }
            EQS_marble_pie = {
                set_nationality = SOL
            }
            EQS_zecora = {
                set_nationality = SOL
            }
            EQS_fizzlepop = {
                set_nationality = SOL
            }
            EQS_dust_hoover = {
                set_nationality = STG
            }
            EQS_soarin = {
                set_nationality = SOL
            }
            EQS_braeburn = {
                set_nationality = SOL
            }
            EQS_cocopomell = {
                set_nationality = SOL
            }
            EQS_filthy_rich = {
                set_nationality = SOL
            }
        }
	}
}

country_event = {
	id = solarempire.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.5"}
	title = solarempire.5.t
	desc = { text = solarempire.5.d_1
		trigger = { FROM = { has_country_flag = nlr_early_discovery } }
	}
	desc = { text = solarempire.5.d_2
		trigger = { FROM = { NOT = { has_country_flag = nlr_early_discovery } } }
	}
	picture = GFX_event_night_riders

	is_triggered_only = yes

	option = { #Support celestia
		name = solarempire.5.a
		reverse_add_opinion_modifier = { target = NLR modifier = cry_betrayal }
		if = {
			limit = { original_tag = CRY NOT = { has_completed_focus = CRY_subordination }  }
			end_puppet_this = yes
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
		}
		effect_tooltip = {
			add_to_war_EQS_against_NLR = yes
		}
		hidden_effect = {
			country_event = { id = equestria.166 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = no }
			}
			set_country_flag = supported_EQS
		}
		ai_chance = {
			base = 3
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 2
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 4
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 0
			}
			modifier = {
				OR = {
					has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					has_game_rule = {
						rule = EQS_ai_behavior
						option = LUNAR_CIVIL_WAR_MAX
					}
				}
				factor = 0
			}
		}
	}
	option = { #Stay neutral
		name = solarempire.5.b
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		reverse_add_opinion_modifier = { target = NLR modifier = cry_betrayal }
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = NLR
				every_enemy_country = {
					limit = {
						is_in_faction_with = NLR
					}
					white_peace = ROOT
				}
			}
			set_country_flag = ignored_EQS_civil_war
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
		}
		ai_chance = {
			base = 4
			modifier = {
				NOT = { is_pony_race = yes }
				factor = 3
			}
			modifier = {
				is_major = yes
				factor = 6
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_independence_referendum
				factor = 3
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = NLR
				}
				factor = 3
			}
			modifier = {
				OR = {
					has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					has_game_rule = {
						rule = EQS_ai_behavior
						option = LUNAR_CIVIL_WAR_MAX
					}
				}
				factor = 0
			}
		}
	}
	option = { #Support NMM
		name = solarempire.5.c
		if = {
			limit = { is_subject_of = event_target:equestria }
			get_current_autonomy_level = yes
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_NLR
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = NLR
				every_enemy_country = {
					limit = {
						is_in_faction_with = NLR
					}
					white_peace = ROOT
				}
			}
		}
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war_NLR_against_EQS = yes
		}
		hidden_effect = {
			country_event = { id = equestria.167 days = 1 }
		}
		if = {
			limit = {
				original_tag = EQC
			}
			NLR = { 
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_satellite
				}
			}
			load_focus_tree = eqc_nlr_focus
			add_country_leader_role = {
				character = EQC_jet_set
				promote_leader = yes

				country_leader={
					desc = "snooty_noble_desc"
					ideology = centrism
					expire="1965.1.1.1"
					traits = { democratic_sympathies }
				}
			}
			set_party_name = { ideology = fascism name = EQC_bat_supporters_fash long_name = EQC_bat_supporters_fash_long }
			add_country_leader_role = {
				character = EQC_evening_dew
				promote_leader = yes

				country_leader={
					desc = "another_edgy_bat_desc"
					ideology = esotericism
					expire="1965.1.1.1"
					traits = {  }
				}
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_party_name = { ideology = neutrality name = EQC_bat_supporters long_name = EQC_bat_supporters_long }
			country_event = { id = mareland.44 days = 1 }
			add_stability = -0.15
			add_war_support = -0.15
			hidden_effect = {
				country_event = { id = EQC_NLR.11 days = 94 }
			}
		}
		if = {
			limit = {
				original_tag = CRY
			}
			NLR = {
				add_to_faction = CRY
			}
		}
        hidden_effect = {
		    set_popularities = {
				democratic = 25
				fascism = 30
				communism = 0
				neutrality = 45
			}
		}
		ai_chance = {
			factor = 1.5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
				    OR = {
					    has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					    has_game_rule = {
						    rule = EQS_ai_behavior
						    option = LUNAR_CIVIL_WAR_MAX
					    }
				    }
				}
			}
			modifier = {
				add = 100

				OR = {
					has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					has_game_rule = {
						rule = EQS_ai_behavior
						option = LUNAR_CIVIL_WAR_MAX
					}
				}
			}
			modifier = {
				factor = 0

				original_tag = CRY
				has_government = democratic

				NOT = {
				    OR = {
					    has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					    has_game_rule = {
						    rule = EQS_ai_behavior
						    option = LUNAR_CIVIL_WAR_MAX
					    }
				    }
				}
			}
			modifier = {
				add = 15
				has_government = fascism
			}
		}
	}
}

# For CRY
country_event = {
	id = solarempire.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.6"}
	title = solarempire.6.t
	desc = solarempire.6.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	option = { # Support luna
		name = solarempire.6.a
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		if = {
			limit = { original_tag = CRY NOT = { has_completed_focus = CRY_subordination }  }
			end_puppet_this = yes
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
		}
		effect_tooltip = {
			add_to_war_EQS_against_SOL = yes
		}
		hidden_effect = {
			country_event = { id = equestria.162 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = no }
			}
			set_country_flag = supported_EQS
			if = {
				limit = {
					original_tag = EQC
					EQC_candy_garden = {
						is_unit_leader = yes
					}
				}
				country_event = { id = EQC_SOL.1 days = 14 }
			}
		}
		ai_chance = {
			base = 2.5

			modifier = {
				add = 500

				OR = {
					has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					has_game_rule = {
						rule = EQS_ai_behavior
						option = LUNAR_CIVIL_WAR_MAX
					}
				}
			}
		}
	}
	option = { # Stay neutral
		name = solarempire.6.b
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = event_target:solar_empire }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = event_target:solar_empire
				every_enemy_country = {
					limit = {
						is_in_faction_with = event_target:solar_empire
					}
					white_peace = ROOT
				}
			}
			set_country_flag = ignored_EQS_civil_war
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
			if = {
				limit = {
					original_tag = EQC
					EQC_candy_garden = {
						is_unit_leader = yes
					}
				}
				country_event = { id = EQC_SOL.1 days = 14 }
			}
		}
		ai_chance = {
			factor = 4
			modifier = {
				NOT = { is_pony_race = yes }
				factor = 3
			}
			modifier = {
				is_major = yes
				factor = 6
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 3
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 0.75
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 0.5
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation

				NOT = {
					has_country_flag = EQS_AI_LUNAR_CIVIL_WAR_MAX
					has_game_rule = {
						rule = EQS_ai_behavior
						option = LUNAR_CIVIL_WAR_MAX
					}
				}

				factor = 100
			}
		}
	}
	option = { # Support Daybreaker
		name = solarempire.6.c
		if = {
			limit = { is_subject_of = event_target:equestria }
			get_current_autonomy_level = yes
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_SOL
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = event_target:solar_empire }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = event_target:solar_empire
				every_enemy_country = {
					limit = {
						is_in_faction_with = event_target:solar_empire
					}
					white_peace = ROOT
				}
			}
		}
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war_SOL_against_EQS = yes
		}
		if = {
			limit = {
				original_tag = EQC
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
			set_cosmetic_tag = EQC_SOL
		}
		hidden_effect = {
			get_current_government_type = yes
		}
		event_target:solar_empire = {
			set_autonomy = { target = ROOT autonomy_state = autonomy_reichsprotectorate }
		}
		hidden_effect = {
			restore_previous_government_type = yes
			country_event = { id = equestria.160 days = 1 }
		}
		ai_chance = {
			factor = 1.2
			modifier = {
				factor = 0
				original_tag = CRY
			}
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 1.4
				has_autonomy_state = autonomy_integrated_puppet
			}
			modifier = {
				factor = 1.2
				has_autonomy_state = autonomy_puppet
			}
		}
	}
}

country_event = { #Lunarist resistance during war
	id = solarempire.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.7"}
	title = solarempire.7.t
	desc = solarempire.7.d
	picture = GFX_event_bat_soldier2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.7.a
        set_country_flag = SOL_bat_problems_flag
        add_ideas = SOL_bat_resistance
        add_manpower = -20000
        every_state = {
			limit = {
				OR = {
					state = 40
					state = 36
					state = 81
					state = 350
					state = 32
					state = 25
					state = 30
                    state = 353
                    state = 52
                    state = 79
                    state = 84
                    state = 28
				}
			}
			force_enable_resistance = EQS
            start_resistance = EQS
            add_resistance_target = 30
			set_state_flag = eqs_bat_state
		}
        custom_effect_tooltip = EQS_SOL_ponies_defect_2_tt
        hidden_effect = {
            if = {
                limit = {
                    NLR = {
                        exists = yes
                    }
                }
                NLR = {
                    country_event = solarempire.21
                }

                EQS_sunrise_moonshadow = {
                    set_nationality = NLR
                }
                EQS_oli_equites = { set_nationality = NLR }
            }
            else_if = {
                limit = {
                    NMS = {
                        exists = yes
                    }
                }
                NMS = {
                    country_event = solarempire.21
                }
                EQS_sunrise_moonshadow = {
                    set_nationality = NMS
                }
                EQS_oli_equites = { set_nationality = NMS }
            }
            else = {
                EQS_sunrise_moonshadow = {
                    set_nationality = SOL
                }
                EQS_NLR_tempest_wind = { set_nationality = SOL }
                EQS_NLR_bipen = { set_nationality = SOL }
                EQS_NLR_midnight_oil = { set_nationality = SOL }
                EQS_NLR_celenite = { set_nationality = SOL }
                EQS_oli_equites = { set_nationality = SOL }
           }
        }
	}
}

country_event = { #Harmonic resistance forms
	id = solarempire.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.8"}
	title = solarempire.8.t
	desc = { text = solarempire.8.d_war
		trigger = { 
            has_war = yes
        }
	}
    desc = { text = solarempire.8.d_no_war
		trigger = { 
            has_war = no
        }
	}
	picture = GFX_event_pony_soldiers_sunset

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.8.a
        set_party_name = { ideology = democratic long_name = EQS_SOL_anti_solarist name = EQS_SOL_anti_solarist }
        custom_effect_tooltip = SOL_resistance_tt
        set_variable = { SOL_resistance_size = 1 }
		set_variable = { SOL_res_small_var = 0.01 }
        set_variable = { SOL_res_big_var = 0.005 }
		add_dynamic_modifier = { modifier = SOL_harmonic_resistance }
	}
}

country_event = { #The Imperial Guard (OMG IS THAT A FUCKING WARHAMMER 40K REFERENCE???)
	id = solarempire.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.9"}
	title = solarempire.9.t
	desc = solarempire.9.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.9.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        set_division_template_lock = {
            division_template = "Royal Guards"
            is_locked = yes
        }
        set_division_template_lock = {
            division_template = "Royal Armor"
            is_locked = yes
        }
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
        division_template = {
            name = "Imperial Guards"	
            division_names_group = EQS_GRD_02
            template_counter = 85

            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 2 y = 0 }
                infantry = { x = 2 y = 1 }
                infantry = { x = 2 y = 2 }
                infantry = { x = 3 y = 0 }
                infantry = { x = 3 y = 1 }
            }

            support = {
                engineer = { x = 0 y = 0 }
                artillery = { x = 0 y = 1 }
                recon = { x = 0 y = 2 }
            }
            priority = 2
        }
        division_template = {
            name = "Imperial Armor"	
            division_names_group = EQS_ARM_02
            template_counter = 85

            regiments = {
                light_armor = { x = 0 y = 0 }
                light_armor = { x = 0 y = 1 }
                light_armor = { x = 0 y = 2 }
                light_armor = { x = 0 y = 3 }
                motorized = { x = 1 y = 0 }
                motorized = { x = 1 y = 1 }
                motorized = { x = 1 y = 2 }
                motorized = { x = 1 y = 3 }
                light_armor = { x = 2 y = 0 }
                light_armor = { x = 2 y = 1 }
                light_armor = { x = 2 y = 2 }
                light_armor = { x = 2 y = 3 }
                motorized = { x = 3 y = 0 }
                motorized = { x = 3 y = 1 }
                motorized = { x = 3 y = 2 }
                motorized = { x = 3 y = 3 }
            }

            support = {
                engineer = { x = 0 y = 0 }
                artillery = { x = 0 y = 1 }
                recon = { x = 0 y = 2 }
            }
            priority = 2
        }
        #I love Paradox Interactive
        #every_country_division = { 
         #   limit = {
          #      has_template = "Royal Guards"
           # }
            #change_division_template = "Imperial Guards"
        #}
        #every_country_division = { 
         #   limit = {
          #      has_template = "Royal Armor"
           # }
           # change_division_template = "Imperial Armor"
        #}
	}
    option = {
		name = solarempire.9.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        if = {
			limit = {
				has_template = "Royal Guards"
			}
			delete_unit_template_and_units = {
				division_template = "Royal Guards"
				disband = no
			}
		}
        division_template = {
            name = "Imperial Guards"	
            division_names_group = EQS_GRD_02
            template_counter = 85

            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 2 y = 0 }
                infantry = { x = 2 y = 1 }
                infantry = { x = 2 y = 2 }
                infantry = { x = 3 y = 0 }
                infantry = { x = 3 y = 1 }
            }

            support = {
                engineer = { x = 0 y = 0 }
                artillery = { x = 0 y = 1 }
                recon = { x = 0 y = 2 }
            }
            priority = 2
        }
        capital_scope = { 
           create_unit = {
                division = "name = \"Imperial Guards\" division_template = \"Imperial Guards\" start_experience_factor = 0.05 start_equipment_factor = 1.0"
                owner = ROOT
                count = 8
            }
        }
        if = {
			limit = {
				has_template = "Royal Armor"
			}
			delete_unit_template_and_units = {
				division_template = "Royal Armor"
				disband = no
			}
		}
        division_template = {
            name = "Imperial Armor"	
            division_names_group = EQS_ARM_02
            template_counter = 85

            regiments = {
                light_armor = { x = 0 y = 0 }
                light_armor = { x = 0 y = 1 }
                light_armor = { x = 0 y = 2 }
                light_armor = { x = 0 y = 3 }
                motorized = { x = 1 y = 0 }
                motorized = { x = 1 y = 1 }
                motorized = { x = 1 y = 2 }
                motorized = { x = 1 y = 3 }
                light_armor = { x = 2 y = 0 }
                light_armor = { x = 2 y = 1 }
                light_armor = { x = 2 y = 2 }
                light_armor = { x = 2 y = 3 }
                motorized = { x = 3 y = 0 }
                motorized = { x = 3 y = 1 }
                motorized = { x = 3 y = 2 }
                motorized = { x = 3 y = 3 }
            }

            support = {
                engineer = { x = 0 y = 0 }
                artillery = { x = 0 y = 1 }
                recon = { x = 0 y = 2 }
            }
            priority = 2
        }
        capital_scope = { 
           create_unit = {
                division = "name = \"Imperial Armor\" division_template = \"Imperial Armor\" start_experience_factor = 0.05 start_equipment_factor = 1.0"
                owner = ROOT
            }
        }
	}
}

country_event = { #Victory against NLR
	id = solarempire.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.10"}
	title = solarempire.10.t
	desc = solarempire.10.d
	picture = GFX_event_nmm_red_moon

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.10.a
        add_stability = 0.1
        add_political_power = 100
        NLR = {
            NLR_nightmare_moon = {
                retire = yes
            }
        }
        hidden_effect = {
            every_state = {
                limit = {
                    is_core_of = NLR
                }
                remove_core_of = NLR
            }
            if = {
                limit = {
                    3 = {
                        is_owned_and_controlled_by = ROOT
                    }
                }
                set_capital = {
                    state = 3
                    remember_old_capital = no
                }
            }
            if = {
                limit = {
                    FLY = {
                        exists = no
                    }
                    has_country_flag = SOL_twilight_captured
                }
                country_event = { id = solarempiresparkles.1 days = 3 }
                country_event = { id = solarempire.8 days = 120 }
            }
        }
	}
}

country_event = { #Extent of mobilization 
	id = solarempire.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.11"}
	title = solarempire.11.t
	desc = solarempire.11.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.11.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        EAW_raise_conscription_law = yes
        EAW_raise_economic_law = yes
	}
    option = {
		name = solarempire.11.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        if = {
            limit = {
                has_idea = civilian_economy
            }
            add_ideas = partial_economic_mobilisation
        }
        else_if = {
            limit = {
                has_idea = low_economic_mobilisation
            }
            add_ideas = war_economy
        }
        else_if = {
            limit = {
                has_idea = partial_economic_mobilisation
            }
            add_ideas = tot_economic_mobilisation
        }
        else_if = {
            limit = {
                has_idea = war_economy
            }
            add_ideas = tot_economic_mobilisation
        }
        
        if = {
            limit = {
                has_idea = disarmed_nation
            }
            add_ideas = limited_conscription
        }
        else_if = {
            limit = {
                has_idea = volunteer_only
            }
            add_ideas = extensive_conscription
        }
        else_if = {
            limit = {
                has_idea = limited_conscription
            }
            add_ideas = service_by_requirement
        }
        else_if = {
            limit = {
                has_idea = extensive_conscription
            }
            add_ideas = all_adults_serve
        }
        else_if = {
            limit = {
                has_idea = service_by_requirement
            }
            add_ideas = scraping_the_barrel
        }
        else_if = {
            limit = {
                has_idea = all_adults_serve
            }
            add_ideas = scraping_the_barrel
        }
	}
}
country_event = { #Oaths of loyalty
	id = solarempire.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.12"}
	title = solarempire.12.t
	desc = solarempire.12.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.12.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        add_political_power = -25
        add_stability = -0.025
        add_war_support = -0.025
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
	}
    option = {
		name = solarempire.12.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        add_manpower = -15000
        custom_effect_tooltip = EQS_SOL_ponies_defect_2_tt
        hidden_effect = {
            EQS_swift_wing = { set_nationality = SOL }
            EQS_fancy_pants = { set_nationality = SOL }
            EQS_fleetfoot = { set_nationality = SOL }
            EQS_fireflight = { set_nationality = SOL }
            if = {
                limit = {
                    has_character = EQS_sunrise_moonshadow
                }
                EQS_sunrise_moonshadow = {
                    set_nationality = SOL
                }
            }
            if = {
                limit = {
                    has_character = EQS_NLR_tempest_wind
                }
                EQS_NLR_tempest_wind = {
                    set_nationality = SOL
                }
            }
            if = {
                limit = {
                    has_character = EQS_NLR_bipen
                }
                EQS_NLR_bipen = {
                    set_nationality = SOL
                }
            }
            if = {
                limit = {
                    has_character = EQS_NLR_midnight_oil
                }
                EQS_NLR_midnight_oil = {
                    set_nationality = SOL
                }
            }
            if = {
                limit = {
                    has_character = EQS_NLR_celenite
                }
                EQS_NLR_celenite = {
                    set_nationality = SOL
                }
            }
            if = {
                limit = {
                    has_character = EQS_oli_equites
                }
                EQS_oli_equites = {
                    set_nationality = SOL
                }
            }
        }
	}
}
country_event = { #Fresh blood
	id = solarempire.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.13"}
	title = solarempire.13.t
	desc = solarempire.13.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.13.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        custom_effect_tooltip = SOL_many_new_characters_tt
        set_country_flag = SOL_new_generals_flag
        set_country_flag = SOL_advisors_unlocked
        set_country_flag = SOL_extra_characters_flag
        add_political_power = -50
        add_stability = -0.05
        add_war_support = -0.05
        add_manpower = 30000
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
	}
    option = {
		name = solarempire.13.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        custom_effect_tooltip = SOL_some_new_characters_tt
        set_country_flag = SOL_new_generals_flag
        set_country_flag = SOL_advisors_unlocked
        add_political_power = 50
        add_stability = 0.05
        add_war_support = 0.05
        add_manpower = 20000
	}
}
country_event = { #Judge dredd
	id = solarempire.17
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.17"}
	title = solarempire.17.t
	desc = solarempire.17.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.17.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        set_technology = { penal_infantry = 1 popup = no }
        add_ideas = SOL_chance_for_redemption
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
        remove_advisor_role = {
            character = EQS_raven_inkwell
            slot = political_advisor
        }
	}
    option = {
		name = solarempire.17.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        add_stability = 0.15
        custom_effect_tooltip = SOL_future_warning
        set_country_flag = SOL_death_penalty
        remove_advisor_role = {
            character = EQS_raven_inkwell
            slot = political_advisor
        }
	}
}
country_event = { #Protectress
	id = solarempire.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.18"}
	title = solarempire.18.t
	desc = solarempire.18.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.18.a
        #portrait stuff here
        swap_ruler_traits = { remove = solar_empress add = daybreaker_protector }
        remove_power_balance = {
            id = EQS_SOL_personality_bop
        }
        mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #God empress
	id = solarempire.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.19"}
	title = solarempire.19.t
	desc = solarempire.19.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.19.a
        #portrait stuff here
        swap_ruler_traits = { remove = solar_empress add = daybreaker_god }
        remove_power_balance = {
            id = EQS_SOL_personality_bop
        }
        set_country_leader_ideology = falangism
        mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #Normie (NOT MOMMY, GO AWAY)
	id = solarempire.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.20"}
	title = solarempire.20.t
	desc = solarempire.20.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.20.a
        #portrait stuff here
        swap_ruler_traits = { remove = solar_empress add = daybreaker_empress }
        remove_power_balance = {
            id = EQS_SOL_personality_bop
        }
        mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #Lunarist scum
	id = solarempire.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.21"}
	title = solarempire.21.t
	desc = solarempire.21.d
	picture = GFX_event_bat_soldier2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.21.a
        add_manpower = 20000
        effect_tooltip = {
            EQS_sunrise_moonshadow = {
                set_nationality = ROOT
            }
            EQS_oli_equites = { set_nationality = ROOT }
        }
	}
}
country_event = { #Harmonic civil war
	id = solarempire.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.22"}
	title = solarempire.22.t
	desc = solarempire.22.d
	picture = GFX_event_equestria_fail

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.22.a
        set_variable = { civ_war_size = SOL_resistance_size }
        multiply_variable = { civ_war_size = 0.01 }
        clamp_variable = {
            var = civ_war_size
            min = 0.01
            max = 1
        }
        add_stability = -0.3
        add_war_support = -0.3
        add_political_power = -250
        start_civil_war = {
            ideology = democratic
            size = civ_war_size
            keep_unit_leaders_trigger = { always = yes }
            hidden_effect = {
                #placeholder
                load_focus_tree = { tree = generic_focus keep_completed = yes }
                set_country_flag = { flag = celestia_evil_meter value = 0 }
                set_country_flag = EQS_wartime_advisors
                set_country_flag = EQS_new_royal_captain
                set_country_flag = EQS_wartime_generals
                set_country_flag = EQS_sunset_shimmer_arrived
                set_country_flag = EQS_lunar_guard_integrated
                set_country_flag = EQS_OC_generals
                set_country_flag = EQS_luna_ruler
                save_global_event_target_as = equestria
                #I LOVE THE CHARACTER SYSTEM I LOVE THE CHARACTER SYSTEM
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_sunrise_moonshadow
                        }
                    }
                    SOL = {
                        EQS_sunrise_moonshadow = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_oli_equites
                        }
                    }
                    SOL = {
                        EQS_oli_equites = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_NLR_tempest_wind
                        }
                    }
                    SOL = {
                        EQS_NLR_tempest_wind = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_NLR_bipen
                        }
                    }
                    SOL = {
                        EQS_NLR_bipen = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_NLR_midnight_oil
                        }
                    }
                    SOL = {
                        EQS_NLR_midnight_oil = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_NLR_celenite
                        }
                    }
                    SOL = {
                        EQS_NLR_celenite = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_sweetie_drops
                        }
                    }
                    SOL = {
                        EQS_sweetie_drops = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_applejack
                        }
                    }
                    SOL = {
                        EQS_applejack = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_rainbowdash
                        }
                    }
                    SOL = {
                        EQS_rainbowdash = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_fluttershy
                        }
                    }
                    SOL = {
                        EQS_fluttershy = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_rarity
                        }
                    }
                    SOL = {
                        EQS_rarity = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_pinkie_pie
                        }
                    }
                    SOL = {
                        EQS_pinkie_pie = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_grannysmith
                        }
                    }
                    SOL = {
                        EQS_grannysmith = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_flash_magnus
                        }
                    }
                    SOL = {
                        EQS_flash_magnus = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_rockhoof
                        }
                    }
                    SOL = {
                        EQS_rockhoof = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_maudpie
                        }
                    }
                    SOL = {
                        EQS_maudpie = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_limestone
                        }
                    }
                    SOL = {
                        EQS_limestone = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_marble_pie
                        }
                    }
                    SOL = {
                        EQS_marble_pie = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_zecora
                        }
                    }
                    SOL = {
                        EQS_zecora = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_fizzlepop
                        }
                    }
                    SOL = {
                        EQS_fizzlepop = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_soarin
                        }
                    }
                    SOL = {
                        EQS_soarin = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_braeburn
                        }
                    }
                    SOL = {
                        EQS_braeburn = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_cocopomell
                        }
                    }
                    SOL = {
                        EQS_cocopomell = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        SOL = {
                            has_character = EQS_filthy_rich
                        }
                    }
                    SOL = {
                        EQS_filthy_rich = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                if = {
                    limit = {
                        PREV = {
                            has_character = EQS_sunset_shimmer
                        }
                    }
                    PREV = {
                        EQS_sunset_shimmer = {
                            set_nationality = PREV.PREV 
                        }
                    }
                }
                every_possible_country = {
                    limit = {
                        has_character = EQS_swift_wing
                    }
                    EQS_swift_wing = {
                        set_nationality = PREV.PREV  
                    }
                }
                every_possible_country = {
                    limit = {
                        has_character = EQS_fancy_pants
                    }
                    EQS_fancy_pants = {
                        set_nationality = PREV.PREV  
                    }
                }
                every_possible_country = {
                    limit = {
                        has_character = EQS_fleetfoot
                    }
                    EQS_fleetfoot = {
                        set_nationality = PREV.PREV  
                    }
                }
                every_possible_country = {
                    limit = {
                        has_character = EQS_fireflight
                    }
                    EQS_fireflight = {
                        set_nationality = PREV.PREV  
                    }
                }
            }
        }
        clear_variable = civ_war_size
        hidden_effect = {
            remove_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            news_event = { id = news.sol.5 hours = 6 }
        }
	}
    #Add option to switch sides once they get content
    #option = {
	#	name = solarempire.22.b
    #}
}
country_event = { #Spitfire flavor event
	id = solarempire.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.23"}
	title = solarempire.23.t
	desc = solarempire.23.d
	picture = GFX_event_canterlot

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.23.a
        add_manpower = 1000
        air_experience = 10
	}
}
country_event = { #FLY death
	id = solarempire.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.24"}
	title = solarempire.24.t
	desc = solarempire.24.d
	picture = GFX_event_pony_trench

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.24.a
        add_stability = 0.05
        add_political_power = 50
        hidden_effect = {
            if = {
                limit = {
                    NLR = {
                        exists = no
                    }
                    has_country_flag = SOL_twilight_captured
                }
                country_event = { id = solarempiresparkles.1 days = 3 }
                #country_event = { id = solarempire.8 days = 120 }
            }
            if = {
                limit = {
                    has_country_flag = SOL_death_penalty
                }
                country_event = { id = solarempire.25 days = 30 }
            }
        }
	}
}
country_event = { #Oh
	id = solarempire.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.25"}
	title = solarempire.25.t
	desc = solarempire.25.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.25.a
        add_stability = 0.05
        add_political_power = 50
        FLY = {
            FLY_republican_council = {
                retire = yes
            }
        }
	}
}

country_event = { #Beginning of Twilight event chain
	id = solarempiresparkles.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.1"}
	title = solarempiresparkles.1.t
	desc = solarempiresparkles.1.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.1.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.2
		}
	}
    option = {
		name = solarempiresparkles.1.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.3
		}
	}
}

country_event = { #Twilight event chain - prag 1
	id = solarempiresparkles.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.2"}
	title = solarempiresparkles.2.t
	desc = solarempiresparkles.2.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.2.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.4
		}
	}
    option = {
		name = solarempiresparkles.2.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.3
		}
	}
}

country_event = { #Twilight event chain - fan 1
	id = solarempiresparkles.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.3"}
	title = solarempiresparkles.3.t
	desc = solarempiresparkles.3.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.3.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
            country_event = { id = solarempiresparkles.5 days = 1 }
		}
	}
    option = {
		name = solarempiresparkles.3.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.6
		}
	}
}

country_event = { #Twilight event chain - prag 2
	id = solarempiresparkles.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.4"}
	title = solarempiresparkles.4.t
	desc = solarempiresparkles.4.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.4.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.7
		}
	}
    option = {
		name = solarempiresparkles.4.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.8
		}
	}
}

country_event = { #Twilight event chain - fan 1 prag 1
	id = solarempiresparkles.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.5"}
	title = solarempiresparkles.5.t
	desc = solarempiresparkles.5.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.5.a
        hidden_effect = {
			country_event = { id = solarempiresparkles.9 days = 1 }
		}
	}
    option = {
		name = solarempiresparkles.5.b
        custom_effect_tooltip = SOL_need_mane_six_tt
	}
    option = {
		name = solarempiresparkles.5.c
        hidden_effect = {
			country_event = { id = solarempiresparkles.12 days = 1 }
		}
	}
}

country_event = { #Twilight event chain - fan 2
	id = solarempiresparkles.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.6"}
	title = solarempiresparkles.6.t
	desc = solarempiresparkles.6.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.6.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.5 days = 1 }
		}
	}
    option = {
		name = solarempiresparkles.6.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.13 days = 30 }
		}
	}
}

country_event = { #Twilight event chain - prag 3
	id = solarempiresparkles.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.7"}
	title = solarempiresparkles.7.t
	desc = solarempiresparkles.7.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.7.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.10 days = 1 }
		}
	}
    option = {
		name = solarempiresparkles.7.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.8
		}
	}
}

country_event = { #Twilight event chain - prag 2 fan 1
	id = solarempiresparkles.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.8"}
	title = solarempiresparkles.8.t
	desc = solarempiresparkles.8.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.8.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.11 days = 3 }
		}
	}
    option = {
		name = solarempiresparkles.8.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.3
		}
	}
}

country_event = { #Twilight event chain - The Midnight
	id = solarempiresparkles.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.9"}
	title = solarempiresparkles.9.t
	desc = solarempiresparkles.9.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.9.a
        custom_effect_tooltip = SOL_twilight_gone_tt
        set_country_flag = SOL_twilight_fucked_off
        clr_country_flag = SOL_twilight_captured
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
        if = {
            limit = {
                NOT = {
                    has_country_leader = {
                        character = EQS_princess_luna
                    }
                }
            }
            EQS_twilight_sparkle = {
                add_country_leader_role = {
                    promote_leader = yes

                    country_leader = {
                        expire = "1965.1.1"
                        desc = "EQS_twilight_sparkle_desc"
                        ideology = alicornrule
                        traits = { element_of_magic }
                    }
                }
            }
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - The Hopeful
	id = solarempiresparkles.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.10"}
	title = solarempiresparkles.10.t
	desc = solarempiresparkles.10.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.10.a
        clr_country_flag = SOL_twilight_captured
        set_country_flag = SOL_twilight_loyalty
        custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = EQS_twilight_sparkle
        custom_effect_tooltip = SOL_twilight_loyalty_warning_tt
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - The Escapee
	id = solarempiresparkles.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.11"}
	title = solarempiresparkles.11.t
	desc = solarempiresparkles.11.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.11.a
        custom_effect_tooltip = SOL_twilight_gone_tt
        set_country_flag = SOL_twilight_fucked_off
        clr_country_flag = SOL_twilight_captured
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
        if = {
            limit = {
                NOT = {
                    has_country_leader = {
                        character = EQS_princess_luna
                    }
                }
            }
            EQS_twilight_sparkle = {
                add_country_leader_role = {
                    promote_leader = yes

                    country_leader = {
                        expire = "1965.1.1"
                        desc = "EQS_twilight_sparkle_desc"
                        ideology = alicornrule
                        traits = { element_of_magic }
                    }
                }
            }
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - Dark magic
	id = solarempiresparkles.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.12"}
	title = solarempiresparkles.12.t
	desc = solarempiresparkles.12.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.12.a
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = -0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.14
		}
	}
    option = {
		name = solarempiresparkles.12.b
        add_power_balance_value = {
            id = EQS_SOL_personality_bop
            value = 0.075
        }
        hidden_effect = {
			country_event = solarempiresparkles.15
		}
	}
}

country_event = { #Twilight event chain - The Burned
	id = solarempiresparkles.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.13"}
	title = solarempiresparkles.13.t
	desc = solarempiresparkles.13.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.13.a
        set_country_flag = SOL_twilight_injured
        remove_advisor_role = {
            character = EQS_twilight_sparkle
            slot = political_advisor
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - The Sunrise
	id = solarempiresparkles.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.14"}
	title = solarempiresparkles.14.t
	desc = solarempiresparkles.14.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.14.a
        clr_country_flag = SOL_twilight_captured
        remove_advisor_role = {
            character = EQS_twilight_sparkle
            slot = political_advisor
        }
        add_advisor_role = {
			character = EQS_twilight_sparkle
			advisor = {
				slot = political_advisor
				idea_token = EQS_twilight_sparkle

				traits = { lady_inquisitor }
                research_bonus = {
        			magical_tech = 0.1
        		}
				can_be_fired = no
			}
			activate = yes
		}
        EQS_twilight_sparkle = { 
            set_character_name = EQS_SOL_evil_twilight_sparkle
            set_portraits = {
                #civilian = {
                #    large = GFX_DaybreakerPortrait
               #}
                army = {
                    #large = GFX_DaybreakerPortrait
                    small = GFX_idea_evil_twilight_sparkle
                }
            }
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - The Furious
	id = solarempiresparkles.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.15"}
	title = solarempiresparkles.15.t
	desc = solarempiresparkles.15.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.15.a
        set_country_flag = SOL_twilight_enraged
        remove_advisor_role = {
            character = EQS_twilight_sparkle
            slot = political_advisor
        }
        hidden_effect = {
			country_event = { id = solarempiresparkles.16 days = 3 }
		}
	}
}

country_event = { #Twilight event chain - Sunset Shimmer disappears
	id = solarempiresparkles.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.16"}
	title = solarempiresparkles.16.t
	desc = solarempiresparkles.16.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempiresparkles.16.a
        custom_effect_tooltip = SOL_sunset_fucks_off_tt
        clr_country_flag = EQS_sunset_shimmer_arrived
        if = {
            limit = {
                has_dynamic_modifier = { modifier = SOL_harmonic_resistance }
            }
            EQS_SOL_strengthen_resistance_a_little = yes
        }
        if = {
            limit = {
                AND = {
                    NOT = {
                        has_country_leader = {
                            character = EQS_princess_luna
                        }
                    }
                    NOT = {
                        has_country_leader = {
                            character = EQS_twilight_sparkle
                        }
                    }
                }
            }
            EQS_sunset_shimmer = {
                add_country_leader_role = {
                    promote_leader = yes

                    country_leader = {
                        expire = "1965.1.1"
                        desc = "EQS_sunset_shimmer_desc"
                        ideology = harmonic_libertarianism #placeholder
                        traits = { dimensional_traveler }
                    }
                }
            }
        }
	}
}
# ##For CRY
# #country_event = {
	# #	id = solarempire.7

	# #	title = solarempire.7.t
	# #	desc = solarempire.7.d
	# #	picture = GFX_event_solarempire
	# #
	# #	#fire_only_once = yes
	# #
	# #	is_triggered_only = yes
	# #
	# #	option = { #k bend the knee
		# #		name = solarempire.7.a
		# #		add_political_power = -200
		# #		get_current_government_type = yes
		# #		event_target:solar_empire = { puppet = ROOT }
		# #		restore_previous_government_type = yes
		# #		add_autonomy_ratio = { value = 0.80 }
		# #		ai_chance = {
			# #			factor = 1
			# #			modifier = {
				# #				factor = 0
				# #				strength_ratio = { tag = event_target:solar_empire ratio > 0.8 }
				# #			}
			# #		}
		# #	}
	# #	option = { #refuse
		# #		name = solarempire.7.b
		# #		add_political_power = 100
		# #		event_target:solar_empire = { country_event = { id = solarempire.5 days = 1 } }
		# #		ai_chance = {
			# #			factor = 1
			# #		}
		# #	}
	# #}

# #Elements leave
# country_event = {
	# id = solarempire.8
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.8"}
	# title = solarempire.8.t
	# desc = solarempire.8.d
	# picture = GFX_event_solarempire

	# fire_only_once = yes

	# trigger = {
		# tag = event_target:solar_empire
		# OR = {
			# has_country_flag = EQS_create_new_commanders_flag
			# has_country_flag = EQS_sunset_shimmer_arrived
		# }
	# }

	# mean_time_to_happen = {
		# days = 180
		# modifier = {
			# factor = 4
			# has_defensive_war = yes
		# }
		# modifier = {
			# factor = 1.5
			# NOT = {
				# has_completed_focus = SOL_empress_mother
				# has_completed_focus = SOL_god_empress
			# }
		# }
		# modifier = {
			# factor = 0.7
			# has_offensive_war = yes
		# }
		# modifier = {
			# factor = 0.1
			# focus_progress = { focus = SOL_generals_loyality progress > 0.1 }
		# }
		# modifier = {
			# factor = 0.01
			# focus_progress = { focus = SOL_generals_loyality progress > 0.8 }
		# }
		# modifier = {
			# factor = 0.001
			# has_completed_focus = SOL_generals_loyality
		# }
	# }

	# option = { #very well
		# name = solarempire.8.a
		# add_political_power = -20
		# if = {
			# limit = { EQS_big_macintosh = { is_unit_leader = yes } }
			# remove_unit_leader_role = {
				# character = EQS_big_macintosh
			# }
		# }
		# if = {
			# limit = { EQS_pinkie_pie = { is_unit_leader = yes } }
			# remove_unit_leader_role = {
				# character = EQS_pinkie_pie
			# }
		# }
		# if = {
			# limit = { EQS_caltrop_decay = { is_unit_leader = yes } }
			# remove_unit_leader_role = {
				# character = EQS_caltrop_decay
			# }
		# }
		# if = {
			# limit = { EQS_braeburn = { is_unit_leader = yes } }
			# remove_unit_leader_role = {
				# character = EQS_braeburn
			# }
		# }
		# if = {
			# limit = { EQS_applejack = { is_unit_leader = yes } }
			# remove_unit_leader_role = {
				# character = EQS_applejack
			# }
		# }
		# if = {
			# limit = { has_country_flag = EQS_sunset_shimmer_arrived }
			# remove_unit_leader_role = {
				# character = EQS_sunset_shimmer
			# }
		# }
		# if = {
			# limit = { has_country_flag = EQS_starlight_glimmer_arrived }
			# remove_unit_leader_role = {
				# character = EQS_starlight_glimmer
			# }
		# }
		# set_country_flag = SOL_harmonic_commanders_leave
	# }
# }

# #Purge
# country_event = {
	# id = solarempire.10
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.10"}
	# title = solarempire.10.t
	# desc = {
		# text = solarempire.10.d_inq
		# trigger = {
			# has_completed_focus = SOL_god_empress
		# }
	# }
	# desc = {
		# text = solarempire.10.d
		# trigger = {
			# NOT = {
				# has_completed_focus = SOL_god_empress
			# }
		# }
	# }
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# trigger = {
		# OR = {
			# EQS_soarin = {
				# is_unit_leader = yes
			# }
			# EQS_fast_clip = {
				# is_unit_leader = yes
			# }
			# EQS_whiplash = {
				# is_unit_leader = yes
			# }
		# }
	# }

	# immediate = {
		# hidden_effect = { set_country_flag = SOL_purge_finished }
	# }

	# option = { #very well
		# name = solarempire.10.a
		# trigger = {
			# has_character = EQS_soarin
		# }
		# EQS_soarin = {
			# retire = yes
		# }
	# }
	# option = { #very well
		# name = solarempire.10.b
		# trigger = {
			# has_character = EQS_fast_clip
		# }
		# EQS_fast_clip = {
			# retire = yes
		# }
	# }
	# option = { #very well
		# name = solarempire.10.c
		# trigger = {
			# has_character = EQS_whiplash
		# }
		# EQS_whiplash = {
			# retire = yes
		# }
	# }
# }

# #New Generals
# country_event = {
	# id = solarempire.11
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.11"}
	# title = solarempire.11.t
	# desc = solarempire.11.d
	# picture = GFX_event_solarempire

	# fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempire.11.a
		# set_country_flag = SOL_new_generals_flag

		# custom_effect_tooltip = shining_star_pak_stats_tp

		# custom_effect_tooltip = scroup_whitemares_stats_tp

		# custom_effect_tooltip = aurora_shinespark_stats_tp

		# custom_effect_tooltip = midwinter_halo_stats_tp
		# if = {
			# limit = { NOT = { has_global_flag = EQS_Eisenstadt_created } }

			# custom_effect_tooltip = august_von_eisenstadt_stats_tp
			# set_global_flag = EQS_Eisenstadt_created
		# }

		# custom_effect_tooltip = comet_trail_stats_tp
		# hidden_effect = {
			# if = {
				# limit = { NOT = { has_global_flag = EQS_Comet_Trail_created } }
				# if = {
					# limit = { has_dlc = "Waking the Tiger" }
					# EQS_SOL_comet_trail = {
						# add_trait = {
							# trait = supply_raider
						# }
					# }

					# else = {
						# EQS_SOL_comet_trail = {
							# add_trait = {
								# trait = supply_raider_no_wtt
							# }
						# }
					# }
				# }
				# set_global_flag = EQS_Comet_Trail_created
			# }
			# else_if = {
				# limit = { NOT = { has_character = EQS_SOL_comet_trail } }
				# every_possible_country = {
					# limit = {
						# has_character = EQS_SOL_comet_trail
					# }
					# EQS_SOL_comet_trail = {
						# set_nationality = ROOT
					# }
				# }
			# }
		# }

		# custom_effect_tooltip = capsaicin_stats_tp

		# custom_effect_tooltip = comm_rush_stats_tp

		# custom_effect_tooltip = stormchaser_stats_tp
	# }
# }

# country_event = {
	# id = solarempire.123
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.123"}
	# title = solarempire.123.t
	# desc = solarempire.123.d
	# picture = GFX_event_pony_statue

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = former_EQS_puppet
	# }

	# immediate = {
		# hidden_effect = {
			# remove_from_array = {
				# global.former_EQS_puppets = THIS
			# }
			# clr_country_flag = former_EQS_puppet
			# #clr_country_flag = supported_EQS
		# }
	# }

	# option = {
		# name = solarempire.12.a
		# hidden_effect = { get_current_government_type = yes }
		# FROM = { puppet = ROOT }
		# set_previous_autonomy_level = yes
		# hidden_effect = { restore_previous_government_type = yes }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 2
			# modifier = {
				# factor = 5
				# has_country_flag = supported_EQS
			# }
			# modifier = {
				# factor = 0.75
				# strength_ratio = { tag = FROM ratio > 0.8 }
			# }
			# modifier = {
				# original_tag = EQC
				# has_completed_focus = EQC_patriation
				# factor = 0
			# }
		# }
	# }
	# option = {
		# name = solarempire.12.b
		# FROM = {
			# create_wargoal = {
				# target = ROOT type = puppet_wargoal_focus
			# }
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
		# }
	# }
# }

# country_event = {
	# id = solarempire.122
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.122"}
	# title = solarempire.122.t
	# desc = solarempire.122.d
	# picture = GFX_event_lunar_republic

	# is_triggered_only = yes

	# immediate = {
		# hidden_effect = {
			# remove_from_array = {
				# global.former_EQS_puppets = THIS
			# }
			# clr_country_flag = former_EQS_puppet
			# #clr_country_flag = supported_NLR
		# }
	# }

	# option = {
		# name = solarempire.12.a
		# hidden_effect = { get_current_government_type = yes }
		# FROM = { puppet = ROOT }
		# set_previous_autonomy_level = yes
		# hidden_effect = { restore_previous_government_type = yes }
		# if = {
			# limit = {
				# original_tag = EQC
			# }
			# if = {
				# limit = {
					# has_dlc = "Together for Victory"
				# }
				# FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_satellite } }
			# }
			# load_focus_tree = eqc_nlr_focus
			# retire_country_leader = yes
			# add_country_leader_role = {
				# character = EQC_jet_set
				# promote_leader = yes

				# country_leader = {
					# desc = "snooty_noble_desc"
					# expire = "1965.1.1"
					# ideology = centrism
					# id = 700 #Jet Set
					# traits = { democratic_sympathies }
				# }
			# }
			# set_politics = {
				# ruling_party = neutrality
				# elections_allowed = no
			# }
			# set_party_name = { ideology = neutrality long_name = EQC_bat_supporters name = EQC_bat_supporters }
			# country_event = { id = mareland.44 days = 1 }
			# add_stability = -0.2
			# add_war_support = -0.2
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 5
				# has_country_flag = supported_NLR
			# }
			# modifier = {
				# factor = 0.1
				# strength_ratio = { tag = FROM ratio > 0.8 }
			# }
			# modifier = {
				# original_tag = EQC
				# has_completed_focus = EQC_patriation
				# factor = 0
			# }
		# }
	# }
	# option = {
		# name = solarempire.12.b
		# FROM = {
			# create_wargoal = {
				# target = ROOT type = puppet_wargoal_focus
			# }
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
		# }
	# }
# }

# country_event = {
	# id = solarempire.12
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.12"}
	# title = solarempire.12.t
	# desc = solarempire.12.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = former_EQS_puppet
	# }

	# immediate = {
		# hidden_effect = {
			# remove_from_array = {
				# global.former_EQS_puppets = THIS
			# }
			# clr_country_flag = former_EQS_puppet
			# #clr_country_flag = supported_SOL
		# }
	# }

	# option = {
		# name = solarempire.12.a
		# hidden_effect = { get_current_government_type = yes }
		# FROM = { puppet = ROOT }
		# set_previous_autonomy_level = yes
		# hidden_effect = { restore_previous_government_type = yes }
		# if = {
			# limit = {
				# original_tag = EQC
				# NOT = { has_focus_tree = eqc_sol_focus }
			# }
			# load_focus_tree = eqc_sol_focus
			# set_cosmetic_tag = EQC_SOL
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
			# modifier = {
				# factor = 5
				# has_country_flag = supported_SOL
			# }
			# modifier = {
				# factor = 0.1
				# strength_ratio = { tag = FROM ratio > 0.8 }
			# }
			# modifier = {
				# original_tag = EQC
				# has_completed_focus = EQC_patriation
				# factor = 0
			# }
		# }
	# }
	# option = {
		# name = solarempire.12.b
		# FROM = {
			# create_wargoal = {
				# target = ROOT type = puppet_wargoal_focus
			# }
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
			# modifier = {
				# factor = 0
				# has_country_flag = EQC_solar_coup
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempire.13
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.13"}
	# title = solarempire.13.t
	# desc = solarempire.13.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes
	# option = {
		# name = solarempire.13.a
		# custom_effect_tooltip = available_political_advisor
		# show_ideas_tooltip = evil_twilight_sparkle
		# if = {
			# limit = {
				# CRY = {
					# is_subject_of = ROOT
					# NOT = { has_country_flag = CRY_solar_governorship }
				# }
			# }
			# country_event = solarempire.131
		# }
	# }
# }

country_event = {
	id = solarempire.131
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.131"}
	title = solarempire.131.t
	desc = solarempire.131.d
	picture = GFX_event_solarempire
	trigger = {
		NOT = { has_global_flag = CRY_puppet_chosen }
	}
	immediate = {
		hidden_effect = {
			random_country_with_original_tag = {
				original_tag_to_check = CRY
				limit = { is_subject_of = ROOT NOT = { has_country_flag = CRY_solar_governorship } }
				save_event_target_as = puppet_CRY
			}
			set_global_flag = CRY_puppet_chosen
		}
	}
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = solarempire.131.a
		hidden_effect = {
			event_target:puppet_CRY = {
				set_cosmetic_tag = CRY_SOL
				country_event = solarempire.132
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_global_flag = EQS_evil_celestia
			}
		}
	}
	option = {
		name = solarempire.131.b
		effect_tooltip = {
			EQS_twilight_sparkle = {
				set_nationality = event_target:puppet_CRY
				promote_character = yes
			}
		}
		event_target:puppet_CRY = {
			effect_tooltip = {
				load_focus_tree = crystal_empire_solar_focus
			}
			hidden_effect = {
				# workaround for set_autonomy resetting controller
				every_owned_state = {
					limit = {
						NOT = { is_controlled_by = PREV }
					}
					set_variable = { CRY_controller = this.controller }
				}
				ROOT = {
					set_country_flag = SOL_twilight_governor
					set_autonomy = { target = PREV autonomy_state = autonomy_reichskommissariat }
				}
				every_owned_state = {
					limit = {
						has_variable = CRY_controller
					}
					var:CRY_controller = { set_state_controller = PREV }
					clear_variable = CRY_controller
				}
				set_cosmetic_tag = CRY_SOL
				add_autonomy_ratio = { value = -0.20 }
				set_country_flag = CRY_solar_governorship

				country_event = solarempire.133
			}
		}
		ai_chance = {
			factor = 3
		}
	}
}

# country_event = {
	# id = solarempire.132
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.132"}
	# title = solarempire.132.t
	# desc = solarempire.132.d
	# picture = GFX_event_solarempire
	# is_triggered_only = yes
	# option = {
		# name = solarempire.132.a
	# }
# }

# country_event = {
	# id = solarempire.133
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.133"}
	# title = solarempire.133.t
	# desc = solarempire.133.d
	# picture = GFX_event_solarempire
	# is_triggered_only = yes
	# option = {
		# name = solarempire.133.a
		# set_party_name = { ideology = fascism long_name = EQS_SOL_fascism_party_long name = EQS_SOL_fascism_party }
		# every_possible_country = {
			# limit = {
				# has_character = EQS_twilight_sparkle
			# }
			# EQS_twilight_sparkle = {
				# set_nationality = ROOT
			# }
		# }
		# EQS_twilight_sparkle = {
			# promote_character = falangism
		# }
		# load_focus_tree = crystal_empire_solar_focus

		# if = {
			# limit = {
				# has_character = CRY_shining_armour
				# CRY_shining_armour = { is_unit_leader = yes }
			# }
			# remove_unit_leader_role = CRY_shining_armour
		# }
	# }
# }

country_event = {
	id = solarempire.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.14"}
	title = solarempire.14.t
	desc = solarempire.14.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	trigger = {
		NOT = {
			original_tag = CES
		}
	}

	option = { #Stay neutral
		name = solarempire.14.a
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = NLR
				every_enemy_country = {
					limit = {
						is_in_faction_with = NLR
					}
					white_peace = ROOT
				}
			}
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				original_tag = CRY
			}
			modifier = {
				is_major = yes
				factor = 6
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 1.5
			}
		}
	}
	option = { #Support Daybreaker
		name = solarempire.14.b
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = EQS enemy = NLR
			}
		}
		if = {
			limit = {
				original_tag = EQC
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
			set_cosmetic_tag = EQC_SOL
		}
		hidden_effect = {
			country_event = { id = equestria.160 days = 1 }
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 1.5
				NOT = { original_tag = CRY }
			}
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 2
				has_autonomy_state = autonomy_integrated_puppet
			}
			modifier = {
				factor = 1.5
				has_autonomy_state = autonomy_puppet
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 0.75
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 0.5
			}
		}
	}
	option = { #Support NMM
		name = solarempire.14.c
		if = {
			limit = { is_subject_of = event_target:solar_empire }
			get_current_autonomy_level = yes
			add_to_array = {
				global.former_EQS_puppets = THIS
			}
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_NLR
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = NLR
				every_enemy_country = {
					limit = {
						is_in_faction_with = NLR
					}
					white_peace = ROOT
				}
			}
		}
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = NLR enemy = EQS
			}
		}
		hidden_effect = {
			country_event = { id = equestria.163 days = 1 }
		}
		ai_chance = {
			factor = 1 #ya gotta be kidding
		}
	}
}

country_event = {
	id = solarempire.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.15"}
	title = solarempire.15.t
	desc = solarempire.15.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = { #Break free
		name = solarempire.15.a
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		if = {
			limit = { NOT = { original_tag = CRY } }
			event_target:solar_empire = {
				create_wargoal = {
					target = ROOT type = puppet_wargoal_focus
				}
			}
		}
		clr_country_flag = CRY_thinking_about_staying_a_SOL_puppet
		ai_chance = {
			factor = 2
			modifier = {
				factor = 8
				original_tag = CRY
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 1.5
			}
		}
	}
	option = { #Status quo
		name = solarempire.15.b
		hidden_effect = {
			clr_country_flag = CRY_thinking_about_staying_a_SOL_puppet
			country_event = solarempiresparkles.103
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 4
				has_autonomy_state = autonomy_integrated_puppet
				NOT = { original_tag = CRY }
			}
			modifier = {
				factor = 2
				has_autonomy_state = autonomy_puppet
				NOT = { original_tag = CRY }
			}
		}
	}
}

country_event = {
	id = solarempire.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.16"}
	hidden = yes

	trigger = {
		event_target:solar_empire = {
			exists = yes
			# has_completed_focus = SOL_Imperium_Solis
			has_DB_ruler = yes
		}
		has_war_with = event_target:solar_empire
		NOT = { has_idea = SOL_enemy_debuff_idea }
	}

	mean_time_to_happen = { days = 7 }

	immediate = {
		add_ideas = SOL_enemy_debuff_idea
	}

	option = {
	}
}

#Twiggles thinks of running away
# country_event = {
	# id = solarempire.17
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.17"}
	# hidden = yes
	# is_triggered_only = yes

	# immediate = {
		# if = {
			# limit = { has_country_flag = sol_wartime_change }
			# random_list = {
				# 10 = {

				# }
				# 90 = {
					# set_country_flag = SOL_has_twilight
				# }
			# }
		# }
		# else = {
			# random_list = {
				# 30 = {

				# }
				# 70 = {
					# set_country_flag = SOL_has_twilight
				# }
			# }
		# }
		# if = {
			# limit = {
				# NOT = {
					# any_country = {
						# OR = {
							# AND = {
								# original_tag = EQS
								# has_government = democratic
								# NOT = {
									# is_subject_of = ROOT
									# is_in_faction_with = ROOT
								# }
								# has_capitulated = no
								# exists = yes
							# }
							# AND = {
								# original_tag = CRY
								# has_government = democratic
								# NOT = {
									# is_subject_of = ROOT
									# is_in_faction_with = ROOT
									# has_war_together_with = ROOT
								# }
								# has_capitulated = no
								# exists = yes
							# }
						# }
					# }
				# }
			# }
			# set_country_flag = SOL_has_twilight
		# }
		# if = {
			# limit = {
				# any_country = {
					# has_country_leader = { character = EQS_twilight_sparkle ruling_only = yes }
				# }
			# }
			# clr_country_flag = SOL_has_twilight
			# random_country = {
				# limit = { has_country_leader = { character = EQS_twilight_sparkle ruling_only = yes } }
				# save_event_target_as = sparkle_CRY
				# set_country_flag = EQS_CRY_has_twilight
			# }
			# if = {
				# limit = {
					# event_target:sparkle_CRY = { has_country_flag = supported_SOL }
				# }
				# news_event = solarempire.19
			# }
			# else_if = {
				# limit = { NOT = { has_war_with = event_target:sparkle_CRY } }
				# news_event = solarempire.20
			# }
		# }
		# else_if = {
			# limit = { has_country_flag = SOL_has_twilight }
			# random_country_with_original_tag = {
				# original_tag_to_check = EQS
				# limit = {
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
				# news_event = solarempire.18
			# }
		# }
		# else_if = {
			# limit = {
				# any_country_with_original_tag = {
					# original_tag_to_check = EQS
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
			# }
			# random_country_with_original_tag = {
				# original_tag_to_check = EQS
				# limit = {
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
						# has_war_together_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
				# set_country_flag = EQS_CRY_has_twilight
				# if = {
					# limit = { NOT = { has_character = EQS_fizzlepop } }
					# every_possible_country = {
						# limit = {
							# has_character = EQS_fizzlepop
						# }
						# EQS_fizzlepop = {
							# set_nationality = PREV.PREV
						# }
					# }
				# }
			# }
			# news_event = solarempire.21
		# }
		# else_if = {
			# limit = {
				# any_country_with_original_tag = {
					# original_tag_to_check = CRY
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
						# has_war_together_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
			# }
			# random_country_with_original_tag = {
				# original_tag_to_check = CRY
				# limit = {
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
				# if = {
					# limit = { NOT = { has_character = EQS_fizzlepop } }
					# every_possible_country = {
						# limit = {
							# has_character = EQS_fizzlepop
						# }
						# EQS_fizzlepop = {
							# set_nationality = PREV.PREV
						# }
					# }
				# }
				# set_country_flag = EQS_CRY_has_twilight
				# add_ideas = twilight_sparkle_cry
				# news_event = { id = solarempire.25 days = 1 }
			# }
			# news_event = solarempire.21
		# }
		# else = { set_country_flag = SOL_has_twilight }
	# }

	# option = {
	# }
# }

# #solarempire.18 - Twilight caught by DB
# #solarempire.19 - Twilight is CRY HoS, agreed to stay a puppet
# #solarempire.20 - Twilight is CRY HoS, didn't agree to stay a puppet
# #solarempire.21 - Twilight runs away

# #Twilight caught by DB
# news_event = {
	# id = solarempire.18
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.18"}
	# title = solarempire.18.t
	# desc = {
		# text = solarempire.18.d_sol
		# trigger = {
			# OR = {
				# NOT = { has_government = democratic }
				# has_war_together_with = event_target:solar_empire
				# is_in_faction_with = event_target:solar_empire
				# is_subject_of = event_target:solar_empire
			# }
		# }
	# }
	# desc = {
		# text = solarempire.18.d_eqs
		# trigger = {
			# OR = {
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
	# picture = GFX_news_daybreaker

	# #fire_only_once = yes

	# is_triggered_only = yes

	# major = yes

	# option = {
		# name = solarempire.18.a
		# trigger = {
			# tag = event_target:solar_empire
		# }
		# add_political_power = 20
		# effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	# }
	# option = {
		# name = solarempire.18.b
		# trigger = {
			# tag = event_target:equestria
		# }
	# }
	# option = {
		# name = solarempire.18.c
		# trigger = {
			# NOT = {
				# tag = event_target:equestria
				# tag = event_target:solar_empire
			# }
		# }
	# }
# }

# #Twilight is CRY HoS, agreed to stay a puppet
# news_event = {
	# id = solarempire.19
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.19"}
	# title = solarempire.19.t
	# desc = solarempire.19.d
	# picture = GFX_crystal_city_news

	# fire_only_once = yes

	# is_triggered_only = yes

	# major = yes

	# option = {
		# name = solarempire.19.a
		# trigger = {
			# tag = event_target:solar_empire
		# }
		# add_political_power = 20
		# effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	# }
	# option = {
		# name = solarempire.19.b
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
	# option = {
		# name = solarempire.19.c
		# trigger = {
			# NOT = { tag = event_target:solar_empire }
			# OR = {
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
# }

# #Twilight is CRY HoS, didn't agree to stay a puppet
# news_event = {
	# id = solarempire.20
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.20"}
	# title = solarempire.20.t
	# desc = solarempire.20.d
	# picture = GFX_crystal_city_news

	# fire_only_once = yes

	# is_triggered_only = yes

	# major = yes

	# option = {
		# trigger = { NOT = { tag = event_target:solar_empire } }
		# name = solarempire.20.a
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempire.20.b
	# }
# }

# #solarempire.21 - Twilight runs away
# news_event = {
	# id = solarempire.21
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.21"}
	# title = solarempire.21.t
	# desc = {
		# text = solarempire.21.d_eqs
		# trigger = {
			# any_country_with_original_tag = {
				# original_tag_to_check = EQS
				# has_country_flag = EQS_CRY_has_twilight
			# }
		# }
	# }
	# desc = {
		# text = solarempire.21.d_cry
		# trigger = {
			# any_country_with_original_tag = {
				# original_tag_to_check = CRY
				# has_country_flag = EQS_CRY_has_twilight
			# }
		# }
	# }
	# picture = GFX_news_twilight_escape

	# fire_only_once = yes

	# is_triggered_only = yes

	# major = yes

	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempire.21.a
	# }
	# option = {
		# trigger = { has_country_flag = EQS_CRY_has_twilight }
		# name = solarempire.21.b
	# }
	# option = {
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# has_country_flag = EQS_CRY_has_twilight
			# }
		# }
		# name = solarempire.21.c
	# }
# }

# #solarempire.22 - Twilight runs away again (to CRY)
# country_event = {
	# id = solarempire.22
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.22"}
	# hidden = yes

	# fire_only_once = yes

	# trigger = {
		# tag = event_target:solar_empire
		# any_enemy_country = {
			# original_tag = EQS
			# has_country_flag = EQS_CRY_has_twilight
			# OR = {
				# has_capitulated = yes
				# capital_scope = { is_controlled_by = ROOT }
			# }
		# }
	# }

	# mean_time_to_happen = {
		# days = 2
	# }

	# immediate = {
		# if = {
			# limit = {
				# any_country_with_original_tag = {
					# original_tag_to_check = CRY
					# has_government = democratic
					# NOT = {
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
						# has_war_together_with = ROOT
					# }
					# has_capitulated = no
					# exists = yes
				# }
			# }
			# random_list = {
				# 50 = {
					# every_country = {
						# clr_country_flag = EQS_CRY_has_twilight
					# }
					# set_country_flag = SOL_has_twilight
					# news_event = { id = solarempire.23 days = 1 }
				# }
				# 50 = {
					# random_country_with_original_tag = {
						# original_tag_to_check = CRY
						# limit = {
							# has_government = democratic
							# NOT = {
								# is_subject_of = ROOT
								# is_in_faction_with = ROOT
								# has_war_together_with = ROOT
							# }
							# has_capitulated = no
							# exists = yes
						# }
						# set_country_flag = EQS_CRY_has_twilight
						# add_ideas = twilight_sparkle_cry
						# every_other_country = {
							# clr_country_flag = EQS_CRY_has_twilight
						# }
						# news_event = { id = solarempire.25 days = 2 }
					# }
					# news_event = { id = solarempire.24 days = 1 }
				# }
			# }
		# }
		# else = {
			# every_country = {
				# clr_country_flag = EQS_CRY_has_twilight
			# }
			# set_country_flag = SOL_has_twilight
			# news_event = { id = solarempire.23 days = 1 }
		# }
	# }

	# option = {
	# }
# }

# #SOL catches twilight after EQS is defeated
# news_event = {
	# id = solarempire.23
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.23"}
	# title = solarempire.23.t
	# desc = solarempire.23.d
	# picture = GFX_news_daybreaker

	# fire_only_once = yes

	# major = yes

	# #is_triggered_only = yes

	# trigger = {
		# event_target:solar_empire = {
			# exists = yes
			# NOT = { has_country_flag = SOL_has_twilight }
		# }
		# CRY = {
			# OR = {
				# is_subject_of = event_target:solar_empire
				# exists = no
			# }
		# }
		# NOT = {
			# AND = {
				# any_country_with_original_tag = {
					# original_tag_to_check = EQS
					# NOT = { tag = ROOT }
					# NOT = { is_subject_of = event_target:solar_empire }
					# exists = yes
				# }
			# }
		# }
	# }

	# option = {
		# name = solarempire.23.a
		# trigger = { tag = event_target:solar_empire }
		# hidden_effect = {
			# set_country_flag = SOL_has_twilight
			# every_country = {
				# clr_country_flag = EQS_CRY_has_twilight
			# }
		# }
		# add_political_power = 20
		# effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	# }
	# option = {
		# name = solarempire.23.b
		# trigger = {
			# NOT = { tag = event_target:solar_empire }
			# OR = {
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
	# option = {
		# name = solarempire.23.c
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
# }

# #Twilight runs away to CRY after EQS is defeated
# news_event = {
	# id = solarempire.24
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.24"}
	# title = solarempire.24.t
	# desc = solarempire.24.d
	# picture = GFX_news_twilight_escape

	# fire_only_once = yes

	# major = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempire.24.a
		# trigger = { tag = event_target:solar_empire }
	# }
	# option = {
		# name = solarempire.24.b
		# trigger = { original_tag = CRY }
	# }
	# option = {
		# name = solarempire.24.c
		# trigger = {
			# NOT = {
				# original_tag = CRY
				# tag = event_target:solar_empire
			# }
			# OR = {
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
	# option = {
		# name = solarempire.24.e
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# original_tag = CRY
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
# }

# #Twilight runs away to CRY after EQS is defeated
# #For CRY
# news_event = {
	# id = solarempire.25
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.25"}
	# title = solarempire.25.t
	# desc = solarempire.25.d
	# picture = GFX_crystal_city_news

	# fire_only_once = yes

	# major = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempire.25.a
		# trigger = { has_country_flag = EQS_CRY_has_twilight }
		# effect_tooltip = { add_ideas = twilight_sparkle_cry }
	# }
	# option = {
		# name = solarempire.25.b
		# trigger = { tag = event_target:solar_empire }
		# every_country = {
			# limit = { original_tag = CRY has_country_flag = EQS_CRY_has_twilight }
			# reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = hostility }
		# }
	# }
	# option = {
		# name = solarempire.25.c
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# original_tag = CRY
			# }
		# }
	# }
# }

# news_event = {
	# id = solarempire.26
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.26"}
	# title = solarempire.26.t
	# desc = solarempire.26.d
	# picture = GFX_news_daybreaker

	# fire_only_once = yes
	# major = yes

	# trigger = {
		# event_target:solar_empire = {
			# exists = yes
			# NOT = { has_country_flag = SOL_has_twilight }
		# }
		# OR = {
			# NOT = { country_exists = CRY }
			# any_country_with_original_tag = {
				# original_tag_to_check = CRY
				# has_country_flag = EQS_CRY_has_twilight
				# OR = {
					# has_capitulated = yes
					# is_subject_of = ROOT
				# }
			# }
			# any_country_with_original_tag = {
				# original_tag_to_check = EQS
				# has_country_flag = EQS_CRY_has_twilight
				# OR = {
					# has_capitulated = yes
					# is_subject_of = ROOT
				# }
			# }
		# }
	# }

	# option = {
		# name = solarempire.26.a
		# trigger = { tag = event_target:solar_empire }
		# hidden_effect = { set_country_flag = SOL_has_twilight }
		# add_political_power = 20
		# effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	# }
	# option = {
		# name = solarempire.26.b
		# trigger = {
			# NOT = { tag = event_target:solar_empire }
			# OR = {
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
	# option = {
		# name = solarempire.26.c
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# has_government = democratic
				# has_war_with = event_target:solar_empire
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempire.27
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.27"}
	# title = solarempire.27.t
	# desc = solarempire.27.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# immediate = {
		# hidden_effect = {
			# remove_from_array = {
				# global.former_EQS_puppets = THIS
			# }
			# clr_country_flag = former_EQS_puppet
			# #clr_country_flag = supported_SOL
		# }
	# }

	# option = {
		# name = solarempire.27.a
		# FROM = { puppet = ROOT }
		# set_previous_autonomy_level = yes
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
			# modifier = {
				# factor = 0.5
				# strength_ratio = { tag = event_target:solar_empire ratio > 0.8 }
			# }
			# modifier = {
				# factor = 0.1
				# original_tag = CRY
			# }
			# modifier = {
				# factor = 0
				# original_tag = CRY
				# NOT = { has_government = democratic }
			# }
			# modifier = {
				# original_tag = EQC
				# has_completed_focus = EQC_patriation
				# factor = 0
			# }
		# }
	# }
	# option = {
		# name = solarempire.27.b
		# FROM = {
			# create_wargoal = {
				# target = ROOT type = puppet_wargoal_focus
			# }
		# }
		# hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		# ai_chance = {
			# factor = 1.5
		# }
	# }
# }

# #notification
# country_event = {
	# id = solarempire.28
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.28"}
	# title = {
		# text = solarempire.28.t_sub
		# trigger = { FROM = { is_subject_of = ROOT } }
	# }
	# title = {
		# text = solarempire.28.t_ref
		# trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
	# }
	# desc = {
		# text = solarempire.28.d_sub
		# trigger = { FROM = { is_subject_of = ROOT } }
	# }
	# desc = {
		# text = solarempire.28.d_ref
		# trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
	# }
	# picture = GFX_event_pony_statue

	# is_triggered_only = yes

	# option = {
		# name = solarempire.28.a
		# trigger = { FROM = { is_subject_of = ROOT } }
		# effect_tooltip = {
			# puppet = FROM
		# }
	# }
	# option = {
		# name = solarempire.28.b
		# trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
		# effect_tooltip = {
			# create_wargoal = {
				# target = FROM type = puppet_wargoal_focus
			# }
		# }
	# }
# }
# country_event = {
	# id = solarempire.29
	# mean_time_to_happen = { days = 15 }
	# fire_only_once = yes
	# hidden = yes
	# trigger = {
		# tag = event_target:solar_empire
		# has_government = fascism
		# OR = {
			# EQS = { exists = no }
			# NLR = { exists = no }
		# }
		# TEM = { exists = yes }
	# }
	# option = {
		# create_wargoal = { target = TEM type = annex_everything }
	# }
# }
# #fluff
# country_event = {
	# id = solarempire.30
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.30"}
	# title = solarempire.30.t
	# desc = {
		# text = solarempire.30.d_pro
		# trigger = { has_completed_focus = SOL_Protect_the_Weak }
	# }
	# desc = {
		# text = solarempire.30.d_mot
		# trigger = { has_completed_focus = SOL_Harmony_through_Order }
	# }
	# desc = {
		# text = solarempire.30.d_god
		# trigger = { has_completed_focus = SOL_Solar_Cult }
	# }
	# picture = GFX_event_solarempire

	# fire_only_once = yes
	# is_triggered_only = yes
	# option = {
		# name = solarempire.30.a
		# trigger = { has_completed_focus = SOL_Protect_the_Weak }
		# add_political_power = 20
	# }
	# option = {
		# name = solarempire.30.b
		# trigger = { has_completed_focus = SOL_Harmony_through_Order }
		# add_political_power = 20
	# }
	# option = {
		# name = solarempire.30.c
		# trigger = { has_completed_focus = SOL_Solar_Cult }
		# add_political_power = 20
	# }
# }

#EQC breaks free
#SOL recieves
country_event = {
	id = solarempire.31
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.31"}
	title = solarempire.31.t
	desc = solarempire.31.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		end_puppet = FROM
		hidden_effect = { FROM = { country_event = { id = equestriancolony.2 hours = 1 } } }
	}

	option = {
		name = solarempire.31.a
		add_political_power = -200
		hidden_effect = {
			clr_country_flag = EQC_considering_breakaway
			FROM = { country_event = { id = solarempire.32 days = 1 } }
		}
	}

	option = {
		name = solarempire.31.b
		create_wargoal = { type = puppet_wargoal_focus target = FROM }
		hidden_effect = {
			clr_country_flag = EQC_considering_breakaway
			FROM = {
				set_country_flag = EQC_destined_to_be_an_RK
				country_event = { id = solarempire.33 days = 2 }
			}
		}
	}
}
# #SOL agreed (what???)
# country_event = {
	# id = solarempire.32
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.32"}
	# title = solarempire.32.t
	# desc = solarempire.32.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# fire_only_once = yes

	# option = {
		# name = solarempire.32.a
		# add_political_power = 50
	# }
# }
# #SOL is going to rape you
# country_event = {
	# id = solarempire.33
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.33"}
	# title = solarempire.33.t
	# desc = solarempire.33.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# fire_only_once = yes

	# option = {
		# name = solarempire.33.a
	# }
# }
# #Add harmonic resistance after war was won
# country_event = {
	# id = solarempire.34
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.34"}
	# title = solarempire.34.t
	# desc = solarempire.34.d
	# picture = GFX_event_solarempire

	# trigger = {
		# has_global_flag = SOL_wartime_change
		# has_war = no
		# is_EQS_SOL = yes
		# NOT = {
			# has_idea = SOL_harmonic_resistance_idea
			# has_completed_focus = SOL_Freedom_from_Fear
			# has_completed_focus = SOL_Firm_but_Fair
			# has_completed_focus = SOL_Imperial_Inquisition
		# }
	# }

	# mean_time_to_happen = {
		# days = 30
	# }

	# fire_only_once = yes

	# option = {
		# name = solarempire.34.a
		# add_ideas = SOL_harmonic_resistance_idea
		# add_stability = -0.1
	# }
# }

# country_event = {
	# id = solarempire.35
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.35"}
	# title = solarempire.35.t
	# desc = solarempire.35.d
	# picture = GFX_event_solarempire

	# fire_only_once = yes

	# trigger = {
		# is_EQS_SOL = yes
		# OR = {
			# focus_progress = { focus = SOL_empress_protector progress > 0 }
			# focus_progress = { focus = SOL_empress_mother progress > 0 }
			# focus_progress = { focus = SOL_god_empress progress > 0 }
		# }
		# NOT = {
			# has_country_flag = EQC_considering_breakaway
		# }
		# EQC = {
			# is_subject_of = ROOT
			# NOT = { has_global_flag = SOL_chose_EQC_leader }
		# }
	# }

	# mean_time_to_happen = {
		# days = 3
		# modifier = {
			# has_global_flag = SOL_wartime_change
			# factor = 2
		# }
	# }

	# option = { #Keep whoever
		# name = solarempire.35.a
		# if = {
			# limit = {
				# has_global_flag = SOL_wartime_change
			# }
			# EQC = {
				# country_event = { id = solarempire.36 days = 4 }
			# }
		# }
		# ai_chance = {
			# modifier = {
				# factor = 2
				# focus_progress = { focus = SOL_empress_protector progress > 0 }
			# }
		# }
	# }
	# option = { #Replace
		# name = solarempire.35.b
		# add_political_power = -100
		# EQC = {
			# if = {
				# limit = {
					# has_global_flag = SOL_wartime_change
				# }
				# EQC = {
					# country_event = { id = solarempire.37 days = 4 }
				# }
			# }
			# else = {
				# add_autonomy_ratio = { value = -0.30 }
				# every_possible_country = {
					# limit = {
						# has_character = EQS_SOL_arcane_nova
					# }
					# EQS_SOL_arcane_nova = {
						# set_nationality = EQC
					# }
				# }
				# add_country_leader_role = {
					# character = EQS_SOL_arcane_nova
					# promote_leader = yes

					# country_leader = {
						# desc = "albino_sunhorse_desc"
						# expire = "1965.1.1"
						# ideology = falangism
						# traits = { }
					# }
				# }
				# set_party_name = { ideology = fascism long_name = EQC_SOL_fascism_party_long name = EQC_SOL_fascism_party }
				# set_politics = {
					# ruling_party = fascism
					# elections_allowed = no
				# }
				# add_popularity = {
					# ideology = fascism
					# popularity = 0.2
				# }
			# }
		# }
		# ai_chance = {
			# modifier = {
				# factor = 4
				# focus_progress = { focus = SOL_god_empress progress > 0 }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempire.36
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.36"}
	# title = solarempire.36.t
	# desc = solarempire.36.d
	# picture = GFX_event_solarempire

	# trigger = {
		# is_subject_of = FROM
	# }

	# is_triggered_only = yes

	# option = { #Agree to be loyal
		# name = solarempire.36.a
		# if = {
			# limit = {
				# NOT = { has_focus_tree = eqc_sol_focus }
			# }
			# load_focus_tree = eqc_sol_focus
			# set_cosmetic_tag = EQC_SOL
		# }
		# hidden_effect = { set_global_flag = SOL_chose_EQC_leader }
	# }
# }

# country_event = {
	# id = solarempire.37
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.37"}
	# title = solarempire.37.t
	# desc = solarempire.37.d
	# picture = GFX_event_solarempire

	# trigger = {
		# is_subject_of = FROM
	# }

	# is_triggered_only = yes

	# option = { #Agree to be replaced
		# name = solarempire.37.a
		# add_autonomy_ratio = { value = -0.30 }
		# every_possible_country = {
			# limit = {
				# has_character = EQS_SOL_arcane_nova
			# }
			# EQS_SOL_arcane_nova = {
				# set_nationality = ROOT
			# }
		# }
		# add_country_leader_role = {
			# character = EQS_SOL_arcane_nova
			# promote_leader = yes

			# country_leader = {
				# desc = "albino_sunhorse_desc"
				# expire = "1965.1.1"
				# ideology = falangism
				# traits = { }
			# }
		# }
		# set_party_name = { ideology = fascism long_name = EQC_SOL_fascism_party_long name = EQC_SOL_fascism_party }
		# set_politics = {
			# ruling_party = fascism
			# elections_allowed = no
		# }
		# add_popularity = {
			# ideology = fascism
			# popularity = 0.2
		# }
		# if = {
			# limit = {
				# NOT = { has_focus_tree = eqc_sol_focus }
			# }
			# load_focus_tree = eqc_sol_focus
			# set_cosmetic_tag = EQC_SOL
		# }
		# hidden_effect = { set_global_flag = SOL_chose_EQC_leader }
	# }
	# option = { #No!
		# name = solarempire.37.b
		# FROM = { country_event = { id = solarempire.31 days = 2 } }
		# trigger = {
			# NOT = { has_country_flag = EQC_solar_coup }
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 0
				# has_country_flag = EQC_dont_break_free_from_SOL
			# }
			# modifier = {
				# factor = 0
				# NOT = { overlord = { focus_progress = { focus = SOL_god_empress progress > 0 } } }
				# strength_ratio = { tag = FROM ratio < 0.5 }
			# }
			# modifier = {
				# factor = 5
				# strength_ratio = { tag = FROM ratio > 0.9 }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempire.38
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.38"}
	# title = solarempire.38.t
	# desc = solarempire.38.d
	# picture = GFX_event_solarempire

	# trigger = {
		# original_tag = EQS
		# OR = {
			# has_defensive_war = no
			# surrender_progress < 0.1
		# }
		# has_idea = SOL_harmonic_resistance_idea
		# NOT = { has_country_flag = SOL_wrap_up_in_progress }
	# }
	# immediate = {
		# set_country_flag = block_harmonic_resistance
	# }

	# mean_time_to_happen = {
		# days = 120
		# modifier = {
			# factor = 0.8
			# has_completed_focus = SOL_god_empress
		# }
		# modifier = {
			# factor = 1.6
			# has_completed_focus = SOL_empress_protector
		# }
		# modifier = {
			# factor = 1.2
			# has_country_flag = SOL_laws_done
		# }
	# }

	# option = {
		# name = solarempire.38.a
		# add_political_power = -20
		# swap_ideas = { add_idea = SOL_harmonic_resistance_idea2 remove_idea = SOL_harmonic_resistance_idea }
		# clr_country_flag = block_harmonic_resistance
	# }
# }

# country_event = {
	# id = solarempire.39
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.39"}
	# title = solarempire.39.t
	# desc = solarempire.39.d
	# picture = GFX_event_solarempire

	# trigger = {
		# original_tag = EQS
		# OR = {
			# has_defensive_war = no
			# surrender_progress < 0.1
		# }
		# has_idea = SOL_harmonic_resistance_idea2
		# NOT = { has_country_flag = SOL_raids_2_in_progress }
		# NOT = { has_country_flag = SOL_next_civ_war_delay }
	# }
	# immediate = {
		# set_country_flag = block_harmonic_resistance
	# }
	# mean_time_to_happen = {
		# days = 210
		# modifier = {
			# factor = 0.8
			# has_completed_focus = SOL_god_empress
		# }
		# modifier = {
			# factor = 1.6
			# has_completed_focus = SOL_empress_protector
		# }
	# }

	# option = {
		# name = solarempire.39.a
		# add_political_power = -20
		# swap_ideas = { add_idea = SOL_harmonic_resistance_idea3 remove_idea = SOL_harmonic_resistance_idea2 }
		# clr_country_flag = block_harmonic_resistance
	# }
# }
# country_event = { #Solar bats
	# id = solarempire.40
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.40"}
	# title = solarempire.40.t
	# desc = solarempire.40.d
	# picture = GFX_event_bat_ponies

	# is_triggered_only = yes

	# option = { #
		# name = solarempire.40.a
		# add_political_power = -100
		# add_war_support = -0.05
		# if = {
			# limit = {
				# EQS_SOL_ksen_autumn = { is_unit_leader = no }
			# }
			# add_corps_commander_role = {
				# character = EQS_SOL_ksen_autumn

				# traits = { promising_general infantry_officer infantry_leader thestral_race_trait }
				# skill = 1
				# attack_skill = 2
				# defense_skill = 3
				# planning_skill = 2
				# logistics_skill = 2
				# legacy_id = 40
			# } custom_effect_tooltip = ksen_autumn_stats_tp
		# }
		# every_state = {
			# limit = {
				# OR = {
					# state = 40
					# state = 31
					# state = 36
					# state = 24
					# state = 81
					# state = 350
					# state = 32
					# state = 25
					# state = 30
				# }
			# }
			# add_core_of = ROOT
			# clr_state_flag = eqs_bat_state
		# }
	# }
# }
# country_event = { #Bats moved to an island
	# id = solarempire.41
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.41"}
	# title = solarempire.41.t
	# desc = solarempire.41.d
	# picture = GFX_event_bat_momma

	# is_triggered_only = yes

	# option = { #
		# name = solarempire.41.a
		# add_political_power = 50
		# save_current_manpower = yes
		# 40 = {
			# add_manpower = -75000
		# }
		# 116 = {
			# add_manpower = -75000
		# }
		# 106 = {
			# add_manpower = -75000
		# }
		# restore_previous_manpower = yes
		# if = {
			# limit = {
				# 4 = { is_owned_and_controlled_by = ROOT }
			# }
			# 4 = {
				# add_manpower = 75000
			# }
		# }
		# else = {
			# random_owned_controlled_state = {
				# limit = {
					# NOT = {
						# state = 40
						# state = 31
						# state = 36
						# state = 24
						# state = 81
						# state = 350
						# state = 32
						# state = 25
						# state = 4
						# state = 67
						# state = 661
						# state = 30
					# }
				# }
				# add_manpower = 75000
			# }
		# }
		# if = {
			# limit = {
				# 67 = { is_owned_and_controlled_by = ROOT }
			# }
			# 67 = {
				# add_manpower = 75000
			# }
		# }
		# else = {
			# random_owned_controlled_state = {
				# limit = {
					# NOT = {
						# state = 40
						# state = 31
						# state = 36
						# state = 24
						# state = 81
						# state = 350
						# state = 32
						# state = 25
						# state = 4
						# state = 67
						# state = 661
						# state = 30
					# }
				# }
				# add_manpower = 75000
			# }
		# }
		# if = {
			# limit = {
				# 661 = { is_owned_and_controlled_by = ROOT }
			# }
			# 661 = {
				# add_manpower = 75000
			# }
		# }
		# else = {
			# random_owned_controlled_state = {
				# limit = {
					# NOT = {
						# state = 40
						# state = 31
						# state = 36
						# state = 24
						# state = 81
						# state = 350
						# state = 32
						# state = 25
						# state = 4
						# state = 67
						# state = 661
						# state = 30
					# }
				# }
				# add_manpower = 75000
			# }
		# }
		# every_state = {
			# limit = {
				# OR = {
					# state = 40
					# state = 31
					# state = 36
					# state = 24
					# state = 81
					# state = 350
					# state = 32
					# state = 25
					# state = 30
				# }
			# }
			# add_core_of = ROOT
			# clr_state_flag = eqs_bat_state
		# }
	# }
# }
# country_event = { #BURN THE BATS, BURN THE BATS, MAKE THEM GO AND NOT COME BACK
	# id = solarempire.42
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.42"}
	# title = solarempire.42.t
	# desc = solarempire.42.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes

	# option = { #
		# name = solarempire.42.a
		# add_political_power = 100
		# if = {
			# limit = {
				# EQS_SOL_comet_trail = { is_unit_leader = yes }
			# }
			# remove_unit_leader_role = EQS_SOL_comet_trail
		# }
		# save_current_manpower = yes
		# 40 = {
			# add_manpower = -75000
			# damage_building = {
				# type = infrastructure
				# damage = 2
			# }
		# }
		# 31 = { add_manpower = -50000 }
		# 36 = { add_manpower = -5000 }
		# 24 = {
			# add_manpower = -50000
			# damage_building = {
				# type = infrastructure
				# damage = 2
			# }
		# }
		# 81 = { add_manpower = -50000 }
		# 350 = { add_manpower = -50000 }
		# 32 = { add_manpower = -50000 }
		# 25 = { add_manpower = -50000 }
		# 30 = { add_manpower = -50000 }
		# restore_previous_manpower = yes
		# every_state = {
			# limit = {
				# OR = {
					# state = 40
					# state = 31
					# state = 36
					# state = 24
					# state = 81
					# state = 350
					# state = 32
					# state = 25
					# state = 30
				# }
			# }
			# add_core_of = ROOT
			# clr_state_flag = eqs_bat_state
		# }
		# if = {
			# limit = {
				# JER = {
					# exists = yes
					# NOT = { has_war_with = ROOT }
				# }
			# }
			# JER = {
				# country_event = solarempire.43
			# }
		# }
		# if = {
			# limit = {
				# HAU = {
					# exists = yes
					# NOT = { has_war_with = ROOT }
				# }
			# }
			# HAU = {
				# country_event = solarempire.43
			# }
		# }
		# if = {
			# limit = {
				# TRD = {
					# exists = yes
					# NOT = { has_war_with = ROOT }
				# }
			# }
			# TRD = {
				# country_event = solarempire.43
			# }
		# }
		# #### Add entry for Nightmareia when it comes out i guess
	# }
# }
# country_event = { #Batfugees
	# id = solarempire.43
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.43"}
	# title = solarempire.43.t
	# desc = solarempire.43.d
	# picture = GFX_event_bat_ponies

	# is_triggered_only = yes

	# option = { #
		# name = solarempire.43.a
		# add_stability = -0.05
		# random_owned_state = {
			# add_manpower = 10000
		# }
		# random_owned_state = {
			# add_manpower = 10000
		# }
		# random_owned_state = {
			# add_manpower = 10000
		# }
	# }
# }
# country_event = { #Add bat resistance
	# id = solarempire.44
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.44"}
	# title = solarempire.44.t
	# desc = solarempire.44.d
	# picture = GFX_event_bat_ponies

	# trigger = {
		# is_EQS_SOL = yes
		# NOT = { has_completed_focus = SOL_bat_problems }
		# 40 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 31 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 36 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 24 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 81 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 350 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 32 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 25 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
		# 30 = { is_owned_and_controlled_by = ROOT NOT = { has_state_flag = eqs_bat_state } }
	# }

	# mean_time_to_happen = {
		# days = 7
	# }

	# option = {
		# name = solarempire.44.a
		# add_stability = -0.05
		# set_country_flag = SOL_bat_problems_flag
		# every_state = {
			# limit = {
				# OR = {
					# state = 40
					# state = 31
					# state = 36
					# state = 24
					# state = 81
					# state = 350
					# state = 32
					# state = 25
					# state = 30
				# }
			# }
			# remove_core_of = ROOT
			# add_claim_by = ROOT
			# set_state_flag = eqs_bat_state
		# }
	# }
# }

# country_event = {
	# id = solarempire.45
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.45"}
	# title = {
		# trigger = { has_completed_focus = SOL_empress_protector }
		# text = solarempire.45.t_p
	# }
	# desc = {
		# trigger = { has_completed_focus = SOL_empress_protector }
		# text = solarempire.45.d_p
	# }
	# title = {
		# trigger = { has_completed_focus = SOL_empress_mother }
		# text = solarempire.45.t_m
	# }
	# desc = {
		# trigger = { has_completed_focus = SOL_empress_mother }
		# text = solarempire.45.d_m
	# }
	# title = {
		# trigger = { has_completed_focus = SOL_god_empress }
		# text = solarempire.45.t_g
	# }
	# desc = {
		# trigger = { has_completed_focus = SOL_god_empress }
		# text = solarempire.45.d_g
	# }
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes

	# option = {
		# name = solarempire.45.a
		# trigger = { has_completed_focus = SOL_empress_protector }
	# }
	# option = {
		# name = solarempire.45.b
		# trigger = { has_completed_focus = SOL_empress_mother }
	# }
	# option = {
		# name = solarempire.45.c
		# trigger = { has_completed_focus = SOL_god_empress }
	# }
# }

# country_event = {
	# id = solarempire.46
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.46"}
	# title = solarempire.46.t
	# desc = solarempire.46.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes

	# option = {
		# name = solarempire.46.a
	# }
# }

# country_event = {
	# id = solarempire.47
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.47"}
	# title = solarempire.47.t
	# desc = solarempire.47.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes

	# option = {
		# name = solarempire.47.a
	# }
# }

# country_event = {
	# id = solarempire.48
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.48"}
	# title = solarempire.48.t
	# desc = solarempire.48.d
	# picture = GFX_event_solarempire

	# is_triggered_only = yes
	# fire_only_once = yes

	# option = {
		# name = solarempire.48.a
	# }
# }

country_event = { # Changeling Puppet
	id = solarempire.906
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.906"}
	picture = GFX_event_canterlot
	hidden = yes

	trigger = {
		original_tag = CHN
		is_subject = yes
		has_government = fascism
		NOT = { has_country_flag = chn_is_fascist_puppet }
		NOT = {
			has_cosmetic_tag = PLB_CHN_occupation_authority
		}
	}
	mean_time_to_happen = { days = 1 }
	option = {
		name = solarempire.902.a
		hidden_effect = {
			set_country_flag = chn_is_fascist_puppet
			set_party_name = { ideology = fascism long_name = CHN_fascism_puppet_party name = CHN_fascism_puppet_party }
			add_country_leader_role = {
				character = CHN_changeling_king
				promote_leader = yes

				country_leader = {
					expire = "1965.1.1"
					ideology = nazism
					traits = { }
				}
			}
		}
	}
}
country_event = { # Removal of cosmetic
	id = solarempire.910
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.910"}
	title = solarempire.910.t
	desc = solarempire.910.d
	picture = GFX_event_canterlot
	hidden = yes
	trigger = {
		has_country_flag = chn_is_fascist_puppet
		is_subject = no
	}
	mean_time_to_happen = { days = 1 }
	option = {
		name = solarempire.910.a
		clr_country_flag = chn_is_fascist_puppet
		set_party_name = { ideology = fascism long_name = CHN_fascism_party name = CHN_fascism_party }
		hidden_effect = {
			CHN_queen_chrysalis = {
				promote_character = nazism
			}
		}
	}
}

# country_event = { # debug
	# id = solarempire.911
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.911"}
	# title = solarempire.911.t
	# desc = solarempire.911.d
	# picture = GFX_event_canterlot
	# hidden = yes

	# is_triggered_only = yes
	# trigger = {
		# has_global_flag = EQS_evil_celestia
	# }
	# option = {
		# name = solarempire.910.a
		# set_global_flag = EQS_evil_celestia
	# }
# }

# country_event = {
	# id = solarempiresparkles.1
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.1"}
	# title = solarempiresparkles.1.t
	# desc = solarempiresparkles.1.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# immediate = {
		# hidden_effect = {
			# random_country_with_original_tag = {
				# original_tag_to_check = CRY
				# limit = { has_country_leader = { character = CRY_princess_mi_amore_cadenza ruling_only = yes } }
				# save_event_target_as = CRY_cadence
			# }
		# }
	# }

	# #Lunar rebel deception
	# option = {
		# name = solarempiresparkles.1.a
		# custom_effect_tooltip = solarempiresparkles.1.a.tp
		# hidden_effect = {
			# country_event = { id = solarempiresparkles.2 days = 2 }
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 2
				# has_completed_focus = SOL_empress_mother
			# }
		# }
	# }
	# #Negotiate
	# option = {
		# name = solarempiresparkles.1.b
		# custom_effect_tooltip = solarempiresparkles.1.b.tp
		# hidden_effect = {
			# country_event = { id = solarempiresparkles.24 days = 1 }
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 2
				# has_completed_focus = SOL_empress_protector
			# }
		# }
	# }
	# #Demand
	# option = {
		# name = solarempiresparkles.1.c
		# custom_effect_tooltip = solarempiresparkles.1.c.tp
		# hidden_effect = {
			# country_event = { id = solarempiresparkles.34 days = 1 }

		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 2
				# has_completed_focus = SOL_god_empress
			# }
			# modifier = {
				# factor = 0
				# NOT = { has_completed_focus = SOL_god_empress }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.2
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.2"}
	# title = solarempiresparkles.2.t
	# desc = solarempiresparkles.2.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# immediate = {
		# hidden_effect = {
			# event_target:CRY_cadence = {
				# news_event = solarempiresparkles.3
			# }
		# }
	# }

	# option = {
		# name = solarempiresparkles.2.a
		# hidden_effect = {
			# random_list = {
				# 70 = {
					# set_country_flag = { flag = CRY_sparkle_suspicion value = 0 }
				# }
				# 30 = {
					# set_country_flag = { flag = CRY_sparkle_suspicion value = 1 }
				# }
			# }
			# country_event = { id = solarempiresparkles.4 hours = 2 }
		# }
	# }
# }

# #For CRY
# news_event = {
	# id = solarempiresparkles.3
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.3"}
	# title = solarempiresparkles.3.t
	# desc = solarempiresparkles.3.d
	# picture = GFX_crystal_city_news

	# #fire_only_once = yes

	# is_triggered_only = yes
	# major = yes

	# option = {
		# trigger = { tag = event_target:CRY_cadence }
		# name = solarempiresparkles.3.a
		# add_political_power = 20
		# add_popularity = { ideology = democratic popularity = 0.05 }
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempiresparkles.3.b
	# }
	# option = {
		# trigger = {
			# NOT = {
				# tag = event_target:solar_empire
				# tag = event_target:CRY_cadence
			# }
		# }
		# name = solarempiresparkles.3.c
	# }
# }

# country_event = {
	# id = solarempiresparkles.4
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.4"}
	# title = solarempiresparkles.4.t
	# desc = {
		# text = solarempiresparkles.4.d
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value < 1 }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.4.d_susp
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.4.a
		# hidden_effect = {
			# country_event = { id = solarempiresparkles.41 hours = 8 }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.41
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.41"}
	# title = solarempiresparkles.41.t
	# desc = {
		# text = solarempiresparkles.41.d
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value < 1 }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.41.d_susp
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.41.a
		# hidden_effect = {
			# country_event = { id = solarempiresparkles.5 days = 4 }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.5
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.5"}
	# title = solarempiresparkles.5.t
	# desc = {
		# text = solarempiresparkles.5.d
		# trigger = {
			# NOT = { has_global_flag = equestrian_civil_war }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.5.d_nlr
		# trigger = {
			# has_global_flag = equestrian_civil_war
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.5.a
		# hidden_effect = {
			# random_list = {
				# 80 = {
					# country_event = { id = solarempiresparkles.15 days = 1 }
				# }
				# 15 = {
					# modify_country_flag = { flag = CRY_sparkle_suspicion value = 1 }
					# country_event = { id = solarempiresparkles.15 days = 1 }
				# }
				# 5 = {
					# country_event = { id = solarempiresparkles.6 hours = 1 }
					# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.7 hours = 6 } }
				# }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.6
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.6"}
	# title = solarempiresparkles.6.t
	# desc = solarempiresparkles.6.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.6.a
	# }
# }

# country_event = {
	# id = solarempiresparkles.7
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.7"}
	# title = solarempiresparkles.7.t
	# desc = solarempiresparkles.7.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes


	# option = {
		# name = solarempiresparkles.7.a
		# add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		# hidden_effect = {
			# set_country_flag = SOL_twilight_captured
			# set_variable = { global.SOL_twilight_captured_var = THIS }
			# event_target:solar_empire = {
				# set_country_flag = SOL_twilight_unavailable
				# country_event = solarempiresparkles.8
			# }
		# }
	# }
	# option = {
		# name = solarempiresparkles.7.b
		# add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		# hidden_effect = {
			# event_target:solar_empire = {
				# country_event = solarempiresparkles.9
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.77
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.77"}
	# title = solarempiresparkles.77.t
	# desc = solarempiresparkles.77.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes


	# option = {
		# name = solarempiresparkles.77.a
		# add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
	# }
# }

# country_event = {
	# id = solarempiresparkles.8
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.8"}
	# title = solarempiresparkles.8.t
	# desc = solarempiresparkles.8.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.8.a
		# add_political_power = -20
		# effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
	# }
	# option = {
		# name = solarempiresparkles.8.b #negotiate ransom
		# add_political_power = -100
		# effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		# FROM = { country_event = { id = solarempiresparkles.10 days = 1 } }
	# }
# }

# country_event = {
	# id = solarempiresparkles.9
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.9"}
	# title = solarempiresparkles.9.t
	# desc = solarempiresparkles.9.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #
		# name = solarempiresparkles.9.a
		# add_political_power = -20
	# }
# }

# country_event = {
	# id = solarempiresparkles.10
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.10"}
	# title = solarempiresparkles.10.t
	# desc = solarempiresparkles.10.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree for non-agression and guarantee
		# name = solarempiresparkles.10.a
		# add_political_power = -20
		# FROM = { country_event = { id = solarempiresparkles.12 days = 1 } }
	# }
	# option = { #Decline
		# name = solarempiresparkles.10.b
		# add_political_power = 20
		# FROM = {
			# add_opinion_modifier = { target = ROOT modifier = cry_refused_to_negotiate }
			# country_event = { id = solarempiresparkles.11 days = 1 }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.11
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.11"}
	# title = solarempiresparkles.11.t
	# desc = solarempiresparkles.11.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #
		# name = solarempiresparkles.11.a
		# add_political_power = -20
	# }
# }

# country_event = {
	# id = solarempiresparkles.12
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.12"}
	# title = solarempiresparkles.12.t
	# desc = solarempiresparkles.12.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree for non-agression and guarantee
		# name = solarempiresparkles.12.a
		# add_political_power = -100
		# custom_effect_tooltip = solarempiresparkles.12.tp
		# diplomatic_relation = { country = FROM relation = non_aggression_pact }
		# FROM = { country_event = { id = solarempiresparkles.14 days = 1 } }
		# hidden_effect = {
			# clr_country_flag = SOL_twilight_unavailable
			# FROM = {
				# clr_country_flag = SOL_twilight_captured
			# }
			# news_event = { id = solarempiresparkles.42 days = 2 }
		# }
	# }
	# option = { #Decline
		# name = solarempiresparkles.12.b
		# add_political_power = 20
		# FROM = { country_event = { id = solarempiresparkles.13 days = 1 } }
	# }
# }

# country_event = {
	# id = solarempiresparkles.13
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.13"}
	# title = solarempiresparkles.13.t
	# desc = solarempiresparkles.13.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree for non-agression and guarantee
		# name = solarempiresparkles.13.a
	# }
# }

# country_event = {
	# id = solarempiresparkles.14
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.14"}
	# title = solarempiresparkles.14.t
	# desc = solarempiresparkles.14.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree for non-agression and guarantee
		# name = solarempiresparkles.14.a
		# FROM = {
			# custom_effect_tooltip = solarempiresparkles.12.tp
			# effect_tooltip = {
				# diplomatic_relation = { country = ROOT relation = non_aggression_pact }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.15
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.15"}
	# title = solarempiresparkles.15.t
	# desc = {
		# text = solarempiresparkles.15.d_susp
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value > 1 }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.15.d
		# trigger = {
			# has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
			# has_country_flag = { flag = CRY_sparkle_suspicion value < 2 }
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.15.a
		# hidden_effect = {
			# country_event = {id = solarempiresparkles.150 hours = 1}
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.150
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.150"}
	# title = solarempiresparkles.150.t
	# desc = solarempiresparkles.150.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.150.a
		# hidden_effect = {
			# if = {
				# limit = {
					# has_country_flag = { flag = CRY_sparkle_suspicion value > 1 }
				# }
				# random_list = {
					# 65 = {
						# country_event = { id = solarempiresparkles.16 hours = 6 }
						# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					# }
					# 35 = {
						# country_event = { id = solarempiresparkles.17 days = 1 }
					# }
				# }
			# }
			# else_if = {
				# limit = {
					# has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
				# }
				# random_list = {
					# 77 = {
						# country_event = { id = solarempiresparkles.16 hours = 6 }
						# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					# }
					# 23 = {
						# country_event = { id = solarempiresparkles.17 days = 1 }
					# }
				# }
			# }
			# else = {
				# random_list = {
					# 85 = {
						# country_event = { id = solarempiresparkles.16 hours = 6 }
						# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					# }
					# 15 = {
						# country_event = { id = solarempiresparkles.17 days = 1 }
					# }
				# }
			# }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.17
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.17"}
	# title = solarempiresparkles.17.t
	# desc = solarempiresparkles.17.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.17.a
		# hidden_effect = {
			# random_list = {
				# 70 = {
					# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.77 hours = 2 } }
				# }
				# 30 = {
					# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.7 hours = 2 } }
					# set_country_flag = SOL_sparkles_didnt_make_it
				# }
			# }
			# country_event = { id = solarempiresparkles.18 }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.18
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.18"}
	# title = {
		# text = solarempiresparkles.18.t_fail
		# trigger = {
			# has_country_flag = SOL_sparkles_didnt_make_it
		# }
	# }
	# title = {
		# text = solarempiresparkles.18.t
		# trigger = {
			# NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.18.d_fail
		# trigger = {
			# has_country_flag = SOL_sparkles_didnt_make_it
		# }
	# }
	# desc = {
		# text = solarempiresparkles.18.d
		# trigger = {
			# NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.18.a
		# effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		# trigger = {
			# NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		# }
	# }
	# option = {
		# name = solarempiresparkles.18.b
		# effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		# trigger = {
			# has_country_flag = SOL_sparkles_didnt_make_it
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.16
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.16"}
	# title = solarempiresparkles.16.t
	# desc = solarempiresparkles.16.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #
		# name = solarempiresparkles.16.a
		# country_event = { id = solarempiresparkles.21 hours = 6 }
		# event_target:CRY_cadence = {
			# effect_tooltip = { add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal } }
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.20
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.20"}
	# title = solarempiresparkles.20.t
	# desc = solarempiresparkles.20.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #
		# name = solarempiresparkles.20.a
		# add_political_power = -200
		# if = {
			# limit = { has_idea = royal_family3 }
			# swap_ideas = { remove_idea = royal_family3 add_idea = royal_family2 }
		# }
		# if = {
			# limit = { has_idea = royal_family2 }
			# swap_ideas = { remove_idea = royal_family2 add_idea = royal_family }
		# }
		# add_ideas = flurryheart_imprisioned
		# add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
	# }
# }

# country_event = {
	# id = solarempiresparkles.21
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.21"}
	# title = solarempiresparkles.21.t
	# desc = solarempiresparkles.21.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #
		# name = solarempiresparkles.21.a
		# add_political_power = 150
		# event_target:CRY_cadence = { country_event = { id = solarempiresparkles.22 days = 1 } }
	# }
# }

# country_event = {
	# id = solarempiresparkles.22
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.22"}
	# title = solarempiresparkles.22.t
	# desc = solarempiresparkles.22.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# immediate = {
		# hidden_effect = {
			# CRY_flash_sentry = {
				# add_timed_unit_leader_trait = {
					# trait = wounded
					# days = 30
				# }
				# unit_leader_event = { id = generic.18 }
			# }
		# }
	# }

	# option = { #
		# name = solarempiresparkles.22.a
		# hidden_effect = { get_current_government_type = yes }
		# FROM = { puppet = ROOT }
		# hidden_effect = {
			# restore_previous_government_type = yes
			# country_event = { id = solarempiresparkles.103 hours = 1 }
			# swap_ideas = { remove_idea = flurryheart_imprisioned add_idea = flurryheart_imprisioned1 }
			# add_autonomy_ratio = { value = -0.20 }
			# news_event = { id = solarempiresparkles.39 days = 2 }
		# }
		# FROM = { country_event = { id = solarempiresparkles.23 days = 1 } }
		# ai_chance = {
			# factor = 100
		# }
	# }
	# option = { #
		# name = solarempiresparkles.22.b
		# add_political_power = -750
		# add_stability = -0.20
		# add_war_support = -1
		# FROM = { country_event = { id = solarempiresparkles.23 days = 1 } }
		# ai_chance = {
			# factor = 1
		# }
	# }
# }

# country_event = {
	# id = solarempiresparkles.23
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.23"}
	# title = solarempiresparkles.23.t
	# desc = {
		# text = solarempiresparkles.23.d_agree
		# trigger = {
			# FROM = { is_subject_of = ROOT }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.23.d_noagree
		# trigger = {
			# FROM = { NOT = { is_subject_of = ROOT } }
		# }
	# }
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.23.a
	# }
# }

# #Negotiations

# #SOL
# country_event = {
	# id = solarempiresparkles.24
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.24"}
	# title = solarempiresparkles.24.t
	# desc = solarempiresparkles.24.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.24.a
		# event_target:CRY_cadence = {
			# country_event = { id = solarempiresparkles.25 }
		# }
	# }
# }

# #CRY
# country_event = {
	# id = solarempiresparkles.25
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.25"}
	# title = solarempiresparkles.25.t
	# desc = solarempiresparkles.25.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree to negotiate
		# name = solarempiresparkles.25.a
		# FROM = {
			# country_event = { id = solarempiresparkles.27 hours = 1 }
		# }
		# ai_chance = {
			# factor = 6
			# modifier = {
				# factor = 0.5
				# strength_ratio = { tag = FROM ratio > 0.6 }
			# }
			# modifier = {
				# factor = 0
				# strength_ratio = { tag = FROM ratio > 0.8 }
			# }
		# }
	# }
	# option = { #Decline to negotiate
		# name = solarempiresparkles.25.b
		# add_political_power = -100
		# FROM = {
			# add_opinion_modifier = { target = ROOT modifier = cry_refused_to_negotiate }
			# add_opinion_modifier = { target = ROOT modifier = hostility }
			# country_event = { id = solarempiresparkles.26 hours = 1 }
		# }
		# ai_chance = {
			# factor = 1
		# }
	# }
# }

# #SOL
# #Cadence refuses
# country_event = {
	# id = solarempiresparkles.26
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.26"}
	# title = solarempiresparkles.26.t
	# desc = solarempiresparkles.26.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.26.a
		# add_political_power = -40
		# effect_tooltip = {
			# add_opinion_modifier = { target = FROM modifier = cry_refused_to_negotiate }
			# add_opinion_modifier = { target = FROM modifier = hostility }
		# }
	# }
# }

# #SOL
# #Cadence agrees to negotiate
# country_event = {
	# id = solarempiresparkles.27
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.27"}
	# title = solarempiresparkles.27.t
	# desc = solarempiresparkles.27.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.27.a
		# add_political_power = -40
		# FROM = { country_event = { id = solarempiresparkles.28 hours = 2 }}
	# }
# }

# #CRY
# #Get demands
# country_event = {
	# id = solarempiresparkles.28
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.28"}
	# title = solarempiresparkles.28.t
	# desc = solarempiresparkles.28.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Agree
		# name = solarempiresparkles.28.a
		# effect_tooltip = { FROM = { puppet = ROOT } }
		# hidden_effect = { FROM = { country_event = { id = solarempiresparkles.29 hours = 1 } } news_event = { id = solarempiresparkles.38 days = 1 } }
		# ai_chance = {
			# factor = 3
		# }
	# }
	# option = { #Decline
		# name = solarempiresparkles.28.b
		# add_political_power = 80
		# effect_tooltip = { add_opinion_modifier = { target = FROM modifier = cry_refused_to_negotiate } }
		# hidden_effect = { FROM = { country_event = { id = solarempiresparkles.30 hours = 1 } } }
		# ai_chance = {
			# factor = 2
		# }
	# }
# }

# #SOL
# #Cadence agrees
# country_event = {
	# id = solarempiresparkles.29
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.29"}
	# title = solarempiresparkles.29.t
	# desc = solarempiresparkles.29.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.29.a
		# hidden_effect = { FROM = { get_current_government_type = yes } }
		# puppet = FROM
		# hidden_effect = { FROM = { restore_previous_government_type = yes set_country_flag = CRY_dont_give_SOL_cosmetic } }
	# }
# }

# #SOL
# #Cadence disagrees
# country_event = {
	# id = solarempiresparkles.30
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.30"}
	# title = solarempiresparkles.30.t
	# desc = solarempiresparkles.30.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = { #Try to snatch flurry
		# name = solarempiresparkles.30.a
		# add_political_power = -200
		# custom_effect_tooltip = solarempiresparkles.30.a.tp
		# hidden_effect = {
			# random_list = {
				# 30 = {
					# country_event = { id = solarempiresparkles.33 hours = 1 }
					# FROM = { country_event = { id = solarempiresparkles.20 hours = 12 } }
				# }
				# 70 = { #failure
					# country_event = { id = solarempiresparkles.32 hours = 1 }
				# }
			# }
		# }
		# ai_chance = {
			# factor = 1
		# }
	# }
	# option = { #nah
		# name = solarempiresparkles.30.b
		# hidden_effect = { country_event = { id = solarempiresparkles.31 hours = 1 } }
		# ai_chance = {
			# factor = 2
		# }
	# }
# }

# #SOL
# #Nah
# country_event = {
	# id = solarempiresparkles.31
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.31"}
	# title = solarempiresparkles.31.t
	# desc = solarempiresparkles.31.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.31.a
	# }
# }

# #SOL
# #Mission failed we will get em next time
# country_event = {
	# id = solarempiresparkles.32
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.32"}
	# title = solarempiresparkles.32.t
	# desc = solarempiresparkles.32.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.32.a
		# hidden_effect = { country_event = { id = solarempiresparkles.31 hours = 1 } }
	# }
# }

# #SOL
# #Flurry snatched
# country_event = {
	# id = solarempiresparkles.33
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.33"}
	# title = solarempiresparkles.33.t
	# desc = solarempiresparkles.33.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.33.a
		# effect_tooltip = { event_target:CRY_cadence = { add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal } } }
		# country_event = { id = solarempiresparkles.21 hours = 6 }
	# }
# }

# #Inquisitor xD

# #SOL
# #Arrive
# country_event = {
	# id = solarempiresparkles.34
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.34"}
	# title = solarempiresparkles.34.t
	# desc = solarempiresparkles.34.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.34.a
		# event_target:CRY_cadence = {
			# add_opinion_modifier = { target = ROOT modifier = hostility }
			# country_event = { id = solarempiresparkles.35 hours = 1 }
		# }
	# }
# }

# #CRY
# #response
# country_event = {
	# id = solarempiresparkles.35
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.35"}
	# title = solarempiresparkles.35.t
	# desc = solarempiresparkles.35.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.35.a
		# FROM = { country_event = { id = solarempiresparkles.37 hours = 1 } }
		# remove_opinion_modifier = { target = FROM modifier = hostility }
		# ai_chance = {
			# factor = 4
			# modifier = {
				# factor = 0.5
				# strength_ratio = { tag = FROM ratio > 0.6 }
			# }
			# modifier = {
				# factor = 0
				# strength_ratio = { tag = FROM ratio > 0.8 }
			# }
		# }
	# }
	# option = {
		# name = solarempiresparkles.35.b
		# FROM = {
			# country_event = { id = solarempiresparkles.36 hours = 1 }
			# effect_tooltip = {
				# add_opinion_modifier = { target = ROOT modifier = hostility }
				# create_wargoal = {
					# target = ROOT type = puppet_wargoal_focus
				# }
			# }
		# }
		# ai_chance = {
			# factor = 1
		# }
	# }
# }

# #SOL
# #CRY rejects demands
# country_event = {
	# id = solarempiresparkles.36
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.36"}
	# title = solarempiresparkles.36.t
	# desc = solarempiresparkles.36.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.36.a
		# add_opinion_modifier = { target = FROM modifier = hostility }
		# create_wargoal = {
			# target = FROM type = puppet_wargoal_focus
		# }
	# }
# }

# #SOL
# #CRY agrees to demands
# country_event = {
	# id = solarempiresparkles.37
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.37"}
	# title = solarempiresparkles.37.t
	# desc = solarempiresparkles.37.d
	# picture = GFX_event_solarempire

	# #fire_only_once = yes

	# is_triggered_only = yes

	# option = {
		# name = solarempiresparkles.37.a
		# puppet = FROM
		# hidden_effect = {
			# set_country_flag = SOL_twilight_governor
			# set_autonomy = { target = FROM autonomy_state = autonomy_reichskommissariat }
			# EQS_twilight_sparkle = { set_nationality = FROM }
			# FROM = {
				# set_cosmetic_tag = CRY_SOL
				# add_autonomy_ratio = { value = -0.20 }
				# set_country_flag = CRY_solar_governorship
				# load_focus_tree = crystal_empire_solar_focus
				# if = {
					# limit = {
						# CRY_shining_armour = { is_unit_leader = yes }
					# }
					# remove_unit_leader_role = CRY_shining_armour
				# }
				# set_party_name = { ideology = fascism long_name = EQS_SOL_fascism_party_long name = EQS_SOL_fascism_party }
				# retire_country_leader = yes
				# EQS_twilight_sparkle = {
					# promote_character = falangism
				# }
			# }
			# news_event = { id = solarempiresparkles.40 days = 2 }
		# }
		# ai_chance = {
			# factor = 3
		# }
	# }
	# option = {
		# name = solarempiresparkles.37.b
		# add_political_power = -200
		# annex_country = { target = FROM transfer_troops = yes }
		# hidden_effect = {
			# news_event = { id = solarempiresparkles.40 days = 2 }
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 0
				# FROM = { is_ai = no }
			# }
		# }
	# }
# }

# #solarempiresparkles.38 - news event CRY agrees to diplo puppet
# news_event = {
	# id = solarempiresparkles.38
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.38"}
	# title = solarempiresparkles.38.t
	# desc = solarempiresparkles.38.d
	# picture = GFX_crystal_city_news

	# is_triggered_only = yes

	# fire_only_once = yes
	# major = yes


	# option = {
		# trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		# name = solarempiresparkles.38.a
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempiresparkles.38.b
	# }
	# option = {
		# trigger = {
			# NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		# }
		# name = solarempiresparkles.38.c
	# }
# }

# #solarempiresparkles.39 - news event CRY agrees to flurry kidnap puppet
# news_event = {
	# id = solarempiresparkles.39
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.39"}
	# title = solarempiresparkles.39.t
	# desc = solarempiresparkles.39.d
	# picture = GFX_crystal_city_news

	# is_triggered_only = yes

	# fire_only_once = yes
	# major = yes


	# option = {
		# trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		# name = solarempiresparkles.39.a
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempiresparkles.39.b
	# }
	# option = {
		# trigger = {
			# NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		# }
		# name = solarempiresparkles.39.c
	# }
# }

# #solarempiresparkles.40 - news event CRY agrees to inquisitor demands
# news_event = {
	# id = solarempiresparkles.40
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.40"}
	# title = solarempiresparkles.40.t
	# desc = {
		# text = solarempiresparkles.40.d
		# trigger = {
			# event_target:solar_empire = { has_country_flag = SOL_twilight_governor }
		# }
	# }
	# desc = {
		# text = solarempiresparkles.40.d_annex
		# trigger = {
			# event_target:solar_empire = { NOT = { has_country_flag = SOL_twilight_governor } }
		# }
	# }
	# picture = GFX_crystal_city_news

	# is_triggered_only = yes

	# fire_only_once = yes

	# major = yes

	# option = {
		# trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		# name = solarempiresparkles.40.a
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempiresparkles.40.b
	# }
	# option = {
		# trigger = {
			# NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		# }
		# name = solarempiresparkles.40.c
	# }
# }

# #solarempiresparkles.42 - news event CRY agrees to ransom sparkles
# news_event = {
	# id = solarempiresparkles.42
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.42"}
	# title = solarempiresparkles.42.t
	# desc = solarempiresparkles.42.d
	# picture = GFX_crystal_city_news

	# is_triggered_only = yes

	# fire_only_once = yes

	# major = yes


	# option = {
		# trigger = { original_tag = CRY }
		# name = solarempiresparkles.42.a
	# }
	# option = {
		# trigger = { tag = event_target:solar_empire }
		# name = solarempiresparkles.42.b
	# }
	# option = {
		# trigger = {
			# NOT = { original_tag = CRY tag = event_target:solar_empire }
		# }
		# name = solarempiresparkles.42.c
	# }
# }

# #solarempiresparkles.43 - model province
# country_event = {
	# id = solarempiresparkles.43
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.43"}
	# title = solarempiresparkles.43.t
	# desc = solarempiresparkles.43.d
	# picture = GFX_event_solarempire
	# is_triggered_only = yes

	# fire_only_once = yes

	# option = {
		# name = solarempiresparkles.43.a
		# FROM = {
			# add_political_power = 100
			# set_rule = { units_deployed_to_overlord = no }
		# }
	# }
	# option = {
		# name = solarempiresparkles.43.b
		# FROM = {
			# every_owned_state = {
				# limit = { is_core_of = FROM }
				# add_core_of = ROOT
			# }
		# }
		# annex_country = { target = FROM transfer_troops = yes }
		# add_political_power = -200
		# ai_chance = {
			# modifier = {
				# factor = 0
				# FROM = { is_ai = no }
			# }
		# }
	# }
# }

# #Sparkle breaks out of prison
# country_event = {
	# id = solarempiresparkles.100
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.100"}
	# title = solarempiresparkles.100.t
	# desc = solarempiresparkles.100.d
	# picture = GFX_event_solarempire

	# fire_only_once = yes

	# trigger = {
		# NOT = { has_country_flag = SOL_twilight_governor }
		# has_country_flag = SOL_twilight_unavailable
		# has_government = fascism
		# OR = {
			# 344 = {
				# controller = {
					# OR = {
						# tag = ROOT
						# is_subject_of = ROOT
						# is_in_faction_with = ROOT
					# }
				# }
			# }
			# var:global.SOL_twilight_captured_var = {
				# has_country_flag = SOL_twilight_captured
				# OR = {
					# has_civil_war = yes
					# has_capitulated = yes
				# }
			# }
		# }
	# }

	# mean_time_to_happen = {
		# days = 1
	# }

	# option = {
		# name = solarempiresparkles.100.a
		# clr_country_flag = SOL_twilight_unavailable
		# hidden_effect = {
			# var:global.SOL_twilight_captured_var = {
				# clr_country_flag = SOL_twilight_captured
			# }
			# clear_variable = global.SOL_twilight_captured_var
		# }
	# }
# }

# #Flurry Heart rescued
# country_event = {
	# id = solarempiresparkles.101
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.101"}
	# title = solarempiresparkles.101.t
	# desc = solarempiresparkles.101.d
	# picture = GFX_event_solarempire

	# fire_only_once = yes

	# trigger = {

		# OR = {
			# has_idea = flurryheart_imprisioned
			# has_idea = flurryheart_imprisioned1
		# }
		# OR = {
			# 3 = {
				# controller = { NOT = { tag = event_target:solar_empire } }
			# }
			# AND = {
				# has_war_with = event_target:solar_empire
				# event_target:solar_empire = { has_capitulated = yes }
			# }
		# }
	# }

	# mean_time_to_happen = {
		# days = 1
	# }

	# option = {
		# name = solarempiresparkles.101.a
		# remove_ideas = {
			# flurryheart_imprisioned
			# flurryheart_imprisioned1
		# }
		# if = {
			# limit = { has_idea = royal_family2 }
			# swap_ideas = { remove_idea = royal_family2 add_idea = royal_family3 }
		# }
		# if = {
			# limit = { has_idea = royal_family }
			# swap_ideas = { remove_idea = royal_family add_idea = royal_family2 }
		# }
	# }
# }

# #CRY stops being a solar governorship
# country_event = {
	# id = solarempiresparkles.102
	# immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.102"}
	# hidden = yes

	# fire_only_once = yes

	# trigger = {
		# original_tag = CRY
		# has_country_flag = CRY_solar_governorship
		# OR = {
			# NOT = { is_subject_of = event_target:solar_empire }
			# NOT = { has_government = fascism }
		# }
	# }

	# mean_time_to_happen = {
		# days = 1
	# }

	# immediate = {
		# event_target:solar_empire = {
			# clr_country_flag = SOL_twilight_unavailable
			# clr_country_flag = SOL_twilight_governor
		# }
		# EQS = {
			# clr_country_flag = SOL_twilight_unavailable
			# clr_country_flag = SOL_twilight_governor
		# }
		# clr_country_flag = CRY_solar_governorship
		# if = {
			# limit = {
				# EQS_twilight_sparkle = { is_unit_leader = yes }
			# }
			# remove_unit_leader_role = EQS_twilight_sparkle
		# }
		# delete_unit_template_and_units = { division_template = "Order Militant" }
		# load_focus_tree = crystalempire
		# if = {
			# limit = { NOT = { has_country_flag = is_changeling_puppet } }
			# drop_cosmetic_tag = yes
			# set_party_name = { ideology = fascism long_name = CRY_fascism_party_long name = CRY_fascism_party }
		# }
		# if = {
			# limit = {
				# AND = {
					# has_country_leader = { character = EQS_twilight_sparkle ruling_only = yes }
					# EQS_twilight_sparkle = { has_character_flag = twilight_char_ascended_flag }
				# }
			# }
			# retire_country_leader = yes
			# CRY_radiant_hope = {
				# promote_character = nazism
			# }
		# }
	# }

	# option = {
	# }
# }

#country_event = {
#	id = solarempiresparkles.103
#	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempiresparkles.103"}
#	hidden = yes
#
#	trigger = {
#		original_tag = CRY
#		is_subject_of = event_target:solar_empire
#		NOT = {
#			has_country_flag = CRY_thinking_about_staying_a_SOL_puppet
#			EQS = { has_civil_war = yes }
#			has_war_with = NLR
#		}
#		NOT = { has_country_flag = is_sol_puppet }
#	}
#
#	mean_time_to_happen = {
#		days = 1
#	}
#
#	immediate = {
#		set_country_flag = is_sol_puppet
#		if = {
#			limit = { NOT = { has_country_flag = CRY_dont_give_SOL_cosmetic } }
#			set_cosmetic_tag = CRY_SOL
#		}
#	}
#
#	option = {
#	}
#}

### PUPPETS #####
country_event = { # celestia Puppet
	id = solarempire.1000
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1000"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = PLB_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1001
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1001"}
	hidden = yes
	is_triggered_only = yes
	option = {
		retire_country_leader = yes
		set_cosmetic_tag = GRF_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1002
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1002"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = PNG_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1003
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1003"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = STL_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1004
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1004"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = BUF_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1005
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1005"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = DRG_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1006
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1006"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = GFF_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # Removal of cosmetic
	id = solarempire.1007
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1007"}
	hidden = yes
	trigger = {
		OR = {
			AND = {
				has_country_flag = is_solar_puppet
				NOT = { is_subject_of = event_target:solar_empire }
			}
			AND = {
				original_tag = CRY
				NOT = {
					is_subject_of = event_target:solar_empire
					is_in_faction_with = event_target:solar_empire
				}
				has_country_flag = is_sol_puppet
			}
		}
	}
	mean_time_to_happen = { days = 2 }
	option = {
		clr_country_flag = is_solar_puppet
		clr_country_flag = is_sol_puppet
		if = {
			limit = {
				has_puppet_cosmetic_flag = no
			}
			drop_cosmetic_tag = yes
			reapply_secondary_cosmetic_tags = yes
			add_political_power = 110
		}
	}
}

country_event = { # celestia Puppet
	id = solarempire.1008
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1008"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = OLE_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1009
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1009"}
	hidden = yes
	is_triggered_only = yes
	option = {
		set_cosmetic_tag = BAL_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1010
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1010"}
	hidden = yes
	is_triggered_only = yes
	option = {
		if = { 
			limit = { NOT = { has_country_flag = CES_initiate_solar_path } }
			set_cosmetic_tag = CES_SOL
		}
		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1011
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1011"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = JUN_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1012
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1012"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = SCS_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1013
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1013"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = STG_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1015
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1015"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = JAK_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1016
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1016"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = CHN_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1017
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1017"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = YAK_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = {
	id = solarempire.1018
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1018"}
	hidden = yes

	is_triggered_only = yes
	#trigger = {
	#	NOT = { has_focus_tree = equestria_focus }
	#}
	option = {
		# Marks gui as "dirty" so the code updates the layout to properly hide the unused branches
		mark_focus_tree_layout_dirty = yes
		#if = {
		#	limit = {
		#		has_cosmetic_tag = EQS_SOL
		#		is_EQS_SOL = no
		#	}
		#	drop_cosmetic_tag = yes
		#	if = {
		#		limit = { has_country_flag = SOL_bat_problems_flag }
		#		every_state = {
		#			limit = {
		#				has_state_flag = eqs_bat_state
		#			}
		#			add_core_of = ROOT
		#			clr_state_flag = eqs_bat_state
		#		}
		#	}
		#}
	}
}

country_event = { # celestia Puppet
	id = solarempire.1019
	immediate = {log = "[GetDateText]: [Root.GetName]: event solarempire.1017"}
	hidden = yes

	is_triggered_only = yes
	option = {
		set_cosmetic_tag = PCB_SOL

		set_country_flag = is_solar_puppet
	}
}
