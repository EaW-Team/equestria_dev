add_namespace = solarempire
add_namespace = solarempiresparkles

country_event = {
	id = solarempire.1
	immediate = {log = "[Root.GetName]: event solarempire.1"}#Auto-logging
	title = solarempire.1.t
	desc = {
		trigger = { has_war = yes }
		text = solarempire.1.d
	}
	desc = {
		trigger = { has_war = no }
		text = solarempire.1.d_peace
	}
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		if = {
			limit = { has_unit_leader = 1337 }
			remove_unit_leader = 1337
		}
	}

	option = {
		name = solarempire.1.a
		effect_tooltip = { remove_unit_leader = 1337 }
	}
}

country_event = {
	id = solarempire.2
	immediate = {log = "[Root.GetName]: event solarempire.2"}#Auto-logging
	title = solarempire.2.t
	desc = solarempire.2.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = solarempire.2.a
		create_field_marshal = {
			name = "Daybreaker"
			portrait_path = "gfx/leaders/EQS/Daybreaker.tga"
			traits = { supernova }
			skill = 1
			id = 1337
			attack_skill = 6
			defense_skill = 5
			planning_skill = 5
			logistics_skill = 5
			female = yes
		}
		if = {
			limit = { has_country_flag = remove_db_70_days }
			hidden_effect = {
				clr_country_flag = remove_db_70_days
				country_event = { id = solarempire.1 days = 140 }
			}
			custom_effect_tooltip = solarempire.2.a.tp_70
		}
		else = {
			custom_effect_tooltip = solarempire.2.a.tp_40
			hidden_effect = { country_event = { id = solarempire.1 days = 80 } }
		}
	}
}

country_event = {
	id = solarempire.5
	immediate = {log = "[Root.GetName]: event solarempire.5"}#Auto-logging
	title = solarempire.5.t
	desc = solarempire.5.d
	picture = GFX_event_night_riders

	is_triggered_only = yes

	option = { #Support celestia
		name = solarempire.5.a
		reverse_add_opinion_modifier = { target = NLR modifier = cry_betrayal }
		if = {
			limit = { original_tag = CRY NOT = { has_completed_focus = CRY_subordination }  }
			end_puppet_this = yes
			set_country_flag = former_EQS_puppet
		}
		effect_tooltip = {
			add_to_war_EQS_against_NLR = yes
		}
		hidden_effect = {
			country_event = { id = equestria.166 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = no }
			}
			set_country_flag = supported_EQS
		}
		ai_chance = {
			factor = 3
			modifier = {
				original_tag = CRY
				factor = 3
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 1.5
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 2
			}
		}
	}
	option = { #Stay neutral
		name = solarempire.5.b
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		reverse_add_opinion_modifier = { target = NLR modifier = cry_betrayal }
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = NLR
				clr_country_flag = bypass_on_peaceconference_ended
			}
			set_country_flag = ignored_EQS_civil_war
			set_country_flag = former_EQS_puppet
		}
		ai_chance = {
			factor = 4
			modifier = {
				NOT = { is_pony_race = yes }
				factor = 3
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 100
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = NLR
				}
				factor = 3
			}
		}
	}
	option = { #Support NMM
		name = solarempire.5.c
		if = {
			limit = { is_subject_of = event_target:equestria }
			get_current_autonomy_level = yes
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_NLR
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = NLR
				clr_country_flag = bypass_on_peaceconference_ended
			}
		}
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war_NLR_against_EQS = yes
		}
		hidden_effect = {
			country_event = { id = equestria.167 days = 1 }
		}
		if = {
			limit = {
				original_tag = EQC
			}
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				NLR = { set_autonomy = { target = ROOT autonomy_state = autonomy_satellite } }
				else = {
					NLR = { puppet = ROOT }
				}
			}
			load_focus_tree = eqc_nlr_focus
			retire_country_leader = yes
			create_country_leader = {
				name = "Jet Set"
				desc = "POLITICS_JETSET"
				picture = "JetSet.tga"
				expire = "1965.1.1"
				ideology = moderatism
				id = 700 #Jet Set
				traits = {

				}
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_party_name = { ideology = neutrality long_name = EQC_bat_supporters name = EQC_bat_supporters }
			country_event = { id = mareland.44 days = 1 }			
			add_stability = -0.2
			add_war_support = -0.2
		}
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				original_tag = CRY
			}
			modifier = {
				factor = 10
				has_government = fascism
			}
		}
	}
}

#For CRY
country_event = {
	id = solarempire.6
	immediate = {log = "[Root.GetName]: event solarempire.6"}#Auto-logging
	title = solarempire.6.t
	desc = solarempire.6.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	option = { #Support luna
		name = solarempire.6.a
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		if = {
			limit = { original_tag = CRY NOT = { has_completed_focus = CRY_subordination }  }
			end_puppet_this = yes
			set_country_flag = former_EQS_puppet
		}
		effect_tooltip = {
			add_to_war_EQS_against_SOL = yes
		}
		hidden_effect = {
			country_event = { id = equestria.162 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = no }
			}
			set_country_flag = supported_EQS
			if = {
				limit = { 
					original_tag = EQC 
					has_unit_leader = 711
				}
				country_event = { id = EQC_SOL.1 days = 14 }
			}
		}
		ai_chance = {
			factor = 2.5
		}
	}
	option = { #Stay neutral
		name = solarempire.6.b
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = event_target:solar_empire }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = event_target:solar_empire
				clr_country_flag = bypass_on_peaceconference_ended
			}
			set_country_flag = ignored_EQS_civil_war
			set_country_flag = former_EQS_puppet
			if = {
				limit = { 
					original_tag = EQC 
					has_unit_leader = 711
				}
				country_event = { id = EQC_SOL.1 days = 14 }
			}
		}
		ai_chance = {
			factor = 4
			modifier = {
				NOT = { is_pony_race = yes }
				factor = 3
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 3
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 0.75
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 0.5
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 100
			}
		}
	}
	option = { #Support Daybreaker
		name = solarempire.6.c
		if = {
			limit = { is_subject_of = event_target:equestria }
			get_current_autonomy_level = yes
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_SOL
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:equestria }
			leave_faction = yes
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = event_target:solar_empire }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = event_target:solar_empire
				clr_country_flag = bypass_on_peaceconference_ended
			}
		}
		reverse_add_opinion_modifier = { target = event_target:equestria modifier = cry_betrayal }
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war_SOL_against_EQS = yes
		}
		if = {
			limit = { 
				original_tag = EQC 
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
		}
		hidden_effect = {
			get_current_government_type = yes
		}
		event_target:solar_empire = {
			set_autonomy = { target = ROOT autonomy_state = autonomy_reichsprotectorate }	
		}
		hidden_effect = {
			restore_previous_government_type = yes
			country_event = { id = equestria.160 days = 1 }
		}
		ai_chance = {
			factor = 1.2
			modifier = {
				factor = 0
				original_tag = CRY
			}
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 1.4
				has_autonomy_state = autonomy_integrated_puppet
			}
			modifier = {
				factor = 1.2
				has_autonomy_state = autonomy_puppet
			}
		}
	}
}

##For CRY
#country_event = {
#	id = solarempire.7
#	immediate = {log = "[Root.GetName]: event solarempire.7"}#Auto-logging
#	title = solarempire.7.t
#	desc = solarempire.7.d
#	picture = GFX_event_solarempire
#
#	#fire_only_once = yes
#
#	is_triggered_only = yes
#
#	option = { #k bend the knee
#		name = solarempire.7.a
#		add_political_power = -200
#		get_current_government_type = yes
#		event_target:solar_empire = { puppet = ROOT }
#		restore_previous_government_type = yes
#		add_autonomy_ratio = { value = 0.80 }
#		ai_chance = {
#			factor = 1
#			modifier = {
#				factor = 0
#				strength_ratio = { tag = event_target:solar_empire ratio > 0.8 }
#			}
#		}
#	}
#	option = { #refuse
#		name = solarempire.7.b
#		add_political_power = 100
#		event_target:solar_empire = { country_event = { id = solarempire.5 days = 1 } }
#		ai_chance = {
#			factor = 1
#		}
#	}
#}

#Elements leave
country_event = {
	id = solarempire.8
	immediate = {log = "[Root.GetName]: event solarempire.8"}#Auto-logging
	title = solarempire.8.t
	desc = solarempire.8.d
	picture = GFX_event_solarempire

	fire_only_once = yes

	trigger = {
		tag = event_target:solar_empire
		OR = {
			has_unit_leader = 5
			has_unit_leader = 7
			has_unit_leader = 9
			has_unit_leader = 10000
			NOT = { has_country_flag = SOL_harmonic_commanders_leave }
		}
	}

	mean_time_to_happen = {
		days = 180
		modifier = {
			factor = 4
			has_defensive_war = yes
		}
		modifier = {
			factor = 1.5
			NOT = {
				has_completed_focus = SOL_empress_mother
				has_completed_focus = SOL_god_empress
			}
		}
		modifier = {
			factor = 0.7
			has_offensive_war = yes
		}
		modifier = {
			factor = 0.1
			focus_progress = { focus = SOL_generals_loyality progress > 0.1 }
		}
		modifier = {
			factor = 0.01
			focus_progress = { focus = SOL_generals_loyality progress > 0.8 }
		}
		modifier = {
			factor = 0.001
			has_completed_focus = SOL_generals_loyality
		}
	}

	option = { #very well
		name = solarempire.8.a
		add_political_power = -20
		if = {
			limit = { has_unit_leader = 5 }
			remove_unit_leader = 5
		}
		if = {
			limit = { has_unit_leader = 7 }
			remove_unit_leader = 7
		}
		if = {
			limit = { has_unit_leader = 9 }
			remove_unit_leader = 9
		}
		if = {
			limit = { has_unit_leader = 10 }
			remove_unit_leader = 10
		}
		if = {
			limit = { has_unit_leader = 10000 }
			remove_unit_leader = 10000
		}
		set_country_flag = SOL_harmonic_commanders_leave
	}
}

#Purge
country_event = {
	id = solarempire.10
	immediate = {log = "[Root.GetName]: event solarempire.10"}#Auto-logging
	title = solarempire.10.t
	desc = {
		text = solarempire.10.d_inq
		trigger = {
			has_completed_focus = SOL_god_empress
		}
	}
	desc = {
		text = solarempire.10.d
		trigger = {
			NOT = {
				has_completed_focus = SOL_god_empress
			}
		}
	}
	picture = GFX_event_solarempire

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = SOL_purge_finished }
	}

	option = { #very well
		name = solarempire.10.a
		trigger = {
			has_unit_leader = 2
		}
		remove_unit_leader = 2
	}
	option = { #very well
		name = solarempire.10.b
		trigger = {
			has_unit_leader = 3
		}
		remove_unit_leader = 3
	}
	option = { #very well
		name = solarempire.10.c
		trigger = {
			has_unit_leader = 4
		}
		remove_unit_leader = 4
	}
}

#New Generals
country_event = {
	id = solarempire.11
	immediate = {log = "[Root.GetName]: event solarempire.11"}#Auto-logging
	title = solarempire.11.t
	desc = solarempire.11.d
	picture = GFX_event_solarempire

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempire.11.a
		create_field_marshal = {
			name = "Sunset Shimmer"
			portrait_path = "gfx/leaders/SOL/Sunset.tga"
			traits = { sunset_shimmer_t fast_planner }
			skill = 3
			attack_skill = 4
			defense_skill = 3
			planning_skill = 4
			logistics_skill = 3
			id = 34
		}
		create_corps_commander = {
			name = "Midwinter Halo"
			portrait_path = "gfx/leaders/SOL/Midwinter.tga"
			traits = { commando harsh_leader }
			skill = 2
			attack_skill = 3
			defense_skill = 2
			planning_skill = 4
			logistics_skill = 3
			id = 35
		}
		if = {
			limit = { NOT = { has_global_flag = EQS_Eisenstadt_created } }
			create_corps_commander = {
				name = "August von Eisenstadt"
				portrait_path = "gfx/leaders/EQS/mageytash.tga"
				traits = { career_officer }
				skill = 2
				id = 11
				attack_skill = 3
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 2
			}
			set_global_flag = EQS_Eisenstadt_created
		}
		if = {
			limit = { NOT = { has_global_flag = EQS_Comet_Trail_created } }
			create_corps_commander = {
				name = "Comet Trail"
				portrait_path = "gfx/leaders/CES/Stemis.tga"
				traits = { supply_raider }
				skill = 2
				attack_skill = 3
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 3
				id = 204
			}
			set_global_flag = EQS_Comet_Trail_created
			random_army_leader = {
				limit = { has_id = 204 }
				save_global_event_target_as = EQS_Comet_Trail
			}
		}
		else_if = {
			limit = { NOT = { has_unit_leader = 204 } }
			event_target:EQS_Comet_Trail = { set_nationality = ROOT }
		}
		create_corps_commander = {
			name = "Capsaicin"
			portrait_path = "gfx/leaders/SOL/Spice.tga"
			traits = { urban_assault_specialist }
			skill = 2
			attack_skill = 3
			defense_skill = 4
			planning_skill = 2
			logistics_skill = 3
			id = 36
		}
		create_corps_commander = {
			name = "Comm Rush"
			portrait_path = "gfx/leaders/SOL/Comm Rush.tga"
			traits = {  }
			skill = 2
			attack_skill = 4
			defense_skill = 2
			planning_skill = 3
			logistics_skill = 3
			id = 37
		}
		create_corps_commander = {
			name = "Stormchaser"
			portrait_path = "gfx/leaders/SOL/Stormchaser.tga"
			traits = { stormchaser }
			skill = 2
			attack_skill = 2
			defense_skill = 4
			planning_skill = 3
			logistics_skill = 1
			id = 38
		}
	}
}

country_event = {
	id = solarempire.123
	immediate = {log = "[Root.GetName]: event solarempire.123"}#Auto-logging
	title = solarempire.123.t
	desc = solarempire.123.d
	picture = GFX_event_pony_statue

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = former_EQS_puppet
			#clr_country_flag = supported_EQS
		}
	}

	option = {
		name = solarempire.12.a
		hidden_effect = { get_current_government_type = yes }
		FROM = { puppet = ROOT }
		set_previous_autonomy_level = yes
		hidden_effect = { restore_previous_government_type = yes }
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 2
			modifier = {
				factor = 5
				has_country_flag = supported_EQS
			}
			modifier = {
				factor = 0.75
				strength_ratio = { tag = FROM ratio > 0.8 }
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 0
			}
		}
	}
	option = {
		name = solarempire.12.b
		FROM = {
			create_wargoal = {
				target = ROOT type = puppet_wargoal_focus
			}
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
		}
	}
}

country_event = {
	id = solarempire.122
	immediate = {log = "[Root.GetName]: event solarempire.122"}#Auto-logging
	title = solarempire.122.t
	desc = solarempire.122.d
	picture = GFX_event_lunar_republic

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = former_EQS_puppet
			#clr_country_flag = supported_NLR
		}
	}

	option = {
		name = solarempire.12.a
		hidden_effect = { get_current_government_type = yes }
		FROM = { puppet = ROOT }
		set_previous_autonomy_level = yes
		hidden_effect = { restore_previous_government_type = yes }
		if = {
			limit = {
				original_tag = EQC
			}
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				FROM = { set_autonomy = { target = ROOT autonomy_state = autonomy_satellite } }
			}
			load_focus_tree = eqc_nlr_focus
			retire_country_leader = yes
			create_country_leader = {
				name = "Jet Set"
				desc = "POLITICS_JETSET"
				picture = "JetSet.tga"
				expire = "1965.1.1"
				ideology = moderatism
				id = 700 #Jet Set
				traits = {

				}
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_party_name = { ideology = neutrality long_name = EQC_bat_supporters name = EQC_bat_supporters }
			country_event = { id = mareland.44 days = 1 }			
			add_stability = -0.2
			add_war_support = -0.2
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				has_country_flag = supported_NLR
			}
			modifier = {
				factor = 0.1
				strength_ratio = { tag = FROM ratio > 0.8 }
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 0
			}
		}
	}
	option = {
		name = solarempire.12.b
		FROM = {
			create_wargoal = {
				target = ROOT type = puppet_wargoal_focus
			}
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
		}
	}
}

country_event = {
	id = solarempire.12
	immediate = {log = "[Root.GetName]: event solarempire.12"}#Auto-logging
	title = solarempire.12.t
	desc = solarempire.12.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = former_EQS_puppet
			#clr_country_flag = supported_SOL
		}
	}

	option = {
		name = solarempire.12.a
		hidden_effect = { get_current_government_type = yes }
		FROM = { puppet = ROOT }
		set_previous_autonomy_level = yes
		hidden_effect = { restore_previous_government_type = yes }
		if = {
			limit = { 
				original_tag = EQC 
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
			set_cosmetic_tag = EQC_SOL
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
			modifier = {
				factor = 5
				has_country_flag = supported_SOL
			}
			modifier = {
				factor = 0.1
				strength_ratio = { tag = FROM ratio > 0.8 }
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 0
			}
		}
	}
	option = {
		name = solarempire.12.b
		FROM = {
			create_wargoal = {
				target = ROOT type = puppet_wargoal_focus
			}
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
			modifier = {
				factor = 0
				has_country_flag = EQC_solar_coup
			}
		}
	}
}

country_event = {
	id = solarempire.13
	immediate = {log = "[Root.GetName]: event solarempire.13"}#Auto-logging
	title = solarempire.13.t
	desc = solarempire.13.d
	picture = GFX_event_solarempire

	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = solarempire.13.a
		trigger = {
			NOT = {
				any_country = {
					has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" }
				}
			}
		}
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = evil_twilight_sparkle
		hidden_effect = {
			set_global_flag = SOL_twilight_converted
			every_country = {
				limit = { has_country_flag = CRY_solar_governorship }
				retire_country_leader = yes
				create_country_leader = {
					name = "Grand Inquisitor Sunrise Sparkle"
					#desc = "TWILIGHT_DESC"
					picture = "TwilightSunrise.tga"
					expire = "1965.1.1"
					ideology = falangism
					traits = {
						lady_inquisitor
					}
				}
			}
		}
	}
	option = {
		name = solarempire.13.a
		trigger = {
			any_country = {
				has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" }
			}
		}
		random_country = {
			limit = { has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" } }
			if = {
				limit = { NOT = { is_subject_of = ROOT } }
				ROOT = { puppet = PREV }
			}
			hidden_effect = {
				ROOT = {
					set_country_flag = SOL_twilight_governor
					set_autonomy = { target = PREV autonomy_state = autonomy_reichskommissariat }
				}
				set_cosmetic_tag = CRY_SOL
				add_autonomy_ratio = { value = -0.20 }
				set_country_flag = CRY_solar_governorship
				load_focus_tree = crystal_empire_solar_focus
				set_party_name = { ideology = fascism long_name = SOL_fascism_party_long name = SOL_fascism_party }
				retire_country_leader = yes
				create_country_leader = {
					name = "Grand Inquisitor Sunrise Sparkle"
					#desc = "TWILIGHT_DESC"
					picture = "TwilightSunrise.tga"
					expire = "1965.1.1"
					ideology = falangism
					traits = {
						lady_inquisitor
					}
				}
			}
		}
		hidden_effect = { set_global_flag = SOL_twilight_converted }
	}
}

country_event = {
	id = solarempire.14
	immediate = {log = "[Root.GetName]: event solarempire.14"}#Auto-logging
	title = solarempire.14.t
	desc = solarempire.14.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	option = { #Stay neutral
		name = solarempire.14.a
		trigger = {
			OR = {
				NOT = { original_tag = EQC }
				NOT = { has_completed_focus = EQC_strengthen_equestrian_ties }
			}
		}
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = NLR
				clr_country_flag = bypass_on_peaceconference_ended
			}
			set_country_flag = former_EQS_puppet
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 3
				original_tag = CRY
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 1.5
			}
		}
	}
	option = { #Support Daybreaker
		name = solarempire.14.b
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = EQS enemy = NLR
			}
		}
		if = {
			limit = { 
				original_tag = EQC 
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
		}
		hidden_effect = {
			country_event = { id = equestria.160 days = 1 }
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 1.5
				NOT = { original_tag = CRY }
			}
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 2
				has_autonomy_state = autonomy_integrated_puppet
			}
			modifier = {
				factor = 1.5
				has_autonomy_state = autonomy_puppet
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_eqs_strengthen_ties
				factor = 0.75
			}
			modifier = {
				original_tag = CRY
				has_completed_focus = CRY_deep_integration
				factor = 0.5
			}
		}
	}
	option = { #Support NMM
		name = solarempire.14.c
		if = {
			limit = { is_subject_of = event_target:solar_empire }
			get_current_autonomy_level = yes
			set_country_flag = former_EQS_puppet
			set_country_flag = supported_NLR
			end_puppet_this = yes
		}
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = NLR }
				set_country_flag = bypass_on_peaceconference_ended
				white_peace = NLR
				clr_country_flag = bypass_on_peaceconference_ended
			}
		}
		add_popularity = { ideology = democratic popularity = -0.1 }
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = NLR enemy = EQS
			}
		}
		hidden_effect = {
			country_event = { id = equestria.163 days = 1 }
		}
		ai_chance = {
			factor = 0.5 #ya gotta be kidding
		}
	}
}

country_event = {
	id = solarempire.15
	immediate = {log = "[Root.GetName]: event solarempire.15"}#Auto-logging
	title = solarempire.15.t
	desc = solarempire.15.d
	picture = GFX_event_solarempire

	trigger = {
		original_tag = CRY
		has_global_flag = SOL_wartime_change
		event_target:solar_empire = { has_war = no }
		is_subject_of = event_target:solar_empire
		NOT = {
			has_government = fascism
			event_target:solar_empire = { has_completed_focus = Crystal_Fair }
			has_country_flag = SOL_CRY_didnt_break_free
		}
	}

	mean_time_to_happen = { days = 30 }

	option = { #Break free
		name = solarempire.15.a
		end_puppet_this = yes
		if = {
			limit = { is_in_faction_with = event_target:solar_empire }
			event_target:solar_empire = { remove_from_faction = ROOT }
		}
		reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		if = {
			limit = { NOT = { original_tag = CRY } }
			event_target:solar_empire = {
				create_wargoal = {
					target = ROOT type = puppet_wargoal_focus
				}
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 8
				original_tag = CRY
			}
			modifier = {
				NOT = {
					is_neighbor_of = event_target:equestria
					is_neighbor_of = event_target:solar_empire
				}
				factor = 1.5
			}
		}
	}
	option = { #Status quo
		name = solarempire.15.b

		ai_chance = {
			factor = 3
			modifier = {
				factor = 10
				has_government = fascism
			}
			modifier = {
				factor = 4
				has_autonomy_state = autonomy_integrated_puppet
				NOT = { original_tag = CRY }
			}
			modifier = {
				factor = 2
				has_autonomy_state = autonomy_puppet
				NOT = { original_tag = CRY }
			}
		}
	}
}

country_event = {
	id = solarempire.16
	immediate = {log = "[Root.GetName]: event solarempire.16"}#Auto-logging
	hidden = yes

	trigger = {
		event_target:solar_empire = {
			exists = yes
			has_completed_focus = SOL_Imperium_Solis
			has_country_leader = { ruling_only = yes name = "Daybreaker" }
		}
		has_war_with = event_target:solar_empire
		NOT = { has_idea = SOL_enemy_debuff_idea }
	}

	mean_time_to_happen = { days = 7 }

	immediate = {
		add_ideas = SOL_enemy_debuff_idea
	}

	option = {
	}
}

#Twiggles thinks of running away
country_event = {
	id = solarempire.17
	immediate = {log = "[Root.GetName]: event solarempire.17"}#Auto-logging
	hidden = yes

	fire_only_once = yes
	trigger = {
		tag = event_target:solar_empire
	}

	mean_time_to_happen = { days = 4 }

	immediate = {
		if = {
			limit = { has_country_flag = sol_wartime_change }
			random_list = {
				10 = {

				}
				90 = {
					set_country_flag = SOL_has_twilight
				}
			}
		}
		else = {
			random_list = {
				30 = {

				}
				70 = {
					set_country_flag = SOL_has_twilight
				}
			}
		}
		if = {
			limit = {
				any_country = {
					has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" }
					NOT = { has_country_flag = supported_SOL }
				}
			}
			clr_country_flag = SOL_has_twilight
		}
		if = {
			limit = {
				NOT = {
					any_country = {
						OR = {
							AND = {
								original_tag = EQS
								has_government = democratic
								NOT = {
									is_subject_of = ROOT
									is_in_faction_with = ROOT
								}
								has_capitulated = no
								exists = yes
							}
							AND = {
								original_tag = CRY
								has_government = democratic
								NOT = {
									is_subject_of = ROOT
									is_in_faction_with = ROOT
									has_war_together_with = ROOT
								}
								has_capitulated = no
								exists = yes
							}
						}
					}
				}
			}
			set_country_flag = SOL_has_twilight
		}
		if = {
			limit = {
				has_country_flag = SOL_has_twilight
				any_country = {
					has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" }
				}
			}
			random_country = {
				limit = { has_country_leader = { id = 1000 ruling_only = yes name = "Princess Twilight Sparkle" } }
				save_event_target_as = sparkle_CRY
			}
			if = {
				limit = {
					event_target:sparkle_CRY = { has_country_flag = supported_SOL }
				}
				news_event = solarempire.19
			}
			else = {
				if = {
					limit = { NOT = { has_war_with = event_target:sparkle_CRY } }
					news_event = solarempire.20
				}
			}
		}
		else_if = {
			limit = { has_country_flag = SOL_has_twilight }
			random_country = {
				limit = {
					original_tag = EQS
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
				news_event = solarempire.18
			}
		}
		else_if = {
			limit = {
				any_country = {
					original_tag = EQS
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
			}
			random_country = {
				limit = {
					original_tag = EQS
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
						has_war_together_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
				set_country_flag = EQS_CRY_has_twilight
				if = {
					limit = { NOT = { has_unit_leader = 12 } }
					event_target:EQS_Berrytwist = { set_nationality = PREV }
				}
			}
			news_event = solarempire.21
		}
		else_if = {
			limit = {
				any_country = {
					original_tag = CRY
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
						has_war_together_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
			}
			random_country = {
				limit = {
					original_tag = CRY
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
				if = {
					limit = { NOT = { has_unit_leader = 12 } }
					event_target:EQS_Berrytwist = { set_nationality = PREV }
				}
				set_country_flag = EQS_CRY_has_twilight
				add_ideas = twilight_sparkle_cry
				news_event = { id = solarempire.25 days = 1 }
			}
			news_event = solarempire.21
		}
		else = { set_country_flag = SOL_has_twilight }
	}

	option = {
	}
}

#solarempire.18 - Twilight caught by DB
#solarempire.19 - Twilight is CRY HoS, agreed to stay a puppet
#solarempire.20 - Twilight is CRY HoS, didn't agree to stay a puppet
#solarempire.21 - Twilight runs away

#Twilight caught by DB
news_event = {
	id = solarempire.18
	title = solarempire.18.t
	desc = {
		text = solarempire.18.d_sol
		trigger = {
			OR = {
				NOT = { has_government = democratic }
				has_war_together_with = event_target:solar_empire
				is_in_faction_with = event_target:solar_empire
				is_subject_of = event_target:solar_empire
			}
		}
	}
	desc = {
		text = solarempire.18.d_eqs
		trigger = {
			OR = {
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
	picture = GFX_news_daybreaker

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempire.18.a
		trigger = {
			tag = event_target:solar_empire
		}
		add_political_power = 20
		effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	}
	option = {
		name = solarempire.18.b
		trigger = {
			tag = event_target:equestria
		}
	}
	option = {
		name = solarempire.18.c
		trigger = {
			NOT = {
				tag = event_target:equestria
				tag = event_target:solar_empire
			}
		}
	}
}

#Twilight is CRY HoS, agreed to stay a puppet
news_event = {
	id = solarempire.19
	immediate = {log = "[Root.GetName]: event solarempire.19"}#Auto-logging
	title = solarempire.19.t
	desc = solarempire.19.d
	picture = GFX_crystal_city_news

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempire.19.a
		trigger = {
			tag = event_target:solar_empire
		}
		add_political_power = 20
		effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	}
	option = {
		name = solarempire.19.b
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
	option = {
		name = solarempire.19.c
		trigger = {
			NOT = { tag = event_target:solar_empire }
			OR = {
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
}

#Twilight is CRY HoS, didn't agree to stay a puppet
news_event = {
	id = solarempire.20
	immediate = {log = "[Root.GetName]: event solarempire.20"}#Auto-logging
	title = solarempire.20.t
	desc = solarempire.20.d
	picture = GFX_crystal_city_news

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		trigger = { NOT = { tag = event_target:solar_empire } }
		name = solarempire.20.a
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempire.20.b
	}
}

#solarempire.21 - Twilight runs away
news_event = {
	id = solarempire.21
	immediate = {log = "[Root.GetName]: event solarempire.21"}#Auto-logging
	title = solarempire.21.t
	desc = {
		text = solarempire.21.d_eqs
		trigger = {
			any_country = {
				original_tag = EQS
				has_country_flag = EQS_CRY_has_twilight
			}
		}
	}
	desc = {
		text = solarempire.21.d_cry
		trigger = {
			any_country = {
				original_tag = CRY
				has_country_flag = EQS_CRY_has_twilight
			}
		}
	}
	picture = GFX_news_twilight_escape

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempire.21.a
	}
	option = {
		trigger = { has_country_flag = EQS_CRY_has_twilight }
		name = solarempire.21.b
	}
	option = {
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				has_country_flag = EQS_CRY_has_twilight
			}
		}
		name = solarempire.21.c
	}
}

#solarempire.22 - Twilight runs away again (to CRY)
country_event = {
	id = solarempire.22
	immediate = {log = "[Root.GetName]: event solarempire.22"}#Auto-logging
	hidden = yes

	fire_only_once = yes

	trigger = {
		tag = event_target:solar_empire
		any_enemy_country = {
			original_tag = EQS
			has_country_flag = EQS_CRY_has_twilight
			OR = {
				has_capitulated = yes
				capital_scope = { is_controlled_by = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	immediate = {
		if = {
			limit = {
				any_country = {
					original_tag = CRY
					has_government = democratic
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
						has_war_together_with = ROOT
					}
					has_capitulated = no
					exists = yes
				}
			}
			random_list = {
				50 = {
					every_country = {
						clr_country_flag = EQS_CRY_has_twilight
					}
					set_country_flag = SOL_has_twilight
					news_event = { id = solarempire.23 days = 1 }
				}
				50 = {
					random_country = {
						limit = {
							original_tag = CRY
							has_government = democratic
							NOT = {
								is_subject_of = ROOT
								is_in_faction_with = ROOT
								has_war_together_with = ROOT
							}
							has_capitulated = no
							exists = yes
						}
						set_country_flag = EQS_CRY_has_twilight
						add_ideas = twilight_sparkle_cry
						every_other_country = {
							clr_country_flag = EQS_CRY_has_twilight
						}
						news_event = { id = solarempire.25 days = 2 }
					}
					news_event = { id = solarempire.24 days = 1 }
				}
			}
		}
		else = {
			every_country = {
				clr_country_flag = EQS_CRY_has_twilight
			}
			set_country_flag = SOL_has_twilight
			news_event = { id = solarempire.23 days = 1 }
		}
	}

	option = {
	}
}

#SOL catches twilight after EQS is defeated
news_event = {
	id = solarempire.23
	immediate = {log = "[Root.GetName]: event solarempire.23"}#Auto-logging
	title = solarempire.23.t
	desc = solarempire.23.d
	picture = GFX_news_daybreaker

	fire_only_once = yes

	#is_triggered_only = yes

	trigger = {
		any_country = {
			tag = event_target:solar_empire
			NOT = { has_country_flag = SOL_has_twilight }
		}
		all_country = {
			original_tag = CRY
			OR = {
				is_subject_of = event_target:solar_empire
				exists = no
			}
		}
		all_country = {
			original_tag = EQS
			OR = {
				is_subject_of = event_target:solar_empire
				exists = no
			}
		}
	}

	option = {
		name = solarempire.23.a
		trigger = { tag = event_target:solar_empire }
		hidden_effect = {
			set_country_flag = SOL_has_twilight
			every_country = {
				clr_country_flag = EQS_CRY_has_twilight
			}
		}
		add_political_power = 20
		effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	}
	option = {
		name = solarempire.23.b
		trigger = {
			NOT = { tag = event_target:solar_empire }
			OR = {
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
	option = {
		name = solarempire.23.c
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
}

#Twilight runs away to CRY after EQS is defeated
news_event = {
	id = solarempire.24
	immediate = {log = "[Root.GetName]: event solarempire.24"}#Auto-logging
	title = solarempire.24.t
	desc = solarempire.24.d
	picture = GFX_news_twilight_escape

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempire.24.a
		trigger = { tag = event_target:solar_empire }
	}
	option = {
		name = solarempire.24.b
		trigger = { original_tag = CRY }
	}
	option = {
		name = solarempire.24.c
		trigger = {
			NOT = {
				original_tag = CRY
				tag = event_target:solar_empire
			}
			OR = {
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
	option = {
		name = solarempire.24.e
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				original_tag = CRY
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
}

#Twilight runs away to CRY after EQS is defeated
#For CRY
news_event = {
	id = solarempire.25
	immediate = {log = "[Root.GetName]: event solarempire.25"}#Auto-logging
	title = solarempire.25.t
	desc = solarempire.25.d
	picture = GFX_crystal_city_news

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempire.25.a
		trigger = { has_country_flag = EQS_CRY_has_twilight }
		effect_tooltip = { add_ideas = twilight_sparkle_cry }
	}
	option = {
		name = solarempire.25.b
		trigger = { tag = event_target:solar_empire }
		every_country = {
			limit = { original_tag = CRY has_country_flag = EQS_CRY_has_twilight }
			reverse_add_opinion_modifier = { target = event_target:solar_empire modifier = hostility }
		}
	}
	option = {
		name = solarempire.25.c
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				original_tag = CRY
			}
		}
	}
}

news_event = {
	id = solarempire.26
	immediate = {log = "[Root.GetName]: event solarempire.26"}#Auto-logging
	title = solarempire.26.t
	desc = solarempire.26.d
	picture = GFX_news_daybreaker

	fire_only_once = yes

	trigger = {
		any_country = {
			tag = event_target:solar_empire
			NOT = { has_country_flag = SOL_has_twilight }
		}
		OR = {
			NOT = { country_exists = CRY }
			AND = {
				any_country = {
					has_country_flag = EQS_CRY_has_twilight
					OR = {
						has_capitulated = yes
						is_subject_of = ROOT
					}
				}
			}
		}
	}

	option = {
		name = solarempire.26.a
		trigger = { tag = event_target:solar_empire }
		hidden_effect = { set_country_flag = SOL_has_twilight }
		add_political_power = 20
		effect_tooltip = { unlock_national_focus = SOL_twilight_ascend }
	}
	option = {
		name = solarempire.26.b
		trigger = {
			NOT = { tag = event_target:solar_empire }
			OR = {
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
	option = {
		name = solarempire.26.c
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				has_government = democratic
				has_war_with = event_target:solar_empire
			}
		}
	}
}

country_event = {
	id = solarempire.27
	immediate = {log = "[Root.GetName]: event solarempire.27"}#Auto-logging
	title = solarempire.27.t
	desc = solarempire.27.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = former_EQS_puppet
			#clr_country_flag = supported_SOL
		}
	}

	option = {
		name = solarempire.27.a
		FROM = { puppet = ROOT }
		set_previous_autonomy_level = yes
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
			modifier = {
				factor = 0.5
				strength_ratio = { tag = event_target:solar_empire ratio > 0.8 }
			}
			modifier = {
				factor = 0.1
				original_tag = CRY
			}
			modifier = {
				factor = 0
				original_tag = CRY
				NOT = { has_government = democratic }
			}
			modifier = {
				original_tag = EQC
				has_completed_focus = EQC_patriation
				factor = 0
			}
		}
	}
	option = {
		name = solarempire.27.b
		FROM = {
			create_wargoal = {
				target = ROOT type = puppet_wargoal_focus
			}
		}
		hidden_effect = { FROM = { country_event = { id = solarempire.28 days = 1 } } }
		ai_chance = {
			factor = 1.5
		}
	}
}

#notification
country_event = {
	id = solarempire.28
	immediate = {log = "[Root.GetName]: event solarempire.28"}#Auto-logging
	title = {
		text = solarempire.28.t_sub
		trigger = { FROM = { is_subject_of = ROOT } }
	}
	title = {
		text = solarempire.28.t_ref
		trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
	}
	desc = {
		text = solarempire.28.d_sub
		trigger = { FROM = { is_subject_of = ROOT } }
	}
	desc = {
		text = solarempire.28.d_ref
		trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
	}
	picture = GFX_event_pony_statue

	is_triggered_only = yes

	option = {
		name = solarempire.28.a
		trigger = { FROM = { is_subject_of = ROOT } }
		effect_tooltip = {
			puppet = FROM
		}
	}
	option = {
		name = solarempire.28.b
		trigger = { NOT = { FROM = { is_subject_of = ROOT } } }
		effect_tooltip = {
			create_wargoal = {
				target = FROM type = puppet_wargoal_focus
			}
		}
	}
}
country_event = {
	id = solarempire.29
	mean_time_to_happen = { days = 15 }
	fire_only_once = yes
	hidden = yes
	trigger = {
		tag = event_target:solar_empire
		has_government = fascism
		OR = {
			EQS = { exists = no }
			NLR = { exists = no }
		}
		TEM = { exists = yes }
	}
	option = {
		create_wargoal = { target = TEM type = annex_everything }
	}
}
#fluff
country_event = {
	id = solarempire.30
	immediate = {log = "[Root.GetName]: event solarempire.30"}#Auto-logging
	title = solarempire.30.t
	desc = {
		text = solarempire.30.d_pro
		trigger = { has_completed_focus = SOL_Protect_the_Weak }
	}
	desc = {
		text = solarempire.30.d_mot
		trigger = { has_completed_focus = SOL_Harmony_through_Order }
	}
	desc = {
		text = solarempire.30.d_god
		trigger = { has_completed_focus = SOL_Solar_Cult }
	}
	picture = GFX_event_solarempire

	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = solarempire.30.a
		trigger = { has_completed_focus = SOL_Protect_the_Weak }
		add_political_power = 20
	}
	option = {
		name = solarempire.30.b
		trigger = { has_completed_focus = SOL_Harmony_through_Order }
		add_political_power = 20
	}
	option = {
		name = solarempire.30.c
		trigger = { has_completed_focus = SOL_Solar_Cult }
		add_political_power = 20
	}
}

#EQC breaks free
#SOL recieves
country_event = {
	id = solarempire.31
	immediate = {log = "[Root.GetName]: event solarempire.31"}#Auto-logging
	title = solarempire.31.t
	desc = solarempire.31.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		end_puppet = FROM
		hidden_effect = { FROM = { country_event = { id = equestriancolony.2 hours = 1 } } }
	}

	option = {
		name = solarempire.31.a
		add_political_power = -200
		hidden_effect = { FROM = { country_event = { id = solarempire.32 days = 2 } } }
	}

	option = {
		name = solarempire.31.b
		create_wargoal = { type = puppet_wargoal_focus target = FROM }
		hidden_effect = {
			FROM = {
				set_country_flag = EQC_destined_to_be_an_RK
				country_event = { id = solarempire.33 days = 2 }
			}
		}
	}
}
#SOL agreed (what???)
country_event = {
	id = solarempire.32
	immediate = {log = "[Root.GetName]: event solarempire.32"}#Auto-logging
	title = solarempire.32.t
	desc = solarempire.32.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = solarempire.32.a
		add_political_power = 50
	}
}
#SOL is going to rape you
country_event = {
	id = solarempire.33
	immediate = {log = "[Root.GetName]: event solarempire.33"}#Auto-logging
	title = solarempire.33.t
	desc = solarempire.33.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = solarempire.33.a
	}
}
#Add harmonic resistance after war was won
country_event = {
	id = solarempire.34
	immediate = {log = "[Root.GetName]: event solarempire.34"}#Auto-logging
	title = solarempire.34.t
	desc = solarempire.34.d
	picture = GFX_event_solarempire

	trigger = {
		has_global_flag = SOL_wartime_change
		has_war = no
		is_EQS_SOL = yes
		NOT = {
			has_idea = SOL_harmonic_resistance_idea
			has_completed_focus = SOL_Freedom_from_Fear
			has_completed_focus = SOL_Firm_but_Fair
			has_completed_focus = SOL_Imperial_Inquisition
		}
	}

	mean_time_to_happen = {
		days = 30
	}

	fire_only_once = yes

	option = {
		name = solarempire.34.a
		add_ideas = SOL_harmonic_resistance_idea
	}
}

country_event = {
	id = solarempire.35
	immediate = {log = "[Root.GetName]: event solarempire.35"}#Auto-logging
	title = solarempire.35.t
	desc = solarempire.35.d
	picture = GFX_event_solarempire

	fire_only_once = yes

	trigger = {
		is_EQS_SOL = yes
		OR = {
			focus_progress = { focus = SOL_empress_protector progress > 0 }
			focus_progress = { focus = SOL_empress_mother progress > 0 }
			focus_progress = { focus = SOL_god_empress progress > 0 }
		}
		any_other_country = {
			original_tag = EQC
			is_subject_of = ROOT
			has_focus_tree = eqc_sol_focus
			NOT = { has_global_flag = SOL_chose_EQC_leader }
		}
	}

	mean_time_to_happen = { 
		days = 3
		modifier = {
			has_global_flag = SOL_wartime_change
			factor = 2
		}
	}

	immediate = {
		hidden_effect = {
			random_other_country = {
				limit = { 
					original_tag = EQC
					is_subject_of = ROOT
				}
				save_event_target_as = solar_EQC
			}
		}
	}

	option = { #Keep whoever
		name = solarempire.35.a
		if = {
			limit = {
				has_global_flag = SOL_wartime_change
			}
			event_target:solar_EQC = {
				country_event = { id = solarempire.36 days = 4 }
			}
		}
		ai_chance = {
			modifier = {
				factor = 2
				focus_progress = { focus = SOL_empress_protector progress > 0 }
			}
		}
	}
	option = { #Replace
		name = solarempire.35.b
		add_political_power = -100
		event_target:solar_EQC = {
			if = {
				limit = {
					has_global_flag = SOL_wartime_change
				}
				event_target:solar_EQC = {
					country_event = { id = solarempire.37 days = 4 }
				}
			}
			else = {
				add_autonomy_ratio = { value = -0.30 }
				create_country_leader = {
					name = "Arcane Nova"
					picture = "ArcaneNova.tga"
					expire = "1965.1.1"
					ideology = falangism
					traits = {
					}
				}
				set_party_name = { ideology = fascism long_name = EQC_SOL_fascism_party_long name = EQC_SOL_fascism_party }
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.2
				}
			}
		}
		ai_chance = {
			modifier = {
				factor = 4
				focus_progress = { focus = SOL_god_empress progress > 0 }
			}
		}
	}
}

country_event = {
	id = solarempire.36
	immediate = {log = "[Root.GetName]: event solarempire.36"}#Auto-logging
	title = solarempire.36.t
	desc = solarempire.36.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	option = { #Agree to be loyal
		name = solarempire.36.a
		if = {
			limit = {
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
		}
		hidden_effect = { set_global_flag = SOL_chose_EQC_leader }
	}
}

country_event = {
	id = solarempire.37
	immediate = {log = "[Root.GetName]: event solarempire.37"}#Auto-logging
	title = solarempire.37.t
	desc = solarempire.37.d
	picture = GFX_event_solarempire

	is_triggered_only = yes

	option = { #Agree to be replaced
		name = solarempire.37.a
		add_autonomy_ratio = { value = -0.30 }
		create_country_leader = {
			name = "Arcane Nova"
			picture = "ArcaneNova.tga"
			expire = "1965.1.1"
			ideology = falangism
			traits = {
			}
		}
		set_party_name = { ideology = fascism long_name = EQC_SOL_fascism_party_long name = EQC_SOL_fascism_party }
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		add_popularity = {
			ideology = fascism
			popularity = 0.2
		}
		if = {
			limit = {
				NOT = { has_focus_tree = eqc_sol_focus }
			}
			load_focus_tree = eqc_sol_focus
		}
		hidden_effect = { set_global_flag = SOL_chose_EQC_leader }
	}
	option = { #No!
		name = solarempire.37.b
		FROM = { country_event = { id = solarempire.31 days = 2 } }
		trigger = {
			NOT = { has_country_flag = EQC_solar_coup }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_country_flag = EQC_dont_break_free_from_SOL
			}
			modifier = {
				factor = 0
				NOT = { overlord = { focus_progress = { focus = SOL_god_empress progress > 0 } } }
				strength_ratio = { tag = FROM ratio < 0.5 }
			}
			modifier = {
				factor = 5
				strength_ratio = { tag = FROM ratio > 0.9 }
			}
		}
	}
}

country_event = {
	id = solarempire.38
	immediate = {log = "[Root.GetName]: event solarempire.38"}#Auto-logging
	title = solarempire.38.t
	desc = solarempire.38.d
	picture = GFX_event_solarempire

	trigger = {
		has_idea = SOL_harmonic_resistance_idea
		NOT = { has_country_flag = SOL_wrap_up_in_progress }
	}

	mean_time_to_happen = {
		days = 120
		modifier = {
			factor = 0.8
			has_completed_focus = SOL_god_empress
		}
		modifier = {
			factor = 1.4
			has_completed_focus = SOL_empress_protector
		}
		modifier = {
			factor = 1.2
			has_country_flag = SOL_laws_done
		}
	}

	option = {
		name = solarempire.38.a
		add_political_power = -20
		swap_ideas = { add_idea = SOL_harmonic_resistance_idea2 remove_idea = SOL_harmonic_resistance_idea }
	}
}

country_event = {
	id = solarempire.39
	immediate = {log = "[Root.GetName]: event solarempire.39"}#Auto-logging
	title = solarempire.39.t
	desc = solarempire.39.d
	picture = GFX_event_solarempire

	trigger = {
		has_idea = SOL_harmonic_resistance_idea2
		NOT = { has_country_flag = SOL_raids_2_in_progress }
		NOT = { has_country_flag = SOL_next_civ_war_delay }
	}

	mean_time_to_happen = {
		days = 210
		modifier = {
			factor = 0.8
			has_completed_focus = SOL_god_empress
		}
		modifier = {
			factor = 1.4
			has_completed_focus = SOL_empress_protector
		}
	}

	option = {
		name = solarempire.39.a
		add_political_power = -20
		swap_ideas = { add_idea = SOL_harmonic_resistance_idea3 remove_idea = SOL_harmonic_resistance_idea2 }
	}
}

country_event = { # Changeling Puppet
	id = solarempire.906
	immediate = {log = "[Root.GetName]: event solarempire.906"}#Auto-logging
	picture = GFX_event_canterlot
	hidden = yes

	trigger = {
		original_tag = CHN
		is_subject = yes
		has_government = fascism
		NOT = { has_country_flag = chn_is_fascist_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		name = solarempire.902.a
		hidden_effect = {
			set_country_flag = chn_is_fascist_puppet
			set_party_name = { ideology = fascism long_name = CHN_fascism_puppet_party name = CHN_fascism_puppet_party }
			create_country_leader = {
				name = "Changeling King"
				expire = "1965.1.1"
				ideology = nazism
				picture = "Default.tga"
				traits = {
				}
			}
		}
	}
}
country_event = { # Removal of cosmetic
	id = solarempire.910
	immediate = {log = "[Root.GetName]: event solarempire.910"}#Auto-logging
	title = solarempire.910.t
	desc = solarempire.910.d
	picture = GFX_event_canterlot

	trigger = {
		has_country_flag = chn_is_fascist_puppet
		is_subject = no
	}
	mean_time_to_happen = { days = 1 }
	option = {
		name = solarempire.910.a
		clr_country_flag = chn_is_fascist_puppet
		set_party_name = { ideology = fascism long_name = CHN_fascism_party name = CHN_fascism_party }
		hidden_effect = {
			if = {
				limit = { has_completed_focus = Chrysalis }
				create_country_leader = {
					name = "Queen Chrysalis"
					expire = "1965.1.1"
					picture = "gfx/interface/leaders/CHN/Chrysalis.tga"
					ideology = nazism
					desc = "POLITICS_CHRYSALIS_DESC"
					traits = {
						warmonger changeling_queen
					}
				}
			}
			else = {
				create_country_leader = {
					name = "Queen Chrysalis"
					expire = "1965.1.1"
					picture = "gfx/leaders/CHN/Chrysalis.tga"
					ideology = nazism
					desc = "POLITICS_CHRYSALIS_DESC"
					traits = {
						warmonger
					}
				}
			}
		}
	}
}

country_event = { # debug
	id = solarempire.911
	immediate = {log = "[Root.GetName]: event solarempire.911"}#Auto-logging
	title = solarempire.911.t
	desc = solarempire.911.d
	picture = GFX_event_canterlot

	is_triggered_only = yes
	trigger = {
		has_global_flag = EQS_evil_celestia
	}
	option = {
		name = solarempire.910.a
		set_global_flag = EQS_evil_celestia
	}
}

country_event = {
	id = solarempiresparkles.1
	immediate = {log = "[Root.GetName]: event solarempiresparkles.1"}#Auto-logging
	title = solarempiresparkles.1.t
	desc = solarempiresparkles.1.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_country = {
				limit = { original_tag = CRY has_country_leader = { name = "Princess Mi Amore Cadenza" ruling_only = yes } }
				save_event_target_as = CRY_cadence
			}
		}
	}

	#Lunar rebel deception
	option = {
		name = solarempiresparkles.1.a
		custom_effect_tooltip = solarempiresparkles.1.a.tp
		hidden_effect = {
			country_event = { id = solarempiresparkles.2 days = 2 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = SOL_empress_mother
			}
		}
	}
	#Negotiate
	option = {
		name = solarempiresparkles.1.b
		custom_effect_tooltip = solarempiresparkles.1.b.tp
		hidden_effect = {
			country_event = { id = solarempiresparkles.24 days = 1 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = SOL_empress_protector
			}
		}
	}
	#Demand
	option = {
		name = solarempiresparkles.1.c
		custom_effect_tooltip = solarempiresparkles.1.c.tp
		hidden_effect = {
			country_event = { id = solarempiresparkles.34 days = 1 }

		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_completed_focus = SOL_god_empress
			}
			modifier = {
				factor = 0
				NOT = { has_completed_focus = SOL_god_empress }
			}
		}
	}
}

country_event = {
	id = solarempiresparkles.2
	immediate = {log = "[Root.GetName]: event solarempiresparkles.2"}#Auto-logging
	title = solarempiresparkles.2.t
	desc = solarempiresparkles.2.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			event_target:CRY_cadence = {
				news_event = solarempiresparkles.3
			}
		}
	}

	option = {
		name = solarempiresparkles.2.a
		hidden_effect = {
			random_list = {
				70 = {
					set_country_flag = { flag = CRY_sparkle_suspicion value = 0 }
				}
				30 = {
					set_country_flag = { flag = CRY_sparkle_suspicion value = 1 }
				}
			}
			country_event = { id = solarempiresparkles.4 hours = 2 }
		}
	}
}

#For CRY
news_event = {
	id = solarempiresparkles.3
	immediate = {log = "[Root.GetName]: event solarempiresparkles.3"}#Auto-logging
	title = solarempiresparkles.3.t
	desc = solarempiresparkles.3.d
	picture = GFX_crystal_city_news

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		trigger = { tag = event_target:CRY_cadence }
		name = solarempiresparkles.3.a
		add_political_power = 20
		add_popularity = { ideology = democratic popularity = 0.05 }
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempiresparkles.3.b
	}
	option = {
		trigger = {
			NOT = {
				tag = event_target:solar_empire
				tag = event_target:CRY_cadence
			}
		}
		name = solarempiresparkles.3.c
	}
}

country_event = {
	id = solarempiresparkles.4
	immediate = {log = "[Root.GetName]: event solarempiresparkles.4"}#Auto-logging
	title = solarempiresparkles.4.t
	desc = {
		text = solarempiresparkles.4.d
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value < 1 }
		}
	}
	desc = {
		text = solarempiresparkles.4.d_susp
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.4.a
		hidden_effect = {
			country_event = { id = solarempiresparkles.41 hours = 8 }
		}
	}
}

country_event = {
	id = solarempiresparkles.41
	immediate = {log = "[Root.GetName]: event solarempiresparkles.41"}#Auto-logging
	title = solarempiresparkles.41.t
	desc = {
		text = solarempiresparkles.41.d
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value < 1 }
		}
	}
	desc = {
		text = solarempiresparkles.41.d_susp
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.41.a
		hidden_effect = {
			country_event = { id = solarempiresparkles.5 days = 4 }
		}
	}
}

country_event = {
	id = solarempiresparkles.5
	immediate = {log = "[Root.GetName]: event solarempiresparkles.5"}#Auto-logging
	title = solarempiresparkles.5.t
	desc = {
		text = solarempiresparkles.5.d
		trigger = {
			NOT = { has_global_flag = equestrian_civil_war }
		}
	}
	desc = {
		text = solarempiresparkles.5.d_nlr
		trigger = {
			has_global_flag = equestrian_civil_war
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.5.a
		hidden_effect = {
			random_list = {
				80 = {
					country_event = { id = solarempiresparkles.15 days = 1 }
				}
				15 = {
					modify_country_flag = { flag = CRY_sparkle_suspicion value = 1 }
					country_event = { id = solarempiresparkles.15 days = 1 }
				}
				5 = {
					country_event = { id = solarempiresparkles.6 hours = 1 }
					event_target:CRY_cadence = { country_event = { id = solarempiresparkles.7 hours = 6 } }
				}
			}
		}
	}
}

country_event = {
	id = solarempiresparkles.6
	immediate = {log = "[Root.GetName]: event solarempiresparkles.6"}#Auto-logging
	title = solarempiresparkles.6.t
	desc = solarempiresparkles.6.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.6.a
	}
}

country_event = {
	id = solarempiresparkles.7
	immediate = {log = "[Root.GetName]: event solarempiresparkles.7"}#Auto-logging
	title = solarempiresparkles.7.t
	desc = solarempiresparkles.7.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes


	option = {
		name = solarempiresparkles.7.a
		add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		hidden_effect = {
			set_country_flag = SOL_twilight_captured
			event_target:solar_empire = {
				set_country_flag = SOL_twilight_unavailable
				country_event = solarempiresparkles.8
			}
		}
	}
	option = {
		name = solarempiresparkles.7.b
		add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
		hidden_effect = {
			event_target:solar_empire = {
				country_event = solarempiresparkles.9
			}
		}
	}
}

country_event = {
	id = solarempiresparkles.77
	immediate = {log = "[Root.GetName]: event solarempiresparkles.77"}#Auto-logging
	title = solarempiresparkles.77.t
	desc = solarempiresparkles.77.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes


	option = {
		name = solarempiresparkles.77.a
		add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
	}
}

country_event = {
	id = solarempiresparkles.8
	immediate = {log = "[Root.GetName]: event solarempiresparkles.8"}#Auto-logging
	title = solarempiresparkles.8.t
	desc = solarempiresparkles.8.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.8.a
		add_political_power = -20
		effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
	}
	option = {
		name = solarempiresparkles.8.b #negotiate ransom
		add_political_power = -100
		effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		FROM = { country_event = { id = solarempiresparkles.10 days = 1 } }
	}
}

country_event = {
	id = solarempiresparkles.9
	immediate = {log = "[Root.GetName]: event solarempiresparkles.9"}#Auto-logging
	title = solarempiresparkles.9.t
	desc = solarempiresparkles.9.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #
		name = solarempiresparkles.9.a
		add_political_power = -20
	}
}

country_event = {
	id = solarempiresparkles.10
	immediate = {log = "[Root.GetName]: event solarempiresparkles.10"}#Auto-logging
	title = solarempiresparkles.10.t
	desc = solarempiresparkles.10.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree for non-agression and guarantee
		name = solarempiresparkles.10.a
		add_political_power = -20
		FROM = { country_event = { id = solarempiresparkles.12 days = 1 } }
	}
	option = { #Decline
		name = solarempiresparkles.10.b
		add_political_power = 20
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = cry_refused_to_negotiate }
			country_event = { id = solarempiresparkles.11 days = 1 }
		}
	}
}

country_event = {
	id = solarempiresparkles.11
	immediate = {log = "[Root.GetName]: event solarempiresparkles.11"}#Auto-logging
	title = solarempiresparkles.11.t
	desc = solarempiresparkles.11.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #
		name = solarempiresparkles.11.a
		add_political_power = -20
	}
}

country_event = {
	id = solarempiresparkles.12
	immediate = {log = "[Root.GetName]: event solarempiresparkles.12"}#Auto-logging
	title = solarempiresparkles.12.t
	desc = solarempiresparkles.12.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree for non-agression and guarantee
		name = solarempiresparkles.12.a
		add_political_power = -100
		custom_effect_tooltip = solarempiresparkles.12.a.tp
		diplomatic_relation = { country = FROM relation = non_aggression_pact }
		FROM = { country_event = { id = solarempiresparkles.14 days = 1 } }
		hidden_effect = {
			clr_country_flag = SOL_twilight_unavailable
			FROM = {
				clr_country_flag = SOL_twilight_captured
			}
			news_event = { id = solarempiresparkles.42 days = 2 }
		}
	}
	option = { #Decline
		name = solarempiresparkles.12.b
		add_political_power = 20
		FROM = { country_event = { id = solarempiresparkles.13 days = 1 } }
	}
}

country_event = {
	id = solarempiresparkles.13
	immediate = {log = "[Root.GetName]: event solarempiresparkles.13"}#Auto-logging
	title = solarempiresparkles.13.t
	desc = solarempiresparkles.13.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree for non-agression and guarantee
		name = solarempiresparkles.13.a
	}
}

country_event = {
	id = solarempiresparkles.14
	immediate = {log = "[Root.GetName]: event solarempiresparkles.14"}#Auto-logging
	title = solarempiresparkles.14.t
	desc = solarempiresparkles.14.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree for non-agression and guarantee
		name = solarempiresparkles.14.a
		FROM = {
			custom_effect_tooltip = solarempiresparkles.12.a.tp
			effect_tooltip = {
				diplomatic_relation = { country = ROOT relation = non_aggression_pact }
			}
		}
	}
}

country_event = {
	id = solarempiresparkles.15
	immediate = {log = "[Root.GetName]: event solarempiresparkles.15"}#Auto-logging
	title = solarempiresparkles.15.t
	desc = {
		text = solarempiresparkles.15.d_susp
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value > 1 }
		}
	}
	desc = {
		text = solarempiresparkles.15.d
		trigger = {
			has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
			has_country_flag = { flag = CRY_sparkle_suspicion value < 2 }
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.15.a
		hidden_effect = {
			country_event = {id = solarempiresparkles.150 hours = 1}
		}
	}
}

country_event = {
	id = solarempiresparkles.150
	immediate = {log = "[Root.GetName]: event solarempiresparkles.150"}#Auto-logging
	title = solarempiresparkles.150.t
	desc = solarempiresparkles.150.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.150.a
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = { flag = CRY_sparkle_suspicion value > 1 }
				}
				random_list = {
					65 = {
						country_event = { id = solarempiresparkles.16 hours = 6 }
						event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					}
					35 = {
						country_event = { id = solarempiresparkles.17 days = 1 }
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = CRY_sparkle_suspicion value > 0 }
				}
				random_list = {
					77 = {
						country_event = { id = solarempiresparkles.16 hours = 6 }
						event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					}
					23 = {
						country_event = { id = solarempiresparkles.17 days = 1 }
					}
				}
			}
			else = {
				random_list = {
					85 = {
						country_event = { id = solarempiresparkles.16 hours = 6 }
						event_target:CRY_cadence = { country_event = { id = solarempiresparkles.20 hours = 12 } }
					}
					15 = {
						country_event = { id = solarempiresparkles.17 days = 1 }
					}
				}
			}
		}
	}
}

country_event = {
	id = solarempiresparkles.17
	immediate = {log = "[Root.GetName]: event solarempiresparkles.17"}#Auto-logging
	title = solarempiresparkles.17.t
	desc = solarempiresparkles.17.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.17.a
		hidden_effect = {
			random_list = {
				70 = {
					event_target:CRY_cadence = { country_event = { id = solarempiresparkles.77 hours = 2 } }
				}
				30 = {
					event_target:CRY_cadence = { country_event = { id = solarempiresparkles.7 hours = 2 } }
					set_country_flag = SOL_sparkles_didnt_make_it
				}
			}
			country_event = { id = solarempiresparkles.18 }
		}
	}
}

country_event = {
	id = solarempiresparkles.18
	immediate = {log = "[Root.GetName]: event solarempiresparkles.18"}#Auto-logging
	title = {
		text = solarempiresparkles.18.t_fail
		trigger = {
			has_country_flag = SOL_sparkles_didnt_make_it
		}
	}
	title = {
		text = solarempiresparkles.18.t
		trigger = {
			NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		}
	}
	desc = {
		text = solarempiresparkles.18.d_fail
		trigger = {
			has_country_flag = SOL_sparkles_didnt_make_it
		}
	}
	desc = {
		text = solarempiresparkles.18.d_susp
		trigger = {
			NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.18.a
		effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		trigger = {
			NOT = { has_country_flag = SOL_sparkles_didnt_make_it }
		}
	}
	option = {
		name = solarempiresparkles.18.b
		effect_tooltip = { reverse_add_opinion_modifier = { target = event_target:CRY_cadence modifier = cry_betrayal } }
		trigger = {
			has_country_flag = SOL_sparkles_didnt_make_it
		}
	}
}

country_event = {
	id = solarempiresparkles.16
	immediate = {log = "[Root.GetName]: event solarempiresparkles.16"}#Auto-logging
	title = solarempiresparkles.16.t
	desc = solarempiresparkles.16.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #
		name = solarempiresparkles.16.a
		country_event = { id = solarempiresparkles.21 hours = 6 }
		event_target:CRY_cadence = {
			effect_tooltip = { add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal } }
		}
	}
}

country_event = {
	id = solarempiresparkles.20
	immediate = {log = "[Root.GetName]: event solarempiresparkles.20"}#Auto-logging
	title = solarempiresparkles.20.t
	desc = solarempiresparkles.20.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #
		name = solarempiresparkles.20.a
		add_political_power = -200
		if = {
			limit = { has_idea = royal_family3 }
			swap_ideas = { remove_idea = royal_family3 add_idea = royal_family2 }
		}
		if = {
			limit = { has_idea = royal_family2 }
			swap_ideas = { remove_idea = royal_family2 add_idea = royal_family }
		}
		add_ideas = flurryheart_imprisioned
		add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal }
	}
}

country_event = {
	id = solarempiresparkles.21
	immediate = {log = "[Root.GetName]: event solarempiresparkles.21"}#Auto-logging
	title = solarempiresparkles.21.t
	desc = solarempiresparkles.21.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #
		name = solarempiresparkles.21.a
		add_political_power = 150
		event_target:CRY_cadence = { country_event = { id = solarempiresparkles.22 days = 1 } }
	}
}

country_event = {
	id = solarempiresparkles.22
	immediate = {log = "[Root.GetName]: event solarempiresparkles.22"}#Auto-logging
	title = solarempiresparkles.22.t
	desc = solarempiresparkles.22.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_unit_leader = {
				limit = {
					has_id = 200
					NOT = { has_trait = wounded }
				}
				add_timed_unit_leader_trait = {
					trait = wounded
					days = 30
				}
				unit_leader_event = { id = generic.18 }
			}
		}
	}

	option = { #
		name = solarempiresparkles.22.a
		hidden_effect = { get_current_government_type = yes }
		FROM = { puppet = ROOT }
		hidden_effect = {
			restore_previous_government_type = yes
			country_event = { id = solarempiresparkles.103 hours = 1 }
			swap_ideas = { remove_idea = flurryheart_imprisioned add_idea = flurryheart_imprisioned1 }
			add_autonomy_ratio = { value = -0.20 }
			news_event = { id = solarempiresparkles.39 days = 2 }
		}
		FROM = { country_event = { id = solarempiresparkles.23 days = 1 } }
		ai_chance = {
			factor = 100
		}
	}
	option = { #
		name = solarempiresparkles.22.b
		add_political_power = -750
		add_stability = -0.20
		add_war_support = -1
		FROM = { country_event = { id = solarempiresparkles.23 days = 1 } }
		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = solarempiresparkles.23
	immediate = {log = "[Root.GetName]: event solarempiresparkles.23"}#Auto-logging
	title = solarempiresparkles.23.t
	desc = {
		text = solarempiresparkles.23.d_agree
		trigger = {
			FROM = { is_subject_of = ROOT }
		}
	}
	desc = {
		text = solarempiresparkles.23.d_noagree
		trigger = {
			FROM = { NOT = { is_subject_of = ROOT } }
		}
	}
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.23.a
	}
}

#Negotiations

#SOL
country_event = {
	id = solarempiresparkles.24
	immediate = {log = "[Root.GetName]: event solarempiresparkles.24"}#Auto-logging
	title = solarempiresparkles.24.t
	desc = solarempiresparkles.24.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.24.a
		event_target:CRY_cadence = {
			country_event = { id = solarempiresparkles.25 }
		}
	}
}

#CRY
country_event = {
	id = solarempiresparkles.25
	immediate = {log = "[Root.GetName]: event solarempiresparkles.25"}#Auto-logging
	title = solarempiresparkles.25.t
	desc = solarempiresparkles.25.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree to negotiate
		name = solarempiresparkles.25.a
		FROM = {
			country_event = { id = solarempiresparkles.27 hours = 1 }
		}
		ai_chance = {
			factor = 6
			modifier = {
				factor = 0.5
				strength_ratio = { tag = FROM ratio > 0.6 }
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio > 0.8 }
			}
		}
	}
	option = { #Decline to negotiate
		name = solarempiresparkles.25.b
		add_political_power = -100
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = cry_refused_to_negotiate }
			add_opinion_modifier = { target = ROOT modifier = hostility }
			country_event = { id = solarempiresparkles.26 hours = 1 }
		}
		ai_chance = {
			factor = 1
		}
	}
}

#SOL
#Cadence refuses
country_event = {
	id = solarempiresparkles.26
	immediate = {log = "[Root.GetName]: event solarempiresparkles.26"}#Auto-logging
	title = solarempiresparkles.26.t
	desc = solarempiresparkles.26.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.26.a
		add_political_power = -40
		effect_tooltip = {
			add_opinion_modifier = { target = FROM modifier = cry_refused_to_negotiate }
			add_opinion_modifier = { target = FROM modifier = hostility }
		}
	}
}

#SOL
#Cadence agrees to negotiate
country_event = {
	id = solarempiresparkles.27
	immediate = {log = "[Root.GetName]: event solarempiresparkles.27"}#Auto-logging
	title = solarempiresparkles.27.t
	desc = solarempiresparkles.27.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.27.a
		add_political_power = -40
		FROM = { country_event = { id = solarempiresparkles.28 hours = 2 }}
	}
}

#CRY
#Get demands
country_event = {
	id = solarempiresparkles.28
	immediate = {log = "[Root.GetName]: event solarempiresparkles.28"}#Auto-logging
	title = solarempiresparkles.28.t
	desc = solarempiresparkles.28.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree
		name = solarempiresparkles.28.a
		effect_tooltip = { FROM = { puppet = ROOT } }
		hidden_effect = { FROM = { country_event = { id = solarempiresparkles.29 hours = 1 } } news_event = { id = solarempiresparkles.38 days = 1 } }
		ai_chance = {
			factor = 3
		}
	}
	option = { #Decline
		name = solarempiresparkles.28.b
		add_political_power = 80
		effect_tooltip = { add_opinion_modifier = { target = FROM modifier = cry_refused_to_negotiate } }
		hidden_effect = { FROM = { country_event = { id = solarempiresparkles.30 hours = 1 } } }
		ai_chance = {
			factor = 2
		}
	}
}

#SOL
#Cadence agrees
country_event = {
	id = solarempiresparkles.29
	immediate = {log = "[Root.GetName]: event solarempiresparkles.29"}#Auto-logging
	title = solarempiresparkles.29.t
	desc = solarempiresparkles.29.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.29.a
		hidden_effect = { FROM = { get_current_government_type = yes } }
		puppet = FROM
		hidden_effect = { FROM = { restore_previous_government_type = yes set_country_flag = CRY_dont_give_SOL_cosmetic } }
	}
}

#SOL
#Cadence disagrees
country_event = {
	id = solarempiresparkles.30
	immediate = {log = "[Root.GetName]: event solarempiresparkles.30"}#Auto-logging
	title = solarempiresparkles.30.t
	desc = solarempiresparkles.30.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = { #Try to snatch flurry
		name = solarempiresparkles.30.a
		add_political_power = -200
		custom_effect_tooltip = solarempiresparkles.30.a.tp
		hidden_effect = {
			random_list = {
				30 = {
					country_event = { id = solarempiresparkles.33 hours = 1 }
					FROM = { country_event = { id = solarempiresparkles.20 hours = 12 } }
				}
				70 = { #failure
					country_event = { id = solarempiresparkles.32 hours = 1 }
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = { #nah
		name = solarempiresparkles.30.b
		hidden_effect = { country_event = { id = solarempiresparkles.31 hours = 1 } }
		ai_chance = {
			factor = 2
		}
	}
}

#SOL
#Nah
country_event = {
	id = solarempiresparkles.31
	immediate = {log = "[Root.GetName]: event solarempiresparkles.31"}#Auto-logging
	title = solarempiresparkles.31.t
	desc = solarempiresparkles.31.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.31.a
	}
}

#SOL
#Mission failed we will get em next time
country_event = {
	id = solarempiresparkles.32
	immediate = {log = "[Root.GetName]: event solarempiresparkles.32"}#Auto-logging
	title = solarempiresparkles.32.t
	desc = solarempiresparkles.32.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.32.a
		hidden_effect = { country_event = { id = solarempiresparkles.31 hours = 1 } }
	}
}

#SOL
#Flurry snatched
country_event = {
	id = solarempiresparkles.33
	immediate = {log = "[Root.GetName]: event solarempiresparkles.33"}#Auto-logging
	title = solarempiresparkles.33.t
	desc = solarempiresparkles.33.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.33.a
		effect_tooltip = { event_target:CRY_cadence = { add_opinion_modifier = { target = event_target:solar_empire modifier = cry_betrayal } } }
		country_event = { id = solarempiresparkles.21 hours = 6 }
	}
}

#Inquisitor xD

#SOL
#Arrive
country_event = {
	id = solarempiresparkles.34
	immediate = {log = "[Root.GetName]: event solarempiresparkles.34"}#Auto-logging
	title = solarempiresparkles.34.t
	desc = solarempiresparkles.34.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.34.a
		event_target:CRY_cadence = {
			add_opinion_modifier = { target = ROOT modifier = hostility }
			country_event = { id = solarempiresparkles.35 hours = 1 }
		}
	}
}

#CRY
#response
country_event = {
	id = solarempiresparkles.35
	immediate = {log = "[Root.GetName]: event solarempiresparkles.35"}#Auto-logging
	title = solarempiresparkles.35.t
	desc = solarempiresparkles.35.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.35.a
		FROM = { country_event = { id = solarempiresparkles.37 hours = 1 } }
		remove_opinion_modifier = { target = FROM modifier = hostility }
		ai_chance = {
			factor = 4
			modifier = {
				factor = 0.5
				strength_ratio = { tag = FROM ratio > 0.6 }
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio > 0.8 }
			}
		}
	}
	option = {
		name = solarempiresparkles.35.b
		FROM = {
			country_event = { id = solarempiresparkles.36 hours = 1 }
			effect_tooltip = {
				add_opinion_modifier = { target = ROOT modifier = hostility }
				create_wargoal = {
					target = ROOT type = puppet_wargoal_focus
				}
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

#SOL
#CRY rejects demands
country_event = {
	id = solarempiresparkles.36
	immediate = {log = "[Root.GetName]: event solarempiresparkles.36"}#Auto-logging
	title = solarempiresparkles.36.t
	desc = solarempiresparkles.36.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.36.a
		add_opinion_modifier = { target = FROM modifier = hostility }
		create_wargoal = {
			target = FROM type = puppet_wargoal_focus
		}
	}
}

#SOL
#CRY agrees to demands
country_event = {
	id = solarempiresparkles.37
	immediate = {log = "[Root.GetName]: event solarempiresparkles.37"}#Auto-logging
	title = solarempiresparkles.37.t
	desc = solarempiresparkles.37.d
	picture = GFX_event_solarempire

	#fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = solarempiresparkles.37.a
		puppet = FROM
		hidden_effect = {
			set_country_flag = SOL_twilight_governor
			set_autonomy = { target = FROM autonomy_state = autonomy_reichskommissariat }
			FROM = {
				set_cosmetic_tag = CRY_SOL
				add_autonomy_ratio = { value = -0.20 }
				set_country_flag = CRY_solar_governorship
				load_focus_tree = crystal_empire_solar_focus
				set_party_name = { ideology = fascism long_name = SOL_fascism_party_long name = SOL_fascism_party }
				create_country_leader = {
					name = "Grand Inquisitor Sunrise Sparkle"
					#desc = "TWILIGHT_DESC"
					picture = "TwilightSunrise.tga"
					expire = "1965.1.1"
					ideology = falangism
					traits = {
						lady_inquisitor
					}
				}
			}
			news_event = { id = solarempiresparkles.40 days = 2 }
		}
		ai_chance = {
			factor = 3
		}
	}
	option = {
		name = solarempiresparkles.37.b
		add_political_power = -200
		annex_country = { target = FROM transfer_troops = yes }
		hidden_effect = {
			news_event = { id = solarempiresparkles.40 days = 2 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				FROM = { is_ai = no }
			}
		}
	}
}

#solarempiresparkles.38 - news event CRY agrees to diplo puppet
news_event = {
	id = solarempiresparkles.38
	immediate = {log = "[Root.GetName]: event solarempiresparkles.38"}#Auto-logging
	title = solarempiresparkles.38.t
	desc = solarempiresparkles.38.d
	picture = GFX_crystal_city_news

	is_triggered_only = yes

	fire_only_once = yes


	option = {
		trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		name = solarempiresparkles.38.a
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempiresparkles.38.b
	}
	option = {
		trigger = {
			NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		}
		name = solarempiresparkles.38.c
	}
}

#solarempiresparkles.39 - news event CRY agrees to flurry kidnap puppet
news_event = {
	id = solarempiresparkles.39
	immediate = {log = "[Root.GetName]: event solarempiresparkles.39"}#Auto-logging
	title = solarempiresparkles.39.t
	desc = solarempiresparkles.39.d
	picture = GFX_crystal_city_news

	is_triggered_only = yes

	fire_only_once = yes


	option = {
		trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		name = solarempiresparkles.39.a
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempiresparkles.39.b
	}
	option = {
		trigger = {
			NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		}
		name = solarempiresparkles.39.c
	}
}

#solarempiresparkles.40 - news event CRY agrees to inquisitor demands
news_event = {
	id = solarempiresparkles.40
	immediate = {log = "[Root.GetName]: event solarempiresparkles.40"}#Auto-logging
	title = solarempiresparkles.40.t
	desc = {
		text = solarempiresparkles.40.d
		trigger = {
			event_target:solar_empire = { has_country_flag = SOL_twilight_governor }
		}
	}
	desc = {
		text = solarempiresparkles.40.d_annex
		trigger = {
			event_target:solar_empire = { NOT = { has_country_flag = SOL_twilight_governor } }
		}
	}
	picture = GFX_crystal_city_news

	is_triggered_only = yes

	fire_only_once = yes


	option = {
		trigger = { original_tag = CRY is_subject_of = event_target:solar_empire }
		name = solarempiresparkles.40.a
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempiresparkles.40.b
	}
	option = {
		trigger = {
			NOT = { AND = { original_tag = CRY is_subject_of = event_target:solar_empire } tag = event_target:solar_empire }
		}
		name = solarempiresparkles.40.c
	}
}

#solarempiresparkles.42 - news event CRY agrees to ransom sparkles
news_event = {
	id = solarempiresparkles.42
	immediate = {log = "[Root.GetName]: event solarempiresparkles.42"}#Auto-logging
	title = solarempiresparkles.42.t
	desc = solarempiresparkles.42.d
	picture = GFX_crystal_city_news

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {log = "[Root.GetName]: event solarempiresparkles.42"}#Auto-logging
	option = {
		trigger = { original_tag = CRY }
		name = solarempiresparkles.42.a
	}
	option = {
		trigger = { tag = event_target:solar_empire }
		name = solarempiresparkles.42.b
	}
	option = {
		trigger = {
			NOT = { original_tag = CRY tag = event_target:solar_empire }
		}
		name = solarempiresparkles.42.c
	}
}

#solarempiresparkles.43 - model province
country_event = {
	id = solarempiresparkles.43
	title = solarempiresparkles.43.t
	desc = solarempiresparkles.43.d
	picture = GFX_event_solarempire
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = solarempiresparkles.43.a
		FROM = {
			add_political_power = 100
			set_rule = { units_deployed_to_overlord = no }
		}
	}
	option = {
		name = solarempiresparkles.43.b
		FROM = {
			every_owned_state = {
				limit = { is_core_of = FROM }
				add_core_of = ROOT
			}
		}
		annex_country = { target = FROM transfer_troops = yes }
		add_political_power = -200
		ai_chance = {
			modifier = {
				factor = 0
				FROM = { is_ai = no }
			}
		}
	}
}

#Sparkle breaks out of prison
country_event = {
	id = solarempiresparkles.100
	immediate = {log = "[Root.GetName]: event solarempiresparkles.100"}#Auto-logging
	title = solarempiresparkles.100.t
	desc = solarempiresparkles.100.d
	picture = GFX_event_solarempire

	fire_only_once = yes

	trigger = {
		NOT = { has_country_flag = SOL_twilight_governor }
		has_country_flag = SOL_twilight_unavailable
		has_government = fascism
		OR = {
			controls_state = 344
			any_allied_country = {
				controls_state = 344
			}
			any_country = {
				is_subject_of = ROOT
				controls_state = 344
			}
			any_country = {
				has_country_flag = SOL_twilight_captured
				OR = {
					has_civil_war = yes
					has_capitulated = yes
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = solarempiresparkles.100.a
		clr_country_flag = SOL_twilight_unavailable
		hidden_effect = {
			random_country = {
				limit = { has_country_flag = SOL_twilight_captured }
				clr_country_flag = SOL_twilight_captured
			}
		}
	}
}

#Flurry Heart rescued
country_event = {
	id = solarempiresparkles.101
	immediate = {log = "[Root.GetName]: event solarempiresparkles.101"}#Auto-logging
	title = solarempiresparkles.101.t
	desc = solarempiresparkles.101.d
	picture = GFX_event_solarempire

	fire_only_once = yes

	trigger = {

		OR = {
			has_idea = flurryheart_imprisioned
			has_idea = flurryheart_imprisioned1
		}
		OR = {
			3 = {
				controller = { NOT = { tag = event_target:solar_empire } }
			}
			AND = {
				has_war_with = event_target:solar_empire
				event_target:solar_empire = { has_capitulated = yes }
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = solarempiresparkles.101.a
		remove_ideas = flurryheart_imprisioned
		remove_ideas = flurryheart_imprisioned1
		if = {
			limit = { has_idea = royal_family2 }
			swap_ideas = { remove_idea = royal_family2 add_idea = royal_family3 }
		}
		if = {
			limit = { has_idea = royal_family }
			swap_ideas = { remove_idea = royal_family add_idea = royal_family2 }
		}
	}
}

#CRY stops being a solar governorship
country_event = {
	id = solarempiresparkles.102
	immediate = {log = "[Root.GetName]: event solarempiresparkles.102"}#Auto-logging
	hidden = yes

	fire_only_once = yes

	trigger = {
		has_country_flag = SOL_twilight_governor
		any_country = {
			original_tag = CRY
			has_country_flag = CRY_solar_governorship
			OR = {
				NOT = { is_subject_of = ROOT }
				NOT = { has_government = fascism }
				has_capitulated = yes
				exists = no
			}
		}

	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = SOL_twilight_unavailable
		clr_country_flag = SOL_twilight_governor
		every_country = {
			limit = { has_country_flag = CRY_solar_governorship }
			clr_country_flag = CRY_solar_governorship
			if = {
				limit = { has_unit_leader = 210 }
				remove_unit_leader = 210
			}
			delete_unit_template_and_units = { division_template = "Order Militant" }
			load_focus_tree = crystalempire
			if = {
				limit = { NOT = { has_country_flag = is_changeling_puppet } }
				drop_cosmetic_tag = yes
				set_party_name = { ideology = fascism long_name = CRY_fascism_party_long name = CRY_fascism_party }
				if = {
					limit = { has_country_leader = { ruling_only = yes name = "Grand Inquisitor Sunrise Sparkle" } }
					retire_country_leader = yes
				}
				create_country_leader = {
					name = "Radiant Hope"
					expire = "1965.1.1"
					ideology = nazism
					desc = "POLITICS_RADIANTHOPE_DESC"
					picture = "RadiantHope.tga"
					traits = {
					}
				}
			}
		}
	}

	option = {
	}
}

country_event = {
	id = solarempiresparkles.103
	immediate = {log = "[Root.GetName]: event solarempiresparkles.103"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = CRY
		is_subject_of = event_target:solar_empire
		NOT = { has_country_flag = is_sol_puppet }
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_country_flag = is_sol_puppet
		if = {
			limit = { NOT = { has_country_flag = CRY_dont_give_SOL_cosmetic } }
			set_cosmetic_tag = CRY_SOL
		}
	}

	option = {
	}
}

country_event = {
	id = solarempiresparkles.104
	immediate = {log = "[Root.GetName]: event solarempiresparkles.104"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = CRY
		NOT = {
			is_subject_of = event_target:solar_empire
			is_in_faction_with = event_target:solar_empire
		}
		has_country_flag = is_sol_puppet
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = is_sol_puppet
		if = {
			limit = { NOT = { has_country_flag = is_changeling_puppet } }
			drop_cosmetic_tag = yes
			reapply_secondary_cosmetic_tags = yes
		}
	}

	option = {
	}
}

### PUPPETS #####
country_event = { # celestia Puppet
	id = solarempire.1000
	immediate = {log = "[Root.GetName]: event solarempire.1000"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = PLB
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = PLB_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1001
	immediate = {log = "[Root.GetName]: event solarempire.1001"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = GRF
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		retire_country_leader = yes
		set_cosmetic_tag = GRF_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1002
	immediate = {log = "[Root.GetName]: event solarempire.1002"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = PNG
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = PNG_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1003
	immediate = {log = "[Root.GetName]: event solarempire.1003"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = STL
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = STL_SOL
		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1004
	immediate = {log = "[Root.GetName]: event solarempire.1004"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = BUF
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = BUF_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1005
	immediate = {log = "[Root.GetName]: event solarempire.1005"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = DRG
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = DRG_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1006
	immediate = {log = "[Root.GetName]: event solarempire.1006"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = GFF
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = GFF_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # Removal of cosmetic
	id = solarempire.1007
	immediate = {log = "[Root.GetName]: event solarempire.1007"}#Auto-logging
	hidden = yes
	trigger = {
		has_country_flag = is_solar_puppet
		is_subject = no
	}
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	option = {
		drop_cosmetic_tag = yes
		reapply_secondary_cosmetic_tags = yes
		add_political_power = 110
		clr_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1008
	immediate = {log = "[Root.GetName]: event solarempire.1008"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = OLE
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = OLE_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1009
	immediate = {log = "[Root.GetName]: event solarempire.1009"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = BAL
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = BAL_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1010
	immediate = {log = "[Root.GetName]: event solarempire.1010"}#Auto-logging
	hidden = yes
	trigger = {
		original_tag = CES
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = CES_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1011
	immediate = {log = "[Root.GetName]: event solarempire.1011"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = JUN
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = JUN_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1012
	immediate = {log = "[Root.GetName]: event solarempire.1012"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = SCS
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = SCS_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1013
	immediate = {log = "[Root.GetName]: event solarempire.1013"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = STG
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = STG_SOL

		set_country_flag = is_solar_puppet
	}
}

country_event = { # celestia Puppet
	id = solarempire.1015
	immediate = {log = "[Root.GetName]: event solarempire.1015"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = JAK
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = JAK_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1016
	immediate = {log = "[Root.GetName]: event solarempire.1016"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = CHN
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = CHN_SOL

		set_country_flag = is_solar_puppet
	}
}
country_event = { # celestia Puppet
	id = solarempire.1017
	immediate = {log = "[Root.GetName]: event solarempire.1017"}#Auto-logging
	hidden = yes

	trigger = {
		original_tag = YAK
		is_subject_of = event_target:solar_empire
		has_government = fascism
		NOT = { has_country_flag = is_solar_puppet }
	}
	mean_time_to_happen = { days = 1 }
	option = {
		set_cosmetic_tag = YAK_SOL

		set_country_flag = is_solar_puppet
	}
}
