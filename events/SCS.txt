add_namespace = scs
add_namespace = scs_cw_prep

country_event = {#Turns out you can't spawn OOBs for countries that don't yet exist, so we have to spawn those troops through this hidden event
	id = scs.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs.2"}
	title = scs.2.t
	desc = scs.2.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes
	option = {
		name = scs.2.a
		add_manpower = 10000
		load_oob = "SCS_Civil_War"
		set_power_balance = {
			id = SCS_starting_bop
			set_default = yes
		}	
		19 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

# SCS Intro Event
country_event = {
	id = scs_cw_prep.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.1"}
	title = scs_cw_prep.1.t
	desc = scs_cw_prep.1.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.1.a
		add_political_power = 50
		add_ideas = SCS_business_connections
		country_event = {
			id = scs_cw_prep.2
			days = 7
		}
		22 = {
			add_resource = {
				type = oil
				amount = 15
			}
		}
		23 = {
			add_resource = {
				type = oil
				amount = 5
			}
		}
	}
}

# Appleloosan Defection
country_event = { 
	id = scs_cw_prep.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.2"}
	title = scs_cw_prep.2.t
	desc = scs_cw_prep.2.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.2.a
		21 = {
			transfer_state_to = BUF
			add_core_of = BUF
		}
		BUF = {
			set_global_flag = EQS_Braeburn_created
			every_possible_country = {
				limit = {
					has_character = EQS_braeburn
				}
				EQS_braeburn = {
					set_nationality = BUF
				}
			}
			set_country_flag = BUF_glomped_appleloosa
		}
	}
}

# Mercenaries Arrive
country_event = {
	id = scs_cw_prep.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.3"}
	title = scs_cw_prep.3.t
	desc = scs_cw_prep.3.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.3.a		
		swap_ideas = {
			remove_idea = SCS_security_shortfalls
			add_idea = SCS_security_shortfalls2
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1000
			# todo decide where from
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = 100
			# todo decide where from
		}
		hidden_effect = {
			set_country_flag = SCS_generals_gained
			load_oob = SCS_CW_mercenaries
			if = {
				limit = { has_dlc = "Man the Guns" }
				load_oob = SCS_CW_navy
			}
			else = {
				load_oob = SCS_CW_navy_legacy
			}
		}
		# TODO put a custom tooltip for their stats 	
		# TODO add a unit or two with create_unit effect
		# TODO business council stuff
	}
}

# Victory Bonds Picking up Steam
country_event = {
	id = scs_cw_prep.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.4"}
	title = scs_cw_prep.4.t
	desc = scs_cw_prep.4.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.4.a
		SCS_reduce_restless_employees = yes
		hidden_effect = {
			country_event = { id = scs_cw_prep.5 days = 90 }	
		}
	}
}

# Victory Bonds Success
country_event = {
	id = scs_cw_prep.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.5"}
	title = scs_cw_prep.5.t
	desc = scs_cw_prep.5.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.5.a
		SCS_reduce_restless_employees = yes
	}
}

# More Guns from Overseas (PLACEHOLDER)
country_event = {
	id = scs_cw_prep.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.6"}
	title = scs_cw_prep.6.t
	desc = scs_cw_prep.6.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.6.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = OLE
			amount = 1000
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = GRF
			amount = 500
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = STG
			amount = 500
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			producer = EQS
			amount = 400
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			producer = STG
			amount = 200
		}
		add_equipment_to_stockpile = {
			type = motorized_equipment
			amount = 100
		}
	}	
}

# A Meeting with Chrysalis (PLACEHOLDER)
country_event = {
	id = scs_cw_prep.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.7"}
	title = scs_cw_prep.7.t
	desc = scs_cw_prep.7.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.7.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = CHN
			amount = 1000
		}
		add_equipment_to_stockpile = {
			type = motorized_equipment
			producer = CHN
			amount = 200
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			producer = CHN
			amount = 100
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			producer = CHN
			amount = 100
		}
		set_country_flag = SCS_met_with_chrysalis
	}	
}

# A Meeting with Griffons (PLACEHOLDER)
country_event = {
	id = scs_cw_prep.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.8"}
	title = scs_cw_prep.8.t
	desc = scs_cw_prep.8.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.8.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = JER
			amount = 1000
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			producer = FEA
			amount = 300
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			producer = TRD
			amount = 250
		}
		set_country_flag = SCS_met_with_griffons
	}	
}

# Remove Security Shortfalls (TODO: Rename when proper event name is implemented)
country_event = {
	id = scs_cw_prep.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event scs_cw_prep.8"}
	title = scs_cw_prep.9.t
	desc = scs_cw_prep.9.d
	picture = GFX_event_appleloosa
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = scs_cw_prep.9.a
		remove_ideas = SCS_security_shortfalls2
	}	
}

country_event = {
	id = scs.776#Event for annexing Equestria
	immediate = {log = "[Root.GetName]: event scs.776"}#Auto-logging
	title = scs.776.t
	desc = scs.776.d
	picture = GFX_event_canterlot
	is_triggered_only = yes
	fire_only_once = yes


	option = {#Keep it annexed
		name = scs.776.a
		add_stability = -0.15
		add_political_power = -150
		set_country_flag = SCS_equestria
		set_cosmetic_tag = SCS_equestria
	}
	option = {#Release it
		name = scs.776.b
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = EQS 
					NOT = {
						is_core_of = SCS
					}
				}
				EQS = { transfer_state = PREV }
			}
			SCS = {
				puppet = EQS
			}
		}
	}

}