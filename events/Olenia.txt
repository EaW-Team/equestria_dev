add_namespace = olenia

country_event = {
	id = olenia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.1"}
	title = olenia.1.t
	desc = olenia.1.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes

	option = {      # Accept
		name = olenia.1.a
		FROM = {
			country_event = { days = 1 id = changelings.4 }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					is_historical_focus_on = yes
					NOT = { has_government = neutrality }
				}
			}
		}
	}
	option = {      # Deny
		name = olenia.1.b
		add_political_power = 100
		add_war_support = 0.1
		FROM = {
			country_event = { days = 1 id = changelings.5 }
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				has_completed_focus = OLE_approach_chrysalis
			}
		}
	}
}
country_event = {
	id = olenia.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.2"}
	title = olenia.2.t
	desc = olenia.2.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	option = {      # Accept
		name = olenia.2.a
		add_political_power = 50
		add_war_support = -0.05
		FROM = {
			country_event = { days = 1 id=changelings.6 }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_completed_focus = OLE_the_changeling_threat
					is_historical_focus_on = yes
					NOT = { has_government = neutrality }
				}
			}
		}
	}
	option = {      # Deny
		name = olenia.2.b
		add_political_power = -50
		add_war_support = 0.075
		set_country_flag = puppet_chain
		hidden_effect = { news_event = { days = 5 id = news.19 } }
		CHN = {
			country_event = { days = 1 id=changelings.7 }
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				has_completed_focus = OLE_approach_chrysalis
			}
		}
	}
}
country_event = {
	id = olenia.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.3"}
	title = olenia.3.t
	desc = olenia.3.d
	picture = GFX_event_olenia_generic

	trigger = {
		tag = OLE
		has_civil_war = no
		has_government = neutrality
		has_war_with = CHN
		surrender_progress > 0.10
		has_country_flag = puppet_chain
	}

	fire_only_once = yes

	mean_time_to_happen = { days = 1 }
	immediate = {
		hidden_effect = {
			191 = {
				remove_building = {
				    type = arms_factory
				    level = 1
				}
			}
			194 = {
				remove_building = {
				    type = arms_factory
				    level = 1
				}
			}
		}
	}
	option = {      # We still have a chance to surrender peacefully
		name = olenia.3.a
		ai_chance = { factor = 100 }
		CHN = {
			country_event = { days = 1 id=changelings.8 }
		}
	}
	option = {      # THERE'S NO SURRENDER, THERE'S NO RETREAT
		name = olenia.3.c
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				has_completed_focus = OLE_approach_chrysalis
			}
			modifier = {
				factor = 0.7
				CHN = { is_ai = yes }
			}
			modifier = {
				factor = 1.2
				CHN = { is_ai = no }
			}
			modifier = {
				factor = 100
				strength_ratio = { tag = CHN ratio > 1 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = CHN ratio < 0.7 }
			}
			modifier = {
				factor = 0.5
				strength_ratio = { tag = CHN ratio < 0.5 }
			}
		}
		add_political_power = 100
		add_stability = 0.1
	}
}
country_event = {
	id = olenia.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.4"}
	title = olenia.4.t
	desc = olenia.4.d
	picture = GFX_event_olenia_generic

	trigger = {
		tag = OLE
		has_civil_war = no
		has_government = neutrality
		has_war_with = CHN
		OR = {
			surrender_progress > 0.35
			AND = {
				has_manpower < 5000
				OR = {
					has_political_power < 100
					has_idea = all_adults_serve
					has_idea = scraping_the_barrel
				}
			}
		}
	}
	mean_time_to_happen = { days = 1 }
	fire_only_once = yes

	option = {      # We have a chance to surrender peacefully
		name = olenia.4.a
		ai_chance = { factor = 35 }
		CHN = {
			country_event = { days = 1 id=changelings.8 }
		}
	}
	option = {      # THERE'S NO SURRENDER, THERE'S NO RETREAT
		name = olenia.4.c
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0.7
				CHN = { is_ai = yes }
			}
			modifier = {
				factor = 2
				CHN = { is_ai = no }
			}
			modifier = {
				factor = 0.3
				has_manpower < 5000
				OR = {
					has_political_power < 100
					has_idea = all_adults_serve
					has_idea = scraping_the_barrel
				}
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = CHN ratio < 0.7 }
			}
			modifier = {
				factor = 0.5
				strength_ratio = { tag = CHN ratio < 0.5 }
			}
		}
		add_political_power = 150
		add_stability = 0.1
	}
}

##############

#can't help in civil war notification
country_event = {
	id = olenia.101
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.101"}
	title = olenia.101.t
	desc = olenia.101.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.101.a
	}
}
#refuses to help in civil war notification
country_event = {
	id = olenia.102
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.102"}
	title = olenia.102.t
	desc = olenia.102.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.102.a
	}
}

news_event = {
	id = olenia.103
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.103"}
	title = olenia.103.t
	desc = {
		text = olenia.103.d_johan
		trigger = {
			event_target:old_olenia = { has_country_leader = { ruling_only = yes character = OLE_king_johan_djavulen } }
		}
	}
	desc = {
		text = olenia.103.d_com
		trigger = {
			event_target:old_olenia = { has_government = communism }
		}
	}
	desc = {
		text = olenia.103.d_fas
		trigger = {
			event_target:old_olenia = {
				NOT = { has_country_leader = { ruling_only = yes character = OLE_king_johan_djavulen } }
				has_government = fascism
			}
		}
	}
	desc = {
		text = olenia.103.d
		trigger = {
			event_target:old_olenia = {
				NOT = { has_country_leader = { ruling_only = yes character = OLE_king_johan_djavulen } }
				NOT = { has_government = fascism }
				NOT = { has_government = communism }
			}
		}
	}
	picture = GFX_news_event_olenia_surrenders

	major = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = {
				random_other_country = {
					limit = { original_tag = OLE }
					save_event_target_as = old_olenia
				}
			}
		}
	}

	option = {
		name = olenia.103.a
		trigger = { NOT = { original_tag = OLE has_government = democratic } }
	}
	option = {
		name = olenia.103.b
		trigger = { original_tag = OLE }
	}
	option = {
		name = olenia.103.c
		trigger = { NOT = { original_tag = OLE } has_government = democratic }
	}
}

news_event = {
	id = olenia.104
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.104"}
	title = olenia.104.t
	desc = olenia.104.d
	picture = GFX_news_event_olenia_surrenders

	major = yes

	is_triggered_only = yes

	option = {
		name = olenia.104.a
		trigger = { NOT = { original_tag = OLE has_government = communism } }
	}
	option = {
		name = olenia.104.b
		trigger = { original_tag = OLE }
	}
	option = {
		name = olenia.104.c
		trigger = { NOT = { original_tag = OLE } has_government = communism }
	}
}
#Deer's Republic
news_event = {
	id = olenia.105
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.105"}
	title = olenia.105.t
	desc = olenia.105.d
	picture = GFX_news_event_olenia_surrenders

	major = yes

	is_triggered_only = yes

	option = {
		name = olenia.105.a
		trigger = { NOT = { original_tag = OLE has_government = communism } }
	}
	option = {
		name = olenia.105.b
		trigger = { original_tag = OLE }
	}
	option = {
		name = olenia.105.c
		trigger = { NOT = { original_tag = OLE } has_government = communism }
	}
}

#Deer's Republic
news_event = {
	id = olenia.106
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.106"}
	title = olenia.106.t
	desc = olenia.106.d
	picture = GFX_news_event_olenia_surrenders

	trigger = {
		tag = OLE
		has_government = communism
		NOT = { has_war_with = event_target:equestria }
	}

	mean_time_to_happen = { months = 12 }
	fire_only_once = yes

	option = {
		name = olenia.106.a
	}
}

#EQS stages coup
country_event = {
	id = olenia.510
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.510"}
	title = olenia.510.t
	desc = olenia.510.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_cosmetic_tag = OLE_NEU
			start_civil_war = { ideology = democratic size = 0.7 }
			set_country_flag = OLE_civil_war
			remove_ideas = OLE_the_true_queen_idea
			random_other_country = {
				limit = { original_tag = OLE has_government = democratic }
				add_equipment_to_stockpile = {
					type = infantry_equipment amount = 1000 producer = EQS
				}
				if = {
					limit = {
						has_dlc = "Arms Against Tyranny"
					}
					add_equipment_subsidy = {
						cic = 500
						equipment_type = infantry_equipment
						seller_tags = { EQS CRY NLR VAN SCS LSP NMS CES JUN BAL TEM BUF }
					}
				}
				division_template = {
					name = "Olenian Volunteers"
					division_names_group = OLE_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
				}
				random_controlled_state = {
					create_unit = {
						division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
						owner = PREV
					}
				}
				random_controlled_state = {
					create_unit = {
						division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
						owner = PREV
					}
				}
				random_controlled_state = {
					create_unit = {
						division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
						owner = PREV
					}
				}
				random_controlled_state = {
					create_unit = {
						division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
						owner = PREV
					}
				}
				random_controlled_state = {
					create_unit = {
						division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
						owner = PREV
					}
				}
				add_ideas = OLE_civil_war_idea
				set_country_flag = OLE_EQS_coup
				save_event_target_as = OLE_democratic_et
				add_opinion_modifier = { target = FROM modifier = OLE_civil_war_support }
				event_target:equestria = {
					add_ai_strategy = {
						type = support
						id = PREV
						value = 200
					}
				}
				every_possible_country = {
					limit = {
						has_character = OLE_einair_kainen
					}
					OLE_einair_kainen = {
						set_nationality = PREV.PREV
					}
				}
			}
			if = {
				limit = { has_government = fascism NOT = { has_character = OLE_alvari_pirhonen } }
				every_possible_country = {
					limit = {
						has_character = OLE_alvari_pirhonen
					}
					OLE_alvari_pirhonen = {
						set_nationality = ROOT
					}
				}
			}
			news_event = { id = olenia.103 }
		}
	}

	option = {      #wew war time
		name = olenia.510.a
		ai_chance = { factor = 100 }
		effect_tooltip = {
			start_civil_war = { ideology = democratic size = 0.7 }
		}
		add_ideas = OLE_civil_war_idea
	}

	option = {      #wew war time
		name = olenia.510.b
		ai_chance = { factor = 0 }
		effect_tooltip = {
			start_civil_war = { ideology = ROOT ruling_party = democratic size = 0.7 }
		}
		add_ideas = OLE_civil_war_idea
		hidden_effect = {
			change_tag_from = event_target:OLE_democratic_et
		}
	}
}
#For EQS
country_event = {
	id = olenia.511
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.511"}
	title = olenia.511.t
	desc = olenia.511.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	immediate = {
		hidden_effect = {
			add_named_threat = { threat = 3 name = OLE_civil_war_CHN_intervention }
		}
	}

	option = {      #wew war time
		name = olenia.511.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			if = {
				limit = { threat < 0.5 }
				add_threat = 50
				set_global_flag = cw_threat_added
			}
		}
		OLE_EQS_intervention = yes
		hidden_effect = {
			if = {
				limit = { has_global_flag = cw_threat_added }
				add_threat = -50
				clr_global_flag = cw_threat_added
			}
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = democratic }
			}
			add_opinion_modifier = { target = event_target:equestria modifier = OLE_civil_war_support_enemies }
		}
	}

}

#EQS puppets OLE
country_event = {
	id = olenia.512
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.512"}
	title = olenia.512.t
	desc = olenia.512.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {
		name = olenia.512.a
		ai_chance = { factor = 100 }
		event_target:equestria = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_dominion
			}
			country_event = { id = olenia.513 }
		}
	}

	option = {
		name = olenia.512.b
		ai_chance = { factor = 0 }
		trigger = {
			is_ai = no
			event_target:equestria = { is_faction_leader = yes}
		}
		event_target:equestria = { add_to_faction = ROOT }
	}

}

country_event = {
	id = olenia.513
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.513"}
	title = olenia.513.t
	desc = olenia.513.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {
		name = olenia.513.a
		ai_chance = { factor = 100 }
	}


}
#EQS gets asked to create a faction with OLE
country_event = {
	id = olenia.514
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.514"}
	title = olenia.514.t
	desc = olenia.514.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {
		name = olenia.514.a
		add_to_faction = FROM
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}

			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}

			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}

			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}

			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}

			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}

			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}
		}
	}

	option = {
		name = olenia.514.b
		trigger = {
			FROM = { has_war = no }
			NOT = { has_guaranteed = FROM }
		}
		give_guarantee = FROM
		ai_chance = { factor = 25 }
	}

	option = {
		name = olenia.514.c
		FROM = { country_event = {id = olenia.515 days = 1 } }
		ai_chance = { factor = 10 }
	}

}

#EQS says no
country_event = {
	id = olenia.515
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.515"}
	title = olenia.515.t
	desc = olenia.515.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {
		name = olenia.515.a
		add_opinion_modifier = { target = FROM modifier = OLE_refused_faction }
		set_rule = { can_create_factions = yes }
		ai_chance = { factor = 100 }
	}

}

#Democratic/harmony/Velvet path
country_event = {
	id = olenia.500
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.500"}
	title = olenia.500.t
	desc = olenia.500.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #Demand Johan abdication!!!
		name = olenia.500.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			random_list = {
				10 = { country_event = { id = olenia.501 days = 2 }}
				90 = { country_event = { id = olenia.502 days = 2 }}
			}
		}
	}
}

country_event = {
	id = olenia.501
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.501"}
	title = olenia.501.t
	desc = olenia.501.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #wew johan actually said yes
		name = olenia.501.a
		ai_chance = { factor = 100 }
		set_politics = { ruling_party = democratic elections_allowed = no }
		add_political_power = 100
		remove_ideas = OLE_the_true_queen_idea
		add_popularity = { ideology = neutrality popularity = -0.1 }
		hidden_effect  = {
			set_country_flag = OLE_civil_war_avoided
			clr_country_flag = OLE_waiting_on_johan
		}
	}
}

country_event = {
	id = olenia.502
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.502"}
	title = olenia.502.t
	desc = olenia.502.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	immediate = {
		hidden_effect = {
			start_civil_war = {
				ruling_party = democratic
				ideology = neutrality
				size = 0.4
			}
			division_template = {
				name = "Olenian Volunteers"
				division_names_group = OLE_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			set_country_flag = OLE_civil_war
			remove_ideas = OLE_the_true_queen_idea
			random_neighbor_country = {
				limit = { original_tag = OLE has_government = neutrality }
				set_country_flag = OLE_neutrality_civil_war
				set_country_flag = OLE_civil_war
				add_ideas = OLE_civil_war_idea
				set_cosmetic_tag = OLE_NEU
				every_possible_country = {
					limit = {
						has_character = OLE_lord_roshuo
					}
					OLE_lord_roshuo = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = OLE_haakon_lurswig
					}
					OLE_haakon_lurswig = {
						set_nationality = PREV.PREV
					}
				}
			}
			if = {
				limit = { NOT = { has_character = OLE_einair_kainen } }
				every_possible_country = {
					limit = {
						has_character = OLE_einair_kainen
					}
					OLE_einair_kainen = {
						set_nationality = ROOT
					}
				}
			}
			if = {
				limit = { NOT = { has_character = OLE_alvari_pirhonen } }
				every_possible_country = {
					limit = {
						has_character = OLE_alvari_pirhonen
					}
					OLE_alvari_pirhonen = {
						set_nationality = ROOT
					}
				}
			}
			news_event = { id = olenia.103 }
		}
	}

	option = {      #wew war time
		name = olenia.502.a
		ai_chance = { factor = 100 }
		add_ideas = OLE_civil_war_idea
		effect_tooltip = {
			start_civil_war = {
				ruling_party = democratic
				ideology = neutrality
				size = 0.4
			}
		}
		hidden_effect = { clr_country_flag = OLE_waiting_on_johan }
	}
}

#for EQS
country_event = {
	id = olenia.503
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.503"}
	title = olenia.503.t
	desc = olenia.503.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.503.a
		ai_chance = { factor = 90 }
		trigger = {
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -70
		custom_effect_tooltip = OLE_send_guns
		hidden_effect = {
			FROM = { country_event = { id = olenia.504 days = 4 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = democratic }
			}
			add_opinion_modifier = { target = EQS modifier = OLE_civil_war_support_enemies }
		}
		hidden_effect = {
			set_country_flag = EQS_helped_ole
		}
	}

	option = {      #
		name = olenia.503.b
		ai_chance = { factor = 10 }
		trigger = {
			has_manpower > 5000
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -140
		custom_effect_tooltip = OLE_send_guns_and_men
		effect_tooltip = {
			add_manpower = -5000
		}
		hidden_effect = {
			FROM = { country_event = { id = olenia.505 days = 6 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = democratic }
			}
			add_opinion_modifier = { target = EQS modifier = OLE_civil_war_support_enemies }
		}
		hidden_effect = {
			set_country_flag = EQS_helped_ole
		}
	}

	option = {
		name = olenia.503.c
		ai_chance = { factor = 1 }
		trigger = {
			has_equipment = { infantry_equipment < 501 }
		}
		from = { country_event = { id = olenia.101 days = 1 } }
		hidden_effect = {
			set_country_flag = EQS_helped_ole
		}
	}

	option = {
		name = olenia.503.od
		trigger = {
			has_equipment = { infantry_equipment > 500 }
		}
		ai_chance = { factor = 0 }
		reverse_add_opinion_modifier = { target = FROM modifier = OLE_refused_civil_war_support }
		from = { country_event = { id = olenia.102 days = 1 } }
		hidden_effect = {
			set_country_flag = EQS_helped_ole
		}
	}
}

country_event = {
	id = olenia.504
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.504"}
	title = olenia.504.t
	desc = olenia.504.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.504.a
		FROM = {
			send_OLE_guns_EQS = yes
		}
	}
}

country_event = {
	id = olenia.505
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.505"}
	title = olenia.505.t
	desc = olenia.505.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.505.a
		FROM = {
			send_OLE_guns_EQS = yes
			add_manpower = -5000
		}
		add_manpower = 5000
	}
}

#Commie path
country_event = {
	id = olenia.600
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.600"}
	title = olenia.600.t
	desc = olenia.600.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #Demand Johan abdication!!!
		name = olenia.600.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			random_list = {
				10 = { country_event = { id = olenia.601 days = 2 }}
				90 = { country_event = { id = olenia.602 days = 2 }}
			}
		}
	}
}

country_event = {
	id = olenia.601
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.601"}
	title = olenia.601.t
	desc = olenia.601.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #wew johan actually said yes
		name = olenia.601.a
		ai_chance = { factor = 100 }
		set_politics = { ruling_party = communism elections_allowed = no }
		add_political_power = 100
		remove_ideas = OLE_the_great_strike_idea
		add_popularity = { ideology = neutrality popularity = -0.1 }
		hidden_effect  = {
			set_country_flag = OLE_civil_war_avoided
			clr_country_flag = OLE_waiting_on_johan
		}
	}
}

country_event = {
	id = olenia.602
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.602"}
	title = olenia.602.t
	desc = olenia.602.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	immediate = {
		hidden_effect = {
			start_civil_war = {
				ruling_party = communism
				ideology = neutrality
				size = 0.4
			}
			division_template = {
				name = "Olenian Volunteers"
				division_names_group = OLE_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			random_state = {
				limit = { is_controlled_by = ROOT }
				create_unit = {
					division = "division_template = \"Olenian Volunteers\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
					owner = ROOT
				}
			}
			set_country_flag = OLE_civil_war
			remove_ideas = OLE_the_great_strike_idea
			random_neighbor_country = {
				limit = { original_tag = OLE has_government = neutrality }
				set_country_flag = OLE_neutrality_civil_war
				set_country_flag = OLE_civil_war
				add_ideas = OLE_civil_war_idea
				set_cosmetic_tag = OLE_NEU
				every_possible_country = {
					limit = {
						has_character = OLE_lord_roshuo
					}
					OLE_lord_roshuo = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = OLE_alvari_pirhonen
					}
					OLE_alvari_pirhonen = {
						set_nationality = PREV.PREV
					}
				}
			}
			if = {
				limit = { NOT = { has_character = OLE_spurdo_s_perkele } }
				every_possible_country = {
					limit = {
						has_character = OLE_spurdo_s_perkele
					}
					OLE_spurdo_s_perkele = {
						set_nationality = ROOT
					}
				}
			}
			news_event = { id = olenia.104 }
		}
	}

	option = {      #wew war time
		name = olenia.602.a
		ai_chance = { factor = 100 }
		effect_tooltip = {
			start_civil_war = {
				ruling_party = communism
				ideology = neutrality
				size = 0.4
			}
		}
		add_ideas = OLE_civil_war_idea
		hidden_effect = { clr_country_flag = OLE_waiting_on_johan }
	}
}

#for STG
country_event = {
	id = olenia.603
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.603"}
	title = olenia.603.t
	desc = olenia.603.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.603.a
		ai_chance = { factor = 90 }
		trigger = {
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -70
		custom_effect_tooltip = OLE_send_guns
		hidden_effect = {
			FROM = { country_event = { id = olenia.604 days = 4 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = communism }
			}
			add_opinion_modifier = { target = STG modifier = OLE_civil_war_support_enemies }
		}
	}

	option = {      #
		name = olenia.603.b
		ai_chance = { factor = 10 }
		trigger = {
			has_manpower > 5000
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -140
		custom_effect_tooltip = OLE_send_guns_and_men
		effect_tooltip = {
			add_manpower = -5000
		}
		hidden_effect = {
			FROM = { country_event = { id = olenia.605 days = 6 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = communism }
			}
			add_opinion_modifier = { target = STG modifier = OLE_civil_war_support_enemies }
		}
	}

	option = {
		name = olenia.603.c
		ai_chance = { factor = 1 }
		trigger = {
			has_equipment = { infantry_equipment < 501 }
		}
		from = { country_event = { id = olenia.101 days = 1 } }
	}

	option = {
		name = olenia.603.od
		trigger = {
			has_equipment = { infantry_equipment > 500 }
		}
		ai_chance = { factor = 0 }
		reverse_add_opinion_modifier = { target = FROM modifier = OLE_refused_civil_war_support }
		from = { country_event = { id = olenia.102 days = 1 } }
	}

}

country_event = {
	id = olenia.604
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.604"}
	title = olenia.604.t
	desc = olenia.604.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.604.a
		FROM = {
			send_OLE_guns_STG = yes
		}
	}
}

country_event = {
	id = olenia.605
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.605"}
	title = olenia.605.t
	desc = olenia.605.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.605.a
		FROM = {
			send_OLE_guns_STG = yes
			add_manpower = -5000
		}
		add_manpower = 5000
	}
}


#Chrysalis servitude
#for CHN
country_event = {
	id = olenia.700
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.700"}
	title = olenia.700.t
	desc = olenia.700.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.700.a
		ai_chance = { factor = 90 }
		custom_effect_tooltip = olenia.700.a_tt
		FROM = { diplomatic_relation = { country = CHN relation = non_aggression_pact } }
		give_military_access = FROM
		add_opinion_modifier = { target = FROM modifier = OLE_CHN_cooperation }
		reverse_add_opinion_modifier = { target = FROM modifier = OLE_CHN_cooperation }
		FROM = { country_event = { id = olenia.708 days = 1 } }
	}

	option = {
		name = olenia.700.b
		ai_chance = { factor = 10 }
		FROM = { country_event = { id = olenia.717 days = 1 } }
	}

}
#Civil war support
country_event = {
	id = olenia.701
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.701"}
	title = olenia.701.t
	desc = olenia.701.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.701.a
		ai_chance = { factor = 30 }
		trigger = {
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -50
		custom_effect_tooltip = OLE_send_guns
		FROM = { diplomatic_relation = { country = CHN relation = non_aggression_pact } }
		give_military_access = FROM
		hidden_effect = {
			FROM = { country_event = { id = olenia.704 days = 4 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = neutrality }
			}
			add_opinion_modifier = { target = CHN modifier = OLE_civil_war_support_enemies }
		}
	}

	option = {      #
		name = olenia.701.b
		ai_chance = { factor = 50 }
		trigger = {
			has_manpower > 5000
			has_equipment = { infantry_equipment > 500 }
		}
		add_political_power = -60
		custom_effect_tooltip = OLE_send_guns_and_men
		effect_tooltip = {
			add_manpower = -5000
		}
		FROM = { diplomatic_relation = { country = CHN relation = non_aggression_pact } }
		give_military_access = FROM
		hidden_effect = {
			FROM = { country_event = { id = olenia.705 days = 6 } }
		}
		every_country = {
			limit = {
				original_tag = OLE
				NOT = { has_government = neutrality }
			}
			add_opinion_modifier = { target = CHN modifier = OLE_civil_war_support_enemies }
		}
	}

	option = {
		name = olenia.701.c
		ai_chance = { factor = 20 }
		FROM = {
			country_event = { id = olenia.708 days = 1 }
			diplomatic_relation = { country = CHN relation = non_aggression_pact } }
		give_military_access = FROM
	}

	option = {
		name = olenia.701.od
		ai_chance = { factor = 1 }
		FROM = {
			country_event = { id = olenia.719 days = 1 }
			add_opinion_modifier = { target = CHN modifier = OLE_refused_civil_war_support } }
	}

}

#Puppet offer (for CHN)
country_event = {
	id = olenia.702
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.702"}
	title = olenia.702.t
	desc = olenia.702.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.702.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FROM = { has_war_with = EQS }
			}
		}
		hidden_effect = {
			if = {
				limit = { has_war_with = FROM }
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = {
					tag = FROM
					message = OLE_agree_peace_puppet
				}
			}
		}
		FROM = { get_current_government_type = yes }
		set_autonomy = { 
			target = FROM 
			autonomy_state = autonomy_satellite
		}
		transfer_state = 300
		transfer_state = 292
		transfer_state = 302
		hidden_effect = {
			FROM = {
				restore_previous_government_type = yes
				add_popularity = { ideology = neutrality popularity = 0.5 }
				set_cosmetic_tag = OLE_CWWON
				drop_cosmetic_tag = yes
			}
		}
		hidden_effect = {
			news_event = { days = 2 id = olenia.7061 }
		}
	}

	option = {      #
		name = olenia.702.b
		ai_chance = { factor = 50 }
		FROM = {
			country_event = { id = olenia.719 days = 1 }
			diplomatic_relation = { country = CHN relation = non_aggression_pact active = no }
			#diplomatic_relation = { country = CHN relation = military_access active = no }
		}
		hidden_effect = { set_country_flag = CHN_refused_OLE_puppet }
	}

}

#Puppet offer (for CHN)
country_event = {
	id = olenia.703
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.703"}
	title = olenia.703.t
	desc = olenia.703.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.703.a
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				FROM = { has_war_with = EQS }
			}
		}
		transfer_state = 300
		transfer_state = 292
		transfer_state = 302
		hidden_effect = {
			if = {
				limit = { has_war_with = FROM }
				set_country_flag = { flag = bypass_on_peaceconference_ended value = 1 days = 1 }
				white_peace = {
					tag = FROM
					message = OLE_agree_peace_puppet
				}
			}
		}
		FROM = { get_current_government_type = yes }
		set_autonomy = { 
			target = FROM 
			autonomy_state = autonomy_satellite
		}
		hidden_effect = {
			FROM = {
				restore_previous_government_type = yes
				add_popularity = { ideology = neutrality popularity = 0.5 }
				if = {
					limit = { NOT = { tag = OLE } }
					for_each_scope_loop = {
						array = OLE.core_states
						add_core_of = FROM
					}
				}
				set_cosmetic_tag = OLE_CWWON
				drop_cosmetic_tag = yes
			}
		}
		custom_effect_tooltip = olenia.703.cet
		hidden_effect = { add_named_threat = { threat = 3 name = OLE_civil_war_CHN_intervention } FROM = { OLE_CHN_intervention = yes OLE_CHN_intervention_step2 = yes } news_event = { days = 2 id = olenia.7061 } }
	}

	option = {      #
		name = olenia.703.b
		ai_chance = { factor = 40 }
		#diplomatic_relation = { country = FROM relation = military_access active = no }
		FROM = {
			diplomatic_relation = { country = CHN relation = non_aggression_pact active = no }
			country_event = { id = olenia.719 days = 1 }
		}
		hidden_effect = { set_country_flag = CHN_refused_OLE_puppet }
	}

}

country_event = {
	id = olenia.704
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.704"}
	title = olenia.704.t
	desc = olenia.704.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.704.a
		FROM = {
			send_OLE_guns_CHN = yes
		}
	}
}

country_event = {
	id = olenia.705
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.705"}
	title = olenia.705.t
	desc = olenia.705.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.705.a
		FROM = {
			send_OLE_guns_CHN = yes
			add_manpower = -5000
		}
		add_manpower = 5000
	}
}

news_event = {
	id = olenia.7061
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.7061"}
	title = olenia.7061.t
	desc = olenia.7061.d
	picture = GFX_news_event_olenia_surrenders

	major = yes

	is_triggered_only = yes

	option = {
		name = olenia.7061.a
		trigger = { NOT = { TAG = EQS TAG = CHN } }
	}
	option = {
		name = olenia.7061.b
		trigger = { TAG = EQS }
	}
	option = {
		name = olenia.7061.c
		trigger = { TAG = CHN }
	}
}

#CHN says no
country_event = {
	id = olenia.719
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.719"}
	title = olenia.719.t
	desc = olenia.719.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.719.a
	}
}

#CHN says yes
country_event = {
	id = olenia.708
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.708"}
	title = olenia.708.t
	desc = olenia.708.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.708.a
	}
}

#For CHN
country_event = {
	id = olenia.713
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.713"}
	title = olenia.713.t
	desc = olenia.713.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #all land
		name = olenia.713.a
		ai_chance = { factor = 10 }
		FROM = {
			transfer_state = 172
			transfer_state = 14
			transfer_state = 45
			transfer_state = 72
			transfer_state = 73
		}
		hidden_effect = { FROM = { country_event = { id = olenia.714 days = 1 } } }
	}
	option = {      #some land
		name = olenia.713.b
		ai_chance = { factor = 60 }
		FROM = {
			transfer_state = 172
			transfer_state = 14
			transfer_state = 45
		}
		hidden_effect = { FROM = { country_event = { id = olenia.715 days = 1 } } }
	}

	option = {      #nothing
		name = olenia.713.c
		ai_chance = { factor = 30 }
		hidden_effect = { FROM = { country_event = { id = olenia.716 days = 1 } } }
	}
}

country_event = {
	id = olenia.714
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.714"}
	title = olenia.714.t
	desc = olenia.714.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.714.a
		effect_tooltip = {
			transfer_state = 172
			transfer_state = 14
			transfer_state = 45
			transfer_state = 72
			transfer_state = 73
		}
	}
}

country_event = {
	id = olenia.715
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.715"}
	title = olenia.715.t
	desc = olenia.715.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.715.a
		effect_tooltip = {
			transfer_state = 172
			transfer_state = 14
			transfer_state = 45
		}
	}
}

country_event = {
	id = olenia.716
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.716"}
	title = olenia.716.t
	desc = olenia.716.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.716.a
	}
}

country_event = {
	id = olenia.717
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.717"}
	title = olenia.717.t
	desc = olenia.717.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.717.a
	}
}

country_event = {
	id = olenia.718
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.718"}
	hidden = yes

	is_triggered_only = yes

	immediate = {

		set_cosmetic_tag = OLE_CHN
		hidden_effect = {
			set_country_flag = OLE_CHN_puppet
			set_party_name = { ideology = fascism long_name = OLE_chn_collaborators_long name = OLE_chn_collaborators }
			promote_character = OLE_Vidkun_Hjortsling
		}
	}
	option = {
	}
}

country_event = {
	id = olenia.720
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.720"}
	hidden = yes

	trigger = {
		original_tag = OLE
		has_country_flag = OLE_CHN_puppet
		NOT = { is_subject_of = CHN }
	}
	mean_time_to_happen = { days = 1 }

	immediate = {
		if = {
			limit = {
				has_cosmetic_tag = OLE_CHN
			}
			drop_cosmetic_tag = yes
		}
		hidden_effect = {
			kill_ideology_leader = fascism
			clr_country_flag = OLE_CHN_puppet
			set_party_name = { ideology = fascism long_name = OLE_fascism_party_long name = OLE_fascism_party }
		}
	}
	option = {
	}
}

#Matter of monarchy fascist path
country_event = {
	id = olenia.800
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.800"}
	title = olenia.800.t
	desc = olenia.800.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.800.a
		remove_ideas = OLE_johan_idea
		add_political_power = 100
	}

	option = {      #
		name = olenia.800.b
		remove_ideas = OLE_johan_idea
		add_political_power = 150
		custom_effect_tooltip = OLE_johan_dies_tp
		set_global_flag = OLE_johan_dead

		if = {
			limit = { NOT = { has_character = OLE_prinve_djavulen } }

			OLE_prinve_djavulen = { set_nationality = ROOT }
		}
		promote_character = OLE_prinve_djavulen
	}

	option = {      #
		name = olenia.800.c
		swap_ideas = { remove_idea = OLE_johan_idea add_idea = OLE_johan_handled_idea }
		add_political_power = -75
	}
}

#Fascists gain power
country_event = {
	id = olenia.801
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.801"}
	title = olenia.801.t
	desc = olenia.801.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes
	#fire_only_once = yes

	option = {      #
		name = olenia.801.a
		set_politics = { ruling_party = fascism elections_allowed = no }
		add_popularity = { ideology = fascism popularity = 0.1 }
		swap_ideas = {
			add_idea = OLE_empowered_church_idea
			remove_idea = OLE_reinstate_the_allsherjargothi_idea
		}
		hidden_effect = {
			set_country_flag = OLE_situation_stable
			add_ideas = OLE_johan_idea
		}
	}
}

# I need to be sure
#country_event = {
	#	id = olenia.900

	#	hidden = yes
	#	trigger = {
		#		original_tag = OLE
		#		OR = {
			#			has_government = democratic
			#			NOT = { any_other_country = { original_tag = OLE } }
			#		}
		#		OR = {
			#			NOT = { has_event_target = democratic_OLE }
			#			NOT = { country_exists = OLE }
			#			OLE = { NOT = { original_tag = OLE } }
			#		}
		#	}
	#	mean_time_to_happen = { days = 1 }
	#	option = { save_global_event_target_as = democratic_OLE }
	#}


country_event = {
	id = olenia.1000
	immediate = {log = "[GetDateText]: [Root.GetName]: event olenia.1000"}
	title = olenia.1000.t
	desc = olenia.1000.d
	picture = GFX_event_olenia_generic

	is_triggered_only = yes

	option = {      #KILL HIM
		name = olenia.1000.a
		add_political_power = 50
		add_stability = 0.05
		custom_effect_tooltip = OLE_johan_dies_tp
		set_global_flag = OLE_johan_dead

		if = {
			limit = { NOT = { has_character = OLE_prinve_djavulen } }

			OLE_prinve_djavulen = { set_nationality = ROOT }
		}
		promote_character = OLE_prinve_djavulen
	}
	option = {	#100 Years Dungeon
			name = olenia.1000.b
			custom_effect_tooltip = OLE_johan_dungeon_tp
			add_political_power = 25
			add_stability = 0.05
	}
	option = {	#Exile Him (Why would you not kill him wtf you pussy)
			name = olenia.1000.c
			custom_effect_tooltip = OLE_johan_exiled_tp
			add_political_power = -50
	}
}
