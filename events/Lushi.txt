add_namespace = lushi
add_namespace = lushi_states
state_event = {
	id = lushi_states.1
	immediate = {log = "[Root.GetName]: event lushi_states.1"}#Auto-logging
	
	hidden = yes
	is_triggered_only = yes
	
	option = { # no
		name = lushi_states.1.b
		clr_state_flag = levy_raised
	}
}
country_event = {
	id = lushi.1
	immediate = {log = "[Root.GetName]: event lushi.1"}#Auto-logging
	title = lushi.1.t
	desc = lushi.1.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = { # no
		name = lushi.1.b
		add_political_power = 100
		add_stability = 0.02
		add_war_support = -0.02
		set_country_flag = lush_greatness_celebration
	}
}
country_event = {
	id = lushi.2
	immediate = {log = "[Root.GetName]: event lushi.2"}#Auto-logging
	title = lushi.2.t
	desc = lushi.2.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = { # no
		name = lushi.2.a
		if = {
			limit = {
				has_country_flag = warriors_1
			}
		}
		add_manpower = 10000
	}
	option = { # no
		name = lushi.2.a
		if = {
			limit = {
				has_country_flag = warriors_2
			}
		}
		add_manpower = 7500
	}
	option = { # no
		name = lushi.2.a
		if = {
			limit = {
				has_country_flag = warriors_3
			}
		}
		add_manpower = 5000
	}
	option = { # no
		name = lushi.2.a
		if = {
			limit = {
				has_country_flag = warriors_4
			}
		}
		add_manpower = 3000
		add_stability = 0.01
	}
}
country_event = {
	id = lushi.100
	immediate = {log = "[Root.GetName]: event lushi.100"}#Auto-logging
	title = lushi.100.t
	desc = lushi.100.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = { # yes
		name = lushi.100.a
		GRW = { country_event = griffonwill.101 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				has_government = communism
			}
			modifier = {
				factor = 2
				has_opinion = { target = GRW value > 30 }
			}
			modifier = {
				add = 2
				communism > 0.4
			}
		}
	}
	option = { # no
		name = lushi.100.b
		GRW = { country_event = griffonwill.1012 }
		ai_chance = {
			factor = 1
		}
	}
}

### Approaching Lord Drak ####
### He wants to marry my daugheter, she's an advisor ###
country_event = {
	id = lushi.3
	immediate = {log = "[Root.GetName]: event lushi.3"}#Auto-logging
	title = lushi.3.t
	desc = lushi.3.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = { # Let him
		name = lushi.3.a
		set_country_flag = daughter_married
	}
	option = { # No
		name = lushi.3.b
		set_country_flag = daughter_marriage_denied
	}
}
## marriage arranged
country_event = {
	id = lushi.4
	immediate = {log = "[Root.GetName]: event lushi.4"}#Auto-logging
	title = lushi.4.t
	desc = lushi.4.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = {
		name = lushi.4.a
		remove_ideas = LUS_drak_lord
		add_stability = 0.01
	}
}
##
country_event = {
	id = lushi.5
	immediate = {log = "[Root.GetName]: event lushi.5"}#Auto-logging
	title = lushi.5.t
	desc = lushi.5.d
	picture = GFX_event_griffon_mountain
	
	trigger = {
		tag = ANG
		LUS = {
			has_country_flag = daughter_marriage_denied
			has_idea = feudalism
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 70
	}
	option = {
		name = lushi.5.a
		transfer_state = 632
		ai_chance = {
			factor = 100
		}
		LUS = {
			country_event = lushi.6
		}
	}
	option = {
		name = lushi.5.b
		add_political_power = 10
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = lushi.6
	immediate = {log = "[Root.GetName]: event lushi.6"}#Auto-logging
	title = lushi.6.t
	desc = lushi.6.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.6.a
		remove_ideas = LUS_drak_lord
		set_country_flag = lord_drak_left
	}
}
### SIEGE OF DRAK CASLTE ### VICTORY ##
country_event = {
	id = lushi.7
	immediate = {log = "[Root.GetName]: event lushi.7"}#Auto-logging
	title = lushi.7.t
	desc = lushi.7.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.7.a
		transfer_state = 632
		add_political_power = 100
		hidden_effect = {
			random_list = {
				50 = { set_country_flag = lord_drak_escaped }
				50 = { set_country_flag = lord_drak_captured }
			}
		}
	}
}
country_event = {
	id = lushi.8
	immediate = {log = "[Root.GetName]: event lushi.8"}#Auto-logging
	title = lushi.8.t
	desc = lushi.8.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.8.a
		add_political_power = -70
	}
}
country_event = {
	id = lushi.9
	immediate = {log = "[Root.GetName]: event lushi.8"}#Auto-logging
	title = lushi.9.t
	desc = lushi.9.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.9.a
		add_political_power = -70
	}
}
### Peasant Rebellion
country_event = {
	id = lushi.14
	immediate = {log = "[Root.GetName]: event lushi.8"}#Auto-logging
	title = lushi.14.t
	desc = lushi.14.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.14.a
		add_political_power = -50
		add_stability = -0.1
		set_temp_variable = { var = manpower_loss value = party_popularity@communism }
		multiply_temp_variable = { var = manpower_loss value = 10 }
		random_owned_state = {
			add_manpower = manpower_loss
		}
		hidden_effect = {
			activate_targeted_decision = {
				target = LUS
				decision = LUS_peasant_rebellion
			}
		}
	}
}
## PEASANT REBELLION ##
country_event = {
	id = lushi.15
	immediate = {log = "[Root.GetName]: event lushi.8"}#Auto-logging
	title = lushi.15.t
	desc = lushi.15.d
	picture = GFX_event_griffon_mountain
	is_triggered_only = yes
	
	option = { ## side with monarchy
		name = lushi.15.a
		start_civil_war = {
			ruling_party = neutrality ideology = communism size = 0.8
		}
		add_popularity = { ideology = neutrality popularity = 0.5 }
		add_ideas = LUS_army_of_nobles
		hidden_effect = {
				load_oob = "LUS_knights"
		}
		random_other_country = {
			limit = {
				original_tag = LUS
				has_government = communism
			}
			hidden_effect = {
				load_oob = "LUS_peasants"
			}
			add_ideas = LUS_peasant_army
			set_cosmetic_tag = LUS_civil_war
			add_popularity = { ideology = communism popularity = 0.5 }
		}
	}
	option = { ## side with peasants
		name = lushi.15.b
		start_civil_war = {
			ruling_party = communism ideology = neutrality size = 0.2
		}
		add_ideas = LUS_peasant_army
		add_popularity = { ideology = communism popularity = 0.5 }
		hidden_effect = {
			remove_ideas = {
				feudalism
				lack_of_scientists2
			}
			load_oob = "LUS_peasants"
			add_ideas = lack_of_scientists1
		}
		random_other_country = {
			limit = {
				original_tag = LUS
				has_government = neutrality
			}
			hidden_effect = {
				load_oob = "LUS_knights"
			}
			add_ideas = LUS_army_of_nobles
			add_popularity = { ideology = neutrality popularity = 0.5 }
			set_cosmetic_tag = LUS_civil_war
		}
	}
}
## Purchase Trains ##
country_event = {
	id = lushi.16
	immediate = {log = "[Root.GetName]: event lushi.16"}#Auto-logging
	title = lushi.16.t
	desc = lushi.16.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.16.a
		every_neighbor_country = {
			limit = {
				OR = {
					has_pre_industrial_society = yes
					has_outdated_industry = yes
					is_fully_developed = yes
				}
				NOT = {
					has_war_with = LUS
					is_subject = yes
				}
			}
			country_event = lushi.17
		}
		GRI = {
			country_event = lushi.17
		}
	}
}
## Sell Lushi Trains or not ###
country_event = {
	id = lushi.17
	immediate = {log = "[Root.GetName]: event lushi.17"}#Auto-logging
	title = lushi.17.t
	desc = lushi.17.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.17.a
		FROM = {
			country_event = { id = lushi.18 days = 15 }
		}
		set_country_flag = had_train_deal_with_lushi
		ai_chance = {
			factor = 1
			modifier = {
				has_opinion = { target = FROM value > 0 }
				factor = 2
			}
			modifier = {
				has_opinion = { target = FROM value > 25 }
				factor = 4
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 10
			}
		}
	}
	option = {
		name = lushi.17.b
		FROM = {
			country_event = { id = lushi.21 days = 15 }
		}
		set_country_flag = had_train_deal_with_lushi
		ai_chance = {
			factor = 1
		}
	}
}
### FROM Accepted Lushi Deal  ###
country_event = {
	id = lushi.18
	immediate = {log = "[Root.GetName]: event lushi.18"}#Auto-logging
	picture = GFX_event_griffon_mountain
	title = lushi.18.t
	desc = lushi.18.d
	
	is_triggered_only = yes
	option = {
		name = lushi.18.a
		set_country_flag = train_deal_signed
		add_stability = 0.05
		increase_society_development_gradual = yes
		add_ideas = LUS_train_deal
		FROM = {
			country_event = { id = lushi.19 days = 5 }
			clr_country_flag = had_train_deal_with_lushi
			set_country_flag = train_deal_with_lushi
		}
	}
	option = {
		name = lushi.18.b
		set_country_flag = delayed_the_deal
		FROM = {
			set_country_flag = LUS_delayed_the_deal
		}
	}
}
country_event = {
	id = lushi.19
	immediate = {log = "[Root.GetName]: event lushi.19"}#Auto-logging
	title = lushi.19.t
	desc = lushi.19.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.19.a
		if = {
			limit = {
				num_of_civilian_factories > 20
			}
			add_timed_idea ={ idea = LUS_train_deal_3 days = 140 }
		}
		else_if = {
			limit = {
				num_of_civilian_factories < 21
			}
			add_timed_idea ={ idea = LUS_train_deal_2 days = 170 }
		}
		hidden_effect = {
			every_other_country = {
				limit = {
					has_country_flag = had_train_deal_with_lushi
				}
				country_event = lushi.20
				clr_country_flag = had_train_deal_with_lushi
				if = {
					limit = {
						has_country_flag = LUS_delayed_the_deal
					}
					clr_country_flag = LUS_delayed_the_deal
				}
			}
		}
	}
}

country_event = {
	id = lushi.20
	immediate = {log = "[Root.GetName]: event lushi.20"}#Auto-logging
	title = lushi.20.t
	desc = lushi.20.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.20.a
		
	}
}
country_event = {
	id = lushi.21
	immediate = {log = "[Root.GetName]: event lushi.21"}#Auto-logging
	title = lushi.21.t
	desc = lushi.21.d
	picture = GFX_event_griffon_mountain
	
	is_triggered_only = yes
	option = {
		name = lushi.21.a
		
	}
}

country_event = {
	id = lushi.22
	immediate = {log = "[Root.GetName]: event lushi.22"}#Auto-logging
	title = lushi.22.t
	desc = lushi.22.d
	picture = GFX_event_griffon_mountain
	trigger = {
		original_tag = LUS
		has_country_flag = freed_the_peasants
	}
	mean_time_to_happen = {
		days = 240
	}
	fire_only_once = yes
	option = {
		name = lushi.22.a
		add_ideas = LUS_recession
		add_ideas = LUS_risk_of_famine
	}
}

country_event = {
	id = lushi.23
	immediate = {log = "[Root.GetName]: event lushi.23"}#Auto-logging
	title = lushi.23.t
	desc = lushi.23.d
	picture = GFX_event_griffon_mountain
	trigger = {
		original_tag = LUS
		has_idea = LUS_recession
	}
	mean_time_to_happen = {
		days = 100
	}
	fire_only_once = yes
	option = {
		name = lushi.23.a
		swap_ideas = { add_idea = LUS_unemployment remove_idea = LUS_recession }

	}
}
### LUSHI ASKS TO BUY GRAIN ###
country_event = {
	id = lushi.24
	immediate = {log = "[Root.GetName]: event lushi.24"}#Auto-logging
	title = lushi.24.t
	desc = lushi.24.d
	picture = GFX_event_griffon_mountain
	is_triggered_only = yes
	option = {
		name = lushi.24.a
		add_political_power = -50
		add_timed_idea = { idea = LUS_selling_grain_to_LUS days = 150 }
		FROM = {
			country_event = lushi.25
		}
	}
	option = {
		name = lushi.24.a
		FROM = {
			country_event = lushi.26
		}
	}
}
country_event = {
	id = lushi.25
	immediate = {log = "[Root.GetName]: event lushi.25"}#Auto-logging
	title = lushi.25.t
	desc = lushi.25.d
	picture = GFX_event_griffon_mountain
	is_triggered_only = yes
	option = {
		name = lushi.25.a
		set_country_flag = grain_deal_signed
		add_timed_idea = { idea = LUS_paying_for_grain days = 170 }
		if = {
			limit = {
				has_idea = LUS_risk_of_famine
			}
			remove_ideas = LUS_risk_of_famine
		}
	}
}
## DEAL DECLINED ###
country_event = {
	id = lushi.26
	immediate = {log = "[Root.GetName]: event lushi.26"}#Auto-logging
	title = lushi.26.t
	desc = lushi.26.d
	picture = GFX_event_griffon_mountain
	is_triggered_only = yes
	option = {
		name = lushi.26.a
		clr_country_flag = grain_deal_in_progress
	}
}