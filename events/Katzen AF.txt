add_namespace = katzen_AF


country_event = { #Kaiser pops up
	id = katzen_AF.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.1"}
	title = katzen_AF.1.t
	desc = katzen_AF.1.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.1.a
		hidden_effect = {
			promote_character = {
				character = KTZ_kaiser_kattail
				ideology = stratocracy
			}
			set_global_flag = KTZ_musicflag
		}
	}
}

country_event = { #gaslighting done
	id = katzen_AF.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.2"}
	title = katzen_AF.2.t
	desc = katzen_AF.2.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.2.a
	}
}

country_event = { #just before continental conquests - Player is given option to stop
	id = katzen_AF.111
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.111"}
	title = katzen_AF.111.t
	desc = katzen_AF.111.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.111.a
		set_country_flag = KTZ_endgame_start_flag
		mark_focus_tree_layout_dirty = yes
		custom_effect_tooltip = katzen_AF.111.a.t
	}
	option = {
		name = katzen_AF.111.b
		trigger = { is_ai = no } #Raaaaagh
		hidden_effect = {
			set_country_flag = KTZ_kaiser_left
			clr_country_flag = KTZ_kattail_conquest_timer_active
			add_popularity = {
				ideology = neutrality
				popularity = 0.50
			}
		}
		retire_country_leader = yes
		set_cosmetic_tag = KTZ_loris_cosmetic
		set_rule = {
			can_puppet = yes
		}
		KTZ_Loris = {
			promote_leader = yes
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = despotism
					expire = "1965.1.1.1"
				}
			}
		}
		add_to_variable = {
			KTZ_kattail_portrait_dirty = 1
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = KTZ_kattail_n_longname
			name = KTZ_kattail_n_shortname
		}
		if = { #Loris fixes it yay isn't he so cool?
			limit = { has_idea = KTZ_taking_too_long }
			remove_ideas = KTZ_taking_too_long
		}
		custom_effect_tooltip = katzen_AF.111.b.t
	}
}
country_event = { # world conquest complete
	id = katzen_AF.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.12"}
	title = katzen_AF.12.t
	desc = katzen_AF.12.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.12.a
	}
}
country_event = { # mondkanone done now fuck off
	id = katzen_AF.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.13"}
	title = katzen_AF.13.t
	desc = katzen_AF.13.d
	picture = GFX_event_KTZ_kaiser_moon

	is_triggered_only = yes

	option = {
		name = katzen_AF.13.a
		custom_effect_tooltip = katzen_AF.13.tt
	}
}

country_event = { #investigating magic
	id = katzen_AF.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.21"}
	title = katzen_AF.21.t
	desc = katzen_AF.21.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.21.a
	}
}
country_event = { #katzen takes over. give funny buffs if AI.
	id = katzen_AF.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.22"}
	title = katzen_AF.22.t
	desc = katzen_AF.22.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.22.a
		retire_country_leader = yes
		ABY = {
			every_character = {
				set_nationality = KTZ
			}
			every_core_state = { add_core_of = KTZ }
		}
		KTZ = {
			annex_country = {
				target = ABY
				transfer_troops = yes
			}
			change_tag_from = ROOT
			ABY_catrina_catwe = {
				retire = yes
			}
			set_rule = {
				can_puppet = no
			}
		}
		hidden_effect = {
			KTZ = {
				load_focus_tree = KTZ_april_fools_tree
				complete_national_focus = KTZ_this_isnt_flusion
				complete_national_focus = KTZ_but_their_technology
				complete_national_focus = KTZ_and_their_powers
				complete_national_focus = KTZ_are_worth_taking_over
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
					long_name = KTZ_kattail_longname
					name = KTZ_kattail_shortname
				}
				add_popularity = {
					ideology = fascism
					popularity = 1.00
				}
				set_party_name = {
					ideology = neutrality
					long_name = KTZ_kattail_n_longname
					name = KTZ_kattail_n_shortname
				}
				set_party_name = {
					ideology = democratic
					long_name = KTZ_kattail_h_longname
					name = KTZ_kattail_h_shortname
				}
				set_party_name = {
					ideology = communism
					long_name = KTZ_kattail_c_longname
					name = KTZ_kattail_c_shortname
				}
				set_cosmetic_tag = KTZ_earlygame_cosmetic
				set_technology = {
					mobile_warfare = 1
					formation_flying = 1
					fleet_in_being = 1
				}
			}
		}
	}
}

country_event = { #new imperium
	id = katzen_AF.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.23"}
	title = katzen_AF.23.t
	desc = katzen_AF.23.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.23.a
		hidden_effect = {
			if = {
				limit = { is_ai = yes }
				add_ideas = KTZ_AI_the_kaisers_wild_ride
				army_experience = 500
				air_experience = 500
				navy_experience = 500
				add_political_power = 1000
				add_war_support = 0.15
				add_stability = 0.15
				every_country = { #Balanced (trust trust trust)
					add_to_ROOT_potential_cores = yes
				}
			}
		}
	}
}

country_event = { #zebtropa plan event
	id = katzen_AF.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.24"}
	title = katzen_AF.24.t
	desc = katzen_AF.24.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.24.a
	}
}

country_event = { #omg eine blokkate??
	id = katzen_AF.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.25"}
	title = katzen_AF.25.t
	desc = katzen_AF.25.d
	picture = GFX_event_KTZ_pawtton

	is_triggered_only = yes

	option = { #shoo it
		name = katzen_AF.25.a
		hidden_effect = { country_event = { id = katzen_AF.251 } }
	}
	option = { #shoot it
		name = katzen_AF.25.b
		hidden_effect = { country_event = { id = katzen_AF.252 } }
	}
	option = { #talk to it
		name = katzen_AF.25.c
		hidden_effect = { country_event = { id = katzen_AF.253 } }
	}
}

#Shoo blokkat
country_event = {
	id = katzen_AF.251
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.251"}
	title = katzen_AF.251.t
	desc = katzen_AF.251.d
	picture = GFX_event_KTZ_blokkat

	is_triggered_only = yes

	option = {
		name = katzen_AF.251.a
		KTZ_Pawtton = {
			add_attack = 1
			add_defense = 1
			add_logistics = 1
			add_planning = 1
			add_skill_level = 2
			add_trait = { trait = expert_delegator }
			add_trait = { trait = skilled_staffer }
		}
	}
}

#Shoot blokkat
country_event = {
	id = katzen_AF.252
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.252"}
	title = katzen_AF.252.t
	desc = katzen_AF.252.d
	picture = GFX_event_KTZ_blokkat

	is_triggered_only = yes

	option = {
		name = katzen_AF.252.a
		775 = {
			damage_building = {
				type = infrastructure
				damage = 1
			}
			damage_building = {
				type = industrial_complex
				damage = 1
			}
			damage_building = {
				type = arms_factory
				damage = 1
			}
		}
	}
}

#talk to blokkat
country_event = {
	id = katzen_AF.253
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.253"}
	title = katzen_AF.253.t
	desc = katzen_AF.253.d
	picture = GFX_event_KTZ_blokkat

	is_triggered_only = yes

	option = {
		name = katzen_AF.253.a
		add_corps_commander_role = {
			character = KTZ_Blokkat
			desc = "KTZ_Blokkat_desc"

			traits = { skilled_staffer expert_delegator organizer logistics_wizard brilliant_strategist offensive_doctrine defensive_doctrine unyielding_defender aggressive_assaulter }
			skill = 5
			attack_skill = 5
			defense_skill = 5
			planning_skill = 5
			logistics_skill = 5
		}
	}

	option = {
		name = katzen_AF.253.b
		add_advisor_role = {
			character = KTZ_Blokkat
			advisor = {
				desc = "KTZ_Blokkat_desc"
				slot = political_advisor
				idea_token = KTZ_Blokkat
				cost = 100
				traits = { KTZ_Blokkat_trait }
			}
		}
	}

	option = {
		name = katzen_AF.253.c
		add_political_power = 50
	}
}

country_event = { #aeternum artifact event
	id = katzen_AF.26
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.26"}
	title = katzen_AF.26.t
	desc = katzen_AF.26.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.26.a
		custom_effect_tooltip = katzen_AF.26_tt
		add_to_variable = {
			var = KTZ_aeternum_relics_available
			value = 1
		}
		activate_mission = KTZ_searching_the_vaults_mission
		add_political_power = 50
		add_stability = 0.01
	}
}

country_event = { #zebhara project
	id = katzen_AF.27
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.27"}
	title = katzen_AF.27.t
	desc = katzen_AF.27.d
	picture = GFX_event_zebrica_2

	is_triggered_only = yes

	option = {
		name = katzen_AF.27.a
		add_political_power = -50
	}
}

country_event = { #story event war
	id = katzen_AF.271
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.271"}
	title = katzen_AF.271.t
	desc = katzen_AF.271.d
	picture = GFX_event_crystal_university

	is_triggered_only = yes

	option = {
		name = katzen_AF.271.a
		country_event = katzen_AF.272
	}
}

country_event = { #story event war 2
	id = katzen_AF.272
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.272"}
	title = katzen_AF.272.t
	desc = katzen_AF.272.d
	picture = GFX_event_crystal_university

	is_triggered_only = yes

	option = {
		name = katzen_AF.272.a
		add_stability = 0.01
	}
}

country_event = { #story event victory parades
	id = katzen_AF.273
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.273"}
	title = katzen_AF.273.t
	desc = katzen_AF.273.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.273.a
		add_stability = 0.015
		add_war_support = 0.015
	}
}

country_event = { #hyperdiversity
	id = katzen_AF.274
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.274"}
	title = katzen_AF.274.t
	desc = katzen_AF.274.d
	picture = GFX_event_zebrica_jungle_mountain
	fire_only_once = yes

	trigger = {
		tag = KTZ
		has_completed_focus = KTZ_new_world_old_acquaintances
		ROOT = {
			owns_state = 1099
		}
	}

	option = {
		name = katzen_AF.274.a
		add_stability = -0.05
	}
}

country_event = { #revenge!!!
	id = katzen_AF.275
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.275"}
	title = katzen_AF.275.t
	desc = katzen_AF.275.d
	picture = GFX_event_stormlands_castle

	is_triggered_only = yes

	option = {
		name = katzen_AF.275.a
		every_state = {
			limit = {
				OR = {
					is_core_of = SLC
					is_core_of = STM
					is_core_of = GYZ
					is_core_of = THU
				}
				is_controlled_by = KTZ
			}
			add_compliance = 25
			add_resistance = 25
		}
		982 = {
			remove_building = {
				type = arms_factory
				level = 3
			}
			remove_building = {
				type = industrial_complex
				level = 2
			}
		}
		775 = {
			add_extra_state_shared_building_slots = 5
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
}

country_event = { #legend of everfree
	id = katzen_AF.276
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.276"}
	title = katzen_AF.276.t
	desc = katzen_AF.276.d
	picture = GFX_event_everfree_attrition
	is_triggered_only = yes

	option = {
		name = katzen_AF.276.a
		if = {
			limit = { country_exists = ZRS }
			every_state = {
				limit = { is_controlled_by = ZRS }
				add_extra_state_shared_building_slots = -25
				hidden_effect = {
					remove_building = { type = infrastructure level = 100 }
					remove_building = { type = arms_factory level = 100 }
					remove_building = { type = industrial_complex level = 100 }
				}
			}
			annex_country = { target = ZRS }
		}
		else = {
			1 = {
				add_extra_state_shared_building_slots = -25
				hidden_effect = {
					remove_building = { type = infrastructure level = 100 }
					remove_building = { type = arms_factory level = 100 }
					remove_building = { type = industrial_complex level = 100 }
				}
			}
			5 = {
				add_extra_state_shared_building_slots = -25
				hidden_effect = {
					remove_building = { type = infrastructure level = 100 }
					remove_building = { type = arms_factory level = 100 }
					remove_building = { type = industrial_complex level = 100 }
				}
			}
		}
	}
}

country_event = { #Magehold
	id = katzen_AF.277
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.277"}
	title = katzen_AF.277.t
	desc = katzen_AF.277.d
	picture = GFX_event_magehold
	fire_only_once = yes

	trigger = {
		tag = KTZ
		has_completed_focus = KTZ_new_world_old_acquaintances
		ROOT = {
			controls_state = 416
		}
	}

	option = {
		name = katzen_AF.277.a
		add_war_support = 0.05
	}
}

country_event = { #built the riesiger
	id = katzen_AF.28
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.28"}
	title = katzen_AF.28.t
	desc = katzen_AF.28.d
	picture = GFX_event_devastation_nature1

	is_triggered_only = yes

	option = {
		name = katzen_AF.28.a
		custom_effect_tooltip = katzen_AF.28.a.tt
	}
}

country_event = { #fired the riesiger, this is to everyone
	id = katzen_AF.29
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.29"}
	title = katzen_AF.29.t
	desc = katzen_AF.29.d
	picture = GFX_event_devastation_nature1

	is_triggered_only = yes

	option = {
		name = katzen_AF.29.a
	}
}


country_event = { #meeting posada
	id = katzen_AF.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.5"}
	title = katzen_AF.5.t
	desc = katzen_AF.5.d
	picture = GFX_event_posada_poster

	is_triggered_only = yes

	option = { #yay
		name = katzen_AF.5.a
		set_country_flag = HIP_posada_joined_govt
		custom_effect_tooltip = HIP_posada_joined_govt
	}
}
country_event = { #ships done
	id = katzen_AF.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.7"}
	title = katzen_AF.7.t
	desc = katzen_AF.7.d
	picture = GFX_event_aris_and_beach
	is_triggered_only = yes

	option = { #yay
		name = katzen_AF.7.a
		if = {
			limit = {
				has_dlc = "Man the Guns"
			}
			hidden_effect = {
				set_technology = {
					basic_ship_hull_light = 1
					improved_ship_torpedo_launcher = 1
				}
				create_equipment_variant = {
					name = "Herzogkatzenschiff Class"
					type = ship_hull_light_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = empty
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_2
						mid_1_custom_slot = ship_torpedo_2
						rear_1_custom_slot = ship_torpedo_2
					}
				}
				create_equipment_variant = {
					name = "Katzenkriegbaron Class"
					type = ship_hull_cruiser_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_medium_battery_1
						fixed_ship_anti_air_slot = empty
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_1
						mid_1_custom_slot = ship_torpedo_2
						mid_2_custom_slot = ship_torpedo_2
						rear_1_custom_slot = ship_light_medium_battery_1
					}
				}
				for_loop_effect = {
					end = 100
					create_ship = { type = ship_hull_light_2 equipment_variant = "Herzogkatzenschiff Class" creator = ROOT }
				}
				for_loop_effect = {
					end = 40
					create_ship = { type = ship_hull_cruiser_1 equipment_variant = "Katzenkriegbaron Class" creator = ROOT }
				}
			}
			else = {
				set_technology = {
					basic_destroyer = 1
					early_light_cruiser = 1
				}
				create_equipment_variant = {
					name = "Herzogkatzenschiff Class"
					type = destroyer_2
					upgrades = {
						ship_reliability_upgrade = 0
						ship_engine_upgrade = 0
						ship_gun_upgrade = 0
						ship_anti_air_upgrade = 0
					}
				}
				create_equipment_variant = {
					name = "Katzenkriegbaron Class"
					type = light_cruiser_1
					upgrades = {
						ship_reliability_upgrade = 0
						ship_engine_upgrade = 0
						ship_gun_upgrade = 0
						ship_anti_air_upgrade = 0
					}
				}
				for_loop_effect = {
					end = 100
					create_ship = {
						type = destroyer_2
						equipment_variant = "Herzogkatzenschiff Class"
						name = "Herzogkatzenschiff Class"
						creator = ROOT
					}
				}
				for_loop_effect = {
					end = 60
					create_ship = {
						type = light_cruiser_1
						equipment_variant = "Katzenkriegbaron Class"
						name = "Katzenkriegbaron Class"
						creator = ROOT
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					has_tech = naval_bomber1
					has_tech = iw_small_airframe
				}
		    }
		    if = {
            	limit = {
             	   has_dlc = "By Blood Alone"
           	 	}
				add_tech_bonus = {
					name = naval_air
					bonus = 0.75
					uses = 1
					category = naval_air
				}
				add_tech_bonus = {
					name = plane_modules_tech
					bonus = 0.75
					uses = 1
					category = plane_modules_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = nav_bomber_bonus
					bonus = 1.0
					uses = 1
					category = naval_bomber
				}
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					early_bombs = 1
					engines_1 = 1
				}
				generic_basic_nav_bomber = yes
				add_equipment_to_stockpile = {
					type = small_plane_naval_bomber_airframe_1
					variant_name = "Basic Naval Bomber"
					amount = 500
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = nav_bomber_equipment_1
					amount = 500
				}
			}
		}
		else = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					iw_small_airframe = 1
					early_bombs = 1
					engines_1 = 1
				}
				generic_basic_nav_bomber = yes
				add_equipment_to_stockpile = {
					type = small_plane_airframe_0
					variant_name = "Basic Naval Bomber"
					amount = 500
				}
			}
			else = {
				set_technology = {
					naval_bomber1 = 1
				}
				add_equipment_to_stockpile = {
					type = nav_bomber_equipment_1
					amount = 500
				}
			}
		}
	}
}

country_event = { #lob nukes at the fuckers in the KTZss
	id = katzen_AF.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.10"}
	title = katzen_AF.10.t
	desc = katzen_AF.10.d
	picture = GFX_event_something_in_the_water

	is_triggered_only = yes

	option = {
		name = katzen_AF.10.a
		add_political_power = 1
		custom_effect_tooltip = KTZ_nuked_the_sirens_play_gigas_tt
	}
}

country_event = { #hidden event to name the pyramid
	id = katzen_AF.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.11"}
	hidden = yes
	is_triggered_only = yes

	option = {
		set_province_name = {
			id = 15718
			name = KTZ_kattown_pyramid_locckey
		}
	}
}

country_event = { #TT-KTZ interaction
	id = katzen_AF.100
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.100"}
	title = katzen_AF.100.t
	desc = katzen_AF.100.d
	picture = GFX_event_pony_trench

	is_triggered_only = yes
	trigger = {
		has_completed_focus = KTZ_victory_parades
		original_tag = KTZ
		has_game_rule = {
			rule = ABY_APRIL_FOOL
			option = ABY_APRIL_FOOL
		}
		has_game_rule = {
			rule = tno_april_fool
			option = TNO_APRIL_FOOL
		}
	}
	option = {
		name = katzen_AF.100.a
		add_political_power = 20
	}
}

country_event = { #EOG-KTZ interaction
	id = katzen_AF.101
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.101"}
	title = katzen_AF.101.t
	desc = katzen_AF.101.d
	picture = GFX_event_af23_star_knight_battle

	is_triggered_only = yes
	trigger = {
		has_completed_focus = KTZ_the_queen_over_the_water
		original_tag = KTZ
		has_game_rule = {
			rule = ABY_APRIL_FOOL
			option = ABY_APRIL_FOOL
		}
		has_game_rule = {
			rule = eog_april_fool
			option = EOG_APRIL_FOOL
		}
	}
	option = {
		name = katzen_AF.101.a
		add_manpower = -1
	}
}

country_event = { #DF-KTZ interaction
	id = katzen_AF.102
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.102"}
	title = katzen_AF.102.t
	desc = katzen_AF.102.d
	picture = GFX_event_magehold

	is_triggered_only = yes
	trigger = {
		has_completed_focus = KTZ_gigastructural_engineering
		original_tag = KTZ
		has_game_rule = {
			rule = ABY_APRIL_FOOL
			option = ABY_APRIL_FOOL
		}
		has_game_rule = {
			rule = ded_april_fool
			option = DED_APRIL_FOOL
		}
	}
	option = {
		name = katzen_AF.102.a
		add_stability = -0.01
	}
}

country_event = { #kaiser rant
	id = katzen_AF.999
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.999"}
	title = katzen_AF.999.t
	desc = katzen_AF.999.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.999.a
		if = {
			limit = { is_ai = yes }
			add_ideas = KTZ_taking_too_long_AI
			if = { limit = { has_idea = KTZ_every_kat_must_do_their_duty_idea } remove_ideas = KTZ_every_kat_must_do_their_duty_idea }
			if = { limit = { has_idea = KTZ_reiesieger_idea } remove_ideas = KTZ_reiesieger_idea }
			if = { limit = { has_idea = KTZ_flying_fortress_idea } remove_ideas = KTZ_flying_fortress_idea }
			if = { limit = { has_idea = KTZ_KK_panzer_idea } remove_ideas = KTZ_KK_panzer_idea }
			if = { limit = { has_idea = KTZ_claw_steel_idea } remove_ideas = KTZ_claw_steel_idea }
			if = { limit = { has_idea = KTZ_katzenfication_protocols_idea } remove_ideas = KTZ_katzenfication_protocols_idea }
			if = { limit = { has_idea = KTZ_railway_and_roads_idea } remove_ideas = KTZ_railway_and_roads_idea }
			if = { limit = { has_idea = KTZ_the_queen_over_the_water_idea } remove_ideas = KTZ_the_queen_over_the_water_idea }
			if = { limit = { has_idea = KTZ_through_the_mountains_air_idea } remove_ideas = KTZ_through_the_mountains_air_idea }
			if = { limit = { has_idea = KTZ_riches_of_hip_idea } remove_ideas = KTZ_riches_of_hip_idea }
			if = { limit = { has_idea = KTZ_towards_the_sturmer_idea } remove_ideas = KTZ_towards_the_sturmer_idea }
			if = { limit = { has_idea = KTZ_the_zebtropa_dam_idea } remove_ideas = KTZ_the_zebtropa_dam_idea }
			if = { limit = { has_idea = KTZ_making_landfall_idea } remove_ideas = KTZ_making_landfall_idea }
			if = { limit = { has_idea = KTZ_into_the_desert_idea } remove_ideas = KTZ_into_the_desert_idea }
			if = { limit = { has_idea = KTZ_across_the_middle_sea_idea } remove_ideas = KTZ_across_the_middle_sea_idea }
			if = { limit = { has_idea = KTZ_the_eradication_principle_idea } remove_ideas = KTZ_the_eradication_principle_idea }
			if = { limit = { has_idea = KTZ_anti_air_idea } remove_ideas = KTZ_anti_air_idea }
			if = { limit = { has_idea = KTZ_salty_profits } remove_ideas = KTZ_salty_profits }
		}
		else = { add_ideas = KTZ_taking_too_long }
		hidden_effect = {
			every_other_country = {
				country_event = { id = katzen_AF.609 days = 1 }
			}
		}
	}
}


#Griffonia Coalition Test
country_event = { #griffonia war event - kaiser gets notified
	id = katzen_AF.8100
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8100"}

	hidden = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.8100.a
		hidden_effect = {
			#Declare war on every Griffonian country that isn't a puppet of a non-griffonian power
			every_other_country = {
				limit = {
					is_griffon_continent_country = yes
					NOT = { tag = DED tag = HLR tag = EWI }
					if = {
						limit = { is_subject = yes }
						overlord = { is_griffon_continent_country = yes }
					}
				}
				KTZ = {
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
				#How terrible! Do we do something?
				if = {
					limit = { NOT = { has_idea = detached_country } }
					country_event = { id = katzen_AF.8101 days = 1 }
				}
			}
			every_other_country = { #Ask overlords
				limit = {
					is_griffon_continent_country = yes
					is_subject = yes
					overlord = { is_griffon_continent_country = no }
				}
				country_event = { id = katzen_AF.8103 days = 1 }
			}
			KTZ = {
				country_event = { id = katzen_AF.8102 days = 15 } #The faction is created
			}
		}
	}
}

country_event = { #ask if we make a faction
	id = katzen_AF.8101
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8101"}
	title = katzen_AF.8101.t
	desc = {
		text = katzen_AF.8101.d
		trigger = {
			NOT = { any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader } }
		}
	}
	desc = {
		text = katzen_AF.8101.d.2
		trigger = {
			any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
		}
	}
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Sure: Whitepeace and set flag
	option = {
		name = katzen_AF.8101.a
		every_enemy_country = {
			limit = {
				NOT = { original_tag = KTZ }
				NOT = { has_idea = detached_country }
			}
			white_peace = PREV
		}
		hidden_effect = {
			set_country_flag = KTZ_wants_to_join_griffonia_coalition
		}
	}

	#Meh
	option = {
		name = katzen_AF.8101.b
		trigger = { is_ai = no } #AI always says yes
	}
}

country_event = { #ten days later, create it, tell Kayzoo
	id = katzen_AF.8102
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8102"}
	title = katzen_AF.8102.t
	desc = katzen_AF.8102.d
	picture = GFX_event_pony_soldiers

	immediate = {
		hidden_effect = {
			if = {
				limit = { #no unifications in MP or if KTZ isnt player
					NOT = {
						any_country = {
							is_ai = no
							NOT = { tag = KTZ }
						}
					}
				}
				if = { #Whoever owns Griffenheim unites the Herzlands, IF that owner is a griffon empire country.
					limit = {
						382 = {
							owner = { is_griffon_empire_country_tag = yes }
						}
					}
					random_country = {
						limit = { owns_state = 382 }
						save_event_target_as = KTZ_griffon_empire_uniter
						annex_country = {
							target = FEA
							transfer_troops = yes
						}
						annex_country = {
							target = STW
							transfer_troops = yes
						}
						annex_country = {
							target = BRZ
							transfer_troops = yes
						}
						annex_country = {
							target = YAL
							transfer_troops = yes
						}
						annex_country = {
							target = PYT
							transfer_troops = yes
						}
						annex_country = {
							target = ROU
							transfer_troops = yes
						}
						annex_country = {
							target = ANG
							transfer_troops = yes
						}
						annex_country = {
							target = KAT
							transfer_troops = yes
						}
						annex_country = {
							target = TRD
							transfer_troops = yes
						}
						inherit_technology = TRD
						inherit_technology = KAT
						inherit_technology = ANG
						inherit_technology = ROU
						inherit_technology = PYT
						inherit_technology = YAL
						inherit_technology = BRZ
						inherit_technology = STW
						inherit_technology = FEA
						every_owned_state = {
							add_core_of = THIS.owner
						}
					}
				}
				JER = {
					every_other_country = {
						limit = {
							is_jer_country = yes
							NOT = { tag = JER }
						}
						transfer_units_fraction= {
							target = JER
							size = 1.0
						}
					}
					annex_country = {
						target = JFT
						transfer_troops = yes
					}
					annex_country = {
						target = JEB
						transfer_troops = yes
					}
					annex_country = {
						target = JRR
						transfer_troops = yes
					}
					annex_country = {
						target = VIN
						transfer_troops = yes
					}
					annex_country = {
						target = FEZ
						transfer_troops = yes
					}
					annex_country = {
						target = HEL
						transfer_troops = yes
					}
					annex_country = {
						target = FLO
						transfer_troops = yes
					}
					annex_country = {
						target = POM
						transfer_troops = yes
					}
					annex_country = {
						target = AET
						transfer_troops = yes
					}
					inherit_technology = JFT
					inherit_technology = JEB
					inherit_technology = JRR
					inherit_technology = VIN
					inherit_technology = FEZ
					inherit_technology = HEL
					inherit_technology = FLO
					inherit_technology = POM
					inherit_technology = AET
					every_owned_state = {
						add_core_of = THIS.owner
					}
				}

				unite_river_federation = yes

				HLQ = {
					annex_country = {
						target = LNS
						transfer_troops = yes
					}
					annex_country = {
						target = LSM
						transfer_troops = yes
					}
					annex_country = {
						target = LSC
						transfer_troops = yes
					}
				}
				if = {
					limit = {
						country_exists = GRW
						country_exists = BRF
					}
					if = {
						limit = {
							has_global_flag = GRW_won_first
						}
						GRW = {
							annex_country = {
								target = BRF
								transfer_troops = yes
							}
						}
					}
					else_if = {
						limit = {
							has_global_flag = BRF_won_first
						}
						BRF = {
							annex_country = {
								target = GRW
								transfer_troops = yes
							}
						}
					}
				}
			}
			if = {
				limit = { #A coalition already exists!
					any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
				}
				every_country = {
					limit = { has_country_flag = KTZ_wants_to_join_griffonia_coalition }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
				}
				event_target:KTZ_anti_kaiser_coalition_leader = {
					set_faction_name = KTZ_united_world_faction
				}
			}
			else = {
				random_country = {
					limit = { has_country_flag = KTZ_wants_to_join_griffonia_coalition is_puppet = no }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					create_faction = KTZ_united_griffonia_faction
					save_global_event_target_as = KTZ_anti_kaiser_coalition_leader
					every_other_country = {
						limit = { has_country_flag = KTZ_wants_to_join_griffonia_coalition }
						if = { limit = { is_in_faction = yes } leave_faction = yes }
						event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
					}
				}
			}
			every_country = {
				limit = { has_country_flag = KTZ_wants_to_join_griffonia_coalition }

				add_to_tech_sharing_group = RIV_science_society_group

				if = {
					limit = { is_ai = yes }
					add_ideas = KTZ_AI_country_gigawar_buff_idea
					add_ideas = KTZ_AI_country_gigawar_buff_griffonia_idea
				}
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		any_country = { has_country_flag = KTZ_wants_to_join_griffonia_coalition }
	}

	#Oh noyo
	option = {
		name = katzen_AF.8102.a
	}
}

#Ask puppets of countries on another continent
country_event = {
	id = katzen_AF.8103
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8103"}
	title = katzen_AF.8103.t
	desc = katzen_AF.8103.d
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Let's join
	option = {
		name = katzen_AF.8103.a
		end_puppet_this = yes
		every_enemy_country = {
			limit = {  NOT = { original_tag = KTZ } }
			white_peace = PREV
		}
		leave_faction = yes
		hidden_effect = { set_country_flag = KTZ_wants_to_join_griffonia_coalition }
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = yes }
			}
		}
	}

	#Let's not get involved...
	option = {
		name = katzen_AF.8103.b
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = no }
			}
		}
	}
}


#Equus Coalition Test
country_event = { #equus war event - kaiser gets notified
	id = katzen_AF.8200
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8200"}
	hidden = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.8100.a
		hidden_effect = {
			if = {
				limit = { KTZ = { is_ai = no } }
				EQC = { end_puppet_this = yes leave_faction = yes }
			}
			#Declare war on every Equus country that isn't a puppet of a non-griffonian power
			every_other_country = {
				limit = {
					is_equestrian_continent_country = yes
					if = {
						limit = { is_subject = yes }
						overlord = { is_equestrian_continent_country = yes }
					}
				}
				KTZ = {
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
				#How terrible! Do we do something?
				if = {
					limit = { NOT = { has_idea = detached_country } }
					country_event = { id = katzen_AF.8201 days = 1 }
				}
			}
			every_other_country = { #Ask puppets of other continents
				limit = {
					is_equestrian_continent_country = yes
					is_subject = yes
					overlord = { is_equestrian_continent_country = no }
				}
				country_event = { id = katzen_AF.8203 days = 1 }
			}
			KTZ = {
				country_event = { id = katzen_AF.8202 days = 15 } #The faction is created
			}
		}
	}
}

country_event = { #ask if we make a faction
	id = katzen_AF.8201
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8201"}
	title = katzen_AF.8101.t
	desc = {
		text = katzen_AF.8101.d
		trigger = {
			NOT = { any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader } }
		}
	}
	desc = {
		text = katzen_AF.8101.d.2
		trigger = {
			any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
		}
	}
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Sure: Whitepeace and set flag
	option = {
		name = katzen_AF.8101.a
		every_enemy_country = {
			limit = {
				NOT = { original_tag = KTZ }
				NOT = { has_idea = detached_country }
			}
			white_peace = PREV
		}
		hidden_effect = {
			set_country_flag = KTZ_wants_to_join_equus_coalition
		}
	}

	#Meh
	option = {
		name = katzen_AF.8101.b
		trigger = { is_ai = no } #AI always says yes
	}
}

country_event = { #ten days later, create it, tell Kayzoo
	id = katzen_AF.8202
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8202"}
	title = katzen_AF.8202.t
	desc = katzen_AF.8202.d
	picture = GFX_event_pony_soldiers

	immediate = {
		hidden_effect = {
			if = {
				limit = { #no unifications in MP or if KTZ isnt player
					NOT = {
						any_country = {
							is_ai = no
							NOT = { tag = KTZ }
						}
					}
				}
				if = {
					limit = {
						NLR = {
							owns_state = 3
						}
					}
					every_other_country = {
						limit = {
							is_eqs_civil_war_tag_tag = yes
							NOT = { tag = NLR }
						}
						transfer_units_fraction= {
							target = NLR
							size = 1.0
						}
					}
					NLR = {
						annex_country = {
							target = LSP
							transfer_troops = yes
						}
						annex_country = {
							target = EQS
							transfer_troops = yes
						}
						annex_country = {
							target = SCS
							transfer_troops = yes
						}
						annex_country = {
							target = VAN
							transfer_troops = yes
						}
						annex_country = {
							target = BAL
							transfer_troops = yes
						}
						annex_country = {
							target = NMS
							transfer_troops = yes
						}
						annex_country = {
							target = CES
							transfer_troops = yes
						}
						annex_country = {
							target = JUN
							transfer_troops = yes
						}
						annex_country = {
							target = TEM
							transfer_troops = yes
						}
						complete_national_focus = EQS_Civil_War_End
						declare_war_on = {
							target = KTZ
							type = annex_everything
						}
						inherit_technology = SCS
						inherit_technology = VAN
						inherit_technology = BAL
						inherit_technology = NMS
						inherit_technology = CES
						inherit_technology = JUN
						inherit_technology = EQS
					}
				}
				else_if = {
					limit = {
						EQS = { owns_state = 3 }
					}
					every_other_country = {
						limit = {
							is_eqs_civil_war_tag_tag = yes
							NOT = { tag = EQS }
						}
						transfer_units_fraction= {
							target = EQS
							size = 1.0
						}
					}
					EQS = {
						annex_country = {
							target = LSP
							transfer_troops = yes
						}
						annex_country = {
							target = NLR
							transfer_troops = yes
						}
						annex_country = {
							target = SCS
							transfer_troops = yes
						}
						annex_country = {
							target = VAN
							transfer_troops = yes
						}
						annex_country = {
							target = BAL
							transfer_troops = yes
						}
						annex_country = {
							target = NMS
							transfer_troops = yes
						}
						annex_country = {
							target = CES
							transfer_troops = yes
						}
						annex_country = {
							target = JUN
							transfer_troops = yes
						}
						annex_country = {
							target = TEM
							transfer_troops = yes
						}
						complete_national_focus = EQS_Civil_War_End
						inherit_technology = SCS
						inherit_technology = VAN
						inherit_technology = BAL
						inherit_technology = NMS
						inherit_technology = CES
						inherit_technology = JUN
						inherit_technology = NLR
					}
				}
				YAK = {
					annex_country = {
						target = JAK
						transfer_troops = yes
					}
				}
				GRF = {
					annex_country = {
						target = GFF
						transfer_troops = yes
					}
				}
			}
			if = {
				limit = { #A coalition already exists!
					any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
				}
				every_country = {
					limit = { has_country_flag = KTZ_wants_to_join_equus_coalition }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
				}
				event_target:KTZ_anti_kaiser_coalition_leader = {
					set_faction_name = KTZ_united_world_faction
				}
			}
			else = {
				random_country = {
					limit = { has_country_flag = KTZ_wants_to_join_equus_coalition is_puppet = no }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					create_faction = KTZ_united_equus_faction
					save_global_event_target_as = KTZ_anti_kaiser_coalition_leader
					every_other_country = {
						limit = { has_country_flag = KTZ_wants_to_join_equus_coalition }
						if = { limit = { is_in_faction = yes } leave_faction = yes }
						event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
					}
				}
			}
			every_country = {
				limit = { has_country_flag = KTZ_wants_to_join_equus_coalition }
				add_to_tech_sharing_group = equestrian_research
				if = {
					limit = { is_ai = yes }
					add_ideas = KTZ_AI_country_gigawar_buff_idea
					add_ideas = KTZ_AI_country_gigawar_buff_equus_idea
				}
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		any_country = { has_country_flag = KTZ_wants_to_join_equus_coalition }
	}

	#Oh noyo
	option = {
		name = katzen_AF.8202.a
	}
}

#Ask puppets of countries on another continent
country_event = {
	id = katzen_AF.8203
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8203"}
	title = katzen_AF.8103.t
	desc = katzen_AF.8103.d
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Let's join
	option = {
		name = katzen_AF.8103.a
		end_puppet_this = yes
		every_enemy_country = {
			limit = { NOT = { original_tag = KTZ } }
			white_peace = PREV
		}
		leave_faction = yes
		hidden_effect = { set_country_flag = KTZ_wants_to_join_equus_coalition }
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = yes }
			}
		}
	}

	#Let's not get involved...
	option = {
		name = katzen_AF.8103.b
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = no }
			}
		}
	}
}

#Zebrica Coalition Test
country_event = { #Zebrica war event - kaiser gets notified
	id = katzen_AF.8300
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8300"}
	hidden = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.8100.a
		hidden_effect = {
			#Declare war on every Zebrica country that isn't a puppet of a non-zebrican power
			every_other_country = {
				limit = {
					is_zebrican_continent_country = yes
					if = {
						limit = { is_subject = yes }
						overlord = { is_zebrican_continent_country = yes }
					}
				}
				KTZ = {
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
				#How terrible! Do we do something? Kiria excluded if they're in their civil war
				if = {
					limit = {
						NOT = { has_idea = detached_country }
						NOT = {
							AND = {
								tag = KIR
								OR = {
									has_war_with = KIC
									has_war_with = KIS
								}
							}
							AND = {
								tag = KIS
								OR = {
									has_war_with = KIC
									has_war_with = KIR
								}
							}
							AND = {
								tag = KIC
								OR = {
									has_war_with = KIR
									has_war_with = KIS
								}
							}
						}
					}
					country_event = { id = katzen_AF.8301 days = 1 }
				}
			}
			every_other_country = { #Ask puppets of other continents
				limit = {
					is_zebrican_continent_country = yes
					is_subject = yes
					overlord = { is_zebrican_continent_country = no}
				}
				country_event = { id = katzen_AF.8303 days = 1 }
			}
			KTZ = {
				country_event = { id = katzen_AF.8302 days = 15 } #The faction is created
			}
		}
	}
}

country_event = { #ask if we make a faction
	id = katzen_AF.8301
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8301"}
	title = katzen_AF.8101.t
	desc = {
		text = katzen_AF.8101.d
		trigger = {
			NOT = { any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader } }
		}
	}
	desc = {
		text = katzen_AF.8101.d.2
		trigger = {
			any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
		}
	}
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Sure: Whitepeace and set flag
	option = {
		name = katzen_AF.8101.a
		every_enemy_country = {
			limit = {
				NOT = { original_tag = KTZ }
				NOT = { has_idea = detached_country }
			}
			white_peace = PREV
		}
		hidden_effect = {
			set_country_flag = KTZ_wants_to_join_zebrica_coalition
		}
	}

	#Meh
	option = {
		name = katzen_AF.8101.b
		trigger = { is_ai = no } #AI always says yes
	}
}

country_event = { #ten days later, create it, tell Kayzoo
	id = katzen_AF.8302
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8302"}
	title = katzen_AF.8302.t
	desc = katzen_AF.8302.d
	picture = GFX_event_pony_soldiers

	immediate = {
		hidden_effect = {
			if = {
				limit = { #A coalition already exists!
					any_country = { is_in_faction_with = event_target:KTZ_anti_kaiser_coalition_leader }
				}
				every_country = {
					limit = { has_country_flag = KTZ_wants_to_join_zebrica_coalition }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
				}
				event_target:KTZ_anti_kaiser_coalition_leader = {
					set_faction_name = KTZ_united_world_faction
				}
			}
			else = {
				random_country = {
					limit = { has_country_flag = KTZ_wants_to_join_zebrica_coalition is_puppet = no }
					if = { limit = { is_in_faction = yes } leave_faction = yes }
					create_faction = KTZ_united_zebrica_faction
					save_global_event_target_as = KTZ_anti_kaiser_coalition_leader
					every_other_country = {
						limit = { has_country_flag = KTZ_wants_to_join_zebrica_coalition }
						if = { limit = { is_in_faction = yes } leave_faction = yes }
						event_target:KTZ_anti_kaiser_coalition_leader = { add_to_faction = PREV }
					}
				}
			}
			every_country = {
				limit = { has_country_flag = KTZ_wants_to_join_zebrica_coalition }
				if = {
					limit = { is_ai = yes }
					add_ideas = KTZ_AI_country_gigawar_buff_idea
					add_ideas = KTZ_AI_country_gigawar_buff_zebrica_idea
				}
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		any_country = { has_country_flag = KTZ_wants_to_join_zebrica_coalition }
	}

	#Oh noyo
	option = {
		name = katzen_AF.8302.a
	}
}

#Ask puppets of countries on another continent
country_event = {
	id = katzen_AF.8303
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8303"}
	title = katzen_AF.8103.t
	desc = katzen_AF.8103.d
	picture = GFX_event_pony_soldiers

	is_triggered_only = yes

	#Let's join
	option = {
		name = katzen_AF.8103.a
		end_puppet_this = yes
		every_enemy_country = {
			limit = {  NOT = { original_tag = KTZ } }
			white_peace = PREV
		}
		leave_faction = yes
		hidden_effect = { set_country_flag = KTZ_wants_to_join_zebrica_coalition }
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = yes }
			}
		}
	}

	#Let's not get involved...
	option = {
		name = katzen_AF.8103.b
		trigger = {
			OR = {
				is_ai = no
				overlord = { is_ai = no }
			}
		}
	}
}

country_event = { #debug event for spawning in dams
	id = katzen_AF.99999
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99999"}
	title = katzen_AF.99999.t
	desc = katzen_AF.99999.d
	picture = GFX_event_griffon_back

	is_triggered_only = yes

	option = {
		name = katzen_AF.99999.a
		create_entity = {
			entity = tno_reference
			id = 9999999
			var = zebtropa_i_dam
			x = 11.3
			y = -1.5
			z = -0.1
			state = 869
			province = 14632
			scale = 1.0
			rotation = 2.5
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.b
		create_entity = {
			entity = tno_reference
			id = 9999995
			var = jezeragrad_i_dam
			x = 0
			y = 4.6
			z = -0.1
			state = 387
			province = 12249
			scale = 0.5
			rotation = -1.5
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.c
		create_entity = {
			entity = tno_reference
			id = 9999994
			var = ponezega_i_dam
			x = 0
			y = 9.4
			z = -0.1
			state = 615
			province = 4501
			scale = 0.5
			rotation = -2
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.e
		create_entity = {
			entity = tno_reference
			id = 9999993
			var = vinnin_i_dam
			x = 1
			y = 6
			z = -0.1
			state = 405
			province = 11961
			scale = 0.5
			rotation = -2.4
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.f
		# add_days_mission_timeout = {
		# 	mission = KTZ_clock_is_ticking_kattail_mission
		# 	days = -56
		# }
	}
}
country_event = { #debug event for reactivating dockyard decisions
	id = katzen_AF.99998
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99998"}
	title = katzen_AF.99998.t
	desc = katzen_AF.99998.d
	picture = GFX_event_griffon_back

	is_triggered_only = yes

	option = {
		name = katzen_AF.99998.a
		activate_targeted_decision = { target = 695 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 696 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 693 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 692 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 784 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1199 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1198 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1197 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1196 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1195 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1194 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 1193 decision = KTZ_giga_shipyards_decision }
		activate_targeted_decision = { target = 4 decision = KTZ_giga_shipyards_decision }
	}
	option = {
		name = katzen_AF.99999.b
		activate_decision = KTZ_griffonian_power_dam_jezeragrad_decision
	}
	option = {
		name = katzen_AF.99999.c
		activate_decision = KTZ_zebhara_decision
		for_each_loop = {
			array = KTZ_zebhara_states_array
			value = state_id
			var:state_id = {
				add_extra_state_shared_building_slots = 2
				add_manpower = 50000
				increase_state_category = yes
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

country_event = { #fallback crusade
	id = katzen_AF.5000
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.100"}
	title = katzen_AF.5000.t
	desc = katzen_AF.5000.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.5000.a
		if = {
			limit = {
				any_other_country = {
					NOT = {
						tag = DED
						tag = HLR
						tag = EWI
					}
					NOT = { has_war_with = ROOT }
				}
			}
			custom_effect_tooltip = KTZ_grand_crusade_event_TT
		}
		hidden_effect = {
			every_other_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					NOT = {
						tag = DED
						tag = HLR
						tag = EWI
					}
				}
				PREV = {
					if = {
						limit = {
							NOT = { has_wargoal_against = PREV }
						}
						create_wargoal = {
							target = PREV
							type = annex_everything
						}
					}
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
			}
		}
		custom_effect_tooltip = KTZ_grand_crusade_event_dec_TT
		add_ideas = KTZ_grand_crusade_idea
	}
}

country_event = { #world unification
	id = katzen_AF.5001
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event katzen_AF.5001"
		hidden_effect = {
			set_global_flag = KTZ_world_united_against_kattail
			random_state = {
				limit = { NOT = { is_controlled_by = KTZ } }
				transfer_state_to = UFS
			}
		}
	}
	title = katzen_AF.5001.t
	desc = katzen_AF.5001.d
	picture = GFX_event_canterlot
	fire_only_once = yes

	trigger = {
		NOT = { has_global_flag = KTZ_world_united_against_kattail }
		tag = KTZ
		has_country_flag = KTZ_endgame_start_flag
		OR = {
			check_variable = {
				num_controlled_states > 800 #About two thirds of the planet
			}
			AND = {
				check_variable = { num_of_civilian_factories > 1000 }
				check_variable = { num_of_military_factories > 1000 }
			}
		}
		NOT = { #Not in MP
			any_country = {
				is_ai = no
				NOT = { tag = KTZ }
			}
		}
	}

	option = {
		name = katzen_AF.5001.a
		custom_effect_tooltip = katzen_AF.5001.a.tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_idea = KTZ_grand_crusade_idea }
				}
				country_event = { id = katzen_AF.5000 days = 30 }
			}

			UFS = {
				save_global_event_target_as = KTZ_world_federation
				declare_war_on = {
					target = KTZ
					type = annex_everything
				}
				every_other_country = {
					limit = {
						is_ai = yes
						NOT = { tag = KTZ }
						NOT = { has_idea = detached_country }
					}

					every_unit_leader = { set_nationality = UFS }
					UFS = {
						if = {
							limit = { check_variable = { tmp_first_country > 0 } }
							# Have to check the technology that UFS doesn't have yet
							for_each_loop = {
								array = PREV.researched_techs
								value = tech_token

								if = {
									limit = {
										NOT = { is_in_array = { UFS.researched_techs = tech_token } }
									}
									meta_effect = {
										text = {
											set_technology = {
												[TECH] = 1
											}
										}
										TECH = "[?tech_token.GetTokenKey]"
									}
								}
							}

						} 
						else = {
							set_temp_variable = { tmp_first_country = 1 }
							inherit_technology = PREV
						}
						annex_country = {
							target = PREV
							transfer_troops = yes
						}
					}
				}
			}
			HIE ={
				every_unit_leader = { set_nationality = UFS }
			}
			event_target:KTZ_world_federation = {
				add_ideas = service_by_requirement
				add_ideas = tot_economic_mobilisation
				add_ideas = closed_economy
				set_research_slots = 7 #It's the entire world
				increase_society_development = yes
				increase_society_development = yes
				increase_society_development = yes
				decrease_poverty = yes
				decrease_poverty = yes
				decrease_poverty = yes
				every_state = { add_core_of = event_target:KTZ_world_federation }
				add_ideas = KTZ_world_federation_last_stand
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
					long_name = "UFS_party_name"
					name = "UFS_party_name"
				}
				add_popularity = {
					ideology = democratic
					popularity = 1.00
				}
				load_focus_tree = BAR_empty_tree
				if = {
					limit = { is_in_faction = yes }
					leave_faction = yes
				}
			}
			set_global_flag = KTZ_musicflag2
			scoped_play_song = "Brad_Cypy-Battle_For_Supremacy"
		}
	}
}

#NEWS EVENTS
news_event = { #Green desert
	id = katzen_AF.500
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.500"}
	title = katzen_AF.500.t
	desc = katzen_AF.500.d
	picture = GFX_news_event_hindia_2
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.500.a
	}
}

news_event = { #Big bridge
	id = katzen_AF.502
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.502"}
	title = katzen_AF.502.t
	desc = katzen_AF.502.d
	picture = GFX_news_event_giant_bridge
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.502.a
	}
}

news_event = { #Maglev
	id = katzen_AF.503
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.503"}
	title = katzen_AF.503.t
	desc = katzen_AF.503.d
	picture = GFX_news_event_maglev
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.503.a
	}
}

news_event = { #Zebtropa announced
	id = katzen_AF.504
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.504"}
	title = katzen_AF.504.t
	desc = katzen_AF.504.d
	picture = GFX_news_event_dam
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.504.a
		trigger = { NOT = { tag = KTZ } }
	}

	option = {
		name = katzen_AF.504.b
		trigger = { tag = KTZ }
	}
}

news_event = { #Zebtropa done
	id = katzen_AF.505
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.505"}
	title = katzen_AF.505.t
	desc = katzen_AF.505.d
	picture = GFX_news_event_dam
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.505.a
		trigger = { NOT = { tag = KTZ } }
	}

	option = {
		name = katzen_AF.505.b
		trigger = { tag = KTZ }
	}
}

#strange fellow
country_event = { #play as kattail
	id = katzen_AF.510
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.510"}
	title = katzen_AF.510.t
	desc = katzen_AF.510.d
	picture = GFX_event_KTZ_kattail
	major = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.510.b
		custom_effect_tooltip = katzen_AF.510.b.tt
	}

	option = { #Become Kayzoo
		name = katzen_AF.510.a
		KTZ = { change_tag_from = ROOT }
		trigger = { #not in MP
			NOT = { any_other_country = { is_ai = no } }
			KTZ = { is_ai = yes }
		}
	}
}

#landings
country_event = {
	id = katzen_AF.511
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.511"}
	title = katzen_AF.511.t
	desc = katzen_AF.511.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.511.a
	}
}

#Nila events
country_event = { #Relentless advance (fall of Vermillion)
	id = katzen_AF.601
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.601"}
	title = katzen_AF.601.t
	desc = katzen_AF.601.d
	picture = GFX_event_bazooka_team

	fire_only_once = yes

	trigger = {
		tag = KTZ
		NOT = { country_exists = CTH }
		1059 = {
			OR = {
				is_controlled_by = KTZ
				any_neighbor_state = { is_controlled_by = KTZ }
			}
		}
		has_completed_focus = KTZ_are_worth_taking_over
	}

	option = {
		name = katzen_AF.601.a
		add_war_support = 0.05
		add_stability = 0.05
		add_political_power = 50
	}
}

country_event = { #A new life
	id = katzen_AF.602
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.601"}
	title = katzen_AF.602.t
	desc = katzen_AF.602.d
	picture = GFX_event_colthage_village

	fire_only_once = yes

	trigger = {
		tag = KTZ
		NOT = { country_exists = CTH }
		ROOT = {
			controls_state = 875
		}
		has_completed_focus = KTZ_are_worth_taking_over
	}

	option = {
		name = katzen_AF.602.a
		hidden_effect = {
			country_event = { id = katzen_AF.603 days = 180 }
			every_controlled_state = {
				limit = { is_core_of = CTH }
				add_compliance = 5
			}
		}
	}
}

country_event = { #Promotion
	id = katzen_AF.603
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.601"}
	title = katzen_AF.603.t
	desc = katzen_AF.603.d
	picture = GFX_event_school

	is_triggered_only = yes

	option = {
		name = katzen_AF.603.a
		hidden_effect = {
			country_event = { id = katzen_AF.604 days = 180 }
			every_controlled_state = {
				limit = { is_core_of = CTH }
				add_compliance = 5
			}
		}
	}
}

country_event = { #Katzenification
	id = katzen_AF.604
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.601"}
	title = katzen_AF.604.t
	desc = katzen_AF.604.d
	picture = GFX_event_colthage_city

	is_triggered_only = yes

	option = {
		name = katzen_AF.604.a
		every_controlled_state = {
			limit = { is_core_of = CTH }
			add_compliance = 10
		}
	}
}

country_event = { #Lead Me, Follow Me, or Get Out of My Way
	id = katzen_AF.605
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.601"}
	title = katzen_AF.605.t
	desc = katzen_AF.605.d
	picture = GFX_event_KTZ_pawtton

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = katzen_AF.605.a
		add_political_power = 50
	}
}

country_event = { #Kirin gets medal
	id = katzen_AF.606
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.606"}
	title = katzen_AF.606.t
	desc = katzen_AF.606.d
	picture = GFX_event_generic_pony_soldier

	fire_only_once = yes

	trigger = {
		tag = KTZ
		has_completed_focus = KTZ_are_worth_taking_over
		NOT = { country_exists = KIR }
		ROOT = {
			controls_state = 1071
		}
	}

	option = {
		name = katzen_AF.606.a
		add_war_support = 0.025
	}
}

country_event = { #bozo ran the wrong way lol
	id = katzen_AF.612
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.612"}
	title = katzen_AF.612.t
	desc = katzen_AF.612.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.612.a
		add_war_support = -0.01
	}
}

country_event = { #klugetown conquest?
	id = katzen_AF.613
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.613"}
	title = katzen_AF.613.t
	desc = katzen_AF.613.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	trigger = {
		tag = KTZ
		NOT = { country_exists = KLG }
		1208 = { is_controlled_by = KTZ }
		has_completed_focus = KTZ_are_worth_taking_over
	}

	option = {
		name = katzen_AF.613.a
		add_ideas = KLG_black_market
		add_political_power = 50
		1208 = {
			remove_dynamic_modifier = { modifier = klugetown_criminals }
			add_compliance = 20
			add_resistance = -20
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
			}
		}
		KLG = {
			KLG_verko = {
				set_nationality = KTZ
				add_advisor_role = {
					advisor = {
						cost = 100
						slot = political_advisor
						idea_token = KLG_verko
						traits = { comically_corrupt_kleptocrat }
					}
				}
			}
		}
	}

	option = {
		name = katzen_AF.613.b
		add_war_support = -0.01
		add_political_power = -50
		add_timed_idea = { idea = KTZ_klugetown_integration_idea days = 120 }
		hidden_effect = {
			country_event = { id = katzen_AF.614 days = 120 }
		}
		1208 = {
			add_resistance = 40
		}
		KLG = {
			KLG_capper = {
				set_nationality = KTZ
				add_advisor_role = {
					advisor = {
						cost = 100
						slot = political_advisor
						idea_token = KLG_capper
						traits = { welfare_reformer }
					}
				}
				add_corps_commander_role = {
					traits = { inspirational_leader cat_race_trait }
					skill = 2
					attack_skill = 1
					defense_skill = 2
					planning_skill = 4
					logistics_skill = 2
				}
			}
		}
	}
}

country_event = { #klugetown integrated
	id = katzen_AF.614
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.614"}
	title = katzen_AF.614.t
	desc = katzen_AF.614.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.614.a
		add_political_power = 100
		add_ideas = KTZ_klugetown_integrated_idea
		1208 = {
			set_state_name = KTZ_1208_name
			set_province_name = { id = 12386 name = KTZ_1208_name }
			add_manpower = 50000
			remove_dynamic_modifier = { modifier = klugetown_criminals }
			add_core_of = KTZ
			add_extra_state_shared_building_slots = 4
			add_building_construction = {
				type = arms_factory
				level = 2
			}
			add_building_construction = {
				type = industrial_complex
				level = 2
			}
		}
	}
}

country_event = { #demand to wng
	id = katzen_AF.615
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.615"}
	title = katzen_AF.615.t
	desc = katzen_AF.615.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Fine.
	option = {
		name = katzen_AF.615.a
		KTZ = { country_event = { id = katzen_AF.616 days = 1 } }
	}

	#Never!
	option = {
		name = katzen_AF.615.b
		KTZ = { country_event = { id = katzen_AF.617 days = 1 } }
	}
}

country_event = { #wng accepted
	id = katzen_AF.616
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.616"}
	title = katzen_AF.616.t
	desc = katzen_AF.616.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Splendid!
	option = {
		name = katzen_AF.616.a
		1200 = { transfer_state_to = KTZ }
		784 = { transfer_state_to = KTZ }
	}
}

country_event = { #wng refused
	id = katzen_AF.617
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.617"}
	title = katzen_AF.617.t
	desc = katzen_AF.617.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#take it by force
	option = {
		name = katzen_AF.617.a
		start_border_war = {
			change_state_after_war = yes
			attacker = { 
				state = 1201
				num_provinces = 4
				on_win = katzen_AF.618
				on_cancel = katzen_AF.619
				on_lose = katzen_AF.619
			}
			defender = {
				state = 1200
				num_provinces = 1
				on_win = katzen_AF.620
				on_cancel = katzen_AF.620
				on_lose = katzen_AF.621
			}
		}
	}

	#War!
	option = {
		name = katzen_AF.617.b
		add_war_support = -0.10
		add_stability = -0.10
		declare_war_on = {
			target = WNG
			type = take_core_state
		}
	}
}

#Kattail won border war
country_event = {
	id = katzen_AF.618
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.618"}
	title = katzen_AF.618.t
	desc = katzen_AF.618.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Splendid!
	option = {
		name = katzen_AF.618.a
		1200 = { transfer_state_to = KTZ }
		784 = { transfer_state_to = KTZ }
	}
}

#No.
country_event = {
	id = katzen_AF.619
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.619"}
	title = katzen_AF.619.t
	desc = katzen_AF.619.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Enough. War!
	option = {
		name = katzen_AF.619.a
		1201 = { transfer_state_to = 1200.owner }
		add_war_support = -0.20
		add_stability = -0.20
		declare_war_on = {
			target = WNG
			type = take_core_state
		}
	}
}

#WNG won border war
country_event = {
	id = katzen_AF.620
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.620"}
	title = katzen_AF.620.t
	desc = katzen_AF.620.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Splendid!
	option = {
		name = katzen_AF.620.a
		add_war_support = 0.10
		add_stability = 0.10
	}
}

#WNG lost border war
country_event = {
	id = katzen_AF.621
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.619"}
	title = katzen_AF.621.t
	desc = katzen_AF.621.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	#Splendid!
	option = {
		name = katzen_AF.621.a
		add_war_support = -0.10
		add_stability = -0.10
	}
}

country_event = { #Katzen salt
	id = katzen_AF.607
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.607"}
	title = katzen_AF.607.t
	desc = katzen_AF.607.d
	picture = GFX_event_KTZ_salt

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.607.a
		add_ideas = KTZ_salty_profits
	}
}

country_event = { #highway event
	id = katzen_AF.608
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.608"}
	title = katzen_AF.608.t
	desc = katzen_AF.608.d
	picture = GFX_event_distressed_monzano

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.608.a
		add_stability = -0.025
	}
}

country_event = { #kaiser stalls
	id = katzen_AF.609
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.609"}
	title = katzen_AF.609.t
	desc = katzen_AF.609.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.609.a
		custom_effect_tooltip = katzen_AF.609.a.tt
	}
}

country_event = { #kaiser info
	id = katzen_AF.610
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.610"}
	title = katzen_AF.610.t
	desc = katzen_AF.610.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	#immediate = {
	#	hidden_effect = { set_country_flag = KTZ_told_about_kaiser_weakness }
	#}

	trigger = {
		KTZ = { has_completed_focus = KTZ_are_worth_taking_over }
		has_war_with = KTZ
		#NOT = { has_country_flag = KTZ_told_about_kaiser_weakness }
	}

	option = {
		name = katzen_AF.610.a
		custom_effect_tooltip = katzen_AF.610.a.tt
	}
}

country_event = { #planning away
	id = katzen_AF.611
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.611"}
	title = katzen_AF.611.t
	desc = katzen_AF.611.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.611.a
		custom_effect_tooltip = katzen_AF.611.a.tt
	}
}

#Change kaiser's look
country_event = {
	id = katzen_AF.625
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.620"}
	title = katzen_AF.625.t
	desc = katzen_AF.625.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = { #Default (Neither)
		name = katzen_AF.625.a
		custom_effect_tooltip = katzen_AF.625.a.tt
		KTZ_kaiser_kattail = { set_portraits = { civilian={ large="gfx/leaders/KTZ/KTZ_Kattail.tga" } } }
		hidden_effect = { 
			clr_country_flag = KTZ_kattail_portrait_toggle_flag
			add_to_variable = {
				KTZ_kattail_portrait_dirty = 1
			}
		}
	}

	option = { #Derega
		name = katzen_AF.625.b
		custom_effect_tooltip = katzen_AF.625.b.tt
		KTZ_kaiser_kattail = { set_portraits = { civilian={ large="gfx/leaders/KTZ/KTZ_Kattail_Derega.tga" } } }
		hidden_effect = { 
			clr_country_flag = KTZ_kattail_portrait_toggle_flag
			add_to_variable = {
				KTZ_kattail_portrait_dirty = 1
			}
		}
	}

	option = { #Kessel
		name = katzen_AF.625.c
		custom_effect_tooltip = katzen_AF.625.c.tt
		KTZ_kaiser_kattail = { set_portraits = { civilian={ large="gfx/leaders/KTZ/KTZ_Kattail_Kessel.tga" } } }
		hidden_effect = { 
			clr_country_flag = KTZ_kattail_portrait_toggle_flag
			add_to_variable = {
				KTZ_kattail_portrait_dirty = 1
			}
		}
	}

	option = { #Plant
		name = katzen_AF.625.e
		custom_effect_tooltip = katzen_AF.625.e.tt
		KTZ_kaiser_kattail = { set_portraits = { civilian={ large="gfx/leaders/KTZ/KTZ_Kattail_PvZ.tga" } } }
		hidden_effect = { 
			clr_country_flag = KTZ_kattail_portrait_toggle_flag
			add_to_variable = {
				KTZ_kattail_portrait_dirty = 1
			}
		}
	}
}

country_event = { #Kaiser report on food
	id = katzen_AF.640
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.640"}
	title = katzen_AF.640.t
	desc = katzen_AF.640.d
	picture = GFX_event_hindia_field2

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.640.a
		custom_effect_tooltip = katzen_AF.640.tt
		remove_ideas = ABY_risk_of_famine
		add_dynamic_modifier = { modifier = KTZ_food_imports_modifier }
	}
}

country_event = { #Kaiser report on slaves
	id = katzen_AF.641
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.641"}
	title = katzen_AF.641.t
	desc = katzen_AF.641.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.641.a
		remove_ideas = ABY_angry_slaves
		add_timed_idea = {
			idea = KTZ_progressive_emancipation
			days = 720
		}
	}
}

country_event = { #Kaiser report on nobles
	id = katzen_AF.642
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.642"}
	title = katzen_AF.642.t
	desc = katzen_AF.642.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.642.a
		custom_effect_tooltip = katzen_AF.642.a.tt
		remove_ideas = ABY_paralyzed_leadership
		add_ideas = KTZ_nobles_into_governors_1
	}
}

#Once Purrsia is reclaimed an anti-kaiser movement takes shape
country_event = {
	id = katzen_AF.643
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.643"}
	title = katzen_AF.643.t
	desc = katzen_AF.643.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.643.a
		custom_effect_tooltip = katzen_AF.643.a.tt
		add_dynamic_modifier = { modifier = KTZ_old_abyssinian_front_modifier }
		hidden_effect = {
			set_country_flag = KTZ_old_abyssinian_front_active
			set_variable = { KTZ_old_abyssinian_front_modifier_resistance_growth = 0.50 }
			set_variable = { KTZ_old_abyssinian_front_modifier_compliance_growth = -0.50 }
		}
		1200 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20 }
		1201 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20 }
		789 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20  }
		784 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20 }
		783 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20  }
		782 = { set_state_flag = KTZ_old_abyssinian_front_state remove_core_of = KTZ add_resistance = 20 }
	}
}

country_event = { #State loyal again
	id = katzen_AF.644
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.644"}
	title = katzen_AF.644.t
	desc = katzen_AF.644.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.644.a
		event_target:ktz_new_loyal_state = {
			add_core_of = KTZ
		}
		if = {
			limit = {
				has_country_flag = KTZ_old_abyssinian_front_active
				NOT = { any_owned_state = { has_state_flag = KTZ_old_abyssinian_front_state } }
			}
			clr_country_flag = KTZ_old_abyssinian_front_active
			country_event = { id = katzen_AF.645 days = 2 }
		}
	}
}

#anti-abyssinian front defeated
country_event = {
	id = katzen_AF.645
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.645"}
	title = katzen_AF.645.t
	desc = katzen_AF.645.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.645.a
		remove_dynamic_modifier = { modifier = KTZ_old_abyssinian_front_modifier }
		country_event = { id = katzen_AF.646 days = 2 }
	}
}

country_event = {
	id = katzen_AF.646
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.646"}
	title = katzen_AF.646.t
	desc = katzen_AF.646.d
	picture = GFX_event_green_mountain

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.646.a
		country_event = { id = katzen_AF.647 days = 2 }
	}
}

country_event = {
	id = katzen_AF.647
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.647"}
	title = katzen_AF.647.t
	desc = katzen_AF.647.d
	picture = GFX_event_green_mountain

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.647.a
		add_stability = -0.02
	}
}

#world embargoes kattail (everyone else)
country_event = {
	id = katzen_AF.648
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.648"}
	title = katzen_AF.648.t
	desc = katzen_AF.648.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.648.a
	}
}

#world embargoes kattail
country_event = {
	id = katzen_AF.649
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.649"}
	title = katzen_AF.649.t
	desc = katzen_AF.649.d
	picture = GFX_event_KTZ_kattail

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = katzen_AF.649.a
		custom_effect_tooltip = katzen_AF.649.a.tt
		every_other_country = {
			send_embargo = KTZ
			add_opinion_modifier = {
				target = KTZ
				modifier = hostility
			}
		}
		hidden_effect = {
			set_country_flag = KTZ_world_embargo
			set_variable = { KTZ_starvation_modifier_stability_weekly_factor = 0.005 }
			set_variable = { KTZ_starvation_modifier_stability_factor = 0.2 }
			set_variable = { KTZ_starvation_modifier_army_org_factor = 0.1 }
			multiply_variable = { KTZ_starvation_modifier_stability_weekly_factor = KTZ_food_balance }
			multiply_variable = { KTZ_starvation_modifier_stability_factor = KTZ_food_balance }
			multiply_variable = { KTZ_starvation_modifier_army_org_factor = KTZ_food_balance }
			if = {
				limit = { has_dynamic_modifier = { modifier = KTZ_food_imports_modifier } }
				remove_dynamic_modifier = { modifier = KTZ_food_imports_modifier }
				add_dynamic_modifier = { modifier = KTZ_starvation_modifier }
			}
		}
	}
}

#Food degradation events
#Overstretching
country_event = {
	id = katzen_AF.650
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.650"}
	title = katzen_AF.650.t
	desc = katzen_AF.650.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.650.a
		KTZ_decrease_food_1 = yes
	}
}

#Zebtropa Specialization
country_event = {
	id = katzen_AF.630
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.630"}
	title = katzen_AF.630.t
	desc = katzen_AF.630.d
	picture = GFX_event_KTZ_kattail

	is_triggered_only = yes

	option = { #Settlement
		name = katzen_AF.630.a
		custom_effect_tooltip = katzen_AF.630.a.tt
		hidden_effect = {
			if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_arabian_coast }
				851 = { set_state_flag = KTZ_settlement_designation add_to_variable = { KTZ_settlement_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_maretonian_coast }
				1002 = { set_state_flag = KTZ_settlement_designation add_to_variable = { KTZ_settlement_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_riseia_coast }
				199 = { set_state_flag = KTZ_settlement_designation add_to_variable = { KTZ_settlement_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_north_arabian_coast }
				818 = { set_state_flag = KTZ_settlement_designation add_to_variable = { KTZ_settlement_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_yemane_coast }
				788 = { set_state_flag = KTZ_settlement_designation add_to_variable = { KTZ_settlement_designation = 1 } }
			}
			KTZ_clear_country_designation_flags = yes
		}
	}

	option = { #Dredging
		name = katzen_AF.630.b
		custom_effect_tooltip = katzen_AF.630.b.tt
		hidden_effect = {
			if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_arabian_coast }
				851 = { set_state_flag = KTZ_dredging_designation add_to_variable = { KTZ_dredging_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_maretonian_coast }
				1002 = { set_state_flag = KTZ_dredging_designation add_to_variable = { KTZ_dredging_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_riseia_coast }
				199 = { set_state_flag = KTZ_dredging_designation add_to_variable = { KTZ_dredging_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_north_arabian_coast }
				818 = { set_state_flag = KTZ_dredging_designation add_to_variable = { KTZ_dredging_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_yemane_coast }
				788 = { set_state_flag = KTZ_dredging_designation add_to_variable = { KTZ_dredging_designation = 1 } }
			}
			KTZ_clear_country_designation_flags = yes
		}
	}

	option = { #Solar Farms
		name = katzen_AF.630.c
		custom_effect_tooltip = katzen_AF.630.c.tt
		hidden_effect = {
			if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_arabian_coast }
				851 = { set_state_flag = KTZ_solar_designation add_to_variable = { KTZ_solar_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_maretonian_coast }
				1002 = { set_state_flag = KTZ_solar_designation add_to_variable = { KTZ_solar_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_riseia_coast }
				199 = { set_state_flag = KTZ_solar_designation add_to_variable = { KTZ_solar_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_north_arabian_coast }
				818 = { set_state_flag = KTZ_solar_designation add_to_variable = { KTZ_solar_designation = 1 } }
			}
			else_if = {
				limit = { has_country_flag = KTZ_zebtropa_designation_yemane_coast }
				788 = { set_state_flag = KTZ_solar_designation add_to_variable = { KTZ_solar_designation = 1 } }
			}
			KTZ_clear_country_designation_flags = yes
		}
	}
}
