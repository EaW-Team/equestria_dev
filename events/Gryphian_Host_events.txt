add_namespace = prywhen_border_war
add_namespace = brodfeld_border_war
add_namespace = gryphia
add_namespace = kaiv_commune

country_event = {
	id = prywhen_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.1"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 590
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.2"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 592
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = brodfeld_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ask for mercy!"
		trigger = {
		NOT = { has_country_flag = BRF_GRY_mercy_denied }
		}
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		set_country_flag = BRF_GRY_mercy_denied
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 508
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Fine, lets give them what they want..."
		trigger = {
		has_country_flag = BRF_GRY_mercy_denied
		}
		cancel_border_war = {
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = brodfeld_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ask for mercy!"
		trigger = {
		NOT = { has_country_flag = BRF_GRY_mercy_denied }
		}
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		set_country_flag = BRF_GRY_mercy_denied
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 508
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Fine, lets give them what they want..."
		trigger = {
		has_country_flag = BRF_GRY_mercy_denied
		}
		cancel_border_war = {
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = brodfeld_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ask for mercy!"
		trigger = {
		NOT = { has_country_flag = BRF_GRY_mercy_denied }
		}
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		set_country_flag = BRF_GRY_mercy_denied
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 508
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Fine, lets give them what they want..."
		trigger = {
		has_country_flag = BRF_GRY_mercy_denied
		}
		cancel_border_war = {
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}
#########################################

country_event = { 
	id = gryphia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.1"}
	title = gryphia.1.t
	desc = gryphia.1.d

	picture = GFX_event_griffon_para
	is_triggered_only = yes

	option = {
		name = gryphia.1.a
	}
}

#########################################
country_event = {
    id = kaiv_commune.1
    immediate = {
        immediate = {log = "[Root.GetName]: Checking event kaiv_commune.1"}#Auto-logging
        set_country_flag = kaiv_commune_triggered
    }

    title = "Communist coup!"
    desc = kaiv_commune.1.d
    picture = GFX_event_griffon_with_gun

    trigger = {
    tag = GRY
    has_global_flag = prywhen_civil_war_is_over
	NOT = { has_country_flag = kaiv_commune_triggered }
	country_exists = GRW
}

    option = {
        name = "Kaiv Commune raises"
        ai_chance = { factor = 1 }
		GRY = {
		set_politics = {
			ruling_party = communism
		}
		set_popularities = {
				democratic = 10
				neutrality = 10
				fascism = 0
				communism = 80
		}
		GRW = { country_event = kaiv_commune.2 }
	}
        start_civil_war = {
            ideology = neutrality
            army_ratio = 0.5
            navy_ratio = 0
            air_ratio = 1
            capital = 592
			keep_all_characters = yes
            states = { 592 610 613 631 612 }
            set_cosmetic_tag = GRY_anti_communist_rebelion
			set_popularities = {
				democratic = 25
				neutrality = 35
				fascism = 25
				communism = 15
			}
			declare_war_on = {
				target = GRW
				type = topple_government
			}
        }
		set_cosmetic_tag = GRY_kaiv_commune
    }
}

country_event = {
	id = kaiv_commune.2
	immediate = {log = "[Root.GetName]: event kaiv_commune.2"}#Auto-logging
	title = "Revolution in Gryphia"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "OUR REVOLUTION IS SPREADING FOWARD COMRRADES!"
		ai_chance = { factor = 1 }
		GRW = {
			puppet = {
				target = GRY
				end_wars = no
			}
		}
	}
}