add_namespace = prywhen_border_war
add_namespace = brodfeld_border_war
add_namespace = gryphia
add_namespace = kaiv_commune

country_event = {
	id = prywhen_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.1"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 590
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.2"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 592
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = brodfeld_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ask for mercy!"
		trigger = {
		GRY = {
			NOT = { has_country_flag = BRF_GRY_mercy_denied }
			}
		}
		GRY = { country_event = brodfeld_border_war.2 }
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 508
		}
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 508
		}
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 385
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Fine, lets give them what they want..."
		trigger = {
		GRY = {
			has_country_flag = BRF_GRY_mercy_denied
		}
		}
		GRY = { country_event = brodfeld_border_war.3 }
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.2"}#Auto-logging
	title = "Brodfeldians ask for mercy"
	desc = prywhen_border_war.2.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Ha! Eat my pants"
		set_country_flag = BRF_GRY_mercy_denied
		ai_chance = { factor = 3 }
	}
	option = {
		name = "Ehh... Maybe we should act easier on them"
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 385
		}
		diplomatic_relation = {
			country = BRF
			relation = non_aggression_pact
			active = yes
		}
		set_country_flag = BRF_GRY_mercy_accepted
		BRF = { country_event = prywhen_border_war.4 }
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "King's offer"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Now we are talking!"
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 385
		}
		diplomatic_relation = {
			country = BRF
			relation = non_aggression_pact
			active = yes
		}
		set_country_flag = BRF_GRY_mercy_accepted
		set_country_flag = BRF_treasures
		BRF = { country_event = brodfeld_border_war.4 }
		ai_chance = { factor = 2 }
	}
	option = {
		name = "Ehhh... Nahhhh... Uhhh..."
		BRF = { country_event = prywhen_border_war.5 }
		ai_chance = { factor = 1 }
	}
}



country_event = {
	id = brodfeld_border_war.4
	immediate = {log = "[Root.GetName]: event prywhen_border_war.4"}#Auto-logging
	title = "Cossacks accept offer"
	desc = prywhen_border_war.4.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Damn those cossacks..."
		trigger = {
		GRY = {
		has_country_flag = BRF_GRY_mercy_denied
		has_country_flag = BRF_GRY_mercy_accepted
		}
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ha, fools!"
		trigger = {
		GRY = {
		has_country_flag = BRF_GRY_mercy_accepted
		NOT = { has_country_flag = BRF_GRY_mercy_denied }
		}
		}
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.5
	immediate = {log = "[Root.GetName]: event prywhen_border_war.5"}#Auto-logging
	title = "Cossacks refuse offer"
	desc = prywhen_border_war.5.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes
	
	option = {
		name = "But... why???"
		ai_chance = { factor = 1 }
	}
}
#########################################

#1007 Rada 
country_event = { 
	id = gryphia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.1"}
	title = gryphia.1.t
	desc = gryphia.1.d

	picture = GFX_event_griffon_para
	is_triggered_only = yes

	option = {
        name = gryphia.1.a
        add_political_power = 30
    }
}

#1008 Rada Kalash retires
country_event = { 
    id = gryphia.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.2"}
    title = gryphia.2.t
    desc = gryphia.2.d
    picture = GFX_event_griffon_para
    is_triggered_only = yes

    trigger = {
        date < 1008.3.1     
        NOT = { has_war = yes } 
        ruling_party = neutrality 
		NOT = { has_country_flag = BRF_treasures }
		
    }
	
    option = {
        name = gryphia.2.a
    }
}

#1008 Rada Kalash stays
country_event = { 
	id = gryphia.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.3"}
	title = gryphia.3.t
	desc = gryphia.3.d

	picture = GFX_event_griffon_para
	is_triggered_only = yes
	
	trigger = {
        date < 1008.3.1     
        NOT = { has_war = yes } 
        ruling_party = neutrality 
		has_country_flag = BRF_treasures
		
    }

	option = {
        name = gryphia.3.a
    }
}

#########################################

#post prywhen civil war communist coup
country_event = {
    id = kaiv_commune.1
    immediate = {
        immediate = {log = "[Root.GetName]: Checking event kaiv_commune.1"}#Auto-logging
        set_country_flag = kaiv_commune_triggered
    }

    title = "Communist coup!"
    desc = kaiv_commune.1.d
    picture = GFX_event_griffon_with_gun

    trigger = {
    tag = GRY
    has_global_flag = prywhen_civil_war_is_over
	NOT = { has_country_flag = kaiv_commune_triggered }
	country_exists = GRW
}

    option = {
        name = "Kaiv Commune raises"
        ai_chance = { factor = 1 }
		GRY = {
		set_politics = {
			ruling_party = communism
		}
		set_popularities = {
				democratic = 10
				neutrality = 10
				fascism = 0
				communism = 80
		}
		GRW = { country_event = kaiv_commune.2 }
	}
        start_civil_war = {
            ideology = neutrality
            army_ratio = 0.5
            navy_ratio = 0
            air_ratio = 1
            capital = 592
			keep_all_characters = yes
            states = { 592 610 613 631 612 }
            set_cosmetic_tag = GRY_anti_communist_rebelion
			set_popularities = {
				democratic = 25
				neutrality = 35
				fascism = 25
				communism = 15
			}
			declare_war_on = {
				target = GRW
				type = topple_government
			}
        }
		set_cosmetic_tag = GRY_kaiv_commune
    }
}

#event for prywhen 
country_event = {
	id = kaiv_commune.2
	immediate = {log = "[Root.GetName]: event kaiv_commune.2"}#Auto-logging
	title = "Revolution in Gryphia"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "OUR REVOLUTION IS SPREADING FOWARD COMRRADES!"
		ai_chance = { factor = 1 }
		GRW = {
			puppet = {
				target = GRY
				end_wars = no
			}
		}
	}
}