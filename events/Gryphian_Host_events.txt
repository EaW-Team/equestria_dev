add_namespace = prywhen_border_war
add_namespace = brodfeld_border_war
add_namespace = gryphia
add_namespace = kaiv_commune

country_event = {
	id = prywhen_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.1"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 590
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.2"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 592
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = prywhen_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 588
		}
		ai_chance = { factor = 0 }
	}
}
##grw raid gry draw ##
country_event = {
	id = prywhen_border_war.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.4"}
	title = Draw
	desc = prywhen_border_war.4.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = Ok
		add_political_power = 10
		army_experience = 5
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 30
				producer = GRW 
			}
			GRW = {
			add_political_power = -10
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -50
				}
			}
		}
	}

#grw raid gry victory 
country_event = {
	id = prywhen_border_war.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.5"}
	title = Victory
	desc = prywhen_border_war.5.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		add_political_power = 40
		army_experience = 15
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 250
				producer = GRW  
			}
			GRW = {
			add_political_power = -20
				random_controlled_state = {
					damage_building = { type = arms_factory damage = 0.20 } 
					damage_building = { type = industrial_complex damage = 0.20 }
					damage_building = { type = infrastructure damage = 0.10 } 
					damage_building = { type = naval_base damage = 0.10 } 
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -300
				}
			}
		}
	}
	
#grw raid gry defeat
	country_event = {
	id = prywhen_border_war.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.6"}
	title = Defeat
	desc = prywhen_border_war.6.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		add_political_power = -100
		add_manpower = -1000
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -30
			}
			GRW = {
			add_political_power = 50
			add_manpower = 500
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 20
					producer = GRY
				}
			}
		}
	}
##grw draw ##
country_event = {
	id = prywhen_border_war.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.7"}
	title = Draw
	desc = prywhen_border_war.7.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = Ok
		}
	}

#grw raid grw victory 
country_event = {
	id = prywhen_border_war.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.8"}
	title = Victory
	desc = prywhen_border_war.8.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		}
	}
	
#grw raid grw defeat
	country_event = {
	id = prywhen_border_war.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event prywhen_border_war.9"}
	title = Defeat
	desc = prywhen_border_war.9.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		}
	}
	
country_event = {
	id = brodfeld_border_war.1
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "Gryphian raid"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Fight the cossacks"
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ask for mercy!"
		trigger = {
		GRY = {
			NOT = { 
				has_country_flag = BRF_GRY_mercy_denied
				has_country_flag = GRY_kalas_retires
				}
			}
		}
		GRY = { country_event = brodfeld_border_war.2 }
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Let them raid we will not be distracted"
		finalize_border_war = {
			attacker_win = yes
			attacker = 597
			defender = 508
		}
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 508
		}
		finalize_border_war = {
			attacker_win = yes
			attacker = 596
			defender = 385
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = "Fine, lets give them what they want..."
		trigger = {
		GRY = {
			has_country_flag = BRF_GRY_mercy_denied
			NOT = { has_country_flag = GRY_kalas_retires }
			}
		}
		GRY = { country_event = brodfeld_border_war.3 }
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.2
	immediate = {log = "[Root.GetName]: event prywhen_border_war.2"}#Auto-logging
	title = "Brodfeldians ask for mercy"
	desc = prywhen_border_war.2.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Ha! Eat my pants"
		set_country_flag = BRF_GRY_mercy_denied
		ai_chance = { factor = 3 }
	}
	option = {
		name = "Ehh... Maybe we should act easier on them"
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 385
		}
		diplomatic_relation = {
			country = BRF
			relation = non_aggression_pact
			active = yes
		}
		set_country_flag = BRF_GRY_mercy_accepted
		BRF = { country_event = prywhen_border_war.4 }
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.3
	immediate = {log = "[Root.GetName]: event prywhen_border_war.3"}#Auto-logging
	title = "King's offer"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Now we are talking!"
		country_event = { days = 7 id = gryphia.3 }
		cancel_border_war = {
			attacker = 597
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 508
		}
		cancel_border_war = {
			attacker = 596
			defender = 385
		}
		diplomatic_relation = {
			country = BRF
			relation = non_aggression_pact
			active = yes
		}
		set_country_flag = BRF_GRY_mercy_accepted
		set_country_flag = GRY_communist_coup_immunity
		BRF = { country_event = brodfeld_border_war.4 }
		ai_chance = { factor = 2 }
	}
	option = {
		name = "Ehhh... Nahhhh... Uhhh..."
		BRF = { country_event = prywhen_border_war.5 }
		ai_chance = { factor = 1 }
	}
}



country_event = {
	id = brodfeld_border_war.4
	immediate = {log = "[Root.GetName]: event prywhen_border_war.4"}#Auto-logging
	title = "Cossacks accept offer"
	desc = prywhen_border_war.4.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "Damn those cossacks..."
		trigger = {
		GRY = {
		has_country_flag = BRF_GRY_mercy_denied
		has_country_flag = BRF_GRY_mercy_accepted
		}
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = "Ha, fools!"
		trigger = {
		GRY = {
		has_country_flag = BRF_GRY_mercy_accepted
		NOT = { has_country_flag = BRF_GRY_mercy_denied }
		}
		}
		ai_chance = { factor = 1 }
	}
}

country_event = {
	id = brodfeld_border_war.5
	immediate = {log = "[Root.GetName]: event prywhen_border_war.5"}#Auto-logging
	title = "Cossacks refuse offer"
	desc = prywhen_border_war.5.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes
	
	option = {
		name = "But... why???"
		ai_chance = { factor = 1 }
	}
}

##brf raid gry draw ##
country_event = {
	id = brodfeld_border_war.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.6"}
	title = Draw
	desc = brodfeld_border_war.6.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = Ok
		add_political_power = 10
		army_experience = 5
		}
	}

#brf raid gry victory 
country_event = {
	id = brodfeld_border_war.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.7"}
	title = Victory
	desc = brodfeld_border_war.7.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		add_political_power = 100
		army_experience = 15
			BRF = {
			add_political_power = -20
				random_controlled_state = {
					damage_building = { type = arms_factory damage = 0.05 } 
					damage_building = { type = industrial_complex damage = 0.05 }
					damage_building = { type = infrastructure damage = 0.05 } 
					damage_building = { type = naval_base damage = 0.05 } 
				}
			}
		}
	}
	
#brf raid gry defeat
	country_event = {
	id = brodfeld_border_war.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.8"}
	title = Defeat
	desc = brodfeld_border_war.8.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		add_political_power = -100
		BRF = {
			add_political_power = 20
		}
	}
}

##brd draw ##
country_event = {
	id = brodfeld_border_war.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.9"}
	title = Draw
	desc = brodfeld_border_war.9.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = Ok
		}
	}

#brf raid brf victory 
country_event = {
	id = brodfeld_border_war.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.10"}
	title = Victory
	desc = brodfeld_border_war.10.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		}
	}
	
#brf raid brf defeat
	country_event = {
	id = brodfeld_border_war.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event brodfeld_border_war.11"}
	title = Defeat
	desc = brodfeld_border_war.11.d
	picture = GFX_event_griffon_soldier
	is_triggered_only = yes

	option = {
		name = ok
		}
	}


#########################################

#1007 Rada 
country_event = { 
	id = gryphia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.1"}
	title = gryphia.1.t
	desc = gryphia.1.d

	picture = GFX_event_griffon_para
	is_triggered_only = yes

	option = {
        name = gryphia.1.a
        add_political_power = 30
    }
}

#1008 Rada Kalas retires
country_event = { 
    id = gryphia.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.2"}
    title = gryphia.2.t
    desc = gryphia.2.d
    picture = GFX_event_griffon_para
    is_triggered_only = yes

    trigger = {
        date < 1008.3.1     
        NOT = { has_war = yes } 
        ruling_party = neutrality 
		NOT = { has_country_flag = GRY_communist_coup_immunity }
		
    }
	
    option = {
        name = gryphia.2.a
		set_country_flag = GRY_kalas_retires
    }
}

#1008 Rada Kalas stays
country_event = { 
	id = gryphia.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event gryphia.3"}
	title = gryphia.3.t
	desc = gryphia.3.d

	picture = GFX_event_griffon_para
	is_triggered_only = yes
	
	trigger = {
        date < 1008.3.1     
        NOT = { has_war = yes } 
        ruling_party = neutrality 
		has_country_flag = GRY_communist_coup_immunity
		
    }

	option = {
        name = gryphia.3.a
		load_focus_tree = GRY_Kalas_Bulba_focus_tree
		complete_national_focus = GRY_Prywhen_campaign2
    }
}

country_event = {
    id = gryphia.4
    title = "[GRY.GetName] offers protection"
    desc = "We are offered to surrender without a fight and become their puppet or prepare for war."
    picture = GFX_event_generic_diplomacy
    is_triggered_only = yes

    option = {
        name = "We submit"
        ai_chance = { factor = 1 }
        GRY = { puppet = LUS }
    }

    option = {
        name = "Let them come!"
        ai_chance = {
            base = 1
            modifier = {
                factor = 10
                has_global_flag = GRY_western_principialities_tend_to_resist
            }
        }
			set_global_flag = GRY_western_principialities_tend_to_resist
            GRY = {
                create_wargoal = {
                    target = LUS
                    type = annex_everything
                }
            }
    }
}

country_event = {
    id = gryphia.5
    title = "[GRY.GetName] offers protection"
    desc = "We are offered to surrender without a fight and become their puppet or prepare for war."
    picture = GFX_event_generic_diplomacy
    is_triggered_only = yes

    option = {
        name = "We submit"
        ai_chance = { factor = 1 }
        GRY = { puppet = BRF }
    }

    option = {
        name = "Let them come!"
        ai_chance = {
            base = 1
            modifier = {
                factor = 10
                has_global_flag = GRY_western_principialities_tend_to_resist
            }
        }
			set_global_flag = GRY_western_principialities_tend_to_resist
            GRY = {
                create_wargoal = {
                    target = BRF
                    type = annex_everything
                }
            }
    }
}
#Flavor event about 1013 guns
country_event = {
    id = gryphia.6
    title = gryphia.6.t
    desc = gryphia.6.d
    is_triggered_only = yes
	
	trigger = {
		has_country_flag = GRY_communist_coup_immunity
		has_government = neutrality
		is_subject = no
		has_tech = advanced_infantry_weapons
	}
	
	fire_only_once = yes

    option = {
        name = gryphia.6.a
    }
}

#########################################

#post prywhen civil war communist coup
country_event = {
    id = kaiv_commune.1
    immediate = {
	log = "[Root.GetName]: Checking event kaiv_commune.1"
	set_global_flag = kaiv_commune_triggered
	}

    title = "Communist coup!"
    desc = kaiv_commune.1.d
    picture = GFX_event_griffon_with_gun
	is_triggered_only = yes
	
    trigger = {
		NOT = { has_global_flag = kaiv_commune_triggered }
		NOT = { has_country_flag = GRY_communist_coup_immunity }
		country_exists = GRW
	}

    option = {
        name = "Kaiv Commune raises"
        ai_chance = { factor = 1 }
		GRY = {
		set_politics = {
			ruling_party = communism
		}
		set_popularities = {
				democratic = 10
				neutrality = 10
				fascism = 0
				communism = 80
		}
		GRW = { country_event = kaiv_commune.2 }
	}
        start_civil_war = {
            ideology = neutrality
            army_ratio = 0.5
            navy_ratio = 0
            air_ratio = 1
            capital = 592
			keep_all_characters = yes
            states = { 592 610 613 631 612 }
            set_cosmetic_tag = GRY_anti_communist_rebelion
			set_popularities = {
				democratic = 25
				neutrality = 35
				fascism = 25
				communism = 15
			}
			declare_war_on = {
				target = GRW
				type = topple_government
			}
        }
		set_cosmetic_tag = GRY_kaiv_commune
    }
	option = {
        name = no
    }
	
}

#event for prywhen 
country_event = {
	id = kaiv_commune.2
	immediate = {log = "[Root.GetName]: event kaiv_commune.2"}#Auto-logging
	title = "Revolution in Gryphia"
	desc = prywhen_border_war.3.d
	picture = GFX_event_griffon_with_gun
	
	is_triggered_only = yes

	option = {
		name = "OUR REVOLUTION IS SPREADING FOWARD COMRRADES!"
		ai_chance = { factor = 1 }
		GRW = {
			puppet = {
				target = GRY
				end_wars = no
			}
		}
	}
}