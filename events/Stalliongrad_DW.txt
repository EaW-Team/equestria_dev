add_namespace = stalliongrad_dark_wing
add_namespace = stalliongrad_dark_wing_reform_stages

# Starting tree #
country_event = {
	# Event about about the motion against Karamelka
	id = stalliongrad_darkwing.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.1" }
	title = stalliongrad_darkwing.1.t
	desc = stalliongrad_darkwing.1.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.1.a
		retire_country_leader = yes
		promote_character = STG_dark_wing
		load_focus_tree = stalliongrad_dark_wing
		complete_national_focus = STG_dark_wing_wins
    }
}

country_event = {
	# Event about DW cleaning up the political arena
	id = stalliongrad_darkwing.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.2" }
	title = stalliongrad_darkwing.2.t
	desc = stalliongrad_darkwing.2.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.2.a
		add_political_power = 100
    }
}

country_event = {
	# Event about DW hiring new military advisors
	id = stalliongrad_darkwing.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.3" }
	title = stalliongrad_darkwing.3.t
	desc = stalliongrad_darkwing.3.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.3.a
		if = {
			limit = { has_character = STG_masha_norushkina }
			retire_character = STG_masha_norushkina
		}
		if = {
			limit = { has_character = STG_nestori_ketola }
			retire_character = STG_nestori_ketola
		}
		if = {
			limit = { has_character = STG_pony_Budyonny }
			retire_character = STG_pony_Budyonny
		}
		if = {
			limit = { has_character = STG_Grom }
			retire_character = STG_Grom
		}
		if = {
			limit = { has_character = STG_alexandra_mistina }
			retire_character = STG_alexandra_mistina
		}
		if = {
			limit = { has_character = STG_danilka }
			retire_character = STG_danilka
		}
		if = {
			limit = { has_character = STG_lightning_dust }
			retire_character = STG_lightning_dust
		}
		if = {
			limit = { has_character = STG_furious_glory }
			retire_character = STG_furious_glory
		}
		custom_effect_tooltip = "TODO Determine which advisors we want"
    }
}

country_event = {
	# Event about expelling the ultras
	id = stalliongrad_darkwing.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.4" }
	title = stalliongrad_darkwing.4.t
	desc = stalliongrad_darkwing.4.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.4.a
		add_ideas = STG_expelled_the_ultras
    }
}

country_event = {
	# Event about the beginning of the stavropon congress
	id = stalliongrad_darkwing.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.5" }
	title = stalliongrad_darkwing.5.t
	desc = stalliongrad_darkwing.5.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.5.a
		add_political_power = 25
    }
}

country_event = {
	# Event about the liberalisation policy
	id = stalliongrad_darkwing.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.6" }
	title = stalliongrad_darkwing.6.t
	desc = stalliongrad_darkwing.6.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.6.a

		custom_effect_tooltip = STG_DW_231_declaration_change_tt
		add_to_variable = {
			var = STG_DW_231_declaration_army_attack
			value = 0.05
			tooltip = army_attack_factor_tt
		}
		add_to_variable = {
			var = STG_DW_231_declaration_volunteer_size
			value = 2
			tooltip = send_volunteer_size_tt
		}

		ai_chance = {
			base = 1
		}
    }

	option = {
		name = stalliongrad_darkwing.6.b
		
		custom_effect_tooltip = STG_DW_231_declaration_change_tt
		add_to_variable = {
			var = STG_DW_231_declaration_army_defence
			value = 0.1
			tooltip = army_defence_factor_tt
		}
		add_to_variable = {
			var = STG_DW_231_declaration_trade_opinion
			value = 0.4
			tooltip = trade_opinion_factor_tt
		}

		ai_chance = {
			base = 1
		}
    }
}

country_event = {
	# Event about the industrial policy
	id = stalliongrad_darkwing.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.7" }
	title = stalliongrad_darkwing.7.t
	desc = stalliongrad_darkwing.7.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.7.a

		custom_effect_tooltip = STG_DW_231_declaration_change_tt
		add_to_variable = {
			var = STG_DW_231_declaration_construction_speed
			value = 0.10
			tooltip = production_speed_buildings_factor_whitespace_tt
		}
		add_to_variable = {
			var = STG_DW_231_declaration_production_growth
			value = 0.15
			tooltip = production_factory_efficiency_gain_factor_whitespace_tt
		}

		ai_chance = {
			base = 1
		}
    }

	option = {
		name = stalliongrad_darkwing.7.b
		
		custom_effect_tooltip = STG_DW_231_declaration_change_tt
		add_to_variable = {
			var = STG_DW_231_declaration_infrastructure_speed
			value = 0.20
			tooltip = production_speed_infrastructure_factor_whitespace_tt
		}
		add_to_variable = {
			var = STG_DW_231_declaration_rail_way_speed
			value = 0.20
			tooltip = production_speed_rail_way_factor_whitespace_tt
		}
		add_to_variable = {
			var = STG_DW_231_declaration_supply_node_speed
			value = 0.20
			tooltip = production_speed_supply_node_factor_whitespace_tt
		}
		every_core_state = {
			limit = {
				is_owned_by = ROOT
				OR = {
					has_state_category = metropolis
					has_state_category = large_town
				}
			}

			add_extra_state_shared_building_slots = 2
		}

		ai_chance = {
			base = 1
		}
    }
}

country_event = {
	# Event about the proclamation of the 231 accords
	id = stalliongrad_darkwing.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.8" }
	title = stalliongrad_darkwing.8.t
	desc = stalliongrad_darkwing.8.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.8.a

		custom_effect_tooltip = STG_DW_231_declaration_final_change_tt
		add_to_variable = {
			var = STG_DW_231_declaration_research_speed
			value = 0.20
			tooltip = research_speed_factor_whitespace_tt
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1.0
			uses = 1
			category = industry
		}
		add_tech_bonus = {
			name = electronics_bonus
			bonus = 1.0
			uses = 1
			category = electronics
		}
		add_dynamic_modifier = {
			modifier = STG_DW_231_declarations
		}
		add_stability = 0.10
    }
}

country_event = {
	# Event about Dark Wing sending a letter to Equestria
	id = stalliongrad_darkwing.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.9" }
	title = stalliongrad_darkwing.9.t
	desc = stalliongrad_darkwing.9.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.9.a
		
		add_opinion_modifier = {
			target = EQS
			modifier = STG_DW_letter_to_EQS
		}
		EQS = {
			country_event = {
				id = stalliongrad_darkwing.10
				days = 3
				random_days = 7
			}
		}
    }
}

country_event = {
	# Event about EQS receiving the letter from Dark Wing
	id = stalliongrad_darkwing.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.10" }
	title = stalliongrad_darkwing.10.t
	desc = stalliongrad_darkwing.10.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.10.a
		
		add_opinion_modifier = {
			target = STG
			modifier = STG_DW_letter_to_EQS
		}
    }
}

country_event = {
	# Event about Twilight arriving in Stalliongrad
	id = stalliongrad_darkwing.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.11" }
	title = stalliongrad_darkwing.11.t
	desc = stalliongrad_darkwing.11.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.11.a
    }
}

country_event = {
	# Event about negociation about Severiyan governement
	id = stalliongrad_darkwing.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.12" }
	title = stalliongrad_darkwing.12.t
	desc = stalliongrad_darkwing.12.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.12.a

		set_temp_variable = { temp_STG_DW_reform_points_increase_value = 40 }
		STG_DW_add_points_f = yes

		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.13
				days = 3
				random_days = 7
			}
		}
    }

	option = {
		name = stalliongrad_darkwing.12.b

		add_stability = 0.05
		add_political_power = 20

		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.13
				days = 3
				random_days = 7
			}
		}
    }
}

country_event = {
	# Event about negociation about development exchange program
	id = stalliongrad_darkwing.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.13" }
	title = stalliongrad_darkwing.13.t
	desc = stalliongrad_darkwing.13.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.13.a

		set_temp_variable = { temp_STG_DW_reform_points_increase_value = 40 }
		STG_DW_add_points_f = yes

		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.14
				days = 3
				random_days = 7
			}
		}
    }

	option = {
		name = stalliongrad_darkwing.13.b

		add_stability = 0.05
		add_political_power = 20
		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.14
				days = 3
				random_days = 7
			}
		}
    }
}

country_event = {
	# Event about negociation about expanding private ownership
	id = stalliongrad_darkwing.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.14" }
	title = stalliongrad_darkwing.14.t
	desc = stalliongrad_darkwing.14.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.14.a

		set_temp_variable = { temp_STG_DW_reform_points_increase_value = 40 }
		STG_DW_add_points_f = yes

		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.15
				days = 3
				random_days = 7
			}
		}
    }

	option = {
		name = stalliongrad_darkwing.14.b

		add_stability = 0.05
		add_political_power = 20
		hidden_effect = {
			country_event = {
				id = stalliongrad_darkwing.15
				days = 3
				random_days = 7
			}
		}
    }
}

country_event = {
	# Event about negociation about reparations
	id = stalliongrad_darkwing.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.15" }
	title = stalliongrad_darkwing.15.t
	desc = stalliongrad_darkwing.15.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.15.a

		set_temp_variable = { temp_STG_DW_reform_points_increase_value = 40 }
		STG_DW_add_points_f = yes
    }

	option = {
		name = stalliongrad_darkwing.15.b

		add_stability = 0.05
		add_political_power = 20
    }
}

country_event = {
	# Event about the end of the negociation
	id = stalliongrad_darkwing.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.16" }
	title = stalliongrad_darkwing.16.t
	desc = stalliongrad_darkwing.16.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.16.a

		every_core_state = {
			limit = {
				is_owned_by = EQS
			}

			transfer_state_to = STG
		}

		mark_focus_tree_layout_dirty = yes
		custom_effect_tooltip = STG_DW_minigame_reform_tree_loading_tt
    }
}



country_event = {
	# Event about Stalliongrad's current view on the Great War
	id = stalliongrad_darkwing.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_darkwing.17" }
	title = stalliongrad_darkwing.17.t
	desc = stalliongrad_darkwing.17.d
	picture = GFX_event_stg_red_army

	is_triggered_only = yes

	option = {
		name = stalliongrad_darkwing.17.a
		# put effects?
		add_dynamic_modifier = {
			modifier = STG_DW_war_natspirit
		}
    }
}

# Reforms level events #
country_event = {
	# Here to avoid meta_effect complaining
	id = stalliongrad_dark_wing_reform_stages.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.0" }
	hidden = yes
	is_triggered_only = yes

	option = {}
}

country_event = {
	id = stalliongrad_dark_wing_reform_stages.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.1" }
	title = stalliongrad_dark_wing_reform_stages.1.t
	desc  = stalliongrad_dark_wing_reform_stages.1.d
	#picture = #TODO
	is_triggered_only = yes

	option = {
		name = stalliongrad_dark_wing_reform_stages.1.a
	}
}

country_event = {
	id = stalliongrad_dark_wing_reform_stages.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.2" }
	title = stalliongrad_dark_wing_reform_stages.2.t
	desc  = stalliongrad_dark_wing_reform_stages.2.d
	#picture = #TODO
	is_triggered_only = yes

	option = {
		name = stalliongrad_dark_wing_reform_stages.2.a
	}
}

country_event = {
	id = stalliongrad_dark_wing_reform_stages.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.3" }
	title = stalliongrad_dark_wing_reform_stages.3.t
	desc  = stalliongrad_dark_wing_reform_stages.3.d
	#picture = #TODO
	is_triggered_only = yes

	option = {
		name = stalliongrad_dark_wing_reform_stages.3.a
	}
}

country_event = {
	id = stalliongrad_dark_wing_reform_stages.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.4" }
	title = stalliongrad_dark_wing_reform_stages.4.t
	desc  = stalliongrad_dark_wing_reform_stages.4.d
	#picture = #TODO
	is_triggered_only = yes

	option = {
		name = stalliongrad_dark_wing_reform_stages.4.a
	}
}

country_event = {
	id = stalliongrad_dark_wing_reform_stages.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event stalliongrad_dark_wing_reform_stages.5" }
	title = stalliongrad_dark_wing_reform_stages.5.t
	desc  = stalliongrad_dark_wing_reform_stages.5.d
	#picture = #TODO
	is_triggered_only = yes

	option = {
		name = stalliongrad_dark_wing_reform_stages.5.a
	}
}
