add_namespace = aestlonianew
add_namespace = aestloniamidgame
add_namespace = aestloniahistorical
add_namespace = aestloniamonarchy
add_namespace = aestloniakelpie
add_namespace = aestloniacoup

country_event = { ############## introductory event
	id = aestlonianew.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.1"}
	title = aestlonia.1.t
	desc = aestlonia.1.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.1.a
		add_political_power = 25
		country_event = { id = aestlonianew.2 days = 5 }
	}
}


country_event = { ############## ripping up the act
	id = aestlonianew.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.2"}
	title = aestlonia.2.t
	desc = aestlonia.2.d
	picture = GFX_event_democratic_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.2.a
		remove_ideas = AES_unity_act_spirit
		set_country_leader_ideology = conservatism

		custom_effect_tooltip = AES_subideology_change
		country_event = { id = aestlonianew.3 days = 2 }

	}
}

country_event = { ############## reaction to getting rid of the act
	id = aestlonianew.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.3"}
	title = aestlonia.3.t
	desc = aestlonia.3.d
	picture = GFX_event_pony_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.3.a
        add_political_power = -10
		add_ideas = AES_volatile_politics
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						storm_alsaqie = { is_political_advisor = yes }
					}
				}
				country_event = { id = aestlonianew.20 days = 3 }
			}
		}
	}
}

country_event = { ############## Golden Sayif visits Zaida 
	id = aestlonianew.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.4"}
	title = aestlonia.4.t
	desc = aestlonia.4.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.4.a
		custom_effect_tooltip = AES_peace_deal_warning
	}
}

country_event = { ############## event about Golden Sayif reacting to badly trained but plentiful recruits
	id = aestlonianew.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.6"}
	title = aestlonia.6.t
	desc = aestlonia.6.d
	picture = GFX_event_pony_soldiers

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.6.a
	}
}

country_event = { ############## event about Golden Sayif reacting to professional soldiers
	id = aestlonianew.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.7"}
	title = aestlonia.7.t
	desc = aestlonia.7.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.7.a
	}
}

country_event = { ############## event about Zaida meeting with the leader of national worker union, Steel Raud
	id = aestlonianew.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.8"}
	title = aestlonia.8.t
	desc = aestlonia.8.d
	picture = GFX_event_old_mine

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.8.a
		custom_effect_tooltip = AES_steel_raud_general_added_intro
		custom_effect_tooltip = AES_steel_raud_general_added
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		hidden_effect = {
			add_corps_commander_role = {
				Character = AES_steel_raud
				skill = 1
				attack_skill = 1
				defense_skill = 1
				planning_skill = 1
				logistics_skill = 1
				desc = "AES_steel_raud_desc"
				traits={ winter_specialist rock_girl pony_race_trait }
			}
		}
	}
}

country_event = { ############## event about ponies from different groups meeting
	id = aestlonianew.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.9"}
	title = aestlonia.9.t
	desc = aestlonia.9.d
	picture = GFX_event_generic_pony_soldier

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.9.a
	}
}

country_event = { ############## event about renaming the last arabic named states to further Aestlonian culture
	id = aestlonianew.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.10"}
	title = aestlonia.10.t
	desc = aestlonia.10.d
	picture = GFX_event_polar_city

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.10.a
		custom_effect_tooltip = AES_zaida_changes_name_tt
		811 = {
			set_state_name = STATE_811_AES
		}
		1017 = {
			set_state_name = STATE_1017_AES
		}
		set_country_leader_name = {
			name = AES_zaida_new_name
		}
		hidden_effect = {
			country_event = {
				id = aestlonianew.34
				days = 2
			}
		}
	}
}

country_event = { ############## event about choosing who to ask help from
	id = aestlonianew.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.11"}
	title = aestlonia.11.t
	desc = aestlonia.11.d
	picture = GFX_event_forest_depression

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.11.a
		add_political_power = 15
		add_stability = 0.05
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		set_country_flag = AES_no_cultist_flag
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestlonia.11.b
		custom_effect_tooltip = AES_golden_angry
		set_country_flag = AES_went_with_cultists
		add_political_power = -15
		add_stability = -0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
}

country_event = { ############## event about the lumetorm pact being signed
	id = aestlonianew.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.12"}
	title = aestlonia.12.t
	desc = aestlonia.12.d
	picture = GFX_event_forest_depression

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.12.a
		add_ideas = AES_the_evil_pact
		add_stability = -0.1
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
		custom_effect_tooltip = AES_storm_alsaqie_general_added_intro
		custom_effect_tooltip = AES_storm_alsaqie_general_added
		hidden_effect = {
			add_corps_commander_role = {
				Character = AES_storm_alsaqie
				skill = 3
				attack_skill = 3
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 2
				desc = "AES_storm_alsaqie_desc"
				traits={ winter_specialist harsh_leader militias_officer pony_race_trait }
			}
		}
		
	}

}

country_event = { ############## Karkad gets asked to surrender
	id = aestlonianew.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.13"}
	title = aestlonia.13.t
	desc = aestlonia.13.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.13.a
		add_political_power = 25
		white_peace = AES
		white_peace = MTO
		if = {
			limit = {
				country_exists = MTO
			}
			MTO = {
				transfer_state = 1003
				transfer_state = 1004
				transfer_state = 797
				transfer_state = 1002
				transfer_state = 214
			}
		}
		AES = {
			transfer_state = 804
			transfer_state = 1022
			transfer_state = 794
			transfer_state = 1023
		}
		ai_chance = { factor = 100 }
		remove_wargoal = {
			type = all
			target = AES
		}
		remove_wargoal = {
			type = all
			target = MTO
		}
	}

	option = {
		name = aestlonia.13.b
		add_political_power = -75
		AES = {
			country_event = {
				id = aestlonianew.14
				days = 1
			}
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Karkad refuses to surrender
	id = aestlonianew.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.14"}
	title = aestlonia.14.t
	desc = aestlonia.14.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.14.a
		add_political_power = -15
	}
	
}

country_event = { ############## event about Vastik Kabja returning from Arabia
	id = aestlonianew.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.15"}
	title = aestlonia.15.t
	desc = aestlonia.15.d
	picture = GFX_event_zebrica_2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.15.a
		army_experience = 10
		set_country_flag = AES_kabja_returned
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = AES_kabja_advisor
		custom_effect_tooltip = available_military_high_command
		show_ideas_tooltip = AES_vastik_high_command
	}
	
}

country_event = { ############## Victory over Karkad (fired by on_actions)
	id = aestlonianew.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.16"}
	title = aestlonia.16.t
	desc = aestlonia.16.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.16.a
		set_country_flag = AES_won_against_karkad
		hidden_effect = {
			else = {
				remove_wargoal = {
					type = all
					target = KAR
				}
			}
			if = {
				limit = {
					has_template = "Miner Militia"
				}
				delete_unit_template_and_units = {
					division_template = "Miner Militia"
					disband = yes 
				}
			}
			if = {
				limit = {
					has_template = "Battalion of Chaos"
				}
				delete_unit_template_and_units = {
					division_template = "Battalion of Chaos"
					disband = yes 
				}
			}
			if = {
				limit = {
					has_template = "Penal Unit"
				}
				delete_unit_template_and_units = {
					division_template = "Penal Unit"
					disband = yes 
				}
			}
			if = {
				limit = {
					has_template = "Equestrian Volunteers"
				}
				delete_unit_template_and_units = {
					division_template = "Equestrian Volunteers"
					disband = yes 
				}
			}

		}
	}
	
}

country_event = { ############## event Equestria receives from Aestlonia, AES asking for any equipment EQS can spare
	id = aestlonianew.17
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.17"}
	title = aestlonia.17.t
	desc = aestlonia.17.d
	picture = GFX_event_pony_trench

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.17.a #guns
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -500
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = -200
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = -75
		}
		AES = {
			country_event = { id = aestlonianew.18 days = 1 }
		}
		ai_chance = { factor = 5 }
	}

	option = {
		name = aestlonia.17.b #volunteers
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -500
		}
		add_manpower = -500
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = -75
		}
		AES = {
			country_event = { id = aestlonianew.30 days = 4 }
		}
		ai_chance = { factor = 10 }
	}

	option = {
		name = aestlonia.17.c #no
		AES = {
			country_event = { id = aestlonianew.19 days = 1 }
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Equestria sends equipment and factory
	id = aestlonianew.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.18"}
	title = aestlonia.18.t
	desc = aestlonia.18.d
	picture = GFX_event_equestrian_ships

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.18.a
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
		    producer = EQS
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = 200
		    producer = EQS
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = 75
		    producer = EQS
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		capital_scope = {
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 1
		}
	}
	
}

country_event = { ############## Equestria refuses to send stuff
	id = aestlonianew.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.19"}
	title = aestlonia.19.t
	desc = aestlonia.19.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.19.a
	}
	
}

country_event = { ############## Cultists attack Zarmarej as a response to the act being ripped up
	id = aestlonianew.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.20"}
	title = aestlonia.20.t
	desc = aestlonia.20.d
	picture = GFX_event_winter_forest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.20.a
		add_political_power = -15
		army_experience = 15
		add_popularity = {
			ideology = fascism
			popularity = -0.05
		}
		save_current_manpower = yes
		1017 = {
			add_manpower = -100
			damage_building = {
			  type = infrastructure
			  damage = 1
			}
		}
		restore_previous_manpower = yes
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestlonia.20.b
		add_stability = -0.1
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Cultists protest the building of roads in the wilderness
	id = aestlonianew.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.21"}
	title = aestlonia.21.t
	desc = aestlonia.21.d
	picture = GFX_event_forest_depression

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.21.a
		add_political_power = 15
		add_popularity = {
			ideology = fascism
			popularity = -0.05
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = aestlonia.21.b
		add_political_power = -30
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Aestlonia gets debuffs after victory event as economy collapses and politics finally collapse on itself
	id = aestlonianew.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.22"}
	title = aestlonia.22.t
	desc = aestlonia.22.d
	picture = GFX_event_winter_sun

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.22.a
		add_ideas = AES_economy_crash
		add_ideas = AES_unstable_politics
	}
	
}


country_event = { ############## warning of war with KAR
	id = aestlonianew.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.23"}
	title = aestlonia.23.t
	desc = aestlonia.23.d
	picture = GFX_event_winter_forest

	is_triggered_only = yes

	option = {
		name = aestlonia.23.a
		if = {
			limit = {
				original_tag = AES
				NOT = {
					has_completed_focus = AES_internal_security
					has_idea = storm_alsaqie
				}
			}
			add_ideas = AES_cultist_opposition
		    activate_mission = AES_cultist_uprising
		}
		if = {
			limit = {
				original_tag = AES
			}
			set_country_flag = AES_imminent_invasion
		}
	}
	
}

country_event = { ############## Zaida meets Kabja
	id = aestlonianew.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.24"}
	title = aestlonia.24.t
	desc = aestlonia.24.d
	picture = GFX_event_winter_forest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.24.a
		custom_effect_tooltip = AES_kabja_general_added_intro
		custom_effect_tooltip = AES_kabja_general_added
		hidden_effect = {
			add_corps_commander_role = {
				character = AES_vastik_kabja
				desc = "AES_vastik_kabja_desc"
				traits = { supply_raider trait_lunatic trait_the_butcher pony_race_trait }
				skill = 3
				attack_skill = 3
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
			}
		}
	}
	
}

country_event = { ############## Event about some city-guy training with the cultists
	id = aestlonianew.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.25"}
	title = aestlonia.25.t
	desc = aestlonia.25.d
	picture = GFX_event_winter_sun

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.25.a
	}
	
}

country_event = { ############## Event about Snowstorm speaking to a crowd
	id = aestlonianew.26
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.26"}
	title = aestlonia.26.t
	desc = aestlonia.26.d
	picture = GFX_event_winter_sun

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.26.a
		add_popularity = {
			ideology = fascism
			popularity = 0.15
		}
	}
	
}

country_event = { ############## Event about choosing between the TBT and the AGWU
	id = aestlonianew.27
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.27"}
	title = aestlonia.27.t
	desc = aestlonia.27.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.27.a
		set_country_flag = AES_went_with_TBT
		add_stability = 0.05
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = aestlonia.27.b
		set_country_flag = AES_went_with_AGWU
		add_political_power = 25
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Event about Zaida visiting her royal guards
	id = aestlonianew.28
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.28"}
	title = aestlonia.28.t
	desc = aestlonia.28.d
	picture = GFX_event_pony_statue

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.28.a
	}
	
}

country_event = { ############## Event about declaring support for freedom and attacking karkad
	id = aestlonianew.29
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.29"}
	title = aestlonia.29.t
	desc = aestlonia.29.d
	picture = GFX_event_speech

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.29.a
		add_war_support = 0.1
		add_ideas = AES_karkad_war_buffs
	}
	
}

country_event = { ############## volunteers from EQS are sent
	id = aestlonianew.30
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.30"}
	title = aestlonia.30.t
	desc = aestlonia.30.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = { #gun
		name = aestlonia.30.a
		custom_effect_tooltip = AES_volunteers_added
		hidden_effect = {
			division_template = {
				name = "Equestrian Volunteers"
				priority = 2
				division_names_group = EQS_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }

					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					artillery = { x = 0 y = 1 }
					recon = { x = 0 y = 2 }
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Equestrian Volunteers\" division_template = \"Equestrian Volunteers\" start_experience_factor = 0.3"
					owner = ROOT
				}
			}
		}
	}
	
}

country_event = { ############## Event about a band of miners wanting to join the army
	id = aestlonianew.31
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.31"}
	title = aestlonia.31.t
	desc = aestlonia.31.d
	picture = GFX_event_old_mine

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.31.a
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		custom_effect_tooltip = AES_miner_militia_spawn_v2_tt
		hidden_effect = {
			division_template = {
				name = "Miner Militia"

				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
				}
			}
			capital_scope = {
				create_unit = {
					division = "division_template = \"Miner Militia\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}
				create_unit = {
					division = "division_template = \"Miner Militia\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}

			}
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = aestlonia.31.b
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Event about Zaida worrying that the people don't see her as their princess
	id = aestlonianew.32
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.32"}
	title = aestlonia.32.t
	desc = aestlonia.32.d
	picture = GFX_event_palace_hall

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.32.a
	}
	
}

country_event = { ############## Event about army coup
	id = aestlonianew.33
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.33"}
	title = aestlonia.33.t
	desc = aestlonia.33.d
	picture = GFX_event_pony_soldiers

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.33.a
		add_political_power = -10
		add_stability = -0.3
		add_popularity = {
			ideology = neutrality
			popularity = 0.25
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}
		hidden_effect = {
			set_country_flag = AES_coup
			country_event = {
				id = aestloniacoup.1
				days = 3
			}
			if = {
				limit = {
					AES_storm_alsaqie = {
						is_corps_commander = yes
					}
				}
				AES_storm_alsaqie = {
					remove_unit_leader_role = yes
				}
			}
			if = {
				limit = {
					AES_tume_koletis = {
						is_corps_commander = yes
					}
				}
				AES_tume_koletis = {
					remove_unit_leader_role = yes
				}
			}
			if = {
				limit = {
					AES_vastik_kabja = {
						is_corps_commander = yes
					}
				}
				AES_vastik_kabja = {
					remove_unit_leader_role = yes
				}
			}
			set_country_flag = AES_no_cultist_flag
		}
	}
	
}

country_event = { ############## Event about Arab resentment
	id = aestlonianew.34
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.34"}
	title = aestlonia.34.t
	desc = aestlonia.34.d
	picture = GFX_event_colthage_street

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.34.a
		add_political_power = -10
		add_ideas = AES_arab_resentment
	}
	
}

country_event = { ############## Event about Lapis crying to Sayif
	id = aestlonianew.35
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonianew.35"}
	title = aestlonia.35.t
	desc = aestlonia.35.d
	picture = GFX_event_pony_statue

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.35.a
		add_stability = -0.02
	}
	
}

country_event = { ############## Event about declaring the republic
	id = aestloniacoup.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.1"}
	title = aestloniacoup.1.t
	desc = aestloniacoup.1.d
	picture = GFX_event_pony_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.1.a
		set_cosmetic_tag = AES_small_republic
		set_party_name = {
			ideology = neutrality
			long_name = AES_neutral_coup_long
			name = AES_neutral_coup
		}
		add_ideas = AES_unhappy_pones
		promote_character = AES_winter_qalam
		custom_effect_tooltip = AES_new_tree
		hidden_effect = {
			load_focus_tree = AES_coup_republic_tree
			country_event = {
				id = aestloniacoup.5
				days = 1
			}
		}
	}
	
}

country_event = { ############## Event about the MRS being established
	id = aestloniacoup.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.2"}
	title = aestloniacoup.2.t
	desc = aestloniacoup.2.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.2.a
		promote_character = AES_alter
		set_party_name = {
			ideology = fascism
			long_name = AES_fascism_hidden_long
			name = AES_fascism_hidden
		}
		hidden_effect = {
			set_country_flag = AES_msr_established
		}
	}
	
}

country_event = { ############## Event about the snow qalam becoming leader of the TBT
	id = aestloniacoup.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.3"}
	title = aestloniacoup.3.t
	desc = aestloniacoup.3.d
	picture = GFX_event_democratic_opposition

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.3.a
		promote_character = AES_snow_qalam
		set_party_name = {
			ideology = democratic
			long_name = AES_democratic_republican_long
			name = AES_democratic_republican
		}
	}
	
}

country_event = { ############## Event about Amza becoming leader of the AGWU
	id = aestloniacoup.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.4"}
	title = aestloniacoup.4.t
	desc = aestloniacoup.4.d
	picture = GFX_event_eqs_communists

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.4.a
		promote_character = AES_amza
		set_party_name = {
			ideology = communism
			name = AES_communism_party
			long_name = AES_communism_republican_long
		}
	}
	
}

country_event = { ############## Event about economy crash, same as regular path
	id = aestloniacoup.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.5"}
	title = aestloniacoup.5.t
	desc = aestloniacoup.5.d
	picture = GFX_event_pony_riot

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.5.a
		add_ideas = AES_economy_crash
		add_ideas = AES_unstable_politics
	}
	
}

country_event = { ############## Event about setting up the future elections and the stakes involved
	id = aestloniacoup.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.6"}
	title = aestloniacoup.6.t
	desc = aestloniacoup.6.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.6.a
		add_ideas = AES_recognition_no
		hidden_effect = {
			country_event = {
				id = aestloniacoup.3
				days = 3
			}
			country_event = {
				id = aestloniacoup.4
				days = 4
			}
			country_event = {
				id = aestloniacoup.7
				days = 5
			}
		}
	}
	
}

country_event = { ############## Event about royal defender offering to coup the government
	id = aestloniacoup.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.7"}
	title = aestloniacoup.7.t
	desc = aestloniacoup.7.d
	picture = GFX_event_palace_hall

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.7.a
		add_popularity = {
			ideology = democratic
			popularity = 0.02
		}
	}
	
}

country_event = { ############## Storm escapes into the woods
	id = aestloniacoup.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.8"}
	title = aestloniacoup.8.t
	desc = aestloniacoup.8.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.8.a
		add_stability = 0.05
		#promote_character = AES_snowstorm
		hidden_effect = {
			country_event = {
				id = aestloniacoup.2
				days = 2
			}
		}
	}
	
}

country_event = { ############## Deciding what the country should be represented by
	id = aestloniacoup.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.9"}
	title = aestloniacoup.9.t
	desc = aestloniacoup.9.d
	picture = GFX_event_ponies_in_battle

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.9.a
		add_stability = 0.1
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestloniacoup.9.b
		add_manpower = 5000
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.9.c
		add_war_support = 0.05
		add_stability = 0.05
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.9.e
		add_war_support = 0.1
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Meeting with Snow Qalam
	id = aestloniacoup.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.10"}
	title = aestloniacoup.10.t
	desc = aestloniacoup.10.d
	picture = GFX_event_polar_forest1

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.10.a
		add_political_power = 15
	}
	
}

country_event = { ############## Meeting with Amza
	id = aestloniacoup.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.11"}
	title = aestloniacoup.11.t
	desc = aestloniacoup.11.d
	picture = GFX_event_bronzhill_communist_party

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.11.a
		add_stability = 0.05
	}
	
}

country_event = { ############## Meeting with Alter
	id = aestloniacoup.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.12"}
	title = aestloniacoup.12.t
	desc = aestloniacoup.12.d
	picture = GFX_event_polar_forest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.12.a
		add_political_power = -15
	}
	
}

country_event = { ############## Golden decides to go it alone
	id = aestloniacoup.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.12"}
	title = aestloniacoup.13.t
	desc = aestloniacoup.13.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.13.a
		add_political_power = 15
	}
	
}

country_event = { ############## Deciding what should happen to arab culture
	id = aestloniacoup.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.14"}
	title = aestloniacoup.14.t
	desc = aestloniacoup.14.d
	picture = GFX_event_zebrica_2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.14.a
		add_political_power = 15
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestloniacoup.14.b
		add_stability = 0.05
		add_manpower = 3000
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.14.c
		add_stability = 0.1
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		hidden_effect = {
			country_event = {
				id = aestloniacoup.19
				days = 3
			}
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.14.e
		add_stability = -0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Event deciding where to go for recognition
	id = aestloniacoup.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.15"}
	title = aestloniacoup.15.t
	desc = aestloniacoup.15.d
	picture = GFX_event_zebrica_2

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.15.a
		trigger = {
			NOT = {
				OR = {
					country_exists = LSP
					EQS = {
						has_government = fascism
					}
				}
			}
			country_exists = EQS
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.02
		}
		country_event = {
			id = aestloniacoup.16
			days = 3
		}
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestloniacoup.15.b
		add_popularity = {
			ideology = communism
			popularity = 0.02
		}
		country_event = {
			id = aestloniacoup.17
			days = 3
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.15.c
		add_popularity = {
			ideology = neutrality
			popularity = 0.02
		}
		country_event = {
			id = aestloniacoup.18
			days = 3
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.15.e
		add_stability = -0.05
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		remove_ideas = AES_recognition_no
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Qalam visits equestria
	id = aestloniacoup.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.16"}
	title = aestloniacoup.16.t
	desc = aestloniacoup.16.d
	picture = GFX_event_luna_nova

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.16.a
		add_political_power = 15
		add_stability = 0.03
		remove_ideas = AES_recognition_no
		add_popularity = {
			ideology = democratic
			popularity = 0.03
		}
		add_opinion_modifier = {
			target = EQS
			modifier = AES_deepened_relations
		}
		EQS = {
			add_opinion_modifier = {
				target = AES
				modifier = AES_deepened_relations
			}
		}
	}
	
}

country_event = { ############## Qalam visits stalliongrad
	id = aestloniacoup.17
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.17"}
	title = aestloniacoup.17.t
	desc = aestloniacoup.17.d
	picture = GFX_event_stalliongrad_tower

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.17.a
		add_political_power = 15
		add_stability = 0.03
		remove_ideas = AES_recognition_no
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		add_opinion_modifier = {
			target = STG
			modifier = AES_deepened_relations
		}
		STG = {
			add_opinion_modifier = {
				target = AES
				modifier = AES_deepened_relations
			}
		}
	}
	
}

country_event = { ############## Qalam visits Macawia
	id = aestloniacoup.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.18"}
	title = aestloniacoup.18.t
	desc = aestloniacoup.18.d
	picture = GFX_event_aris_and_beach

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.18.a
		add_political_power = 15
		add_stability = 0.03
		remove_ideas = AES_recognition_no
		add_popularity = {
			ideology = neutrality
			popularity = 0.03
		}
		add_opinion_modifier = {
			target = MCW
			modifier = AES_deepened_relations
		}
		MCW = {
			add_opinion_modifier = {
				target = AES
				modifier = AES_deepened_relations
			}
		}
	}
	
}

country_event = { ############## Sayif smokes the Hookah
	id = aestloniacoup.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.19"}
	title = aestloniacoup.19.t
	desc = aestloniacoup.19.d
	picture = GFX_event_polar_city

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.19.a
		add_political_power = 5
	}
	
}

country_event = { ############## Event about building trust with the people
	id = aestloniacoup.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.20"}
	title = aestloniacoup.20.t
	desc = aestloniacoup.20.d
	picture = GFX_event_pony_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.20.a
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestloniacoup.20.b
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.20.c
		add_popularity = {
			ideology = neutrality
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	option = {
		name = aestloniacoup.20.e
		add_popularity = {
			ideology = fascism
			popularity = 0.05
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Sayif remembers to give attention to the new territories
	id = aestloniacoup.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.21"}
	title = aestloniacoup.21.t
	desc = aestloniacoup.21.d
	picture = GFX_event_unicorn_worker

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.21.a
		add_stability = 0.02
	}
	
}

country_event = { ############## Sayif meets Pinekabi
	id = aestloniacoup.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.22"}
	title = aestloniacoup.22.t
	desc = aestloniacoup.22.d
	picture = GFX_event_forest_cabin

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.22.a
		set_country_flag = AES_sayif_met_pinekabi
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = AES_pinekabi_advisor
		custom_effect_tooltip = available_military_high_command
		show_ideas_tooltip = AES_pinekabi_high_command
		custom_effect_tooltip = AES_pinekabi_general_added_intro
		custom_effect_tooltip = AES_pinekabi_general_added
		hidden_effect = {
			add_corps_commander_role = {
				character = AES_pinekabi
				desc = "AES_pinekabi_desc"
				traits = { KIR_guerilla_leader bleeding_heart pony_race_trait }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}

		}

	}
	
}

country_event = { ############## Event about the election
	id = aestloniacoup.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniacoup.23"}
	title = aestloniacoup.23.t
	desc = aestloniacoup.23.d
	picture = GFX_event_vote_pony

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniacoup.23.a
		set_politics = {
            ruling_party = democratic
            elections_allowed = no
        }
		trigger = {
            check_variable = { 
                highest_party_popularity = party_popularity@democratic #Snow Qalam elected
            }
		}
        custom_effect_tooltip = AES_high_democracy_tt
		set_country_flag = AES_election_happened
	}
	option = {
		name = aestloniacoup.23.b
		trigger = {
            check_variable = { 
                highest_party_popularity = party_popularity@communism #Amza elected
            }
        }
		custom_effect_tooltip = AES_high_communism_tt
		set_politics = {
            ruling_party = communism
            elections_allowed = no
        }
		set_country_flag = AES_election_happened

	}
	option = {
		name = aestloniacoup.23.c
		trigger = {
            check_variable = { 
                highest_party_popularity = party_popularity@neutrality #Alter elected
            }
        }
		custom_effect_tooltip = AES_high_neutrality_tt
		add_stability = 0.05
		set_country_flag = AES_election_happened
		custom_effect_tooltip = AES_new_tree
		hidden_effect = {
			load_focus_tree = AES_sayif_part_one
		}
	}
	option = {
		name = aestloniacoup.23.e
		trigger = {
            check_variable = { 
                highest_party_popularity = party_popularity@fascism #Alter elected
            }
        }
		custom_effect_tooltip = AES_high_fascism_tt
		set_politics = {
            ruling_party = fascism
            elections_allowed = no
        }
		set_country_flag = AES_election_happened
	}
	
}

##### shared army tree events #####

country_event = { ############## Choosing air production type
	id = aestloniahistorical.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniahistorical.2"}
	title = aestloniahistorical.2.t
	desc = aestloniahistorical.2.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Light Airframes
		name = aestloniahistorical.2.a
		add_tech_bonus = {
			name = fighter_bonus
			bonus = 1.0
			uses = 3
			category = light_air
		}
		add_ideas = AES_light_plane_production
	}
	option = { # Medium Airframes
		name = aestloniahistorical.2.b
		add_tech_bonus = {
			name = tactical_bomber_bonus
			bonus = 1.0
			uses = 3
			category = medium_air
		}
		add_ideas = AES_medium_plane_production
	}
	option = { # Heavy Airframes
		name = aestloniahistorical.2.c
		add_tech_bonus = {
			name = strat_bomber_bonus
			bonus = 1.0
			uses = 3
			category = heavy_air
		}
		add_ideas = AES_heavy_plane_production
	}
	
}


country_event = { ############## Choosing naval production type
	id = aestloniahistorical.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniahistorical.3"}
	title = aestloniahistorical.3.t
	desc = aestloniahistorical.3.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Small Ships
		name = aestloniahistorical.3.a
		add_tech_bonus = {
			name = destroyer_bonus
			bonus = 1.0
			uses = 3
			category = dd_tech
			category = cl_tech
		}
	}
	option = { # Big Ships
		name = aestloniahistorical.3.b
		add_tech_bonus = {
			name = battleship_bonus
			bonus = 1.0
			uses = 3
			category = ca_tech
			category = bc_tech
			category = bb_tech
			category = cv_tech
		}
	}
	option = { # Subs
		name = aestloniahistorical.3.c
		add_tech_bonus = {
			name = submarine_bonus
			bonus = 1.0
			uses = 3
			category = ss_tech
			category = naval_mines
		}
	}
	
}

#### midgame monarchy kept tree ####

country_event = { ############## first monarchist tree event, talking about the great victory
	id = aestloniamonarchy.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.1"}
	title = aestloniamonarchy.1.t
	desc = aestloniamonarchy.1.d
	picture = GFX_event_luna_nova

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.1.a
	}
	
}

country_event = { ############## event that adds Pinekabi
	id = aestloniamonarchy.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.2"}
	title = aestloniamonarchy.2.t
	desc = aestloniamonarchy.2.d
	picture = GFX_event_forest_cabin

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.2.a
		set_country_flag = AES_sayif_met_pinekabi
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = AES_pinekabi_advisor
		custom_effect_tooltip = available_military_high_command
		show_ideas_tooltip = AES_pinekabi_high_command
		custom_effect_tooltip = AES_pinekabi_general_added_intro
		custom_effect_tooltip = AES_pinekabi_general_added
		hidden_effect = {
			add_corps_commander_role = {
				character = AES_pinekabi
				desc = "AES_pinekabi_desc"
				traits = { KIR_guerilla_leader bleeding_heart pony_race_trait }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}

		}
	}
	
}

country_event = { ############## dockyard workers hear kelpies
	id = aestloniamonarchy.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.3"}
	title = aestloniamonarchy.3.t
	desc = aestloniamonarchy.3.d
	picture = GFX_event_something_in_the_water

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.3.a
		add_political_power = 15
	}

	option = {
		name = aestloniamonarchy.3.b
		add_stability = -0.02
		hidden_effect = {
			country_event = { id = aestloniakelpie.1 days = 1 }
			hidden_effect = {
				clr_country_flag = AES_as_usual
			}
		}
	}
	
}

country_event = { ############## choosing which side to go in advisory
	id = aestloniamonarchy.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.4"}
	title = aestloniamonarchy.4.t
	desc = aestloniamonarchy.4.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.4.a
		set_country_flag = AES_harmonic_advisory
		add_popularity = {
			ideology = democratic
			popularity = 0.05
		}
	}

	option = {
		name = aestloniamonarchy.4.b
		set_country_flag = AES_commie_advisory 
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
	}
	
}

country_event = { ############## choosing to either go Maregyptian or not
	id = aestloniamonarchy.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.5"}
	title = aestloniamonarchy.5.t
	desc = aestloniamonarchy.5.d
	picture = GFX_event_pyramid

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.5.a
		set_country_flag = AES_stayed_the_course
		add_stability = 0.05
		add_popularity = {
			ideology = democratic
			popularity = 0.03
		}
	}

	option = {
		name = aestloniamonarchy.5.b
		set_country_flag = AES_aesgyptian_movement
		add_political_power = -50
		add_stability = -0.15
		add_popularity = {
			ideology = democratic
			popularity = -0.05
		}
	}
	
}

country_event = { ############## event talking about snowstorm not being arrested
	id = aestloniamonarchy.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.6"}
	title = aestloniamonarchy.6.t
	desc = aestloniamonarchy.6.d
	picture = GFX_event_polar_forest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.6.a
	}
}

country_event = { ############## event about Zaida meeting Ntrom
	id = aestloniamonarchy.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.7"}
	title = aestloniamonarchy.7.t
	desc = aestloniamonarchy.7.d
	picture = GFX_event_medieval_city_winter

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.7.a
		#activate_advisor = AES_ntrom
		#set_can_be_fired_in_advisor_role = {
		#	character = AES_ntrom
		#	value = no
		#}
		set_party_name = {
			ideology = democratic
			long_name = AES_democratic_aesgypt_long
			name = AES_democratic_aesgypt
		}
	}
}

country_event = { ############## event about Zaida meeting Ntrom
	id = aestloniamonarchy.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniamonarchy.8"}
	title = aestloniamonarchy.8.t
	desc = aestloniamonarchy.8.d
	picture = GFX_event_palace_hall

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniamonarchy.8.a
		#promote_character = AES_prince
		#activate_advisor = AES_prince
		#set_can_be_fired_in_advisor_role = {
		#	character = AES_prince
		#	value = no
		#}
		set_party_name = {
			ideology = neutrality
			long_name = AES_neutrality_aesgypt_long
			name = AES_neutrality_aesgypt
		}
	}
}


#### Kelpie events ####

country_event = { ############## first kelpie event, before the tree unlocks
	id = aestloniakelpie.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniakelpie.1"}
	title = aestloniakelpie.1.t
	desc = aestloniakelpie.1.d
	picture = GFX_event_aris_and_beach

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniakelpie.1.a
		country_event = {
			id = aestloniakelpie.2
			days = 1
		}

	}
	
}

country_event = { ############## second kelpie event, where the queen introduces herself
	id = aestloniakelpie.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniakelpie.2"}
	title = aestloniakelpie.2.t
	desc = aestloniakelpie.2.d
	picture = GFX_event_shore

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniakelpie.2.a
		country_event = {
			id = aestloniakelpie.3
			days = 1
		}
	}
	
}

country_event = { ############## third kelpie event, where the queen makes the offer
	id = aestloniakelpie.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestloniakelpie.3"}
	title = aestloniakelpie.3.t
	desc = aestloniakelpie.3.d
	picture = GFX_event_seaquestriaruin

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestloniakelpie.3.a
		add_popularity = {
			ideology = neutrality
			popularity = 0.2
		}
		set_party_name = {
			ideology = neutrality
			long_name = AES_kelpie_party_long
			name = AES_kelpie_party
		}
		promote_character = AES_kelpie_queen

		add_naval_commander_role = {
			character = AES_kelpie_queen_navy
			traits = { blue_water_expert naval_lineage } #add a kelpie_race_trait later

			skill = 4
			attack_skill = 3
			defense_skill = 3
			maneuvering_skill = 3
			coordination_skill = 4
		}
		activate_advisor = AES_kelpie_queen_advisor
		set_can_be_fired_in_advisor_role = {
			character = AES_kelpie_queen
			value = no
		}
		custom_effect_tooltip = AES_new_tree
		if = {
			limit = {
				NOT = {
					has_completed_focus = AES_curtail_cultist_presence
				}
			}
			complete_national_focus = AES_curtail_cultist_presence
		}
		hidden_effect = {
			load_focus_tree = AES_kelpie_tree
			set_country_flag = AES_found_kelpie_queen
		}
	}
	
}
