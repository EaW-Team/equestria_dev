add_namespace = aestlonia

country_event = { ############## introductory event
	id = aestlonia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.1"}
	title = aestlonia.1.t
	desc = aestlonia.1.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.1.a
		add_political_power = 25
	}
}


country_event = { ############## ripping up the act
	id = aestlonia.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.2"}
	title = aestlonia.2.t
	desc = aestlonia.2.d
	picture = GFX_event_democratic_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.2.a
		remove_ideas = AES_unity_act_spirit
		set_country_leader_ideology = conservatism

		custom_effect_tooltip = AES_subideology_change
		country_event = aestlonia.3

	}
}

country_event = { ############## reaction to getting rid of the act
	id = aestlonia.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.3"}
	title = aestlonia.3.t
	desc = aestlonia.3.d
	picture = GFX_event_democratic_protest

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.3.a
        add_political_power = -10
	}
}

country_event = { ############## Golden Sayif visits Zaida 
	id = aestlonia.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.4"}
	title = aestlonia.4.t
	desc = aestlonia.4.d
	picture = GFX_event_exu_news

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.4.a
		country_event = aestlonia.5
	}
}

country_event = { ############## event deciding if Aestlonia will be on the defensive or will attack Karkad
	id = aestlonia.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.5"}
	title = aestlonia.5.t
	desc = aestlonia.5.d
	picture = GFX_event_pony_soldiers

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.5.a
		add_political_power = 50
		add_stability = 0.1
		custom_effect_tooltip = AES_focus_warning_preparation_tree
		custom_effect_tooltip = AES_peace_deal_warning
		complete_national_focus = AES_wait_for_them
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestlonia.5.b
		custom_effect_tooltip = AES_focus_warning_preparation_tree
		custom_effect_tooltip = AES_peace_deal_warning
		custom_effect_tooltip = AES_emergency_troops_spawn
		complete_national_focus = AES_taking_our_chances
		set_country_flag = AES_attack_first
		hidden_effect = {
			division_template = {
				name = "Emergency Battalion"
				force_allow_recruiting = yes
				is_locked = no

				regiments = {
					infantry = { x = 0 y = 0 }
		            infantry = { x = 0 y = 1 }
		            infantry = { x = 0 y = 2 }
		            infantry = { x = 1 y = 0 }
				}
			}
			capital_scope = {
				create_unit = {
					division = "division_template = \"Emergency Battalion\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}
				create_unit = {
					division = "division_template = \"Emergency Battalion\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}
				create_unit = {
					division = "division_template = \"Emergency Battalion\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}
				create_unit = {
					division = "division_template = \"Emergency Battalion\" start_experience_factor = 0 start_equipment_factor = 1.0"
					OWNER = ROOT
				}

			}
			country_event = aestlonia.9
		}
		ai_chance = { factor = 0 }
	}
}

country_event = { ############## event about Golden Sayif reacting to badly trained but plentiful recruits
	id = aestlonia.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.6"}
	title = aestlonia.6.t
	desc = aestlonia.6.d
	picture = GFX_event_pony_soldiers

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.6.a
	}
}

country_event = { ############## event about Golden Sayif reacting to professional soldiers
	id = aestlonia.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.7"}
	title = aestlonia.7.t
	desc = aestlonia.7.d
	picture = GFX_event_pony_soldiers_sunset

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.7.a
	}
}

country_event = { ############## event about Zaida meeting with the leader of national worker union, Steel Raud
	id = aestlonia.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.8"}
	title = aestlonia.8.t
	desc = aestlonia.8.d
	picture = GFX_event_old_mine

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.8.a
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
	}
}

country_event = { ############## event about deciding if Aestlonia should ask Maretonia for help against the war with Karkad
	id = aestlonia.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.9"}
	title = aestlonia.9.t
	desc = aestlonia.9.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.9.a
		MTO = {
			country_event = aestlonia.10
		}
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestlonia.9.b
		set_country_flag = AES_maretonia_refused
		activate_mission = AES_war_timer
		custom_effect_tooltip = AES_35_days_warning
		ai_chance = { factor = 0 }
	}
}

country_event = { ############## event Maretonia receives, asking if they want to join the pre-emptive attack against Karkad
	id = aestlonia.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.10"}
	title = aestlonia.10.t
	desc = aestlonia.10.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.10.a
		AES = {
			country_event = aestlonia.11
		}
		custom_effect_tooltip = AES_35_days_warning
		ai_chance = { factor = 100 }
	}
	option = {
		name = aestlonia.10.b
		AES = {
			country_event = aestlonia.12
		}
		ai_chance = { factor = 0 }
	}
}

country_event = { ############## Maretonia accepts to help
	id = aestlonia.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.11"}
	title = aestlonia.11.t
	desc = aestlonia.11.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.11.a
		add_political_power = 25
		custom_effect_tooltip = AES_35_days_warning
		set_country_flag = AES_maretonia_accepted
		activate_mission = AES_war_timer_v2
	}
	
}

country_event = { ############## Maretonia refuses to help
	id = aestlonia.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.12"}
	title = aestlonia.12.t
	desc = aestlonia.12.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.12.a
		add_political_power = -15
		custom_effect_tooltip = AES_35_days_warning
		set_country_flag = AES_maretonia_refused
		activate_mission = AES_war_timer
	}
	
}

country_event = { ############## Karkad gets asked to surrender in the defensive path for Aestlonia
	id = aestlonia.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.13"}
	title = aestlonia.13.t
	desc = aestlonia.13.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.13.a
		add_political_power = 25
		white_peace = AES
		white_peace = MTO
		AES = {
			transfer_state = 804
			transfer_state = 1022
			transfer_state = 794
			transfer_state = 1023
		}
		MTO = {
			transfer_state = 1003
			transfer_state = 1004
			transfer_state = 797
			transfer_state = 1002
			transfer_state = 214
		}
		ai_chance = { factor = 100 }
		remove_wargoal = {
			type = all
			target = AES
		}
		remove_wargoal = {
			type = all
			target = MTO
		}
	}

	option = {
		name = aestlonia.13.b
		add_political_power = -75
		AES = {
			country_event = aestlonia.14
		}
		ai_chance = { factor = 0 }
	}
	
}

country_event = { ############## Karkad refuses to surrender
	id = aestlonia.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.14"}
	title = aestlonia.14.t
	desc = aestlonia.14.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.14.a
		add_political_power = -15
	}
	
}

country_event = { ############## Karkad gets asked to surrender in the offensive path for Aestlonia
	id = aestlonia.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.15"}
	title = aestlonia.13.t
	desc = aestlonia.15.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.13.a
		add_political_power = 25
		if = {
			limit = {
				AES = {
					has_country_flag = AES_maretonia_accepted
				}
			}
			white_peace = AES
			white_peace = MTO
			AES = {
				transfer_state = 804
				transfer_state = 1022
				transfer_state = 794
				transfer_state = 1023
			}
			MTO = {
				transfer_state = 1003
				transfer_state = 1004
				transfer_state = 797
				transfer_state = 1002
				transfer_state = 214
			}
			remove_wargoal = {
				type = all
				target = AES
			}
			remove_wargoal = {
				type = all
				target = MTO
			}
		}
		else = {
			white_peace = AES
			AES = {
				transfer_state = 804
				transfer_state = 1022
				transfer_state = 794
				transfer_state = 1023
			}
			remove_wargoal = {
				type = all
				target = AES
			}
		}
		ai_chance = { factor = 100 }
	}

	option = {
		name = aestlonia.13.b
		add_political_power = -75
		AES = {
			country_event = aestlonia.14
		}
		ai_chance = { factor = 0 }
	}
	
}


country_event = { ############## Victory over Karkad (fired by on_actions)
	id = aestlonia.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event aestlonia.16"}
	title = aestlonia.16.t
	desc = aestlonia.16.d
	picture = GFX_event_generic_pony_diplomacy

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = aestlonia.16.a
		complete_national_focus = AES_righteous_victory
		load_focus_tree = AES_postwar_tree
		hidden_effect = {
			if = {
				limit = {
					AES = {
						has_country_flag = AES_maretonia_accepted
					}
				}
				remove_wargoal = {
					type = all
					target = KAR
				}
				MTO = {
					remove_wargoal = {
						type = all
						target = KAR
					}
				}
			}
			else = {
				remove_wargoal = {
					type = all
					target = KAR
				}
			}
		}
	}
	
}
