add_namespace = fillydelphia_civil ## Civil war events
add_namespace = fillydelphia_general ## Post-civil war/general events
add_namespace = fillydelphia_elections ## Election and candidate related events
add_namespace = fillydelphia_starlight_manesix ## Starlight Glimmer and M6 events


### CIVIL WAR EVENTS

	country_event = { #Fillydelphia Revolt
		id = fillydelphia_civil.1
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.1"}
		title = fillydelphia_civil.1.t
		desc = fillydelphia_civil.1.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.1.a
			create_dynamic_country = {
				original_tag = EQS
				set_AI_strategies_on_every_possible_country_delayed = yes
				set_research_slots = 3
				every_state = {
					limit = {
						OR = {
							state = 12
						}
					}
					transfer_state_to = PREV
					add_core_of = PREV
				}
				set_cosmetic_tag = EQS_FLY
				set_country_flag = FLY_filldelphia
				every_possible_country = {
					limit = {
						has_character = FLY_republican_council
					}
					FLY_republican_council = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_terrorists
					}
					FLY_terrorists = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_nopony
					}
					FLY_nopony = {
						set_nationality = PREV.PREV
					}
				}
				promote_character = {
					character = FLY_republican_council
					ideology = liberalism
				}
				promote_character = {
					character = FLY_terrorists
					ideology = falangism
				}
				promote_character = {
					character = FLY_nopony
					ideology = leninism
				}
				promote_character = {
					character = FLY_nopony
					ideology = centrism
				}
				add_ideas = no_poverty
				add_ideas = modern_society
				add_ideas = no_lack_of_scientists
				add_ideas = proper_science_base
				add_ideas = pony_race
				set_party_name = {
					ideology = democratic
					long_name = FLY_harmony_party_long
					name = FLY_harmony_party
				}
				set_party_name = {
					ideology = fascism
					long_name = FLY_fascist_civil_party_long
					name = FLY_fascist_civil_party
				}
				set_party_name = {
					ideology = communism
					long_name = FLY_communist_civil_party_long
					name = FLY_communist_civil_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = FLY_neutrality_civil_party_long
					name = FLY_neutrality_civil_party
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				set_stability = 0.25
				set_war_support = 0.25
				set_popularities = {
					democratic = 15
					fascism = 30
					communism = 10
					neutrality = 55
				}
				load_focus_tree = { tree = FLY_wartime_tree keep_completed = yes }
				set_capital = {
					state = 12
				}
			}
			FLY = {
				set_variable = {
					var = FLY_legitimacy
					value = 0
				}
				set_variable = {
					var = FLY_legitimacy_max
					value = 20
				}
				add_timed_idea = {
					idea = FLY_legitimacy_starting_timed_bonus
					days = 120
				}
				set_country_flag = FLY_filldelphia_legitimacy_active
				complete_national_focus = FLY_birth_of_republic
				country_event = {
					id = fillydelphia_civil.2
					hours = 1
				}
			}
		}
		option = {
			name = fillydelphia_civil.1.b
			create_dynamic_country = {
				original_tag = EQS
				set_AI_strategies_on_every_possible_country_delayed = yes
				set_research_slots = 3
				every_state = {
					limit = {
						OR = {
							state = 12
						}
					}
					transfer_state_to = PREV
					add_core_of = PREV
				}
				set_cosmetic_tag = EQS_FLY
				set_country_flag = FLY_filldelphia
				every_possible_country = {
					limit = {
						has_character = FLY_republican_council
					}
					FLY_republican_council = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_terrorists
					}
					FLY_terrorists = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_nopony
					}
					FLY_nopony = {
						set_nationality = PREV.PREV
					}
				}
				promote_character = {
					character = FLY_republican_council
					ideology = liberalism
				}
				promote_character = {
					character = FLY_terrorists
					ideology = falangism
				}
				promote_character = {
					character = FLY_nopony
					ideology = leninism
				}
				promote_character = {
					character = FLY_nopony
					ideology = centrism
				}
				add_ideas = no_poverty
				add_ideas = modern_society
				add_ideas = no_lack_of_scientists
				add_ideas = proper_science_base
				add_ideas = pony_race
				set_party_name = {
					ideology = democratic
					long_name = FLY_harmony_party_long
					name = FLY_harmony_party
				}
				set_party_name = {
					ideology = fascism
					long_name = FLY_fascist_civil_party_long
					name = FLY_fascist_civil_party
				}
				set_party_name = {
					ideology = communism
					long_name = FLY_communist_party_civil_long
					name = FLY_communist_civil_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = FLY_neutrality_party_civil_long
					name = FLY_neutrality_civil_party
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				set_stability = 0.25
				set_war_support = 0.25
				set_popularities = {
					democratic = 15
					fascism = 30
					communism = 10
					neutrality = 55
				}
				load_focus_tree = { tree = FLY_wartime_tree keep_completed = yes }
				set_capital = {
					state = 12
				}
			}
			FLY = {
				set_variable = {
					var = FLY_legitimacy
					value = 0
				}
				set_variable = {
					var = FLY_legitimacy_max
					value = 20
				}
				set_country_flag = FLY_filldelphia_legitimacy_active
				add_timed_idea = {
					idea = FLY_legitimacy_starting_timed_bonus
					days = 120
				}
				complete_national_focus = FLY_birth_of_republic
				country_event = {
					id = fillydelphia_civil.2
					hours = 1
				}
			}
			FLY = { change_tag_from = ROOT }
		}
	}

	country_event = { #Introduction to the Legitimacy System
		id = fillydelphia_civil.2
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.2"}
		title = fillydelphia_civil.2.t
		desc = fillydelphia_civil.2.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.2.a
			custom_effect_tooltip = FLY_explain_legitimacy
		}
	}

	country_event = { #Choose Flag
		id = fillydelphia_civil.4
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.4"}
		title = fillydelphia_civil.4.t
		desc = fillydelphia_civil.4.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = { ### regular tricolour
			name = fillydelphia_civil.4.a
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_1
			}
		}
		option = { ### tricolour with three tribes coa
			name = fillydelphia_civil.4.b
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_1
			}
		}
		option = { ### tricolour with four tribes coa
			name = fillydelphia_civil.4.c
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_1
			}
		}
	}
	
	country_event = { #Choose Wartime Leader
		id = fillydelphia_civil.5
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.5"}
		title = fillydelphia_civil.5.t
		desc = fillydelphia_civil.5.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = { ### Lyra Heartstrings
			name = fillydelphia.5.a
			add_to_variable = {
                FLY_lyra_influence = 1
            }
		}
		option = { ### Cirrus Cloud
			name = fillydelphia.5.b
			add_to_variable = {
                FLY_cirrus_influence = 1
            }
		}
	}

### POST-CIVIL WAR/GENERAL EVENTS


### ELECTION AND CANDIDATE EVENTS


### STARLIGHT GLIMMER AND M6 EVENTS

	country_event = { # Starlight Glimmer arrives
	id = fillydelphia_starlight_manesix.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_starlight_manesix.1"}
	title = fillydelphia_starlight_manesix.1.t
	desc = fillydelphia_starlight_manesix.1.d

	picture = GFX_event_canterlot
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = fillydelphia_starlight_manesix.1.a
		### add custom effect explaining Starlight's plan to unite the M6
	}
}