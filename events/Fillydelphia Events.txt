add_namespace = fillydelphia_civil ## Civil war events
add_namespace = fillydelphia_general ## Post-civil war/general events
add_namespace = fillydelphia_elections ## Election related events
add_namespace = fillydelphia_manesix ## M6 and side cast events


### CIVIL WAR EVENTS

	country_event = { #Fillydelphia Revolt
		id = fillydelphia_civil.1
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.1"}
		title = fillydelphia_civil.1.t
		desc = fillydelphia_civil.1.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.1.a
			create_dynamic_country = {
				original_tag = EQS
				set_AI_strategies_on_every_possible_country_delayed = yes
				set_research_slots = 3
				every_state = {
					limit = {
						OR = {
							state = 12
						}
					}
					transfer_state_to = PREV
					add_core_of = PREV
				}
				set_cosmetic_tag = EQS_FLY
				set_country_flag = FLY_filldelphia
				every_possible_country = {
					limit = {
						has_character = FLY_republican_council
					}
					FLY_republican_council = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_terrorists
					}
					FLY_terrorists = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_nopony
					}
					FLY_nopony = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_spearhead
					}
					FLY_spearhead = {
						add_corps_commander_role = {
							desc = FLY_spearhead_desc
							traits = { pony_race_trait vigilant_sentinel organizer }
							skill = 2
							attack_skill = 3
							defense_skill = 2
							planning_skill = 1
							logistics_skill = 2
							legacy_id = -1
						}
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_word_filter
					}
					FLY_word_filter = {
						add_corps_commander_role = {
							desc = FLY_word_filter_desc
							traits = { pony_race_trait media_personality determined_innovator }
							skill = 2
							attack_skill = 2
							defense_skill = 3
							planning_skill = 2
							logistics_skill = 1
							legacy_id = -1
						}
						set_nationality = PREV.PREV
					}
				}
				add_country_leader_role = {
					character = FLY_republican_council
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = liberalism
					}
				}
				add_country_leader_role = {
					character = FLY_terrorists
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = falangism
					}
				}
				add_country_leader_role = {
					character = FLY_nopony
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = leninism
					}
				}
				add_country_leader_role = {
					character = FLY_nopony
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = centrism
					}
				}
				add_ideas = war_economy
				add_ideas = no_poverty
				add_ideas = modern_society
				add_ideas = no_lack_of_scientists
				add_ideas = proper_science_base
				add_ideas = pony_race
				set_party_name = {
					ideology = democratic
					long_name = FLY_harmony_party_long
					name = FLY_harmony_party
				}
				set_party_name = {
					ideology = fascism
					long_name = FLY_fascist_civil_party_long
					name = FLY_fascist_civil_party
				}
				set_party_name = {
					ideology = communism
					long_name = FLY_communist_civil_party_long
					name = FLY_communist_civil_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = FLY_neutrality_civil_party_long
					name = FLY_neutrality_civil_party
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				set_stability = 0.25
				set_war_support = 0.25
				set_popularities = {
					democratic = 15
					fascism = 25
					communism = 10
					neutrality = 50
				}
				load_focus_tree = { tree = FLY_wartime_tree keep_completed = yes }
				set_capital = {
					state = 12
				}
			}
			every_state = {
				limit = {
					NOT = {
						state = 12
					}
					OR = {
						is_core_of = EQS
						is_claimed_by = EQS
						is_core_of = NLR
						is_claimed_by = NLR
					}						
				}
				remove_core_of = FLY
				add_claim_by = FLY
			}
			FLY = {
				add_equipment_to_stockpile = {
					type = infantry_equipment_1
					amount = 750
					producer = EQS
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 50
					producer = EQS
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 75
					producer = EQS
				}
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 5
					producer = EQS
				}
				delete_unit_template_and_units = { division_template = "Armored-Division" }
				delete_unit_template_and_units = { division_template = "Pegasus Shock Unit" }
				load_oob = "FLY_civil_war"
				set_variable = {
					var = FLY_legitimacy
					value = 0
				}
				set_variable = {
					var = FLY_legitimacy_max
					value = 20
				}
				add_timed_idea = {
					idea = FLY_legitimacy_starting_timed_bonus
					days = 120
				}
				set_country_flag = FLY_filldelphia_legitimacy_active
				complete_national_focus = FLY_birth_of_republic
				country_event = {
					id = fillydelphia_civil.2
					hours = 1
				}
			}
		}
		option = {
			name = fillydelphia_civil.1.b
			create_dynamic_country = {
				original_tag = EQS
				set_AI_strategies_on_every_possible_country_delayed = yes
				set_research_slots = 3
				every_state = {
					limit = {
						OR = {
							state = 12
						}
					}
					transfer_state_to = PREV
					add_core_of = PREV
				}
				set_cosmetic_tag = EQS_FLY
				set_country_flag = FLY_filldelphia
				every_possible_country = {
					limit = {
						has_character = FLY_republican_council
					}
					FLY_republican_council = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_terrorists
					}
					FLY_terrorists = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_nopony
					}
					FLY_nopony = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_lyra_heartstrings
					}
					FLY_lyra_heartstrings = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_cirrus_cloud
					}
					FLY_cirrus_cloud = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_coco_pommel
					}
					FLY_coco_pommel = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_coloratura
					}
					FLY_coloratura = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_sunny_skies
					}
					FLY_sunny_skies = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_minuette
					}
					FLY_minuette = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_strawberry_snowflake
					}
					FLY_strawberry_snowflake = {
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_spearhead
					}
					FLY_spearhead = {
						add_corps_commander_role = {
							desc = FLY_spearhead_desc
							traits = { pony_race_trait vigilant_sentinel organizer }
							skill = 2
							attack_skill = 2
							defense_skill = 2
							planning_skill = 1
							logistics_skill = 2
							legacy_id = -1
						}
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = FLY_word_filter
					}
					FLY_word_filter = {
						add_corps_commander_role = {
							desc = FLY_word_filter_desc
							traits = { pony_race_trait media_personality determined_innovator }
							skill = 2
							attack_skill = 2
							defense_skill = 2
							planning_skill = 2
							logistics_skill = 1
							legacy_id = -1
						}
						set_nationality = PREV.PREV
					}
				}
				every_possible_country = {
					limit = {
						has_character = WIN_argentus
					}
					WIN_argentus = {
						add_corps_commander_role = {
							traits = { thestral_race_trait commando jungle_rat	trait_reckless trait_mercenary_commander }	
							skill = 2
							attack_skill = 2
							defense_skill = 1
							planning_skill = 2
							logistics_skill = 2
							legacy_id = 5562
						}
						set_nationality = PREV.PREV
					}
				}
				add_country_leader_role = {
					character = FLY_republican_council
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = liberalism
					}
				}
				add_country_leader_role = {
					character = FLY_terrorists
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = falangism
					}
				}
				add_country_leader_role = {
					character = FLY_nopony
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = leninism
					}
				}
				add_country_leader_role = {
					character = FLY_nopony
					promote_leader = yes
					country_leader = {
						desc = ""
						expire = "1965.1.1"
						ideology = centrism
					}
				}
				add_ideas = war_economy
				add_ideas = no_poverty
				add_ideas = modern_society
				add_ideas = no_lack_of_scientists
				add_ideas = proper_science_base
				add_ideas = pony_race
				set_party_name = {
					ideology = democratic
					long_name = FLY_harmony_party_long
					name = FLY_harmony_party
				}
				set_party_name = {
					ideology = fascism
					long_name = FLY_fascist_civil_party_long
					name = FLY_fascist_civil_party
				}
				set_party_name = {
					ideology = communism
					long_name = FLY_communist_civil_party_long
					name = FLY_communist_civil_party
				}
				set_party_name = {
					ideology = neutrality
					long_name = FLY_neutrality_civil_party_long
					name = FLY_neutrality_civil_party
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				set_stability = 0.25
				set_war_support = 0.25
				set_popularities = {
					democratic = 15
					fascism = 25
					communism = 10
					neutrality = 50
				}
				load_focus_tree = { tree = FLY_wartime_tree keep_completed = yes }
				complete_national_focus = FLY_birth_of_republic
				add_fuel = 45000
				set_capital = {
					state = 12
				}
			}
			every_state = {
				limit = {
					NOT = {
						state = 12
					}
					OR = {
						is_core_of = EQS
						is_claimed_by = EQS
						is_core_of = NLR
						is_claimed_by = NLR
					}						
				}
				remove_core_of = FLY
				add_claim_by = FLY
			}
			FLY = {
				delete_unit_template_and_units = { division_template = "Armored-Division" }
				delete_unit_template_and_units = { division_template = "Pegasus Shock Unit" }
				load_oob = "FLY_civil_war"
				set_variable = {
					var = FLY_legitimacy
					value = 0
				}
				set_variable = {
					var = FLY_legitimacy_max
					value = 20
				}
				set_country_flag = FLY_filldelphia_legitimacy_active
				add_timed_idea = {
					idea = FLY_legitimacy_starting_timed_bonus
					days = 120
				}
				country_event = {
					id = fillydelphia_civil.2
					hours = 1
				}
			}
			FLY = { change_tag_from = ROOT }
		}
	}

	country_event = { #Introduction to the Legitimacy System
		id = fillydelphia_civil.2
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.2"}
		title = fillydelphia_civil.2.t
		desc = fillydelphia_civil.2.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.2.a
			custom_effect_tooltip = FLY_explain_legitimacy
		}
	}

	country_event = { #Choose Flag
		id = fillydelphia_civil.3
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.3"}
		title = fillydelphia_civil.3.t
		desc = fillydelphia_civil.3.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = { ### regular tricolour tricolour with three tribes symbol
			name = fillydelphia_civil.3.a
			custom_effect_tooltip = FLY_flag_texticon_1_tp
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_1
			}
		}
		option = { ### tricolour with four tribes symbol
			name = fillydelphia_civil.3.b
			custom_effect_tooltip = FLY_flag_texticon_2_tp
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_2
			}
		}
		option = { ### regular tricolour
			name = fillydelphia_civil.3.c
			custom_effect_tooltip = FLY_flag_texticon_3_tp
			hidden_effect = {
				set_cosmetic_tag = EQS_FLY_organised_3
			}
		}
	}
	
	country_event = { #Choose Wartime Leader
		id = fillydelphia_civil.4
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.4"}
		title = fillydelphia_civil.4.t
		desc = fillydelphia_civil.4.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = { ### Lyra Heartstrings
			name = fillydelphia_civil.4.a
			trigger = {
				check_variable = {
					FLY_lyra_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_lyra_heartstrings
				ideology = liberalism
			}
			add_to_variable = {
                FLY_lyra_influence = 1
            }
		}
		option = { ### Cirrus Cloud
			name = fillydelphia_civil.4.b
			trigger = {
				check_variable = {
					FLY_cirrus_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_cirrus_cloud
				ideology = harmonic_libertarianism
			}
			add_to_variable = {
                FLY_cirrus_influence = 1
            }
		}
		option = { ### Coco Pommel
			name = fillydelphia_civil.4.c
			trigger = {
				check_variable = {
					FLY_coco_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_coco_pommel
				ideology = harmonic_libertarianism
			}
			add_to_variable = {
                FLY_coco_influence = 1
            }
		}
		option = { ### Coloratura
			name = fillydelphia_civil.4.e
			trigger = {
				check_variable = {
					FLY_coloratura_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_coloratura
				ideology = harmonic_libertarianism
			}
			add_to_variable = {
                FLY_coloratura_influence = 1
            }
		}
		option = { ### Sunny Skies
			name = fillydelphia_civil.4.f
			trigger = {
				check_variable = {
					FLY_sunny_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_sunny_skies
				ideology = liberalism
			}
			add_to_variable = {
                FLY_sunny_influence = 1
            }
		}
		option = { ### Minuette
			name = fillydelphia_civil.4.g
			trigger = {
				check_variable = {
					FLY_minuette_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_minuette
				ideology = liberalism
			}
			add_to_variable = {
                FLY_minuette_influence = 1
            }
		}
		option = { ### Starlight Glimmer
			name = fillydelphia_civil.4.h
			trigger = {
				check_variable = {
					FLY_starlight_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = EQS_starlight_glimmer
				ideology = socialism
			}
			add_to_variable = {
                FLY_starlight_influence = 1
            }
		}
		option = { ### Strawberry Snowflake
			name = fillydelphia_civil.4.i
			trigger = {
				check_variable = {
					FLY_strawberry_influence > 0
				}
			}
			retire_country_leader = yes
			promote_character = {
				character = FLY_strawberry_snowflake
				ideology = socialism
			}
			add_to_variable = {
                FLY_strawberry_influence = 1
            }
		}
	}

	country_event = { # Arms Against Tyranny - event other countries get from FLY requesting help
		id = fillydelphia_civil.5
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.5"}
		title = fillydelphia_civil.5.t
		desc = fillydelphia_civil.5.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = { ### send some armaments
			name = fillydelphia_civil.5.a
			ai_chance = {
				base = 1
				modifier = {
					OR = {
						AND = {
							has_political_power > 49
							is_major = yes
						}
						AND = {
							has_political_power > 24
							is_major = no
						}
					}
					add = 4
				}
				modifier = {
					OR = {
						AND = {
							has_political_power > 99
							is_major = yes
						}
						AND = {
							has_political_power > 49
							is_major = no
						}
					}
					add = -5
				}
			}
			if = {
				limit = {
					is_major = yes
				}
				add_political_power = -50
				FLY = {
					country_event = fillydelphia_civil.6
				}
			}
			else = {
				add_political_power = -25
				FLY = {
					country_event = fillydelphia_civil.6
				}
			}
		}
		option = { ### allow volunteers to go
			name = fillydelphia_civil.5.b
			ai_chance = {
				base = 1
				modifier = {
					OR = {
						AND = {
							has_political_power > 49
							is_major = yes
						}
						AND = {
							has_political_power > 24
							is_major = no
						}
					}
					add = 4
				}
				modifier = {
					OR = {
						AND = {
							has_political_power > 99
							is_major = yes
						}
						AND = {
							has_political_power > 49
							is_major = no
						}
					}
					add = -5
				}
			}
			if = {
				limit = {
					is_major = yes
				}
				add_political_power = -100
				FLY = {
					country_event = fillydelphia_civil.7
				}
			}
			else = {
				add_political_power = -50
				FLY = {
					country_event = fillydelphia_civil.7
				}
			}
		}
		option = { ### armaments + volunteers
			name = fillydelphia_civil.5.c
			ai_chance = {
				base = 1
				modifier = {
					OR = {
						AND = {
							has_political_power > 99
							is_major = yes
						}
						AND = {
							has_political_power > 49
							is_major = no
						}
					}
					add = 4
				}
			}
			if = {
				limit = {
					is_major = yes
				}
				add_political_power = -100
				FLY = {
					country_event = fillydelphia_civil.8
				}
			}
			else = {
				add_political_power = -50
				FLY = {
					country_event = fillydelphia_civil.8
				}
			}
			
		}
		option = { ### give nothing
			name = fillydelphia_civil.5.e
			ai_chance = {
				base = 1
				modifier = {
					has_political_power < 1
					add = 9
				}
			}
		}
	}

	country_event = { # Arms Against Tyranny - FLY gets arms
		id = fillydelphia_civil.6
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.6"}
		title = fillydelphia_civil.6.t
		desc = fillydelphia_civil.6.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.6.a
			if = {
				limit = {
					PREV = {
						is_major = yes
					}
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 800
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 25
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 25
					producer = PREV
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 400
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 10
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 10
					producer = PREV
				}
			}
		}
	}

	country_event = { # Arms Against Tyranny - FLY gets volunteers
		id = fillydelphia_civil.7
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.7"}
		title = fillydelphia_civil.7.t
		desc = fillydelphia_civil.7.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.7.a
			if = {
				limit = {
					PREV = {
						is_major = yes
					}
				}
				add_manpower = 7500
			}
			else = {
				add_manpower = 3250
			}
		}
	}

	country_event = { # Arms Against Tyranny - FLY gets arms+volunteers
		id = fillydelphia_civil.8
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_civil.8"}
		title = fillydelphia_civil.8.t
		desc = fillydelphia_civil.8.d
		
		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes
		
		option = {
			name = fillydelphia_civil.8.a
			if = {
				limit = {
					PREV = {
						is_major = yes
					}
				}
				add_manpower = 7500
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 800
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 25
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 25
					producer = PREV
				}
			}
			else = {
				add_manpower = 3250
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 400
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 10
					producer = PREV
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 10
					producer = PREV
				}
			}
		}
	}

### POST-CIVIL WAR/GENERAL EVENTS


### ELECTION AND CANDIDATE EVENTS


### STARLIGHT GLIMMER AND M6 EVENTS

	country_event = { # Starlight Glimmer arrives
		id = fillydelphia_manesix.1
		immediate = {log = "[GetDateText]: [Root.GetName]: event fillydelphia_manesix.1"}
		title = fillydelphia_manesix.1.t
		desc = fillydelphia_manesix.1.d

		picture = GFX_event_canterlot
		is_triggered_only = yes
		fire_only_once = yes

		option = {
			name = fillydelphia_manesix.1.a
			### add custom effect explaining Starlight's plan to unite the M6
			custom_effect_tooltip = FLY_wonderbolts_tp
            hidden_effect = {
                load_oob = "FLY_wonderbolts"
            }
            add_tech_bonus = {
				name = pegasi
				bonus = 1.0
				uses = 2
				category = pegasi_tech
			}
		}
	}