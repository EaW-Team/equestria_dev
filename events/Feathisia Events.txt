add_namespace = feathasia

country_event = { #FEA_its_over
	id = feathasia.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.1"}
	title = feathasia.1.t
	desc = feathasia.1.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.1.a
		add_political_power = -30
	}
}
country_event = { #FEA_tempering_extremists
	id = feathasia.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.2"}
	title = feathasia.2.t
	desc = feathasia.2.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.2.a
		add_popularity = {
			ideology = communism
    		popularity = 0.05
		}
	}
	option = {
		name = feathasia.2.b
		add_political_power = -30
		add_popularity = {
			ideology = fascism
    		popularity = 0.05
		}
	}
}
country_event = { #FEA_rallying_moderates
	id = feathasia.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.3"}
	title = feathasia.3.t
	desc = feathasia.3.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.3.a
		add_popularity = {
			ideology = democratic
    		popularity = 0.05
		}
	}
	option = {
		name = feathasia.3.b
		add_popularity = {
			ideology = neutrality
    		popularity = 0.05
		}
	}
}
country_event = { #Feathisia Offers Deal
	id = feathasia.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.4"}
	title = feathasia.4.t
	desc = feathasia.4.d

	picture = GFX_event_medieval_city_in_mountains
	is_triggered_only = yes

	option = {
		ai_chance = {
			factor = 70
		}
		name = feathasia.4.a
		effect_tooltip = {
			add_opinion_modifier = { target = FROM modifier = FEA_investor }
			FROM = { add_opinion_modifier = { target = ROOT modifier = FEA_investor } }
		}
		hidden_effect = {
			FEA = { country_event = { days = 10 id = feathasia.5 } }
			set_country_flag = FEA_invested
		}
	}

	option = {
		ai_chance = {
			factor = 30
		}
		add_political_power = 15
		name = feathasia.4.b
		hidden_effect = {
			FEA = { country_event = { days = 10 id = feathasia.6 } }
		}
	}
}

country_event = { #Investemnt Accepted
	id = feathasia.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.5"}
	title = feathasia.5.t
	desc = feathasia.5.d

	picture = GFX_event_bank_vault
	is_triggered_only = yes

	option = {
		name = feathasia.5.a
		add_offsite_building = { type = industrial_complex level = 1 }
		add_opinion_modifier = { target = FROM modifier = FEA_investor }
		FROM = { add_opinion_modifier = { target = ROOT modifier = FEA_investor } }
	}
}

country_event = { #Investemnt Declined
	id = feathasia.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.6"}
	title = feathasia.6.t
	desc = feathasia.6.d

	picture = GFX_event_bank_vault
	is_triggered_only = yes

	option = {
		name = feathasia.6.a
	}
}

country_event = { #FNV Angry Over the Gamble
	id = feathasia.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.7"}
	title = feathasia.7.t
	desc = feathasia.7.d

	picture = GFX_event_western_griffon_city
	is_triggered_only = yes

	option = {
		name = feathasia.7.a
		add_political_power = -25
		add_popularity = { ideology = fascism popularity = 0.03 }
		add_popularity = { ideology = communism popularity = 0.01 }
	}
} 
country_event = {  ##FEA_bank_nationalisation
	id = feathasia.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.8"}
	title = feathasia.8.t
	desc = feathasia.8.d

	picture = GFX_event_western_griffon_city
	is_triggered_only = yes

	option = {
		name = feathasia.8.a
		custom_effect_tooltip = FEA_modify_freefall_tt
		custom_effect_tooltip = FEA_modify_freefall_bank_nationalisation_tt
		hidden_effect = {
			add_to_variable = { FEA_in_freefall_consumer_goods_var = -0.1  }
		}
	}
}    
country_event = {  ##FEA_bank_regulation
	id = feathasia.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.9"}
	title = feathasia.9.t
	desc = feathasia.9.d

	picture = GFX_event_western_griffon_city
	is_triggered_only = yes

	option = {
		name = feathasia.9.a
		custom_effect_tooltip = FEA_modify_freefall_tt
		custom_effect_tooltip = FEA_modify_freefall_bank_regulation_tt
		hidden_effect = {
			add_to_variable = { FEA_in_freefall_consumer_goods_var = -0.05  }
		}
	}
}   
country_event = { #FEA_insane_duke
	id = feathasia.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.10"}
	title = feathasia.10.t
	desc = feathasia.10.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.10.a
		load_focus_tree = feathisia_insane_path
	}
}

country_event = { #Fireside_chat
	id = feathasia.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.11"}
	title = feathasia.11.t
	desc = feathasia.11.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.11.a
		swap_ideas = {
			remove_idea = outdated_industry
			add_idea = modern_society
		}
		add_popularity = { ideology = communism popularity = 0.1 }
		set_country_flag = FEA_chosen_pvda_policies
		hidden_effect = {
			remove_dynamic_modifier = { modifier = FEA_in_freefall_modifier }
			add_dynamic_modifier = { modifier = FEA_lingering_effects_modifier }
		}
		custom_effect_tooltip = FEA_no_longer_in_freefall_tt
	}
	option = {
		name = feathasia.11.b
		swap_ideas = {
			remove_idea = outdated_industry
			add_idea = modern_society
		}
		add_popularity = { ideology = democratic popularity = 0.1 }
		set_country_flag = FEA_chosen_ldp_policies
		hidden_effect = {
			remove_dynamic_modifier = { modifier = FEA_in_freefall_modifier }
			add_dynamic_modifier = { modifier = FEA_lingering_effects_modifier }
		}
		custom_effect_tooltip = FEA_no_longer_in_freefall_tt
	}
	option = {
		name = feathasia.11.c
		swap_ideas = {
			remove_idea = outdated_industry
			add_idea = modern_society
		}
		add_popularity = { ideology = neutrality popularity = 0.1 }
		set_country_flag = FEA_chosen_fhp_policies
		hidden_effect = {
			remove_dynamic_modifier = { modifier = FEA_in_freefall_modifier }
			add_dynamic_modifier = { modifier = FEA_lingering_effects_modifier }
		}
		custom_effect_tooltip = FEA_no_longer_in_freefall_tt
	}
	option = {
		name = feathasia.11.d
		swap_ideas = {
			remove_idea = outdated_industry
			add_idea = modern_society
		}
		add_popularity = { ideology = fascism popularity = 0.1 }
		set_country_flag = FEA_chosen_fnv_policies
		hidden_effect = {
			
			remove_dynamic_modifier = { modifier = FEA_in_freefall_modifier }
			add_dynamic_modifier = { modifier = FEA_lingering_effects_modifier }
		}
		custom_effect_tooltip = FEA_no_longer_in_freefall_tt
	}
}

country_event = { #Farmer Fair
	id = feathasia.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.12"}
	title = feathasia.12.t
	desc = feathasia.12.d

	picture = GFX_event_medieval_city_3
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = feathasia.12.a
		add_political_power = 30
		add_stability = 0.02
	}
}
country_event = { #Heeren's Speech
	id = feathasia.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.13"}
	title = feathasia.13.t
	desc = feathasia.13.d

	picture = GFX_event_western_griffon_city
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = feathasia.13.a
		add_political_power = -10
		add_stability = -0.01
		add_popularity = { ideology = fascism popularity = 0.01 }
	}
}

country_event = { #For My Sentinels
	id = feathasia.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.14"}
	title = feathasia.14.t
	desc = feathasia.14.d

	picture = GFX_event_griffon_soldier
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = feathasia.14.a
		add_popularity = { ideology = fascism popularity = 0.01 }
	}
}
country_event = { #FEA_rozenkamp_path
	id = feathasia.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.15"}
	title = feathasia.15.t
	desc = feathasia.15.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.15.a
		load_focus_tree = feathisia_rozenkamp_path
	}

}

country_event = { #Economic Bill of Rights Started
	id = feathasia.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.16"}
	title = feathasia.16.t
	desc = feathasia.16.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.16.a
	}

}
country_event = { #Economic Bill of Rights Singed
	id = feathasia.17
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.17"}
	title = feathasia.17.t
	desc = feathasia.17.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes
    
	option = {
		trigger = {
     		OR = {
				has_government = democratic
				has_government = neutrality
          	}
        }
		set_global_flag = FEA_sane_economy
		mark_focus_tree_layout_dirty = yes
		complete_national_focus = FEA_the_squere_deal
		name = feathasia.17.a
	}
    option = {
		trigger = {
			has_government = fascism
		}
		set_global_flag = FEA_fascist_economy
		mark_focus_tree_layout_dirty = yes
		complete_national_focus = FEA_economic_nation_building
		name = feathasia.17.b
	}
    option = {
		trigger = {
			has_government = communism
		}
        set_global_flag = FEA_communist_economy
		mark_focus_tree_layout_dirty = yes
		complete_national_focus = FEA_the_construction_of_socialism
		name = feathasia.17.c
	}

}

country_event = { #Assasination attempt during fireside chat
	id = feathasia.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.18"}
	title = feathasia.18.t
	desc = feathasia.18.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.18.a
		country_event = { id = feathasia.19 days = 7}
	}

	option = {
		name = feathasia.18.b
	}

}

country_event = { #Romance 1
	id = feathasia.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.19"}
	title = feathasia.19.t
	desc = feathasia.19.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.19.a
		country_event = { id = feathasia.20 days = 7}
	}
}

country_event = { #Romance 2
	id = feathasia.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.20"}
	title = feathasia.20.t
	desc = feathasia.20.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.20.a
		country_event = { id = feathasia.21 days = 7}
	}
}

country_event = { #Romance 3 - Marriage Proposal?
	id = feathasia.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.21"}
	title = feathasia.21.t
	desc = feathasia.21.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.21.a
		if = {
			limit = {
				STW = { has_country_leader = { ruling_only = yes character = STW_gabriela_eagleclaw } }
			}
			STW = { country_event = feathasia.27 }
		}
		else = {
			GRD = { country_event = feathasia.26 }
		}
	}
}

country_event = { #Geralch - Gabriela Marriage
	id = feathasia.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.22"}
	title = feathasia.22.t
	desc = feathasia.22.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.22.a
		hidden_effect = {
			load_focus_tree = feathisia_marriage_path
			if = {
				limit = {
					has_country_flag = FEA_chosen_pvda_policies
				}
				complete_national_focus = FEA_pvda_policies
			}
			else_if = {
				limit = {
					has_country_flag = FEA_chosen_ldp_policies
				}
				complete_national_focus = FEA_ldp_policies
			}
			else_if = {
				limit = {
					has_country_flag = FEA_chosen_fhp_policies
				}
				complete_national_focus = FEA_fhp_policies
			}
			else = {
				complete_national_focus = FEA_fnv_policies
			}
		
			if = {
				limit = {
					FROM = {
						original_tag = STW
					}
				}
				
				FROM = {
					every_core_state = {
						add_core_of = ROOT
					}
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					add_claim_by = ROOT
				}
				FROM = {
					every_character = {
						limit = {
							is_country_leader = no
							is_unit_leader = yes
						}
						set_nationality = ROOT
					}
				}
				annex_country = { target = FROM transfer_troops = yes }
				set_country_flag = FEA_STW_marriage
				set_country_flag = FEA_STW_union
				FEA_grand_duke_gerlach_iv = {
					set_character_name = "FEA_STW_union_leader_name"
					set_portraits = {
						civilian = { large = "gfx/leaders/FEA/chad_and_stacy.tga" }
					}
				}
				set_country_leader_description = {
					desc = FEA_gerlach_married_desc
				}
				set_cosmetic_tag = FEA_STW_union
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = GRD
					}
				}
				FROM = {
					every_core_state = {
						add_core_of = ROOT
					}
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					add_claim_by = ROOT
				}
				FROM = {
					every_character = {
						limit = {
							is_country_leader = no
							is_unit_leader = yes
						}
						set_nationality = ROOT
					}
				}
				annex_country = { target = FROM transfer_troops = yes }
	
				STW = {
					every_core_state = {
						add_core_of = ROOT
					}
				}
				every_state = {
					limit = { is_claimed_by = STW }
					add_claim_by = ROOT
				}
				STW = {
					every_unit_leader = {
						set_nationality = ROOT
					}
				}
				annex_country = { target = STW transfer_troops = yes }
				set_country_flag = FEA_STW_marriage
				add_ideas = GRI_grover_vi
				every_possible_country = {
					limit = {
						has_character = GRI_emperor_grover_vi
					}
					GRI_emperor_grover_vi = {
						set_nationality = ROOT
					}
				}
				FEA_grand_duke_gerlach_iv = {
					set_character_name = "FEA_STW_union_leader_name"
					set_portraits = {
						civilian = { large = "gfx/leaders/FEA/chad_and_stacy.tga" }
					}
				}
				set_country_leader_description = {
					desc = FEA_gerlach_married_desc
				}
				set_capital = { state = 382 remember_old_capital = no }
			}

			else = {
				log = "[GetDateText]: [Root.GetName]: event feathasia.22 PROBLEM!! Impossibility of marrying non-ruling Duchess"
			}
		}
	}
}

country_event = { #Illiteracy reduction 1
	id = feathasia.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.23"}
	title = feathasia.23.t
	desc = feathasia.23.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.23.a
		add_political_power = 25
		decrease_illiteracy = yes
		hidden_effect = {
			country_event = { id = feathasia.24 days = 365 random = 4600 }#days to hours applied
		}
	}
}

country_event = { #Illiteracy reduction 2 - Gabriela's libraries
	id = feathasia.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.24"}
	title = feathasia.24.t
	desc = feathasia.24.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.23.a
		add_political_power = 50
		add_ideas = FEA_gabrielas_libraries
		decrease_illiteracy = yes
		hidden_effect = {
			country_event = { id = feathasia.24 days = 365 random = 4600 }#days to hours applied
		}
	}
}

country_event = { #family mortgages debuff ends
	id = feathasia.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.25"}
	title = feathasia.25.t
	desc = feathasia.25.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = feathasia.25.a
		add_ideas = FEA_pay_off_family_mortgages_spirit2
	}
}

country_event = { #Marriage Proposal from FEA to GRD
	id = feathasia.26
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.26"}
	title = feathasia.26.t
	desc = feathasia.26.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Accept Marriage
		name = feathasia.26.a
		if = {
			limit = { is_ai = no }
			FROM = {
				every_core_state = {
					add_core_of = ROOT
				}
			}
			every_state = {
				limit = { is_claimed_by = FROM }
				add_claim_by = ROOT
			}
			annex_country = { target = FROM transfer_troops = yes }
			STW_gabriela_eagleclaw = {
				set_character_name = "FEA_STW_union_leader_name"
				set_portraits = {
					civilian = { large = "gfx/leaders/FEA/chad_and_stacy.tga" }
				}
			}
		}
		else = {
			FROM = { end_puppet_this = yes }
			every_other_country = {
				limit = { is_subject_of = ROOT }
				get_current_autonomy_level = yes
				get_current_government_type = yes
				end_puppet_this = yes
				FROM = { puppet = PREV }
				restore_previous_government_type = yes
				set_previous_autonomy_level = yes
			}
			if = {
				limit = { is_faction_leader = yes }
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						NOT = { tag = FROM }
					}
					set_country_flag = was_in_faction_with_@ROOT
					leave_faction = yes
				}
				leave_faction = yes
				every_other_country = {
					limit = {
						has_country_flag = was_in_faction_with_@ROOT
					}
					FROM = { add_to_faction = PREV }
					clr_country_flag = was_in_faction_with_@ROOT
				}
			}
			FROM = {
				set_cosmetic_tag = GRIF_EMPIRE
			}
			FROM = { country_event = feathasia.22 }
		}
	}
}

country_event = { #Marriage Proposal from FEA to STW
	id = feathasia.27
	immediate = {log = "[GetDateText]: [Root.GetName]: event feathasia.27"}
	title = feathasia.27.t
	desc = feathasia.27.d
	picture = GFX_event_griffon_back

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Accept Marriage
		name = feathasia.27.a
		if = {
			limit = { is_ai = no }
			FROM = {
				every_core_state = {
					add_core_of = ROOT
				}
			}
			every_state = {
				limit = { is_claimed_by = FROM }
				add_claim_by = ROOT
			}
			FROM = {
				every_character = {
					limit = {
						is_country_leader = no
						is_unit_leader = yes
					}
					set_nationality = ROOT
				}
			}
			annex_country = { target = FROM transfer_troops = yes }
			STW_gabriela_eagleclaw = {
				set_character_name = "FEA_STW_union_leader_name"
				set_portraits = {
					civilian = { large = "gfx/leaders/FEA/chad_and_stacy.tga" }
				}
			}
			set_country_flag = FEA_STW_marriage
			set_country_flag = FEA_STW_union
			set_cosmetic_tag = FEA_STW_union
		}
		else = {
			every_other_country = {
				limit = { is_subject_of = ROOT }
				get_current_autonomy_level = yes
				get_current_government_type = yes
				end_puppet_this = yes
				FROM = { puppet = PREV }
				restore_previous_government_type = yes
				set_previous_autonomy_level = yes
			}
			if = {
				limit = { is_faction_leader = yes }
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						NOT = { tag = FROM }
					}
					set_country_flag = was_in_faction_with_@ROOT
					leave_faction = yes
				}
				leave_faction = yes
				every_other_country = {
					limit = {
						has_country_flag = was_in_faction_with_@ROOT
					}
					FROM = { add_to_faction = PREV }
					clr_country_flag = was_in_faction_with_@ROOT
				}
			}
			FROM = { country_event = feathasia.22 }
		}
	}
}