focus_tree = {
	id = NTR_basic_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			tag = NTR
			
			if = {
				limit = {
					has_government = democratic
				}
				
				NOT = { has_country_flag = NTR_ambitions_do_not_end_branch }
			}
			else = {
				has_government = communism
			}
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3975
		y = 950
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_finishing_the_queens_labors
	shared_focus = NTR_establish_a_hierarchy
}

focus_tree = {
	id = NTR_ambitions_do_not_end_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_ambitions_do_not_end_branch
			
			has_government = democratic
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3975
		y = 950
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_industrial_assistance
	shared_focus = NTR_expand_the_eastern_frontier
	shared_focus = NTR_finishing_the_queens_labors
	shared_focus = NTR_establish_a_hierarchy
}

focus_tree = {
	id = NTR_our_dear_home_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_our_dear_home_branch
			
			has_government = communism
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3975
		y = 950
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_finishing_the_queens_labors
	shared_focus = NTR_establish_a_hierarchy
}

focus_tree = {
	id = NTR_picnic_time_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_picnic_time_branch
			
			has_government = communism
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3975
		y = 950
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_finishing_the_queens_labors
	shared_focus = NTR_establish_a_hierarchy
}

focus_tree = {
	id = NTR_tribal_council_basic_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
			
			NOT = {
				OR = {
					has_completed_focus = NTR_no_mercy_no_forgiveness
					has_completed_focus = NTR_cow_the_red_conquerors
				}
			}
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

focus_tree = {
	id = NTR_our_own_path_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_completed_focus = NTR_no_mercy_no_forgiveness
			
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
			
			NOT = {
				OR = {
					has_country_flag = NTR_traditionalism_branch
					has_country_flag = NTR_revanchism_branch #???
				}
			}
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

focus_tree = {
	id = NTR_traditionalism_focus_tree # can be expanded with HLR/DED rework
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_traditionalism_branch
			
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

#focus_tree = {
#	id = NTR_children_of_blizzards_focus_tree # release along with HLR/DED rework
#	
#	country = {
#		factor = 0
#		
#		modifier = {
#			add = 10
#			
#			has_country_flag = NTR_children_of_blizzards_branch
#			
#			has_country_leader = { name = "Child of the Blizzard" ruling_only = yes }
#		}
#	}
#	
#	default = no
#	
#	continuous_focus_position = {
#		x = 3675
#		y = 200
#	}
#	
#	shared_focus = NTR_the_young_princess_rises
#	shared_focus = NTR_marking_down_the_trails
#	shared_focus = NTR_honor_and_help_the_craftsponies
#	shared_focus = NTR_the_greater_north
#	shared_focus = NTR_establish_napravne_zarizeni
#	shared_focus = NTR_disband_local_things
#	shared_focus = NTR_preparations_for_total_war
#	shared_focus = NTR_northern_tactics
#	shared_focus = NTR_our_game
#}

focus_tree = {
	id = NTR_new_traditions_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_completed_focus = NTR_cow_the_red_conquerors
			
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
			
			NOT = {
				OR = {
					has_country_flag = NTR_great_northern_communes_branch
					has_country_flag = NTR_the_great_mistake_branch
				}
			}
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

focus_tree = {
	id = NTR_great_northern_communes_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_great_northern_communes_branch
			
			OR = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				has_country_leader = { name = "Communal Council" ruling_only = yes }
			}
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

focus_tree = {
	id = NTR_the_great_mistake_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_the_great_mistake_branch
			
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

focus_tree = {
	id = NTR_revanchism_focus_tree
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			
			has_country_flag = NTR_revanchism_branch
			
			has_country_leader = { name = "Libor White" ruling_only = yes }
		}
	}
	
	default = no
	
	continuous_focus_position = {
		x = 3675
		y = 200
	}
	
	shared_focus = NTR_the_young_princess_rises
	shared_focus = NTR_marking_down_the_trails
	shared_focus = NTR_honor_and_help_the_craftsponies
	shared_focus = NTR_preparations_for_total_war
	shared_focus = NTR_northern_tactics
	shared_focus = NTR_our_game
}

##################################################
################ Political branch ################
##################################################

### Core ###

	shared_focus = {
		id = NTR_the_young_princess_rises
		icon = GFX_goal_pink_waifu
		
		x = 11
		y = 0
		
		cost = 3
		
		bypass = {
			hidden_trigger = {
				NOT = { has_government = democratic }
			}
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_young_princess_rises"
			
			add_political_power = 75
			add_stability = 0.04
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_uniting_the_tribal_councils
		icon = GFX_goal_generic_major_alliance_pony_griffon
		
		relative_position_id = NTR_the_young_princess_rises
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_young_princess_rises
		}
		
		bypass = {
			hidden_trigger = {
				has_government = neutrality
			}
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_uniting_the_tribal_councils"
			
			add_popularity = {
				ideology = neutrality
				popularity = -0.05
			}
			
			swap_ideas = {
				remove_idea = NTR_lack_of_central_authority_idea
				add_idea = NTR_steps_towards_centralization_idea
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_integrate_external_developments
		icon = GFX_goal_foreign_diplomacy
		
		relative_position_id = NTR_the_young_princess_rises
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_young_princess_rises
		}
		
		bypass = {
			hidden_trigger = {
				has_government = neutrality
			}
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_integrate_external_developments"
			
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			
			swap_ideas = {
				remove_idea = NTR_isolationism_idea
				add_idea = NTR_weakening_isolationism_idea
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_the_coronation
		icon = GFX_focus_rom_royal_dictatorship
		
		relative_position_id = NTR_the_young_princess_rises
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_uniting_the_tribal_councils
		}
		prerequisite = {
			focus = NTR_integrate_external_developments
		}
		
		bypass = {
			hidden_trigger = {
				NOT = { has_government = democratic }
			}
		}
		
		available = {
			if = {
				limit = {
					has_country_flag = NTR_the_princess_life_is_under_threat_flag
				}
				
				custom_trigger_tooltip = {
					tooltip = NTR_the_princess_life_is_under_threat_tooltip
					
					NOT = { has_country_flag = NTR_the_princess_life_is_under_threat_flag }
				}
			}
		}
		
		cancel_if_invalid = no
		continue_if_invalid = no
		available_if_capitulated = no
		
		select_effect = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_coronation selected"
			
			hidden_effect = {
				SRS = {
					country_event = {
						id = Ntribes.550
						days = 7
						random = 168
					}
				}
				
				if = {
					limit = {
						is_ai = yes
						
						has_game_rule = {
							rule = NTR_ai_behavior
							option = DEFAULT
						}
						
						is_historical_focus_on = no
					}
					
					NTR_randomise_political_path = yes
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_coronation"
			
			add_political_power = 150
			
			if = {
				limit = {
					has_country_leader = { name = "Fiana II" ruling_only = yes }
				}
				
				swap_ruler_traits = {
					remove = NTR_untested_princess_trait
					add = NTR_queen_trait
				}
			}
			
			hidden_effect = {
				country_event = {
					id = Ntribes.505
					days = 7
					random = 28
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}

##################################################
################# Harmony branch #################
##################################################

### Core (early) ###

	shared_focus = {
		id = NTR_reorganize_the_royal_council
		icon = GFX_goal_support_democracy
		
		relative_position_id = NTR_the_coronation
		x = -7
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_the_coronation
		}
		
		mutually_exclusive = {
			focus = NTR_the_isolated_north
			focus = NTR_establishing_the_general_council
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reorganize_the_royal_council"
			
			add_political_power = 50
			add_stability = 0.025
			
			custom_effect_tooltip = ENTER
			
			add_ideas = NTR_lieutenant_of_industry_advisor
			add_ideas = NTR_silent_workgriffon_advisor2
			
			hidden_effect = {
				set_country_flag = NTR_lieutenant_of_industry_advisor_flag
				set_country_flag = NTR_silent_workgriffon_advisor2_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_changing_the_elder_councils
		icon = GFX_goal_generic_government_deals
		
		relative_position_id = NTR_reorganize_the_royal_council
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_reorganize_the_royal_council
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_changing_the_elder_councils"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_traditionalism_influence_dynamic_modifier }
				}
				
				add_stability = 0.075
				
				add_popularity = {
					ideology = neutrality
					popularity = -0.04
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_traditionalism_drift_tooltip
				
				hidden_effect = {
					divide_variable = { NTR_traditionalism_influence_neutrality_drift_var = 2 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_stability = 0.1
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_communist_partisans_dynamic_modifier }
				
				check_variable = { party_popularity@communism < party_popularity@neutrality }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_guilds_duty
		icon = GFX_goal_silver_reserve
		
		relative_position_id = NTR_reorganize_the_royal_council
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_reorganize_the_royal_council
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_guilds_duty"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_communist_partisans_dynamic_modifier }
				}
				
				add_political_power = 100
				
				add_popularity = {
					ideology = communism
					popularity = -0.05
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_communism_drift_tooltip
				
				hidden_effect = {
					divide_variable = { NTR_communist_partisans_communism_drift_var = 2 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_political_power = 200
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_traditionalism_influence_dynamic_modifier }
				
				check_variable = { party_popularity@neutrality < party_popularity@communism }
			}
		}
	}
	
	shared_focus = {
		id = NTR_main_point
		icon = GFX_goal_POR_royal_edicts
		
		relative_position_id = NTR_reorganize_the_royal_council
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_changing_the_elder_councils
		}
		prerequisite = {
			focus = NTR_the_guilds_duty
		}
		
		available = {
			has_government = democratic
			
			has_country_flag = NTR_the_unification_process_is_half_completed_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_main_point"
			
			country_event = Ntribes.100
			
			unlock_decision_tooltip = NTR_call_up_commune_militias
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}

### "Friendship" branch ###

	shared_focus = {
		id = NTR_protect_our_way_of_life
		icon = GFX_goal_tfv_strengthen_commonwealth_ties_pony_griffon
		
		relative_position_id = NTR_main_point
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_main_point
		}
		
		mutually_exclusive = {
			focus = NTR_open_our_doors_to_all
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = TRADE
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_TRADE
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				is_subject = no
				has_government = democratic
				
				has_completed_focus = NTR_connecting_to_the_outside_world
				
				has_country_flag = NTR_the_unification_process_is_completed_flag
				
				VED = {
					is_subject = no
					has_government = democratic
					
					hidden_trigger = {
						exists = yes
						
						is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
					}
				}	
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_protect_our_way_of_life"
			
			VED = {
				country_event = {
					id = Ntribes.150
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0
				
				has_country_flag = NTR_AI_TRADE
			}
		}
	}
	
	shared_focus = {
		id = NTR_vedinas_tutelage
		icon = GFX_goal_bag_of_money_pony_griffon
		
		relative_position_id = NTR_protect_our_way_of_life
		x = -1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_protect_our_way_of_life
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			has_completed_focus = NTR_industrialization_is_coming_north
			
			VED = {
				has_country_flag = NTR_agreed_to_cooperate_flag
				
				OR = {
					AND = {
						has_non_aggression_pact_with = ROOT
						is_guaranteed_by = ROOT
						has_guaranteed = ROOT
					}
					
					is_in_faction_with = ROOT
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_vedinas_tutelage"
			
			VED = {
				country_event = {
					id = Ntribes.151
					hours = 6
					random = 6
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_joint_development
		icon = GFX_goal_liberty
		
		relative_position_id = NTR_vedinas_tutelage
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_vedinas_tutelage
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_joint_development"
			
			VED = {
				country_event = {
					id = Ntribes.152
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_civil_investments }
			}
		}
	}
	
	shared_focus = {
		id = NTR_civil_investments
		icon = GFX_goal_generic_construct_civ_factory
		
		relative_position_id = NTR_vedinas_tutelage
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_vedinas_tutelage
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_civil_investments"
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					
					is_coastal = yes
					
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 562 }
				
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					
					is_coastal = yes
					
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 562 }
				
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			VED = {
				random_owned_controlled_state = {
					limit = {
						is_core_of = PREV
						
						is_coastal = yes
						
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					
					prioritize = { 429 }
					
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					
					hidden_effect = {
						set_variable = { PREV.VED_NTR_state_with_bonus_infrastructure_and_complex = THIS }
					}
				}
				
				hidden_effect = {
					country_event = Ntribes.153
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_establish_vedinian_guild
		icon = GFX_goal_new_treaty
		
		relative_position_id = NTR_vedinas_tutelage
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_joint_development
		}
		prerequisite = {
			focus = NTR_civil_investments
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			has_completed_focus = NTR_demand_the_guilds_oath
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establish_vedinian_guild"
			
			add_stability = 0.05
			
			custom_effect_tooltip = SM_guilds_unlocked_tooltip
			custom_effect_tooltip = ENTER
			custom_effect_tooltip = NTR_establish_vedinian_guild_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 29 }
				set_variable = { SM_effect_cost_var = -30 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				if = {
					limit = {
						amount_taken_ideas = {
							amount > 0
							
							slots = { theorist }
						}
					}
					
					if = {
						limit = {
							has_idea = NTR_military_theorist
						}
						
						set_variable = { SM_experience_gain_army_var = 0.024 }
					}
					else_if = {
						limit = {
							has_idea = NTR_naval_theorist
						}
						
						set_variable = { SM_basic_navy_experience_var = 0.024 }
					}
					else = {
						set_variable = { SM_basic_air_experience_var = 0.012 }
					}
				}
				
				VED = { country_event = Ntribes.154 }
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_scientific_training
		icon = GFX_goal_generic_scientific_exchange_pony_griffon
		
		relative_position_id = NTR_joint_development
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_establish_vedinian_guild
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_scientific_training"
			
			VED = {
				country_event = {
					id = Ntribes.155
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_civil_investments }
			}
		}
	}
	
	shared_focus = {
		id = NTR_prepare_for_the_worst
		icon = GFX_goal_chn_red_military_factories
		
		relative_position_id = NTR_civil_investments
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_establish_vedinian_guild
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_prepare_for_the_worst"
			
			one_random_arms_factory = yes
			one_random_dockyard = yes
			
			VED = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					
					hidden_effect = {
						set_variable = { PREV.VED_NTR_state_with_bonus_factory = THIS }
					}
				}
				
				hidden_effect = {
					country_event = Ntribes.153
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_war_construction_AI_factor
				
				has_variable = NTR_war_construction_AI_factor
			}
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_joint_development }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_brother_kingdoms
		icon = GFX_goal_molotov_ribbentrop_pact_pony_griffon
		
		relative_position_id = NTR_establish_vedinian_guild
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_scientific_training
		}
		
		prerequisite = {
			focus = NTR_prepare_for_the_worst
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					AND = {
						has_civil_war = no
						NOT = { has_government = democratic }
					}
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			has_completed_focus = NTR_establish_a_hierarchy
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = VED
						is_guaranteed_by = VED
						has_guaranteed = VED
					}
					
					is_in_faction_with = VED
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_brother_kingdoms"
			
			swap_ideas = {
				remove_idea = NTR_army_of_the_past_millennium_idea
				add_idea = NTR_a_fledgling_modern_army_idea
			}
			
			every_army_leader = {
				limit = {
					has_trait = warlord_of_the_past_millennium
				}
				
				remove_unit_leader_trait = warlord_of_the_past_millennium
				add_unit_leader_trait = commander_of_the_past_century
			}
			
			effect_tooltip = {
				remove_ideas = NTR_insignificant_isolationism_idea
			}
			
			country_event = Ntribes.107
			
			VED = {
				add_ideas = VED_NTR_military_spirit_idea
				
				hidden_effect = {
					country_event = Ntribes.156
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}

### "Trade with All" branch ###

	shared_focus = {
		id = NTR_open_our_doors_to_all
		icon = GFX_goal_generic_positive_trade_relations
		
		relative_position_id = NTR_main_point
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_main_point
		}
		
		mutually_exclusive = {
			focus = NTR_protect_our_way_of_life
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = VEDINA
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_VEDINA
						}
					}
				}
				
				VED = {
					OR = {
						exists = no
						is_subject = yes
						NOT = { has_government = democratic }
						
						aggressive_towards_PREV = yes
						
						NOT = { has_country_flag = NTR_agreed_to_cooperate_flag }
					}
				}
			}
			else = {
				has_government = democratic
				
				has_completed_focus = NTR_the_new_economy
				
				has_country_flag = NTR_the_unification_process_is_completed_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_open_our_doors_to_all"
			
			swap_ideas = {
				remove_idea = limited_exports
				add_idea = export_focus
			}
			
			hidden_effect = {
				clr_country_flag = trade_laws_blocked
				set_country_flag = TRD_forced_market
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0
				
				OR = {
					has_country_flag = NTR_AI_VEDINA
					
					AND = {
						is_historical_focus_on = yes
						
						has_game_rule = {
							rule = NTR_ai_behavior
							option = DEFAULT
						}
					}
					
					VED = {
						OR = {
							exists = no
							is_subject = yes
							NOT = { has_government = democratic }
							
							is_a_potential_enemy_or_has_war_with_ROOT = yes
						}
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_our_own_future
		icon = GFX_goal_COS_Peace
		
		relative_position_id = NTR_open_our_doors_to_all
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_open_our_doors_to_all
		}
		
		available = {
			has_government = democratic
			
			has_idea = free_trade
			
			has_completed_focus = NTR_industrialization_is_coming_north
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_our_own_future"
			
			add_ideas = NTR_free_trade_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_foreign_standarts
		icon = GFX_goal_purchase_tech
		
		relative_position_id = NTR_our_own_future
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_our_own_future
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_foreign_standarts"
			
			remove_ideas = NTR_insignificant_isolationism_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_domestic_development
		icon = GFX_goal_generic_construction
		
		relative_position_id = NTR_our_own_future
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_our_own_future
		}
		
		available = {
			has_government = democratic
			
			any_controlled_state_is_coastal = yes
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_domestic_development"
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 563 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 567 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 562 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = { #???
			base = 150
			
			modifier = {
				factor = 3
				
				OR = {
					check_variable = { NTR_army_AI_factor = 5 }
					check_variable = { NTR_navy_AI_factor = 5 }
				}
			}
			modifier = {
				factor = 2
				
				check_variable = { NTR_army_AI_factor = 3 }
			}
			modifier = {
				factor = 2
				
				check_variable = { NTR_navy_AI_factor = 3 }
			}
			
			modifier = {
				factor = 1.5
				
				check_variable = { NTR_army_AI_factor = 2 }
			}
			modifier = {
				factor = 1.5
				
				check_variable = { NTR_navy_AI_factor = 2 }
			}
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_foreign_standarts }
			}
		}
	}
	
	shared_focus = {
		id = NTR_expand_guilds_rights
		icon = GFX_DAH_Topke
		
		relative_position_id = NTR_our_own_future
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_foreign_standarts
		}
		prerequisite = {
			focus = NTR_domestic_development
		}
		
		available = {
			has_government = democratic
			
			has_completed_focus = NTR_demand_the_guilds_oath
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_expand_guilds_rights"
			
			add_political_power = 100
			add_stability = 0.05
			
			custom_effect_tooltip = SM_guilds_unlocked_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 19 }
				set_variable = { SM_effect_cost_var = -20 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				if = {
					limit = {
						amount_taken_ideas = {
							amount > 0
							
							slots = { theorist }
						}
					}
					
					if = {
						limit = {
							has_idea = NTR_military_theorist
						}
						
						set_variable = { SM_experience_gain_army_var = 0.024 }
					}
					else_if = {
						limit = {
							has_idea = NTR_naval_theorist
						}
						
						set_variable = { SM_basic_navy_experience_var = 0.024 }
					}
					else = {
						set_variable = { SM_basic_air_experience_var = 0.012 }
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_foreign_research_labs
		icon = GFX_goal_generic_scientific_exchange_pony
		
		relative_position_id = NTR_foreign_standarts
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_expand_guilds_rights
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_foreign_research_labs"
			
			add_ideas = NTR_freedom_for_researchers_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_domestic_development }
			}
		}
	}
	
	shared_focus = {
		id = NTR_refined_production_methods
		icon = GFX_goal_industry_air
		
		relative_position_id = NTR_domestic_development
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_expand_guilds_rights
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_refined_production_methods"
			
			add_ideas = NTR_refined_production_methods_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_war_production_AI_factor
				
				has_variable = NTR_war_production_AI_factor
			}
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_foreign_research_labs }
			}
		}
	}
	
	shared_focus = {
		id = NTR_a_free_and_proud_north
		icon = GFX_focus_generic_home_defense
		
		relative_position_id = NTR_expand_guilds_rights
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_foreign_research_labs
		}
		
		prerequisite = {
			focus = NTR_refined_production_methods
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			has_completed_focus = NTR_establish_a_hierarchy
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_a_free_and_proud_north"
			
			swap_ideas = {
				remove_idea = NTR_army_of_the_past_millennium_idea
				add_idea = NTR_a_fledgling_modern_army_idea
			}
			
			every_army_leader = {
				limit = {
					has_trait = warlord_of_the_past_millennium
				}
				
				remove_unit_leader_trait = warlord_of_the_past_millennium
				add_unit_leader_trait = commander_of_the_past_century
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}

### Core (late) ###

	shared_focus = {
		id = NTR_demand_the_guilds_oath
		icon = GFX_goal_constitutional_guarantees
		
		relative_position_id = NTR_main_point
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_protect_our_way_of_life
			focus = NTR_open_our_doors_to_all
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			has_completed_focus = NTR_industrialization_is_coming_north
			
			hidden_trigger = { # wait for swap
				if = {
					limit = {
						has_completed_focus = NTR_protect_our_way_of_life
					}
					
					VED = { has_country_flag = NTR_agreed_to_cooperate_flag }
				}
				else = {
					has_completed_focus = NTR_open_our_doors_to_all
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_demand_the_guilds_oath"
			
			add_political_power = 100
			
			unlock_decision_category_tooltip = NTR_guilds_oath_category
			
			hidden_effect = {
				if = {
					limit = {
						has_idea = modern_society
					}
					
					add_to_variable = { NTR_VED_HLR_guilds_power_var = 3 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = EaW_society_development_var
							compare = greater_than_or_equals
							value = 5
						}
					}
					
					add_to_variable = { NTR_VED_HLR_guilds_power_var = 2 }
				}
				else_if = {
					limit = {
						check_variable = {
							var = EaW_society_development_var
							compare = greater_than_or_equals
							value = 4
						}
					}
					
					add_to_variable = { NTR_VED_HLR_guilds_power_var = 1 }
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
		}
	}
	
	shared_focus = {
		id = NTR_political_training_programs
		icon = GFX_goal_ideology_social_liberal # something better #???
		
		relative_position_id = NTR_demand_the_guilds_oath
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_demand_the_guilds_oath
		}
		
		prerequisite = {
			focus = NTR_joint_development
			focus = NTR_foreign_standarts
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_political_training_programs"
			
			add_political_power = 100
			
			unlock_decision_category_tooltip = NTR_on_the_hoofprints_of_Fiana_category
			
			if = {
				limit = {
					has_completed_focus = NTR_open_our_doors_to_all
				}
				
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = NTR_smooth_talking_charmers1_team
				
				hidden_effect = {
					set_country_flag = {
						flag = NTR_smooth_talking_charmers_team_flag
						value = 0
					}
				}
			}
			else_if = {
				limit = {
					has_completed_focus = NTR_protect_our_way_of_life
				}
				
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = NTR_ideological_crusaders1_team
				
				hidden_effect = {
					set_country_flag = {
						flag = NTR_ideological_crusaders_team_flag
						value = 0
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
			
			modifier = {
				factor = 0
				
				amount_taken_ideas = {
					amount < 2
					
					slots = { political_advisor }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_northern_free_trade_area
		icon = GFX_All_resource
		
		relative_position_id = NTR_political_training_programs
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_political_training_programs
		}
		
		prerequisite = {
			focus = NTR_scientific_training
			focus = NTR_foreign_research_labs
		}
		
		available = {
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_northern_free_trade_area"
			
			add_political_power = 75
			
			custom_effect_tooltip = SM_free_resources_unlocked_tooltip
			
			hidden_effect = {
				if = {
					limit = {
						check_variable = { SM_country_amount_of_dockyards > 0 }
						
						NOT = { has_completed_focus = NTR_northern_free_trade_area } # fucking CTD
					}
					
					SM_calculate_not_export_multiplier_and_array_updater_variable = yes
					
					SM_create_resources_array = yes
					
					for_each_scope_loop = {
						array = SM_states_with_dockyards_donations
						
						if = {
							limit = {
								check_variable = {
									var = modifier@local_resources
									compare = not_equals
									value = 0
								}
							}
							
							SM_calculate_resources_updater_with_local_modifier = yes
							
							for_loop_effect = {
								start = 1
								compare = less_than_or_equals
								end = SM_state_amount_of_dockyards
								
								find_lowest_in_array = { array = ROOT.SM_needed_resources }
								add_to_array = { SM_state_bonus_resources = i }
								
								SM_add_bonus_resources = yes
								
								add_to_variable = { ROOT.SM_needed_resources^i = SM_needed_resources_local_updater_temp_var }
							}
						}
						else = {
							for_loop_effect = {
								start = 1
								compare = less_than_or_equals
								end = SM_state_amount_of_dockyards
								
								find_lowest_in_array = { array = ROOT.SM_needed_resources }
								add_to_array = { SM_state_bonus_resources = i }
								
								if = {
									limit = {
										any_of = {
											array = SM_needed_resources
											
											check_variable = { v < 0 }
										}
									}
									
									add_to_variable = { ROOT.SM_needed_resources^i = ROOT.SM_needed_resources_updater_var }
									
									if = {
										limit = {
											all_of = {
												array = SM_needed_resources
												
												check_variable = {
													var = v
													compare = greater_than_or_equals
													value = 0
												}
											}
										}
										
										clear_array = SM_needed_resources
										
										if = {
											limit = { check_variable = { resource_consumed@crystals > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@crystals }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
										if = {
											limit = { check_variable = { resource_consumed@chromium > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@chromium }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
										if = {
											limit = { check_variable = { resource_consumed@rubber > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@rubber }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
										if = {
											limit = { check_variable = { resource_consumed@aluminium > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@aluminium }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
										if = {
											limit = { check_variable = { resource_consumed@tungsten > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@tungsten }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
										if = {
											limit = { check_variable = { resource_consumed@steel > 0 } }
											add_to_array = { SM_needed_resources = resource_consumed@steel }
										}
										else = {
											add_to_array = { SM_needed_resources = 10000 }
										}
									}
								}
								else = {
									add_to_variable = { ROOT.SM_needed_resources^i = ROOT.SM_needed_resources_updater_var }
								}
								
								SM_add_bonus_resources = yes
							}
						}
					}
					
					country_event = {
						id = SM_and_RS_GUI_events.8
						hours = 1
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 50
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
		}
	}

### "Glory to the North" branch ###

	shared_focus = {
		id = NTR_reclaim_the_west
		icon = GFX_goal_generic_forceful_treaty
		
		relative_position_id = NTR_the_brother_kingdoms
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_brother_kingdoms
			focus = NTR_a_free_and_proud_north
		}
		
		mutually_exclusive = {
			focus = NTR_too_much_blood_already
		}
		
		bypass = {
			has_completed_focus = NTR_the_brother_kingdoms
			
			has_country_flag = NTR_owns_SRS_cores_flag
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = TRADE
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_TRADE
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				is_subject = no
				has_government = democratic
				
				hidden_trigger = {
					country_exists = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reclaim_the_west"
			
			if = {
				limit = {
					has_idea = NTR_a_constitutional_monarchy_idea
				}
				
				add_political_power = -100
				add_stability = -0.075
				add_war_support = -0.05
				
				swap_ideas = {
					remove_idea = NTR_a_constitutional_monarchy_idea
					add_idea = NTR_an_executive_monarchy_idea
				}
			}
			
			SRS = {
				country_event = {
					id = Ntribes.157
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				has_country_flag = NTR_adam_watershed_alive
			}
			
			modifier = {
				factor = 0.2
				
				has_completed_focus = NTR_a_free_and_proud_north
			}
			
			modifier = {
				factor = 0
				
				OR = {
					NOT = {
						has_completed_focus = NTR_the_future_planning_committee
						has_completed_focus = NTR_scase
						has_completed_focus = NTR_efficient_mining
					}
					
					SRS = { is_subject = yes }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_taming_the_west
		icon = GFX_goal_broken_red_star
		
		relative_position_id = NTR_reclaim_the_west
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_reclaim_the_west
		}
		
		bypass = {
			hidden_trigger = {
				has_country_flag = NTR_SRS_peaceful_integration
			}
		}
		
		available = {
			has_war = no
			is_subject = no
			has_government = democratic
			
			has_country_flag = NTR_owns_SRS_cores_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_taming_the_west"
			
			country_event = Ntribes.110
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 500
		}
	}
	
	shared_focus = {
		id = NTR_the_pact_of_tribes_and_clans
		icon = GFX_focus_generic_treaty
		
		relative_position_id = NTR_taming_the_west
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_taming_the_west
		}
		prerequisite = {
			focus = NTR_future_for_all
		}
		
		bypass = {
			MNC = {
				OR = {
					exists = no
					is_subject = yes
					has_government = fascism
					has_government = neutrality
					
					AND = {
						has_government = communism
						
						has_completed_focus = MNC_kill_democrats
					}
					
					has_completed_focus = MNC_elf_lake_expansion
					
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			NTR_SRS_reclaiming_the_west_completed = yes
			
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_pact_of_tribes_and_clans"
			
			MNC = {
				country_event = {
					id = Ntribes.159
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				MNC = {
					has_government = communism
					
					has_completed_focus = MNC_integrate_democrats
				}
			}
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
			
			modifier = {
				factor = 0
				
				AND = {
					MNC = {
						has_government = communism
						
						has_completed_focus = MNC_kill_democrats
					}
					
					NOT = { has_completed_focus = NTR_defining_our_relationship }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_MNC_strengthen_ties
		icon = GFX_goal_generic_intelligence_exchange
		
		relative_position_id = NTR_the_pact_of_tribes_and_clans
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_pact_of_tribes_and_clans
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			MNC = {
				is_subject = no
				
				OR = {
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
				
				hidden_trigger = {
					NOT = {
						OR = {
							has_government = fascism
							has_government = neutrality
						}
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_MNC_strengthen_ties"
			
			add_ideas = NTR_MNC_amenities_distribution_idea
			
			MNC = {
				effect_tooltip = {
					add_ideas = MNC_NTR_amenities_distribution_idea
				}
				
				hidden_effect = {
					country_event = Ntribes.160
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				NOT = { has_completed_focus = NTR_defining_our_relationship }
				
				check_variable = { NTR_army_AI_factor > 1 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_defining_our_relationship
		icon = GFX_goal_griffon_knights
		
		relative_position_id = NTR_taming_the_west
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_taming_the_west
		}
		prerequisite = {
			focus = NTR_future_for_all
		}
		
		bypass = {
			VED = {
				OR = {
					exists = no
					is_subject = yes
					NOT = { has_government = democratic }
					
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			NTR_SRS_reclaiming_the_west_completed = yes
			
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				VED = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_defining_our_relationship"
			
			VED = {
				country_event = {
					id = Ntribes.158
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
			
			modifier = {
				factor = 0.25
				
				check_variable = { NTR_army_AI_factor < 2 }
				
				NOT = { has_completed_focus = NTR_the_pact_of_tribes_and_clans }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_cloudbury_threat
		icon = GFX_goal_griffonian_republic
		
		relative_position_id = NTR_the_pact_of_tribes_and_clans
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_pact_of_tribes_and_clans
		}
		
		prerequisite = {
			focus = NTR_defining_our_relationship
		}
		
		bypass = {
			FAT = {
				OR = {
					exists = no
					is_subject = yes
					has_government = fascism
					
					AND = {
						has_government = neutrality
						
						has_completed_focus = FAT_enforce_martial_law
					}
					
					OR = {
						has_non_aggression_pact_with = ROOT
						is_in_faction_with = ROOT
					}
				}
				
				#NOT = { country_exists = FAW }
			}
			
			#FAW = { #???
			#	OR = {
			#		exists = no
			#		is_subject = yes
			#		has_government = communism
			#		
			#		AND = {
			#			has_government = fascism
			#			
			#			has_completed_focus = FST_new_dawn_for_the_republic
			#		}
			#		
			#		AND = {
			#			has_government = neutrality
			#			
			#			OR = { # wait for updates #???
			#				has_completed_focus = FST_placate_the_fascists
			#				
			#				has_completed_focus = FST_bending_the_knee
			#			}
			#		}
			#		
			#		OR = {
			#			has_non_aggression_pact_with = ROOT
			#			is_in_faction_with = ROOT
			#		}
			#	}
			#	
			#	NOT = { country_exists = FAT }
			#}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				FAT = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
				
				#FAW = {
				#	exists = yes
				#	
				#	is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				#}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_cloudbury_threat"
		
			FAT = {
				country_event = {
					id = Ntribes.161
					hours = 6
					random = 12
				}
			}
			
			#if = {
			#	limit = {
			#		country_exists = FAW
			#		NOT = { country_exists = FAT }
			#	}
			#	
			#	FAW = {
			#		country_event = {
			#			id = Ntribes.161
			#			hours = 6
			#			random = 12
			#		}
			#	}
			#}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			#modifier = {
			#	factor = 2
			#	
			#	FAW = {
			#		exists = yes
			#		has_government = neutrality
			#		
			#		has_completed_focus = FST_prime_minister_sivenhof
			#	}
			#}
			
			modifier = {
				factor = 1.5
				
				FAT = {
					exists = yes
					
					OR = {
						has_government = democratic
						
						AND = {
							has_government = neutrality
							
							has_completed_focus = FAT_a_pragmatic_cabinet
						}
						
						#AND = {
						#	has_government = communism
						#	
						#	has_completed_focus = FAT_rehabilitatethecriminals
						#}
					}
				}
			}
			
			#modifier = {
			#	factor = 1.25
			#
			#	FAT = {
			#		exists = yes
			#		has_government = communism
			#		
			#		has_completed_focus = FAT_justiceaboveall
			#	}
			#	
			#	FAW = {
			#		exists = yes
			#		has_government = neutrality
			#		
			#		has_completed_focus = FST_keep_rosewing
			#	}
			#}
			
			#modifier = {
			#	factor = 0.5
			#	
			#	FAW = {
			#		exists = yes
			#		has_government = neutrality
			#		
			#		has_completed_focus = FST_look_to_the_nobility
			#	}
			#}
			
			modifier = {
				factor = 0.25
				
				FAT = {
					exists = yes
					has_government = neutrality
					
					has_completed_focus = FAT_plactate_the_generals
				}
			}
			
			modifier = {
				factor = 0
				
				NOT = { has_completed_focus = NTR_MNC_strengthen_ties }
				
				MNC = {
					OR = {
						has_non_aggression_pact_with = ROOT
						is_in_faction_with = ROOT
					}
					
					OR = {
						has_government = democratic
						
						AND = {
							has_government = communism
							
							has_completed_focus = MNC_integrate_democrats
						}
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_southern_investments
		icon = GFX_focus_generic_diplomatic_treaty_pony_griffon
		
		relative_position_id = NTR_the_cloudbury_threat
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_cloudbury_threat
		}
		
		available = {
			is_subject = no
			has_government = democratic
		
			FAT = {
				is_subject = no
				
				OR = {
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
				
				NOT = {
					#country_exists = FAW
					
					hidden_trigger = { has_government = fascism	}
				}
			}
			
			#FAW = {
			#	is_subject = no
			#	
			#	OR = {
			#		has_non_aggression_pact_with = ROOT
			#		is_in_faction_with = ROOT
			#		
			#		has_completed_focus = FST_alliance_of_northern_monarchs
			#	}
			#	
			#	NOT = {
			#		country_exists = FAT
			#		
			#		hidden_trigger = {
			#			OR = {
			#				has_government = fascism
			#				has_government = communism
			#			}
			#		}
			#	}
			#}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_southern_investments"
			
			if = {
				limit = {
					country_exists = FAT
					NOT = { country_exists = FAW }
				}
				
				add_ideas = NTR_FAT_industrial_cooperation_idea
				
				FAT = {
					effect_tooltip = {
						add_ideas = FAT_FAW_NTR_industrial_cooperation_idea
					}
					
					hidden_effect = {
						country_event = Ntribes.162
					}
				}
			}
			
			if = {
				limit = {
					country_exists = FAW
					NOT = { country_exists = FAT }
				}
				
				add_ideas = NTR_FAW_industrial_cooperation_idea
				
				FAW = {
					effect_tooltip = {
						add_ideas = FAT_FAW_NTR_industrial_cooperation_idea
					}
					
					hidden_effect = {
						country_event = Ntribes.162
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}

### "The Polar Star" branch ###

	shared_focus = {
		id = NTR_too_much_blood_already
		icon = GFX_focus_indy_pacifist_state
		
		relative_position_id = NTR_a_free_and_proud_north
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_a_free_and_proud_north
			focus = NTR_the_brother_kingdoms
		}
		
		mutually_exclusive = {
			focus = NTR_reclaim_the_west
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = VEDINA
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_VEDINA
						}
					}
				}
				
				NOT = {
					country_exists = SRS
					
					has_country_flag = NTR_owns_SRS_cores_flag
				}
			}
			else = {
				has_war = no
				is_subject = no
				has_government = democratic
				
				SRS = {
					OR = {
						has_completed_focus = SRS_war_2
						
						AND = {
							SRS_owns_all_cores = yes
							
							NOT = {
								is_subject_of = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_too_much_blood_already"
			
			if = {
				limit = {
					has_idea = NTR_an_executive_monarchy_idea
				}
				
				add_political_power = -100
				add_stability = 0.075
				add_war_support = -0.15
				
				swap_ideas = {
					remove_idea = NTR_an_executive_monarchy_idea
					add_idea = NTR_a_constitutional_monarchy_idea
				}
			}
			else = {
				add_stability = 0.15
				add_war_support = -0.1
			}
			
			remove_state_claim = 522
			remove_state_claim = 542
			remove_state_claim = 561
			remove_state_claim = 585
			remove_state_claim = 601
			
			if = {
				limit = {
					has_idea = NTR_SRS_reclaiming_the_west_beginning_idea
				}
				
				remove_ideas = NTR_SRS_reclaiming_the_west_beginning_idea
			}
			else = {
				SRS = {
					country_event = {
						id = Ntribes.163
						days = 3
						random = 24
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0.25
				
				has_completed_focus = NTR_the_brother_kingdoms
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_ministry_of_foreign_affairs
		icon = GFX_goal_document
		
		relative_position_id = NTR_too_much_blood_already
		x = 1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_too_much_blood_already
		}
		
		available = {
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_ministry_of_foreign_affairs"
			
			add_political_power = 150
			
			unlock_decision_category_tooltip = NTR_trade_category
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0.5
				
				check_variable = { NTR_army_AI_factor > 2 }
			}
			
			modifier = {
				factor = 0.25
				
				check_variable = { NTR_army_AI_factor > 3 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_conquerors_of_the_ices
		icon = GFX_goal_continuous_naval_production
		
		relative_position_id = NTR_the_ministry_of_foreign_affairs
		x = 1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_the_ministry_of_foreign_affairs
		}
		prerequisite = {
			focus = NTR_future_for_all
		}
		
		available = {
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_conquerors_of_the_ices"
			
			set_technology = { icebreakers_technology = 1 }
			
			add_ideas = NTR_the_great_ice_fleet_idea
			
			hidden_effect = {
				country_event = Ntribes.994 # swap id #???
				log = "[GetDateText]: [Root.GetName]: self-triggering event Ntribes.994 started"
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_sunstriker_investments
		icon = GFX_goal_generic_build_navy
		
		relative_position_id = NTR_the_conquerors_of_the_ices
		x = 1
		y = 1
		
		cost = 7
		
		prerequisite = {
			focus = NTR_the_conquerors_of_the_ices
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			MNC = {
				is_subject = no
				
				OR = {
					has_government = democratic
					has_government = communism
				}
				
				NOT = { has_completed_focus = MNC_elf_lake_expansion }
				
				all_of_scopes = {
					array = owned_states
					
					is_coastal = no
				}
				
				hidden_trigger = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_sunstriker_investments"
			
			MNC = {
				country_event = {
					id = Ntribes.164
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				MNC = { has_government = communism }
			}
			
			modifier = {
				factor = 0
				
				MNC = {
					has_government = communism
					
					has_completed_focus = MNC_kill_democrats
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_establishing_the_northern_trading_company
		icon = GFX_goal_generic_trade
		
		relative_position_id = NTR_the_ministry_of_foreign_affairs
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_ministry_of_foreign_affairs
		}
		prerequisite = {
			focus = NTR_future_for_all
		}
		
		available = {
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establishing_the_northern_trading_company"
			
			add_country_leader_trait = NTR_trade_representative_trait
			
			custom_effect_tooltip = NTR_unlocks_advanced_trade_decisions_tooltip
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 50
			
			modifier = {
				factor = var:NTR_external_links
				
				has_variable = NTR_external_links
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_most_important_port_in_the_north
		icon = GFX_goal_dockyard_generic_psody
		
		relative_position_id = NTR_the_conquerors_of_the_ices
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_the_conquerors_of_the_ices
		}
		prerequisite = {
			focus = NTR_establishing_the_northern_trading_company
		}
		
		available = {
			custom_trigger_tooltip = {
				tooltip = NTR_advanced_trade_decisions_half_completed_tooltip
				
				check_variable = { NTR_external_trade_infrastructure_sum_var > 2 }
			}
			
			custom_trigger_tooltip = {
				tooltip = NTR_worthy_trading_message_tooltip
				
				check_variable = { NTR_icebreakers_convoys_reversed_ratio_var < 0.5 }
			}
			
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_most_important_port_in_the_north"
			
			add_political_power = 100
			
			add_ideas = NTR_dockyards_construction_efforts_idea
			
			hidden_effect = {
				country_event = Ntribes.197 # Contract mechanic
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_from_haukland_to_bakara
		icon = GFX_goal_generic_coastal_navy
		
		relative_position_id = NTR_the_most_important_port_in_the_north
		x = 0
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_the_most_important_port_in_the_north
		}
		
		available = {
			custom_trigger_tooltip = {
				tooltip = NTR_advanced_trade_decisions_completed_tooltip
				
				check_variable = { NTR_external_trade_infrastructure_sum_var > 5 }
			}
			
			custom_trigger_tooltip = {
				tooltip = NTR_excellent_trading_message_tooltip
				
				check_variable = {
					var = num_equipment@icebreaker
					compare = greater_than_or_equals
					value = NTR_amount_of_required_icebreakers_var?1
				}
			}
			
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_from_haukland_to_bakara"
			
			if = {
				limit = {
					NOT = { has_completed_focus = NTR_vedinas_tutelage }
				}
				
				swap_ideas = {
					remove_idea = NTR_free_trade_idea
					add_idea = NTR_extensive_free_trade_idea
				}
			}
			else = {
				add_ideas = NTR_free_trade_idea
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}

# Mid-Game subbranch #

	shared_focus = {
		id = NTR_future_for_all
		icon = GFX_goal_griffon_harmony_char
		
		relative_position_id = NTR_northern_free_trade_area
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_reclaim_the_west
			focus = NTR_too_much_blood_already
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			if = {
				limit = {
					has_completed_focus = NTR_reclaim_the_west
				}
				
				NTR_SRS_reclaiming_the_west_completed = yes
			}
			else_if = { # flag or tooltip? #???
				limit = {
					has_completed_focus = NTR_too_much_blood_already
				}
				
				NOT = { has_idea = NTR_northern_war }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_future_for_all"
			
			add_political_power = 75
			add_stability = 0.025
			
			unlock_decision_category_tooltip = NTR_griffon_race_technologies_category
			
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = NTR_griffon_race_technologies_category_flag }
					}
					
					set_country_flag = NTR_griffon_race_technologies_category_flag
					
					country_event = Ntribes.992
					log = "[GetDateText]: [Root.GetName]: self-triggering event Ntribes.992 started"
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
			
			modifier = {
				factor = 0
				
				OR = {
					AND = {
						has_country_flag = NTR_owns_SRS_cores_flag
						
						NOT = { has_completed_focus = NTR_taming_the_west }
					}
					
					NOT = { has_completed_focus = NTR_the_ministry_of_foreign_affairs }
				}
			}
		}
	}

### "New Friends" branch ###

	shared_focus = {
		id = NTR_gazing_to_the_east
		icon = GFX_goal_unknown # need an icon #???
		
		relative_position_id = NTR_defining_our_relationship
		x = 1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_future_for_all
		}
		
		prerequisite = {
			focus = NTR_defining_our_relationship
			focus = NTR_establishing_the_northern_trading_company
		}
		
		bypass = {
			HLR = {
				OR = {
					is_subject_of = ROOT
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			if = {
				limit = {
					country_exists = HLR
				}
				
				HLR = {
					is_subject = no
					
					has_country_flag = HLR_Unification
				}
			}
			else = {
				country_exists = DED
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_gazing_to_the_east"
			
			if = {
				limit = {
					HLR = {
						exists = yes
						
						is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
					}
				}
				
				HLR = {
					country_event = {
						id = Ntribes.165
						hours = 6
						random = 12
					}
				}
			}
			else = {
				unlock_decision_tooltip = {
					decision = NTR_DED_HLR_bunkers
					show_effect_tooltip = yes
				}
				
				hidden_effect = {
					set_country_flag = NTR_DED_HLR_border_bunkers
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 100
				
				OR = {
					DED = { is_justifying_wargoal_against = ROOT }
					HLR = { is_justifying_wargoal_against = ROOT }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_together_into_the_new_world
		icon = GFX_focus_arcturus_order
		
		relative_position_id = NTR_gazing_to_the_east
		x = 0
		y = 1
		
		cost = 12
		
		prerequisite = {
			focus = NTR_gazing_to_the_east
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			HLR = {
				OR = {
					is_subject_of = ROOT
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
				
				hidden_trigger = {
					has_government = democratic
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_together_into_the_new_world"
			
			effect_tooltip = {
				if = {
					limit = {
						NOT = {
							OR = {
								has_guaranteed = HLR
								is_in_faction_with = HLR
							}
						}
					}
					
					diplomatic_relation = {
						country = HLR
						relation = guarantee
						active = yes
					}
				}
				if = {
					limit = {
						NOT = { has_military_access_to = HLR }
					}
					
					diplomatic_relation = {
						country = HLR
						relation = military_access
						active = yes
					}
				}
			}
			
			HLR = {
				effect_tooltip = {
					add_ideas = HLR_NTR_friendship_idea
					
					custom_effect_tooltip = NTR_50_percent_boost_for_all_researched_technologies_of_ROOT_tooltip
					
					if = {
						limit = {
							NOT = {
								OR = {
									has_guaranteed = ROOT
									is_in_faction_with = ROOT
								}
							}
						}
						
						diplomatic_relation = {
							country = ROOT
							relation = guarantee
							active = yes
						}
					}
					if = {
						limit = {
							NOT = { has_military_access_to = ROOT }
						}
						
						diplomatic_relation = {
							country = ROOT
							relation = military_access
							active = yes
						}
					}
				}
				
				country_event = Ntribes.166
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}

# End-game subcluster #

	shared_focus = {
		id = NTR_glory_to_the_north
		icon = GFX_goal_crown_and_swords
		
		relative_position_id = NTR_together_into_the_new_world
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_cloudbury_threat
		}
		prerequisite = {
			focus = NTR_gazing_to_the_east
		}
		
		available = {
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_glory_to_the_north"
			
			add_ideas = NTR_glory_to_the_north_idea
			
			hidden_effect = {
				country_event = {
					id = Ntribes.124
					days = 30
					random = 240
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_polar_star
		icon = GFX_goal_white_magic_symbol # unique icon #???
		
		relative_position_id = NTR_together_into_the_new_world
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_most_important_port_in_the_north
		}
		prerequisite = {
			focus = NTR_gazing_to_the_east
		}
		
		available = {
			custom_trigger_tooltip = {
				tooltip = NTR_advanced_trade_decisions_completed_tooltip
				
				check_variable = { NTR_external_trade_infrastructure_sum_var > 5 } #???
			}
			
			is_subject = no
			has_government = democratic
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_polar_star"
			
			unlock_decision_category_tooltip = NTR_the_polar_star_category
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0.5
				
				OR = {
					check_variable = { NTR_army_AI_factor > 2 }
					check_variable = { NTR_navy_AI_factor > 2 }
				}
			}
			
			modifier = {
				factor = 0.25
				
				OR = {
					check_variable = { NTR_army_AI_factor > 3 }
					check_variable = { NTR_navy_AI_factor > 3 }
				}
			}
		}
	}

### "Ambitions don't End" branch ###

	shared_focus = {
		id = NTR_industrial_assistance
		icon = GFX_goal_chn_economic_plan
		
		relative_position_id = NTR_glory_to_the_north
		x = 0
		y = 1
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_ambitions_do_not_end_focus_tree
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			custom_trigger_tooltip = {
				tooltip = has_outdated_industry_tt
				
				check_variable = {
					var = EaW_society_development_var
					compare = greater_than_or_equals
					value = 5
				}
			}
			
			HLR = {
				OR = {
					AND = {
						has_non_aggression_pact_with = ROOT
						is_guaranteed_by = ROOT
						has_guaranteed = ROOT
					}
					
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
				
				hidden_trigger = {
					has_government = democratic
				}
				
				#has_country_flag = NTR_trade_infrastructure_is_constructed_flag #???
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_industrial_assistance"
			
			HLR = {
				random_owned_controlled_state = {
					limit = {
						industrial_complex > 0
						
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						
						is_core_of = PREV
						NOT = { is_core_of = DED }
					}
					
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					
					set_variable = { PREV.HLR_NTR_state_with_bonus_infrastructure_and_complex = THIS }
				}
				
				random_owned_controlled_state = {
					limit = {
						arms_factory > 0
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						
						is_core_of = PREV
						NOT = { is_core_of = DED }
					}
					
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					
					set_variable = { PREV.HLR_NTR_state_with_bonus_infrastructure_and_factory = THIS }
				}
				
				hidden_effect = {
					country_event = Ntribes.153
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_integration_of_societies
		icon = GFX_goal_generic_intelligence_exchange_pony_griffon
		
		relative_position_id = NTR_industrial_assistance
		x = 0
		y = 1
		
		prerequisite = {
			focus = NTR_industrial_assistance
		}
		
		cost = 8
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				HLR = {
					has_government = democratic
					
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_integration_of_societies"
			
			add_ideas = NTR_HLR_joint_development_idea
			
			HLR = {
				add_ideas = HLR_NTR_joint_development_idea
				
				if = {
					limit = {
						ROOT = { is_in_tech_sharing_group = Northern_griffonia_science_organisation_democratic_full }
					}
					
					add_to_tech_sharing_group = Northern_griffonia_science_organisation_democratic_full
				}
				else = {
					if = {
						limit = {
							ROOT = { NOT = { is_in_tech_sharing_group = Northern_griffonia_science_organisation_democratic } }
						}
						
						ROOT = { add_to_tech_sharing_group = Northern_griffonia_science_organisation_democratic }
					}
					
					add_to_tech_sharing_group = Northern_griffonia_science_organisation_democratic
				}
				
				hidden_effect = {
					country_event = Ntribes.168
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_expand_the_eastern_frontier
		icon = GFX_goal_naval_effort
		
		relative_position_id = NTR_the_polar_star
		x = 0
		y = 1
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_ambitions_do_not_end_focus_tree
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			custom_trigger_tooltip = {
				tooltip = has_outdated_industry_tt
				
				check_variable = {
					var = EaW_society_development_var
					compare = greater_than_or_equals
					value = 5
				}
			}
			
			hidden_trigger = {
				HLR = {
					has_government = democratic
					
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_expand_the_eastern_frontier"
			
			HLR = {
				diplomatic_relation = {
					country = ROOT
					relation = docking_rights
					active = yes
				}
				
				random_owned_controlled_state = {
					limit = {
						any_province_building_level = {
							building = naval_base
							level > 0
							province = {
								all_provinces = yes
								limit_to_coastal = yes
							}
						}
						
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
						
						is_core_of = PREV
						NOT = { is_core_of = DED }
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
					}
					
					set_variable = { PREV.HLR_NTR_first_state_with_bonus_dockyard_and_naval_base = THIS }
				}
				
				random_owned_controlled_state = {
					limit = {
						any_province_building_level = {
							building = naval_base
							level > 0
							province = {
								all_provinces = yes
								limit_to_coastal = yes
							}
						}
						
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
						
						is_core_of = PREV
						
						NOT = {
							state = PREV.HLR_NTR_first_state_with_bonus_dockyard_and_naval_base
							
							is_core_of = DED
						}
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
					}
					
					set_variable = { PREV.HLR_NTR_second_state_with_bonus_dockyard_and_naval_base = THIS }
				}
				
				hidden_effect = {
					country_event = Ntribes.153
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_establish_arcturian_company
		icon = GFX_goal_new_treaty
		
		relative_position_id = NTR_expand_the_eastern_frontier
		x = 0
		y = 1
		
		prerequisite = {
			focus = NTR_expand_the_eastern_frontier
		}
		
		cost = 8
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				HLR = {
					has_government = democratic
					
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establish_arcturian_company"
			
			custom_effect_tooltip = NTR_establish_arcturian_company_tooltip
			
			hidden_effect = {
				HLR = {
					country_event = Ntribes.154
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_deal_of_the_century
		icon = GFX_focus_generic_diplomatic_treaty_pony_griffon
		
		relative_position_id = NTR_together_into_the_new_world
		x = 0
		y = 4
		
		cost = 6
		
		prerequisite = {
			focus = NTR_integration_of_societies
		}
		prerequisite = {
			focus = NTR_establish_arcturian_company
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				HLR = {
					has_government = democratic
					
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_deal_of_the_century"
			
			if = {
				limit = {
					is_in_faction = no
				}
				
				create_faction = NTR_VED_HLR_faction
			}
			if = {
				limit = {
					has_rule = can_create_factions
				}
				
				set_rule = { can_create_factions = yes }
			}
			
			effect_tooltip = {
				add_to_faction = HLR
			}
			
			HLR = {
				effect_tooltip = {
					if = {
						limit = {
							is_faction_leader = yes
						}
						
						dismantle_faction = yes
					}
					
					swap_ideas = {
						remove_idea = HLR_NTR_joint_development_idea
						add_idea = HLR_NTR_one_future_idea
					}
				}
				
				country_event = {
					id = Ntribes.169
					days = 3
					random = 24
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_reunion_specie
		icon = GFX_goal_equestria
		
		relative_position_id = NTR_industrial_assistance
		x = -2
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_industrial_assistance
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			event_target:equestria = {
				has_war = no
				is_major = yes
				is_subject = no
				has_government = democratic
				
				is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				
				hidden_trigger = {
					exists = yes
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reunion_specie"
			
			country_event = {
				id = Ntribes.170
				days = 3
				random = 24
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_and_their_friends
		icon = GFX_goal_improve_relations_pony_pony
		
		relative_position_id = NTR_reunion_specie
		x = 1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_reunion_specie
		}
		
		bypass = {
			event_target:equestria = {
				num_faction_members < 2
				
				hidden_trigger = {
					has_government = democratic
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			event_target:equestria = {
				has_war = no
				is_major = yes
				is_subject = no
				has_government = democratic
				
				OR = {
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
				
				hidden_trigger = {
					exists = yes
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_and_their_friends"
			
			every_other_country = {
				limit = {
					is_in_faction_with = event_target:equestria
					NOT = { tag = event_target:equestria }
					has_government = democratic
				}
				
				country_event = {
					id = Ntribes.167
					random = 168
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_and_further
		icon = GFX_goal_riv_friends_with_north
		
		relative_position_id = NTR_expand_the_eastern_frontier
		x = 2
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_expand_the_eastern_frontier
		}
		
		bypass = {
			if = {
				limit = {
					has_event_target = RivFed
				}
				
				event_target:RivFed = {
					custom_trigger_tooltip = {
						tooltip = RIV_annexed_the_north_tt
						
						WAT = {
							exists = no
							
							any_of_scopes = {
								array = core_states
								
								is_owned_by = PREV.PREV
							}
						}
						FBK = {
							exists = no
							
							any_of_scopes = {
								array = core_states
								
								is_owned_by = PREV.PREV
							}
						}
						FIR = {
							exists = no
							
							any_of_scopes = {
								array = core_states
								
								is_owned_by = PREV.PREV
							}
						}
						NCH = {
							exists = no
							
							any_of_scopes = {
								array = core_states
								
								is_owned_by = PREV.PREV
							}
						}
					}
					
					is_neighbor_of = HLR
				}
			}
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			HLR = { # communications through The Arcturian Kingdom
				is_subject = no
				has_government = democratic
				
				OR = {
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
			}
			
			any_other_country = {
				OR = {
					original_tag = WAT
					original_tag = FBK
					original_tag = FIR
					original_tag = NCH
				}
				
				exists = yes
				is_subject = no
				has_government = democratic
				
				is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_and_further"
			
			every_other_country = {
				limit = {
					OR = {
						original_tag = WAT
						original_tag = FBK
						original_tag = FIR
						original_tag = NCH
					}
					
					exists = yes
					is_subject = no
				}
				
				if = {
					limit = {
						original_tag = WAT
						
						OR = {
							has_government = democratic
							has_government = communism
						}
					}
					
					country_event = {
						id = Ntribes.167
						hours = 42
					}
				}
				else_if = {
					limit = {
						original_tag = FBK
						
						has_government = democratic
					}
					
					country_event = {
						id = Ntribes.167
						hours = 84
					}
				}
				else_if = {
					limit = {
						original_tag = FIR
						
						has_government = democratic
					}
					
					country_event = {
						id = Ntribes.167
						hours = 126
					}
				}
				else_if = {
					limit = {
						original_tag = NCH
						
						has_government = democratic
					}
					
					country_event = {
						id = Ntribes.167
						hours = 168
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier =  {
				factor = 0
				
				any_other_country = {
					OR = {
						original_tag = WAT
						original_tag = FBK
						original_tag = FIR
						original_tag = NCH
					}
					
					has_war = yes
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_and_further_southeast
		icon = GFX_goal_riv_form_federation
		
		relative_position_id = NTR_and_further
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_and_further
		}
		
		available = {
			is_subject = no
			has_government = democratic
			
			hidden_trigger = {
				HLR = {
					has_government = democratic
					
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			
			if = {
				limit = {
					has_global_flag = river_federation_founded
				}
				
				event_target:RivFed = {
					has_war = no
					is_major = yes
					is_subject = no
					has_government = democratic
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
					
					hidden_trigger = {
						exists = yes
					}
				}
			}
			else = {
				has_global_flag = river_federation_founded
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_and_further_southeast"
			
			if = {
				limit = {
					has_global_flag = river_federation_founded
				}
				
				event_target:RivFed = {
					country_event = {
						id = Ntribes.171
						days = 3
						random = 24
					}
				}
			}
			else = {
				event_target:RIV_fed_race_leader = {
					country_event = {
						id = Ntribes.171
						days = 3
						random = 24
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.1
				
				event_target:RivFed = { has_war = yes }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_final_frontier
		icon = GFX_goal_generic_equestria
		
		relative_position_id = NTR_deal_of_the_century
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_deal_of_the_century
		}
		
		prerequisite = {
			focus = NTR_and_their_friends
			focus = NTR_and_further_southeast
		}
		
		available = {
			has_war = no
			is_subject = no
			has_government = democratic
			
			if = {
				limit = {
					has_completed_focus = NTR_glory_to_the_north
				}
				
				event_target:equestria = {
					is_major = yes
					is_subject = no
					has_government = democratic
					
					has_country_flag = NTR_northland_consulate_general_constructed_flag
					
					hidden_trigger = {
						exists = yes
					}
				}
				
				HLR = {
					is_in_faction_with = ROOT
					
					hidden_trigger = {
						has_government = democratic
					}
				}
				
				if = {
					limit = {
						has_global_flag = river_federation_founded
					}
					
					event_target:RivFed = {
						is_major = yes
						is_subject = no
						has_government = democratic
						
						has_country_flag = NTR_northland_consulate_general_constructed_flag
						
						hidden_trigger = {
							exists = yes
						}
					}
				}
				else = {
					has_global_flag = river_federation_founded
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = NTR_the_benefits_of_globalization_tooltip #???
					
					check_variable = { NTR_offsite_dockyards_targets_sum_var = 3 }
					
					NOT = {
						any_of_scopes = {
							array = global.majors
							
							has_government = democratic
							
							any_owned_state = { # owned - essential
								is_coastal = yes
							}
							
							NOT = {
								has_country_flag = NTR_trade_agreement_flag
								
								#is_on_zebrica_continent = yes # When Zebrica #???
							}
						}
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_final_frontier"
			
			if = {
				limit = {
					has_completed_focus = NTR_glory_to_the_north
				}
				
				swap_ideas = {
					remove_idea = NTR_an_executive_monarchy_idea
					add_idea = NTR_the_crown_of_will_idea
				}
			}
			else = {
				swap_ideas = {
					remove_idea = NTR_a_constitutional_monarchy_idea
					add_idea = NTR_conglomerate_of_the_north_idea
				}
			}
			
			hidden_effect = {
				country_event = {
					id = Ntribes.137
					days = 14
					random = 336
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}

##################################################
################ Communism branch ################
##################################################

### Core ###

	shared_focus = {
		id = NTR_establishing_the_general_council
		icon = GFX_goal_support_communism
		
		relative_position_id = NTR_the_coronation
		x = 7
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_coronation
		}
		
		available = {
			has_government = communism
		}
		
		mutually_exclusive = {
			focus = NTR_reorganize_the_royal_council
			focus = NTR_the_isolated_north
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establishing_the_general_council"
			
			add_ideas = NTR_the_northern_general_council_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_transforming_the_old_traditions
		icon = GFX_goal_commune_politics
		
		relative_position_id = NTR_establishing_the_general_council
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_establishing_the_general_council
		}
		
		available = {
			has_government = communism
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_transforming_the_old_traditions"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_traditionalism_influence_dynamic_modifier }
				}
				
				add_stability = 0.05
				
				add_popularity = {
					ideology = neutrality
					popularity = -0.05
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_traditionalism_drift_tooltip
				
				hidden_effect = {
					divide_variable = { NTR_traditionalism_influence_neutrality_drift_var = 2 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_stability = 0.1
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_harmonic_tribes_dynamic_modifier }
				
				check_variable = { party_popularity@democratic < party_popularity@neutrality }
			}
		}
	}
	
	shared_focus = {
		id = NTR_use_guilds_savings
		icon = GFX_focus_empty_coffers
		
		relative_position_id = NTR_establishing_the_general_council
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_establishing_the_general_council
		}
		
		available = {
			has_government = communism
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_use_guilds_savings"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_harmonic_tribes_dynamic_modifier }
				}
				
				add_political_power = 75
				
				add_popularity = {
					ideology = democratic
					popularity = -0.06
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_monarchism_drift_tooltip
				
				hidden_effect = {
					divide_variable = { NTR_harmonic_tribes_democratic_drift_var = 0.02 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_political_power = 150
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_traditionalism_influence_dynamic_modifier }
				
				check_variable = { party_popularity@neutrality < party_popularity@democratic }
			}
		}
	}
	
	shared_focus = {
		id = NTR_dawn_of_the_new_republic
		icon = GFX_focus_generic_support_the_left_right
		
		relative_position_id = NTR_establishing_the_general_council
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_transforming_the_old_traditions
		}
		prerequisite = {
			focus = NTR_use_guilds_savings
		}
		
		available = {
			has_government = communism
			
			has_country_flag = NTR_the_unification_process_is_half_completed_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_dawn_of_the_new_republic"
			
			add_ideas = NTR_a_northern_socialist_state_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_our_western_neighbor
		icon = GFX_goal_socialist_skynavia
		
		relative_position_id = NTR_dawn_of_the_new_republic
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_dawn_of_the_new_republic
		}
		
		bypass = {
			OR = {
				is_subject_of = SRS
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			has_country_flag = NTR_the_unification_process_is_completed_flag
			
			hidden_trigger = {
				SRS = { is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_our_western_neighbor"
			
			if = {
				limit = {
					SRS = { has_civil_war = yes }
				}
				
				if = {
					limit = {
						SRS = { NOT = { has_government = communism } }
					}
					
					add_to_war = {
						targeted_alliance = event_target:SRS_socialist_loyalists_in_the_civil_war_against_asper
						enemy = SRS
					}
				}
			}
			else_if = {
				limit = {
					SRS = {
						exists = yes
						is_subject = no
						has_government = communism
					}
				}
				
				country_event = Ntribes.200
			}
			else = {
				create_wargoal = {
					target = SRS
					type = annex_everything
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
### "United North" branch ###
	
	shared_focus = {
		id = NTR_start_the_unification_process
		icon = GFX_goal_HOL_council_communism
		
		relative_position_id = NTR_our_western_neighbor
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_our_western_neighbor
		}
		
		mutually_exclusive = {
			focus = NTR_free_republics_of_the_north
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = TOWARDS_REVOLUTION
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_TOWARDS_REVOLUTION
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_start_the_unification_process"
			
			swap_ideas = {
				remove_idea = NTR_uneven_development_idea
				add_idea = NTR_merge_efforts_idea
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_integrate_skynavian_practices
		icon = GFX_focus_generic_join_comintern
		
		relative_position_id = NTR_start_the_unification_process
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_start_the_unification_process
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_integrate_skynavian_practices"
			
			unlock_decision_tooltip = NTR_establish_confederation_of_autonomous_cooperatives
			unlock_decision_tooltip = NTR_establish_union_of_northland_workers_councils
			
			hidden_effect = {
				set_country_flag = NTR_skynavian_institutions_unlocked_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.75
				
				has_political_power < 150
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 100
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 50
			}
		}
	}
	
	shared_focus = {
		id = NTR_new_social_programmes
		icon = GFX_goal_generic_soviet_construction
		
		relative_position_id = NTR_integrate_skynavian_practices
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_integrate_skynavian_practices
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_new_social_programmes"
			
			add_stability = 0.1
			
			custom_effect_tooltip = SM_communes_unlocked_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 19 }
				set_variable = { SM_effect_cost_var = -20 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				if = {
					limit = {
						amount_taken_ideas = {
							amount > 0
							
							slots = { theorist }
						}
					}
					
					if = {
						limit = {
							has_idea = NTR_military_theorist
						}
						
						set_variable = { SM_experience_gain_army_var = 0.024 }
					}
					else_if = {
						limit = {
							has_idea = NTR_naval_theorist
						}
						
						set_variable = { SM_basic_navy_experience_var = 0.024 }
					}
					else = {
						set_variable = { SM_basic_air_experience_var = 0.012 }
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_western_resources
		icon = GFX_goal_socialist_industry
		
		relative_position_id = NTR_new_social_programmes
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_new_social_programmes
		}
		
		available = {
			522 = { is_owned_and_controlled_by = ROOT }
			
			has_tech = synth_oil_experiments
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_western_resources"
			
			522 = {
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = synthetic_refinery
					level = 2
					instant_build = yes
				}
				
				hidden_effect = {
					set_state_flag = srs_ntr_oil_work_developed
				}
			}
			
			add_resource = {
				type = oil
				amount = 16
				state = 522
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_always_on_guard
		icon = GFX_goal_communist_science
		
		relative_position_id = NTR_integrate_skynavian_practices
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_integrate_skynavian_practices
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_always_on_guard"
			
			if = {
				limit = {
					has_idea = volunteer_only
				}
				
				swap_ideas = {
					remove_idea = volunteer_only
					add_idea = limited_conscription
				}
			}
			else_if = {
				limit = {
					has_idea = disarmed_nation
				}
				
				add_political_power = -100
				
				swap_ideas = {
					remove_idea = disarmed_nation
					add_idea = limited_conscription
				}
			}
			
			add_ideas = NTR_always_on_guard_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 10
				
				FAT = { # FAW #???
					has_completed_focus = FAT_a_new_dawn
				}
			}
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0
				
				NOT = {
					has_completed_focus = NTR_western_resources
					
					FAT = { # FAW #???
						has_government = communism
						
						has_completed_focus = FAT_a_new_dawn
					}
				}
			}
		}
	}
	
### "Towards Revolutions" Branch ###
	
	shared_focus = {
		id = NTR_free_republics_of_the_north
		icon = GFX_goal_tripartite_pact
		
		relative_position_id = NTR_our_western_neighbor
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_our_western_neighbor
		}
		
		mutually_exclusive = {
			focus = NTR_start_the_unification_process
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = UNITED_NORTH
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_UNITED_NORTH
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				SRS = {
					is_subject = no
					has_government = communism
				}
				
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
			
			has_completed_focus = NTR_industrialization_is_coming_north
			
			custom_trigger_tooltip = {
				tooltip = has_pre_industrial_society_tt
				
				check_variable = {
					var = EaW_society_development_var
					compare = greater_than_or_equals
					value = 4
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_free_republics_of_the_north"
			
			add_ideas = NTR_SRS_social_efforts_idea
			
			SRS = {
				add_ideas = SRS_NTR_social_efforts_idea
				
				hidden_effect = {
					add_ideas = SRS_NTR_communism_check_idea
					
					country_event = Ntribes.251
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_nsc
		icon = GFX_focus_generic_socialist_science
		
		relative_position_id = NTR_free_republics_of_the_north
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_free_republics_of_the_north
		}
		
		available = {
			SRS = {
				is_subject = no
				has_government = communism
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_nsc"
			
			custom_effect_tooltip = NTR_50_percent_boost_for_all_researched_technologies_of_ROOT_tooltip
			
			add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
			
			SRS = {
				add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
				
				hidden_effect = {
					if = {
						limit = {
							NOT = { has_idea = SRS_NTR_communism_check_idea }
						}
						
						add_ideas = SRS_NTR_communism_check_idea
					}
					
					country_event = Ntribes.252
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_designate_communes_rights
		icon = GFX_focus_collective_housing
		
		relative_position_id = NTR_nsc
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_nsc
		}
		
		available = {
			SRS = {
				is_subject = no
				has_government = communism
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_designate_communes_rights"
			
			add_stability = 0.05
			add_war_support = 0.05
			
			custom_effect_tooltip = SM_communes_unlocked_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 29 }
				set_variable = { SM_effect_cost_var = -30 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				if = {
					limit = {
						amount_taken_ideas = {
							amount > 0
							
							slots = { theorist }
						}
					}
					
					if = {
						limit = {
							has_idea = NTR_military_theorist
						}
						
						set_variable = { SM_experience_gain_army_var = 0.024 }
					}
					else_if = {
						limit = {
							has_idea = NTR_naval_theorist
						}
						
						set_variable = { SM_basic_navy_experience_var = 0.024 }
					}
					else = {
						set_variable = { SM_basic_air_experience_var = 0.012 }
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_our_resources
		icon = GFX_goal_market
		
		relative_position_id = NTR_designate_communes_rights
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_designate_communes_rights
		}
		
		available = {
			SRS = {
				is_subject = no
				has_government = communism
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_our_resources"
			
			swap_ideas = {
				remove_idea = NTR_SRS_social_efforts_idea
				add_idea = NTR_SRS_social_efforts_full_idea
			}
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 602 567 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			SRS = {
				swap_ideas = {
					remove_idea = NTR_SRS_social_efforts_idea
					add_idea = NTR_SRS_social_efforts_full_idea
				}
				
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					
					prioritize = { 585 }
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_northern_pact
		icon = GFX_focus_indy_red_griffon_knights
		
		relative_position_id = NTR_nsc
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_nsc
		}
		
		available = {
			SRS = {
				is_subject = no
				has_government = communism
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_northern_pact"
			
			custom_effect_tooltip = NTR_world_revolution_tooltip
			
			if = {
				limit = {
					has_country_flag = demilitarized
				}
				
				clr_country_flag = demilitarized
				
				add_autonomy_ratio = { value = 0.25 }
			}
			
			if = {
				limit = {
					has_idea = volunteer_only
				}
				
				swap_ideas = {
					remove_idea = volunteer_only
					add_idea = limited_conscription
				}
			}
			else_if = {
				limit = {
					has_idea = disarmed_nation
				}
				
				add_political_power = -100
				
				swap_ideas = {
					remove_idea = disarmed_nation
					add_idea = limited_conscription
				}
			}
			
			swap_ideas = {
				remove_idea = NTR_army_of_the_past_millennium_idea
				add_idea = NTR_a_fledgling_modern_army_idea
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 10
				
				FAT = { # FAW #???
					has_completed_focus = FAT_a_new_dawn
				}
			}
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0
				
				NOT = {
					has_completed_focus = NTR_our_resources
					
					FAT = { # FAW #???
						has_government = communism
						
						has_completed_focus = FAT_a_new_dawn
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_new_opportunities
		icon = GFX_goal_red_star_gold_wreath
		
		relative_position_id = NTR_our_western_neighbor
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_start_the_unification_process
			focus = NTR_free_republics_of_the_north
		}
		
		available = {
			has_government = communism
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_new_opportunities"
			
			add_political_power = 100
			
			custom_effect_tooltip = NTR_new_opportunities_tooltip
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_world_around_us
		icon = GFX_goal_socialist_union
		
		relative_position_id = NTR_new_opportunities
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_new_opportunities
		}
		prerequisite = {
			focus = NTR_always_on_guard
			focus = NTR_northern_pact
		}
		
		available = {
			has_government = communism
			
			if = {
				limit = {
					has_completed_focus = NTR_start_the_unification_process
				}
				
				is_subject = no
				has_country_flag = NTR_owns_SRS_cores_flag
			}
			else = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_world_around_us"
			
			add_political_power = 75
			
			if = {
				limit = {
					country_exists = SRS
				}
				
				add_stability = 0.025
				add_war_support = 0.05
			}
			else = {
				add_stability = 0.05
				add_war_support = 0.025
			}
			
			country_event = Ntribes.203
			
			custom_effect_tooltip = unlock_focuses
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}

### "Our Dear Home" branch ###
# "Enemies Everywhere" cluster #

	shared_focus = {
		id = NTR_protect_the_west
		icon = GFX_focus_generic_coastal_fort
		
		relative_position_id = NTR_the_world_around_us
		x = -2
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_cores_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
				
				OR = {
					584 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
					575 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
					430 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_protect_the_west"
			
			custom_effect_tooltip = NTR_protect_the_west_tooltip
			
			hidden_effect = {
				add_NTR_vedinian_line_bunkers = yes
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				OR = {
					430 = { CONTROLLER = { is_a_potential_enemy_or_has_war_with_ROOT = yes } }
					575 = { CONTROLLER = { is_a_potential_enemy_or_has_war_with_ROOT = yes } }
					584 = { CONTROLLER = { is_a_potential_enemy_or_has_war_with_ROOT = yes } }
				}
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_protect_the_east
		icon = GFX_goal_skull_fortification
		
		relative_position_id = NTR_the_world_around_us
		x = 2
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			563 = { is_controlled_by = ROOT }
			573 = { is_controlled_by = ROOT }
			
			custom_trigger_tooltip = {
				tooltip = NTR_eastern_line_available_tooltip
				
				NOT = { # check for defense breakthrough
					563 = {
						any_province_building_level = {
							building = bunker
							level < 11
							province = {
								id = 3330
								id = 9526
								limit_to_border = yes
							}
						}
					}
					573 = {
						any_province_building_level = {
							building = bunker
							level < 11
							province = {
								id = 576
								limit_to_border = yes
							}
						}
					}
				}
			}
			
			hidden_trigger = { # check enemy states #???
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_protect_the_east"
			
			custom_effect_tooltip = NTR_protect_the_east_tooltip
			
			hidden_effect = {
				NTR_add_morker_river_and_vastmush_river_bunkers = yes
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				425 = { CONTROLLER = { is_a_potential_enemy_or_has_war_with_ROOT = yes } }
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
			
			modifier = {
				factor = 0.5
				
				563 = { NOT = { is_fully_controlled_by = ROOT } }
			}
			modifier = {
				factor = 0.5
				
				573 = { NOT = { is_fully_controlled_by = ROOT } }
			}
			
			modifier = {
				factor = 0
				
				# enemy control check #???
			}
		}
	}
	
# "Souther Threat" subbranch #
	
	shared_focus = {
		id = NTR_war_preparations
		icon = GFX_goal_to_the_barricades
		
		relative_position_id = NTR_the_world_around_us
		x = -2
		y = 1
		
		offset = {
			trigger = {
				has_focus_tree = NTR_our_dear_home_focus_tree
			}
			
			x = -2
			y = 0
		}
		
		cost = 6
		
		allow_branch = {
			OR = {
				AND = {
					has_focus_tree = NTR_our_dear_home_focus_tree
					
					FAT = {
						OR = {
							NOT = { has_government = communism }
							exists = no
						}
					}
				}
				
				has_focus_tree = NTR_picnic_time_focus_tree
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		bypass = {
			FAT = {
				exists = yes
				has_government = communism
			}
		}
		
		available = {
			if = {
				limit = {
					has_focus_tree = NTR_our_dear_home_focus_tree
				}
				
				hidden_trigger = {
					has_country_leader = { name = "Northland General Congress" ruling_only = yes }
					has_country_flag = NTR_owns_SRS_cores_flag
				}
			}
			else = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_in_faction_with = SRS
					is_subject_of = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_war_preparations"
			
			add_ideas = NTR_war_preparations_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_protect_the_south
		icon = GFX_focus_ger_bulwark_against_bolshevism
		
		relative_position_id = NTR_the_world_around_us
		x = -3
		y = 2
		
		cost = 5
		
		allow_branch = {
			has_focus_tree = NTR_our_dear_home_focus_tree
			
			FAT = {
				OR = {
					NOT = { has_government = communism }
					exists = no
				}
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			567 = { is_owned_and_controlled_by = ROOT }
			602 = { is_owned_and_controlled_by = ROOT }
			
			if = {
				limit = {
					601 = { NOT = { has_state_flag = SRS_constructed_the_braunles_fortresses } }
				}
				
				601 = { is_owned_and_controlled_by = ROOT }
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
				
				OR = {
					583 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
					474 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
					480 = {
						CONTROLLER = {
							NOT = {
								has_government = communism
								has_non_aggression_pact_with = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_protect_the_south"
			
			custom_effect_tooltip = NTR_protect_the_south_tooltip
			
			hidden_effect = {
				add_NTR_southern_line_bunkers = yes
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = { # tostates #???
				factor = var:NTR_army_AI_factor
				
				OR = {
					FAT = { aggressive_towards_PREV = yes }
					FAW = { aggressive_towards_PREV = yes }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_war_is_not_far_off
		icon = GFX_goal_soviet_tankie
		
		relative_position_id = NTR_war_preparations
		x = 0
		y = 2
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_our_dear_home_focus_tree
		}
		
		prerequisite = {
			focus = NTR_war_preparations
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
				
				FAT = {
					OR = {
						exists = no
						NOT = { has_government = communism }
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_war_is_not_far_off"
			
			add_war_support = 0.05
			add_manpower = 25000
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					
					NOT = {
						OR = {
							state = 601
							state = 677
						}
					}
				}
				
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}

# "Shard of the Revolution" subbranch #

	shared_focus = {
		id = NTR_our_southern_neighbor
		icon = GFX_goal_red_eagle
		
		relative_position_id = NTR_the_world_around_us
		x = -4
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
			
			FAT = {
				exists = yes
				has_government = communism
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		bypass = {
			FAT = {
				OR = {
					AND = {
						has_non_aggression_pact_with = ROOT
						is_guaranteed_by = ROOT
						has_guaranteed = ROOT
					}
					
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			FAT = {
				is_subject = no
				is_in_faction = no
				has_government = communism
				
				hidden_trigger = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_our_southern_neighbor"
			
			FAT = { country_event = Ntribes.253 }
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_bringing_countries_together
		icon = GFX_goal_soviet_factory_town
		
		relative_position_id = NTR_our_southern_neighbor
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_our_southern_neighbor
		}
		
		available = {
			567 = { is_owned_and_controlled_by = ROOT }
			602 = { is_owned_and_controlled_by = ROOT }
			601 = { is_owned_and_controlled_by = ROOT }
			
			FAT = {
				583 = { is_owned_and_controlled_by = PREV }
				474 = { is_owned_and_controlled_by = PREV }
				480 = { is_owned_and_controlled_by = PREV }
				
				OR = {
					AND = {
						has_non_aggression_pact_with = ROOT
						is_guaranteed_by = ROOT
						has_guaranteed = ROOT
					}
					
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_bringing_countries_together"
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 601 574 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			if = {
				limit = {
					574 = { is_owned_and_controlled_by = ROOT }
				}
				
				574 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			601 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			567 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			602 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
			custom_effect_tooltip = ENTER
			
			583 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			474 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			480 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
			effect_tooltip = {
				if = { # Sunstriker shit
					limit = {
						480 = { NOT = { has_state_flag = windford_steel_developed } }
					}
					
					add_resource = {
						type = steel
						amount = 14
						state = 480
					}
				}
			}
			
			hidden_effect = {
				FAT = { country_event = Ntribes.256 }
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				check_variable = {
					var = EaW_society_development_var
					compare = less_than_or_equals
					value = 5
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_cooperation_agreement
		icon = GFX_goal_chn_red_economic_boom
		
		relative_position_id = NTR_bringing_countries_together
		x = -1
		y = 1
		
		cost = 10
		
		prerequisite = {
			focus = NTR_bringing_countries_together
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
				
				FAT = {
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_cooperation_agreement"
			
			add_ideas = NTR_FAT_open_borders_idea
			
			FAT = {
				add_ideas = FAT_NTR_open_borders_idea
				
				hidden_effect = {
					country_event = Ntribes.257
				}
			}
			
			custom_effect_tooltip = ENTER
			
			if = {
				limit = {
					NOT = { is_in_tech_sharing_group = Northern_griffonia_science_organisation_communism }
				}
				
				add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
			}
			
			FAT = { add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism }
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				check_variable = {
					var = EaW_society_development_var
					compare = less_than_or_equals
					value = 5
				}
			}
		}
	}

# "Protecting the Lake" subbranch #

	shared_focus = {
		id = NTR_elf_lake_agreement
		icon = GFX_focus_generic_treaty_red
		
		relative_position_id = NTR_the_world_around_us
		x = 4
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
			
			MNC = {
				OR = {
					exists = no
					NOT = { has_government = communism }
				}
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		bypass = {
			MNC = {
				OR = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			MNC = {
				is_subject = no
				is_in_faction = no
				
				NOT = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
					
					has_completed_focus = MNC_elf_lake_expansion
				}
				
				hidden_trigger = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_elf_lake_agreement"
			
			MNC = {
				country_event = {
					id = Ntribes.254
					days = 3
					random = 24
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 5
				
				MNC = { has_war = yes }
			}
			modifier = {
				factor = 0.25
				
				MNC = {
					has_government = democratic
					
					has_completed_focus = MNC_kill_commies
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_protect_the_lake
		icon = GFX_goal_nested_fortifications
		
		relative_position_id = NTR_the_world_around_us
		x = 3
		y = 2
		
		cost = 5
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
			
			MNC = {
				OR = {
					exists = no
					NOT = { has_government = communism }
				}
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			574 = { is_owned_and_controlled_by = ROOT }
			
			OR = {
				AND = {
					has_completed_focus = NTR_elf_lake_agreement
					
					NOT = { has_country_flag = NTR_agreed_to_cooperate_flag }
				}
				
				MNC = {
					OR = {
						exists = no
						has_government = fascism
						has_government = neutrality
						
						AND = {
							is_subject = yes
							
							NOT = { is_subject_of = ROOT }
						}
						
						has_completed_focus = MNC_elf_lake_expansion
						
						is_a_potential_enemy_or_has_war_with_ROOT = yes
					}
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_protect_the_lake"
			
			574 = {
				custom_effect_tooltip = NTR_protect_the_lake_tooltip
				
				hidden_effect = {
					if = {
						limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
						add_building_construction = {
							type = bunker
							level = 3
							instant_build = yes
							province = 1517
						}
					}
					else = {
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = level_1 } }
							set_building_level = {
								type = bunker
								level = 1
								instant_build = yes
								province = 1517
							}
						}
						else_if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = level_2 } }
							set_building_level = {
								type = bunker
								level = 2
								instant_build = yes
								province = 1517
							}
						}
						else = {
							if = {
								limit = {
									NOT = {
										has_game_rule = { rule = maximum_fort_level option = level_3 }
										any_province_building_level = {
											building = bunker
											level < 1 # 1-...
											province = { id = 1517 }
										}
									}
								}
								if = {
									limit = {
										NOT = {
											has_game_rule = { rule = maximum_fort_level option = level_5 }
											any_province_building_level = {
												building = bunker
												level < 2 # 2-...
												province = { id = 1517 }
											}
										}
									}
									if = {
										limit = {
											NOT = {
												has_game_rule = { rule = maximum_fort_level option = level_6 }
												any_province_building_level = {
													building = bunker
													level < 3 # 3-...
													province = { id = 1517 }
												}
											}
										}
										if = {
											limit = {
												NOT = {
													has_game_rule = { rule = maximum_fort_level option = level_7 }
													any_province_building_level = {
														building = bunker
														level < 4 # 4-...
														province = { id = 1517 }
													}
												}
											}
											if = {
												limit = {
													NOT = {
														has_game_rule = { rule = maximum_fort_level option = level_8 }
														any_province_building_level = {
															building = bunker
															level < 5 # 5-...
															province = { id = 1517 }
														}
													}
												}
												if = {
													limit = {
														NOT = {
															has_game_rule = { rule = maximum_fort_level option = level_9 }
															any_province_building_level = {
																building = bunker
																level < 6 # 6-...
																province = { id = 1517 }
															}
														}
													}
													if = {
														limit = {
															NOT = {
																has_game_rule = { rule = maximum_fort_level option = level_9 }
																any_province_building_level = {
																	building = bunker
																	level < 7 # 7-...
																	province = { id = 1517 }
																}
															}
														}
														set_building_level = {
															type = bunker
															level = 10
															instant_build = yes
															province = 1517
														}
													}
													else = {
														set_building_level = {
															type = bunker
															level = 9
															instant_build = yes
															province = 1517
														}
													}
												}
												else = {
													set_building_level = {
														type = bunker
														level = 8
														instant_build = yes
														province = 1517
													}
												}
											}
											else = {
												set_building_level = {
													type = bunker
													level = 7
													instant_build = yes
													province = 1517
												}
											}
										}
										else = {
											set_building_level = {
												type = bunker
												level = 6
												instant_build = yes
												province = 1517
											}
										}
									}
									else = {
										set_building_level = {
											type = bunker
											level = 5
											instant_build = yes
											province = 1517
										}
									}
								}
								else = {
									set_building_level = {
										type = bunker
										level = 4
										instant_build = yes
										province = 1517
									}
								}
							}
							else = {
								set_building_level = {
									type = bunker
									level = 3
									instant_build = yes
									province = 1517
								}
							}
						}
					}
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				
				prioritize = { 574 }
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				MNC = {
					focus_progress = { focus = MNC_elf_lake_expansion progress > 0 }
					
					exists = yes
				}
			}
			
			modifier = {
				factor = 0
				
				NOT = { has_completed_focus = NTR_elf_lake_agreement }
				
				MNC = {
					is_ai = no
					
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_development_of_the_border_sector
		icon = GFX_goal_improve_industry
		
		relative_position_id = NTR_elf_lake_agreement
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_elf_lake_agreement
		}
		
		available = {
			MNC = {
				OR = {
					AND = {
						ROOT = { has_country_flag = NTR_agreed_to_cooperate_flag }
						has_non_aggression_pact_with = ROOT
						
						OR = {
							has_government = democratic
							has_government = communism
						}
						
						hidden_trigger = {
							exists = yes
							
							is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
						}
					}
					
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_development_of_the_border_sector"
			
			574 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				if = {
					limit = {
						arms_factory > 0
					}
					
					remove_building = {
						type = arms_factory
						level = 1
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				else = {
					ROOT = { add_political_power = 50 }
				}
			}
			573 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			custom_effect_tooltip = ENTER
			
			MNC = {
				459 = {
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				
				hidden_effect = {
					country_event = Ntribes.256
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = 0.5
				
				check_variable = {
					var = EaW_society_development_var
					compare = less_than_or_equals
					value = 5
				}
			}
		}
	}

# "Surrounded by Enemies" subbranch #

	shared_focus = {
		id = NTR_surrounded_by_enemies
		icon = GFX_goal_GRF_commies_win
		
		relative_position_id = NTR_the_world_around_us
		x = 4
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
			
			MNC = {
				exists = yes
				has_government = communism
			}
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		bypass = {
			MNC = {
				OR = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			MNC = {
				is_subject = no
				is_in_faction = no
				has_government = communism
				
				hidden_trigger = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_surrounded_by_enemies"
			
			MNC = {
				country_event = {
					id = Ntribes.255
					hours = 6
					random = 12
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_connect_the_capitals
		icon = GFX_goal_generic_construct_infrastructure
		
		relative_position_id = NTR_surrounded_by_enemies
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_surrounded_by_enemies
		}
		
		available = {
			574 = { is_owned_and_controlled_by = ROOT }
			573 = { is_owned_and_controlled_by = ROOT }
			563 = { is_owned_and_controlled_by = ROOT }
			
			MNC = {
				459 = { is_owned_and_controlled_by = PREV }
				475 = { is_owned_and_controlled_by = PREV }
				
				OR = {
					AND = {
						has_non_aggression_pact_with = ROOT
						is_guaranteed_by = ROOT
						has_guaranteed = ROOT
					}
					
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = { # more infra #???
			log = "[GetDateText]: [Root.GetName]: Focus NTR_connect_the_capitals"
			
			574 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			573 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			573 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
			custom_effect_tooltip = ENTER
			
			459 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			475 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
			hidden_effect = {
				MNC = {
					country_event = Ntribes.256
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				check_variable = {
					var = EaW_society_development_var
					compare = less_than_or_equals
					value = 5
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_our_common_destiny
		icon = GFX_goal_the_faculty
		
		relative_position_id = NTR_connect_the_capitals
		x = 1
		y = 1
		
		cost = 10
		
		prerequisite = {
			focus = NTR_connect_the_capitals
		}
		
		available = {
			hidden_trigger = {
				MNC = {
					OR = {
						AND = {
							has_non_aggression_pact_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
						}
						
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
				
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_our_common_destiny"
			
			add_ideas = NTR_MNC_industrial_cooperation_idea
			
			MNC = {
				add_ideas = MNC_NTR_industrial_cooperation_idea
				
				hidden_effect = {
					country_event = Ntribes.257
				}
			}
			
			custom_effect_tooltip = ENTER
			
			if = {
				limit = {
					NOT = { is_in_tech_sharing_group = Northern_griffonia_science_organisation_communism }
				}
				
				add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
			}
			
			MNC = {
				add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				check_variable = {
					var = EaW_society_development_var
					compare = less_than_or_equals
					value = 5
				}
			}
		}
	}

# Core #

	shared_focus = {
		id = NTR_continue_the_integration_process
		icon = GFX_goal_HOL_council_communism
		
		relative_position_id = NTR_the_world_around_us
		x = 0
		y = 1
		
		cost = 8
		
		allow_branch = {
			has_country_flag = NTR_our_dear_home_branch
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_cores_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_continue_the_integration_process"
			
			swap_ideas = {
				remove_idea = NTR_merge_efforts_idea
				add_idea = NTR_uncompleted_unification_idea
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_uniting_species
		icon = GFX_goal_red_star
		
		relative_position_id = NTR_continue_the_integration_process
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_continue_the_integration_process
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_uniting_species"
			
			add_ideas = NTR_union_of_species_idea
			
			unlock_decision_category_tooltip = NTR_griffon_race_technologies_category
			
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = NTR_griffon_race_technologies_category_flag }
					}
					
					set_country_flag = NTR_griffon_race_technologies_category_flag
					
					country_event = Ntribes.992
					log = "[GetDateText]: [Root.GetName]: self-triggering event Ntribes.992 started"
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_extend_self_government_rights
		icon = GFX_goal_soviet_papers
		
		relative_position_id = NTR_continue_the_integration_process
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_continue_the_integration_process
		}
		
		available = {
			has_completed_focus = NTR_new_social_programmes
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_extend_self_government_rights"
			
			add_stability = 0.05
			
			every_state = {
				limit = {
					is_core_of = ROOT
				}
				
				add_to_variable = {
					var = SM_static_state_monthly_population_var
					value = 0.2
					tooltip = SM_increase_local_mouthly_population_by_PERCENT_tooltip
				}
				
				add_to_variable = { SM_state_monthly_population_var = 0.2 }
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_complete_the_integration_process
		icon = GFX_goal_HOL_council_communism
		
		relative_position_id = NTR_uniting_species
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_uniting_species
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_cores_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_complete_the_integration_process"
			
			remove_ideas = NTR_uncompleted_unification_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_develop_the_revolutionary_consciousness
		#icon = GFX_ #???
		
		relative_position_id = NTR_extend_self_government_rights
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_extend_self_government_rights
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_cores_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_develop_the_revolutionary_consciousness"
			
			add_war_support = 0.05
			
			custom_effect_tooltip = SM_weekly_ponypower_unlocked_tooltip
			
			hidden_effect = {
				set_country_flag = SM_weekly_ponypower_unlocked_flag
				
				if = {
					limit = {
						check_variable = { SM_country_amount_of_factories > 0 }
					}
					
					SM_calculate_bonus_ponypower_percentage = yes
					
					set_variable = { SM_weekly_manpower_var = 1 }
					add_to_variable = { SM_weekly_manpower_var = modifier@industrial_capacity_factory }
					multiply_variable = { SM_weekly_manpower_var = 20 }
					multiply_variable = { SM_weekly_manpower_var = SM_bonus_consciptors_percentage_var }
					multiply_variable = { SM_country_amount_of_factories = SM_country_amount_of_factories }
				}
				
				calculate_ai_bahavior = yes
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_northern_beacon_of_freedom
		icon = GFX_goal_red_menace_griffonia
		
		relative_position_id = NTR_continue_the_integration_process
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_uniting_species
		}
		prerequisite = {
			focus = NTR_extend_self_government_rights
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_northern_beacon_of_freedom"
			
			swap_ruler_traits = {
				remove = NTR_general_council_trait
				add = NTR_northland_general_council_trait
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_selective_foreign_policy
		icon = GFX_goal_tripartite_pact
		
		relative_position_id = NTR_complete_the_unification_process
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_complete_the_unification_process
		}
		prerequisite = {
			focus = NTR_northern_beacon_of_freedom
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_selective_foreign_policy"
			
			swap_ideas = {
				remove_idea = NTR_insignificant_isolationism_idea
				add_idea = NTR_trade_with_comrades_idea
			}
			
			hidden_effect = {
				clr_country_flag = trade_laws_blocked
				set_country_flag = FLO_forced_limited
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_establishing_the_supracommunal_committee
		icon = GFX_goal_state_economy
		
		relative_position_id = NTR_extend_self_government_rights
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_extend_self_government_rights
		}
		
		available = {
			has_completed_focus = NTR_the_future_planning_committee
			
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establishing_the_supracommunal_committee"
			
			add_stability = 0.025
			add_war_support = 0.025
			
			custom_effect_tooltip = RS_20_percent_bonus_tooltip
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_spirit_of_socialism
		icon = GFX_goal_socialist_griffonia
		
		relative_position_id = NTR_northern_beacon_of_freedom
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_selective_foreign_policy
		}
		prerequisite = {
			focus = NTR_establishing_the_supracommunal_committee
		}
		prerequisite = {
			focus = NTR_northern_beacon_of_freedom
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Northland General Congress" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_spirit_of_socialism"
			
			add_political_power = 100
			add_war_support = 0.025
			
			add_ideas = NTR_the_spirit_of_socialism_idea
			
			unlock_decision_tooltip = improve_society_development_decision
			
			hidden_effect = {
				set_country_flag = can_improve_society_development
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}

### "Picnic time" branch ###

	shared_focus = {
		id = NTR_expand_military_cooperation_threaty
		icon = GFX_focus_generic_treaty_red
		
		relative_position_id = NTR_the_world_around_us
		x = 2
		y = 1
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_picnic_time_focus_tree
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_expand_military_cooperation_threaty"
			
			add_relation_modifier = {
				target = SRS
				modifier = NTR_SRS_military_cooperation_threaty_license
			}
			
			SRS = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_gathering_of_the_clouds
		icon = GFX_goal_artillery_factories
		
		relative_position_id = NTR_the_world_around_us
		x = 0
		y = 1
		
		cost = 10
		
		allow_branch = {
			has_focus_tree = NTR_picnic_time_focus_tree
		}
		
		prerequisite = {
			focus = NTR_the_world_around_us
		}
		
		available = {
			has_government = communism
			
			OR = {
				AND = {
					has_non_aggression_pact_with = SRS
					is_guaranteed_by = SRS
					has_guaranteed = SRS
				}
				
				is_subject_of = SRS
				is_in_faction_with = SRS
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_gathering_of_the_clouds"
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				
				ROOT = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						
						add_extra_state_shared_building_slots = 1
						
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_war_construction_AI_factor
				
				has_variable = NTR_war_construction_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_breaking_the_shackles
		icon = GFX_goal_crush_monarchy
		
		relative_position_id = NTR_war_preparations
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		
		bypass = {
			VED = {
				exists = yes
				has_government = communism
				
				OR = {
					is_subject = no
					is_subject_of = SRS
				}
			}
		}
		
		available = {
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_breaking_the_shackles"
			
			add_ideas = NTR_VED_tactical_trainings_idea
			SRS = { add_ideas = SRS_VED_tactical_trainings_idea }
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				SRS = {
					OR = {
						has_war_with = VED
						has_wargoal_against = VED
						is_justifying_wargoal_against = VED
						
						VED = { aggressive_towards_PREV = yes }
					}
				}
			}
			
			modifier = {
				factor = 0
				
				NOT = {
					has_war_with = VED
					
					OR = {
						has_completed_focus = NTR_preventive_strike
						has_completed_focus = NTR_one_future_for_all
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_northern_shipyards
		icon = GFX_goal_generic_construct_naval_dockyard
		
		relative_position_id = NTR_breaking_the_shackles
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_breaking_the_shackles
		}
		
		available = {
			has_completed_focus = NTR_our_resources
			
			has_government = communism
			
			VED = {
				OR = {
					AND = {
						exists = yes
						has_government = communism
					}
					
					SRS_owns_all_cores = yes
				}
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_northern_shipyards"
			
			if = {
				limit = {
					country_exists = VED
				}
				
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								free_building_slots = {
									building = dockyard
									size > 0
									include_locked = yes
								}
								
								NOT = { state = PREV.PREV }
							}
							
							add_extra_state_shared_building_slots = 1
							
							add_building_construction = {
								type = dockyard
								level = 1
								instant_build = yes
							}
						}
					}
				}
				
				SRS = { one_random_dockyard = yes }
				VED = { one_random_dockyard = yes }
			}
			else = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								free_building_slots = {
									building = dockyard
									size > 0
									include_locked = yes
								}
								
								NOT = { state = PREV.PREV }
							}
							
							add_extra_state_shared_building_slots = 1
							
							add_building_construction = {
								type = dockyard
								level = 1
								instant_build = yes
							}
						}
					}
				}
				
				SRS = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = dockyard
								size > 0
								include_locked = yes
							}
						}
						
						add_extra_state_shared_building_slots = 1
						
						add_building_construction = {
							type = dockyard
							level = 1
							instant_build = yes
						}
						
						PREV.PREV = {
							random_owned_controlled_state = {
								limit = {
									NOT = { state = PREV.PREV }
									
									free_building_slots = {
										building = dockyard
										size > 0
										include_locked = yes
									}
								}
								
								add_extra_state_shared_building_slots = 1
								
								add_building_construction = {
									type = dockyard
									level = 1
									instant_build = yes
								}
							}
						}
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_navy_AI_factor
				
				has_variable = NTR_navy_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
		}
	}
	
	shared_focus = {
		id = NTR_laying_the_keels_of_the_relovution
		icon = GFX_focus_hol_legacy_of_the_de_zeven_provincien_mutiny
		
		relative_position_id = NTR_northern_shipyards
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_northern_shipyards
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_laying_the_keels_of_the_relovution"
			
			add_ideas = NTR_SRS_VED_polar_fleet_idea
			SRS = { add_ideas = NTR_SRS_VED_polar_fleet_idea }
			
			if = {
				limit = {
					VED = {
						exists = yes
						has_government = communism
					}
				}
				
				VED = { add_ideas = NTR_SRS_VED_polar_fleet_idea }
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_navy_AI_factor
				
				has_variable = NTR_navy_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_spirit_of_the_revolution
		icon = GFX_goal_GRF_commies_win
		
		relative_position_id = NTR_laying_the_keels_of_the_relovution
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_laying_the_keels_of_the_relovution
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_spirit_of_the_revolution"
			
			add_ideas = NTR_spirit_of_the_revolution_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.5
				
				check_variable = { EaW_society_development_var < 5 }
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_old_menace
		icon = GFX_goal_anti_comintern_pact
		
		relative_position_id = NTR_expand_military_cooperation_threaty
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		
		bypass = {
			FAT = {
				exists = yes
				has_government = communism
				
				OR = {
					is_subject = no
					is_subject_of = SRS
				}
			}
		}
		
		available = {
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_old_menace"
			
			custom_effect_tooltip = NTR_protect_the_south_tooltip
			
			hidden_effect = {
				567 = {
					if = {
						limit = {
							is_fully_controlled_by = ROOT
						}
						
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 3
								instant_build = yes
								province = { id = 7630 id = 11429 id = 4624 }
							}
						}
						else = {
							if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = level_1 } }
								set_building_level = {
									type = bunker
									level = 1
									instant_build = yes
									province = { id = 7630 id = 11429 id = 4624 }
								}
							}
							else_if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = level_2 } }
								set_building_level = {
									type = bunker
									level = 2
									instant_build = yes
									province = { id = 7630 id = 11429 id = 4624 }
								}
							}
							else = {
								if = {
									limit = {
										NOT = {
											has_game_rule = { rule = maximum_fort_level option = level_3 }
											any_province_building_level = {
												building = bunker
												level < 1 # 1-...
												province = { id = 7630 id = 11429 id = 4624 }
											}
										}
									}
									if = {
										limit = {
											NOT = {
												has_game_rule = { rule = maximum_fort_level option = level_4 }
												any_province_building_level = {
													building = bunker
													level < 2 # 2-...
													province = { id = 7630 id = 11429 id = 4624 }
												}
											}
										}
										if = {
											limit = {
												NOT = {
													has_game_rule = { rule = maximum_fort_level option = level_5 }
													any_province_building_level = {
														building = bunker
														level < 2 # 3-...
														province = { id = 7630 id = 11429 id = 4624 }
													}
												}
											}
											if = {
												limit = {
													NOT = {
														has_game_rule = { rule = maximum_fort_level option = level_6 }
														any_province_building_level = {
															building = bunker
															level < 3 # 4-...
															province = { id = 7630 id = 11429 id = 4624 }
														}
													}
												}
												if = {
													limit = {
														NOT = {
															has_game_rule = { rule = maximum_fort_level option = level_7 }
															any_province_building_level = {
																building = bunker
																level < 4 # 5-...
																province = { id = 7630 id = 11429 id = 4624 }
															}
														}
													}
													if = {
														limit = {
															NOT = {
																has_game_rule = { rule = maximum_fort_level option = level_8 }
																any_province_building_level = {
																	building = bunker
																	level < 5 # 6-...
																	province = { id = 7630 id = 11429 id = 4624 }
																}
															}
														}
														if = {
															limit = {
																NOT = {
																	has_game_rule = { rule = maximum_fort_level option = level_9 }
																	any_province_building_level = {
																		building = bunker
																		level < 6 # 7-...
																		province = { id = 7630 id = 11429 id = 4624 }
																	}
																}
															}
															set_building_level = {
																type = bunker
																level = 10
																instant_build = yes
																province = { id = 7630 id = 11429 id = 4624 }
															}
														}
														else = {
															set_building_level = {
																type = bunker
																level = 9
																instant_build = yes
																province = { id = 7630 id = 11429 id = 4624 }
															}
														}
													}
													else = {
														set_building_level = {
															type = bunker
															level = 8
															instant_build = yes
															province = { id = 7630 id = 11429 id = 4624 }
														}
													}
												}
												else = {
													set_building_level = {
														type = bunker
														level = 7
														instant_build = yes
														province = { id = 7630 id = 11429 id = 4624 }
													}
												}
											}
											else = {
												set_building_level = {
													type = bunker
													level = 6
													instant_build = yes
													province = { id = 7630 id = 11429 id = 4624 }
												}
											}
										}
										else = {
											set_building_level = {
												type = bunker
												level = 5
												instant_build = yes
												province = { id = 7630 id = 11429 id = 4624 }
											}
										}
									}
									else = {
										set_building_level = {
											type = bunker
											level = 4
											instant_build = yes
											province = { id = 7630 id = 11429 id = 4624 }
										}
									}
								}
								else = {
									set_building_level = {
										type = bunker
										level = 3
										instant_build = yes
										province = { id = 7630 id = 11429 id = 4624 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 2
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_2_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
				}
				602 = {
					if = {
						limit = {
							is_fully_controlled_by = ROOT
						}
						
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 3
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_3_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
					else = {
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 2
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_2_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
				}
				if = {
					limit = {
						574 = { is_owned_and_controlled_by = ROOT }
					}
					
					574 = {
						if = {
							limit = {
								is_fully_controlled_by = ROOT
							}
							
							if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
								add_building_construction = {
									type = bunker
									level = 3
									instant_build = yes
									province = { id = 5674 id = 1517 }
								}
							}
							else = {
								if = {
									limit = { has_game_rule = { rule = maximum_fort_level option = level_1 } }
									set_building_level = {
										type = bunker
										level = 1
										instant_build = yes
										province = { id = 5674 id = 1517 }
									}
								}
								else_if = {
									limit = { has_game_rule = { rule = maximum_fort_level option = level_2 } }
									set_building_level = {
										type = bunker
										level = 2
										instant_build = yes
										province = { id = 5674 id = 1517 }
									}
								}
								else = {
									if = {
										limit = {
											NOT = {
												has_game_rule = { rule = maximum_fort_level option = level_3 }
												any_province_building_level = {
													building = bunker
													level < 1 # 1-...
													province = { id = 5674 id = 1517 }
												}
											}
										}
										if = {
											limit = {
												NOT = {
													has_game_rule = { rule = maximum_fort_level option = level_4 }
													any_province_building_level = {
														building = bunker
														level < 2 # 2-...
														province = { id = 5674 id = 1517 }
													}
												}
											}
											if = {
												limit = {
													NOT = {
														has_game_rule = { rule = maximum_fort_level option = level_5 }
														any_province_building_level = {
															building = bunker
															level < 2 # 3-...
															province = { id = 5674 id = 1517 }
														}
													}
												}
												if = {
													limit = {
														NOT = {
															has_game_rule = { rule = maximum_fort_level option = level_6 }
															any_province_building_level = {
																building = bunker
																level < 3 # 4-...
																province = { id = 5674 id = 1517 }
															}
														}
													}
													if = {
														limit = {
															NOT = {
																has_game_rule = { rule = maximum_fort_level option = level_7 }
																any_province_building_level = {
																	building = bunker
																	level < 4 # 5-...
																	province = { id = 5674 id = 1517 }
																}
															}
														}
														if = {
															limit = {
																NOT = {
																	has_game_rule = { rule = maximum_fort_level option = level_8 }
																	any_province_building_level = {
																		building = bunker
																		level < 5 # 6-...
																		province = { id = 5674 id = 1517 }
																	}
																}
															}
															if = {
																limit = {
																	NOT = {
																		has_game_rule = { rule = maximum_fort_level option = level_9 }
																		any_province_building_level = {
																			building = bunker
																			level < 6 # 7-...
																			province = { id = 5674 id = 1517 }
																		}
																	}
																}
																set_building_level = {
																	type = bunker
																	level = 10
																	instant_build = yes
																	province = { id = 5674 id = 1517 }
																}
															}
															else = {
																set_building_level = {
																	type = bunker
																	level = 9
																	instant_build = yes
																	province = { id = 5674 id = 1517 }
																}
															}
														}
														else = {
															set_building_level = {
																type = bunker
																level = 8
																instant_build = yes
																province = { id = 5674 id = 1517 }
															}
														}
													}
													else = {
														set_building_level = {
															type = bunker
															level = 7
															instant_build = yes
															province = { id = 5674 id = 1517 }
														}
													}
												}
												else = {
													set_building_level = {
														type = bunker
														level = 6
														instant_build = yes
														province = { id = 5674 id = 1517 }
													}
												}
											}
											else = {
												set_building_level = {
													type = bunker
													level = 5
													instant_build = yes
													province = { id = 5674 id = 1517 }
												}
											}
										}
										else = {
											set_building_level = {
												type = bunker
												level = 4
												instant_build = yes
												province = { id = 5674 id = 1517 }
											}
										}
									}
									else = {
										set_building_level = {
											type = bunker
											level = 3
											instant_build = yes
											province = { id = 5674 id = 1517 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
								add_building_construction = {
									type = bunker
									level = 2
									instant_build = yes
									province = { all_provinces = yes limit_to_border = yes }
								}
							}
							else = {
								add_2_border_bunkers_with_maximum_fort_level_rule = yes
							}
						}
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				SRS = {
					OR = {
						has_war_with = FAT
						has_wargoal_against = FAT
						is_justifying_wargoal_against = FAT
						
						FAT = { aggressive_towards_PREV = yes }
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_development_of_crossborder_industry
		icon = GFX_goal_soviet_factory_town
		
		relative_position_id = NTR_the_old_menace
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_the_old_menace
		}
		
		available = {
			has_completed_focus = NTR_our_resources
			
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
			
			FAT = {
				OR = {
					AND = {
						exists = yes
						has_government = communism
						
						NOT = {
							has_war_with = ROOT
							has_war_with = SRS
						}
					}
					
					SRS_owns_all_cores = yes
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_development_of_crossborder_industry"
			
			if = { # Sunstriker shit
				limit = {
					480 = { NOT = { has_state_flag = windford_steel_developed } }
				}
				
				add_resource = {
					type = steel
					amount = 14
					state = 480
				}
				
				hidden_effect = {
					480 = { set_state_flag = windford_steel_developed }
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				#prioritize = {  } #???
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			SRS = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					
					#prioritize = {  } #???
					
					add_extra_state_shared_building_slots = 1
					
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.5
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
		}
	}
	
	shared_focus = {
		id = NTR_consolidation_of_success
		icon = GFX_goal_soviet_tankie
		
		relative_position_id = NTR_development_of_crossborder_industry
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_development_of_crossborder_industry
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_in_faction_with = SRS
				}
				
				FAT = {
					OR = {
						AND = {
							exists = yes
							has_government = communism
							
							NOT = {
								has_war_with = ROOT
								has_war_with = SRS
							}
						}
						
						SRS_owns_all_cores = yes
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_consolidation_of_success"
			
			add_ideas = NTR_consolidation_of_success_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_war_production_AI_factor
				
				has_variable = NTR_war_production_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_crucible_of_the_revolution
		icon = GFX_focus_ger_great_red_menace
		
		relative_position_id = NTR_consolidation_of_success
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_consolidation_of_success
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_crucible_of_the_revolution"
			
			add_ideas = NTR_crucible_of_the_revolution_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_help_from_comrades
		icon = GFX_goal_red_eagle #???
		
		relative_position_id = NTR_the_gathering_of_the_clouds
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		
		available = {
			has_government = communism
			
			OR = {
				AND = {
					has_non_aggression_pact_with = SRS
					is_guaranteed_by = SRS
					has_guaranteed = SRS
				}
				
				is_subject_of = SRS
				is_in_faction_with = SRS
			}
			
			OR = {
				VED = {
					OR = {
						is_subject_of = SRS
						has_government = communism
						
						SRS_owns_all_cores = yes
					}
				}
				FAT = {
					OR = {
						is_subject_of = SRS
						has_government = communism
						
						SRS_owns_all_cores = yes
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_help_from_comrades"
			
			add_political_power = 75
			add_stability = 0.05
			add_war_support = 0.05
			
			effect_tooltip = {
				unlock_national_focus = NTR_economic_miracle
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
			
			modifier = {
				factor = 0
				
				OR = {
					NOT = { has_completed_focus = NTR_scase }
					NOT = { has_completed_focus = NTR_the_future_planning_committee }
					NOT = { has_completed_focus = NTR_efficient_mining }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_mandatory_military_training
		icon = GFX_focus_YUG_pan_slavic_congress
		
		relative_position_id = NTR_help_from_comrades
		x = -1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_help_from_comrades
		}
		
		available = {
			has_completed_focus = NTR_designate_communes_rights
			
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_mandatory_military_training"
			
			add_war_support = 0.05
			
			custom_effect_tooltip = SM_weekly_ponypower_unlocked_tooltip
			
			hidden_effect = {
				set_country_flag = SM_weekly_ponypower_unlocked_flag
				
				if = {
					limit = {
						check_variable = { SM_country_amount_of_factories > 0 }
					}
					
					SM_calculate_bonus_ponypower_percentage = yes
					
					set_variable = { SM_weekly_manpower_var = 1 }
					add_to_variable = { SM_weekly_manpower_var = modifier@industrial_capacity_factory }
					multiply_variable = { SM_weekly_manpower_var = 20 }
					multiply_variable = { SM_weekly_manpower_var = SM_bonus_consciptors_percentage_var }
					multiply_variable = { SM_country_amount_of_factories = SM_country_amount_of_factories }
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
		}
	}
	
	shared_focus = {
		id = NTR_complete_integration_of_skynavian_institutions
		icon = GFX_goal_DOM_The_Trial
		
		relative_position_id = NTR_help_from_comrades
		x = 1
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_help_from_comrades
		}
		
		available = {
			has_completed_focus = NTR_designate_communes_rights
			
			has_government = communism
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_complete_integration_of_skynavian_institutions"
			
			add_stability = 0.05
			
			unlock_decision_tooltip = NTR_establish_confederation_of_autonomous_cooperatives
			unlock_decision_tooltip = NTR_establish_union_of_northland_workers_councils
			
			hidden_effect = {
				set_country_flag = NTR_skynavian_institutions_unlocked_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.25
				
				NOT = { has_completed_focus = NTR_economic_miracle }
			}
		}
	}
	
	shared_focus = {
		id = NTR_unite_the_commonwealth
		icon = GFX_goal_BRZ_spoticus_league
		
		relative_position_id = NTR_help_from_comrades
		x = 0
		y = 2
		
		cost = 12
		
		prerequisite = {
			focus = NTR_mandatory_military_training
		}
		prerequisite = {
			focus = NTR_complete_integration_of_skynavian_institutions
		}
		prerequisite = {
			focus = NTR_northern_shipyards
		}
		prerequisite = {
			focus = NTR_development_of_crossborder_industry
		}
		
		available = {
			is_subject = no
			has_government = communism
			
			custom_trigger_tooltip = {
				tooltip = has_outdated_industry_tt
				
				check_variable = {
					var = EaW_society_development_var
					compare = greater_than_or_equals
					value = 5
				}
			}
			
			SRS = {
				has_country_flag = SRS_our_neighbours_have_been_liberated
				
				hidden_trigger = {
					OR = {
						VED = {
							exists = yes
							has_government = communism
						}
						
						all_of_scopes = {
							array = VED.core_states
							
							is_owned_and_controlled_by = PREV
						}
					}
					
					OR = {
						FAT = {
							exists = yes
							has_government = communism
						}
						
						all_of_scopes = {
							array = FAT.core_states
							
							is_owned_and_controlled_by = PREV
						}
					}
				}
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_unite_the_commonwealth"
			
			swap_ideas = {
				remove_idea = NTR_insignificant_isolationism_idea
				add_idea = NTR_trade_with_comrades_idea
			}
			
			if = {
				limit = {
					country_exists = VED
				}
				
				VED = {
					add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
					
					hidden_effect = {
						country_event = Ntribes.263
					}
				}
			}
			if = {
				limit = {
					country_exists = FAT
				}
				
				FAT = {
					add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
					
					hidden_effect = {
						country_event = Ntribes.263
					}
				}
			}
			if = {
				limit = {
					MNC = {
						has_government = communism
						
						OR = {
							AND = {
								has_non_aggression_pact_with = SRS
								is_guaranteed_by = SRS
								has_guaranteed = SRS
							}
							
							is_subject_of = SRS
							is_in_faction_with = SRS
						}
					}
				}
				
				MNC = {
					add_to_tech_sharing_group = Northern_griffonia_science_organisation_communism
					
					hidden_effect = {
						country_event = Ntribes.263
					}
				}
			}
			
			SRS = { country_event = Ntribes.263 }
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
	}
	
	shared_focus = {
		id = NTR_preventive_strike
		icon = GFX_goal_generic_territory_or_war
		
		relative_position_id = NTR_war_preparations
		x = -2
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_picnic_time_branch
			
			MNC = {
				OR = {
					exists = no
					NOT = { has_government = communism }
				}
			}
		}
		
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		
		bypass = {
			MNC = {
				OR = {
					exists = no
					is_subject = yes
					has_government = communism
					
					has_country_flag = MNC_defeat_in_border_war
					has_non_aggression_pact_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		
		available = {
			has_government = communism
			
			574 = { is_owned_and_controlled_by = ROOT }
			
			MNC = {
				459 = { is_owned_and_controlled_by = PREV }
				
				NOT = {
					has_country_flag = MNC_defeat_in_border_war
					has_war_with = ROOT
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		will_lead_to_war_with = MNC # just notice for a player
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_preventive_strike"
			
			unlock_decision_tooltip = {
				decision = NTR_MNC_preventive_strike
				show_effect_tooltip = yes
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				MNC = { aggressive_towards_PREV = yes }
			}
			
			modifier = {
				factor = 0
				
				OR = {
					AND = {
						check_variable = { NTR_army_AI_factor > 2 }
						
						MNC = { is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes }
					}
					
					SRS = {
						OR = {
							has_wargoal_against = VED
							is_justifying_wargoal_against = VED
							
							has_wargoal_against = FAT
							is_justifying_wargoal_against = FAT
							
							has_wargoal_against = FAW
							is_justifying_wargoal_against = FAW
						}
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_one_future_for_all
		icon = GFX_goal_tripartite_pact
		
		relative_position_id = NTR_war_preparations
		x = -2
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_picnic_time_branch
			
			MNC = {
				exists = yes
				has_government = communism
			}
		}
		
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		
		bypass = {
			MNC = {
				OR = {
					is_subject_of = ROOT
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		available = {
			has_government = communism
			
			MNC = {
				is_subject = no
				is_in_faction = no
				
				has_government = communism
				
				hidden_trigger = {
					exists = yes
					
					is_not_a_potential_enemy_and_has_not_war_with_ROOT = yes
					
					NOT = {
						has_wargoal_against = SRS
						is_justifying_wargoal_against = SRS
						
						SRS = {
							aggressive_towards_PREV = yes
						}
					}
				}
			}
			
			hidden_trigger = {
				OR = {
					AND = {
						has_non_aggression_pact_with = SRS
						is_guaranteed_by = SRS
						has_guaranteed = SRS
					}
					
					is_subject_of = SRS
					is_in_faction_with = SRS
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_one_future_for_all"
			
			SRS = { country_event = Ntribes.258 }
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				OR = {
					has_war = no
					is_in_faction = yes
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_forgotten_by_all
		icon = GFX_goal_unknown
		
		relative_position_id = NTR_expand_military_cooperation_threaty
		x = 2
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_war_preparations
		}
		prerequisite = {
			focus = NTR_expand_military_cooperation_threaty
		}
		prerequisite = {
			focus = NTR_the_gathering_of_the_clouds
		}
		
		available = {
			has_government = communism
			
			567 = { is_owned_and_controlled_by = ROOT }
			573 = { is_owned_and_controlled_by = ROOT }
			
			OR = {
				AND = {
					country_exists = HLR
					NOT = { country_exists = DED }
				}
				AND = {
					country_exists = DED
					NOT = { country_exists = HLR }
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_forgotten_by_all"
			
			custom_effect_tooltip = NTR_protect_the_east_tooltip
			
			hidden_effect = {
				563 = {
					if = {
						limit = {
							is_fully_controlled_by = ROOT
						}
						
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 3
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_3_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
					else = {
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 2
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_2_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
				}
				
				573 = {
					if = {
						limit = {
							is_fully_controlled_by = ROOT
						}
						
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 3
								instant_build = yes
								province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
							}
						}
						else = {
							if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = level_1 } }
								set_building_level = {
									type = bunker
									level = 1
									instant_build = yes
									province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
								}
							}
							else_if = {
								limit = { has_game_rule = { rule = maximum_fort_level option = level_2 } }
								set_building_level = {
									type = bunker
									level = 2
									instant_build = yes
									province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
								}
							}
							else = {
								if = {
									limit = {
										NOT = {
											has_game_rule = { rule = maximum_fort_level option = level_3 }
											any_province_building_level = {
												building = bunker
												level < 1 # 1-...
												province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
											}
										}
									}
									if = {
										limit = {
											NOT = {
												has_game_rule = { rule = maximum_fort_level option = level_4 }
												any_province_building_level = {
													building = bunker
													level < 2 # 2-...
													province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
												}
											}
										}
										if = {
											limit = {
												NOT = {
													has_game_rule = { rule = maximum_fort_level option = level_5 }
													any_province_building_level = {
														building = bunker
														level < 2 # 3-...
														province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
													}
												}
											}
											if = {
												limit = {
													NOT = {
														has_game_rule = { rule = maximum_fort_level option = level_6 }
														any_province_building_level = {
															building = bunker
															level < 3 # 4-...
															province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
														}
													}
												}
												if = {
													limit = {
														NOT = {
															has_game_rule = { rule = maximum_fort_level option = level_7 }
															any_province_building_level = {
																building = bunker
																level < 4 # 5-...
																province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
															}
														}
													}
													if = {
														limit = {
															NOT = {
																has_game_rule = { rule = maximum_fort_level option = level_8 }
																any_province_building_level = {
																	building = bunker
																	level < 5 # 6-...
																	province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
																}
															}
														}
														if = {
															limit = {
																NOT = {
																	has_game_rule = { rule = maximum_fort_level option = level_9 }
																	any_province_building_level = {
																		building = bunker
																		level < 6 # 7-...
																		province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
																	}
																}
															}
															set_building_level = {
																type = bunker
																level = 10
																instant_build = yes
																province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
															}
														}
														else = {
															set_building_level = {
																type = bunker
																level = 9
																instant_build = yes
																province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
															}
														}
													}
													else = {
														set_building_level = {
															type = bunker
															level = 8
															instant_build = yes
															province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
														}
													}
												}
												else = {
													set_building_level = {
														type = bunker
														level = 7
														instant_build = yes
														province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
													}
												}
											}
											else = {
												set_building_level = {
													type = bunker
													level = 6
													instant_build = yes
													province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
												}
											}
										}
										else = {
											set_building_level = {
												type = bunker
												level = 5
												instant_build = yes
												province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
											}
										}
									}
									else = {
										set_building_level = {
											type = bunker
											level = 4
											instant_build = yes
											province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
										}
									}
								}
								else = {
									set_building_level = {
										type = bunker
										level = 3
										instant_build = yes
										province = { id = 7348 id = 8962 id = 2090 id = 763 id = 13046 id = 5099 id = 10835 id = 381 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = { has_game_rule = { rule = maximum_fort_level option = normal } }
							add_building_construction = {
								type = bunker
								level = 2
								instant_build = yes
								province = { all_provinces = yes limit_to_border = yes }
							}
						}
						else = {
							add_2_border_bunkers_with_maximum_fort_level_rule = yes
						}
					}
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				OR = {
					HLR = { aggressive_towards_PREV = yes }
					DED = { focus_progress = { focus = DED_Black_Crusade progress > 0 } }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_one_last_step
		icon = GFX_goal_socialist_griffonia
		
		relative_position_id = NTR_unite_the_commonwealth
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_unite_the_commonwealth
		}
		prerequisite = {
			focus = NTR_spirit_of_the_revolution
		}
		prerequisite = {
			focus = NTR_crucible_of_the_revolution
		}
		
		available = {
			is_subject = no
			has_government = communism
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_one_last_step"
			
			effect_tooltip = {
				if = {
					limit = {
						SRS = { is_ai = yes }
						is_ai = no
					}
					
					SRS = { change_tag_from = ROOT }
				}
				else = {
					custom_effect_tooltip = GAME_OVER_TT
				}
				
				every_unit_leader = { set_nationality = SRS }
				transfer_navy = { target = SRS }
				
				SRS = {
					annex_country = {
						target = ROOT
						transfer_troops = yes
					}
				}
			}
			
			country_event = Ntribes.211
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = { #???
			base = 250
			
			modifier = {
				factor = 0
				
				NOT = { has_completed_focus = NTR_the_scientific_frontier }
			}
		}
	}

##################################################
################ Neutrality branch ###############
##################################################

	shared_focus = {
		id = NTR_the_isolated_north
		icon = GFX_goal_generic_defence
		
		relative_position_id = NTR_the_coronation
		x = 0
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_the_coronation
		}
		
		mutually_exclusive = {
			focus = NTR_reorganize_the_royal_council
			focus = NTR_establishing_the_general_council
		}
		
		available = {
			neutrality > 0.5
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_isolated_north"
			
			add_stability = 0.15
			
			swap_ideas = {
				remove_idea = NTR_isolationism_idea
				add_idea = NTR_fierce_isolationism_idea
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_keep_what_is_ours
		icon = GFX_goal_generic_trade
		
		relative_position_id = NTR_the_isolated_north
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_isolated_north
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_keep_what_is_ours"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_harmonic_tribes_dynamic_modifier }
				}
				
				add_stability = 0.05
				
				add_popularity = {
					ideology = democratic
					popularity = -0.05
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_monarchism_drift_tooltip
				
				hidden_effect = {
					set_variable = { NTR_harmonic_tribes_democratic_drift_var = 0.02 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_stability = 0.1
			}
			
			swap_ideas = {
				remove_idea = limited_exports
				add_idea = closed_economy
			}
			
			every_owned_state = {
				limit = {
					dockyard > 0
				}
				
				set_building_level = {
					type = dockyard
					level = 0
					instant_build = yes
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_communist_partisans_dynamic_modifier }
				
				check_variable = { party_popularity@communism < party_popularity@democratic }
			}
		}
	}
	
	shared_focus = {
		id = NTR_north_does_not_like_interventions
		icon = GFX_goal_ideology_social_conservative
		
		relative_position_id = NTR_keep_what_is_ours
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_keep_what_is_ours
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_north_does_not_like_interventions"
			
			add_stability = 0.075
			
			every_owned_state = {
				limit = {
					any_province_building_level = {
						building = naval_base
						level > 0
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
					}
				}
				
				set_building_level = {
					type = naval_base
					level = 0
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
				}
			}
			
			every_other_country = {
				add_opinion_modifier = { modifier = NTR_isolationism_policy target = ROOT }
				reverse_add_opinion_modifier = { modifier = NTR_isolationism_policy target = ROOT }
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_the_sunstriker_bandits
		icon = GFX_goal_generic_fortify_city
		
		relative_position_id = NTR_north_does_not_like_interventions
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_north_does_not_like_interventions
		}
		
		available = {
			574 = { is_owned_and_controlled_by = ROOT }
			573 = { is_owned_and_controlled_by = ROOT }
			
			hidden_trigger = {
				OR = {
					has_country_leader = { name = "Tribal Council" ruling_only = yes }
					has_country_leader = { name = "Communal Council" ruling_only = yes }
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_sunstriker_bandits"
			
			574 = { # apply game rules #???
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 1517
				}
			}
			
			573 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 11455
						id = 6615
						id = 9453
					}
				}
				
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						id = 11591
						id = 12101
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 50
			
			modifier = {
				factor = 0
				
				country_exists = SRS
				
				OR = {
					NOT = { has_completed_focus = NTR_reclaim_skynavia }
					NOT = { has_completed_focus = NTR_rallying_the_tribes }
					NOT = { has_completed_focus = NTR_refining_the_old_practices }
					NOT = { has_completed_focus = NTR_remember_what_we_are }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_reasserting_tribal_authority
		icon = GFX_goal_ideology_authoritarian_democrat
		
		relative_position_id = NTR_the_isolated_north
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_isolated_north
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reasserting_tribal_authority"
			
			if = {
				limit = {
					has_dynamic_modifier = { modifier = NTR_communist_partisans_dynamic_modifier }
				}
				
				add_war_support = 0.05
				
				add_popularity = {
					ideology = communism
					popularity = -0.05
				}
				
				custom_effect_tooltip = NTR_clamp_maximum_communism_drift_tooltip
				
				hidden_effect = {
					divide_variable = { NTR_communist_partisans_communism_drift_var = 2 }
					
					country_event = Ntribes.588
				}
			}
			else = {
				add_war_support = 0.1
			}
			
			swap_ideas = {
				remove_idea = volunteer_only
				add_idea = limited_conscription
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 50
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0.25
				
				check_variable = { NTR_army_AI_factor < 2 }
				
				NOT = { has_completed_focus = NTR_keep_what_is_ours }
			}
			
			modifier = {
				factor = 0
				
				has_dynamic_modifier = { modifier = NTR_harmonic_tribes_dynamic_modifier }
				
				check_variable = { party_popularity@democratic < party_popularity@communism }
			}
		}
	}
	
	shared_focus = {
		id = NTR_warchiefs_of_the_warchiefs
		icon = GFX_focus_military_derpy
		
		relative_position_id = NTR_reasserting_tribal_authority
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_reasserting_tribal_authority
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_warchiefs_of_the_warchiefs"
			
			add_war_support = 0.075
			
			if = {
				limit = {
					NOT = { any_army_leader = { has_id = 13451 } }
				}
				
				create_corps_commander = { # pegasi # marshal? #???
					name = "Libor White"
					picture = "Governor.tga" # portrait #???
					id = 13451
					skill = 2
					attack_skill = 2
					defense_skill = 2
					planning_skill = 1
					logistics_skill = 2
					traits = { politically_connected infantry_officer warlord_of_the_past_millennium infantry_leader winter_specialist }
				}
			}
			
			swap_ideas = {
				remove_idea = limited_conscription
				add_idea = extensive_conscription
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 25
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
		}
	}
	
	shared_focus = {
		id = NTR_rallying_the_tribes
		icon = GFX_focus_generic_little_entente
		
		relative_position_id = NTR_warchiefs_of_the_warchiefs
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_warchiefs_of_the_warchiefs
		}
		
		available = {
			hidden_trigger = {
				OR = {
					has_country_leader = { name = "Tribal Council" ruling_only = yes }
					has_country_leader = { name = "Communal Council" ruling_only = yes }
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_rallying_the_tribes"
			
			swap_ideas = {
				remove_idea = extensive_conscription
				add_idea = service_by_requirement
			}
			
			if = {
				limit = {
					has_template = "Tribal Army"
				}
				
				delete_unit_template_and_units = { division_template = "Tribal Army" } # fuck abusers
			}
			
			division_template = {
				name = "Tribal Army"
				is_locked = yes
				
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
				}
			}
			
			562 = {
				if = {
					limit = { is_controlled_by = ROOT }
					
					create_unit = {
						division = "name = \"Liftauf Tribal Army\" division_template = \"Tribal Army\" start_experience_factor = 0.2"
						prioritize_location = 1307
					}
				}
			}
			563 = {
				if = {
					limit = { is_controlled_by = ROOT }
					
					create_unit = {
						division = "name = \"Vastmush Tribal Army\" division_template = \"Tribal Army\" start_experience_factor = 0.2"
						prioritize_location = 497
						owner = ROOT
					}
				}
			}
			574 = {
				if = {
					limit = { is_controlled_by = ROOT }
					
					create_unit = {
						division = "name = \"Elf Lake Tribal Army\" division_template = \"Tribal Army\" start_experience_factor = 0.2"
						prioritize_location = 7654
						owner = ROOT
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 50
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				has_variable = NTR_army_AI_factor
			}
			
			modifier = {
				factor = 0
				
				has_war_support < 0.65
			}
		}
	}
	
	shared_focus = {
		id = NTR_establishing_the_great_thing
		icon = GFX_goal_riv_social_fund # need an icon (MB similar to the council`s portrait) #???
		
		relative_position_id = NTR_the_isolated_north
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_keep_what_is_ours
		}
		prerequisite = {
			focus = NTR_reasserting_tribal_authority
		}
		
		available = {
			has_country_flag = NTR_the_unification_process_is_half_completed_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establishing_the_great_thing"
			
			swap_ideas = {
				remove_idea = NTR_steps_towards_centralization_idea
				add_idea = NTR_the_great_thing_idea
			}
			
			custom_effect_tooltip = ENTER
			
			add_ideas = NTR_filip_snowdrift
			
			custom_effect_tooltip = ENTER
			
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = NTR_political_advisor_9
			show_ideas_tooltip = NTR_political_advisor_10
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_reclaim_skynavia
		icon = GFX_goal_anti_comintern_pact
		
		relative_position_id = NTR_establishing_the_great_thing
		x = 0
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_north_does_not_like_interventions
		}
		prerequisite = {
			focus = NTR_warchiefs_of_the_warchiefs
		}
		prerequisite = {
			focus = NTR_establishing_the_great_thing
		}
		
		bypass = {
			OR = {
				SRS = {
					OR = {
						exists = no
						has_war_with = ROOT
						is_subject_of = ROOT
					}
				}
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		available = {
			has_country_flag = NTR_the_unification_process_is_completed_flag
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		will_lead_to_war_with = SRS
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reclaim_skynavia"
			
			declare_war_on = {
				target = SRS
				type = annex_everything
			}
			
			if = {
				limit = {
					SRS = { has_civil_war = yes }
				}
				
				declare_war_on = {
					target = event_target:SRS_socialist_loyalists_in_the_civil_war_against_asper
					type = annex_everything
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.5
				
				NOT = {
					OR = {
						has_completed_focus = NTR_refining_the_old_practices
						has_completed_focus = NTR_remember_what_we_are
					}
				}
			}
			
			modifier = {
				factor = 0
				
				OR = {
					NOT = { has_completed_focus = NTR_establish_scientific_communes }
					NOT = { has_completed_focus = NTR_preserving_old_knowledge }
					NOT = { has_completed_focus = NTR_the_council_takes_care_of_you }
					NOT = { has_completed_focus = NTR_our_game }
					NOT = { has_completed_focus = NTR_equipment_capture_groups }
					NOT = { has_completed_focus = NTR_preparations_for_total_war }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_no_mercy_no_forgiveness
		icon = GFX_goal_skull_treaty
		
		relative_position_id = NTR_reclaim_skynavia
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_reclaim_skynavia
		}
		
		mutually_exclusive = {
			focus = NTR_cow_the_red_conquerors
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = SYNTHESIS
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_SYNTHESIS
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				has_country_flag = NTR_owns_SRS_cores_flag
				
				hidden_trigger = {
					has_country_leader = { name = "Tribal Council" ruling_only = yes }
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_no_mercy_no_forgiveness"
			
			add_political_power = 100
			add_stability = 0.15
			add_war_support = 0.1
			
			country_event = Ntribes.301
			
			custom_effect_tooltip = unlock_focuses
			
			hidden_effect = { # from hidden? #???
				swap_ruler_traits = {
					remove = NTR_tribal_council_trait
					add = NTR_traditionalism_council_trait
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_cow_the_red_conquerors
		icon = GFX_goal_red_star_dove
		
		relative_position_id = NTR_reclaim_skynavia
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_reclaim_skynavia
		}
		
		mutually_exclusive = {
			focus = NTR_no_mercy_no_forgiveness
		}
		
		available = {
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = NTR_ai_behavior
							option = TRADITIONS
						}
						
						AND = {
							has_game_rule = {
								rule = NTR_ai_behavior
								option = RANDOM
							}
							
							has_country_flag = NTR_AI_TRADITIONS
						}
					}
				}
				
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_RULES
					
					always = no
				}
			}
			else = {
				OR = {
					has_country_flag = NTR_owns_SRS_cores_flag
					
					SRS = { is_subject_of = ROOT }
				}
				
				hidden_trigger = {
					has_country_leader = { name = "Tribal Council" ruling_only = yes }
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_cow_the_red_conquerors"
			
			add_political_power = -250
			
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
			
			if = {
				limit = {
					SRS = { is_subject_of = ROOT }
				}
				
				annex_country = {
					target = SRS
					transfer_troops = no
				}
			}
			
			add_ideas = NTR_skynavian_influence_idea
			
			if = {
				limit = {
					has_country_leader = { name = "Tribal Council" ruling_only = yes }
				}
				
				swap_ruler_traits = {
					remove = NTR_tribal_council_trait
					add = NTR_conflictal_council_trait
				}
				
				swap_ideas = {
					remove_idea = NTR_traditionalism_idea
					add_idea = NTR_resurgent_traditionalism_idea
				}
			}
			
			custom_effect_tooltip = unlock_focuses
			
			hidden_effect = {
				calculate_ai_bahavior = yes
				
				load_focus_tree = {
					tree = NTR_new_traditions_focus_tree
					keep_completed = yes
				}
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_convene_the_great_thing
		icon = GFX_focus_generic_diplomatic_treaty_pony
		
		relative_position_id = NTR_reclaim_skynavia
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_no_mercy_no_forgiveness
			focus = NTR_cow_the_red_conquerors
		}
		
		available = {
			if = {
				limit = {
					has_completed_focus = NTR_no_mercy_no_forgiveness
				}
				
				has_completed_focus = NTR_our_destiny
			}
			else_if = {
				limit = {
					has_completed_focus = NTR_cow_the_red_conquerors
					
					NOT = { has_country_leader = { name = "Communal Council" ruling_only = yes } }
				}
				
				unlocked_by_event = yes
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = RESTRICTED_BY_GAME_CIRCUMSTANCES
					
					always = no
				}
			}
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_convene_the_great_thing"
			
			country_event = Ntribes.303
			
			custom_effect_tooltip = unlock_focuses
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 3
				
				has_completed_focus = NTR_modernize_communes
			}
		}
	}

### "Traditionalism" branch ###

	shared_focus = {
		id = NTR_sealing_the_border
		icon = GFX_goal_nested_fortifications
		
		relative_position_id = NTR_convene_the_great_thing
		x = 0
		y = 1
		
		cost = 7
		
		allow_branch = {
			has_country_flag = NTR_traditionalism_branch
			has_country_leader = { name = "Tribal Council" ruling_only = yes }
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available = {
			563 = { is_owned_and_controlled_by = ROOT }
			573 = { is_owned_and_controlled_by = ROOT }
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_sealing_the_border"
			
			unlock_decision_category_tooltip = NTR_safety_line_category
			
			hidden_effect = {
				set_country_flag = NTR_safety_line_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 75
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				any_of_scopes = {
					array = neighbors
					
					is_a_potential_enemy_or_has_war_with_ROOT = yes
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_the_rising_darkness
		icon = GFX_goal_skull_fortification
		
		relative_position_id = NTR_sealing_the_border
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_sealing_the_border
		}
		
		available = {
			DED = { focus_progress = { focus = DED_Black_Crusade progress > 0 } }
			
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_rising_darkness"
			
			add_ideas = NTR_the_rising_darkness_idea
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 500
			
			modifier = {
				factor = var:NTR_army_AI_factor
				
				DED = { focus_progress = { focus = DED_Black_Crusade progress > 0 } }
			}
		}
	}

### "Synthesis" branch ###
# Political focuses #

	shared_focus = {
		id = NTR_reforms_preparations
		#icon = GFX_
		
		relative_position_id = NTR_convene_the_great_thing
		x = 0
		y = 1
		
		cost = 8
		
		allow_branch = {
			has_country_flag = NTR_great_northern_communes_branch
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reforms_preparations"
			
			swap_ideas = {
				remove_idea = NTR_skynavian_influence_idea
				add_idea = NTR_changing_society_idea
			}
			
			every_owned_state = {
				limit = {
					is_core_of = SRS
				}
				
				add_state_modifier = {
					modifier = {
						local_building_slots_factor = 0.15
						local_non_core_manpower = 0.4
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_tradition_is_not_everything
		icon = GFX_goal_construction_engineering
		
		relative_position_id = NTR_reforms_preparations
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_reforms_preparations
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_tradition_is_not_everything"
			
			swap_ideas = {
				remove_idea = NTR_tensions_between_the_new_and_the_old_idea
				add_idea = NTR_our_new_way_idea
			}
			
			# reverse DM #???
			
			subtract_from_variable = {
				var = NTR_traditionalism_influence_neutrality_drift_var
				value = 0.02
				tooltip = NTR_neutrality_influence_dynamic_modifier_reduced_yellow_tolltip
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_establishing_the_assembly_of_communes
		icon = GFX_focus_chi_one_china_policy
		
		relative_position_id = NTR_reforms_preparations
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_reforms_preparations
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establishing_the_assembly_of_communes"
			
			swap_ideas = {
				remove_idea = NTR_the_great_thing_idea
				add_idea = NTR_the_assembly_of_communes_idea
			}
			
			subtract_from_variable = {
				var = NTR_traditionalism_influence_neutrality_drift_var
				value = 0.02
				tooltip = NTR_neutrality_influence_dynamic_modifier_reduced_yellow_tolltip
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_allow_limited_communication
		icon = GFX_focus_generic_treaty
		
		relative_position_id = NTR_tradition_is_not_everything
		x = 0
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_tradition_is_not_everything
		}
		prerequisite = {
			focus = NTR_establishing_the_assembly_of_communes
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_allow_limited_communication"
			
			add_stability = -0.075
			
			swap_ideas = {
				remove_idea = closed_economy
				add_idea = limited_exports
			}
			swap_ideas = {
				remove_idea = NTR_fierce_isolationism_idea
				add_idea = NTR_isolationism_idea
			}
			
			subtract_from_variable = {
				var = NTR_traditionalism_influence_neutrality_drift_var
				value = 0.02
				tooltip = NTR_neutrality_influence_dynamic_modifier_reduced_yellow_tolltip
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_synthesis_of_societies
		icon = GFX_goal_red_star_gold_wreath
		
		relative_position_id = NTR_establishing_the_assembly_of_communes
		x = 0
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_establishing_the_assembly_of_communes
		}
		prerequisite = {
			focus = NTR_tradition_is_not_everything
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_synthesis_of_societies"
			
			swap_ideas = {
				remove_idea = NTR_modernized_old_practices_idea
				add_idea = NTR_new_practices_idea
			}
			
			subtract_from_variable = {
				var = NTR_traditionalism_influence_neutrality_drift_var
				value = 0.02
				tooltip = NTR_neutrality_influence_dynamic_modifier_reduced_yellow_tolltip
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_the_council_reform
		#icon = GFX_
		
		relative_position_id = NTR_establishing_the_assembly_of_communes
		x = 0
		y = 2
		
		cost = 6
		
		prerequisite = {
			focus = NTR_allow_limited_communication
		}
		prerequisite = {
			focus = NTR_synthesis_of_societies
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_council_reform"
			
			effect_tooltip = {
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				
				create_country_leader = {
					name = "Communal Council"
					desc = ""
					picture = "Governor.tga" # portrait #???
					expire = "1965.1.1"
					ideology = marxism
					traits = { NTR_communal_council_trait }
				}
			}
			
			country_event = Ntribes.307
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_complete_the_unification_process
		#icon = GFX_
		
		relative_position_id = NTR_the_council_reform
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_council_reform
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_complete_the_unification_process"
			
			every_owned_state = {
				limit = {
					is_core_of = SRS
				}
				
				add_core_of = ROOT
				
				hidden_effect = {
					add_state_modifier = {
						modifier = {
							local_building_slots_factor = -0.25
							local_non_core_manpower = -0.58
						}
					}
				}
			}
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.2
				
				any_of_scopes = {
					array = SRS.core_states
					
					NOT = { is_controlled_by = ROOT }
				}
			}
			modifier = {
				factor = 0
				
				all_of_scopes = {
					array = SRS.core_states
					
					NOT = { is_controlled_by = ROOT }
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_development_of_the_eastern_communes
		icon = GFX_goal_generic_scientific_exchange_pony_griffon
		
		relative_position_id = NTR_the_council_reform
		x = -2
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_the_council_reform
		}
		
		bypass = {
			hidden_trigger = {
				amount_research_slots > 3
			}
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_development_of_the_eastern_communes"
			
			add_research_slot = 1
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_benefits_of_decentralization
		#icon = GFX_
		
		relative_position_id = NTR_the_council_reform
		x = 2
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_the_council_reform
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_benefits_of_decentralization"
			
			add_stability = 0.05
			
			custom_effect_tooltip = SM_communes_unlocked_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 24 }
				set_variable = { SM_effect_cost_var = -25 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}
	
	shared_focus = {
		id = NTR_differential_education
		#icon = GFX_
		
		relative_position_id = NTR_complete_the_unification_process
		x = 0
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_complete_the_unification_process
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_differential_education"
			
			custom_effect_tooltip = delayed_decrease_illiteracy_tt
			
			hidden_effect = {
				country_event = Ntribes.308
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 250
		}
	}
	
	shared_focus = {
		id = NTR_expand_the_powers_of_research_cells
		#icon = GFX_
		
		relative_position_id = NTR_development_of_the_eastern_communes
		x = 0
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_development_of_the_eastern_communes
		}
		prerequisite = {
			focus = NTR_complete_the_unification_process
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_expand_the_powers_of_research_cells"
			
			swap_ideas = {
				remove_idea = better_science_base
				add_idea = big_science_base
			}
			
			hidden_effect = {
				set_country_flag = big_science_base_unlocked
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_autonomous_communes
		#icon = GFX_
		
		relative_position_id = NTR_benefits_of_decentralization
		x = 0
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_benefits_of_decentralization
		}
		prerequisite = {
			focus = NTR_complete_the_unification_process
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_autonomous_communes"
			
			custom_effect_tooltip = NTR_reduce_winter_debuffs_and_famine_risk_by_25_percents_tooltip
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
		}
	}
	
	shared_focus = {
		id = NTR_unite_our_efforts
		#icon = GFX_
		
		relative_position_id = NTR_expand_the_powers_of_research_cells
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_expand_the_powers_of_research_cells
		}
		prerequisite = {
			focus = NTR_differential_education
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_unite_our_efforts"
			
			unlock_decision_category_tooltip = NTR_griffon_race_technologies_category
			
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = NTR_griffon_race_technologies_category_flag }
					}
					
					set_country_flag = NTR_griffon_race_technologies_category_flag
					
					country_event = Ntribes.992
					log = "[GetDateText]: [Root.GetName]: self-triggering event Ntribes.992 started"
				}
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
		}
	}
	
	shared_focus = {
		id = NTR_endless_horizon
		#icon = GFX_
		
		relative_position_id = NTR_autonomous_communes
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_autonomous_communes
		}
		prerequisite = {
			focus = NTR_differential_education
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_endless_horizon"
			
			unlock_decision_tooltip = NTR_neverending_development
			
			hidden_effect = {
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 150
			
			modifier = {
				factor = 0.75
				
				has_political_power < 300
			}
			modifier = {
				factor = 0.5
				
				has_political_power < 200
			}
			modifier = {
				factor = 0.25
				
				has_political_power < 100
			}
		}
	}
	
	shared_focus = {
		id = NTR_safety_line
		icon = GFX_goal_constitutional_guarantees
		
		relative_position_id = NTR_differential_education
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_unite_our_efforts
		}
		prerequisite = {
			focus = NTR_endless_horizon
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_safety_line"
			
			unlock_decision_category_tooltip = NTR_safety_line_category
			
			hidden_effect = {
				set_country_flag = NTR_safety_line_flag
				
				calculate_ai_bahavior = yes
			}
		}
		
		ai_will_do = {
			base = 100
		}
	}

### "The Great Mistake" branch ###
# Political focuses #

	shared_focus = {
		id = NTR_the_great_mistake
		icon = GFX_goal_generic_political_pressure
		
		relative_position_id = NTR_convene_the_great_thing
		x = 0
		y = 1
		
		cost = 4
		
		allow_branch = {
			has_country_flag = NTR_the_great_mistake_branch
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_great_mistake"
			
			add_political_power = -100
			add_stability = -0.1
			
			subtract_from_variable = {
				var = NTR_unite_the_tribes_drift_var
				value = 0.02
				tooltip = NTR_communist_partisans_dynamic_modifier_reduced_green_tolltip
			}
			
			swap_ideas = {
				remove_idea = NTR_the_old_ways_are_standing_firm_idea
				add_idea = NTR_tensions_between_the_new_and_the_old_idea
			}
		}
	}
	
	shared_focus = {
		id = NTR_selective_education_system
		icon = GFX_goal_tfv_generic_tech_sharing
		
		relative_position_id = NTR_the_great_mistake
		x = -1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_great_mistake
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_selective_education_system"
			
			add_political_power = -75
			add_stability = -0.05
			
			add_ideas = NTR_traditionalists_research_idea_mistake
			
			subtract_from_variable = {
				var = NTR_unite_the_tribes_drift_var
				value = 0.01
				tooltip = NTR_communist_partisans_dynamic_modifier_reduced_green_tolltip
			}
		}
	}
	
	shared_focus = {
		id = NTR_move_production_center
		icon = GFX_goal_generic_construct_civ_factory
		
		relative_position_id = NTR_the_great_mistake
		x = 1
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_the_great_mistake
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_move_production_center"
			
			add_political_power = -75
			add_stability = -0.05
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = SRS
					
					industrial_complex > 0
				}
				
				add_building_construction = {
					type = industrial_complex
					level = -1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = -1
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_core_of = SRS }
					
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = SRS
					
					industrial_complex > 0
				}
				
				add_building_construction = {
					type = industrial_complex
					level = -1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = -1
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_core_of = SRS }
					
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = SRS
					
					arms_factory > 0
				}
				
				add_building_construction = {
					type = arms_factory
					level = -1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = -1
			}
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_core_of = SRS }
					
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				
				add_extra_state_shared_building_slots = 1
				
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_abolish_autonomy_structures
		icon = GFX_goal_anti_comintern_pact
		
		relative_position_id = NTR_the_great_mistake
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_selective_education_system
		}
		prerequisite = {
			focus = NTR_move_production_center
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_abolish_autonomy_structures"
			
			add_political_power = -150
			add_stability = -0.1
			
			remove_ideas = NTR_SAC
			
			every_owned_state = { # on_action checks #???
				limit = {
					is_core_of = SRS
				}
				
				add_state_modifier = {
					modifier = {
						local_building_slots_factor = -0.1
						local_non_core_manpower = -0.18
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_sent_troops_to_autonomy
		icon = GFX_goal_generic_war_with_comintern
		
		relative_position_id = NTR_abolish_autonomy_structures
		x = 0
		y = 1
		
		cost = 4
		
		prerequisite = {
			focus = NTR_abolish_autonomy_structures
		}
		
		available = {
			hidden_trigger = {
				has_country_leader = { name = "Tribal Council" ruling_only = yes }
				
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		select_effect = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_sent_troops_to_autonomy selected"
			
			hidden_effect = {
				country_event = {
					id = Ntribes.315
					days = 7
					random = 168
				}
			}
		}
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_sent_troops_to_autonomy"
			
			add_political_power = -50
			add_stability = -0.05
			
			country_event = Ntribes.316
		}
	}

##################################################
################# Fascism branch #################
##################################################

### Revanchism (early core) ###

	shared_focus = {
		id = NTR_the_greater_north
		icon = GFX_goal_Black_State_Rising_2
		
		relative_position_id = NTR_convene_the_great_thing
		x = 0
		y = 1
		
		cost = 5
		
		allow_branch = {
			has_focus_tree = NTR_revanchism_focus_tree
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_greater_north"
			
			swap_ideas = {
				remove_idea = NTR_the_great_thing_idea
				add_idea = NTR_revanchism_idea
			}
		}
	}
	
	shared_focus = {
		id = NTR_establish_napravne_zarizeni
		icon = GFX_goal_skull_treaty
		
		relative_position_id = NTR_convene_the_great_thing
		x = -2
		y = 1
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_revanchism_focus_tree
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available = {
			any_owned_state = {
				is_core_of = SRS
				
				is_controlled_by = ROOT
			}
			
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_establish_napravne_zarizeni"
			
			country_event = Ntribes.403
		}
	}
	
	shared_focus = {
		id = NTR_disband_local_things
		icon = GFX_goal_skull_treaty2
		
		relative_position_id = NTR_convene_the_great_thing
		x = 2
		y = 1
		
		cost = 6
		
		allow_branch = {
			has_focus_tree = NTR_revanchism_focus_tree
		}
		
		prerequisite = {
			focus = NTR_convene_the_great_thing
		}
		
		available = {
			any_owned_state = {
				is_core_of = ROOT
				
				NOT = {
					OR = {
						state = 562
						state = 677
					}
				}
				
				is_controlled_by = ROOT
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_disband_local_things"
			
			country_event = Ntribes.404
		}
	}
	
	shared_focus = {
		id = NTR_new_elite
		icon = GFX_goal_authoritarian
		
		relative_position_id = NTR_the_greater_north
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_greater_north
		}
		prerequisite = {
			focus = NTR_establish_napravne_zarizeni
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_new_elite"
			
			swap_ideas = {
				remove_idea = NTR_tensions_between_the_new_and_the_old_idea
				add_idea = NTR_new_elite_idea
			}
		}
	}
	
	shared_focus = {
		id = NTR_reservations_for_dissenters
		icon = GFX_goal_slavery
		
		relative_position_id = NTR_the_greater_north
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_the_greater_north
		}
		prerequisite = {
			focus = NTR_disband_local_things
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_reservations_for_dissenters"
			
			swap_ideas = {
				remove_idea = NTR_perfected_old_practices_full_idea
				add_idea = NTR_war_focused_economy_idea
			}
		}
	}
	
	shared_focus = {
		id = NTR_sacrifice_to_the_future
		icon = GFX_goal_skull_cannon
		
		relative_position_id = NTR_establish_napravne_zarizeni
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_establish_napravne_zarizeni
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_sacrifice_to_the_future"
			
			swap_ideas = {
				remove_idea = NTR_our_game_idea
				add_idea = NTR_sacrifice_to_the_future_idea
			}
		}
	}
	
	shared_focus = {
		id = NTR_new_communes
		icon = GFX_goal_HOL_amend_wapenwet
		
		relative_position_id = NTR_disband_local_things
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_disband_local_things
		}
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = has_agrarian_society_tt
				
				check_variable = {
					var = EaW_society_development_var
					value = 3
					compare = greater_than_or_equals
				}
			}
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_new_communes"
			
			add_stability = 0.05
			
			swap_ideas = {
				remove_idea = communal_society
				add_idea = agrarian_society
			}
		}
	}
	
	shared_focus = {
		id = NTR_one_step_from_destiny
		icon = GFX_goal_skull_fortification
		
		relative_position_id = NTR_the_greater_north
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_new_elite
		}
		prerequisite = {
			focus = NTR_reservations_for_dissenters
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_one_step_from_destiny"
			
			add_political_power = 150
			
			add_country_leader_trait = syncretic_revanchist
		}
	}
	
	shared_focus = {
		id = NTR_the_best_deserve_more
		icon = GFX_goal_TEM_raise_the_cults
		
		relative_position_id = NTR_establish_napravne_zarizeni
		x = 0
		y = 2
		
		cost = 5
		
		prerequisite = {
			focus = NTR_new_elite
		}
		prerequisite = {
			focus = NTR_sacrifice_to_the_future
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_the_best_deserve_more"
			
			custom_effect_tooltip = NTR_the_best_deserve_more_tooltip
			
			hidden_effect = { # OLD #???
				SOL = {
					random_unit_leader = {
						limit = {
							has_id = 13451
						}
						
						set_nationality = ROOT
					}
				}
			}
			
			# divs #???
		}
	}
	
	shared_focus = {
		id = NTR_necessary_measures
		icon = GFX_goal_forced_mil
		
		relative_position_id = NTR_disband_local_things
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_new_communes
		}
		prerequisite = {
			focus = NTR_reservations_for_dissenters
		}
		
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_necessary_measures"
			
			swap_ideas = {
				remove_idea = primitive_economy
				add_idea = war_economy
			}
		}
	}
	
	shared_focus = {
		id = NTR_retribution
		icon = GFX_goal_crush_monarchy
		
		relative_position_id = NTR_one_step_from_destiny
		x = 0
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_the_best_deserve_more
		}
		prerequisite = {
			focus = NTR_one_step_from_destiny
		}
		prerequisite = {
			focus = NTR_necessary_measures
		}
		
		bypass = {
			OR = {
				has_war_with = ROOT
				has_country_flag = NTR_owns_SRS_VED_cores_flag
				VED = { is_subject_of = ROOT }
			}
		}
		
		available = {
			VED = {
				exists = yes
				
				hidden_trigger = {
					is_neighbor_of = ROOT
					
					NOT = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		will_lead_to_war_with = VED
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_retribution"
			
			declare_war_on = {
				type = annex_everything
				target = VED
			}
			
			hidden_effect = {
				create_wargoal = {
					target = VED
					type = annex_everything
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_destroy_supporters_of_the_monarchy
		icon = GFX_HOL_crackdown_natpop
		
		relative_position_id = NTR_retribution
		x = 0
		y = 1
		
		cost = 5
		
		prerequisite = {
			focus = NTR_retribution
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_VED_cores_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_destroy_supporters_of_the_monarchy"
			
			country_event = Ntribes.405
		}
	}
	
	shared_focus = {
		id = NTR_transpolar_magistral
		icon = GFX_goal_death_tracks
		
		relative_position_id = NTR_retribution
		x = -2
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_retribution
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_VED_cores_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_transpolar_magistral"
			
			# 1 infra for many coastal provinces
		}
	}
	
	shared_focus = {
		id = NTR_new_vedinas_line
		icon = GFX_goal_forced_res
		
		relative_position_id = NTR_retribution
		x = 2
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_retribution
		}
		
		available = {
			has_country_flag = NTR_owns_SRS_VED_cores_flag
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_new_vedinas_line"
			
			# bunkers on the border with FAT
		}
	}
	
	shared_focus = {
		id = NTR_translate_the_royal_library
		icon = GFX_goal_ideology_monarchist
		
		relative_position_id = NTR_destroy_supporters_of_the_monarchy
		x = -1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_destroy_supporters_of_the_monarchy
		}
		
		bypass = {
			OR = {
				has_idea = big_science_base
				has_idea = proper_science_base
			}
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_translate_the_royal_library"
			
			swap_ideas = {
				remove_idea = better_science_base
				add_idea = big_science_base
			}
			
			hidden_effect = {
				set_country_flag = big_science_base_unlocked
			}
		}
	}
	
	shared_focus = {
		id = NTR_update_our_industry
		icon = GFX_goal_national_populism
		
		relative_position_id = NTR_destroy_supporters_of_the_monarchy
		x = 1
		y = 1
		
		cost = 6
		
		prerequisite = {
			focus = NTR_destroy_supporters_of_the_monarchy
		}
		
		bypass = {
			check_variable = {
				var = EaW_society_development_var
				value = 3.33
				compare = greater_than_or_equals
			}
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_update_our_industry"
			
			swap_ideas = {
				remove_idea = agrarian_society
				add_idea = agrarian_society3
			}
		}
	}
	
	shared_focus = {
		id = NTR_continue_modernisation
		icon = GFX_focus_generic_industry_3
		
		relative_position_id = NTR_destroy_supporters_of_the_monarchy
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_translate_the_royal_library
		}
		prerequisite = {
			focus = NTR_update_our_industry
		}
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = has_pre_industrial_society_tt
				
				check_variable = {
					var = EaW_society_development_var
					compare = greater_than_or_equals
					value = 4
				}
			}
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_continue_modernisation"
			
			swap_ideas = {
				remove_idea = agrarian_society3
				add_idea = pre_industrial_society
			}
		}
	}
	
	shared_focus = {
		id = NTR_spread_knowledge
		icon = GFX_goal_eqs_public_schools
		
		relative_position_id = NTR_transpolar_magistral
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_transpolar_magistral
		}
		prerequisite = {
			focus = NTR_translate_the_royal_library
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_spread_knowledge"
			
			swap_ideas = {
				remove_idea = lack_of_scientists2
				add_idea = lack_of_scientists3
			}
		}
	}
	
	shared_focus = {
		id = NTR_prepare_industry_for_war
		icon = GFX_goal_state_economy
		
		relative_position_id = NTR_new_vedinas_line
		x = 0
		y = 2
		
		cost = 8
		
		prerequisite = {
			focus = NTR_new_vedinas_line
		}
		prerequisite = {
			focus = NTR_update_our_industry
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_prepare_industry_for_war"
			
			add_war_support = 0.05
			
			add_ideas = NTR_prepare_industry_for_war_idea
		}
	}
	
	shared_focus = {
		id = NTR_restore_the_royal_academy
		icon = GFX_goal_technological_supremacy
		
		relative_position_id = NTR_spread_knowledge
		x = 1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_spread_knowledge
		}
		prerequisite = {
			focus = NTR_continue_modernisation
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_restore_the_royal_academy"
			
			add_research_slot = 1
		}
	}
	
	shared_focus = {
		id = NTR_develop_economic_thinking
		#icon = GFX_
		
		relative_position_id = NTR_prepare_industry_for_war
		x = -1
		y = 1
		
		cost = 8
		
		prerequisite = {
			focus = NTR_prepare_industry_for_war
		}
		prerequisite = {
			focus = NTR_continue_modernisation
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_develop_economic_thinking"
			
			add_political_power = 100
			add_stability = 0.05
			
			custom_effect_tooltip = SM_elites_unlocked_tooltip
			
			hidden_effect = {
				set_variable = { SM_trigger_cost_var = 39 }
				set_variable = { SM_effect_cost_var = -40 }
				
				set_variable = { SM_base_local_monthly_population_var = 0.03 }
				set_variable = { SM_base_local_resources_var = 0.05 }
				
				set_country_flag = SM_GUI_unlocked_flag
				
				if = {
					limit = {
						amount_taken_ideas = {
							amount > 0
							
							slots = { theorist }
						}
					}
					
					if = {
						limit = {
							has_idea = NTR_military_theorist
						}
						
						set_variable = { SM_experience_gain_army_var = 0.024 }
					}
					else_if = {
						limit = {
							has_idea = NTR_naval_theorist
						}
						
						set_variable = { SM_basic_navy_experience_var = 0.024 }
					}
					else = {
						set_variable = { SM_basic_air_experience_var = 0.012 }
					}
				}
			}
		}
	}
	
	shared_focus = {
		id = NTR_aggressive_defense
		icon = GFX_goal_dark_arms
		
		relative_position_id = NTR_continue_modernisation
		x = 0
		y = 2
		
		cost = 4
		
		prerequisite = {
			focus = NTR_restore_the_royal_academy
		}
		prerequisite = {
			focus = NTR_develop_economic_thinking
		}
		
		available = {
			hidden_trigger = {
				has_country_flag = NTR_owns_SRS_VED_cores_flag
			}
		}
		
		cancel_if_invalid = yes
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus NTR_aggressive_defense"
			
			add_political_power = 50
			add_war_support = 0.05
			
			custom_effect_tooltip = NTR_aggressive_defense_tooltip
		}
	}