# Focus filters to use (note: focus filters should also be used for maluses. Minor effects for flavour purposes should not be marked): 
#### FOCUS_FILTER_INTERNAL_AFFAIRS - story events (don't use for now)
# FOCUS_FILTER_INDUSTRY - industry (factories, output bonuses, consumer goods, resources)
# FOCUS_FILTER_POLITICAL - political power
# FOCUS_FILTER_STABILITY - stability
# FOCUS_FILTER_WAR_SUPPORT - war support
# FOCUS_FILTER_ARMY_BONUS - anything that adds to the army
# FOCUS_FILTER_AIRFORCE_BONUS - anything that adds to the airforce
# FOCUS_FILTER_NAVY_BONUS - anything that adds to the navy
# FOCUS_FILTER_MANPOWER - ponypower (not monthly population thought, too small of an effect)
# FOCUS_FILTER_RESEARCH - research slots, research speed bonuses, one-time bonuses for specific research
# FOCUS_FILTER_ANNEXATION - any wargoals/wars
# FOCUS_FILTER_DIAMOND_ROAD - anything related to the diamond road
# Please add appropriate filters when creating a focus. Do not add any additional filters, it will break the UI. If in doubt, ping me in Project North Zebrica. Thank you! - HerrB

# To make future understanding of the code easier, when referencing a state id, please comment the state name for clarity. Thank you! - HerrB

focus_tree = {
	id = quaggatai_starting_tree

	country = {
		factor = 0
		modifier = {
			add = 10
			tag = CGI
		}
	}
	shared_focus = CGI_the_battle_for_quaggatai

	default = no

	continuous_focus_position = { x = 0 y = 1200 }
}

##########################
##### SECTION 1     ######
##### STARTING TREE ######
##########################
shared_focus = {
	id = CGI_the_battle_for_quaggatai
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = 9
	y = 0

	cost = 6
	
	ai_will_do = {
		factor = 100
	}
	
	select_effect = {
		country_event = quaggatai.1
		
		country_event = {
			id = quaggatai.2
			days = 7
		}
		
		country_event = {
			id = quaggatai.3
			days = 14
		}
		
		country_event = {
			id = quaggatai.4
			days = 21
		}
		
		country_event = {
			id = quaggatai.5
			days = 28
		}
		
		country_event = {
			id = quaggatai.6
			days = 35
		}
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_the_battle_for_quaggatai"
		
		country_event = quaggatai.7
	}
	
	search_filters = {  }
}

shared_focus = {
	id = CGI_prepare_for_the_inevitable
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = -6
	y = 1
	relative_position_id = CGI_the_battle_for_quaggatai
	
	prerequisite = {
		focus = CGI_the_battle_for_quaggatai
	}
	
	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_prepare_for_the_inevitable"
		
		add_manpower = 10000
		army_experience = 25
	}
	
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = CGI_strengthen_the_diamond_road
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = -2
	y = 1
	relative_position_id = CGI_the_battle_for_quaggatai
	
	prerequisite = {
		focus = CGI_the_battle_for_quaggatai 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
				
		add_to_variable = {
			var = CGI_diamond_road_strength
			value = 5
		}
		custom_effect_tooltip = {
			localization_key = CGI_diamond_road_add
			VALUE = "5"
			POINT_POINTS = "points"
		}
		CGI_update_diamond_road = yes
		
		unlock_decision_tooltip = CGI_invest_into_the_diamond_road
	}
	
	search_filters = { FOCUS_FILTER_DIAMOND_ROAD }
}

shared_focus = {
	id = CGI_embracing_modernity
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = 2
	y = 1
	relative_position_id = CGI_the_battle_for_quaggatai
	
	prerequisite = {
		focus = CGI_the_battle_for_quaggatai 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
		
		set_variable = { CGI_diamond_road_increase_society_counter = 0}
		
		add_tech_bonus = {
			name = CGI_embracing_modernity
			bonus = 1.0
			uses = 1
			category = train_tech
		}
		
		increase_society_development_gradual = yes
		
		unlock_decision_tooltip = CGI_buy_up_modern_tools
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = CGI_dealing_with_the_clans
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = 6
	y = 1
	relative_position_id = CGI_the_battle_for_quaggatai
	
	prerequisite = {
		focus = CGI_the_battle_for_quaggatai 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
		
		add_political_power = 75
		
		add_power_balance_value = {
			id = CGI_crossroads_bop
			value = 0.05
		}
		
		unlock_decision_tooltip = CGI_crossroads_ask_clans_for_funds
		unlock_decision_tooltip = CGI_crossroads_smooth_over_differences
		unlock_decision_tooltip = CGI_crossroads_subvert_clan_leaders_authority
		unlock_decision_tooltip = CGI_crossroads_integrate_clan_troops
	}
	
	search_filters = { FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = CGI_fortify_coltdar
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = -1
	y = 1
	relative_position_id = CGI_prepare_for_the_inevitable
	
	prerequisite = {
		focus = CGI_prepare_for_the_inevitable 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
		
		custom_effect_tooltip = CGI_fortline_in_coltdar_tooltip
		hidden_effect = {
			# Border forts
			707 = { # Zerankara
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_border_country = CTH
					}
				}
			}
			1089 = { # Karmanegdan
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_border_country = CTH
					}
				}
			}
			933 = { # Zrumqi
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_border_country = CTH
					}
				}
			}
			# Special forts
			1089 = { # Karmanegdan
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 18273 # Karmanegdan City
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 18288 # Angzen Supply Hub
				}
			}
			708 = { # Isparadur
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 18237 # Isparadur City
				}
			}
			751 = { # Zahal
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 18266 # Zahal Town
				}
			}
		}
	}
	
	search_filters = { }
}

shared_focus = {
	id = CGI_reinforce_karmanedgan
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = 1
	y = 1
	relative_position_id = CGI_prepare_for_the_inevitable
	
	prerequisite = {
		focus = CGI_prepare_for_the_inevitable 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
		
		CDR = {
			every_core_state = {
				add_compliance = 5
			}
		}
		933 = {
			add_compliance = 5
		}
		
		add_to_variable = {
			var = CGI_diamond_road_strength
			value = 1
		}
		custom_effect_tooltip = {
			localization_key = CGI_diamond_road_add
			VALUE = "1"
			POINT_POINTS = "point"
		}
		CGI_update_diamond_road = yes
	}
	
	search_filters = { FOCUS_FILTER_DIAMOND_ROAD }
}

shared_focus = {
	id = CGI_opportunities_in_zonicia
	icon = GFX_goal_improve_relations_pony_griffon
	
	x = -1
	y = 1
	relative_position_id = CGI_strengthen_the_diamond_road
	
	prerequisite = {
		focus = CGI_strengthen_the_diamond_road 
	}

	cost = 4
	
	ai_will_do = {
		factor = 10
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CGI_strengthen_the_diamond_road"
		
		add_to_variable = {
			var = CGI_diamond_road_strength
			value = 3
		}
		custom_effect_tooltip = {
			localization_key = CGI_diamond_road_add
			VALUE = "3"
			POINT_POINTS = "points"
		}
		CGI_update_diamond_road = yes
		
		
	}
	
	search_filters = { FOCUS_FILTER_DIAMOND_ROAD }
}