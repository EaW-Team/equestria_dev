focus_tree = {
	id = new_mareland_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			original_tag = EQC
			NOT = { has_country_flag = is_maresoc }
			NOT = { has_country_flag = equalist_eqc }
			NOT = {
				OR = {
					is_subject_of = NLR
					has_country_flag = supported_NLR
				}
			}
			NOT = {
				OR = {
					is_subject_of = event_target:solar_empire
					has_country_flag = supported_SOL
				}
			}
		}
	}

	continuous_focus_position = { x = 1200 y = 950 }

	default = no

	############################
	#### GO WITH EQUESTRIA  ####
	############################

	shared_focus = EQC_legacy_of_the_cockatrice_war
	shared_focus = EQC_expand_manehatten_harbour
	shared_focus = EQC_rnmaf_stratus_springs
	shared_focus = EQC_industral_support_fund
	shared_focus = EQC_national_census
	shared_focus = EQC_commonwealth_defence

	focus = {
		id = EQC_strengthen_equestrian_ties
		mutually_exclusive = { focus = EQC_patriation }
		icon = GFX_goal_generic_equestria
		x = 30
		y = 0

		cost = 8

		ai_will_do = {
			factor = 10
			modifier = {
				democratic < 0.5
				factor = 0.5
			}
		}

		available = {
			EQS = { has_government = ROOT }
			OR = {
				is_in_faction_with = EQS
				is_subject_of = EQS
			}

		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
						has_completed_focus = EQC_patriation
				}
			}
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_strengthen_equestrian_ties"
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				modify_tech_sharing_bonus = {
					id = equestrian_research
					bonus = 0.03
				}
			}
			else ={
				add_political_power = 50
			}

			EQS = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_equestrian_ties
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = EQC_harmony_pony
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_royal_visit
		icon = GFX_goal_eqc_royal_visit
		prerequisite = { focus = EQC_strengthen_equestrian_ties}
		relative_position_id = EQC_strengthen_equestrian_ties
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {
			EQS = {
				exists = yes
			}
			NOT = { has_war_with = EQS }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_royal_visit"
			country_event = { id = mareland.4 }
		}
	}

	focus = {
		id = EQC_equestrian_investors
		icon = GFX_focus_mex_privatisation
		prerequisite = { focus = EQC_strengthen_equestrian_ties}
		relative_position_id = EQC_strengthen_equestrian_ties
		x = -2
		y = 1

		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {
			EQS = {
				exists = yes
			}
			NOT = { has_war_with = EQS }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_equestrian_investors_factories
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_equestrian_investors_factories
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_equestrian_investors"
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = EQC_rich_set_industries
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_equestrian_investors_factories
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_equestrian_investors_factories }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_equestrian_investors_factories
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_school_for_gifted_unicorns
		icon = GFX_focus_research
		prerequisite = { focus = EQC_royal_visit}
		mutually_exclusive = { focus = EQC_school_of_friendship }
		relative_position_id = EQC_royal_visit
		x = -1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {
			NOT = { has_war_with = EQS }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_school_for_gifted_unicorns"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}

			add_ideas = EQC_school_for_unicorns
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_school_of_friendship
		icon = GFX_goal_generic_scientific_exchange_pony
		prerequisite = { focus = EQC_royal_visit}
		relative_position_id = EQC_royal_visit
		mutually_exclusive = { focus = EQC_school_for_gifted_unicorns }
		x = 1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {
			NOT = { has_war_with = EQS }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_school_of_friendship"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}
			add_ideas = EQC_friendship_school
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_attract_immigrants
		icon = GFX_goal_generic_liberty_statue
		prerequisite = { focus = EQC_equestrian_investors }
		relative_position_id = EQC_equestrian_investors
		x = -1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_attract_immigrants"
			add_ideas = EQC_attract_immigrants
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_national_housing_act
		icon = GFX_goal_generic_construction
		prerequisite = { focus = EQC_attract_immigrants }
		prerequisite = { focus = EQC_school_for_gifted_unicorns focus = EQC_school_of_friendship }
		relative_position_id = EQC_attract_immigrants
		x = 3
		y = 1

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_national_housing_act"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_land_grants
		icon = GFX_goal_generic_construct_public_housing
		prerequisite = { focus = EQC_national_housing_act }
		relative_position_id = EQC_national_housing_act
		mutually_exclusive = { focus = EQC_national_parks }
		x = -1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			add_stability = -0.05
			random_state = {
				limit = {
					has_state_flag = EQC_land_grants_state
				}
				add_extra_state_shared_building_slots = 4
			}
			random_state = {
				limit = {
					has_state_flag = EQC_land_grants_state1
				}
				add_extra_state_shared_building_slots = 4
			}
			random_state = {
				limit = {
					has_state_flag = EQC_land_grants_state2
				}
				add_extra_state_shared_building_slots = 4
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_land_grants"
			add_stability = -0.05
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 4
				set_state_flag = EQC_land_grants_state
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_land_grants_state }
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 4
				set_state_flag = EQC_land_grants_state1
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { OR = { has_state_flag = EQC_land_grants_state has_state_flag = EQC_land_grants_state1 } }
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 4
				set_state_flag = EQC_land_grants_state2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_national_parks
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = EQC_national_housing_act }
		relative_position_id = EQC_national_housing_act
		mutually_exclusive = { focus = EQC_land_grants }
		x = 1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_national_parks"
			add_ideas = EQC_protected_nature
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_basic_incom
		icon = GFX_DAH_Topke
		prerequisite = { focus = EQC_national_parks focus = EQC_land_grants }
		relative_position_id = EQC_land_grants
		x = 1
		y = 1

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_basic_incom"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
			custom_effect_tooltip = eqc_unlocks_economic_decisions_tt
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	shared_focus = EQC_transoceanic_support

	focus = {
		id = EQC_solidify_self_determination
		icon = GFX_goal_generic_government_deals
		prerequisite = { focus = EQC_basic_incom }
		relative_position_id = EQC_basic_incom
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {
			NOT = { has_idea = equestrian_overlord}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_solidify_self_determination"
			remove_ideas = equestrian_overlord
		}
	}

	############################
	#### EQUESTRIA IN EXILE ####
	############################

	focus = {
		id = EQC_government_in_exile
		icon = GFX_goal_eqc_shelter_celestia
		prerequisite = { focus = EQC_strengthen_equestrian_ties}
		relative_position_id = EQC_strengthen_equestrian_ties
		x = 4
		y = 1

		cost = 8

		ai_will_do = {
			factor = 100
		}

		available = {
			is_subject = no
			has_government = democratic
			EQS = {
				OR = {
					has_capitulated = yes
					exists = no
					is_subject = yes
				}
			}
			NOT = { has_global_flag = daybreaker_spawned}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_government_in_exile"
			set_country_flag = EQC_govt_in_exile
			if = {
				limit = {
					any_country_with_original_tag = {
						original_tag_to_check = EQS
						is_EQS_SOL = yes
						exists = yes
					}
					any_country_with_original_tag = {
						original_tag_to_check = EQS
						is_original_EQS = yes
						exists = no
					}
				}
				country_event = { id = eqsexile.2 } #Luna in Exile
			}
			else = {
				country_event = { id = eqsexile.1 } #Celestia in Exile
			}

			if = {
				limit = {
					NOT = { has_completed_focus = EQC_transoceanic_support }
					EQS = { exists = no }
				}
				custom_effect_tooltip = available_theorist
				show_ideas_tooltip = moon_dancer
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = EQC_commonwealth_aircraft_corporation
			}

			hidden_effect = {
				country_event = equestriancolony.1
			}
		}
	}

	focus = {
		id = EQC_unite_the_nation
		icon = GFX_goal_generic_national_unity_horseshoe
		prerequisite = { focus = EQC_government_in_exile}
		relative_position_id = EQC_government_in_exile
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {
			is_subject = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_unite_the_nation"
			add_stability = 0.3
			add_war_support = 0.3
		}
		search_filters = { FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_fund_the_resistence
		icon = GFX_focus_generic_provoke_border_clashes
		prerequisite = { focus = EQC_unite_the_nation}
		relative_position_id = EQC_unite_the_nation
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {
			is_subject = no
		}

		bypass = {
			OR = {
				EQS = {
					exists = yes
				}
				ELF = {
					AND = {
						exists = yes
						has_war = no
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_fund_the_resistence"
			add_ideas = EQC_funding_the_resistiance
			EQS = { add_ideas = EQC_resistance }
			ELF = { add_ideas = EQC_resistance }
			hidden_effect = {
				every_other_country = {
					limit = {
						any_occupied_country = {
							original_tag = EQS
						}
					}
					country_event = eqsexile.3
				}
			}
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_build_a_grand_fleet
		icon = GFX_goal_BEL_Battleship_Investements
		prerequisite = { focus = EQC_government_in_exile}
		relative_position_id = EQC_government_in_exile
		x = 2
		y = 2

		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {
			is_subject = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		complete_tooltip = {
			navy_experience = 100
			every_state = {
				limit = { has_state_flag = EQC_build_a_grand_fleet_dockyards }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = shbb_tech
			}
			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = bc_tech
			}
			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = bb_tech
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_build_a_grand_fleet"
			navy_experience = 100
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_build_a_grand_fleet_dockyards
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					NOT = { has_state_flag = EQC_build_a_grand_fleet_dockyards }
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_build_a_grand_fleet_dockyards
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					NOT = { has_state_flag = EQC_build_a_grand_fleet_dockyards }
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_build_a_grand_fleet_dockyards
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					NOT = { has_state_flag = EQC_build_a_grand_fleet_dockyards }
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_build_a_grand_fleet_dockyards
			}

			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				uses = 2
				category = shbb_tech
			}
			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				uses = 2
				category = bc_tech
			}
			add_tech_bonus = {
				name = EQC_build_a_grand_fleet
				bonus = 1.0
				uses = 2
				category = bb_tech
			}
		}
		search_filters = { FOCUS_FILTER_NAVY_BONUS FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

	}

	focus = {
		id = EQC_gather_our_friends
		icon = GFX_goal_generic_alliance
		prerequisite = { focus = EQC_government_in_exile }
		relative_position_id = EQC_government_in_exile
		x = -2
		y = 2

		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {
			is_subject = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_gather_our_friends"
			if = {
				limit = { is_in_faction = no }
				set_rule = { can_create_factions = yes }
				create_faction = EQC_RETAKE_EQUESTRIA_FACTION
				if = {
					limit = {
						country_exists = ELF
					}
					add_to_faction = ELF
				}
			}

			custom_effect_tooltip = EQC_gather_our_friends_tt

			country_event = mareland.41
			add_manpower = 50000
			custom_effect_tooltip = EQC_hippogriff_help_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_tech = paratroopers }
					}
					set_technology = { paratroopers = 1 }
				}
				if = {
					limit = {
						NOT = { has_tech = marines }
					}
					set_technology = { marines = 1 }
				}
				fix_weapon_techs = yes
				division_template = {
					name = "Hippogriff Expeditionary Force"
					priority = 2
					division_names_group = EQC_INF_01
					regiments = {
						paratrooper = { x = 0 y = 0 }
						paratrooper = { x = 0 y = 1 }
						paratrooper = { x = 0 y = 2 }

						paratrooper = { x = 1 y = 0 }
						paratrooper = { x = 1 y = 1 }
						paratrooper = { x = 1 y = 2 }

						paratrooper = { x = 2 y = 0 }
						paratrooper = { x = 2 y = 1 }
						paratrooper = { x = 2 y = 2 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
						recon = { x = 0 y = 2 }
					}
				}
				division_template = {
					name = "Seapony Expeditionary Force"
					priority = 2
					division_names_group = EQC_INF_01
					regiments = {
						marine = { x = 0 y = 0 }
						marine = { x = 0 y = 1 }
						marine = { x = 0 y = 2 }

						marine = { x = 1 y = 0 }
						marine = { x = 1 y = 1 }
						marine = { x = 1 y = 2 }

						marine = { x = 2 y = 0 }
						marine = { x = 2 y = 1 }
						marine = { x = 2 y = 2 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
						recon = { x = 0 y = 2 }
					}
				}
				random_owned_controlled_state = {
					limit = { ROOT = { has_full_control_of_state = PREV } }
					prioritize = { 356 }
					create_unit = {
						division = "name = \"1st 'Skyhawks' (Hippogriff) Expeditionary Force\" division_template = \"Hippogriff Expeditionary Force\" start_experience_factor = 1.0"
						owner = ROOT
					}
					create_unit = {
						division = "name = \"2nd 'Rainbow Depths' (Seapony) Expeditionary Force\" division_template = \"Seapony Expeditionary Force\" start_experience_factor = 1.0"
						owner = ROOT
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_the_homecoming
		icon = GFX_focus_strike_canterlot
		prerequisite = { focus = EQC_gather_our_friends }
		prerequisite = { focus = EQC_build_a_grand_fleet }
		prerequisite = { focus = EQC_fund_the_resistence }
		relative_position_id = EQC_fund_the_resistence
		x = 0
		y = 1

		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {
			is_subject = no
		}

		bypass = {
			has_war_together_with = ELF
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		will_lead_to_war_with = NLR

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_homecoming"
			if = {
				limit = {
					country_exists = ELF
					ELF = { has_war = yes }
				}
				ELF = {
					every_enemy_country = {
						limit = { NOT = { has_war_with = ROOT } }
						ROOT = {
							add_to_war = {
								targeted_alliance = ELF
								enemy = PREV
							}
						}
					}
				}
			}
			else = {
				every_other_country = {
					limit = {
						OR = {
							AND = {
								original_tag = EQC
								NOT = { has_government = democratic }
							}
							tag = event_target:solar_empire
							tag = NLR
							any_occupied_country = {
								original_tag = EQS
							}
						}
					}
					ROOT = {
						create_wargoal = {
							type = annex_everything
							target = PREV
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	############################
	#### LEAVE EQUESTRIA    ####
	############################

	focus = {
		id = EQC_patriation
		icon = GFX_goal_tfv_sever_ties_with_uk
		mutually_exclusive = { focus = EQC_strengthen_equestrian_ties }
		x = 14
		y = 0
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = EQC_patriation
			}
		}
		offset = {
			x = -6
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_jet_set_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_gladmane_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		relative_position_id = EQC_strengthen_equestrian_ties

		cost = 8

		ai_will_do = {
			factor = 8
			modifier = {
				OR = {
					communism > 0.25
					fascism > 0.15
					neutrality > 0.25
				}
				factor = 2.5
			}
			modifier = {
				NOT = { EQS = { has_government = democratic } }
				factor = 5
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
						has_completed_focus = EQC_strengthen_equestrian_ties
				}
			}
		}
		
		available = {

		}

		bypass = {
			NOT = { is_subject_of = EQS }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_patriation"
			custom_effect_tooltip = EQC_cant_do_shit_tp
			EQS = {
				add_opinion_modifier = { target = ROOT modifier = EQC_patriation }
			}
			add_ideas = EQC_patriation_idea
			#set_rule = { can_decline_call_to_war = yes }
			if = {
				limit = { has_dlc = "Together for Victory" }
				add_autonomy_ratio = {
					value = 0.2
					localization = EQC_patriation
				}
			}
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				news_event = { id = eqc_news.1 hours = 3 }
				set_country_flag = EQC_cant_surpress_democratic
				set_country_flag = EQC_cant_surpress_fascism
				set_country_flag = EQC_cant_surpress_communism
				set_country_flag = EQC_cant_surpress_neutral
				set_country_flag = EQC_cant_censor_press
			}
		}
		search_filters = { FOCUS_FILTER_TFV_AUTONOMY }
	}

	############################
	#### NON COMMUNIST      ####
	############################

	focus = {
		id = EQC_commonwelth_congress
		icon = GFX_goal_government_icon
		mutually_exclusive = { focus = EQC_recognise_stalliongrad }
		x = 44
		y = 1
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = EQC_patriation
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_jet_set_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_gladmane_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		prerequisite = { focus = EQC_patriation }
		cost = 8

		ai_will_do = {
			factor = 8
			modifier = {
				OR = {
					fascism > 0.15
					neutrality > 0.25
				}
				factor = 2.5
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_recognise_stalliongrad
				}
			}
		}
		
		available = {
			NOT = { has_government = communism }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_commonwelth_congress"
			add_ideas = EQC_commonwelth_congress_idea
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
		}
		search_filters = { FOCUS_FILTER_TFV_AUTONOMY FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_support_the_harmonists
		icon = GFX_goal_generic_equestria
		mutually_exclusive = { focus = EQC_let_all_have_a_say }
		x = -1
		y = 1
		relative_position_id = EQC_commonwelth_congress
		prerequisite = { focus = EQC_commonwelth_congress }

		cost = 8

		ai_will_do = {
			factor = 5
			modifier = {
				AND = {
					fascism < 0.15
					neutrality < 0.25
				}
				factor = 2.5
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_support_the_harmonists"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = EQC_harmony_pony
			add_popularity = { ideology = democratic popularity = 0.1 }
		}
	}
	focus = {
		id = EQC_let_all_have_a_say
		icon = GFX_goal_generic_ponykind
		mutually_exclusive = { focus = EQC_support_the_harmonists }
		x = 1
		y = 1
		relative_position_id = EQC_commonwelth_congress
		prerequisite = { focus = EQC_commonwelth_congress }
		cost = 8

		ai_will_do = {
			factor = 5
			modifier = {
				OR = {
					fascism > 0.15
					neutrality > 0.25
				}
				factor = 2.5
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_let_all_have_a_say"
			add_ideas = EQC_let_all_have_a_say
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = EQC_fascist_pony
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = EQC_neutral_pony
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = EQC_the_election
		icon = GFX_focus_generic_treaty
		x = 1
		y = 1
		relative_position_id = EQC_support_the_harmonists
		prerequisite = { focus = EQC_support_the_harmonists focus = EQC_let_all_have_a_say }
		cost = 8

		ai_will_do = {
			factor = 20
		}

		available = {
			OR = {
				AND = {
					is_subject_of = EQS
					if = {
						limit = { has_dlc = "Together for Victory" }
						AND = {
							compare_autonomy_progress_ratio > 0.85
							if = {
								limit = { NOT = { has_government = fascism } }
								has_autonomy_state = autonomy_dominion
							}
							if = {
								limit = { has_government = fascism }
								has_autonomy_state = autonomy_satellite
							}
						}
					}
					else = {
						date > 1008.6.1
					}
				}

				is_subject = no
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_election"
			set_country_leader_ideology = liberalism
			end_puppet_this = yes
			if = {
				limit = {
					is_faction_leader = no
					is_in_faction_with = EQS
				}
				leave_faction = yes
			}
			remove_ideas = equestrian_overlord
			every_other_country = {
				limit = {
					has_war_with = ROOT
					has_war_with = EQS
					NOT = {
						is_neighbor_of = ROOT
						has_wargoal_against = ROOT
						has_offensive_war_with = ROOT
					}
				}
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = ROOT
			}
			hidden_effect = {
				news_event = { id = eqc_news.2 hours = 3 }
			}
		}
	}
	############################
	#### JET SET WINS       ####
	############################
	focus = {
		id = EQC_jet_set_wins
		icon = GFX_goal_EQC_jetset
		x = -6
		y = 1
		offset = {
			x = 4
			y = 0
			trigger = {
				has_completed_focus = EQC_jet_set_wins
			}
		}
		relative_position_id = EQC_the_election
		prerequisite = { focus = EQC_the_election }
		prerequisite = { focus = EQC_support_the_harmonists }
		mutually_exclusive = {
			focus = EQC_gladmane_wins
			focus = EQC_kingfisher_wins
			focus = EQC_fascist_win
		}

		cost = 1

		ai_will_do = {
			factor = 50
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					OR = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_recognise_stalliongrad
						has_completed_focus = EQC_gladmane_wins
						has_completed_focus = EQC_kingfisher_wins
						has_completed_focus = EQC_fascist_win
					}
				}
			}
		}
		
		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_jet_set_wins"
			custom_effect_tooltip = EQC_cant_do_shit_2_tp
			if = {
				limit = {
					NOT = { has_government = democratic }
				}
				set_politics = { ruling_party = democratic }
			}
			if = {
				limit = {
					NOT = {
						has_country_leader = { ruling_only = yes character = EQC_jet_set }
					}
				}
				EQC_jet_set = {
					promote_character = yes
				}
			}
			add_popularity = { ideology = democratic popularity = 0.1 }
			add_country_leader_trait = staunch_constitutionalist
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				news_event = { id = eqc_news.3 hours = 3 }
				clr_country_flag = EQC_cant_surpress_fascism
				clr_country_flag = EQC_cant_surpress_communism
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = EQC_education_programms
		icon = GFX_goal_KTG_Bookstack
		x = -1
		y = 1
		relative_position_id = EQC_jet_set_wins
		prerequisite = { focus = EQC_jet_set_wins }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {
			NOT = { amount_research_slots < 5 }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_education_programms"
			add_research_slot = 1
			custom_effect_tooltip = CZE_war_college_effect_2_tt
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = EQC_trade_negotiations
		icon = GFX_goal_gold_up
		x = 0
		y = 1
		relative_position_id = EQC_education_programms
		prerequisite = { focus = EQC_education_programms }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_trade_negotiations"
			add_ideas = EQC_trade_negotiations
			every_country = {
				limit = {
					is_griffon_continent_country = yes
					NOT = {
						original_tag = ROOT
						original_tag = DED
					}
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_trade_with_new_mareland
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_nationalise_assets
		icon = GFX_goal_factory_complex
		prerequisite = { focus = EQC_jet_set_wins }
		x = 1
		y = 1
		relative_position_id = EQC_jet_set_wins

		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_nationalise_assets_factories
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_nationalise_assets_factories
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_nationalise_assets"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_nationalise_assets_factories
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_nationalise_assets_factories }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_nationalise_assets_factories
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_public_works_act
		icon = GFX_goal_construction_engineering
		prerequisite = { focus = EQC_nationalise_assets }
		x = 0
		y = 1
		relative_position_id = EQC_nationalise_assets

		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_public_works_act"
			add_ideas = EQC_public_works_act
			custom_effect_tooltip = eqc_unlocks_economic_decisions_tt
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_expand_charity_work
		icon = GFX_goal_famine
		prerequisite = { focus = EQC_public_works_act }
		prerequisite = { focus = EQC_trade_negotiations }
		x = -1
		y = 1
		relative_position_id = EQC_public_works_act

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_expand_charity_work"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_expand_oil_industry
		icon = GFX_goal_oil_derrick
		prerequisite = { focus = EQC_expand_charity_work }
		x = 0
		y = 1
		relative_position_id = EQC_expand_charity_work

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_expand_oil_industry"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_resource = {
					type = oil
					amount = 5
				}
			}
			add_tech_bonus = {
				name = EQC_expand_oil_industry
				bonus = 3
				uses = 1
				category = synth_resources
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_national_recovery_act
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = EQC_expand_oil_industry }
		x = 1
		y = 1
		relative_position_id = EQC_expand_oil_industry

		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_national_recovery_act"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	###Foreign
	focus = {
		id = EQC_befriend_eastern_ponies
		icon = GFX_goal_generic_national_unity
		x = 0
		y = 3
		relative_position_id = EQC_trade_negotiations
		prerequisite = { focus = EQC_trade_negotiations }
		cost = 8

		ai_will_do = {
			factor = 6
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_befriend_eastern_ponies"
			WNG = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_eastern_ties
				}
			}
			TAL = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_eastern_ties
				}
			}
			FRN = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_eastern_ties
				}
			}
			ARA = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_eastern_ties
				}
			}
			FAL = {
				add_opinion_modifier = {
					target = ROOT
					modifier = EQC_strengthen_eastern_ties
				}
			}
		}
	}

	focus = {
		id = EQC_ally_the_federation
		icon = GFX_focus_generic_diplomatic_treaty_pony_griffon
		prerequisite = { focus = EQC_befriend_eastern_ponies }
		mutually_exclusive = { focus = EQC_seek_own_path focus = EQC_unite_with_the_republic }
		x = -3
		y = 1
		relative_position_id = EQC_national_recovery_act

		cost = 8

		ai_will_do = {
			factor = 6
		}

		available = {
			is_subject = no
			is_in_faction = no
			WNG = {
				exists = yes
				has_government = democratic
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_ally_the_federation"
			WNG = {
				country_event = { id = generic.2 }
			}
		}
	}

	focus = {
		id = EQC_seek_own_path
		icon = GFX_goal_anschluss
		prerequisite = { focus = EQC_national_recovery_act }
		mutually_exclusive = { focus = EQC_ally_the_federation focus = EQC_unite_with_the_republic }
		x = -1
		y = 1
		relative_position_id = EQC_national_recovery_act

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
			is_in_faction = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_seek_own_path"
			set_rule = { can_create_factions = yes }
		}
	}

	focus = {
		id = EQC_unite_with_the_republic
		icon = GFX_goal_generic_major_alliance_pony_griffon
		prerequisite = { focus = EQC_national_recovery_act }
		mutually_exclusive = { focus = EQC_ally_the_federation focus = EQC_seek_own_path }
		x = 1
		y = 1
		relative_position_id = EQC_national_recovery_act

		cost = 8

		ai_will_do = {
			factor = 6
		}

		available = {
			is_subject = no
			is_in_faction = no
			JER = { exists = yes is_faction_leader = yes has_government = democratic }
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_unite_with_the_republic"
			JER = { country_event = { id = generic.2 } }
		}
	}



	############################
	#### GLADMANE WINS      ####
	############################
	focus = {
		id = EQC_gladmane_wins
		icon = GFX_goal_EQC_gladmane
		x = 4
		y = 0
		offset = {
			x = 2
			y = 0
			trigger = {
				has_completed_focus = EQC_gladmane_wins
			}
		}
		relative_position_id = EQC_jet_set_wins
		prerequisite = { focus = EQC_the_election }
		mutually_exclusive = {
			focus = EQC_jet_set_wins
			focus = EQC_kingfisher_wins
			focus = EQC_fascist_win
		}

		cost = 1

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0.05
				WNG = { NOT = { has_government = fascism } }
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					OR = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_recognise_stalliongrad
						has_completed_focus = EQC_jet_set_wins
						has_completed_focus = EQC_kingfisher_wins
						has_completed_focus = EQC_fascist_win
					}
				}
			}
		}
		
		available = {
			neutrality > 0.4
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_gladmane_wins"
			if = {
				limit = {
					NOT = { has_government = neutrality }
				}
				set_politics = { ruling_party = neutrality }
			}
			if = {
				limit = {
					NOT = {
						has_country_leader = { ruling_only = yes character = EQC_gladmane }
					}
				}
				EQC_gladmane = {
					promote_character = yes
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.1 }
			remove_ideas = EQC_let_all_have_a_say
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				news_event = { id = eqc_news.4 hours = 3 }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_gambling_freedom_act
		icon = GFX_focus_gambling
		x = -1
		y = 1
		relative_position_id = EQC_gladmane_wins
		prerequisite = { focus = EQC_gladmane_wins }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_gambling_freedom_act"
			add_ideas = EQC_gambling_profits
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_embrace_neutrality
		icon = GFX_focus_hol_the_foundations_of_defense
		x = 1
		y = 1
		relative_position_id = EQC_gladmane_wins
		prerequisite = { focus = EQC_gladmane_wins }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_embrace_neutrality"
			add_ideas = neutrality_idea
			add_stability = 0.05
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = EQC_build_the_wall
		icon = GFX_goal_nested_fortifications
		x = 1
		y = 1
		relative_position_id = EQC_gambling_freedom_act
		prerequisite = { focus = EQC_gambling_freedom_act }
		prerequisite = { focus = EQC_embrace_neutrality }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_build_the_wall"
			add_ideas = EQC_build_the_wall
			every_owned_state = {
				limit = { 
					is_core_of = ROOT
					is_fully_controlled_by = ROOT
					any_neighbor_state = { owner = { NOT = { tag = ROOT } } } 
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						all_provinces = yes
						limit_to_border = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_national_work_act
		icon = GFX_goal_generic_production2
		x = -1
		y = 1
		relative_position_id = EQC_build_the_wall
		prerequisite = { focus = EQC_build_the_wall }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_national_work_act"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
			custom_effect_tooltip = eqc_unlocks_economic_decisions_tt
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_cut_red_tape
		icon = GFX_goal_generic_construct_civ_factory
		x = -1
		y = 1
		relative_position_id = EQC_national_work_act
		prerequisite = { focus = EQC_national_work_act }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_cut_red_tape_factories
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_cut_red_tape_factories_2
				}
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_cut_red_tape"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				set_state_flag = EQC_cut_red_tape_factories
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_cut_red_tape_factories }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_cut_red_tape_factories_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_open_banks_to_griffons
		icon = GFX_goal_gold_reserve
		x = 1
		y = 1
		relative_position_id = EQC_national_work_act
		prerequisite = { focus = EQC_national_work_act }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {
			has_war = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_open_banks_to_griffons"
			custom_effect_tooltip = EQC_open_banks_to_griffons_tt
			every_neighbor_country = {
				limit = {
					NOT = {
						has_war_with = EQC
						has_government = communism
						has_idea = detached_country
						has_tribal_society = yes
					}
					does_not_have_communal_society = yes
				}
				country_event = mareland.31
			}
		}
	}

	focus = {
		id = EQC_trickle_down_economics
		icon = GFX_goal_endless_money
		x = 1
		y = 1
		relative_position_id = EQC_cut_red_tape
		prerequisite = { focus = EQC_cut_red_tape }
		prerequisite = { focus = EQC_open_banks_to_griffons }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_trickle_down_economics"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_expand_mines
		icon = GFX_goal_generic_construct_civilian
		x = 1
		y = 1
		relative_position_id = EQC_open_banks_to_griffons
		prerequisite = { focus = EQC_open_banks_to_griffons focus = EQC_the_only_defence_against_communism }
		cost = 8
		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_expand_mines"
			add_tech_bonus = {
				name = EQC_expand_mines
				bonus = 1.0
				uses = 2
				technology = excavation1
				technology = excavation2
				technology = excavation3
				technology = excavation4
				technology = excavation5
			}
			custom_effect_tooltip = eqc_expand_mines_tt
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	############################
	#### KINGFISHER WINS    ####
	############################
	focus = {
		id = EQC_kingfisher_wins
		icon = GFX_goal_EQC_kingfisher
		x = 4
		y = 0
		offset = {
			x = -2
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_gladmane_wins
		prerequisite = { focus = EQC_the_election }
		cost = 1

		mutually_exclusive = {
			focus = EQC_gladmane_wins
			focus = EQC_jet_set_wins
			focus = EQC_fascist_win
		}

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0.05
				WNG = { NOT = { has_government = fascism } }
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					OR = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_recognise_stalliongrad
						has_completed_focus = EQC_gladmane_wins
						has_completed_focus = EQC_jet_set_wins
						has_completed_focus = EQC_fascist_win
					}
				}
			}
		}
		
		available = {
			neutrality > 0.4
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_kingfisher_wins"
			if = {
				limit = {
					NOT = { has_government = neutrality }
				}
				set_politics = { ruling_party = neutrality }
			}
			if = {
				limit = {
					NOT = {
						has_country_leader = { ruling_only = yes character = EQC_kingfisher }
					}
				}
				add_country_leader_role = {
					character = EQC_kingfisher
					promote_leader = yes

					country_leader={
						desc = "yet_another_huey_long_desc"
						ideology = populism
						expire="1965.1.1.1"
						traits = { rural_populist }
					}
				}
			}
			add_popularity = { ideology = neutrality popularity = 0.1 }
			remove_ideas = EQC_let_all_have_a_say
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				news_event = { id = eqc_news.5 hours = 3 }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_bust_the_oil_barons
		icon = GFX_goal_further_oil
		x = -3
		y = 3
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_bust_the_monopolies }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_bust_the_oil_barons_1
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_bust_the_oil_barons"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_bust_the_oil_barons_1 }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_bust_the_oil_barons_1
			}
			356 = {
				add_resource = {
					type = oil
					amount = 10
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_bust_the_monopolies
		icon = GFX_goal_factory_complex
		x = -2
		y = 2
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_kingfisher_wins }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_bust_the_monopolies_1
				}
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_bust_the_monopolies_2
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_bust_the_monopolies"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_bust_the_monopolies_1 }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				set_state_flag = EQC_bust_the_monopolies_1
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					NOT = { has_state_flag = EQC_bust_the_monopolies_2 }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
					NOT = {
						OR = {
							state = 675
							state = 676
						}
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = EQC_bust_the_monopolies_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_public_works_projects
		icon = GFX_goal_generic_build_housing
		x = -1
		y = 3
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_share_the_wealth_program }
		prerequisite = { focus = EQC_bust_the_monopolies }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}
		
		complete_tooltip = {
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_nation_works_projects"
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_the_bat_vote
		icon = GFX_goal_bat
		x = 4
		y = 5
		offset = {
			x = -2
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		relative_position_id = EQC_the_election
		prerequisite = { focus = EQC_affordable_utilities focus = EQC_seize_control }
		cost = 8
		ai_will_do = {
			factor = 8
		}
		available = {

		}
		bypass = {

		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_bat_vote"
			if = {
			    limit = {
				    has_government = neutrality
				}
			    add_ideas = EQC_accept_the_bats_idea_2
			}
			else = {
			    add_ideas = EQC_accept_the_bats_idea
			}
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_for_the_poor_pony
		icon = GFX_goal_big_news
		x = -1
		y = 1
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_kingfisher_wins }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_for_the_poor_pony"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_national_political_machine
		icon = GFX_goal_agency
		x = 1
		y = 1
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_kingfisher_wins }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_national_political_machine"
			swap_ideas = {
			    remove_idea = EQC_commonwelth_congress_idea
				add_idea = EQC_national_political_machine_idea
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_affordable_utilities
		icon = GFX_goal_generic_lightbulb
		x = 1
		y = 3
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_national_political_machine }
		prerequisite = { focus = EQC_for_the_poor_pony }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_public_works_projects"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_the_only_defence_against_communism
		icon = GFX_goal_HOL_crackdown_totalist
		x = -3
		y = 1
		relative_position_id = EQC_affordable_utilities
		prerequisite = { focus = EQC_public_works_projects focus = EQC_national_work_act }
		cost = 8

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_only_defence_against_communism"
			custom_effect_tooltip = EQC_cant_do_shit_3_tp
			hidden_effect = {
				clr_country_flag = EQC_cant_surpress_communism
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@communism
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
			}
			add_stability = ban_ideology_var
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_share_the_wealth_program
		icon = GFX_goal_socialist_infrastructure
		x = 0
		y = 2
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_for_the_poor_pony }
		prerequisite = { focus = EQC_national_political_machine }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_share_the_wealth_program"
			add_ideas = EQC_share_the_wealth_program_idea
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_education_reform_act
		icon = GFX_goal_bookstack
		x = 0
		y = 2
		relative_position_id = EQC_share_the_wealth_program
		prerequisite = { focus = EQC_public_works_projects }
		prerequisite = { focus = EQC_affordable_utilities }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {
			NOT = { amount_research_slots < 5 }
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_section_13"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	
	focus = {
		id = EQC_civil_rights
		icon = GFX_goal_new_treaty
		x = -1
		y = 1
		relative_position_id = EQC_education_reform_act
		prerequisite = { focus = EQC_education_reform_act }
		mutually_exclusive = { focus = EQC_token_reforms }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {

		}
		
		select_effect = {
		    hidden_effect = {
				country_event = { 
					id = mareland.76 
					days = 16 
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_civil_rights"
			custom_effect_tooltip = EQC_cant_do_shit_4_tp
			swap_ideas = {
			    remove_idea = EQC_griffon_minorities1
				add_idea = EQC_civil_rights_idea
			}
			hidden_effect = {
				clr_country_flag = EQC_cant_surpress_fascism
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@fascism
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
			}
			add_stability = ban_ideology_var
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_token_reforms
		icon = GFX_goal_treaty_fails
		x = 1
		y = 1
		relative_position_id = EQC_education_reform_act
		prerequisite = { focus = EQC_education_reform_act }
		mutually_exclusive = { focus = EQC_civil_rights }
		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_token_reforms"
			swap_ideas = {
			    remove_idea = EQC_griffon_minorities1
				add_idea = EQC_griffon_minorities2
			}
			add_stability = 0.05
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_imperial_presidency
		icon = GFX_focus_usa_voter_registration_act
		x = -2
		y = 2
		relative_position_id = EQC_education_reform_act
		prerequisite = { focus = EQC_civil_rights focus = EQC_token_reforms }
		mutually_exclusive = { focus = EQC_perfect_democracy }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_imperial_presidency"
			custom_effect_tooltip = EQC_cant_do_shit_6_tp
			hidden_effect = {
			    clr_country_flag = EQC_cant_censor_press
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@democratic
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
			}
			add_stability = ban_ideology_var
			swap_ideas = {
			    remove_idea = EQC_national_political_machine_idea
			    add_idea = EQC_imperial_presidency_idea
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT }
	}
	
	focus = {
		id = EQC_perfect_democracy
		icon = GFX_goal_generic_elections
		x = 0
		y = 2
		relative_position_id = EQC_education_reform_act
		prerequisite = { focus = EQC_civil_rights focus = EQC_token_reforms }
		mutually_exclusive = { focus = EQC_imperial_presidency }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_perfect_democracy"
			swap_ideas = {
			    remove_idea = EQC_national_political_machine_idea
			    add_idea = EQC_perfect_democracy_idea
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_the_new_mareland_century
		icon = GFX_goal_generic_liberty_statue
		x = -1
		y = 3
		relative_position_id = EQC_education_reform_act
		prerequisite = { focus = EQC_imperial_presidency focus = EQC_perfect_democracy }
		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {
            is_subject = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_new_mareland_century"
			add_ideas = EQC_the_new_mareland_century_idea
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	
	

	############################
	#### THE DUKE WINS      ####
	############################
	focus = {
		id = EQC_fascist_win
		icon = GFX_goal_EQC_fascism
		x = 6
		y = 0
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_the_election }
		cost = 1

		mutually_exclusive = {
			focus = EQC_gladmane_wins
			focus = EQC_kingfisher_wins
			focus = EQC_jet_set_wins
		}

		ai_will_do = {
			factor = 40
			modifier = {
				fascism > 0.4
				factor = 20
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					OR = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_recognise_stalliongrad
						has_completed_focus = EQC_gladmane_wins
						has_completed_focus = EQC_jet_set_wins
						has_completed_focus = EQC_kingfisher_wins
					}
				}
			}
		}
		
		available = {
			fascism > 0.4
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_fascist_win"
			custom_effect_tooltip = EQC_cant_do_shit_3_tp
			hidden_effect = {
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@communism
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
			}
			add_stability = ban_ideology_var
			set_politics = { 
				ruling_party = fascism 
			}
			add_popularity = { 
				ideology = fascism 
				popularity = 0.1 
			}
			remove_ideas = EQC_let_all_have_a_say
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = {
				country_event = { 
					id = mareland.75 
				}
				clr_country_flag = EQC_cant_surpress_communism
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_the_duke_wins
		icon = GFX_goal_EQC_erebus
		x = 4
		y = 1
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		relative_position_id = EQC_kingfisher_wins
		prerequisite = { focus = EQC_fascist_win }
		cost = 1

		mutually_exclusive = {
			focus = EQC_picket_wins
		}

		ai_will_do = {
			factor = 40
			modifier = {
				fascism > 0.4
				factor = 20
			}
		}

		available = {
			always = no
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_duke_wins"
			custom_effect_tooltip = EQC_the_duke_wins_tp
			hidden_effect = {
				news_event = { id = eqc_news.6 hours = 3 }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_autarky
		icon = GFX_goal_state_economy
		x = 1
		y = 1
		relative_position_id = EQC_the_duke_wins
		prerequisite = { focus = EQC_the_duke_wins }
		cost = 8
		ai_will_do = {
			factor = 6
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_autarky"
			add_tech_bonus = {
				name = EQC_autarky
				bonus = 1.0
				uses = 2
				technology = excavation1
				technology = excavation2
				technology = excavation3
				technology = excavation4
				technology = excavation5
			}
			add_ideas = EQC_autarky_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_build_now_play_later
		icon = GFX_goal_construction_engineering
		x = -1
		y = 1
		relative_position_id = EQC_the_duke_wins
		prerequisite = { focus = EQC_the_duke_wins }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_build_now_play_later"
			add_ideas = EQC_bnpl_bills_1
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_seize_control
		icon = GFX_goal_national_populism
		x = 1
		y = 1
		relative_position_id = EQC_build_now_play_later
		prerequisite = { focus = EQC_build_now_play_later }
		prerequisite = { focus = EQC_autarky }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_seize_control"
			custom_effect_tooltip = EQC_cant_do_shit_5_tp
			hidden_effect = {
				set_temp_variable = {
					var = ban_ideology_var
					value = party_popularity@neutrality
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = -1
				}
				multiply_temp_variable = {
					var = ban_ideology_var
					value = 0.66
				}
			}
			add_stability = ban_ideology_var
			swap_ideas = {
				remove_idea = EQC_commonwelth_congress_idea
				add_idea = EQC_fascist_government
			}
			hidden_effect = {
				clr_country_flag = EQC_cant_surpress_democratic
				clr_country_flag = EQC_cant_surpress_fascism
				clr_country_flag = EQC_cant_surpress_neutral
				clr_country_flag = EQC_cant_censor_press
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_nation_works_projects
		icon = GFX_goal_industrial_pony
		x = 2
		y = 1
		relative_position_id = EQC_seize_control
		prerequisite = { focus = EQC_united_shadowworks }
		cost = 8
		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_nation_works_projects"
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_united_shadowworks
		icon = GFX_r56_goal_FRA_alliance_with_industrialists
		x = 2
		y = 0
		relative_position_id = EQC_seize_control
		prerequisite = { focus = EQC_autarky focus = EQC_regulated_capitalism }
		cost = 8
		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_united_shadowworks1
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_united_shadowworks2
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_united_shadowworks"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_united_shadowworks1
			}

			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_united_shadowworks2
			}
			hidden_effect = {
				country_event = mareland.82
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_three_year_plan
		icon = GFX_focus_generic_tank_production
		x = 0
		y = 1
		relative_position_id = EQC_seize_control
		prerequisite = { focus = EQC_seize_control }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_three_year_plan"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_empower_the_army
		icon = GFX_goal_generic_pony_soldier
		x = -1
		y = 1
		relative_position_id = EQC_three_year_plan
		prerequisite = { focus = EQC_three_year_plan }
		cost = 8
		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_empower_the_army"
			army_experience = 25
			add_ideas = EQC_army_empowered
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS }
	}

	focus = {
		id = EQC_section_13
		icon = GFX_goal_supremacy_of_will
		x = -1
		y = 1
		relative_position_id = EQC_empower_the_army
		prerequisite = { focus = EQC_empower_the_army }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_section_13"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}
			add_ideas = EQC_griffon_experiment
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = EQC_expand_the_stormponies
		icon = GFX_HON_peace_in_our_time
		x = 1
		y = 1
		relative_position_id = EQC_three_year_plan
		prerequisite = { focus = EQC_three_year_plan }
		cost = 8
		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_expand_the_stormponies"
			swap_ideas = {
			    remove_idea = EQC_griffon_minorities1
				add_idea = EQC_expand_the_stormponies_idea
			}
	    }
		search_filters = { FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = EQC_work_for_the_nation
		icon = GFX_goal_industry_air
		x = 1
		y = 1
		relative_position_id = EQC_empower_the_army
		prerequisite = { focus = EQC_empower_the_army }
		prerequisite = { focus = EQC_expand_the_stormponies }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_work_for_the_nation"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = EQC_a_deal_with_the_duce
		icon = GFX_focus_HOL_deal_with_right
		x = -1
		y = 1
		relative_position_id = EQC_work_for_the_nation
		prerequisite = { focus = EQC_work_for_the_nation }
		mutually_exclusive = { focus = EQC_stand_against_griffons }
		cost = 8
		ai_will_do = {
			factor = 3
		}

		available = {
			is_subject = no
			is_in_faction = no
			NOT = { has_war_with = WNG }
			WNG = {
				has_government = fascism
				is_subject = no
				is_faction_leader = yes
			}
		}

		bypass = {
			is_in_faction_with = WNG
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_a_deal_with_the_duce"
			WNG = {
				country_event = generic.2
			}
		}
	}

	focus = {
		id = EQC_stand_against_griffons
		icon = GFX_focus_generic_eagle
		x = 1
		y = 1
		relative_position_id = EQC_work_for_the_nation
		prerequisite = { focus = EQC_work_for_the_nation }
		mutually_exclusive = { focus = EQC_a_deal_with_the_duce }
		cost = 8
		ai_will_do = {
			factor = 6
		}

		available = {
			is_subject = no
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_stand_against_griffons"
			set_rule = { can_create_factions = yes }
			if = {
			    limit = {
				    is_in_faction = no
				}
				create_faction = EQC_SILVER_CRESCENT
			}
			add_ideas = EQC_the_griffon_menace
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	
	focus = {
		id = EQC_no_south_griffon_commies
		icon = GFX_goal_broken_red_star
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_stand_against_griffons focus = EQC_the_silver_crescent_doctrine focus = EQC_the_new_mareland_century }
		available = {
			is_subject = no
		}
		bypass = {
		    custom_trigger_tooltip = {
			    tooltip = EQC_no_south_griffon_commies_tp
				WNG = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				FAL = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				TAL = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				FRN = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				ARA = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				CYA = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
				MIT = {
					OR = {
					    has_war_with = ROOT
					    OR = {
						    exists = no
						    is_subject_of = ROOT 
						    is_in_faction_with = ROOT
					    }
					}
				}
			}
		}
		x = -2
		y = 1
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_stand_against_griffons
		cost = 8
		ai_will_do = {
			factor = 1
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_no_south_griffon_commies"
			custom_effect_tooltip = EQC_no_south_griffon_commies_tt
			hidden_effect = {
				if = {
					limit = {
						WNG = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = WNG
					}
				}
				if = {
					limit = {
						FAL = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = FAL
					}
				}
				if = {
					limit = {
						TAL = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = TAL
					}
				}
				if = {
					limit = {
						FRN = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = FRN
					}
				}
				if = {
					limit = {
						SIC = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = SIC
					}
				}
				if = {
					limit = {
						MIT = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = MIT
					}
				}
				if = {
					limit = {
						CYA = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = CYA
					}
				}
				if = {
					limit = {
						ARA = {
							has_government = communism
						}
					}
					create_wargoal = {
						type = puppet_wargoal_focus
						target = ARA
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	
	#####################################
	####      PICKET FENCE WINS      ####
	#####################################
	
	focus = {
		id = EQC_picket_wins
		icon = GFX_goal_EQC_picket_fence
		x = 2
		y = 1
		offset = {
			x = 0
			y = 0
			trigger = {
				has_completed_focus = EQC_fascist_win
			}
		}
		relative_position_id = EQC_fascist_win
		prerequisite = { focus = EQC_fascist_win }
		cost = 1

		mutually_exclusive = {
			focus = EQC_the_duke_wins
		}

		ai_will_do = {
			factor = 40
			modifier = {
				fascism > 0.4
				factor = 20
			}
		}

		available = {
			always = no
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_picket_wins"
			custom_effect_tooltip = EQC_picket_wins_tp
			hidden_effect = {
				news_event = { id = eqc_news.15 hours = 3 }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_regulated_capitalism
		icon = GFX_goal_free_market
		x = -1
		y = 1
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_picket_wins }
		cost = 8
		ai_will_do = {
			factor = 6
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_regulated_capitalism"
			add_ideas = EQC_regulated_capitalism_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_break_the_bankers
		icon = GFX_goal_bankruptcy
		x = 1
		y = 1
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_picket_wins }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_break_the_bankers"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_defend_democracy
		icon = GFX_goal_DOM_End_Judicial_Corruption
		x = 0
		y = 2
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_break_the_bankers }
		prerequisite = { focus = EQC_regulated_capitalism }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_defend_democracy"
			swap_ideas = {
				remove_idea = EQC_commonwelth_congress_idea
				add_idea = EQC_defend_democracy_idea
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_pony_citizen_councils
		icon = GFX_COS_Ferrer_Coup
		x = 0
		y = 3
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_defend_democracy }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_pony_citizen_councils"
			add_ideas = EQC_pony_citizen_councils_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_the_national_guard
		icon = GFX_goal_generic_drafted_army
		x = 0
		y = 5
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_pony_citizen_councils }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_national_guard"
			add_ideas = EQC_the_national_guard_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_implement_segregation
		icon = GFX_goal_DOM_The_Trial
		x = 2
		y = 3
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_defend_democracy }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_implement_segregation"
			swap_ideas = {
			    remove_idea = EQC_griffon_minorities1
				add_idea = EQC_implement_segregation_idea
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_accept_the_bats
		icon = GFX_goal_bat
		x = -1
		y = 1
		relative_position_id = EQC_implement_segregation
		prerequisite = { focus = EQC_implement_segregation }
		mutually_exclusive = {
		    focus = EQC_encourage_them_to_leave
		}
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_accept_the_bats"
			add_ideas = EQC_accept_the_bats_idea
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_encourage_them_to_leave
		icon = GFX_goal_news
		x = 1
		y = 1
		relative_position_id = EQC_implement_segregation
		prerequisite = { focus = EQC_implement_segregation }
		mutually_exclusive = {
		    focus = EQC_accept_the_bats
		}
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_encourage_them_to_leave"
			add_ideas = EQC_encourage_them_to_leave_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_model_communities
		icon = GFX_focus_usa_guarantee_the_american_dream
		x = 0
		y = 2
		relative_position_id = EQC_implement_segregation
		prerequisite = { focus = EQC_accept_the_bats focus = EQC_encourage_them_to_leave }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_model_communities"
			swap_ideas = {
			    remove_idea = EQC_implement_segregation_idea
				add_idea = EQC_model_communities_idea
			}
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_manpower = 20000
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_tuitions_for_ponies
		icon = GFX_goal_KTG_Bookstack
		x = -1
		y = 4
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_united_shadowworks }
		prerequisite = { focus = EQC_pony_citizen_councils }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {
			NOT = { amount_research_slots < 5 }
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_section_13"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	
	focus = {
		id = EQC_marelandian_recovery
		icon = GFX_goal_ITA_urban
		x = -2
		y = 5
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_tuitions_for_ponies }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_marelandian_recovery"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_the_silver_crescent_doctrine
		icon = GFX_focus_generic_strike_at_democracy1
		x = 0
		y = 6
		relative_position_id = EQC_picket_wins
		prerequisite = { focus = EQC_marelandian_recovery }
		prerequisite = { focus = EQC_the_national_guard }
		prerequisite = { focus = EQC_model_communities }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {
			is_subject = no
		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_silver_crescent_doctrine"
			add_ideas = EQC_the_silver_crescent_doctrine_idea
			set_rule = { can_create_factions = yes }
			if = {
			    limit = {
				    is_in_faction = no
				}
				create_faction = EQC_SILVER_CRESCENT
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	#####################################
	#### COMMIE-FASCIST WAR GOALS    ####
	#####################################
	
	focus = {
		id = EQC_war_with_talouse
		icon = GFX_goal_generic_more_territorial_claims
		x = 4
		y = 1
		offset = {
			x = -12
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		relative_position_id = EQC_stand_against_griffons
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_the_silver_crescent_doctrine focus = EQC_stand_against_griffons focus = EQC_the_vanguard_of_the_griffonian_revolution }
		cost = 8
		ai_will_do = {
			factor = 6
			modifier = {
				factor = 0.2
				TAL = {
					strength_ratio = {
						tag = EQC
						ratio > 0.6
					}
				}
			}
		}

		will_lead_to_war_with = TAL

		available = {
			is_subject = no
			TAL = {
			    NOT = {
			        is_in_faction_with = ROOT
				}
			}
		}

		bypass = {
		    OR = {
			    has_war_with = TAL
				TAL = {
					OR = {
						exists = no
						is_subject_of = ROOT 
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_war_with_talouse"
			create_wargoal = {
				type = annex_everything
				target = TAL
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = EQC_war_with_wingbardy
		icon = GFX_focus_wingbardy_forever
		x = 2
		y = 1
		offset = {
			x = -12
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_stand_against_griffons
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_stand_against_griffons focus = EQC_the_silver_crescent_doctrine focus = EQC_the_new_mareland_century focus = EQC_the_vanguard_of_the_griffonian_revolution }
		cost = 8
		ai_will_do = {
			factor = 6
			modifier = {
				factor = 0.2
				WNG = {
					strength_ratio = {
						tag = EQC
						ratio > 0.6
					}
				}
			}
		}

		will_lead_to_war_with = WNG

		available = {
			is_subject = no
			WNG = {
			    NOT = {
			        is_in_faction_with = ROOT
				}
			}
		}

		bypass = {
		    OR = {
			    has_war_with = WNG
				WNG = {
					OR = {
						exists = no
						is_subject_of = ROOT 
					}
				}
			}
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_war_with_wingbardy"
			create_wargoal = {
				type = annex_everything
				target = WNG
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	
	focus = {
		id = EQC_economic_exploitation
		icon = GFX_focus_usa_reestablish_the_gold_standard
		x = -1
		y = 2
		relative_position_id = EQC_stand_against_griffons
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_the_silver_crescent_doctrine focus = EQC_stand_against_griffons }
		cost = 8
		ai_will_do = {
			factor = 7
		}

		available = {
			is_subject = no
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_economic_exploitation"
			custom_effect_tooltip = EQC_economic_exploitation_tp
			effect_tooltip = {
				add_ideas = EQC_economic_exploitation_idea
			}
			hidden_effect = {
				every_country = {
			    	limit = {
				    	is_subject_of = ROOT
					}
					add_ideas = EQC_economic_exploitation_idea
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_join_the_concordant
		icon = GFX_goal_DOM_End_Judicial_Corruption
		x = 2
		y = 1
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_the_new_mareland_century
		prerequisite = { focus = EQC_the_new_mareland_century }
		cost = 8
		ai_will_do = {
			factor = 4
		}

		available = {
			is_subject = no
			is_in_faction = no
			NOT = { has_war_with = MIT }
			MIT = {
				OR = {
				    has_government = neutrality
					has_government = democratic
				}
				is_subject = no
				is_faction_leader = yes
			}
		}

		bypass = {
			is_in_faction_with = MIT
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_join_the_concordant"
			MIT = {
				country_event = generic.2
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_join_the_research
		icon = GFX_goal_PAN_Create_the_Universidad_de_Panama
		x = 3
		y = 2
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_the_new_mareland_century
		prerequisite = { focus = EQC_join_the_concordant }
		cost = 8
		ai_will_do = {
			factor = 4
		}

		available = {
			is_in_faction_with = MIT
		}

		bypass = {
			
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_join_the_concordant"
			add_to_tech_sharing_group = MIT_research_group
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	
	focus = {
		id = EQC_the_14th_state
		icon = GFX_goal_foreign_diplomacy
		x = 0
		y = 1
		offset = {
			x = -12
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_stand_against_griffons
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_the_silver_crescent_doctrine focus = EQC_stand_against_griffons focus = EQC_the_new_mareland_century focus = EQC_the_vanguard_of_the_griffonian_revolution }
		cost = 8
		ai_will_do = {
			factor = 7
		}

		available = {
		    394 = {
				owner = {
					OR = { 
						tag = ROOT 
						is_subject_of = ROOT  
					}
				}
			}
			395 = {
				owner = {
					OR = { 
						tag = ROOT 
						is_subject_of = ROOT  
					}
				}
			}
			535 = {
				owner = {
					OR = { 
						tag = ROOT 
						is_subject_of = ROOT  
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_14th_state"
			custom_effect_tooltip = EQC_the_14th_state_tp
			hidden_effect = {
			    if = {
				    limit = {
					    394 = {
							owner = {
								OR = { 
									tag = ROOT 
									is_subject_of = ROOT  
								}
							}
						}
					}
					ROOT = {
					    transfer_state = 394
					}
				}
				if = {
				    limit = {
					    395 = {
							owner = {
								OR = { 
									tag = ROOT 
									is_subject_of = ROOT  
								}
							}
						}
					}
					ROOT = {
					    transfer_state = 395
					}
				}
				if = {
				    limit = {
					    535 = {
							owner = {
								OR = { 
									tag = ROOT 
									is_subject_of = ROOT  
								}
							}
						}
					}
					ROOT = {
					    transfer_state = 535
					}
				}
				394 = { 
                    set_state_name = "EQC_vp_south_new_harvi"
                    set_province_name = {
                        id = 12180
                        name = EQC_vp_bockabie
                    }
			    }
				395 = { 
                    set_state_name = "EQC_vp_north_new_harvi"				
			    }
				535 = { 
                    set_state_name = EQC_vp_eromango			
			    }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_the_13th_state
		icon = GFX_goal_new_treaty
		x = 1
		y = 2
		offset = {
			x = -12
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		offset = {
			x = -4
			y = 0
			trigger = {
				has_completed_focus = EQC_kingfisher_wins
			}
		}
		relative_position_id = EQC_stand_against_griffons
		prerequisite = { focus = EQC_a_deal_with_the_duce focus = EQC_the_silver_crescent_doctrine focus = EQC_stand_against_griffons focus = EQC_the_new_mareland_century focus = EQC_the_vanguard_of_the_griffonian_revolution }
		prerequisite = { focus = EQC_war_with_wingbardy }
		cost = 8
		ai_will_do = {
			factor = 7
		}

		available = {
		    369 = {
				owner = {
					OR = { 
						tag = ROOT 
						is_subject_of = ROOT  
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_13th_state"
			custom_effect_tooltip = EQC_the_13th_state_tp
			hidden_effect = {
			    if = {
				    limit = {
					    369 = {
							owner = {
								OR = { 
									tag = ROOT 
									is_subject_of = ROOT  
								}
							}
						}
					}
					ROOT = {
					    transfer_state = 369
					}
				}
				369 = { 
                    set_state_name = EQC_vp_manelaide
                    set_province_name = {
                        id = 6166
                        name = EQC_vp_manelaide
                    }
                    set_province_name = {
                        id = 183
                        name = EQC_vp_buckley
                    }				
			    }
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	############################
	#### COMMUNISM          ####
	############################

	focus = {
		id = EQC_recognise_stalliongrad
		icon = GFX_goal_soviet_papers
		x = 13
		y = 1
		offset = {
			x = -13
			y = 0
			trigger = {
				has_completed_focus = EQC_recognise_stalliongrad
			}
		}
		relative_position_id = EQC_patriation
		prerequisite = { focus = EQC_patriation }
		cost = 8

		mutually_exclusive = { focus = EQC_commonwelth_congress	}

		ai_will_do = {
			factor = 6
			modifier = {
				communism > 0.4
				factor = 20
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
						has_completed_focus = EQC_strengthen_equestrian_ties
						has_completed_focus = EQC_commonwelth_congress
				}
			}
		}
		
		available = {
			hidden_trigger = {
				NOT = { has_global_flag = EQC_recognise_stalliongrad_done } #make sure MARESOC civil war EQC can't go commie again
			}
		}

		bypass = {
			has_government = communism
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_recognise_stalliongrad"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = EQC_commie_pony
			STG = {
				add_opinion_modifier = {
					target = ROOT
					modifier = medium_increase
				}
			}
			hidden_effect = { #collapse focus tree
				load_focus_tree = {
					tree = new_mareland_focus
					keep_completed = yes
				}
				mark_focus_tree_layout_dirty = yes
			}
			hidden_effect = { 
				news_event = eqc_news.7
				set_global_flag = EQC_recognise_stalliongrad_done
			}
		}
	}

	focus = {
		id = EQC_form_communist_unions
		icon = GFX_goal_ideology_communist
		prerequisite = { focus = EQC_recognise_stalliongrad }
		x = 0
		y = 1
		relative_position_id = EQC_recognise_stalliongrad

		cost = 8

		ai_will_do = {
			factor = 20
		}

		available = {
			hidden_trigger = {
				NOT = { has_global_flag = EQC_form_communist_unions_done } #make sure MARESOC civil war EQC can't go commie again
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_form_communist_unions"
			add_ideas = EQC_communist_unions1
			if = {
				limit = {
					OR = {
						is_subject = no
						is_subject_of = EQS
					}
				}
				country_event = mareland.23
			}
			else = {
				set_country_flag = has_supported_commie_party
				clr_country_flag = maresoc_is_angry
			}
			set_global_flag = EQC_form_communist_unions_done
		}
		search_filters = { FOCUS_FILTER_TFV_AUTONOMY FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_unite_the_left
		icon = GFX_goal_HOL_council_communism
		prerequisite = { focus = EQC_form_communist_unions }
		x = 0
		y = 1
		relative_position_id = EQC_form_communist_unions

		cost = 8

		ai_will_do = {
			factor = 8
		}

		available = {
			hidden_trigger = {
				NOT = { has_global_flag = EQC_unite_the_left_done } #make sure MARESOC civil war EQC can't go commie again
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_unite_the_left"
			swap_ideas = {
				remove_idea = EQC_communist_unions1
				add_idea = EQC_communist_unions2
			}
			set_global_flag = EQC_unite_the_left
		}
		search_filters = { FOCUS_FILTER_TFV_AUTONOMY FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_burn_celestias_portrait
		icon = GFX_focus_burn_celestias_portraits
		prerequisite = { focus = EQC_unite_the_left }
		x = 0
		y = 1
		relative_position_id = EQC_unite_the_left

		cost = 1

		ai_will_do = {
			factor = 20
		}

		available = {
			has_government = communism
			is_subject_of = EQS
			hidden_trigger = {
				NOT = { has_global_flag = EQC_burn_celestias_portrait_done } #make sure MARESOC civil war EQC can't go commie again
			}
		}

		bypass = {
			has_government = communism
			OR = {
				NOT = { is_subject_of = EQS }
				EQS = { has_government = communism }
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_burn_celestias_portrait"
			end_puppet_this = yes
			if = {
				limit = {
					is_faction_leader = no
					is_in_faction_with = EQS
				}
				leave_faction = yes
			}
			remove_ideas = equestrian_overlord

			hidden_effect = {
				news_event = { id = eqc_news.9 hours = 3 }
			}
			set_global_flag = EQC_burn_celestias_portrait_done
		}
	}
	
	focus = {
		id = EQC_liquidate_bourgouise_assets
		icon = GFX_goal_soviet_factory_town
		x = -1
		y = 1
		relative_position_id = EQC_burn_celestias_portrait
		prerequisite = { focus = EQC_burn_celestias_portrait }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_liquidate_bourgouise_assets"
			swap_ideas = {
				remove_idea = EQC_great_depression_1
				add_idea = EQC_great_depression_2
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_the_great_trot_forward
		icon = GFX_goal_soviet_tankie
		x = -1
		y = 3
		relative_position_id = EQC_burn_celestias_portrait
		prerequisite = { focus = EQC_liquidate_bourgouise_assets }
		cost = 8

		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
		
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
		
		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = EQC_the_great_trot_forward1
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_the_great_trot_forward2
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_state = {
				limit = {
					has_state_flag = EQC_the_great_trot_forward3
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_great_trot_forward"
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_the_great_trot_forward1
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_the_great_trot_forward2
			}
			random_owned_controlled_state = {
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_the_great_trot_forward3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_implement_democratic_centralism
		icon = GFX_goal_van_commie_party
		x = 1
		y = 1
		relative_position_id = EQC_burn_celestias_portrait
		prerequisite = { focus = EQC_burn_celestias_portrait }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_implement_democratic_centralism"
			custom_effect_tooltip = EQC_cant_do_shit_5_tp
			swap_ideas = {
			    remove_idea = EQC_communist_unions2
				add_idea = EQC_communist_unions3
			}
			hidden_effect = {
				clr_country_flag = EQC_cant_surpress_democratic
				clr_country_flag = EQC_cant_surpress_fascism
				clr_country_flag = EQC_cant_surpress_neutral
				clr_country_flag = EQC_cant_surpress_communism
				clr_country_flag = EQC_cant_censor_press
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}
	
	focus = {
		id = EQC_bat_communes
		icon = GFX_goal_socialist_bats
		x = -1
		y = 1
		relative_position_id = EQC_implement_democratic_centralism
		prerequisite = { focus = EQC_implement_democratic_centralism }
		prerequisite = { focus = EQC_liquidate_bourgouise_assets }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_bat_communes"
			add_ideas = EQC_accept_the_bats_idea_3
		}
		search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_found_the_RES
		icon = GFX_goal_red_star_guard
		x = 1
		y = 1
		relative_position_id = EQC_implement_democratic_centralism
		prerequisite = { focus = EQC_implement_democratic_centralism }
		cost = 8
		ai_will_do = {
			factor = 8
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_found_the_RES"
			if = {
	            limit = {
		            has_dlc = "La Resistance"
				}
				add_ideas = EQC_found_the_RES_idea_lar
			}
			else = {
				add_ideas = EQC_found_the_RES_idea
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = EQC_racial_harmony
		icon = GFX_goal_Workers_of_Griffonia
		x = 0
		y = 2
		relative_position_id = EQC_implement_democratic_centralism
		prerequisite = { focus = EQC_found_the_RES }
		prerequisite = { focus = EQC_bat_communes }
		cost = 8
		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_racial_harmony"
			add_stability = 0.05
			add_political_power = 50
			swap_ideas = {
			    remove_idea = EQC_griffon_minorities1
				add_idea = EQC_griffon_minorities_commie
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_griffon_enfranchisment
		icon = GFX_Socialist_Law
		x = 0
		y = 1
		relative_position_id = EQC_racial_harmony
		prerequisite = { focus = EQC_racial_harmony }
		cost = 8

		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = EQC_has_no_depression_tt
				NOT = {
					OR = {
						has_idea = EQC_great_depression_1
						has_idea = EQC_great_depression_2
						has_idea = EQC_great_depression_3
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_griffon_enfranchisment"
			swap_ideas = {
				remove_idea = EQC_great_depression_2
				add_idea = EQC_great_depression_3
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_socialise_education
		icon = GFX_goal_communist_science
		x = 1
		y = 1
		relative_position_id = EQC_griffon_enfranchisment
		prerequisite = { focus = EQC_griffon_enfranchisment }
		cost = 8
		ai_will_do = {
			factor = 9
		}

		available = {

		}

		bypass = {
			NOT = { amount_research_slots < 5 }
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_socialise_education"
			if = {
				limit = {
					amount_research_slots < 5
				}
				add_research_slot = 1
				custom_effect_tooltip = CZE_war_college_effect_2_tt
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}
	
	focus = {
		id = EQC_purge_the_reactionaries
		icon = GFX_focus_generic_ban_right_wing
		x = -1
		y = 1
		relative_position_id = EQC_socialise_education
		prerequisite = { focus = EQC_socialise_education }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
		
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_purge_the_reactionaries"
			add_ideas = EQC_purge_the_reactionaries_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_centralize_unions
		icon = GFX_goal_generic_workers_democracy
		x = 2
		y = 1
		relative_position_id = EQC_racial_harmony
		prerequisite = { focus = EQC_racial_harmony }
		cost = 8
		ai_will_do = {
			factor = 15
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_centralize_unions"
			add_ideas = EQC_centralize_unions_idea
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	
	focus = {
		id = EQC_collectivize_agriculture
		icon = GFX_focus_collective_housing
		x = 0
		y = 2
		relative_position_id = EQC_centralize_unions
		prerequisite = { focus = EQC_centralize_unions }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {

		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_collectivize_agriculture"
			every_owned_state = {
				limit = { 
				    is_core_of = EQC 
				}
				add_extra_state_shared_building_slots = 1
				add_manpower = 20000
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}
	
	focus = {
		id = EQC_the_vanguard_of_the_griffonian_revolution
		icon = GFX_goal_red_eagle_two
		x = -1
		y = 2
		relative_position_id = EQC_socialise_education
		prerequisite = { focus = EQC_purge_the_reactionaries }
		prerequisite = { focus = EQC_collectivize_agriculture }
		cost = 8
		ai_will_do = {
			factor = 10
		}

		available = {

		}

		bypass = {
		
		}
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus EQC_the_vanguard_of_the_griffonian_revolution"
			custom_effect_tooltip = EQC_the_vanguard_of_the_griffonian_revolution_tp
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
}

focus_tree = {
	id = eqc_solarist_coup

	country = {
		factor = 0

		modifier = {
			add = 10
			original_tag = EQC
			has_country_leader = { 
			    ruling_only = yes 
			    character = EQC_candy_garden
			}
		}
	}

	continuous_focus_position = { x = 600 y = 950 }

	default = no

	focus = {
		id = EQC_solarist_rise
		icon = GFX_goal_solar_phoenix
		x = 5
		y = 0
		cost = 1

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = EQC_equestrian_guns
		icon = GFX_goal_solar_swords_crossed
		prerequisite = { focus = EQC_solarist_rise }
		x = 3
		y = 1
		cost = 2

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = EQC
			}
		}
	}

	focus = {
		id = EQC_equestrian_volunteers
		icon = GFX_goal_solar_worship_sacrifice
		prerequisite = { focus = EQC_solarist_rise }
		x = 5
		y = 1
		cost = 2

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_manpower = 20000
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = EQC_free_industry
		icon = GFX_goal_solar_military_factory
		prerequisite = { focus = EQC_solarist_rise }
		x = 7
		y = 1
		cost = 2

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			two_random_arms_factory = yes
		}
	}

	focus = {
		id = EQC_punish_traitors
		icon = GFX_goal_solar_fair_but_just
		x = 3
		y = 2
		cost = 3

		ai_will_do = {
			factor = 5
		}

		available = {
            has_civil_war = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
		    save_current_manpower = yes
			every_owned_state = {
				limit = {
					is_core_of = EQC
				}
				add_manpower = -10000
			}
			restore_previous_manpower = yes
		}
		search_filters = { FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = EQC_loyal_to_celestia
		icon = GFX_goal_solar_buraucracy
		x = 5
		y = 2
		cost = 3

		ai_will_do = {
			factor = 5
		}

		available = {
            has_civil_war = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
		    add_stability = 0.1
			if = {
			    limit = {
			        has_government = neutrality
			    }
			    add_popularity = {
			        ideology = neutrality
			        popularity = 0.10
			    }
			}
			else = {
			    add_popularity = {
			        ideology = democratic
			        popularity = 0.10
			    }  
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = EQC_rebuild
		icon = GFX_goal_solar_legion_of_labour
		x = 7
		y = 2
		cost = 3

		ai_will_do = {
			factor = 5
		}

		available = {
            has_civil_war = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			two_random_industrial_complex = yes
		}
	}

	focus = {
		id = EQC_back_to_equestria
		icon = GFX_goal_solar_unite_equestria
		prerequisite = { focus = EQC_punish_traitors }
		prerequisite = { focus = EQC_loyal_to_celestia }
		prerequisite = { focus = EQC_rebuild }
		x = 5
		y = 3
		cost = 5

		ai_will_do = {
			factor = 5
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
		    get_current_government_type = yes
			if = {
	            limit = {
		            has_dlc = "Together for Victory"
	            }
	            EQS = {
	                set_autonomy = {
		                target = ROOT
		                autonomy_state = autonomy_dominion
	                }
	            }
            }
            else = {
                EQS = {
		            puppet = ROOT
		        }
	        }
	        restore_previous_government_type = yes
	        if = {
	            limit = {
	                EQS = {
	                    has_government = fascism
	                }
	            }
	            load_focus_tree = eqc_sol_focus
	        }
	        else = {
	            load_focus_tree = new_mareland_focus
	            complete_national_focus	= EQC_strengthen_equestrian_ties
	        }
		}
		search_filters = { FOCUS_FILTER_TFV_AUTONOMY }
	}
}
