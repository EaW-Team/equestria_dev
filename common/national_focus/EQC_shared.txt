#######################
### ARMY TREE       ###
#######################

shared_focus = {
	id = EQC_legacy_of_the_cockatrice_war
	icon = GFX_goal_AST_state_of_army
	x = 2
	y = 0
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_legacy_of_the_cockatrice_war"#Auto-logging
		army_experience = 25
		add_tech_bonus = {
			name = EQC_legacy_of_the_cockatrice_war
			bonus = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

shared_focus = {
	id = EQC_a_mobile_army
	icon = GFX_goal_generic_army_motorized
	prerequisite = { focus = EQC_legacy_of_the_cockatrice_war }
	relative_position_id = EQC_legacy_of_the_cockatrice_war
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = EQC_a_mobile_army
			bonus = 0.5
			ahead_reduction = 0.5
			uses = 1
			category = motorized_equipment
		}
	}
}

shared_focus = {
	id = EQC_bits_gun
	icon = GFX_goal_generic_small_arms
	prerequisite = { focus = EQC_legacy_of_the_cockatrice_war }
	relative_position_id = EQC_legacy_of_the_cockatrice_war
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_bits_gun"#Auto-logging
		add_tech_bonus = {
			name = EQC_bits_gun
			bonus = 0.5
			uses = 1
			category = infantry_weapons
		}
	}
}

shared_focus = {
	id = EQC_royal_military_academy_sunset
	icon = GFX_focus_AST_rats_tobruk
	prerequisite = { focus = EQC_a_mobile_army focus = EQC_bits_gun }
	relative_position_id = EQC_legacy_of_the_cockatrice_war
	x = 0
	y = 2
	cost = 10
	dynamic = yes
	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_royal_military_academy_sunset"#Auto-logging
		add_ideas = EQC_royal_military_academy_sunset
		every_army_leader = {
			add_planning = 1
		}
	}
}

shared_focus = {
	id = EQC_new_mareland_catering_corps
	icon = GFX_goal_generic_consumer_goods
	prerequisite = { focus = EQC_royal_military_academy_sunset }
	relative_position_id = EQC_royal_military_academy_sunset
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_new_mareland_catering_corps"#Auto-logging
		add_tech_bonus = {
			name = EQC_new_mareland_catering_corps
			bonus = 0.75
			ahead_reduction = 0.5
			uses = 2
			category = logistics_tech
		}
	}
}

shared_focus = {
	id = EQC_nmac_spirit
	icon = GFX_goal_AST_clarify_anzac
	prerequisite = { focus = EQC_royal_military_academy_sunset }
	relative_position_id = EQC_royal_military_academy_sunset
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 5
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_nmac_spirit"#Auto-logging
		add_ideas = EQC_nmac_spirit
	}
}

shared_focus = {
	id = EQC_hackhoof_shovel
	icon = GFX_goal_generic_construction2
	prerequisite = { focus = EQC_nmac_spirit focus = EQC_new_mareland_catering_corps }
	relative_position_id = EQC_new_mareland_catering_corps
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_hackhoof_shovel"#Auto-logging
		add_tech_bonus = {
			name = EQC_hackhoof_shovel
			bonus = 0.75
			ahead_reduction = 1
			uses = 2
			category = engineers_tech
		}
	}
}

shared_focus = {
	id = EQC_sentinel_project
	icon = GFX_goal_generic_army_tanks
	prerequisite = { focus = EQC_a_mobile_army }
	relative_position_id = EQC_a_mobile_army
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_sentinel_project"#Auto-logging
		add_tech_bonus = {
			name = EQC_sentinel_project
			bonus = 0.5
			uses = 2
			category = armor
		}
	}
}

shared_focus = {
	id = EQC_new_mareland_artillery
	icon = GFX_goal_generic_army_artillery2
	prerequisite = { focus = EQC_bits_gun }
	relative_position_id = EQC_bits_gun
	x = 1
	y = 1
	cost = 10
	dynamic = yes
	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_new_mareland_artillery"#Auto-logging
		add_tech_bonus = {
			name = arty_bonus
			bonus = 0.5
			uses = 1
			category = artillery
		}
	}
}

shared_focus = {
	id = EQC_marine_assault_tactics
	icon = GFX_goal_generic_amphibious_assault
	prerequisite = { focus = EQC_new_mareland_artillery }
	relative_position_id = EQC_new_mareland_artillery
	dynamic = yes
	x = 0
	y = 2
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_marine_assault_tactics"#Auto-logging
		add_tech_bonus = {
			name = marine_bonus
			bonus = 0.5
			uses = 1
			category = land_doctrine
		}
		add_tech_bonus = {
			name = marine_bonus
			bonus = 0.5
			uses = 1
			category = marine_tech
		}
	}
}

shared_focus = {
	id = EQC_the_walkie_talkie
	icon = GFX_goal_generic_radar
	prerequisite = { focus = EQC_sentinel_project }
	relative_position_id = EQC_sentinel_project
	x = 0
	y = 2
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_the_walkie_talkie"#Auto-logging
		add_tech_bonus = {
			name = EQC_the_walkie_talkie
			bonus = 0.5
			ahead_reduction = 0.75
			uses = 1
			category = electronics
		}
		add_tech_bonus = {
			name = EQC_the_walkie_talkie
			bonus = 0.5
			uses = 1
			category = signal_company_tech
		}
	}
}

shared_focus = {
	id = EQC_unconventional_warfare
	icon = GFX_goal_generic_army_doctrines
	prerequisite = { focus = EQC_the_walkie_talkie focus = EQC_marine_assault_tactics }
	relative_position_id = EQC_marine_assault_tactics
	x = -2
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_unconventional_warfare"#Auto-logging
		add_tech_bonus = {
			name = EQC_unconventional_warfare
			bonus = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

shared_focus = {
	id = EQC_section_z
	icon = GFX_goal_generic_special_forces
	prerequisite = { focus = EQC_unconventional_warfare }
	relative_position_id = EQC_unconventional_warfare
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_section_z"#Auto-logging
		custom_effect_tooltip = EQC_section_z_tech_effect
		hidden_effect = { set_technology = { EQC_section_z_tech = 1 } }
		add_tech_bonus = {
			name = EQC_section_z
			bonus = 0.75
			uses = 1
			category = marine_tech
			category = para_tech
		}
		add_tech_bonus = {
			name = EQC_section_z
			bonus = 0.5
			ahead_reduction = 0.75
			uses = 2
			category = recon_tech
		}
	}
}

#######################
### Navy Tree       ###
#######################

shared_focus = {
	id = EQC_expand_manehatten_harbour
	icon = GFX_goal_AST_state_of_RAN
	relative_position_id = EQC_legacy_of_the_cockatrice_war
	x = 6
	y = 0
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
		any_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		navy_experience = 25
		random_state = {
			limit = {
				has_state_flag = EQC_expand_manehatten_harbour_DY
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = dockyard
				level = 3
				instant_build = yes
			}
		}
	}

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		navy_experience = 25
		random_owned_controlled_state = {
			prioritize = { 362 }
			limit = {
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 2
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = dockyard
				level = 3
				instant_build = yes
			}
			set_state_flag = EQC_expand_manehatten_harbour_DY
		}
	}
}

shared_focus = {
	id = EQC_commerce_protection
	icon = GFX_goal_generic_navy_doctrines_tactics
	prerequisite = { focus = EQC_expand_manehatten_harbour }
	mutually_exclusive = { focus = EQC_seawolves }
	x = -1
	y = 1
	relative_position_id = EQC_expand_manehatten_harbour

	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_tech_bonus = {
			name = AST_protect_overseas_commerce
			bonus = 0.5
			uses = 2
			category = fleet_in_being_tree
			category = convoy_defense_tree
		}
	}
}

shared_focus = {
	id = EQC_seawolves
	icon = GFX_goal_generic_navy_submarine
	prerequisite = { focus = EQC_expand_manehatten_harbour }
	mutually_exclusive = { focus = EQC_commerce_protection }
	x = 1
	y = 1
	relative_position_id = EQC_expand_manehatten_harbour

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_new_mareland_catering_corps"#Auto-logging
		add_tech_bonus = {
			name = AST_fly_the_jolly_roger
			bonus = 0.5
			uses = 2
			category = submarine_doctrine
		}
	}
}

shared_focus = {
	id = EQC_modernise_the_fleet
	icon = GFX_goal_generic_navy_battleship
	prerequisite = { focus = EQC_commerce_protection focus = EQC_seawolves }
	x = 1
	y = 1
	relative_position_id = EQC_commerce_protection

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_royal_military_academy_sunset"#Auto-logging
		add_tech_bonus = {
			name = AST_scrap_iron_flotilla
			bonus = 0.5
			ahead_reduction = 1
			uses = 1
			category = dd_tech
		}
		add_tech_bonus = {
			name = AST_cruisers
			bonus = 0.5
			ahead_reduction = 1
			uses = 1
			category = cl_tech
			category = ca_tech
		}
	}
}

shared_focus = {
	id = EQC_royal_new_marelander_submarine_service
	icon = GFX_goal_generic_wolf_pack
	prerequisite = { focus = EQC_seawolves }
	x = 1
	y = 1
	relative_position_id = EQC_seawolves
	dynamic = yes
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = AST_royal_australian_submarine_service
			bonus = 0.5
			ahead_reduction = 1
			uses = 2
			category = ss_tech
		}
	}
}

shared_focus = {
	id = EQC_merchant_navy
	icon = GFX_goal_generic_navy_cruiser
	prerequisite = { focus = EQC_commerce_protection }
	x = -1
	y = 1
	relative_position_id = EQC_commerce_protection

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_ideas = EQC_merchant_navy
	}
}

shared_focus = {
	id = EQC_wingbardy_arms_race
	icon = GFX_goal_battleship
	prerequisite = { focus = EQC_merchant_navy focus = EQC_modernise_the_fleet }

	x = 0
	y = 1
	relative_position_id = EQC_merchant_navy

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_nmac_spirit"#Auto-logging
		add_tech_bonus = {
			name = EQC_wingbardy_arms_race
			bonus = 0.5
			ahead_reduction = 1
			uses = 1
			category = bb_tech
			category = shbb_tech
		}
		add_tech_bonus = {
			name = EQC_wingbardy_arms_race
			bonus = 0.5
			ahead_reduction = 1
			uses = 1
			category = bc_tech
		}
	}
}

shared_focus = {
	id = EQC_degauss_ship_hulls
	icon = GFX_goal_generic_navy_anti_submarine
	prerequisite = { focus = EQC_modernise_the_fleet focus = EQC_royal_new_marelander_submarine_service }
	x = 2
	y = 1
	relative_position_id = EQC_modernise_the_fleet

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_royal_military_academy_sunset"#Auto-logging
		add_ideas = EQC_degauss_ship_hulls
	}
}

shared_focus = {
	id = EQC_naval_auxiliary_patrol
	icon = GFX_goal_generic_fortify_city
	prerequisite = { focus = EQC_modernise_the_fleet }

	x = 0
	y = 1
	relative_position_id = EQC_modernise_the_fleet

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	complete_tooltip = {

	}

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_ideas = EQC_naval_auxiliary_patrol
		
		custom_effect_tooltip = EQC_naval_auxiliary_patrol_tt
		hidden_effect = {
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
				}

				#Extra fort on naval bases
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 2
					instant_build = yes
				}
			}
		}
	}
}

shared_focus = {
	id = EQC_project_kununurra
	icon = GFX_goal_generic_navy_carrier
	prerequisite = { focus = EQC_wingbardy_arms_race }
	prerequisite = { focus = EQC_degauss_ship_hulls }
	x = -1
	y = 1
	relative_position_id = EQC_naval_auxiliary_patrol

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_tech_bonus = {
			name = CAN_habakkuk_carrier
			bonus = 0.5
			uses = 2
			category = cv_tech
		}
	}
}

shared_focus = {
	id = EQC_secure_the_centeral_sea
	icon = GFX_goal_generic_navy_doctrines_tactics
	prerequisite = { focus = EQC_wingbardy_arms_race }
	prerequisite = { focus = EQC_degauss_ship_hulls }
	x = 1
	y = 1
	relative_position_id = EQC_naval_auxiliary_patrol

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_hackhoof_shovel"#Auto-logging
		add_tech_bonus = {
			name = EQC_secure_the_centeral_sea
			bonus = 0.5
			uses = 2
			category = naval_doctrine
		}
	}
}


#######################
### AIR FORCE TREE  ###
#######################

shared_focus = {
	id = EQC_rnmaf_stratus_springs
	icon = GFX_goal_AST_state_of_RAAF
	relative_position_id = EQC_expand_manehatten_harbour
	x = 6
	y = 0
	cost = 10
	
	dynamic = yes

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		air_experience = 25
		random_state = {				
			limit = {
				has_state_flag = EQC_rnmaf_stratus_springs_AB
			}
			add_building_construction = {
				type = air_base
				level = 2
				instant_build = yes
			}
		}
		add_tech_bonus = {
			name = EQC_rnmaf_stratus_springs
			bonus = 0.5
			uses = 1
			category = air_doctrine
		}
	}

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_new_mareland_catering_corps"#Auto-logging
		air_experience = 25
		random_owned_controlled_state = {
			prioritize = { 358 }
			limit = {
				free_building_slots = {
					building = air_base
					size > 1
				}
			}
			add_building_construction = {
				type = air_base
				level = 3
				instant_build = yes
			}
			set_state_flag = EQC_rnmaf_stratus_springs_AB
		}
		add_tech_bonus = {
			name = EQC_rnmaf_stratus_springs
			bonus = 0.5
			uses = 1
			category = air_doctrine
		}
	}
}

shared_focus = {
	id = EQC_new_south_bales_air_warning_system
	icon = GFX_goal_generic_radar
	relative_position_id = EQC_rnmaf_stratus_springs
	prerequisite = { focus = EQC_rnmaf_stratus_springs }
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {
		has_tech = radio
	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		add_tech_bonus = {
			name = EQC_new_south_bales_air_warning_system
			bonus = 0.5
			uses = 1
			category = radar_tech
		}
		random_state = {
			limit = {
				has_state_flag = EQC_new_south_bales_air_warning_system_radar1
			}
			add_building_construction = {
				type = radar_station
				level = 1
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_new_south_bales_air_warning_system_radar2
			}
			add_building_construction = {
				type = radar_station
				level = 1
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_new_south_bales_air_warning_system_radar3
			}
			add_building_construction = {
				type = radar_station
				level = 1
				instant_build = yes
			}
		}
	}

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = EQC_new_south_bales_air_warning_system
			bonus = 0.5
			uses = 1
			category = radar_tech
		}

		if = {
			limit = { has_tech = radio_detection }
			random_owned_controlled_state = {
				prioritize = { 364 }
				limit = {
					free_building_slots = {
						building = radar_station
						size > 0
					}
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_new_south_bales_air_warning_system_radar1
			}

			random_owned_controlled_state = {
				prioritize = { 363 }
				limit = {
					NOT = { has_state_flag = EQC_new_south_bales_air_warning_system_radar1 }
					free_building_slots = {
						building = radar_station
						size > 0
					}
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_new_south_bales_air_warning_system_radar2
			}

			random_owned_controlled_state = {
				limit = {
					NOT = { has_state_flag = EQC_new_south_bales_air_warning_system_radar1 }
					NOT = { has_state_flag = EQC_new_south_bales_air_warning_system_radar2 }
					free_building_slots = {
						building = radar_station
						size > 0
					}
				}
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
				set_state_flag = EQC_new_south_bales_air_warning_system_radar3
			}
			else = {
				set_technology = {
					radio_detection = 1
				}
				effect_tooltip = {
					random_owned_controlled_state = {
						prioritize = { 364 }
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
					}

					random_owned_controlled_state = {
						prioritize = { 363 }
						limit = {
							NOT = { state = 364 }
							NOT = { has_state_flag = EQC_new_south_bales_air_warning_system_radar1 }
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
					}
				}
				random_owned_controlled_state = {
					prioritize = { 364 }
					limit = {
						free_building_slots = {
							building = radar_station
							size > 0
						}
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					set_state_flag = EQC_new_south_bales_air_warning_system_radar1
				}

				random_owned_controlled_state = {
					prioritize = { 363 }
					limit = {
						NOT = { state = 364 }
						NOT = { has_state_flag = EQC_new_south_bales_air_warning_system_radar1 }
						free_building_slots = {
							building = radar_station
							size > 0
						}
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
					set_state_flag = EQC_new_south_bales_air_warning_system_radar2
				}
			}
		}
	}
}

shared_focus = {
	id = EQC_a_new_fighter
	icon = GFX_goal_generic_air_fighter
	relative_position_id = EQC_rnmaf_stratus_springs
	prerequisite = { focus = EQC_rnmaf_stratus_springs }
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_tech_bonus = {
			name = EQC_a_new_fighter
			bonus = 0.5
			ahead_reduction = 1
			uses = 1
			technology = early_fighter
			technology = fighter1
			technology = fighter2
			technology = fighter3
		}
	}
}

shared_focus = {
	id = EQC_expand_air_defence
	relative_position_id = EQC_new_south_bales_air_warning_system
	icon = GFX_goal_generic_construct_military
	prerequisite = { focus = EQC_new_south_bales_air_warning_system }
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes
	
	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_anti_air_building1
			}
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_anti_air_building2
			}
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_anti_air_building3
			}
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_expand_new_manehatten"#Auto-logging
		random_owned_controlled_state = {
			prioritize = { 362 }
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = anti_air_building
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_anti_air_building1
		}
		random_owned_controlled_state = {
			prioritize = { 356 }
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = anti_air_building
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_anti_air_building2
		}
		random_owned_controlled_state = {
			prioritize = { 355 }
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = anti_air_building
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_anti_air_building3
		}
	}
}

shared_focus = {
	id = EQC_long_air_patrols
	relative_position_id = EQC_new_south_bales_air_warning_system
	icon = GFX_goal_expand_the_luftwaffe
	prerequisite = { focus = EQC_new_south_bales_air_warning_system focus = EQC_a_new_fighter }
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
	}

	available = {
	
	}

	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_a_mobile_army"#Auto-logging
		add_ideas = EQC_long_air_patrols
		add_tech_bonus = {
			name = EQC_long_air_patrols
			bonus = 0.5
			uses = 2
			category = cat_heavy_fighter
		}
	}
}

shared_focus = {
	id = EQC_scout_seas
	relative_position_id = EQC_long_air_patrols
	icon = GFX_goal_generic_air_naval_bomber
	prerequisite = { focus = EQC_long_air_patrols }
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes
	
		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = EQC_scout_seas
			bonus = 0.5
			uses = 2
			category = naval_air
		}
	}	
}

shared_focus = {
	id = EQC_fly_or_die
	relative_position_id = EQC_long_air_patrols
	icon = GFX_goal_generic_air_fighter2
	prerequisite = { focus = EQC_long_air_patrols }
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 4
		modifier = {
			has_war = yes
			factor = 2
		}
	}

	available = {
	
	}

	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes


		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_ideas = EQC_fly_or_die
	}
}

shared_focus = {
	id = EQC_advanced_air_tactics
	relative_position_id = EQC_scout_seas
	icon = GFX_goal_generic_air_doctrine
	prerequisite = { focus = EQC_fly_or_die focus = EQC_scout_seas }
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}
	
	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_new_mareland_artillery"#Auto-logging
		air_experience = 25
		add_tech_bonus = {
			name = EQC_advanced_air_tactics
			bonus = 0.5
			uses = 1
			category = air_doctrine
		}
	}
}

shared_focus = {
	id = EQC_bombardier_focus
	relative_position_id = EQC_a_new_fighter
	icon = GFX_goal_generic_air_bomber
	prerequisite = { focus = EQC_a_new_fighter }
	prerequisite = { focus = EQC_littlehoof_small_arms }
	x = 1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 5
	}

	available = {
	
	}

	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes


	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_bombardier_factory
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		
		add_tech_bonus = {
			name = EQC_bombardier_focus
			bonus = 0.75
			uses = 1
			category = cat_strategic_bomber
			category = tactical_bomber
		}
		add_tech_bonus = {
			name = EQC_bombardier_focus
			bonus = 0.5
			uses = 1
			category = cat_strategic_bomber
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_bombardier_focus"#Auto-logging
		random_owned_controlled_state = {
			prioritize = { 362 356 }
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_bombardier_factory
		}
		
		add_tech_bonus = {
			name = EQC_bombardier_focus
			bonus = 0.75
			uses = 1
			category = cat_strategic_bomber
			category = tactical_bomber
		}
		add_tech_bonus = {
			name = EQC_bombardier_focus
			bonus = 0.5
			uses = 1
			category = cat_strategic_bomber
		}
	}
}

shared_focus = {
	id = EQC_special_air_fund
	relative_position_id = EQC_bombardier_focus
	icon = GFX_focus_rocketry
	prerequisite = { focus = EQC_bombardier_focus }
	x = 0
	y = 2
	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {
	
	}

	cancel_if_invalid = no
	continue_if_invalid = no
	available_if_capitulated = yes


		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = EQC_special_air_fund
			ahead_reduction = 0.5
			bonus = 0.5
			uses = 2
			category = rocketry
			category = jet_technology
		}
	}
}

#######################
### INDUSTRIAL TREE ###
#######################

shared_focus = {
	id = EQC_industral_support_fund
	icon = GFX_goal_generic_construct_civ_factory
	relative_position_id = EQC_rnmaf_stratus_springs
	x = 5
	y = 0
	cost = 10

	ai_will_do = {
		factor = 7
		modifier = {
			has_completed_focus = EQC_national_census
			factor = 2
		}
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		add_tech_bonus = {
			name = EQC_industral_support_fund
			bonus = 0.5
			uses = 1
			category = industry
		}
	}
}

shared_focus = {
	id = EQC_national_census
	icon = GFX_goal_constitutional_guarantees
	relative_position_id = EQC_industral_support_fund
	x = 2
	y = 0
	cost = 10

	ai_will_do = {
		factor = 7
		modifier = {
			has_completed_focus = EQC_industral_support_fund
			factor = 2
		}
	}

	available = {	
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_marine_assault_tactics"#Auto-logging
		add_political_power = 125
	}
}

shared_focus = {
	id = EQC_littlehoof_small_arms
	icon = GFX_goal_generic_construct_mil_factory
	relative_position_id = EQC_industral_support_fund
	prerequisite = { focus = EQC_industral_support_fund }
	x = -2
	y = 1
	cost = 10

	ai_will_do = {
		factor = 5
		modifier = {
			has_war = yes
			factor = 2
		}
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_littlehoof_small_arms_factory
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_new_mareland_artillery"#Auto-logging
		random_owned_controlled_state = {
			prioritize = { 362 356 }
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_littlehoof_small_arms_factory
		}
	}
}

shared_focus = {
	id = EQC_the_flare_plan
	icon = GFX_goal_generic_consumer_goods
	prerequisite = { focus = EQC_industral_support_fund }
	relative_position_id = EQC_industral_support_fund
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_tech_bonus = {
			name = EQC_the_flare_plan
			bonus = 0.5
			uses = 1
			category = industry
		}
	}
}

shared_focus = {
	id = EQC_new_mareland_railway
	icon = GFX_goal_generic_construct_infrastructure
	prerequisite = { focus = EQC_national_census }
	prerequisite = { focus = EQC_industral_support_fund }
	relative_position_id = EQC_national_census
	x = 0
	y = 1

	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {

	}
	
	bypass = {
		has_completed_focus = EQC_equal_road_distribution
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_new_mareland_railway_Inf1
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		random_state = {
			limit = {
				has_state_flag = EQC_new_mareland_railway_Inf2
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		
		random_state = {
			limit = {
				has_state_flag = EQC_new_mareland_railway_Inf3
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
	}

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		random_owned_controlled_state = {
			prioritize = { 354 }
			limit = {
				free_building_slots = {
					building = infrastructure
					size > 0
				}
				free_building_slots = { # avoid wastelands
					building = industrial_complex
					size > 0
				}
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_new_mareland_railway_Inf1
		}

		random_owned_controlled_state = {
			prioritize = { 357 }
			limit = {
				free_building_slots = {
					building = infrastructure
					size > 0
				}
				free_building_slots = { # avoid wastelands
					building = industrial_complex
					size > 0
				}
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_new_mareland_railway_Inf2
		}
		
		random_owned_controlled_state = {
			prioritize = { 358 }
			limit = {
				free_building_slots = {
					building = infrastructure
					size > 0
				}
				free_building_slots = { # avoid wastelands
					building = industrial_complex
					size > 0
				}
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_new_mareland_railway_Inf3
		}
	}
}

shared_focus = {
	id = EQC_new_hoofington_steelworks
	icon = GFX_goal_generic_construct_civilian
	prerequisite = { focus = EQC_the_flare_plan }
	relative_position_id = EQC_the_flare_plan
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		random_state = {
			limit = { has_state_flag = EQC_new_hoofington_steelworks1 }
			add_resource = {
				type = steel
				amount = 14
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_new_hoofington_steelworks"#Auto-logging
		random_owned_controlled_state = {
			limit = { is_in_home_area = yes }
			prioritize = { 359 }
			add_resource = {
				type = steel
				amount = 14
			}
			set_state_flag = EQC_new_hoofington_steelworks1
		}
	}
}

shared_focus = {
	id = EQC_expand_new_manehatten
	icon = GFX_goal_generic_construct_civ_factory
	prerequisite = { focus = EQC_new_mareland_railway }
	relative_position_id = EQC_new_mareland_railway
	x = 0
	y = 1

	cost = 10

	ai_will_do = {
		factor = 6
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_expand_new_manehatten_factory1
			}
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_expand_new_manehatten"#Auto-logging
		random_owned_controlled_state = {
			prioritize = { 363 364 365 362 }
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = industrial_complex
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_expand_new_manehatten_factory1
		}
	}
}

shared_focus = {
	id = EQC_resource_resuse_act
	icon = GFX_goal_generic_trade
	prerequisite = { focus = EQC_new_hoofington_steelworks }
	prerequisite = { focus = EQC_expand_new_manehatten }
	relative_position_id = EQC_new_hoofington_steelworks
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
	
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		random_state = {
			limit = { has_state_flag = EQC_resource_resuse_act_alu }
			add_resource = {
				type = aluminium
				amount = 24
			}
		}
		random_state = {
			limit = { has_state_flag = EQC_resource_resuse_act_oil }
			add_resource = {
				type = oil
				amount = 12
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_resource_resuse_act"#Auto-logging
		random_owned_controlled_state = {
			limit = { is_in_home_area = yes }
			add_resource = {
				type = aluminium
				amount = 24
			}
			set_state_flag = EQC_resource_resuse_act_alu
		}
		random_owned_controlled_state = {
			limit = { is_in_home_area = yes }
			add_resource = {
				type = oil
				amount = 12
			}
			set_state_flag = EQC_resource_resuse_act_oil
		}
	}
}

shared_focus = {
	id = EQC_economic_recovery
	icon = GFX_goal_generic_consumer_goods
	prerequisite = { focus = EQC_expand_new_manehatten focus = EQC_every_little_helps }
	relative_position_id = EQC_expand_new_manehatten
	x = 1
	y = 1

	cost = 10

	ai_will_do = {
		factor = 6		
	}

	available = {
		custom_trigger_tooltip = {
			tooltip = EQC_great_depression_reduced_tt
			has_idea = EQC_great_depression_3
		}
		
	}
	
	bypass = {
		custom_trigger_tooltip = {
			tooltip = EQC_has_no_depression_tt
			NOT = {
				OR = {
					has_idea = EQC_great_depression_1
					has_idea = EQC_great_depression_2
					has_idea = EQC_great_depression_3
				}
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		remove_ideas = EQC_great_depression_3
	}
}

shared_focus = {
	id = EQC_expand_sunset_university
	icon = GFX_focus_research
	prerequisite = { focus = EQC_economic_recovery }
	relative_position_id = EQC_economic_recovery
	x = -2
	y = 1

	cost = 10

	ai_will_do = {
		factor = 6
	}

	available = {

	}
	
	bypass = {
		NOT = { amount_research_slots < 5 }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_expand_sunset_university"#Auto-logging
		add_research_slot = 1
		custom_effect_tooltip = CZE_war_college_effect_tt
	}
}

shared_focus = {
	id = EQC_uranium_mine
	icon = GFX_focus_wonderweapons
	prerequisite = { focus = EQC_expand_sunset_university }
	prerequisite = { focus = EQC_special_air_fund }
	relative_position_id = EQC_expand_sunset_university
	x = -1
	y = 1

	cost = 10

	ai_will_do = {
		factor = 2
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_marine_assault_tactics"#Auto-logging
		add_tech_bonus = {
			name = EQC_uranium_mine
			bonus = 0.5
			uses = 2
			category = nuclear
		}
	}
}

shared_focus = {
	id = EQC_connect_the_reservations
	icon = GFX_goal_generic_construct_infrastructure
	prerequisite = { focus = EQC_expand_sunset_university }
	relative_position_id = EQC_expand_sunset_university
	x = 1
	y = 1

	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {
		358 = { is_controlled_by = ROOT }
		357 = { is_controlled_by = ROOT }
		361 = { is_controlled_by = ROOT }
	}
	
	bypass = {
		has_completed_focus = EQC_equal_road_distribution
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[Root.GetName]: Focus yes"#Auto-logging
		358 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		357 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		361 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = EQC_griffon_affairs_act
	icon = GFX_goal_AST_maori
	prerequisite = { focus = EQC_connect_the_reservations }
	relative_position_id = EQC_connect_the_reservations
	mutually_exclusive = { focus = EQC_griffon_workers }
	x = 0
	y = 1

	cost = 10

	ai_will_do = {
		factor = 4
	}

	available = {

	}
	
	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		358 = {
			add_extra_state_shared_building_slots = 2
		}
		357 = {
			add_extra_state_shared_building_slots = 2
		}
		361 = {
			add_extra_state_shared_building_slots = 2
		}
		add_stability = -0.05
	}	
}

###############################
### WARTIME INDUSTRIAL TREE ###
###############################

shared_focus = {
	id = EQC_commonwealth_defence
	icon = GFX_focus_eqc_defence_of_the_commonwelth
	relative_position_id = EQC_national_census
	x = 2
	y = 0
	cost = 5
	
	dynamic = yes
	
	ai_will_do = {
		factor = 5
		modifier = {
			has_war = yes
			factor = 2
		}
	}

	available = {
		OR = {
			threat > 0.2
			has_war = yes
			has_government = fascism
			has_country_flag = is_maresoc
		}			
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_section_z"#Auto-logging
		add_ideas = EQC_commonwealth_defence
		add_war_support = 0.05
	}
}

shared_focus = {
	id = EQC_national_defence_company
	icon = GFX_goal_generic_production2
	relative_position_id = EQC_commonwealth_defence
	prerequisite = { focus = EQC_commonwealth_defence }
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 7
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_unconventional_warfare"#Auto-logging
		add_ideas = EQC_national_defence_company_idea
	}
}

shared_focus = {
	id = EQC_national_mobilisation_act
	icon = GFX_goal_generic_attack_allies
	relative_position_id = EQC_commonwealth_defence
	prerequisite = { focus = EQC_commonwealth_defence }
	x = 2
	y = 2
	cost = 5

	ai_will_do = {
		factor = 5
		modifier = {
			has_war = yes
			factor = 2
		}
	}

	available = {
		OR = {
			has_war = yes
			NOT = { has_government = democratic }
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		add_stability = -0.05
		add_ideas = EQC_national_mobilisation_act1
		custom_effect_tooltip = will_allow_conscription_laws_tt
	}
}

shared_focus = {
	id = EQC_defence_of_x
	icon = GFX_goal_generic_propaganda
	relative_position_id = EQC_commonwealth_defence
	prerequisite = { focus = EQC_commonwealth_defence }
	dynamic = yes
	x = 3
	y = 1
	cost = 10

	ai_will_do = {
		factor = 3
		modifier = {
			has_war = no
			factor = 2
		}
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus no"#Auto-logging
		if = {
			limit = {
				has_government = democratic
			}
			add_ideas = EQC_in_defence_of_harmony
		}
		else_if = {
			limit = {
				has_government = communism
			}
			add_ideas = EQC_in_defence_of_communism
		}
		else_if = {
			limit = {
				has_government = fascism
			}
			add_ideas = EQC_in_defence_of_fascism
		}
		else = {
			add_ideas = EQC_defence_of_outsiders
		}
	}
}	

shared_focus = {
	id = EQC_every_little_helps
	icon = GFX_goal_generic_construct_mil_factory
	relative_position_id = EQC_national_defence_company
	prerequisite = { focus = EQC_national_defence_company }
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 7
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_every_little_helps_factory1
			}
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_every_little_helps_factory2
			}
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_every_little_helps"#Auto-logging
		random_owned_controlled_state = {
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = arms_factory
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_every_little_helps_factory1
		}
		
		random_owned_controlled_state = {
			limit = {
				ROOT = { has_full_control_of_state = PREV }
				is_core_of = ROOT
				free_building_slots = {
					building = arms_factory
					size > 1
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
			set_state_flag = EQC_every_little_helps_factory2
		}
	}
}	

shared_focus = {
	id = EQC_invest_in_victory
	icon = GFX_goal_generic_production
	relative_position_id = EQC_national_mobilisation_act
	prerequisite = { focus = EQC_national_mobilisation_act }
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_legacy_of_the_cockatrice_war"#Auto-logging
		add_ideas = EQC_invest_in_victory1
	}
}

shared_focus = {
	id = EQC_squish_the_parasprites 
	icon = GFX_focus_AST_squander_bug
	relative_position_id = EQC_invest_in_victory
	prerequisite = { focus = EQC_invest_in_victory }
	prerequisite = { focus = EQC_every_little_helps }
	x = -1
	y = 1
	cost = 10

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus yes"#Auto-logging
		swap_ideas = {
			remove_idea = EQC_invest_in_victory1
			add_idea = EQC_invest_in_victory2
		}
	}
}

shared_focus = {
	id = EQC_full_economic_commitment
	icon = GFX_goal_generic_production
	relative_position_id = EQC_economic_recovery
	prerequisite = { focus = EQC_economic_recovery }
	prerequisite = { focus = EQC_squish_the_parasprites }	
	x = 1
	y = 2
	cost = 10

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	available = {

	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	complete_tooltip = {
		random_state = {
			limit = {
				has_state_flag = EQC_full_economic_commitment_IC1
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		random_state = {
			limit = {
				has_state_flag = EQC_full_economic_commitment_IC2
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
	}

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_full_economic_commitment"#Auto-logging
		custom_effect_tooltip = will_allow_economic_laws_tt
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_full_economic_commitment_IC1
		}
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			set_state_flag = EQC_full_economic_commitment_IC2
		}
	}
}

shared_focus = {
	id = EQC_expand_conscription
	icon = GFX_goal_generic_political_pressure
	relative_position_id = EQC_invest_in_victory
	prerequisite = { focus = EQC_invest_in_victory }
	x = 0
	y = 2
	cost = 10

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 2
			has_war = yes
		}
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_commerce_protection"#Auto-logging
		custom_effect_tooltip = will_allow_conscription_laws_tt
		swap_ideas = {
			remove_idea = EQC_national_mobilisation_act1
			add_idea = EQC_national_mobilisation_act2
		}
	}
}

shared_focus = {
	id = EQC_griffon_workers
	icon = GFX_goal_industrial_pony
	relative_position_id = EQC_full_economic_commitment
	prerequisite = { focus = EQC_full_economic_commitment }
	mutually_exclusive = { focus = EQC_griffon_affairs_act focus = EQC_force_griffon_conscription }
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 6
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

		completion_reward = {
			log = "[Root.GetName]: Focus EQC_expand_manehatten_harbour"#Auto-logging
		swap_ideas = {
			remove_idea = EQC_invest_in_victory2
			add_idea = EQC_invest_in_victory3
		}
	}
}

shared_focus = {
	id = EQC_force_griffon_conscription
	icon = GFX_goal_revolution
	relative_position_id = EQC_expand_conscription
	prerequisite = { focus = EQC_expand_conscription }
	mutually_exclusive = { focus = EQC_negotiate_with_griffon_clans focus = EQC_griffon_workers }
	x = 0
	y = 1
	cost = 10

	ai_will_do = {
		factor = 2
	}
	
	allow_branch = {
		NOT = { has_country_flag = equalist_eqc }
	}

	available = {
		NOT = { has_completed_focus = EQC_commie_griffon_ally }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: EQC_force_griffon_conscription"#Auto-logging
		remove_ideas = EQC_griffon_minorities1
		hidden_effect = {
			set_country_flag = griffon_rebellion
		}
		custom_effect_tooltip = EQC_griffons_will_not_be_happy_about_this_tt
	}
}

shared_focus = {
	id = EQC_negotiate_with_griffon_clans
	icon = GFX_goal_improve_relations_pony_griffon
	relative_position_id = EQC_expand_conscription
	prerequisite = { focus = EQC_expand_conscription }
	mutually_exclusive = { focus = EQC_force_griffon_conscription }
	x = 2
	y = 1
	cost = 10

	ai_will_do = {
		factor = 6
	}
	
	allow_branch = {
		NOT = { has_country_flag = equalist_eqc }
	}

	available = {
		NOT = { has_completed_focus = EQC_commie_griffon_ally }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: EQC_negotiate_with_griffon_clans"#Auto-logging
		swap_ideas = {
			remove_idea = EQC_griffon_minorities1
			add_idea = EQC_griffon_minorities2
		}
	}
}

shared_focus = {
	id = EQC_transoceanic_support
	icon = GFX_goal_equestria
	prerequisite = { focus = EQC_attract_immigrants focus = EQC_SOL_university_exchanges }
	relative_position_id = EQC_attract_immigrants
	x = -1
	y = 1

	cost = 10

	ai_will_do = {
		factor = 6
	}

	available = {
		OR = {
			NOT = { has_war_with = EQS }
			EQS = { exists = yes }
		}
	}
	
	bypass = {
		
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[Root.GetName]: Focus no"#Auto-logging
		custom_effect_tooltip = available_theorist
		show_ideas_tooltip = moon_dancer
		custom_effect_tooltip = available_designer
		show_ideas_tooltip = EQC_commonwealth_aircraft_corporation
	}
}

shared_focus = {
	id = EQC_eastern_wonderbolts
	icon = GFX_goal_generic_air_doctrine
	relative_position_id = EQC_transoceanic_support
	prerequisite = { focus = EQC_national_mobilisation_act focus = EQC_defence_of_x }
	prerequisite = { focus = EQC_transoceanic_support }
	x = -1
	y = 1
	cost = 10
	
	allow_branch = {
		OR = {
			has_focus_tree = new_mareland_focus
			has_focus_tree = eqc_sol_focus
		}
	}

	ai_will_do = {
		factor = 6
	}

	available = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		log = "[Root.GetName]: Focus EQC_school_for_gifted_unicorns"#Auto-logging
		add_ideas = EQC_eastern_wonderbolts_id
	}
}