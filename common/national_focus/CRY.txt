#!focus:interface\eaw_goals.gfx
#!gfx:interface\eaw_goals.gfx

focus_tree = {
	id = crystalempire
	country = {
		factor = 0
		modifier = {
			add = 10
			original_tag = CRY
		}
	}
	default = no
	continuous_focus_position = { x = 200 y = 1900 }
	shared_focus = CRY_dawn_on_crystal_empire
	shared_focus = CRY_military
	shared_focus = CRY_a_looming_war
}
focus_tree = {
	id = crystalempire_sombra
	country = {
		factor = 0
	}
	default = no
	continuous_focus_position = { x = 1200 y = 1500 }
	shared_focus = CRY_the_king_of_monsters
	shared_focus = CRY_military
}

shared_focus = { #Review of the last year
	id = CRY_dawn_on_crystal_empire
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 3
	x = 0
	y = 1
	ai_will_do = {
		factor = 8
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_dawn_on_crystal_empire"
		add_political_power = 75		
		add_autonomy_score = {
			value = 40
			localization = CRY_dawn_on_crystal_empire
		}
		country_event = newcrystals.1
	}
}
shared_focus = { #Review of the last year
	id = CRY_crystal_fair
	icon = GFX_goal_crystal_fair
	cost = 4
	x = 1
	y = 2
	relative_position_id = CRY_dawn_on_crystal_empire
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	bypass = {
		EQS = {
			has_completed_focus = Crystal_Fair
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystal_fair"
	}
}
shared_focus = { #Review of the last year
	id = CRY_equestria_games
	icon = GFX_goal_equestria_games
	cost = 2
	x = -1
	y = 2
	relative_position_id = CRY_dawn_on_crystal_empire
	available = {
		EQS = {
			exists = yes
			has_government = democratic
		}
	}
	bypass = {
		EQS = {
			has_completed_focus = Friendship_Games
		}
	}
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_equestria_games"
	}
}
###############
### HARMONY ###
###############
shared_focus = { #harmony path starts
	id = CRY_the_way_of_harmony
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = 7
	y = 1
	relative_position_id = CRY_dawn_on_crystal_empire
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	mutually_exclusive = {
		focus = CRY_the_crystal_labor_movement
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_way_of_harmony"
		swap_ideas = {
			remove_idea = CRY_royal_family
			add_idea = CRY_royal_family2
		}
		
		add_autonomy_score = {
			value = 20
			localization = CRY_the_way_of_harmony
		}
		custom_effect_tooltip = CRY_puppet_now_available
	}
}
shared_focus = { #simp for eqs
	id = CRY_equestrian_tutelage
	icon = GFX_goal_cry_celestia
	cost = 5
	x = -4
	y = 1
	relative_position_id = CRY_the_way_of_harmony
	ai_will_do = {
		factor = 8
	}
	available = {
		EQS = {
			exists = yes
			has_government = democratic
		}
	}
	mutually_exclusive = {
		focus = CRY_on_our_own_hooves
	}
	prerequisite = {
		focus = CRY_the_way_of_harmony
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_equestrian_tutelage"
	}
}
shared_focus = { #building up on our own
	id = CRY_on_our_own_hooves
	icon = GFX_goal_crystal_heart
	cost = 5
	x = 4
	y = 1
	relative_position_id = CRY_the_way_of_harmony
	ai_will_do = {
		factor = 8
	}
	bypass = {
		EQS = {
			NOT = {
				exists = yes
			    has_government = democratic
			}
		}
	}
	mutually_exclusive = {
		focus = CRY_equestrian_tutelage
	}
	prerequisite = {
		focus = CRY_the_way_of_harmony
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_on_our_own_hooves"
		if = {
			limit = {
				has_idea = CRY_equestrian_overlord_new
			}
			swap_ideas = {
				remove_idea = CRY_equestrian_overlord_new
				add_idea = CRY_equestrian_overlord_autom
			}
		}
		else_if = {
			limit = {
				has_idea = CRY_equestrian_overlord_proper
			}
			swap_ideas = {
				remove_idea = CRY_equestrian_overlord_proper
				add_idea = CRY_equestrian_overlord_proper_autom
			}
		}
	}
}
shared_focus = { #plan to develop other cities outside of crystal city
	id = CRY_multipolar_concept
	icon = GFX_goal_cry_free_trade
	cost = 5
	x = 4
	y = 1
	relative_position_id = CRY_equestrian_tutelage
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_multipolar_concept"
		unlock_decision_category_tooltip = CRY_connecting_cities
		custom_effect_tooltip = CRY_colony_now_available
		swap_ideas = {
			remove_idea = CRY_commie_unrest
			add_idea = CRY_commie_less_unrest
		}
	}
}
shared_focus = { #focus about asking equestrian investors for help
	id = CRY_equestrian_investors
	icon = GFX_goal_cry_factory_cel
	cost = 7
	x = 0
	y = 1
	relative_position_id = CRY_equestrian_tutelage
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_prioritize_our_industry
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_equestrian_investors"
		# yes this is a ton but you won't be getting much of it until MUCH later
		# because the spirit makes EQS steal even more of your industry
		one_random_industrial_complex = yes
		one_random_industrial_complex = yes
		one_random_industrial_complex = yes
		one_random_industrial_complex = yes
		one_random_arms_factory = yes
		one_random_arms_factory = yes
		one_random_arms_factory = yes
		add_tech_bonus = {
			name = industrial_bonus
			category = industry
			uses = 2
			bonus = 0.5
		}
		
		add_autonomy_score = {
			value = 100
			localization = CRY_equestrian_investors
		}
		add_ideas = CRY_equestrian_investors_idea
	}
}
shared_focus = { #focus about relying on your own industry instead
	id = CRY_prioritize_our_industry
	icon = GFX_goal_cry_factory
	cost = 7
	x = 2
	y = 1
	relative_position_id = CRY_equestrian_tutelage
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_equestrian_investors
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_prioritize_our_industry"
		one_random_industrial_complex = yes
		one_random_industrial_complex = yes
		one_random_arms_factory = yes
		add_autonomy_score = {
			value = 100
			localization = CRY_equestrian_investors
		}
		add_ideas = CRY_prioritize_our_industry_idea
	}
}
shared_focus = { #focus about the fifth pony race
	id = CRY_the_fifth_race
	icon = GFX_goal_cry_rising_storm
	cost = 7
	x = 0
	y = 1
	relative_position_id = CRY_on_our_own_hooves
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_a_part_of_something_greater
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_fifth_race"
		add_ideas = CRY_fifth_race_idea
	}
}
shared_focus = { #focus about not making crystal ponies into their own race
	id = CRY_a_part_of_something_greater
	icon = GFX_goal_som_equestria
	cost = 7
	x = -2
	y = 1
	relative_position_id = CRY_on_our_own_hooves
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_the_fifth_race
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_a_part_of_something_greater"
		add_ideas = CRY_something_greater_idea
	}
}
shared_focus = { #plan to develop rainbow falls' tourist industry
	id = CRY_develop_rainbow_falls
	icon = GFX_goal_rainbow_falls
	cost = 5
	x = 4
	y = 1
	relative_position_id = CRY_multipolar_concept
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_multipolar_concept
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_develop_rainbow_falls"
		unlock_decision_tooltip = CRY_develop_rainbow_falls_dec
		add_ideas = CRY_crystal_tourism
		custom_effect_tooltip = GRE_encourage_tourism_tt
	}
}
shared_focus = { #plan to develop Mi Amore into a future Crystal City
	id = CRY_develop_mi_amore
	icon = GFX_focus_SWE_urbanization
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRY_multipolar_concept
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_multipolar_concept
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_develop_mi_amore"
		unlock_decision_tooltip = CRY_develop_mi_amore_dec
		add_ideas = CRY_crystal_construction
	}
}
shared_focus = { #plan to develop Ponytown into a university city
	id = CRY_develop_ponytown
	icon = GFX_goal_ITA_urban
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRY_multipolar_concept
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_multipolar_concept
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_develop_ponytown"
		unlock_decision_tooltip = CRY_develop_ponytown_dec
		add_ideas = CRY_ponytown_science
	}
}
shared_focus = { #plan to develop Quebuck into an industrial city
	id = CRY_develop_quebuck
	icon = GFX_goal_rct_expand_the_city
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRY_multipolar_concept
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_multipolar_concept
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_develop_quebuck"
		unlock_decision_tooltip = CRY_develop_quebuck_dec
		add_ideas = CRY_quebuck_industry
	}
}
shared_focus = { #plan to develop Hedgewards into an electricity producer
	id = CRY_develop_hedgewards
	icon = GFX_focus_generic_hydroelectric_energy
	cost = 5
	x = -4
	y = 1
	relative_position_id = CRY_multipolar_concept
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_multipolar_concept
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_develop_hedgewards"
		unlock_decision_tooltip = CRY_develop_hedgewards_dec
		324 = {
			add_building_construction = {
				type = dam
				level = 1
				instant_build = yes
				province = {
					id = 9236
				}
			}
			custom_effect_tooltip = {
				localization_key = building_state_modifier|dam
				INDENT = "    "
			}
			
		}

	}
}
shared_focus = { #all decisions to develop places have been taken and completed
	id = CRY_a_concept_realized
	icon = GFX_goal_crystal_empire_symbol_flowers
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRY_develop_ponytown
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_develop_ponytown
	}
	prerequisite = {
		focus = CRY_develop_quebuck
	}
	prerequisite = {
		focus = CRY_develop_hedgewards
	}
	prerequisite = {
		focus = CRY_develop_mi_amore
	}
	prerequisite = {
		focus = CRY_develop_rainbow_falls
	}
	available = {
		has_country_flag = CRY_rainbow_falls_developed
		has_country_flag = CRY_mi_amore_developed
		has_country_flag = CRY_ponytown_developed
		has_country_flag = CRY_quebuck_developed
		has_country_flag = CRY_hedgewards_developed
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_a_concept_realized"
		custom_effect_tooltip = CRY_consolidation_spirit
		add_ideas = CRY_multipolarity_achieved
		hidden_effect = {
			remove_ideas = {
				CRY_crystal_construction
				CRY_crystal_tourism
				CRY_ponytown_science
				CRY_quebuck_industry
			}
		}
	}
}
shared_focus = { #focus about the City itself
	id = CRY_world_metropolis
	icon = GFX_goal_cry_world_metropolis
	cost = 7
	x = 0
	y = 1
	relative_position_id = CRY_a_concept_realized
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_a_concept_realized
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_world_metropolis"
		increase_society_development = yes
		344 = {
			increase_state_category = yes
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			if = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		345 = {
			increase_state_category = yes
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			if = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		custom_effect_tooltip = CRY_dominion_now_available
	}
}
shared_focus = { #focus about collaborating with the unions
	id = CRY_cooperate_with_unions
	icon = GFX_goal_cry_welfare
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRY_a_concept_realized
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_a_concept_realized
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_cooperate_with_unions"
		swap_ideas = {
			remove_idea = CRY_commie_less_unrest
			add_idea = CRY_commie_cooperation
		}
		##focus that adds spirits that increases ticking autonomy as well as giving a bit of communist acceptance, could give some more recovery rate and efficiency because the workers are happy.
	}
}
shared_focus = { #focus about preparing to fight the lings
	id = CRY_a_threat_we_know_well
	icon = GFX_goal_som_changeling
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRY_a_concept_realized
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_a_concept_realized
	}
	available = {
		CHN = {
			is_subject = no
			has_government = fascism
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_a_threat_we_know_well"
		add_ideas = CRY_experienced_anti_changeling_behavior
		country_event = newcrystals.3
	}
}
shared_focus = { #focus about the Crystal City-Canterlot railway
	id = CRY_crystal_canterlot_railway
	icon = GFX_goal_cry_train
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRY_world_metropolis
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_world_metropolis
	}
	available = {
		can_build_railway = {
			start_province = 489
			target_province = 11164
		}
		can_build_railway = {
			start_province = 11164
			target_province = 3162
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystal_canterlot_railway"
		build_railway = {
			level = 2
			fallback = yes
			path = { 489 11788 6013 11065 11126 6480 3119 11208 61 11115 11164  }
			start_province = 489
			target_province = 11164
		}
		build_railway = {
			level = 2
			fallback = yes
			path = { 489 11788 6013 11065 11126 6480 3119 11208 61 11115 11164  }
			start_province = 11164
			target_province = 3162
		}
		149 = {
			add_building_construction = {
				level = 1
				type = supply_node
				instant_build = yes
				province = 6480
			}
		}
	}
}
shared_focus = { #focus about accepting Equestria as ruler
	id = CRY_under_their_wing
	icon = GFX_goal_cry_subordination
	cost = 5
	x = -1
	y = 2
	relative_position_id = CRY_world_metropolis
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_referendum
	}
	prerequisite = {
		focus = CRY_world_metropolis
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_under_their_wing"
		one_random_arms_factory = yes
		one_random_industrial_complex = yes
		custom_effect_tooltip = CRY_free_now_available
	}
}
shared_focus = { #focus about the referendum for freedom
	id = CRY_referendum
	icon = GFX_goal_cry_referendum
	cost = 5
	x = 1
	y = 2
	relative_position_id = CRY_world_metropolis
	ai_will_do = {
		factor = 8
	}
	mutually_exclusive = {
		focus = CRY_under_their_wing
	}
	prerequisite = {
		focus = CRY_world_metropolis
	}
	available = {
		has_autonomy_state = autonomy_dominion
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_referendum"
		country_event = newcrystals.4
	}
}
shared_focus = { #focus about cadance declaring her "victory" 
	id = CRY_mi_amore_forever
	icon = GFX_goal_cry_miamore
	cost = 5
	x = -1
	y = 1
	relative_position_id = CRY_referendum
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_referendum
		focus = CRY_under_their_wing
	}
	available = {
		is_subject = no
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_mi_amore_forever"
		add_country_leader_trait = princess_of_ponies
		add_popularity = {
			ideology = democratic
			popularity = 0.15
		}
		swap_ideas = {
			remove_idea = CRY_royal_family2
			add_idea = CRY_royal_family3
		}
		if = {
			limit = {
				has_completed_focus = CRY_referendum
			}
			country_event = newcrystals.5
		}
		else = {
			country_event = newcrystals.6
		}
	}
}
shared_focus = { #focus about cadance declaring her "victory" 
	id = CRY_greater_economic_ties
	icon = GFX_goal_cry_strengthen_ties
	cost = 5
	x = -1
	y = 1
	relative_position_id = CRY_under_their_wing
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_under_their_wing
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_greater_economic_ties"
		###sfocus about more greatly integrating the crystal economy into Equestria, this is basically the same focus as normal but maybe with more buffs.
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 0.65
			uses = 3
			category = industry
		}
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			custom_effect_tooltip = available_mio_tt
			show_mio_tooltip = CRY_small_arms_concern_organization
			mio:CRY_small_arms_concern_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
		else = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = small_arms_concern
		}
	}
}
shared_focus = { #focus about cadance looking around for non-harmonics
	id = CRY_a_statement
	icon = GFX_goal_cry_manehattan
	cost = 5
	x = 1
	y = 1
	relative_position_id = CRY_referendum
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_referendum
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_a_statement"
		unlock_decision_category_tooltip = CRY_direct_intervention
		add_ideas = CRY_internationalist_harmony
		###focus will provide you with the ability of creating a few puppets up there.
	}
}
shared_focus = { #focus about preparing for future festivities
	id = CRY_prepare_the_festivities
	icon = GFX_goal_eqc_shelter_celestia
	cost = 2
	x = -2
	y = 3
	relative_position_id = CRY_equestrian_tutelage
	available = {
		has_war = no
	}
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_prepare_the_festivities"
		add_stability = 0.05
		country_event = newcrystals.7
	}
}
shared_focus = { #focus about really modernizing the country
	id = CRY_from_the_annals_of_history
	icon = GFX_goal_TBK_AF_holy_texts
	cost = 2
	x = 10
	y = 3
	relative_position_id = CRY_equestrian_tutelage
	prerequisite = {
		focus = CRY_equestrian_tutelage
		focus = CRY_on_our_own_hooves
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_from_the_annals_of_history"
		add_war_support = 0.05
		country_event = newcrystals.8
	}
}
shared_focus = { #focus about amethyst university
	id = CRY_research_effort
	icon = GFX_goal_cry_eqs_tech_share
	cost = 5
	x = -2
	y = 1
	relative_position_id = CRY_from_the_annals_of_history
	prerequisite = {
		focus = CRY_from_the_annals_of_history
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_research_effort"
		decrease_illiteracy = yes
		if = {
			limit = {
				amount_research_slots < 5
			}
			add_research_slot = 1
			custom_effect_tooltip = CZE_war_college_effect_2_tt
		}
	}
}
shared_focus = { #focus about magical machines in industry
	id = CRY_magical_machinations
	icon = GFX_goal_unicorn_academy
	cost = 5
	x = -1
	y = 1
	relative_position_id = CRY_research_effort
	available = {
		has_completed_focus = CRY_magicalconceptions
		has_completed_focus = CRY_machinisation
	}
	prerequisite = {
		focus = CRY_research_effort
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_magical_machinations"
		modify_building_resources = {
			building = arms_factory
			resource = crystals
			amount = -1
		}
		
		modify_building_resources = {
			building = industrial_complex
			resource = crystals
			amount = -1
		}
		add_ideas = CRY_crystal_powered_factories
	}
}
shared_focus = { #focus about special forces
	id = CRY_crystal_guard
	icon = GFX_goal_crystal_empire
	cost = 5
	x = 1
	y = 1
	relative_position_id = CRY_research_effort
	prerequisite = {
		focus = CRY_research_effort
	}
	prerequisite = {
		focus = CRY_equestrian_military_staff
		focus = CRY_with_our_own_ponies
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystal_guard"
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			add_doctrine_cost_reduction = {
				name = special_forces_bonus
				cost_reduction = 0.75
				uses = 1
				category = special_forces_doctrine
			}
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 0.75
				uses = 1
				category = special_forces_tech
			}
		}
		else = {
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1.0
				uses = 1
				category = special_forces_tech
			}
		}
		if = {
			limit = {
				NOT = {
					has_tech = tech_pegasi
				}
			}
			set_technology = {
				tech_pegasi = 1
				popup = no
			}
		}
		else = {
			add_tech_bonus = {
				name = pegasi_tech
				uses = 1
				bonus = 2
				category = pegasi_tech
			}
		}
		division_template = {
			name = "Crystal Pegasi"
			regiments = { 
				pegasi = { x = 0 y = 0 }
				pegasi = { x = 0 y = 1 }
				pegasi = { x = 0 y = 2 }
				pegasi = { x = 0 y = 3 }
				pegasi = { x = 1 y = 0 }
				pegasi = { x = 1 y = 1 }
				pegasi = { x = 1 y = 2 }
				pegasi = { x = 1 y = 3 }
				pegasi = { x = 2 y = 0 }
				pegasi = { x = 2 y = 1 }
				pegasi = { x = 2 y = 2 }
				pegasi = { x = 2 y = 3 }
			}
			
			support = {
				engineer = { x = 0 y = 0 }
				artillery = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
			}
		}
		capital_scope = {

			create_unit = {
				division = "name = \"1st Crystal Pegasi\" division_template = \"Crystal Pegasi\" start_experience_factor = 0.6"
				owner = CRY
				count = 1
				allow_spawning_on_enemy_provs = no
			}
			
			create_unit = {
				division = "name = \"2nd Crystal Pegasi\" division_template = \"Crystal Pegasi\" start_experience_factor = 0.6"
				owner = CRY
				count = 1
				allow_spawning_on_enemy_provs = no
			}
			
			create_unit = {
				division = "name = \"3rd Crystal Pegasi\" division_template = \"Crystal Pegasi\" start_experience_factor = 0.6"
				owner = CRY
				count = 1
				allow_spawning_on_enemy_provs = no
			}
		}
		country_event = newcrystals.9
	}
}
shared_focus = { #focus about using amore and further building a crystal identity
	id = CRY_amore
	icon = GFX_goal_miamore
	cost = 5
	x = -1
	y = 1
	relative_position_id = CRY_crystal_guard
	mutually_exclusive = {
		focus = CRY_as_she_would
	}
	prerequisite = {
		focus = CRY_crystal_guard
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_amore"
		custom_effect_tooltip = JAK_expansion_take_states_tt
		add_tech_bonus = {
			name = race_tech
			uses = 2
			bonus = 0.75
			category = race_tech
		}
		
		add_autonomy_score = {
			value = 100
			localization = CRY_amore
		}
		###focus about building an unique crystal identity. Could give less annex cost and a race research buff, as well as an event relating to it. Some other buffs could work well too. Would give automomy.
	}
}
shared_focus = { #focus about following Celestia's and Equestria's way of governance
	id = CRY_as_she_would
	icon = GFX_PLB_HY_CELESTIA
	cost = 5
	x = 1
	y = 1
	relative_position_id = CRY_crystal_guard
	mutually_exclusive = {
		focus = CRY_amore
	}
	prerequisite = {
		focus = CRY_crystal_guard
	}
	available = {
		EQS = {
			exists = yes
			has_government = democratic
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_as_she_would"
		custom_effect_tooltip = CRY_reduce_puppet_cost
		add_tech_bonus = {
			name = electronics_bonus
			uses = 2
			bonus = 0.75
			category = electronics
		}
		every_owned_state = {
			limit = {
				OR = {
					has_state_category = pastoral
					has_state_category = rural
				}
			}
			increase_state_category = yes
		}
		add_autonomy_score = {
			value = -100
			localization = CRY_as_she_would
		}
		###focus about following Equestria's lead and sticking to their system and Celestia's tutelage. Gives some electronic and farming related buffs but does take away autonomy. Can't take it if Solar exists or Equestria doesn't exist.
	}
}
shared_focus = { #focus about selling crystals
	id = CRY_crystal_commerce
	icon = GFX_goal_generic_crystals
	cost = 3
	x = 1
	y = 1
	relative_position_id = CRY_crystal_services
	prerequisite = {
		focus = CRY_crystal_services
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystal_commerce"
		unlock_decision_category_tooltip = CRY_commerce_cat
		custom_effect_tooltip = CRY_unlocked_trading
	}
}
shared_focus = { #focus about agency
	id = CRY_crystal_services
	icon = GFX_goal_cry_evil_genius
	cost = 5
	x = 3
	y = 1
	relative_position_id = CRY_research_effort
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_equestrian_military_staff
		focus = CRY_with_our_own_ponies
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystal_services"
		if = {
			limit = {
				has_dlc = "La Resistance"
				has_intelligence_agency = no
			}
			create_intelligence_agency = {
				name = "Crystal Services"
				icon = GFX_intelligence_agency_logo_generic_2
			}
			gain_random_agency_upgrade = yes
		}
		else_if = {
			limit = {
				has_dlc = "La Resistance"
				has_intelligence_agency = yes
			}
			gain_random_agency_upgrade = yes
			gain_random_agency_upgrade = yes
		}
		else = {
			add_ideas = CRY_crystal_services_idea
		}
	}
}
shared_focus = { #focus about using magic to make tanks and mech better
	id = CRY_enhanced_armor
	icon = GFX_focus_generic_tank_assembly
	cost = 5
	x = 1
	y = 1
	relative_position_id = CRY_with_our_own_ponies
	available = {
		has_completed_focus = CRY_magicalconceptions
		has_completed_focus = CRY_machinisation
	}
	prerequisite = {
		focus = CRY_with_our_own_ponies
		focus = CRY_equestrian_military_staff
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_enhanced_armor"
		###gives buff to armor in tanks and mech, could give some other assorted buffs to those two.
	}
}
shared_focus = { #focus about requesting equestrian help for army
	id = CRY_equestrian_military_staff
	icon = GFX_goal_cry_eqs_hat
	cost = 5
	x = 0
	y = 1
	relative_position_id = CRY_from_the_annals_of_history
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_from_the_annals_of_history
	}
	mutually_exclusive = {
		focus = CRY_with_our_own_ponies
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_equestrian_military_staff"
		###gives similar effects to the focus that already exists in the base tree, just is a little quicker and we could the tooltip a bit clearer about what it gives. Also gives you a research buff in the same doctrine that Equestria has gone down, removes autonomy too.
	}
}
shared_focus = { #focus about going it alone when it comes to army
	id = CRY_with_our_own_ponies
	icon = GFX_goal_generic_pony_volunteer
	cost = 5
	x = 2
	y = 1
	relative_position_id = CRY_from_the_annals_of_history
	mutually_exclusive = {
		focus = CRY_equestrian_military_staff
	}
	prerequisite = {
		focus = CRY_from_the_annals_of_history
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_with_our_own_ponies"
		###spawns a few crystal divisions, they're not that good but are similar in manpower to what you get in the equestrian staff focus. Here you gain a spirit giving some core buffs and a little more recruitable pop. This focus also raises your autonomy as well as giving you an event where you decide the doctrine you want a buff on.
	}
}
shared_focus = { #focus about winter solstice
	id = CRY_winter_solstice
	icon = GFX_goal_winter_sun
	cost = 4
	x = -2
	y = 1
	relative_position_id = CRY_prepare_the_festivities
	prerequisite = {
		focus = CRY_prepare_the_festivities
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_winter_solstice"
		###same focus already present in normal cry, but we could make the effects better.
	}
}
shared_focus = { #focus about fishing
	id = CRY_the_riverside_industry
	icon = GFX_tradegoods
	cost = 4
	x = -1
	y = 1
	relative_position_id = CRY_winter_solstice
	prerequisite = {
		focus = CRY_winter_solstice
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_riverside_industry"
		###focus would give civilian factory, as well as what latin america has in their trees, that being better river crossing buffs and perhaps even some ticking navy XP.
	}
}
shared_focus = { #focus about crystalling
	id = CRY_crystalling_anniversary
	icon = GFX_goal_crystalling
	cost = 4
	x = 0
	y = 1
	relative_position_id = CRY_prepare_the_festivities

	prerequisite = {
		focus = CRY_prepare_the_festivities
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystalling_anniversary"
		###same focus already present in normal cry, but we could make the effects better.
	}
}
shared_focus = { #focus about grand festival
	id = CRY_grand_festival
	icon = GFX_goal_cry_festival
	cost = 4
	x = 2
	y = 1
	relative_position_id = CRY_prepare_the_festivities

	prerequisite = {
		focus = CRY_prepare_the_festivities
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_grand_festival"
		###same focus already present in normal cry, but we could make the effects better.
	}
}
shared_focus = { #focus about increasing the production of cultural-related stuff
	id = CRY_cultural_products
	icon = GFX_focus_CHL_enlarge_the_textile_industries
	cost = 5
	x = 1
	y = 1
	relative_position_id = CRY_grand_festival

	prerequisite = {
		focus = CRY_grand_festival
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_cultural_products"
		###focus gives civilian factories and also heat and cold buffs as it's implied they are making uniforms with the reborn industries, also decreases stuff going to market.
		decrease_poverty = yes
	}
}
shared_focus = { #focus about winter solstice
	id = CRY_combat_the_dark_spectre
	icon = GFX_goal_dark_heart
	cost = 4
	x = 1
	y = 1
	relative_position_id = CRY_winter_solstice
	prerequisite = {
		focus = CRY_winter_solstice
		focus = CRY_crystalling_anniversary
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_combat_the_dark_spectre"
		set_country_flag = CRY_get_rid_of_sombra_in_progress
		###focus that will unlock a few decisions to get rid of the Sombra Threat. Takes around the same amount of time with PP, but it is packaged in a more interesting way, each decision could also give some little buffs.
	}
}
shared_focus = { #focus about volunteers buff
	id = CRY_volunteers
	icon = GFX_goal_cry_deep_integration
	cost = 4
	x = 3
	y = 1
	relative_position_id = CRY_winter_solstice
	prerequisite = {
		focus = CRY_grand_festival
		focus = CRY_crystalling_anniversary
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_volunteers"
		add_ideas = CRY_volunteer_army
	}
}
shared_focus = { #focus about increasing the power of the heart
	id = CRY_the_power_of_the_heart
	icon = GFX_goal_crystal_heart_cry
	cost = 4
	x = -1
	y = 1
	relative_position_id = CRY_combat_the_dark_spectre
	prerequisite = {
		focus = CRY_combat_the_dark_spectre
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_combat_the_dark_spectre"
		###focus about utilizing the powers of the heart, this could give some anti air in crystal city and surrouding areas to symbolize the shield defence of the heart, or a national spirit that lowers enemy air abilities. Maybe some magic buffs.
	}
}
shared_focus = { #focus about refugees from yaks
	id = CRY_yak_refugees
	icon = GFX_focus_great_yak
	cost = 4
	x = -1
	y = 1
	relative_position_id = CRY_volunteers
	prerequisite = {
		focus = CRY_volunteers
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_yak_refugees"
		###focus that adds spirit giving monthly population and weekly manpower for a limited time. Yaks or Jaks must be in a particularly evil path for this to be available.
	}
}
shared_focus = { #focus about refugees from stg
	id = CRY_stg_refugees
	icon = GFX_goal_stg_cry
	cost = 4
	x = 1
	y = 1
	relative_position_id = CRY_volunteers
	prerequisite = {
		focus = CRY_volunteers
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_stg_refugees"
		###focus that adds spirit giving monthly population and weekly manpower for a limited time. Stalliongrad must be in a particularly evil path for this to be available.
	}
}
###############
### COMMIES ###
###############
shared_focus = { #commie path starts
	id = CRY_the_crystal_labor_movement
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = -7
	y = 1
	relative_position_id = CRY_dawn_on_crystal_empire
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	
	mutually_exclusive = {
		focus = CRY_the_way_of_harmony
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_crystal_labor_movement"
		add_stability = -0.1
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}		
		swap_ideas = {
			remove_idea = CRY_commie_unrest
			add_idea = CRY_commies_very_unrested
		}
		unlock_decision_category_tooltip = CRY_crossroads_of_destiny_cry_cat
		add_autonomy_score = {
			value = 80
			localization = CRY_the_crystal_labor_movement
		}
		custom_effect_tooltip = CRY_puppet_now_available

	}
}
shared_focus = { #fleur
	id = CRY_the_college_kid
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = -4
	y = 1
	relative_position_id = CRY_the_crystal_labor_movement
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_the_crystal_labor_movement
	}
	
	mutually_exclusive = {
		focus = CRY_the_factory_worker
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_college_kid"
	}
}
shared_focus = { #arctic
	id = CRY_the_factory_worker
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = 4
	y = 1
	relative_position_id = CRY_the_crystal_labor_movement
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_the_crystal_labor_movement
	}
	
	mutually_exclusive = {
		focus = CRY_the_college_kid
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_factory_worker"
	}
}
##############
### SOMBRA ###
##############
shared_focus = { #sombra starts
	id = CRY_the_king_of_monsters
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = 7
	y = 1
	ai_will_do = {
		factor = 8
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_king_of_monsters"
		add_ideas = sombra_strength_CRY
	}
}

############################
### COMMIE/HARMONIST JFT ###
############################
shared_focus = { #Forts
	id = CRY_a_looming_war
	icon = GFX_goal_crystal_fair
	cost = 4
	x = 0
	y = 2
	relative_position_id = CRY_yak_refugees
	available = {
		OR = {
			original_tag = CRY
			is_in_faction_with = CRY
		}
		OR = {
			threat > 0.4
			has_war_with_major = yes
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_a_looming_war"
		every_controlled_state = {
			limit = {
				any_neighbor_state = {
					is_controlled_by_ROOT_or_ally = no
				}
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = {
					all_provinces = yes
					limit_to_border = yes
				}
			}
		}
	}
}
joint_focus = {
	id = CRY_synchronicity
	icon = GFX_goal_crystal_fair
	cost = 6
	x = -1
	y = 3
	text_icon = RIV_focus_style
	prerequisite = {
		focus = CRY_a_looming_war
	}
	relative_position_id = CRY_a_looming_war
	available = {
		has_tech = atomic_research
	}
	
	joint_trigger = {
		CRY_joint_trigger = yes
	}

	completion_reward_joint_originator = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_synchronicity"
		add_breakthrough_progress = {
			value = 1
			specialization = specialization_nuclear
		}
	}
	completion_reward_joint_member = {
		add_breakthrough_progress = {
			value = 0.5
			specialization = specialization_nuclear
		}
	}
}
joint_focus = {
	id = CRY_magic_potential
	icon = GFX_goal_crystal_fair
	cost = 6
	x = 1
	y = 3
	text_icon = RIV_focus_style
	prerequisite = {
		focus = CRY_a_looming_war
	}
	relative_position_id = CRY_a_looming_war
	available = {
		has_tech = magical_weapons
	}
	
	joint_trigger = {
		CRY_joint_trigger = yes
	}
	completion_reward_joint_originator = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_synchronicity"
		add_breakthrough_progress = {
			value = 1
			specialization = specialization_magical
		}
	}
	completion_reward_joint_member = {
		add_breakthrough_progress = {
			value = 0.5
			specialization = specialization_magical
		}
	}
}
####################
### SHARED STUFF ###
####################

shared_focus = { #Military training (Manpower+, Discipline+)
	id = CRY_military
	icon = GFX_goal_cry_military
	cost = 10
	x = 24
	y = 1
	ai_will_do = {
		factor = 8
	}
	offset = {
		trigger = { has_focus_tree = crystalempire_sombra }
		x = 4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = -4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = -4
		y = 0
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_military"
		add_manpower = 15000
		add_ideas = army_morale
		army_experience = 50
		if = {
			limit = { 
				is_ai = yes 
				NOT = {
					has_idea = tot_economic_mobilisation
					has_idea = war_economy
					has_idea = partial_economic_mobilisation
				}
			}
			add_political_power = -150
			add_ideas = partial_economic_mobilisation
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_ARMY_BONUS }
}
shared_focus = { ## some bonus or more factories i guesss
	id = CRY_strength
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
		focus = CRY_SOL_new_management
		focus = CRY_NLR_night_shroud
	}
	ai_will_do = {
		factor = 90
	}
	offset = {
		trigger = { has_focus_tree = crystalempire_sombra }
		x = 4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = -4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = -4
		y = 0
	}
	available = {
		53 = { is_owned_and_controlled_by = ROOT }
	}
	x = 19
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_strength"
		decrease_poverty = yes
		53 = { 
			increase_state_category = yes
			add_extra_state_shared_building_slots = 1
			add_building_construction = { 
				type = industrial_complex
				level = 3
				instant_build = yes 
			}
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1.0
			uses = 1
			category = industry
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = { ## bonus there
	id = CRY_innovations
	icon = GFX_goal_cry_innovation
	cost = 10
	prerequisite = {
		focus = CRY_strength
	}
	ai_will_do = {
		factor = 90
	}
	relative_position_id = CRY_strength
	x = 0
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_innovations"
		increase_science_base = yes
		hidden_effect = {
			if = {
				limit = {
					has_idea = CRY_equestrian_overlord_new
				}
				swap_ideas = {
					remove_idea = CRY_equestrian_overlord_new
					add_idea = CRY_equestrian_overlord_proper
				}
			}
			else_if = {
				limit = {
					has_idea = CRY_equestrian_overlord_autom
				}
				swap_ideas = {
					remove_idea = CRY_equestrian_overlord_autom
					add_idea = CRY_equestrian_overlord_proper_autom
				}
			}
		}
		add_tech_bonus = {
			name = electronics_bonus
			bonus = 1.0
			uses = 2
			category = electronics
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = { # open material designers
	id = CRY_concerns
	icon = GFX_goal_cry_list
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_innovations
	x = 0
	y = 1
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_concerns"
		add_tech_bonus = {
			name = infantry_weapons_bonus
			bonus = 1.0
			uses = 2
			category = infantry_weapons
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1.0
			uses = 1
			category = industry
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = { ## resear
	id = CRY_rndinstitute
	icon = GFX_goal_cryacademy
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_innovations
	x = 2
	y = 2
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = 0
		y = -1
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = 0
		y = -1
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_rndinstitute"
		decrease_illiteracy = yes
		if = {
			limit = {
				amount_research_slots < 5
			}
			add_research_slot = 1
			custom_effect_tooltip = CZE_war_college_effect_2_tt
		}
		custom_effect_tooltip = available_industrial_concern
		show_ideas_tooltip = amethyst_university
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_magicalconceptions
	icon = GFX_goal_magical_conception
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_magicalconceptions"
		add_tech_bonus = {
			name = unicorn_bonus
			bonus = 1.0
			uses = 2
			category = unicorn_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_magicalsource
	icon = GFX_goal_magic_cry
	cost = 10
	prerequisite = {
		focus = CRY_magicalconceptions
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_magicalsource"
		add_ideas = magical_power
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_mining
	icon = GFX_goal_pickaxe
	cost = 10
	prerequisite = {
		focus = CRY_steel_factories_in_crystal_city
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_innovations
	x = -2
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_mining"
		add_resource = {
			type = aluminium
			amount = 15
			state = 139
		}
		add_resource = {
			type = chromium
			amount = 24
			state = 339
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_steel_factories_in_crystal_city
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	available = {
		345 = { is_owned_and_controlled_by = ROOT }
	}
	relative_position_id = CRY_innovations
	x = -2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_steel_factories_in_crystal_city"
		increase_society_development = yes
		add_resource = {
			type = steel
			amount = 25
			state = 345
		}
		345 = { 
			add_extra_state_shared_building_slots = 2
			add_building_construction = { 
				type = industrial_complex
				level = 1
				instant_build = yes 
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_industry_f
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_military
	}
	available = {

	}
	ai_will_do = {
		factor = 20
	}
	relative_position_id = CRY_military
	x = 0
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_industry_f"
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = arms_factory
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = industrial_complex
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_crystals
	icon = GFX_goal_cry_harm_crystals
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
	}
	ai_will_do = {
		factor = 15
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 1
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystals"
		add_ideas = CRY_harmony_crystals
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_heavytanks
	icon = GFX_goal_cry_heavy_tanks
	cost = 10
	prerequisite = {
		focus = CRY_industry_f
		focus = CRY_crystals
	}
	ai_will_do = {
		factor = 15
	}
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_industry_f
	x = 0
	y = 4
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_heavytanks"
		add_tech_bonus = {
			name = armor_bonus
			bonus = 1.0
			uses = 2
			category = cat_heavy_armor
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_newpowersource
	icon = GFX_goal_magic_cry
	cost = 10
	prerequisite = {
		focus = CRY_crystals
	}
	ai_will_do = {
		factor = 15
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_newpowersource"
		if = {
			limit = {
				has_tech = atomic_research
			}
			add_breakthrough_progress = {
				specialization = specialization_nuclear
				value = 0.375
			}
		}
		else = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.75
				uses = 1
				category = nuclear
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_sciencerevolution
	icon = GFX_goal_cry_sciencerevolution
	cost = 10
	prerequisite = {
		focus = CRY_newpowersource
		focus = CRY_magicalsource
	}
	ai_will_do = {
		factor = 15
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 3
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_sciencerevolution"
		custom_effect_tooltip = {
			localization_key = nuclear_facility_construction_tt
			temp_facility_state_loc = "[345.GetName]"
			temp_facility_province_loc = "[345.GetCapitalVictoryPointName]"
		}
		hidden_effect = {
			if = {
				limit = { 
					345 = {
						is_fully_controlled_by = ROOT
						can_construct_building = nuclear_facility
					}
				}
				345 = {
					add_building_construction = {
						type = nuclear_facility
						level = 1
						instant_build = yes
						province = 11788
					}
				}
			}
		}
		add_ideas = CRY_science
		add_tech_bonus = {
			name = jet_bonus
			bonus = 1.0
			uses = 1
			category = jet_technology
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_fortifications
	icon = GFX_goal_cry_forts
	cost = 10
	prerequisite = {
		focus = CRY_military
	}
	relative_position_id = CRY_military
	x = 1
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_fortifications"
		add_timed_idea = { idea = CRY_fortifications_bonus days = 365 }
		344 = {
			add_building_construction = {
				type = anti_air_building
				level = 2
				instant_build = yes
			}
		}
	}
}
shared_focus = {
	id = CRY_gunfactories
	icon = GFX_goal_cry_gunfactories
	cost = 10
	prerequisite = {
		focus = CRY_industry_f
	}
	available = {
		has_war = yes
	}
	relative_position_id = CRY_industry_f
	x = 2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_gunfactories"
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = arms_factory
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_machinisation
	icon = GFX_goal_cry_mechanization
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
		focus = CRY_industry_f
	}
	relative_position_id = CRY_rndinstitute
	x = 2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_machinisation"
		add_tech_bonus = {
			name = motorized_bonus
			bonus = 1.0
			uses = 2
			ahead_reduction = 1
			category = motorized_equipment
			category = cat_mechanized_equipment
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_aviation
	icon = GFX_goal_cry_aviation
	cost = 10
	prerequisite = {
		focus = CRY_magicalsource
		focus = CRY_newpowersource
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 3
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_aviation"
		add_tech_bonus = {
			name = aircraft_bonus
			bonus = 1.0
			uses = 2
			category = light_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_rocketengineering
	icon = GFX_goal_cry_rocketry
	cost = 10
	prerequisite = {
		focus = CRY_aviation
		focus = CRY_sciencerevolution
	}
	relative_position_id = CRY_rndinstitute
	x = -1
	y = 4
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_rocketengineering"
		add_tech_bonus = {
			name = flocke_von_schnee
			bonus = 1.0
			uses = 1
			category = rocketry
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}