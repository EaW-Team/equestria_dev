focus_tree = {
	id = crystalempire
	country = {
		factor = 0
		modifier = {
			add = 10
			original_tag = CRY
		}
	}
	default = no
	continuous_focus_position = { x = 1200 y = 1500 }
	shared_focus = CRY_dawn_on_crystal_empire
	shared_focus = CRY_military
}
focus_tree = {
	id = crystalempire_sombra
	country = {
		factor = 0
	}
	default = no
	continuous_focus_position = { x = 1200 y = 1500 }
	shared_focus = CRY_military
}

shared_focus = { #Review of the last year
	id = CRY_dawn_on_crystal_empire
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 7
	x = 5
	y = 1
	ai_will_do = {
		factor = 8
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_dawn_on_crystal_empire"
		add_political_power = 75		
		add_autonomy_score = {
			value = 40
			localization = CRY_dawn_on_crystal_empire
		}
		country_event = newcrystals.1
	}
}
###############
### HARMONY ###
###############
shared_focus = { #harmony path starts
	id = CRY_the_path_of_amore
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = 6
	y = 1
	relative_position_id = CRY_dawn_on_crystal_empire
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_path_of_amore"
		swap_ideas = {
			remove_idea = CRY_royal_family
			add_idea = CRY_royal_family2
		}
		
		add_autonomy_score = {
			value = 20
			localization = CRY_the_path_of_amore
		}
	}
}
###############
### COMMIES ###
###############
shared_focus = { #commie path starts
	id = CRY_the_crystal_labor_movement
	icon = GFX_goal_crystal_empire_symbol_cry
	cost = 5
	x = -6
	y = 1
	relative_position_id = CRY_dawn_on_crystal_empire
	ai_will_do = {
		factor = 8
	}
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_the_crystal_labor_movement"
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}		
		add_autonomy_score = {
			value = 80
			localization = CRY_the_crystal_labor_movement
		}
	}
}
####################
### SHARED STUFF ###
####################

shared_focus = { #Military training (Manpower+, Discipline+)
	id = CRY_military
	icon = GFX_goal_cry_military
	cost = 10
	x = 24
	y = 1
	ai_will_do = {
		factor = 8
	}
	offset = {
		trigger = { has_focus_tree = crystalempire_sombra }
		x = 4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = -4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = -4
		y = 0
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_military"
		add_manpower = 15000
		add_ideas = army_morale
		army_experience = 50
		if = {
			limit = { 
				is_ai = yes 
				NOT = {
					has_idea = tot_economic_mobilisation
					has_idea = war_economy
					has_idea = partial_economic_mobilisation
				}
			}
			add_political_power = -150
			add_ideas = partial_economic_mobilisation
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_ARMY_BONUS }
}
shared_focus = { ## some bonus or more factories i guesss
	id = CRY_strength
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_dawn_on_crystal_empire
		focus = CRY_SOL_new_management
		focus = CRY_NLR_night_shroud
	}
	ai_will_do = {
		factor = 90
	}
	offset = {
		trigger = { has_focus_tree = crystalempire_sombra }
		x = 4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = -4
		y = 0
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = -4
		y = 0
	}
	available = {
		345 = { is_owned_and_controlled_by = ROOT }
	}
	x = 19
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_strength"
		345 = { 
			add_extra_state_shared_building_slots = 3
			add_building_construction = { 
				type = industrial_complex
				level = 3
				instant_build = yes 
			}
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1.0
			uses = 1
			category = industry
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = { ## bonus there
	id = CRY_innovations
	icon = GFX_goal_cry_innovation
	cost = 10
	prerequisite = {
		focus = CRY_strength
	}
	ai_will_do = {
		factor = 90
	}
	relative_position_id = CRY_strength
	x = 0
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_innovations"
		if = {
			limit = { NOT = { has_idea = modern_society } }
			add_ideas = modern_society
		}
		add_tech_bonus = {
			name = electronics_bonus
			bonus = 1.0
			uses = 2
			category = electronics
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = { # open material designers
	id = CRY_concerns
	icon = GFX_goal_cry_list
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_innovations
	x = 0
	y = 1
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_concerns"
		add_tech_bonus = {
			name = infantry_weapons_bonus
			bonus = 1.0
			uses = 2
			category = infantry_weapons
		}
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 1.0
			uses = 1
			category = industry
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = { ## resear
	id = CRY_rndinstitute
	icon = GFX_goal_cryacademy
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_innovations
	x = 2
	y = 2
	offset = {
		trigger = { has_focus_tree = crystal_empire_solar_focus }
		x = 0
		y = -1
	}
	offset = {
		trigger = { has_focus_tree = crystal_empire_lunar_focus }
		x = 0
		y = -1
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_rndinstitute"
		if = {
			limit = {
				amount_research_slots < 5
			}
			add_research_slot = 1
			custom_effect_tooltip = CZE_war_college_effect_2_tt
		}
		custom_effect_tooltip = available_industrial_concern
		show_ideas_tooltip = amethyst_university
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_magicalconceptions
	icon = GFX_goal_magical_conception
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_magicalconceptions"
		add_tech_bonus = {
			name = unicorn_bonus
			bonus = 1.0
			uses = 2
			category = unicorn_tech
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_magicalsource
	icon = GFX_goal_magic_cry
	cost = 10
	prerequisite = {
		focus = CRY_magicalconceptions
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_magicalsource"
		add_ideas = magical_power
	}
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_mining
	icon = GFX_goal_pickaxe
	cost = 10
	prerequisite = {
		focus = CRY_steel_factories_in_crystal_city
	}
	ai_will_do = {
		factor = 9
	}
	relative_position_id = CRY_innovations
	x = -2
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_mining"
		add_resource = {
			type = aluminium
			amount = 15
			state = 139
		}
		add_resource = {
			type = chromium
			amount = 24
			state = 339
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_steel_factories_in_crystal_city
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_innovations
	}
	ai_will_do = {
		factor = 9
	}
	available = {
		345 = { is_owned_and_controlled_by = ROOT }
	}
	relative_position_id = CRY_innovations
	x = -2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_steel_factories_in_crystal_city"
		add_resource = {
			type = steel
			amount = 25
			state = 345
		}
		345 = { 
			add_extra_state_shared_building_slots = 2
			add_building_construction = { 
				type = industrial_complex
				level = 1
				instant_build = yes 
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_industry_f
	icon = GFX_goal_cry_factory
	cost = 10
	prerequisite = {
		focus = CRY_military
	}
	available = {

	}
	ai_will_do = {
		factor = 20
	}
	relative_position_id = CRY_military
	x = 0
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_industry_f"
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = arms_factory
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = industrial_complex
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_crystals
	icon = GFX_goal_cry_harm_crystals
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
	}
	ai_will_do = {
		factor = 15
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 1
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_crystals"
		add_ideas = CRY_harmony_crystals
	}
	search_filters = { FOCUS_FILTER_ARMY_BONUS FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_heavytanks
	icon = GFX_goal_cry_heavy_tanks
	cost = 10
	prerequisite = {
		focus = CRY_industry_f
		focus = CRY_crystals
	}
	ai_will_do = {
		factor = 15
	}
	available = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	allow_branch = {
		OR = {
			has_government = democratic
			has_government = communism
		}
	}
	relative_position_id = CRY_industry_f
	x = 0
	y = 4
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_heavytanks"
		add_tech_bonus = {
			name = armor_bonus
			bonus = 1.0
			uses = 2
			category = cat_heavy_armor
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_newpowersource
	icon = GFX_goal_magic_cry
	cost = 10
	prerequisite = {
		focus = CRY_crystals
	}
	ai_will_do = {
		factor = 15
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 2
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_newpowersource"
		if = {
			limit = {
				has_tech = atomic_research
			}
			add_breakthrough_progress = {
				specialization = specialization_nuclear
				value = 0.375
			}
		}
		else = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.75
				uses = 1
				category = nuclear
			}
		}
	}
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_sciencerevolution
	icon = GFX_goal_cry_sciencerevolution
	cost = 10
	prerequisite = {
		focus = CRY_newpowersource
		focus = CRY_magicalsource
	}
	ai_will_do = {
		factor = 15
	}
	relative_position_id = CRY_rndinstitute
	x = -2
	y = 3
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_sciencerevolution"
		custom_effect_tooltip = {
			localization_key = nuclear_facility_construction_tt
			temp_facility_state_loc = "[345.GetName]"
			temp_facility_province_loc = "[345.GetCapitalVictoryPointName]"
		}
		hidden_effect = {
			if = {
				limit = { 
					345 = {
						is_fully_controlled_by = ROOT
						can_construct_building = nuclear_facility
					}
				}
				345 = {
					add_building_construction = {
						type = nuclear_facility
						level = 1
						instant_build = yes
						province = 11788
					}
				}
			}
		}
		add_ideas = CRY_science
		add_tech_bonus = {
			name = jet_bonus
			bonus = 1.0
			uses = 1
			category = jet_technology
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_fortifications
	icon = GFX_goal_cry_forts
	cost = 10
	prerequisite = {
		focus = CRY_military
	}
	relative_position_id = CRY_military
	x = 1
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_fortifications"
		add_timed_idea = { idea = CRY_fortifications_bonus days = 365 }
	}
}
shared_focus = {
	id = CRY_gunfactories
	icon = GFX_goal_cry_gunfactories
	cost = 10
	prerequisite = {
		focus = CRY_industry_f
	}
	available = {
		has_war = yes
	}
	relative_position_id = CRY_industry_f
	x = 2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_gunfactories"
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = arms_factory
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
		}
	}
	search_filters = { FOCUS_FILTER_INDUSTRY }
}
shared_focus = {
	id = CRY_machinisation
	icon = GFX_goal_cry_mechanization
	cost = 10
	prerequisite = {
		focus = CRY_rndinstitute
		focus = CRY_industry_f
	}
	relative_position_id = CRY_rndinstitute
	x = 2
	y = 1
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_machinisation"
		add_tech_bonus = {
			name = motorized_bonus
			bonus = 1.0
			uses = 2
			category = motorized_equipment
			category = cat_mechanized_equipment
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_aviation
	icon = GFX_goal_cry_aviation
	cost = 10
	prerequisite = {
		focus = CRY_magicalsource
		focus = CRY_newpowersource
	}
	relative_position_id = CRY_rndinstitute
	x = 0
	y = 3
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_aviation"
		add_tech_bonus = {
			name = aircraft_bonus
			bonus = 1.0
			uses = 2
			category = light_air
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}
shared_focus = {
	id = CRY_rocketengineering
	icon = GFX_goal_cry_rocketry
	cost = 10
	prerequisite = {
		focus = CRY_aviation
		focus = CRY_sciencerevolution
	}
	relative_position_id = CRY_rndinstitute
	x = -1
	y = 4
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CRY_rocketengineering"
		add_tech_bonus = {
			name = flocke_von_schnee
			bonus = 1.0
			uses = 1
			category = rocketry
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
	}
	search_filters = { FOCUS_FILTER_RESEARCH }
}