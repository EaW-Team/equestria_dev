focus_tree = {
    id = FLY_wartime_tree
    country = {
        factor = 0
        modifier = {
            add = 20
            has_country_flag = FLY_filldelphia
        }
    }
    default = no
    continuous_focus_position = { x = 2000 y = 0 }
    shared_focus = FLY_birth_of_republic
}

focus_tree = {
   id = FLY_post_cw_tree
    country = {
        factor = 0
        modifier = {
            add = 20
            has_country_flag = FLY_filldelphia
        }
    }
    default = no
    continuous_focus_position = { x = 2000 y = 0 }
    shared_focus = FLY_equestrian_republic
    shared_focus = FLY_equestrian_civil_defence_force
    shared_focus = FLY_reunify_equestria
}

### CIVIL WAR FOCUS TREE ###

    shared_focus = {
        id = FLY_birth_of_republic
        icon = GFX_goal_FLY_birth_of_republic
        cost = 1
        x = 10
        y = 0

        ai_will_do = {
            factor = 10
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_birth_of_republic"
            custom_effect_tooltip = FLY_start_focus_tp
        }
    }

    shared_focus = {
        id = FLY_fillydelphia_soldiers
        icon = GFX_goal_FLY_fillydelphia_soldiers
        cost = 2
        x = -3
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fillydelphia_soldiers"
            custom_effect_tooltip = FLY_fillydelphia_soldiers_tp
            hidden_effect = {
                load_oob = "FLY_ex_eup"
            }
        }
    }

    shared_focus = {
        id = FLY_secure_garrisons
        icon = GFX_goal_FLY_secure_garrisons
        cost = 2
        x = -1
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_secure_garrisons"
            custom_effect_tooltip = FLY_unlock_loot_armouries_tp
            add_equipment_to_stockpile = {
                type = infantry_equipment_1
                amount = 800
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = infantry_equipment_0
                amount = 1200
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = artillery_equipment
                amount = 200
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = support_equipment
                amount = 120
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = 150
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = train_equipment
                amount = 10
                producer = EQS
            }
            hidden_effect = {
                every_state = {
                    limit = {
                        OR = {
                            is_core_of = EQS
                            is_in_array = {
                                state_original_cores = EQS
                            }
                        }
                    }
                    add_to_array = { FLY.FLY_loot_armouries_states_array = THIS }
                }
            }
        }
    }
    
    shared_focus = {
        id = FLY_war_effort
        icon = GFX_goal_FLY_war_effort
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_fillydelphia_soldiers

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_soldiers focus = FLY_secure_garrisons }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_war_effort"
            add_ideas = FLY_industrial_war_effort
        }
    }
        
    shared_focus = {
        id = FLY_starlight_glimmer
        icon = GFX_goal_FLY_starlight_glimmer
        cost = 1
        x = 0
        y = 2
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_convince_ponies"
            custom_effect_tooltip = FLY_starlight_glimmer_recruited_tp
            custom_effect_tooltip = FLY_starlight_glimmer_stats_tp
            hidden_effect = {
                every_possible_country = {
					limit = {
						has_character = EQS_starlight_glimmer
					}
					EQS_starlight_glimmer = {
						set_nationality = PREV.PREV
					}
				}
                set_country_flag = FLY_starlight_available
                add_field_marshal_role = {
                    character = EQS_starlight_glimmer
                    traits = { pony_race_trait trait_talented_coordinator thorough_planner organizer }
                    skill = 4
                    attack_skill = 2
                    defense_skill = 2
                    planning_skill = 5
                    logistics_skill = 4
                    legacy_id = 339110
                    desc = EQS_starlight_glimmer_desc
                }
                set_portraits = {
                    character = EQS_starlight_glimmer
                    civilian = {
                        large = "gfx/leaders/FLY/Starlight_Glimmer_army.tga"
                        small = "gfx/interface/ideas/idea_unknown_advisor.dds"
                    }
                    army = {
                        large = "gfx/leaders/FLY/Starlight_Glimmer_army.tga"
                        small = "gfx/interface/ideas/idea_unknown_advisor.dds"
                    }
                }
            }
            activate_advisor = EQS_starlight_glimmer
            hidden_effect = {
                country_event = { id = fillydelphia_manesix.1 }
            }
        }
    }

    shared_focus = {
        id = FLY_hope_speech
        icon = GFX_goal_FLY_hope_speech
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_hope_speech"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
            add_stability = 0.1
            add_political_power = 300
        }
    }
                    
    shared_focus = {
        id = FLY_cause_speech
        icon = GFX_goal_FLY_cause_speech
        cost = 2
        x = 3
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_cause_speech"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
            add_war_support = 0.1
            add_manpower = 45000
        }
    }
            
    shared_focus = {
        id = FLY_return_of_friendship
        icon = GFX_goal_FLY_return_of_friendship
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_hope_speech

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_hope_speech focus = FLY_cause_speech }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_return_of_friendship"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            add_ideas = FLY_keepers_friendship
        }
    }
                            
    shared_focus = {
        id = FLY_convince_ponies
        icon = GFX_goal_FLY_convince_ponies
        cost = 2
        x = -1
        y = 1
        relative_position_id = FLY_starlight_glimmer

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_war_effort }
        prerequisite = { focus = FLY_starlight_glimmer }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_convince_ponies"
            custom_effect_tooltip = FLY_unlock_legitimacy_continuous_focus
            set_country_flag = FLY_unlocked_continuous_focus
            set_variable = {
                var = FLY_continuous_legitimacy_raise_cap
                value = 50
            }
        }
    }

    shared_focus = {
        id = FLY_topple_tyranny
        icon = GFX_goal_FLY_topple_tyranny
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_starlight_glimmer

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_starlight_glimmer }
        prerequisite = { focus = FLY_return_of_friendship }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_topple_tyranny"
            add_ideas = FLY_equestria_still_lives
        }
    }
    
    shared_focus = {
        id = FLY_declare_republic
        icon = GFX_goal_FLY_declare_republic
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_convince_ponies
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_25_legitimacy_req
                check_variable = { FLY_legitimacy > 24 }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_convince_ponies }
        prerequisite = { focus = FLY_topple_tyranny }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_topple_tyranny"
            effect_tooltip = {
                set_cosmetic_tag = EQS_FLY_organised_1
            }
            custom_effect_tooltip = FLY_can_core_tp
            set_variable = {
                var = FLY_coring_pp_cost
                value = 20
            }
            hidden_effect = {
                country_event = fillydelphia_civil.3
            }
        }
    }

    shared_focus = {
        id = FLY_honesty
        icon = GFX_goal_FLY_honesty
        cost = 2
        x = -11
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_honesty_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_honesty"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_applejack
                }
                EQS_applejack = {
                    set_nationality = FLY
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = FLY_cw_elements_of_harmony
                        }
                    }
                }
                custom_effect_tooltip = FLY_applejack_modifier_1_tp
                hidden_effect = {
                    add_dynamic_modifier = {
                        modifier = FLY_cw_elements_of_harmony
                    }
                }
            }
            else = {
                custom_effect_tooltip = FLY_applejack_modifier_2_tp
            }
            hidden_effect = {
                set_variable = {
                    FLY_applejack_production_speed_arms_factory_factor_var = 0.1
                }
                set_variable = {
                    FLY_applejack_production_speed_dockyard_factor_var = 0.1
                }
                set_variable = {
                    FLY_applejack_production_speed_fuel_silo_factor_var = 0.1
                }
                set_variable = {
                    FLY_applejack_production_factory_max_efficiency_factor_var = 0.05
                }
                set_variable = {
                    FLY_applejack_production_factory_efficiency_gain_factor_var = 0.1
                }
                set_variable = {
                    FLY_applejack_line_change_production_efficiency_factor = 0.1
                }
                force_update_dynamic_modifier = yes
            }
        }
    }

    shared_focus = {
        id = FLY_kindness
        icon = GFX_goal_FLY_kindness
        cost = 2
        x = -10
        y = 2
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_kindness_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_kindness"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_fluttershy
                }
                EQS_fluttershy = {
                    set_nationality = FLY
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = FLY_cw_elements_of_harmony
                        }
                    }
                }
                custom_effect_tooltip = FLY_fluttershy_modifier_1_tp
                hidden_effect = {
                    add_dynamic_modifier = {
                        modifier = FLY_cw_elements_of_harmony
                    }
                }
            }
            else = {
                custom_effect_tooltip = FLY_fluttershy_modifier_2_tp
            }
            hidden_effect = {
                set_variable = {
                    FLY_fluttershy_attrition_var = 0.1
                }
                set_variable = {
                    FLY_fluttershy_experience_gain_army_unit_factor_var = 0.1
                }
                set_variable = {
                    FLY_fluttershy_experience_loss_factor = -0.1
                }
                force_update_dynamic_modifier = yes
            }
        }
    }

    shared_focus = {
        id = FLY_laughter
        icon = GFX_goal_FLY_laughter
        cost = 2
        x = -9
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_laughter_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_laughter"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_pinkie_pie
                }
                EQS_pinkie_pie = {
                    set_nationality = FLY
                }
            }
            custom_effect_tooltip = FLY_pinkie_pie_tp
            if = {
                limit = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = FLY_cw_elements_of_harmony
                        }
                    }
                }
                custom_effect_tooltip = FLY_pinkie_modifier_1_tp
                hidden_effect = {
                    add_dynamic_modifier = {
                        modifier = FLY_cw_elements_of_harmony
                    }
                }
            }
            else = {
                custom_effect_tooltip = FLY_pinkie_modifier_2_tp
            }
            hidden_effect = {
                set_variable = {
                    FLY_pinkie_max_dig_in_factor_var = 0.1
                }
                set_variable = {
                    FLY_pinkie_supply_consumption_factor_var = 0.1
                }
                set_variable = {
                    FLY_pinkie_army_artillery_attack_factor_var = 0.05
                }
                set_variable = {
                    FLY_pinkie_army_artillery_defence_factor_var = 0.05
                }
                force_update_dynamic_modifier = yes  
            }
        }
    }

    shared_focus = {
        id = FLY_generosity 
        icon = GFX_goal_FLY_generosity 
        cost = 2
        x = -8
        y = 2
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_generosity_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_generosity"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_rarity
                }
                EQS_rarity = {
                    set_nationality = FLY
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = FLY_cw_elements_of_harmony
                        }
                    }
                }
                custom_effect_tooltip = FLY_rarity_modifier_1_tp
                hidden_effect = {
                    add_dynamic_modifier = {
                        modifier = FLY_cw_elements_of_harmony
                    }
                }
            }
            else = {
                custom_effect_tooltip = FLY_rarity_modifier_2_tp
            }
            hidden_effect = {
                set_variable = {
                    FLY_rarity_army_morale_factor_var = 0.1
                }
                set_variable = {
                    FLY_rarity_winter_attrition_factor_var = -0.1
                }
                set_variable = {
                    FLY_rarity_heat_attrition_factor_var = -0.1
                }
                force_update_dynamic_modifier = yes
            }
        }
    }

    shared_focus = {
        id = FLY_loyalty
        icon = GFX_goal_FLY_loyalty
        cost = 2
        x = -7
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_loyalty_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_loyalty"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_rainbowdash
                }
                EQS_rainbowdash = {
                    set_nationality = FLY
                }
            }
            custom_effect_tooltip = FLY_rainbow_dash_tp
            every_possible_country = {
                limit = {
                    has_character = EQS_rainbowdash
                }
                tooltip = available_chief_of_airforce_tt
                show_ideas_tooltip = EQS_rainbowdash
            }
            activate_advisor = EQS_rainbowdash
            if = {
                limit = {
                    CES = {
                        is_ally_with = ROOT
                    }
                }
                CES = {
                    country_event = { id = fillydelphia_manesix.33 days = 30 }
                }
            }
        }
    }

    shared_focus = {
        id = FLY_magic
        icon = GFX_goal_FLY_magic
        cost = 2
        x = -6
        y = 2
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_magic_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_magic"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            every_possible_country = {
                limit = {
                    has_character = EQS_twilight_sparkle
                }
                EQS_twilight_sparkle = {
                    set_nationality = FLY
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_dynamic_modifier = {
                            modifier = FLY_cw_elements_of_harmony
                        }
                    }
                }
                custom_effect_tooltip = FLY_twilight_modifier_1_tp
                hidden_effect = {
                    add_dynamic_modifier = {
                        modifier = FLY_cw_elements_of_harmony
                    }
                }
            }
            else = {
                custom_effect_tooltip = FLY_twilight_modifier_2_tp
            }
            hidden_effect = {
                set_variable = {
                    FLY_twilight_stability_factor_var = 0.05
                }
                set_variable = {
                    FLY_twilight_political_power_factor_var = 0.15
                }
                set_variable = {
                    FLY_twilight_research_speed_factor_var = 0.05
                }
                force_update_dynamic_modifier = yes
            }
        }
    }

    shared_focus = {
        id = FLY_hey_everypony
        icon = GFX_goal_FLY_hey_everypony
        cost = 3
        x = -5
        y = 1
        relative_position_id = FLY_declare_republic
        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_hey_everypony"
            add_political_power = 150
            add_stability = 0.1
        }
    }

    shared_focus = {
        id = FLY_magic_of_friendship_is_what_its_about
        icon = GFX_goal_FLY_magic_of_friendship_is_what_its_about
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_hey_everypony
        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_hey_everypony }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_magic_of_friendship_is_what_its_about"
            custom_effect_tooltip = FLY_lower_coring_pp_cost_increase_legitimacy_tp
            set_variable = {
                var = FLY_coring_pp_cost
                value = 10
            }
        }
    }
    shared_focus = {
        id = FLY_we_may_seem_different
        icon = GFX_goal_FLY_we_may_seem_different
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_magic_of_friendship_is_what_its_about
        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_40_legitimacy_req
                check_variable = { FLY_legitimacy > 39 }
            }
        }

        prerequisite = { focus = FLY_magic_of_friendship_is_what_its_about }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_we_may_seem_different"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 15
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
        }
    }

    shared_focus = {
        id = FLY_armaments_commission
        icon = GFX_goal_FLY_armaments_commission
        cost = 3
        x = -3
        y = 1
        relative_position_id = FLY_declare_republic
        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_armaments_commission"
            swap_ideas = {
                remove_idea = FLY_industrial_war_effort
                add_idea = FLY_industrial_war_effort_expanded
            }
        }
    }

    shared_focus = {
        id = FLY_true_true_friend
        icon = GFX_goal_FLY_true_true_friend
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_hey_everypony
        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_hey_everypony focus = FLY_armaments_commission }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_true_true_friend"
            EAW_raise_conscription_law = yes
            add_timed_idea = {
                idea = FLY_manpower_boost_temp
                days = 175
            }
        }
    }

    shared_focus = {
        id = FLY_friend_will_be_there
        icon = GFX_goal_FLY_friend_will_be_there
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_true_true_friend
        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_40_legitimacy_req
                check_variable = { FLY_legitimacy > 39 }
            }
        }
        bypass = {
            has_completed_focus = FLY_assume_mantle_equestria
        }

        prerequisite = { focus = FLY_true_true_friend }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_friend_will_be_there"
            custom_effect_tooltip = FLY_friends_will_be_there_tp
            every_controlled_state = {
                limit = {
                    has_active_resistance = yes
                }
                add_compliance = 10
            }
        }
    }

    shared_focus = {
        id = FLY_dedicated_workers
        icon = GFX_goal_FLY_dedicated_workers
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_armaments_commission
        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_armaments_commission }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_dedicated_workers"
            add_timed_idea = {
                idea = FLY_workers_boost_temp
                days = 175
            }
        }
    }

    shared_focus = {
        id = FLY_built_this_gun
        icon = GFX_goal_FLY_built_this_gun
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_dedicated_workers
        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_40_legitimacy_req
                check_variable = { FLY_legitimacy > 39 }
            }
        }

        prerequisite = { focus = FLY_dedicated_workers }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_built_this_gun"
            swap_ideas = {
                remove_idea = FLY_industrial_war_effort_expanded
                add_idea = FLY_industrial_war_effort_final
            }
        }
    }

    shared_focus = {
        id = FLY_equestria_land
        icon = GFX_goal_FLY_equestria_land
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_friend_will_be_there
        ai_will_do = {
            factor = 5
        }
        available = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = FLY_60_legitimacy_req
                    check_variable = { FLY_legitimacy > 59 }
                }
                custom_trigger_tooltip = {
                    tooltip = FLY_elements_gathered_tp
                    has_completed_focus = FLY_laughter
                    has_completed_focus = FLY_loyalty
                    has_completed_focus = FLY_generosity
                    has_completed_focus = FLY_honesty
                    has_completed_focus = FLY_kindness
                    has_completed_focus = FLY_magic
                }
            }
        }

        prerequisite = { focus = FLY_we_may_seem_different focus = FLY_friend_will_be_there focus = FLY_built_this_gun }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_equestria_land"
            add_stability = 0.15
            add_war_support = 0.15
            add_popularity = { ideology = democratic popularity = 0.15 }
        }
    }

    shared_focus = {
        id = FLY_let_rainbow_remind_you
        icon = GFX_goal_FLY_let_rainbow_remind_you
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_friend_will_be_there
        ai_will_do = {
            factor = 5
        }
        available = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = FLY_60_legitimacy_req
                    check_variable = { FLY_legitimacy > 59 }
                }
                custom_trigger_tooltip = {
                    tooltip = FLY_elements_gathered_tp
                    has_completed_focus = FLY_laughter
                    has_completed_focus = FLY_loyalty
                    has_completed_focus = FLY_generosity
                    has_completed_focus = FLY_honesty
                    has_completed_focus = FLY_kindness
                    has_completed_focus = FLY_magic
                }
            }
        }

        prerequisite = { focus = FLY_we_may_seem_different focus = FLY_friend_will_be_there focus = FLY_built_this_gun }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_let_rainbow_remind_you"
            swap_ideas = {
                remove_idea = FLY_keepers_friendship
                add_idea = FLY_keepers_friendship_final
            }
        }
    }
    
    shared_focus = {
        id = FLY_friendship_grows
        icon = GFX_goal_FLY_friendship_grows
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_equestria_land
        ai_will_do = {
            factor = 5
        }
        available = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = FLY_70_legitimacy_req
                    check_variable = { FLY_legitimacy > 69 } #nice
                }
                custom_trigger_tooltip = {
                    tooltip = FLY_elements_gathered_tp
                    has_completed_focus = FLY_laughter
                    has_completed_focus = FLY_loyalty
                    has_completed_focus = FLY_generosity
                    has_completed_focus = FLY_honesty
                    has_completed_focus = FLY_kindness
                    has_completed_focus = FLY_magic
                }
            }
        }

        prerequisite = { focus = FLY_equestria_land focus = FLY_let_rainbow_remind_you }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_friendship_grows"
            add_ideas = FLY_magic_of_friendship
        }
    }

    shared_focus = {
        id = FLY_vanhoover_operation
        icon = GFX_goal_FLY_vanhoover_operation
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            NOT = {
                14 = {
                    is_controlled_by = CHN
                }
            }
        }
        bypass = {
            14 = {
                OR = {
                    is_controlled_by_ROOT_or_ally = yes
                    is_controlled_by_ROOT_or_subject = yes
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancelable = no
        cancel_if_invalid = yes

        select_effect = {
            14 = {
                controller = {
                    if = {
                        limit = {
                            is_ai = no
                        }
                        country_event = { id = fillydelphia_utility.4 }
                    }
                }
            }
        }

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_vanhoover_operation"
            custom_effect_tooltip = FLY_vanhoover_explanation_tp
            hidden_effect = {
                14 = {
                    set_state_controller_to	= FLY
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 2
                        prioritize_location = 585
                        allow_spawning_on_enemy_provs = yes
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 1
                        prioritize_location = 1141
                        allow_spawning_on_enemy_provs = yes
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 1
                        prioritize_location = 1141
                        allow_spawning_on_enemy_provs = yes
                    }
                }
                activate_mission = FLY_vanhoover_defence
            }
        }
    }

    shared_focus = {
        id = FLY_vanhoover_arm_unions
        icon = GFX_goal_FLY_vanhoover_arm_unions
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_vanhoover_operation
        available = {
            14 = {
                OR = {
                    is_controlled_by_ROOT_or_ally = yes
                    is_controlled_by_ROOT_or_subject = yes
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_vanhoover_operation }

        cancelable = no
        cancel_if_invalid = yes

        select_effect = {
            14 = {
                add_province_modifier = {
                    static_modifiers = { FLY_barricades }
                    province = {
                        id = 585
                    }
                }
            }
        }

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_vanhoover_arm_unions"
            add_popularity = { ideology = communism popularity = 0.1 }
            custom_effect_tooltip = FLY_vanhoover_unions_militia_tp
            hidden_effect = {
                14 = {
                    remove_province_modifier = {
                        static_modifiers = { FLY_barricades }
                        province = {
                            id = 585
                        }
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 3
                        prioritize_location = 585
                        allow_spawning_on_enemy_provs = yes
                    }
                }
            }
            custom_effect_tooltip = FLY_vanhoover_arms_unions_tp
            effect_tooltip = {
                14 = {
                    add_province_modifier = {
                        static_modifiers = { FLY_barricades }
                        province = {
                            id = 585
                        }
                    }
                }
            }
        }
    }

    shared_focus = {
        id = FLY_wartime_leader
        icon = GFX_goal_FLY_wartime_leader
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_50_legitimacy_req
                check_variable = { FLY_legitimacy > 49 }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_wartime_leader"
            custom_effect_tooltip = FLY_choose_wartime_leader_tp
            hidden_effect = {
                country_event = fillydelphia_civil.4
            }
        }
    }

    shared_focus = {
        id = FLY_extreme_measures
        icon = GFX_goal_FLY_extreme_measures
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_wartime_leader

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_extreme_measures"
            custom_effect_tooltip = FLY_extreme_measures_tp
            set_country_flag = FLY_extreme_measures_available
        }
    }

    shared_focus = {
        id = FLY_assume_mantle_equestria
        icon = GFX_goal_FLY_assume_mantle_equestria
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_wartime_leader
        available = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = FLY_70_legitimacy_req
                    check_variable = { FLY_legitimacy > 69 } # nice
                }
                AND = {
                    OR = {
                        EQS = {
                            exists = no
                        }
                        NLR = {
                            exists = no
                        }
                    }
                    num_of_controlled_states > 24
                    custom_trigger_tooltip = {
                        tooltip = FLY_40_legitimacy_req
                        check_variable = { FLY_legitimacy > 39 }
                    }
                }
                AND = {
                    num_of_controlled_states > 29
                    custom_trigger_tooltip = {
                        tooltip = FLY_50_legitimacy_req
                        check_variable = { FLY_legitimacy > 49 }
                    }
                }
                AND = {
                    EQS = {
                        exists = no
                    }
                    NLR = {
                        exists = no
                    }
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_assume_mantle_equestria"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 20
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            effect_tooltip = {
                set_cosmetic_tag = EQS_FLY_republic_1
            }
            custom_effect_tooltip = FLY_get_cores_on_SOL_NLR_tp
            hidden_effect = {
                every_state = {
                    limit = {
                        OR = {
                            any_of_scopes = {
                                array = EQS.core_states
                                NOT = { is_core_of = FLY }
                            }
                            any_of_scopes = {
                                array = NLR.core_states
                                NOT = { is_core_of = FLY }
                            }
                        }
                    }
                    add_core_of = FLY
                }
                if = {
                    limit = {
                        has_cosmetic_tag = EQS_FLY_organised_1
                    }
                    set_cosmetic_tag = EQS_FLY_republic_1
                }
                else_if = {
                    limit = {
                        has_cosmetic_tag = EQS_FLY_organised_2
                    }
                    set_cosmetic_tag = EQS_FLY_republic_2
                }
                else = {
                    set_cosmetic_tag = EQS_FLY_republic_3
                }
            }
        }
    }

    shared_focus = {
        id = FLY_foreign_support
        icon = GFX_goal_FLY_foreign_support
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_wartime_leader

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader}

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_foreign_support"
            every_other_country = {
                limit = {
                    exists = yes
                    NOT = {
                        has_war_with = FLY
                    }
                    OR = {
                        AND = {
                            NOT = {
                                tag = CHN
                            }
                            is_major = yes
                            OR = {
                                has_modern_society = yes
                                has_outdated_industry = yes
                            }
                        }
                        AND = {
                            is_major = no
                            has_government = democratic
                            OR = {
                                has_modern_society = yes
                                has_outdated_industry = yes
                            }
                            any_controlled_state = {
                                is_coastal = yes
                            }
                        }
                    }
                }
                country_event = fillydelphia_civil.5
            }
        }
    }

    shared_focus = {
        id = FLY_changeling_incursion
        icon = GFX_goal_FLY_changeling_incursion
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            has_war_with = CHN
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_changeling_incursion"
            swap_ideas = {
                remove_idea = FLY_equestria_still_lives
                add_idea = FLY_equestria_still_lives_changelings
            }
        }
    }

    shared_focus = {
        id = FLY_arsenal_of_democracy
        icon = GFX_goal_FLY_arsenal_of_democracy
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_changeling_incursion
        available = {
            has_war_with = CHN
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = {focus = FLY_changeling_incursion }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_arsenal_of_democracy"
            add_ideas = FLY_changeling_cw_production_bonus
        }
    }

    shared_focus = {
        id = FLY_wings_of_liberty
        icon = GFX_goal_FLY_wings_of_liberty
        cost = 3
        x = 3
        y = 1
        relative_position_id = FLY_declare_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_wings_of_liberty"
            if = {
                limit = {
                    12 = {
                        air_base < 1
                    }
                }
                12 = {
                    add_building_construction = {
                        type = air_base
                        level = 1
                        instant_build = yes
                    }
                }
            }
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                if = {
                    limit = {
                        NOT = {
                            has_tech = basic_small_airframe
                        }
                    }
                    set_technology = {
                        basic_small_airframe = 1
                    }
                }
                else = {
                    add_tech_bonus = {
                        name = fighter_bonus
                        bonus = 1
                        uses = 1
                        category = light_air
                    }
                }
                create_equipment_variant = {
                    name = "Hawker Hurricane" 
                    type = small_plane_airframe_1
                    modules = {
                        fixed_main_weapon_slot = light_mg_4x
                        fixed_auxiliary_weapon_slot_1 = light_mg_4x
                        engine_type_slot = engine_2_1x
                        special_type_slot_1 = empty
                    }
                    icon = "GFX_ENG_fighter1_medium"
                }
                custom_effect_tooltip = FLY_hawker_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_airframe_1
                        amount = 100
                        variant_name = "Hawker Hurricane"
                    }
                }
            }
            else = {
                if = {
                    limit = {
                        NOT = {
                            has_tech = fighter1
                        }
                    }
                    set_technology = {
                        fighter1 = 1
                    }
                }
                else = {
                    add_tech_bonus = {
                        name = fighter_bonus
                        bonus = 1.0
                        uses = 1
                        category = light_fighter
                    }
                }
                add_equipment_to_stockpile = { 
                    type = small_plane_airframe 
                    amount = 100 
                    producer = FLY 
                }
            }
        }
    }

    shared_focus = {
        id = FLY_off_to_the_skies
        icon = GFX_goal_FLY_off_to_the_skies
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_wings_of_liberty

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wings_of_liberty }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_off_to_the_skies"
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                custom_effect_tooltip = FLY_hawker_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_airframe_1
                        amount = 100
                        variant_name = "Hawker Hurricane"
                    }
                }
                create_equipment_variant = {
                    name = "Blackburn Skua" 
                    type = small_plane_cas_airframe_1
                    modules = {
                        fixed_main_weapon_slot = bomb_locks
                        fixed_auxiliary_weapon_slot_1 = light_mg_4x
                        engine_type_slot = engine_2_1x
                        special_type_slot_1 = dive_brakes_small
                        special_type_slot_2 = fuel_tanks_small
                    }
                    icon = "GFX_ENG_CAS1_medium"
                }
                custom_effect_tooltip = FLY_blackburn_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_cas_airframe_1
                        amount = 100
                        variant_name = "Blackburn Skua"
                    }
                }
            }
            else = {
                add_equipment_to_stockpile = { 
                    type = small_plane_airframe 
                    amount = 100 
                    producer = FLY
                }
                if = {
                    limit = {
                        NOT = {
                            has_tech = CAS1
                        }
                    }
                    set_technology = {
                        CAS1 = 1
                    }
                }
                add_equipment_to_stockpile = { 
                    type = CAS_equipment_1 
                    amount = 100 
                    producer = FLY
                }
            }
        }
    }

    shared_focus = {
        id = FLY_learning_from_the_fallen
        icon = GFX_goal_FLY_learning_from_the_fallen
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_off_to_the_skies

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_off_to_the_skies }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_learning_from_the_fallen"
            add_tech_bonus = {
                name = fighter_bonus
                bonus = 1
                uses = 2
                ahead_reduction = 2
                category = light_air
                category = medium_air
            }
        }
    }

    shared_focus = {
        id = FLY_fires_of_liberation
        icon = GFX_goal_FLY_fires_of_liberation
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_wings_of_liberty

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wings_of_liberty }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fires_of_liberation"
            add_ideas = FLY_air_warfare_bonus
        }
    }
    
    shared_focus = {
        id = FLY_learn_from_victories_and_defeats
        icon = GFX_goal_FLY_learn_from_victories_and_defeats
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_fires_of_liberation

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fires_of_liberation }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_learn_from_victories_and_defeats"
            air_experience = 75
            add_doctrine_cost_reduction = {
                name = air_doc_bonus
                cost_reduction = 0.75
                uses = 2
                category = air_doctrine
            }
        }
    }
        
    shared_focus = {
        id = FLY_victorian_desurper_cw
        icon = GFX_goal_FLY_victorian_desurper
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_learn_from_victories_and_defeats

        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_has_researched_3_air_doctrines
                OR = {
                    has_tech = naval_strike_tactics
                    has_tech = direct_ground_support
                    has_tech = low_echelon_support
                }
            }
        }

        prerequisite = { focus = FLY_learn_from_victories_and_defeats }
        mutually_exclusive = { focus = FLY_exitium_desurper_cw }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_victorian_desurper_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            add_ideas = FLY_air_cas_idea
            set_country_flag = FLY_completed_FLY_victorian_desurper_cw
        }
    }
        
    shared_focus = {
        id = FLY_exitium_desurper_cw
        icon = GFX_goal_FLY_exitium_desurper
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_learn_from_victories_and_defeats

        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_has_researched_3_air_doctrines
                OR = {
                    has_tech = naval_strike_tactics
                    has_tech = direct_ground_support
                    has_tech = low_echelon_support
                }
            }
        }

        prerequisite = { focus = FLY_learn_from_victories_and_defeats }
        mutually_exclusive = { focus = FLY_victorian_desurper_cw }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_exitium_desurper_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            add_ideas = FLY_air_bomber_idea
            set_country_flag = FLY_completed_FLY_exitium_desurper_cw
        }
    }

    shared_focus = {
        id = FLY_embrace_the_featherbrains
        icon = GFX_goal_FLY_embrace_the_featherbrains
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_fires_of_liberation

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fires_of_liberation }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_embrace_the_featherbrains"
            air_experience = 50
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                add_tech_bonus = {
                    name = plane_modules_tech
                    bonus = 0.75
                    uses = 3
                    category = plane_modules_tech
                    ahead_reduction = 2
                }
            }
            else = {
                add_tech_bonus = {
                    name = air_bonus
                    bonus = 1.0
                    uses = 2
                    category = air_equipment
                    ahead_reduction = 2
                }
            }
        }
    }

    shared_focus = {
        id = FLY_to_defend_equestria
        icon = GFX_goal_FLY_to_defend_equestria
        cost = 3
        x = 11
        y = 1
        relative_position_id = FLY_declare_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_to_defend_equestria"
            add_manpower = 75000
            add_war_support = 0.15
        }
    }

    shared_focus = {
        id = FLY_altius_volantis
        icon = GFX_goal_FLY_altius_volantis
        cost = 3
        x = -5
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wings_of_liberty focus = FLY_to_defend_equestria }
        available = {
            OR = {
                has_character = EQS_rainbowdash
                #has_character = EQS_soarin
            }
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_altius_volantis"
            custom_effect_tooltip = FLY_sps_commando_tp
            hidden_effect = {
                load_oob = "FLY_sps_commando"
            }
        }
    }

    shared_focus = {
        id = FLY_join_the_sps_cw
        icon = GFX_goal_FLY_join_the_sps
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_altius_volantis

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_altius_volantis }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_sps_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            add_ideas = FLY_special_pegasi_force_idea
            set_country_flag = FLY_completed_FLY_join_the_sps_cw
        }
    }

    shared_focus = {
        id = FLY_equipment_improvements
        icon = GFX_goal_FLY_equipment_improvements
        cost = 3
        x = -3
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_equipment_improvements"
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 1000
                producer = FLY
            }
            add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
        }
    }

    shared_focus = {
        id = FLY_shovels_medkits_and_radios_galore
        icon = GFX_goal_FLY_shovels_medkits_and_radios_galore
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_equipment_improvements

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_equipment_improvements }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_shovels_medkits_and_radios_galore"
            add_equipment_to_stockpile = {
                type = support_equipment
                amount = 175
                producer = FLY
            }
            add_tech_bonus = {
				name = support_bonus
				bonus = 1.0
				uses = 2
				category = support_tech
			}
        }
    }

    shared_focus = {
        id = FLY_join_the_sus_cw
        icon = GFX_goal_FLY_join_the_sus
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_shovels_medkits_and_radios_galore

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_shovels_medkits_and_radios_galore }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_sus_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            set_technology = {
                FLY_special_unicorn_service_tech = 1
                popup = no
            }
            custom_effect_tooltip = FLY_special_unicorn_service_tech_gain_tp
            FLY_stygian = {
                add_corps_commander_role = {
                    desc = FLY_stygian_desc
                    traits = { pony_race_trait armchair_general artillery_officer }
                    skill = 3
                    attack_skill = 2
                    defense_skill = 4
                    planning_skill = 3
                    logistics_skill = 1
                    legacy_id = -1
                }
            }
            custom_effect_tooltip = FLY_stygian_stats_tp
            set_country_flag = FLY_completed_FLY_join_the_sus_cw
        }
    }

    shared_focus = {
        id = FLY_join_the_ses_cw
        icon = GFX_goal_FLY_join_the_ses
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_shovels_medkits_and_radios_galore

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_shovels_medkits_and_radios_galore }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_ses_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            set_technology = {
                FLY_special_earth_pony_service_tech = 1
                popup = no
            }
            custom_effect_tooltip = FLY_special_earth_pony_service_gain_tp
            FLY_cheerilee = {
                add_corps_commander_role = {
                    desc = FLY_cheerilee_desc
                    traits = { pony_race_trait experienced_fighter armor_officer }
                    skill = 3
                    attack_skill = 4
                    defense_skill = 1
                    planning_skill = 4
                    logistics_skill = 2
                    legacy_id = -1
                }
            }
            custom_effect_tooltip = FLY_cheerilee_stats_tp
            FLY_redheart = {
                add_corps_commander_role = {
                    desc = FLY_redheart_desc
                    traits = { pony_race_trait medical_expert skilled_staffer }
                    skill = 3
                    attack_skill = 2
                    defense_skill = 2
                    planning_skill = 3
                    logistics_skill = 3
                    legacy_id = -1
                }
            }
            custom_effect_tooltip = FLY_redheart_stats_tp
            set_country_flag = FLY_completed_FLY_join_the_ses_cw
        }
    }

    shared_focus = {
        id = FLY_fillydelphia_motors
        icon = GFX_goal_FLY_fillydelphia_motors
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fillydelphia_motors"
            if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:EQS_fillydelphia_organization = {
					add_mio_size = 2
					add_mio_funds = 800
				}
			}
            12 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
        }
    }

    shared_focus = {
        id = FLY_backbone_of_logistics
        icon = GFX_goal_FLY_backbone_of_logistics
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_fillydelphia_motors

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_motors }
        mutually_exclusive = { focus = FLY_hot_wheels }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_backbone_of_logistics"
            add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = 700
            }
        }
    }

    shared_focus = {
        id = FLY_hot_wheels
        icon = GFX_goal_FLY_hot_wheels
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_fillydelphia_motors

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_motors }
        mutually_exclusive = { focus = FLY_backbone_of_logistics }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_hot_wheels"
            custom_effect_tooltip = FLY_motorized_units_tp
            hidden_effect = {
                load_oob = "FLY_motorized_units"
            }
        }
    }
    
    shared_focus = {
        id = FLY_apc_or_ifv
        icon = GFX_goal_FLY_apc_or_ifv
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_backbone_of_logistics

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_backbone_of_logistics focus = FLY_hot_wheels }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_apc_or_ifv"
            if = {
                limit = {
                    NOT = {
                        has_tech = mechanised_infantry
                    }
                }
                add_tech_bonus = {
                    name = mech_bonus
                    bonus = 1.5
                    uses = 1
                    ahead_reduction = 2
                    category = cat_mechanized_equipment
                }
            }
            else = {
                add_equipment_to_stockpile = {
                    type = mechanized_equipment
                    amount = 350
                    producer = FLY
                }
                add_tech_bonus = {
                    name = mech_bonus
                    bonus = 1
                    uses = 2
                    category = cat_mechanized_equipment
                }
            }
        }
    }

    shared_focus = {
        id = FLY_roar_of_breezies
        icon = GFX_goal_FLY_roar_of_breezies
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_roar_of_breezies"
            custom_effect_tooltip = FLY_tank_division_tp
            hidden_effect = {
                create_equipment_variant = {
                    name = "Light Tank Mk. II Breezie"
                    type = light_tank_chassis_1
                    parent_version = 1
                    modules = {
                        main_armament_slot = tank_auto_cannon
                        turret_type_slot = tank_light_two_man_tank_turret
                        suspension_type_slot = tank_christie_suspension
                        armor_type_slot = tank_riveted_armor
                        engine_type_slot = tank_gasoline_engine
                        special_type_slot_1 = tank_radio_1
                    }
                    upgrades = {
                        tank_nsb_engine_upgrade = 2
                        tank_nsb_armor_upgrade = 1
                    }
                    icon = "GFX_commonwealth_2d_basic_light_tank_medium"
                }
                load_oob = "FLY_cw_tanks"
            }
        }
    }

    shared_focus = {
        id = FLY_civil_war_tank
        icon = GFX_goal_FLY_civil_war_tank
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_roar_of_breezies

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_roar_of_breezies }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_civil_war_tank"
            if = {
                limit = {
                    NOT = {
                        has_tech = improved_light_tank_chassis
                    }
                }
                set_technology = {
                    improved_light_tank_chassis = 1
                }
            }
            else = {
                add_tech_bonus = {
                    name = armor_bonus
                    bonus = 1
                    uses = 1
                    ahead_reduction = 1.5
                    category = armor
                }
            }
            if = {
                limit = {
                    has_dlc = "No Step Back"
                }
                hidden_effect = {
                    create_equipment_variant = {
                        name = "Glimmer Mk.XX-CW"
                        type = light_tank_chassis_2
                        parent_version = 0
                        allow_without_tech = yes
                        modules = {
                            main_armament_slot = tank_high_velocity_cannon
                            turret_type_slot = tank_light_three_man_tank_turret
                            suspension_type_slot = tank_christie_suspension
                            armor_type_slot = tank_riveted_armor
                            engine_type_slot = tank_gasoline_engine
                            special_type_slot_1 = tank_radio_1
                            special_type_slot_2 = easy_maintenance
                            special_type_slot_3 = empty
                            special_type_slot_4 = empty
                        }
                        icon = "GFX_commonwealth_2d_basic_light_tank_medium"
                    }
                }
                custom_effect_tooltip = FLY_wartime_tank_tp
            }
        }
    }

    shared_focus = {
        id = FLY_expert_tank_killers
        icon = GFX_goal_FLY_expert_tank_killers
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_apc_or_ifv

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_apc_or_ifv focus = FLY_civil_war_tank }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_expert_tank_killers"
            add_tech_bonus = {
                name = cat_anti_tank
                bonus = 2
                uses = 2
                ahead_reduction = 2
                category = cat_anti_tank
            }
            add_equipment_to_stockpile = {
                type = anti_tank_equipment
                amount = 360
                producer = FLY
            }
        }
    }

    shared_focus = {
        id = FLY_apple_logistics
        icon = GFX_goal_FLY_apple_logistics
        cost = 3
        x = 3
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }
        available = {
            has_character = EQS_applejack
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_apple_logistics"
            if = {
                limit = {
                    NOT = {
                        has_tech = tech_maintenance_company
                    }
                }
                set_technology = {
                    tech_maintenance_company = 1
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    technology = tech_maintenance_company2
                    technology = tech_maintenance_company3
                    technology = tech_maintenance_company4
                    technology = tech_maintenance_company_a
                    technology = tech_maintenance_company_b
                    technology = tech_maintenance_company_c
                }
            }
            else = {
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 2
                    technology = tech_maintenance_company2
                    technology = tech_maintenance_company3
                    technology = tech_maintenance_company4
                    technology = tech_maintenance_company_a
                    technology = tech_maintenance_company_b
                    technology = tech_maintenance_company_c
                }
            }
            add_ideas = FLY_common_sense_logistics
        }
    }

    shared_focus = {
        id = FLY_studying_war
        icon = GFX_goal_FLY_studying_war
        cost = 3
        x = 5
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_studying_war"
            army_experience = 75
            add_doctrine_cost_reduction = {
                name = land_doc_bonus
                cost_reduction = 0.75
                uses = 2
                category = land_doctrine
            }
        }
    }

    shared_focus = {
        id = FLY_warfare_is_magic
        icon = GFX_goal_FLY_warfare_is_magic
        cost = 3
        x = -3
        y = 1
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_studying_war }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_warfare_is_magic"
            add_tech_bonus = {
				name = earth_pony_bonus
				bonus = 1.0
				uses = 1
				category = earth_pony_tech
			}
            add_tech_bonus = {
				name = pegasi
				bonus = 1.0
				uses = 1
				category = pegasi_tech
			}
            add_tech_bonus = {
				name = unicorn_bonus
				bonus = 1.0
				uses = 1
				category = unicorn_tech
			}
        }
    }

    shared_focus = {
        id = FLY_guns_are_magic
        icon = GFX_goal_FLY_guns_are_magic
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_warfare_is_magic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_warfare_is_magic }
        available = {
            has_character = EQS_twilight_sparkle
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_guns_are_magic"
            if = {
                limit = {
                    NOT = {
                        has_tech = magical_weapons
                    }
                }
                set_technology = {
                    magical_weapons = 1
                }
                add_equipment_to_stockpile = {
                    type = magical_equipment
                    amount = 750
                    producer = FLY
                }
            }
            else = {
                add_tech_bonus = {
                    name = infantry_weapons_bonus
                    bonus = 2.0
                    uses = 1
                    technology = magical_weapons1
                    technology = magical_weapons2
                    technology = magical_weapons3
                }
            }
        }
    }

    shared_focus = {
        id = FLY_cake_rhymes_with_ache
        icon = GFX_goal_FLY_cake_rhymes_with_ache
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_studying_war }
        available = {
            has_character = EQS_pinkie_pie
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_cake_rhymes_with_ache"
            add_tech_bonus = {
				name = artillery_bonus
				bonus = 1.0
				uses = 2
				category = artillery
			}
            add_equipment_to_stockpile = {
                type = artillery_equipment
                amount = 225
                producer = FLY
            }
        }
    }

    shared_focus = {
        id = FLY_the_spirit_of_civil_defense_cw
        icon = GFX_goal_FLY_the_spirit_of_civil_defense
        cost = 3
        x = 0
        y = 2
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_has_researched_4_land_doctrines
                OR = {
                    OR = {
                        has_tech = mobile_infantry
                        has_tech = armored_spearhead
                    }
                    OR = {
                        has_tech = dispersed_support
                        has_tech = intergrated_support
                    }
                    has_tech = grand_assault
                    OR = {
                        has_tech = large_front_operations
                        has_tech = peoples_army
                    }
                }
            }
        }

        prerequisite = { focus = FLY_studying_war }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_the_spirit_of_civil_defense_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            custom_effect_tooltip = FLY_commander_admiral_trait_tp
            hidden_effect = {
                every_army_leader = {
                    add_trait = {
                        trait = guardian_of_harmony_army
                    }
                }
                every_navy_leader = {
                    add_trait = {
                        trait = guardian_of_harmony_navy
                    }
                }
                set_country_flag = FLY_completed_FLY_the_spirit_of_civil_defense_cw
            }
        }
    }

    shared_focus = {
        id = FLY_art_of_dress
        icon = GFX_goal_FLY_art_of_dress
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_studying_war }
        available = {
            has_character = EQS_rarity
        }
        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_art_of_dress"
            if = {
                limit = {
                    NOT = {
                        has_tech = infantry_acclimatization
                    }
                }
                set_technology = {
                    infantry_acclimatization = 1
                }
                add_tech_bonus = {
                    name = infantry_bonus
                    bonus = 1.0
                    uses = 1
                    technology = night_vision
                    technology = night_vision2
                    technology = infantry_comms
                }
            }
            else = {
                add_tech_bonus = {
                    name = infantry_bonus
                    bonus = 1.0
                    uses = 2
                    technology = night_vision
                    technology = night_vision2
                    technology = infantry_comms
                }
            }
        }
    }
    
    shared_focus = {
        id = FLY_wrath_of_common_ponies
        icon = GFX_goal_FLY_wrath_of_common_ponies
        cost = 3
        x = 3
        y = 1
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_studying_war }
        mutually_exclusive = { focus = FLY_in_lockstep_for_harmony }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_wrath_of_common_ponies"
            add_ideas = FLY_militias_idea
        }
    }
    
    shared_focus = {
        id = FLY_together_with_our_friends
        icon = GFX_goal_FLY_together_with_our_friends
        cost = 3
        x = -1
        y = 1
        relative_position_id = FLY_wrath_of_common_ponies

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wrath_of_common_ponies }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_together_with_our_friends"
            swap_ideas = {
                remove_idea = FLY_militias_idea
                add_idea = FLY_militias_idea_expanded
            }
        }
    }

    shared_focus = {
        id = FLY_in_lockstep_for_harmony
        icon = GFX_goal_FLY_in_lockstep_for_harmony
        cost = 3
        x = 5
        y = 1
        relative_position_id = FLY_studying_war

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_studying_war }
        mutually_exclusive = { focus = FLY_wrath_of_common_ponies }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_in_lockstep_for_harmony"
            add_ideas = FLY_army_idea
        }
    }

    shared_focus = {
        id = FLY_starlight_doctrine_cw
        icon = GFX_goal_FLY_starlight_doctrine
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_wrath_of_common_ponies

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wrath_of_common_ponies focus = FLY_in_lockstep_for_harmony }
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_50_legitimacy_req
                check_variable = { FLY_legitimacy > 49 }
            }
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_starlight_doctrine_cw"
            custom_effect_tooltip = FLY_similar_focus_bypass_later_tp
            add_ideas = FLY_starlight_doctrine_idea
            set_country_flag = FLY_completed_FLY_starlight_doctrine_cw
        }
    }
        
    shared_focus = {
        id = FLY_planning_plans
        icon = GFX_goal_FLY_planning_plans
        cost = 3
        x = 1
        y = 1
        relative_position_id = FLY_in_lockstep_for_harmony

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_in_lockstep_for_harmony }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_planning_plans"
            swap_ideas = {
                remove_idea = FLY_army_idea
                add_idea = FLY_army_idea_expanded
            }
        }
    }
    
    shared_focus = {
        id = FLY_caring_for_everypony
        icon = GFX_goal_FLY_caring_for_everypony
        cost = 3
        x = 7
        y = 1
        relative_position_id = FLY_to_defend_equestria

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_to_defend_equestria }
        available = {
            has_character = EQS_fluttershy
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_caring_for_everypony"
            add_tech_bonus = {
                name = support_tech
                bonus = 1
                uses = 2
                category = hospital_tech
            }
            add_ideas = FLY_mop
        }
    }

### POST-CIVIL WAR FOCUS TREE ###

    ### Rebuilding & Congress -tree

        shared_focus = {
            id = FLY_equestrian_republic
            icon = GFX_goal_FLY_assume_mantle_equestria
            cost = 1
            x = 10
            y = 0

            ai_will_do = {
                factor = 10
            }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_equestrian_republic"
            }
        }

    ### Civil Defence Force tree

        shared_focus = {
            id = FLY_equestrian_civil_defence_force
            icon = GFX_goal_unknown
            cost = 5
            x = -10
            y = 1

            ai_will_do = {
                factor = 10
            }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_equestrian_civil_defence_force"
                FLY_set_starting_civil_defence_force_modifier = yes
                if = {
                    limit = {
                        OR = {
                            has_idea = FLY_air_cas_idea
                            has_idea = FLY_air_bomber_idea
                            has_idea = FLY_special_pegasi_force_idea
                            has_idea = FLY_starlight_doctrine_idea
                        }
                    }
                    custom_effect_tooltip = FLY_unite_cw_military_ideas_tp
                    hidden_effect = {
                        if = {
                            limit = {
                                has_idea = FLY_air_cas_idea
                            }
                            FLY_civil_defence_force_victorian_desurper = yes
                        }
                        if = {
                            limit = {
                                has_idea = FLY_air_bomber_idea
                            }
                            FLY_civil_defence_force_exitium_desurper = yes
                        }
                        if = {
                            limit = {
                                has_idea = FLY_special_pegasi_force_idea
                            }
                            FLY_civil_defence_force_join_the_sps = yes
                        }
                        if = {
                            limit = {
                                has_idea = FLY_starlight_doctrine_idea
                            }
                            FLY_civil_defence_force_starlight_doctrine = yes
                        }
                    }
                }
                add_timed_idea ={
                    idea = FLY_establishment_of_civil_force
                    days = 200
                }
                hidden_effect = {
                    if = {
                        limit = {
                            has_country_flag = FLY_completed_FLY_the_spirit_of_civil_defense_cw
                        }
                        unlock_national_focus = FLY_the_spirit_of_civil_defense
                    }
                }
            }
        }

        shared_focus = {
            id = FLY_air_defence_force
            icon = GFX_goal_unknown
            cost = 5
            x = -11
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_air_defence_force"
                add_doctrine_cost_reduction = {
                    name = air_doc_bonus
                    cost_reduction = 0.5
                    uses = 2
                    category = air_doctrine
                }
                if = {
                    limit = {
                        OR = {
                            has_country_flag = FLY_completed_FLY_victorian_desurper_cw
                            has_country_flag = FLY_completed_FLY_exitium_desurper_cw
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = FLY_completed_FLY_victorian_desurper_cw
                        }
                        unlock_national_focus = FLY_victorian_desurper
                    }
                    else = {
                        unlock_national_focus = FLY_exitium_desurper
                    }
                }
            }
        }

        shared_focus = {
            id = FLY_victorian_desurper
            icon = GFX_goal_FLY_victorian_desurper
            cost = 5
            x = -3
            y = 1
            relative_position_id = FLY_air_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_air_defence_force }
            mutually_exclusive = { focus = FLY_exitium_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_victorian_desurper"
                FLY_civil_defence_force_victorian_desurper = yes
            }
        }
        
        shared_focus = {
            id = FLY_absoluta_victoria
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_victorian_desurper

            ai_will_do = {
                factor = 5
            }

            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_has_researched_8_air_doctrines
                    OR = {
                        has_tech = massed_bomber_formations
                        has_tech = air_offense
                        has_tech = naval_strike_torpedo_tactics
                        has_tech = naval_strike_torpedo_tactics_oi
                        has_tech = infiltration_bombing
                    }
                }
            }

            prerequisite = { focus = FLY_victorian_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_absoluta_victoria"
                FLY_civil_defence_force_absoluta_victoria = yes
            }
        }

        shared_focus = {
            id = FLY_new_generation_aircraft
            icon = GFX_goal_FLY_embrace_the_featherbrains
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_victorian_desurper

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_victorian_desurper focus = FLY_exitium_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_new_generation_aircraft"
                add_tech_bonus = {
                    name = light_air
                    bonus = 1
                    uses = 1
                    ahead_reduction = 2
                    category = light_air
                    category = medium_air
                }
                add_tech_bonus = {
                    name = medium_air
                    bonus = 1
                    uses = 1
                    ahead_reduction = 2
                    category = medium_air
                }
                add_tech_bonus = {
                    name = bomber_bonus
                    bonus = 1
                    uses = 1
                    ahead_reduction = 2
                    category = heavy_air
                }
            }
        }

        shared_focus = {
            id = FLY_jet_research
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_new_generation_aircraft

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_new_generation_aircraft }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_jet_research"
                add_tech_bonus = {
                    name = jet_bonus
                    bonus = 1.0
                    uses = 1
                    category = jet_technology
                }
                add_breakthrough_progress = {
                    specialization = specialization_air
                    value = 1
                }
            }
        }

        shared_focus = {
            id = FLY_jet_intercontinental_bomber_project
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_jet_research

            ai_will_do = {
                factor = 5
            }

            available = {
                has_tech = jet_engines
            }

            prerequisite = { focus = FLY_jet_research }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_jet_research"
                ### add unique special project for a jet multirole plane frame
                ### lore wise RD's pet project of building "the awesome-est, best bomber ever"
            }
        }

        shared_focus = {
            id = FLY_jet_multirole_project
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_jet_research

            ai_will_do = {
                factor = 5
            }

            available = {
                has_tech = jet_engines
            }

            prerequisite = { focus = FLY_jet_research }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_jet_research"
                ### add unique special project for a jet multirole plane frame
                ### lore wise RD's pet project of building "the fastest, best fighter ever"
            }
        }

        shared_focus = {
            id = FLY_exitium_desurper
            icon = GFX_goal_FLY_exitium_desurper
            cost = 5
            x = 3
            y = 1
            relative_position_id = FLY_air_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_air_defence_force }
            mutually_exclusive = { focus = FLY_victorian_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_exitium_desurper"
                FLY_civil_defence_force_exitium_desurper = yes
            }
        }

        shared_focus = {
            id = FLY_rainbow_dash_leadership
            icon = GFX_goal_FLY_altius_volantis
            cost = 5
            x = -3
            y = 1
            relative_position_id = FLY_exitium_desurper

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_victorian_desurper focus = FLY_exitium_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_rainbow_dash_leadership"
                ### upgrade RD's chief of airforce trait
            }
        }
        
        shared_focus = {
            id = FLY_dare_to_fly_attitude
            icon = GFX_goal_FLY_wings_of_liberty
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_new_generation_aircraft

            ai_will_do = {
                factor = 5
            }

            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_rd_prison_escape_memories_tp
                    NOT = {
                        has_country_flag = FLY_rd_memory_of_dead_cadet
                    }
                }
            }

            prerequisite = { focus = FLY_new_generation_aircraft }
            prerequisite = { focus = FLY_rainbow_dash_leadership }
            mutually_exclusive = { focus = FLY_no_recklessness }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_dare_to_fly_attitude"
                ### modify army modifier
            }
        }

        shared_focus = {
            id = FLY_air_academy
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_exitium_desurper

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_victorian_desurper focus = FLY_exitium_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_air_academy"
                air_experience = 75
                ### upgrade air MIOS
                ### add unique aces
            }
        }
        
        shared_focus = {
            id = FLY_no_recklessness
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_rainbow_dash_leadership

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_rainbow_dash_leadership }
            prerequisite = { focus = FLY_air_academy }
            mutually_exclusive = { focus = FLY_dare_to_fly_attitude }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_rainbow_dash_leadership"
                ### modify army modifier
            }
        }

        shared_focus = {
            id = FLY_fortirer_volantis
            icon = GFX_goal_FLY_fires_of_liberation
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_dare_to_fly_attitude

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_dare_to_fly_attitude focus = FLY_no_recklessness }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_fortirer_volantis"
                add_doctrine_cost_reduction = {
                    name = air_doc_bonus
                    cost_reduction = 0.75
                    uses = 3
                    category = air_doctrine
                }
            }
        }

        shared_focus = {
            id = FLY_nara #National Aeronautics Research Administration
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_air_academy

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_air_academy }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_nara"
                ### air facility
                ### new high command advisor
            }
        }

        shared_focus = {
            id = FLY_missile_project
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_nara

            ai_will_do = {
                factor = 5
            }

            available = {
                has_tech = experimental_rockets
            }

            prerequisite = { focus = FLY_nara }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_missile_project"
                add_breakthrough_progress = {
                    specialization = specialization_air
                    value = 2
                }
            }
        }

        shared_focus = {
            id = FLY_helicopter_adoption
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_nara

            ai_will_do = {
                factor = 5
            }

            available = {
                is_special_project_completed = sp:sp_air_axial_jet_engine
                is_special_project_completed = sp:sp_air_helicopter
            }

            prerequisite = { focus = FLY_nara }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_helicopter_adoption"
                ### add helicopter MIO
                add_tech_bonus = {
                    name = helicopter_research
                    bonus = 1.5
                    uses = 3
                    category = helicopter_tech
                }
            }
        }

        shared_focus = {
            id = FLY_ultima_exitium
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_exitium_desurper

            ai_will_do = {
                factor = 5
            }

            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_has_researched_8_air_doctrines
                    OR = {
                        has_tech = massed_bomber_formations
                        has_tech = air_offense
                        has_tech = naval_strike_torpedo_tactics
                        has_tech = naval_strike_torpedo_tactics_oi
                        has_tech = infiltration_bombing
                    }
                }
            }

            prerequisite = { focus = FLY_exitium_desurper }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_jet_research"
                FLY_civil_defence_force_exitium_desurper = yes
            }
        }

        shared_focus = {
            id = FLY_electronic_warfare
            icon = GFX_goal_unknown
            cost = 5
            x = -5
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_electronic_warfare"
                add_tech_bonus = {
                    name = electronics_bonus
                    bonus = 1.5
                    uses = 1
                    category = electronics
                }
                add_breakthrough_progress = {
                    specialization = specialization_air
                    value = 1
                }
                add_breakthrough_progress = {
                    specialization = specialization_naval
                    value = 1
                }
            }
        }

        shared_focus = {
            id = FLY_radio_breakthrough
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_electronic_warfare

            available = {
                has_tech = radio
            }

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_electronic_warfare }
            mutually_exclusive = { focus = FLY_radar_breakthrough }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_radio_breakthrough"
                add_tech_bonus = {
                    name = radio_research
                    bonus = 1
                    uses = 2
                    ahead_reduction = 2
                    technology = improved_radio
                    technology = advanced_radio
                    technology = semi_modern_radio
                    technology = modern_radio
                }
            }
        }

        shared_focus = {
            id = FLY_radar_breakthrough
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_electronic_warfare

            available = {
                has_tech = radio_detection
            }

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_electronic_warfare }
            mutually_exclusive = { focus = FLY_radio_breakthrough }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_radar_breakthrough"
                add_tech_bonus = {
                    name = radar_bonus
                    bonus = 1
                    uses = 2
                    ahead_reduction = 2
                    category = radar_tech
                }
            }
        }
        
        shared_focus = {
            id = FLY_nuclear_research
            icon = GFX_goal_unknown
            cost = 5
            x = -3
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            available = {
                has_tech = atomic_research
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }


            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_nuclear_research"
                ### add nuclear scientist
                custom_effect_tooltip = {
                    localization_key = nuclear_facility_construction_tt
                    temp_facility_state_loc = "[107.GetName]"
                    temp_facility_province_loc = "[107.GetCapitalVictoryPointName]"
                }
                hidden_effect = {
                    if = {
                        limit = { 
                            107 = {
                                is_fully_controlled_by = ROOT
                                can_construct_building = nuclear_facility
                            }
                        }
                        107 = {
                            add_building_construction = {
                                type = nuclear_facility
                                level = 1
                                instant_build = yes
                                province = 6936
                            }
                        }
                    }
                }
                add_breakthrough_progress = {
                    specialization = specialization_nuclear
                    value = 1.5
                }
            }
        }

        shared_focus = {
            id = FLY_equipment_stockpiles
            icon = GFX_goal_FLY_secure_garrisons
            cost = 3
            x = -1
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_equipment_stockpiles"
                add_equipment_to_stockpile = {
                    type = infantry_equipment
                    amount = 2000
                }
                add_tech_bonus = {
                    name = infantry_weapons_bonus
                    bonus = 0.5
                    uses = 1
                    category = infantry_weapons
                }
                add_equipment_to_stockpile = {
                    type = support_equipment
                    amount = 600
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 0.5
                    uses = 1
                    category = support_tech
                }
                add_equipment_to_stockpile = {
                    type = artillery_equipment
                    amount = 220
                }
                add_tech_bonus = {
                    name = artillery_bonus
                    bonus = 0.5
                    uses = 1
                    category = artillery
                }
            }
        }

        shared_focus = {
            id = FLY_professional_leadership
            icon = GFX_goal_FLY_planning_plans
            cost = 3
            x = 1
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_professional_leadership"
                custom_effect_tooltip = FLY_enable_editing_militia_tp
                set_division_template_lock = {
                    division_template = "Militia Brigade"
                    is_locked = no
                }
                custom_effect_tooltip = generals_half_of_the_level_tp
                hidden_effect = {
                    every_unit_leader = { 
                        if = { 
                            limit = { skill > 4 }
                            gain_xp = 1250
                        }
                        else_if = {
                            limit = { skill > 3 }
                            gain_xp = 750
                        }
                        else_if = {
                            limit = { skill > 2 }
                            gain_xp = 500
                        }
                        else_if = {
                            limit = { skill > 1 }
                            gain_xp = 250
                        }
                        else = {
                            gain_xp = 150
                        }
                    }
                }
            }
        }

        shared_focus = {
            id = FLY_land_defence_force
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_equipment_stockpiles

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equipment_stockpiles }
            prerequisite = { focus = FLY_professional_leadership }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_professional_leadership"
                #### modify dynamic modifier
            }
        }

        shared_focus = {
            id = FLY_magic_makes_us_strong
            icon = GFX_goal_FLY_warfare_is_magic
            cost = 5
            x = -3
            y = 1
            relative_position_id = FLY_land_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_land_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_magic_makes_us_strong"
                if = {
                    limit = {
                        OR = {
                            has_country_flag = FLY_completed_FLY_join_the_ses_cw
                            has_country_flag = FLY_completed_FLY_join_the_sps_cw
                            has_country_flag = FLY_completed_FLY_join_the_sus_cw
                        }
                    }
                    if = {
                        limit = {
                            has_country_flag = FLY_completed_FLY_join_the_ses_cw
                        }
                        unlock_national_focus = FLY_join_the_ses
                    }
                    if = {
                        limit = {
                            has_country_flag = FLY_completed_FLY_join_the_sps_cw
                        }
                        unlock_national_focus = FLY_join_the_sps
                    }
                    if = {
                        limit = {
                            has_country_flag = FLY_completed_FLY_join_the_sus_cw
                        }
                        unlock_national_focus = FLY_join_the_sus
                    }
                }
            }
        }

        shared_focus = {
            id = FLY_join_the_ses
            icon = GFX_goal_FLY_join_the_ses
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_magic_makes_us_strong

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_magic_makes_us_strong }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_ses"
                set_technology = {
                    FLY_special_earth_pony_service_tech = 1
                    popup = no
                }
                custom_effect_tooltip = FLY_special_earth_pony_service_gain_tp
                FLY_cheerilee = {
                    add_corps_commander_role = {
                        desc = FLY_cheerilee_desc
                        traits = { pony_race_trait experienced_fighter armor_officer }
                        skill = 3
                        attack_skill = 4
                        defense_skill = 1
                        planning_skill = 4
                        logistics_skill = 2
                        legacy_id = -1
                    }
                }
                custom_effect_tooltip = FLY_cheerilee_stats_tp
                FLY_redheart = {
                    add_corps_commander_role = {
                        desc = FLY_redheart_desc
                        traits = { pony_race_trait medical_expert skilled_staffer }
                        skill = 3
                        attack_skill = 2
                        defense_skill = 2
                        planning_skill = 3
                        logistics_skill = 3
                        legacy_id = -1
                    }
                }
                custom_effect_tooltip = FLY_redheart_stats_tp
            }
        }

        shared_focus = {
            id = FLY_join_the_sps
            icon = GFX_goal_FLY_join_the_sps
            cost = 5
            x = 0
            y = 2
            relative_position_id = FLY_magic_makes_us_strong

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_magic_makes_us_strong }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_sps"
                FLY_civil_defence_force_join_the_sps = yes
            }
        }

        shared_focus = {
            id = FLY_join_the_sus
            icon = GFX_goal_FLY_join_the_sus
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_magic_makes_us_strong

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_magic_makes_us_strong }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_join_the_sus"
                set_technology = {
                    FLY_special_unicorn_service_tech = 1
                    popup = no
                }
                custom_effect_tooltip = FLY_special_unicorn_service_tech_gain_tp
                FLY_stygian = {
                    add_corps_commander_role = {
                        desc = FLY_stygian_desc
                        traits = { pony_race_trait armchair_general artillery_officer }
                        skill = 3
                        attack_skill = 2
                        defense_skill = 4
                        planning_skill = 3
                        logistics_skill = 1
                        legacy_id = -1
                    }
                }
                custom_effect_tooltip = FLY_stygian_stats_tp
            }
        }

        shared_focus = {
            id = FLY_embrace_motorized_war
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_land_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_land_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_embrace_motorized_war"
                add_equipment_to_stockpile = {
                    type = motorized_equipment
                    amount = 1200
                }
                three_random_arms_factory = yes
            }
        }

        shared_focus = {
            id = FLY_tank_development
            icon = GFX_goal_FLY_civil_war_tank
            cost = 5
            x = 0
            y = 2
            relative_position_id = FLY_embrace_motorized_war

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_embrace_motorized_war }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_tank_development"
                ### upgrade tank MIOs
                ### add project breakthrough progress?
                add_tech_bonus = {
                    name = armor_bonus
                    bonus = 1.0
                    uses = 2
                    ahead_reduction = 2
                    category = armor
                }
            }
        }

        shared_focus = {
            id = FLY_mechanized_warfare
            icon = GFX_goal_FLY_apc_or_ifv
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_embrace_motorized_war

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_embrace_motorized_war }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_mechanized_warfare"
                ### upgrade mech MIOs
                ### add project breakthrough progress?
                add_tech_bonus = {
                    name = mech_bonus
                    bonus = 1.0
                    uses = 2
                    ahead_reduction = 2
                    category = cat_mechanized_equipment
                }
            }
        }

        shared_focus = {
            id = FLY_regional_militia_formations
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_land_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_land_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_regional_militia_formations"
                #### modify dynamic modifier
            }
        }

        shared_focus = {
            id = FLY_octagon ### Pentagon joke reference
            icon = GFX_goal_unknown
            cost = 5
            x = 3
            y = 1
            relative_position_id = FLY_land_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_land_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_octagon"
                add_doctrine_cost_reduction = {
                    name = land_doc_bonus
                    cost_reduction = 0.75
                    uses = 2
                    category = land_doctrine
                }
                if = {
                    limit = {
                        has_country_flag = FLY_completed_FLY_starlight_doctrine_cw
                    }
                    unlock_national_focus = FLY_starlight_doctrine
                }
            }
        }

        shared_focus = {
            id = FLY_starlight_doctrine
            icon = GFX_goal_FLY_starlight_doctrine
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_octagon

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_octagon }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_starlight_doctrine"
                FLY_civil_defence_force_starlight_doctrine = yes
            }
        }

        shared_focus = {
            id = FLY_next_generation_battle_rifle
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_starlight_doctrine

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_starlight_doctrine }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_next_generation_battle_rifle"
                add_tech_bonus = {
                    name = infantry_weapons_bonus
                    bonus = 1.5
                    uses = 2
                    ahead_reduction = 2
                    technology = infantry_weapons2
                    technology = improved_infantry_weapons
                    technology = improved_infantry_weapons_2
                    technology = advanced_infantry_weapons
                    technology = advanced_infantry_weapons2
                    technology = advanced_infantry_weapons_a
                    technology = advanced_infantry_weapons_b
                    technology = advanced_infantry_weapons_c
                    technology = advanced_infantry_weapons_d
                    technology = advanced_infantry_weapons_b
                }
                add_tech_bonus = {
                    name = infantry_weapons_bonus
                    bonus = 1.5
                    uses = 2
                    ahead_reduction = 2
                    technology = magical_weapons
                    technology = magical_weapons1
                    technology = magical_weapons3
                    technology = advanced_infantry_weapons
                    technology = advanced_infantry_weapons2
                    technology = advanced_infantry_weapons_a
                    technology = advanced_infantry_weapons_b
                    technology = advanced_infantry_weapons_c
                    technology = advanced_infantry_weapons_d
                    technology = advanced_infantry_weapons_b
                }
            }
        }

        shared_focus = {
            id = FLY_diversified_support
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_starlight_doctrine

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_starlight_doctrine }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_diversified_support"
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = engineers_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = recon_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = military_police_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = maintenance_company_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = hospital_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = logistics_tech
                }
                add_tech_bonus = {
                    name = support_bonus
                    bonus = 1.0
                    uses = 1
                    category = signal_company_tech
                }
            }
        }

        shared_focus = {
            id = FLY_national_defence_academy
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_octagon

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_octagon }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_national_defence_academy"
                ### add new commanders (+event revolving around AW: Dual Strike cameos)
                ### add +1 planning to all navy commanders + modify modifier
            }
        }

        shared_focus = {
            id = FLY_the_spirit_of_civil_defense
            icon = GFX_goal_FLY_the_spirit_of_civil_defense
            cost = 5
            x = 3
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }
            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_has_researched_4_land_doctrines
                    OR = {
                        OR = {
                            has_tech = mobile_infantry
                            has_tech = armored_spearhead
                        }
                        OR = {
                            has_tech = dispersed_support
                            has_tech = intergrated_support
                        }
                        has_tech = grand_assault
                        OR = {
                            has_tech = large_front_operations
                            has_tech = peoples_army
                        }
                    }
                }
            }
            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_the_spirit_of_civil_defense"
                custom_effect_tooltip = FLY_commander_admiral_trait_tp
                hidden_effect = {
                    every_army_leader = {
                        add_trait = {
                            trait = guardian_of_harmony_army
                        }
                    }
                    every_navy_leader = {
                        add_trait = {
                            trait = guardian_of_harmony_navy
                        }
                    }
                }
            }
        }

        shared_focus = {
            id = FLY_defence_industry_cooperation
            icon = GFX_goal_unknown
            cost = 5
            x = 5
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }
            available = {
                has_completed_focus = FLY_air_defence_force
                has_completed_focus = FLY_land_defence_force
                has_completed_focus = FLY_naval_defence_force

            }
            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_defence_industry_cooperation"
                add_research_slot = 1
            }
        }

        shared_focus = {
            id = FLY_military_industrial_complex
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_defence_industry_cooperation

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_defence_industry_cooperation }
            mutually_exclusive = { focus = FLY_usage_in_peace }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_military_industrial_complex"
                ### add mils & docks
                ### project breakthroughs?
            }
        }

        shared_focus = {
            id = FLY_usage_in_peace
            icon = GFX_goal_unknown
            cost = 5
            x = 1
            y = 1
            relative_position_id = FLY_defence_industry_cooperation

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_defence_industry_cooperation }
            mutually_exclusive = { focus = FLY_military_industrial_complex }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_usage_in_peace"
                ### research speed + consumer goods bonus?
                ### improves industrial recovery
            }
        }

        shared_focus = {
            id = FLY_naval_defence_force
            icon = GFX_goal_unknown
            cost = 5
            x = 11
            y = 1
            relative_position_id = FLY_equestrian_civil_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_equestrian_civil_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_naval_defence_force"
                ### add admirals from background ponies that fit
            }
        }

        shared_focus = {
            id = FLY_ships_for_navy
            icon = GFX_goal_unknown
            cost = 5
            x = -1
            y = 1
            relative_position_id = FLY_naval_defence_force

            ai_will_do = {
                factor = 5
            }

            prerequisite = { focus = FLY_naval_defence_force }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_ships_for_navy"
                ### add ships and decisions to aquire ships
            }
        }

    ### Faction-Diplomacy tree

        shared_focus = {
            id = FLY_reunify_equestria
            icon = GFX_goal_unknown
            cost = 5
            x = 20
            y = 1

            ai_will_do = {
                factor = 10
            }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_reunify_equestria"
                custom_effect_tooltip = FLY_unlock_unification_decisions_tp
                add_war_support = 0.1
            }
        }

        shared_focus = {
            id = FLY_reform_accord
            icon = GFX_goal_unknown
            cost = 5
            x = 0
            y = 3
            relative_position_id = FLY_reunify_equestria

            ai_will_do = {
                factor = 5
            }

            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_control_equestrian_south_tp
                }
            }

            prerequisite = { focus = FLY_reunify_equestria }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_reform_accord"
                set_rule = { can_create_factions = yes }
                create_faction = FLY_accord
                hidden_effect = {
                    news_event = { id = fillydelphia_news.4 }
                }
            }
        }

        shared_focus = {
            id = FLY_accord_fights_for_freedom
            icon = GFX_goal_unknown
            cost = 5
            x = -2
            y = 1
            relative_position_id = FLY_reform_accord

            ai_will_do = {
                factor = 5
            }

            available = {
                custom_trigger_tooltip = {
                    tooltip = FLY_leads_harmonic_accord
                    ROOT = {
                        is_faction_leader = yes
                    }
                }
            }

            prerequisite = { focus = FLY_reform_accord }

            cancel_if_invalid = yes

            completion_reward = {
                log = "[GetDateText]: [Root.GetName]: Focus FLY_reform_accord"
                
            }
        }