focus_tree = {
    id = FLY_wartime_tree
    country = {
        factor = 0
        modifier = {
            add = 20
            has_country_flag = FLY_filldelphia
        }
    }
    default = no
    continuous_focus_position = { x = 2000 y = 0 }
    shared_focus = FLY_birth_of_republic
}

### STARTING FOCUS TREE ###

    shared_focus = {
        id = FLY_birth_of_republic
        icon = GFX_goal_FLY_birth_of_republic
        cost = 1
        x = 10
        y = 0

        ai_will_do = {
            factor = 10
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_birth_of_republic"
            custom_effect_tooltip = FLY_start_focus_tp
        }
    }

    shared_focus = {
        id = FLY_fillydelphia_soldiers
        icon = GFX_goal_FLY_fillydelphia_soldiers
        cost = 2
        x = -3
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fillydelphia_soldiers"
            custom_effect_tooltip = FLY_fillydelphia_soldiers_tp
            hidden_effect = {
                load_oob = "FLY_ex_eup"
            }
        }
    }

    shared_focus = {
        id = FLY_secure_garrisons
        icon = GFX_goal_FLY_secure_garrisons
        cost = 2
        x = -1
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_secure_garrisons"
            add_equipment_to_stockpile = {
                type = infantry_equipment_1
                amount = 800
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = infantry_equipment_0
                amount = 1200
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = artillery_equipment
                amount = 200
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = support_equipment
                amount = 120
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = 150
                producer = EQS
            }
            add_equipment_to_stockpile = {
                type = train_equipment
                amount = 10
                producer = EQS
            }
        }
    }
    
    shared_focus = {
        id = FLY_war_effort
        icon = GFX_goal_FLY_war_effort
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_fillydelphia_soldiers

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_soldiers focus = FLY_secure_garrisons }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_war_effort"
            add_ideas = FLY_industrial_war_effort
        }
    }
        
    shared_focus = {
        id = FLY_starlight_glimmer
        icon = GFX_goal_unknown
        cost = 1
        x = 0
        y = 2
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_convince_ponies"
            custom_effect_tooltip = FLY_starlight_glimmer_recruited_tp
            custom_effect_tooltip = FLY_starlight_glimmer_stats_tp
            hidden_effect = {
                every_possible_country = {
					limit = {
						has_character = EQS_starlight_glimmer
					}
					EQS_starlight_glimmer = {
						set_nationality = PREV.PREV
					}
				}
                add_field_marshal_role = {
                    character = EQS_starlight_glimmer
                    traits = { pony_race_trait trait_talented_coordinator thorough_planner organizer }
                    skill = 4
                    attack_skill = 2
                    defense_skill = 2
                    planning_skill = 5
                    logistics_skill = 4
                    legacy_id = 339110
                    desc = EQS_starlight_glimmer_desc
                }
            }
            hidden_effect = {
                country_event = { id = fillydelphia_manesix.1 }
            }
        }
    }

    shared_focus = {
        id = FLY_hope_speech
        icon = GFX_goal_FLY_hope_speech
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_hope_speech"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            add_stability = 0.1
            add_political_power = 300
        }
    }
                    
    shared_focus = {
        id = FLY_cause_speech
        icon = GFX_goal_FLY_cause_speech
        cost = 2
        x = 3
        y = 1
        relative_position_id = FLY_birth_of_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_birth_of_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_cause_speech"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            add_war_support = 0.1
            add_manpower = 45000
        }
    }
            
    shared_focus = {
        id = FLY_return_of_friendship
        icon = GFX_goal_FLY_return_of_friendship
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_hope_speech

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_hope_speech focus = FLY_cause_speech }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_return_of_friendship"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
            add_ideas = FLY_keepers_friendship
        }
    }
                            
    shared_focus = {
        id = FLY_convince_ponies
        icon = GFX_goal_FLY_convince_ponies
        cost = 1
        x = -1
        y = 1
        relative_position_id = FLY_starlight_glimmer

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_war_effort }
        prerequisite = { focus = FLY_starlight_glimmer }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_convince_ponies"
            custom_effect_tooltip = FLY_unlock_legitimacy_continuous_focus
            set_country_flag = FLY_unlocked_continuous_focus
            set_variable = {
                var = FLY_continuous_legitimacy_raise_cap
                value = 50
            }
        }
    }

    shared_focus = {
        id = FLY_topple_tyranny
        icon = GFX_goal_FLY_topple_tyranny
        cost = 1
        x = 1
        y = 1
        relative_position_id = FLY_starlight_glimmer

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_starlight_glimmer }
        prerequisite = { focus = FLY_return_of_friendship }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_topple_tyranny"
            add_ideas = FLY_equestria_still_lives
        }
    }
    
    shared_focus = {
        id = FLY_declare_republic
        icon = GFX_goal_FLY_declare_republic
        cost = 2
        x = 1
        y = 1
        relative_position_id = FLY_convince_ponies
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_25_legitimacy_req
                check_variable = { FLY_legitimacy > 24 }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_convince_ponies }
        prerequisite = { focus = FLY_topple_tyranny }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_topple_tyranny"
            effect_tooltip = {
                set_cosmetic_tag = EQS_FLY_organised_1
            }
            custom_effect_tooltip = FLY_can_core_tp
            hidden_effect = {
                country_event = fillydelphia_civil.3
            }
        }
    }

    shared_focus = {
        id = FLY_generosity 
        icon = GFX_goal_FLY_generosity 
        cost = 1
        x = 1
        y = 1
        relative_position_id = FLY_loyalty
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_generosity_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_loyalty }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_generosity"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }

    shared_focus = {
        id = FLY_loyalty
        icon = GFX_goal_FLY_loyalty
        cost = 1
        x = -1
        y = 1
        relative_position_id = FLY_laughter
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_loyalty_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_laughter }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_loyalty"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }

    shared_focus = {
        id = FLY_laughter
        icon = GFX_goal_FLY_laughter
        cost = 1
        x = -7
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_laughter_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_laughter"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }

    shared_focus = {
        id = FLY_honesty
        icon = GFX_goal_FLY_honesty
        cost = 1
        x = -5
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_honesty_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_honesty"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }

    shared_focus = {
        id = FLY_kindness
        icon = GFX_goal_FLY_kindness
        cost = 1
        x = 1
        y = 1
        relative_position_id = FLY_honesty
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_kindness_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_honesty }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_kindness"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }

    shared_focus = {
        id = FLY_magic
        icon = GFX_goal_FLY_magic
        cost = 1
        x = -1
        y = 1
        relative_position_id = FLY_kindness
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_magic_tp
                always = no
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_kindness }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_magic"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
        }
    }
    
    shared_focus = {
        id = FLY_unity
        icon = GFX_goal_FLY_unity
        cost = 2
        x = 1
        y = 3
        relative_position_id = FLY_laughter

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_honesty focus = FLY_kindness focus = FLY_laughter focus = FLY_generosity focus = FLY_loyalty focus = FLY_magic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_unity"
            set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_increase_max_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy_max = FLY_legitimacy_temp
            }
            custom_effect_tooltip = FLY_starlight_unity_tp
            hidden_effect = {
                EQS_starlight_glimmer = {
                    gain_xp = 1250
                    add_attack = 1
                    add_defense = 1
                    add_logistics = 1
                    add_planning = 1
                }
            }
        }
    }

    shared_focus = {
        id = FLY_vanhoover_operation
        icon = GFX_goal_FLY_vanhoover_operation
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            NOT = {
                14 = {
                    is_controlled_by = CHN
                }
            }
        }
        bypass = {
            14 = {
                OR = {
                    is_controlled_by_ROOT_or_ally = yes
                    is_controlled_by_ROOT_or_subject = yes
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancelable = no
        cancel_if_invalid = yes

        select_effect = {
            14 = {
                controller = {
                    if = {
                        limit = {
                            is_ai = no
                        }
                        #country event warning about Vanhoover movement
                    }
                }
            }
        }

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_vanhoover_operation"
            custom_effect_tooltip = FLY_vanhoover_explanation_tp
            hidden_effect = {
                if = {
                    limit = {
                        VAN = {
                            exists = yes
                            any_neighbor_country = {
                                original_tag = EQS
                            }
                        }
                        EQS = {
                            exists = yes
                        }
                    }
                    EQS = {
						annex_country = {
							target = VAN
						}
					}
                }
                else_if = {
                    limit = {
                        VAN = {
                            exists = yes
                            any_neighbor_country = {
                                original_tag = NLR
                            }
                        }
                        NLR = {
                            exists = yes
                        }
                    }
                    NLR = {
						annex_country = {
							target = VAN
						}
					}
                }
                14 = {
                    set_state_controller_to	= FLY
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 2
                        prioritize_location = 585
                        allow_spawning_on_enemy_provs = yes
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 1
                        prioritize_location = 1141
                        allow_spawning_on_enemy_provs = yes
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 1
                        prioritize_location = 1141
                        allow_spawning_on_enemy_provs = yes
                    }
                }
                activate_mission = FLY_vanhoover_defence
            }
        }
    }

    shared_focus = {
        id = FLY_vanhoover_arm_unions
        icon = GFX_goal_FLY_vanhoover_arm_unions
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_vanhoover_operation
        available = {
            14 = {
                OR = {
                    is_controlled_by_ROOT_or_ally = yes
                    is_controlled_by_ROOT_or_subject = yes
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_vanhoover_operation }

        cancelable = no
        cancel_if_invalid = yes

        select_effect = {
            14 = {
                add_province_modifier = {
                    static_modifiers = { FLY_barricades }
                    province = {
                        id = 585
                    }
                }
            }
        }

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_vanhoover_arm_unions"
            add_popularity = { ideology = communism popularity = 0.1 }
            custom_effect_tooltip = FLY_vanhoover_unions_militia_tp
            hidden_effect = {
                14 = {
                    remove_province_modifier = {
                        static_modifiers = { FLY_barricades }
                        province = {
                            id = 585
                        }
                    }
                    create_unit = {
                        division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
                        owner = FLY
                        count = 3
                        prioritize_location = 585
                        allow_spawning_on_enemy_provs = yes
                    }
                }
            }
            custom_effect_tooltip = FLY_vanhoover_arms_unions_tp
            effect_tooltip = {
                14 = {
                    add_province_modifier = {
                        static_modifiers = { FLY_barricades }
                        province = {
                            id = 585
                        }
                    }
                }
            }
        }
    }

    shared_focus = {
        id = FLY_wartime_leader
        icon = GFX_goal_FLY_wartime_leader
        cost = 5
        x = 0
        y = 2
        relative_position_id = FLY_declare_republic
        available = {
            custom_trigger_tooltip = {
                tooltip = FLY_50_legitimacy_req
                check_variable = { FLY_legitimacy > 49 }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_wartime_leader"
            custom_effect_tooltip = FLY_choose_wartime_leader_tp
            hidden_effect = {
                country_event = fillydelphia_civil.4
            }
        }
    }

    shared_focus = {
        id = FLY_extreme_measures
        icon = GFX_goal_FLY_extreme_measures
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_wartime_leader

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_extreme_measures"
            custom_effect_tooltip = FLY_extreme_measures_tp
        }
    }

    shared_focus = {
        id = FLY_assume_mantle_equestria
        icon = GFX_goal_FLY_assume_mantle_equestria
        cost = 5
        x = 0
        y = 2
        relative_position_id = FLY_wartime_leader
        available = {
            OR = {
                custom_trigger_tooltip = {
                    tooltip = FLY_70_legitimacy_req
                    check_variable = { FLY_legitimacy > 69 } # nice
                }
                AND = {
                    OR = {
                        EQS = {
                            exists = no
                        }
                        NLR = {
                            exists = no
                        }
                    }
                    num_of_controlled_states > 24
                    custom_trigger_tooltip = {
                        tooltip = FLY_40_legitimacy_req
                        check_variable = { FLY_legitimacy > 39 }
                    }
                }
                AND = {
                    num_of_controlled_states > 29
                    custom_trigger_tooltip = {
                        tooltip = FLY_50_legitimacy_req
                        check_variable = { FLY_legitimacy > 49 }
                    }
                }
                AND = {
                    EQS = {
                        exists = no
                    }
                    NLR = {
                        exists = no
                    }
                }
            }
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_assume_mantle_equestria"
            effect_tooltip = {
                set_cosmetic_tag = EQS_FLY_republic_1
            }
            custom_effect_tooltip = FLY_get_cores_on_SOL_NLR_tp
            hidden_effect = {
                every_state = {
                    limit = {
                        OR = {
                            any_of_scopes = {
                                array = EQS.core_states
                                NOT = { is_core_of = FLY }
                            }
                            any_of_scopes = {
                                array = NLR.core_states
                                NOT = { is_core_of = FLY }
                            }
                        }
                    }
                    add_core_of = FLY
                }
                if = {
                    limit = {
                        has_cosmetic_tag = EQS_FLY_organised_1
                    }
                    set_cosmetic_tag = EQS_FLY_republic_1
                }
                else_if = {
                    limit = {
                        has_cosmetic_tag = EQS_FLY_organised_2
                    }
                    set_cosmetic_tag = EQS_FLY_republic_2
                }
                else = {
                    set_cosmetic_tag = EQS_FLY_republic_3
                }
            }
        }
    }

    shared_focus = {
        id = FLY_foreign_support
        icon = GFX_goal_FLY_foreign_support
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_wartime_leader

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_wartime_leader}

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_foreign_support"
            every_other_country = {
                limit = {
                    exists = yes
                    NOT = {
                        has_war_with = FLY
                    }
                    OR = {
                        AND = {
                            is_major = yes
                            OR = {
                                has_modern_society = yes
                                has_outdated_industry = yes
                            }
                        }
                        AND = {
                            is_major = no
                            has_government = democratic
                            OR = {
                                has_modern_society = yes
                                has_outdated_industry = yes
                            }
                            any_controlled_state = {
                                is_coastal = yes
                            }
                        }
                    }
                }
                country_event = fillydelphia_civil.5
            }
        }
    }

    shared_focus = {
        id = FLY_changeling_incursion
        icon = GFX_goal_FLY_changeling_incursion
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_declare_republic
        available = {
            has_war_with = CHN
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_changeling_incursion"
            swap_ideas = {
                remove_idea = FLY_equestria_still_lives
                add_idea = FLY_equestria_still_lives_changelings
            }
        }
    }

    shared_focus = {
        id = FLY_arsenal_of_democracy
        icon = GFX_goal_FLY_arsenal_of_democracy
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_changeling_incursion
        available = {
            has_war_with = CHN
        }

        ai_will_do = {
            factor = 5
        }

        prerequisite = {focus = FLY_changeling_incursion }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_arsenal_of_democracy"
            add_ideas = FLY_changeling_cw_production_bonus
        }
    }

    shared_focus = {
        id = FLY_fighter_squadron
        icon = GFX_goal_unknown
        cost = 5
        x = 4
        y = 1
        relative_position_id = FLY_declare_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fighter_squadron"
            if = {
                limit = {
                    12 = {
                        air_base < 1
                    }
                }
                12 = {
                    add_building_construction = {
                        type = air_base
                        level = 1
                        instant_build = yes
                    }
                }
            }
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                if = {
                    limit = {
                        NOT = {
                            has_tech = basic_small_airframe
                        }
                    }
                    set_technology = {
                        basic_small_airframe = 1
                    }
                }
                else = {
                    add_tech_bonus = {
                        name = fighter_bonus
                        bonus = 1
                        uses = 1
                        category = light_air
                    }
                }
                create_equipment_variant = {
                    name = "Hawker Hurricane" 
                    type = small_plane_airframe_1
                    modules = {
                        fixed_main_weapon_slot = light_mg_4x
                        fixed_auxiliary_weapon_slot_1 = light_mg_4x
                        engine_type_slot = engine_2_1x
                        special_type_slot_1 = empty
                    }
                    icon = "GFX_ENG_fighter1_medium"
                }
                custom_effect_tooltip = FLY_hawker_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_airframe_1
                        amount = 100
                        variant_name = "Hawker Hurricane"
                    }
                }
            }
            else = {
                if = {
                    limit = {
                        NOT = {
                            has_tech = fighter1
                        }
                    }
                    set_technology = {
                        fighter1 = 1
                    }
                }
                else = {
                    add_tech_bonus = {
                        name = fighter_bonus
                        bonus = 1.0
                        uses = 1
                        category = light_fighter
                    }
                }
                add_equipment_to_stockpile = { 
                    type = small_plane_airframe 
                    amount = 100 
                    producer = FLY 
                }
            }
        }
    }

    shared_focus = {
        id = FLY_additional_planes
        icon = GFX_goal_unknown
        cost = 5
        x = 0
        y = 2
        relative_position_id = FLY_fighter_squadron

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fighter_squadron }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_additional_planes"
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                custom_effect_tooltip = FLY_hawker_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_airframe_1
                        amount = 100
                        variant_name = "Hawker Hurricane"
                    }
                }
                create_equipment_variant = {
                    name = "Blackburn Skua" 
                    type = small_plane_cas_airframe_1
                    modules = {
                        fixed_main_weapon_slot = bomb_locks
                        fixed_auxiliary_weapon_slot_1 = light_mg_4x
                        engine_type_slot = engine_2_1x
                        special_type_slot_1 = dive_brakes_small
                        special_type_slot_2 = fuel_tanks_small
                    }
                    icon = "GFX_ENG_CAS1_medium"
                }
                custom_effect_tooltip = FLY_blackburn_100_tp
                hidden_effect = {
                    add_equipment_to_stockpile = {
                        type = small_plane_cas_airframe_1
                        amount = 100
                        variant_name = "Blackburn Skua"
                    }
                }
            }
            else = {
                add_equipment_to_stockpile = { 
                    type = small_plane_airframe 
                    amount = 100 
                    producer = FLY
                }
                if = {
                    limit = {
                        NOT = {
                            has_tech = CAS1
                        }
                    }
                    set_technology = {
                        CAS1 = 1
                    }
                }
                add_equipment_to_stockpile = { 
                    type = CAS_equipment_1 
                    amount = 100 
                    producer = FLY
                }
            }
        }
    }

    shared_focus = {
        id = FLY_fires_of_liberation
        icon = GFX_goal_unknown
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_fighter_squadron

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fighter_squadron }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fires_of_liberation"
            add_ideas = FLY_air_warfare_bonus
        }
    }
    
    shared_focus = {
        id = FLY_air_equipment_tech
        icon = GFX_goal_unknown
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_fires_of_liberation

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fires_of_liberation }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_air_equipment_tech"
            air_experience = 50
            if = {
                limit = {
                    has_dlc = "By Blood Alone"
                }
                add_tech_bonus = {
                    name = plane_modules_tech
                    bonus = 0.75
                    uses = 3
                    category = plane_modules_tech
                    ahead_reduction = 2
                }
            }
            else = {
                add_tech_bonus = {
                    name = air_bonus
                    bonus = 1.0
                    uses = 2
                    category = air_equipment
                    ahead_reduction = 2
                }
            }
        }
    }

    shared_focus = {
        id = FLY_revolt_army_reforms
        icon = GFX_goal_unknown
        cost = 5
        x = 10
        y = 1
        relative_position_id = FLY_declare_republic

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_declare_republic }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_revolt_army_reforms"
            add_manpower = 75000
            add_doctrine_cost_reduction = {
                name = land_doc_bonus
                cost_reduction = 0.75
                uses = 2
                category = land_doctrine
            }
        }
    }

    shared_focus = {
        id = FLY_wonderbolts
        icon = GFX_goal_unknown
        cost = 5
        x = -3
        y = 1
        relative_position_id = FLY_revolt_army_reforms

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fighter_squadron focus = FLY_revolt_army_reforms }
        available = {
            OR = {
                has_character = EQS_rainbowdash
                has_character = EQS_soarin
            }
        }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_wonderbolts"
            custom_effect_tooltip = FLY_wonderbolts_tp
            hidden_effect = {
                load_oob = "FLY_wonderbolts"
            }
            add_tech_bonus = {
				name = pegasi
				bonus = 1.0
				uses = 1
				category = pegasi_tech
			}
        }
    }

    shared_focus = {
        id = FLY_equipment_improvements
        icon = GFX_goal_unknown
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_revolt_army_reforms

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_revolt_army_reforms }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_equipment_improvements"
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 1000
                producer = FLY
            }
            add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
        }
    }

    shared_focus = {
        id = FLY_support_tech_bonus
        icon = GFX_goal_unknown
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_equipment_improvements

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_equipment_improvements }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_support_tech_bonus"
            add_equipment_to_stockpile = {
                type = support_equipment
                amount = 175
                producer = FLY
            }
            add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
        }
    }

    shared_focus = {
        id = FLY_fillydelphia_motors
        icon = GFX_goal_unknown
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_revolt_army_reforms

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_revolt_army_reforms }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_fillydelphia_motors"
            if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:EQS_fillydelphia_arms_organization = {
					add_mio_size = 2
					add_mio_funds = 800
				}
			}
            12 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
        }
    }

    shared_focus = {
        id = FLY_army_motorisation
        icon = GFX_goal_unknown
        cost = 5
        x = -1
        y = 1
        relative_position_id = FLY_fillydelphia_motors

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_motors }
        mutually_exclusive = { focus = FLY_motorized_units }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_army_motorisation"
            add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = 600
            }
        }
    }

    shared_focus = {
        id = FLY_motorized_units
        icon = GFX_goal_unknown
        cost = 5
        x = 1
        y = 1
        relative_position_id = FLY_fillydelphia_motors

        ai_will_do = {
            factor = 5
        }

        prerequisite = { focus = FLY_fillydelphia_motors }
        mutually_exclusive = { focus = FLY_army_motorisation }

        cancel_if_invalid = yes

        completion_reward = {
            log = "[GetDateText]: [Root.GetName]: Focus FLY_motorized_units"
            custom_effect_tooltip = FLY_motorized_units_tp
            hidden_effect = {
                load_oob = "FLY_motorized_units"
            }
        }
    }