NCH_miracle_charges = { #requires 1 miracle per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req
		check_variable = { NCH_sunderer_charges > 0 }
	}
}
NCH_miracle_charges_2 = { #requires 2 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_2
		check_variable = { NCH_sunderer_charges > 1 }
	}
}
NCH_miracle_charges_3 = { #requires 3 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_3
		check_variable = { NCH_sunderer_charges > 2 }
	}
}

NCH_miracle_charges_4 = { #requires 4 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_4
		check_variable = { NCH_sunderer_charges > 3 }
	}
}
NCH_miracle_charges_5 = { #requires 5 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_5
		check_variable = { NCH_sunderer_charges > 4 }
	}
}
NCH_miracle_charges_7 = { #requires 7 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_7
		check_variable = { NCH_sunderer_charges > 6 }
	}
}
NCH_miracle_charges_10 = { #requires 10 miracles per cast
	custom_trigger_tooltip = {
		tooltip = NCH_sunderer_charge_req_10
		check_variable = { NCH_sunderer_charges > 9 }
	}
}

sunderer_button_t1_trigger_0 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m1_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M1_cd
				value = 0
			}
		}
	}
}
sunderer_button_t1_trigger_1 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	has_war_support < 0.25
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m3_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M3_cd
				value = 0
			}
		}
	}
}

sunderer_button_t1_trigger_2 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m2_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M2_cd
				value = 0
			}
		}
	}
}
sunderer_button_t1_trigger_3 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m4_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M4_cd
				value = 0
			}
		}
	}
}

sunderer_button_t1_trigger_4 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m5_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M5_cd
				value = 0
			}
		}
	}
}

sunderer_button_t1_trigger_5 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m6_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M6_cd
				value = 0
			}
		}
	}
}

sunderer_button_t1_trigger_6 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m7_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M7_cd
				value = 0
			}
		}
	}
}

sunderer_button_t1_trigger_7 = {
	has_completed_focus = NCH_tempering_the_excesses
	NCH_miracle_charges = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t1m8_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T1M8_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_0 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_4 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt	
		NOT = {
			has_country_flag = NCH_sunderer_on_the_field
		}
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M1_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_1 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_2 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m2_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M2_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_2 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_2 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m3_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M3_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_3 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_2 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m4_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M4_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_4 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_3 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m5_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M5_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_5 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_2 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m6_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M6_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_6 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_3 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m7_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M7_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_7 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_4 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m8_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M8_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_8 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_4 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m9_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M9_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_9 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_3 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m10_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M10_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_10 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_4 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m11_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M11_cd
				value = 0
			}
		}
	}
}

sunderer_button_t2_trigger_11 = {
	has_country_flag = NCH_tier2_miracles_unlocked
	NCH_miracle_charges_3 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t2m12_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T2M12_cd
				value = 0
			}
		}
	}
}

sunderer_button_t3_prereq_0 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			BAR = {
				all_core_state = {
					OR = { 
						is_fully_controlled_by = NCH
						owner = {
							OR = {
								tag = NCH
								THIS = {
									is_subject_of = NCH
								}
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M0_unlocked
			}
		}
	}
}
sunderer_button_t3_prereq_1 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			415 = {
				OR = {
					is_fully_controlled_by = NCH
					owner = {
						OR = {
							tag = NCH
							THIS = {
								is_subject_of = NCH
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M1_unlocked
			}
		}
	}
}

sunderer_button_t3_prereq_2 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			439 = {
				OR = {
					is_fully_controlled_by = NCH
					owner = {
						OR = {
							tag = NCH
							THIS = {
								is_subject_of = NCH
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M2_unlocked
			}
		}
	}
}

sunderer_button_t3_prereq_3 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			251 = {
				OR = {
					is_fully_controlled_by = NCH
					owner = {
						OR = {
							tag = NCH
							THIS = {
								is_subject_of = NCH
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M3_unlocked
			}
		}
	}
}

sunderer_button_t3_prereq_4 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		custom_trigger_tooltip = {
			tooltip = NCH_control_aris_island_tt
			OR = {
				AND = {
					683 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					1202 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					686 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					685 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					1164 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					1204 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					1203 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
					1165 = {
						OR = {
							is_fully_controlled_by = NCH
							owner = {
								OR = {
									tag = NCH
									THIS = {
										is_subject_of = NCH
									}
								}
							}
						}
					}
				}
				hidden_trigger = {
					has_country_flag = NCH_T3M4_unlocked
				}
			}
		}
		
	}
}

sunderer_button_t3_prereq_5 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			1071 = {
				OR = {
					is_fully_controlled_by = NCH
					owner = {
						OR = {
							tag = NCH
							THIS = {
								is_subject_of = NCH
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M5_unlocked
			}
		}
	}
}

sunderer_button_t3_prereq_6 = {
	if = {
		limit = {
			NOT = { has_country_flag = NCH_tier2_miracles_unlocked }
		}
		custom_trigger_tooltip = {
			tooltip = NCH_t3_unlock_t2_first	
			has_country_flag = NCH_tier2_miracles_unlocked
		}
	}
	else = {
		OR = {
			AND = {
				68 = {
					OR = {
						is_fully_controlled_by = NCH
						owner = {
							OR = {
								tag = NCH
								THIS = {
									is_subject_of = NCH
								}
							}
						}
					}
				}
				3 = {
					OR = { 
						is_fully_controlled_by = NCH
						owner = {
							OR = {
								tag = NCH
								THIS = {
									is_subject_of = NCH
								}
							}
						}
					}
				}
				5 = {
					OR = {
						is_fully_controlled_by = NCH
						owner = {
							OR = {
								tag = NCH
								THIS = {
									is_subject_of = NCH
								}
							}
						}
					}
				}
			}
			hidden_trigger = {
				has_country_flag = NCH_T3M6_unlocked
			}
		}
	}
}



sunderer_button_t3_trigger_0 = {
	if = {
		limit = {
			has_country_flag = NCH_tier2_miracles_unlocked
		}
		NCH_miracle_charges_5 = yes
		NOT = {
			has_country_flag = NCH_T3M1_available
		}
	}
}

sunderer_button_t3_trigger_1 = {
	NCH_miracle_charges_10 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		any_country = { NOT = { has_idea = NCH_t3m2_idea } }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T3M2_cd
				value = 0
			}
		}
	}
	has_war = yes
}

sunderer_button_t3_trigger_2 = {
	NCH_miracle_charges_5 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		any_country = { NOT = { has_idea = NCH_t3m2_idea } }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T3M3_cd
				value = 0
			}
		}
	}
}

sunderer_button_t3_trigger_3 = {
	NCH_miracle_charges_5 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t3m4_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T3M4_cd
				value = 0
			}
		}
	}
}

sunderer_button_t3_trigger_4 = {
	NCH_miracle_charges_7 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t3m5_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T3M5_cd
				value = 0
			}
		}
	}
}

sunderer_button_t3_trigger_5 = {
	if = {
		limit = {
			has_country_flag = NCH_tier2_miracles_unlocked
		}
		NCH_miracle_charges_5 = yes
		NOT = {
			has_country_flag = NCH_T3M6_active
		}
	}
}

sunderer_button_t3_trigger_6 = {
	NCH_miracle_charges_5 = yes
	custom_trigger_tooltip = {
		tooltip = NCH_active_spell_trigger_tt		
		NOT = { has_idea = NCH_t3m7_idea }
	}
	custom_trigger_tooltip = {
		tooltip = NCH_spell_cooldown_tt	
		NOT = { 
			has_country_flag = {
				flag = NCH_T3M7_cd
				value = 0
			}
		}
	}
}