# Decision Triggers

MGY_CanTakeGranaryDecision_trigger = {
	OR = {
		has_political_power > MGY_GranaryOfZebricaCost_var
		has_political_power = MGY_GranaryOfZebricaCost_var
	}
	OR = {
		has_manpower > MGY_GranaryOfZebricaManpower_var
		has_manpower = MGY_GranaryOfZebricaManpower_var
	}
}

MGY_CanTakeGranaryDecisionBig_trigger = {
	OR = {
		has_political_power > MGY_GranaryOfZebricaCost_var
		has_political_power = MGY_GranaryOfZebricaCost_var
	}
	OR = {
		has_manpower > MGY_GranaryOfZebricaManpowerBig_var
		has_manpower = MGY_GranaryOfZebricaManpowerBig_var
	}
}

MGY_CanSellGrainToCountry_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_CanSellGrainToCountry_trigger_tt
		FROM = {
				exists = yes
			}
			NOT = {
				has_war_with = FROM
			}
			NOT = {
				is_embargoed_by = FROM
			}
			NOT = {
				is_embargoing = FROM
		}
	}
}

# Royal Diet Triggers

MGY_RoyalDiet_isInCoalition_trigger = { # Check if faction is in a coalition
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_isInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^MGY_RoyalDiet_targetFaction_tempvar = 2
		}
	}
}

MGY_RoyalDiet_isLeading_trigger = { # Check if faction is leading
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_isLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^MGY_RoyalDiet_targetFaction_tempvar = 3
		}
	}
}

MGY_RoyalDiet_zebricanistsInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_zebricanistsInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^0 = 2
		}
	}
}

MGY_RoyalDiet_zebricanistsInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_zebricanistsInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^0 = 3
		}
	}
}

MGY_RoyalDiet_labourInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_labourInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^1 = 2
		}
	}
}

MGY_RoyalDiet_labourInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_labourInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^1 = 3
		}
	}
}

MGY_RoyalDiet_moderatesInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_moderatesInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^2 = 2
		}
	}
}

MGY_RoyalDiet_moderatesInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_moderatesInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^2 = 3
		}
	}
}

MGY_RoyalDiet_reformistsInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reformistsInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^3 = 2
		}
	}
}

MGY_RoyalDiet_reformistsInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reformistsInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^3 = 3
		}
	}
}

MGY_RoyalDiet_traditionalistsInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_traditionalistsInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^4 = 2
		}
	}
}

MGY_RoyalDiet_traditionalistsInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_traditionalistsInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^4 = 3
		}
	}
}

MGY_RoyalDiet_royalistsInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_royalistsInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^5 = 2
		}
	}
}

MGY_RoyalDiet_royalistsInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_royalistsInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^5 = 3
		}
	}
}

MGY_RoyalDiet_agrariansInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_agrariansInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^6 = 2
		}
	}
}

MGY_RoyalDiet_agrariansInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_agrariansInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^6 = 3
		}
	}
}

MGY_RoyalDiet_reactionariesInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reactionariesInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^7 = 2
		}
	}
}

MGY_RoyalDiet_reactionariesInLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reactionariesInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^7 = 3
		}
	}
}

MGY_RoyalDiet_nationalistsInCoalition_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_nationalistsInCoalition_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^8 = 2
		}
	}
}

MGY_RoyalDiet_nationalistsLeading_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_nationalistsInLeading_tt
		check_variable = {
			MGY_RoyalDiet_coalition_array^8 = 3
		}
	}
}

MGY_RoyalDiet_isSupportive_trigger = { # Check if faction is already supporting the next vote
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_isSupportive_tt
		check_variable = {
			MGY_RoyalDiet_support_array^MGY_RoyalDiet_targetFaction_tempvar = 1
		}
	}
}

MGY_RoyalDiet_zebricanistSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 0
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_labourSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 1
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_moderatesSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 2
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_reformistsSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 3
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_traditionalistsSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 4
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_royalistsSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 5
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_agrariansSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 6
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_reactionariesSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 7
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_nationalistsSupportive_trigger = { 
	set_temp_variable = {
		MGY_RoyalDiet_targetFaction_tempvar = 8
	}
	MGY_RoyalDiet_isSupportive_trigger = yes
}

MGY_RoyalDiet_atLeastOneFavour_trigger = { # Checks if the faction has at least ONE favour
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_atLeastOneFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^MGY_RoyalDiet_targetFaction_tempvar > 0
		}
	}
}

MGY_RoyalDiet_zebricanistFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_zebricanistFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^0 > 0
		}
	}
}

MGY_RoyalDiet_labourFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_labourFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^1 > 0
		}
	}
}

MGY_RoyalDiet_moderatesFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_moderatesFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^2 > 0
		}
	}
}

MGY_RoyalDiet_reformistsFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reformistsFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^3 > 0
		}
	}
}

MGY_RoyalDiet_traditionalistsFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_traditionalistsFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^4 > 0
		}
	}
}

MGY_RoyalDiet_royalistsFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_royalistsFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^5 > 0
		}
	}
}

MGY_RoyalDiet_agrariansFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_agrariansFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^6 > 0
		}
	}
}

MGY_RoyalDiet_reactionariesFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_reactionariesFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^7 > 0
		}
	}
}

MGY_RoyalDiet_nationalistsFavour_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_RoyalDiet_nationalistsFavour_tt
		check_variable = {
			MGY_RoyalDiet_favors_array^8 > 0
		}
	}
}

MGY_activeDiet_trigger = {
	NOT = {
		has_country_flag = MGY_disbandedDiet_flag
	}
}

# VIZIERS

MGY_vizier_isVizier_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_vizier_isVizier_tt
		has_trait = MGY_Vizier_Trait
	}
}

# Unlocked by event

MGY_bypassedbyevent_trigger = {
	custom_trigger_tooltip = {
		tooltip = MGY_bypassedbyevent_tt
		always = no
	}
}