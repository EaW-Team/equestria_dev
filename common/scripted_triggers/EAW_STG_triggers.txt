
STG_propaganda_poster_slot_available = {
	custom_trigger_tooltip = {
		tooltip = SOV_propaganda_poster_slot_available_tt
		OR = {
			check_variable = { STG_agitprop_posters_array^0 = 2 }
			check_variable = { STG_agitprop_posters_array^1 = 2  }
			check_variable = { STG_agitprop_posters_array^2 = 2  }
		}
	}
}

# COMECON trigger #

# Trigger     : STG_is_major_comecon
# Description : Trigger is true if the current scope is a major country for the COMECON
STG_is_major_comecon = {
	#check_variable = { STG.STG_COMECON_majors_array^num > STG.STG_COMECON_minors_array^num } # Placeholder for now
	is_major = yes 
}

STG_vasily_comecon_member_list = {
	has_government = communism
	is_subject = no
	NOT = {
		has_idea = detached_country
		has_idea = communal_society
		has_war_with = STG
		tag = BAN ## nasty people ##
		has_country_flag = is_maresoc
		has_country_leader_ideology = rozenkampism
		AND = {
			tag = LSC
			OR = {
				has_country_leader = {
					ruling_only = yes
					character = LSC_abba_povner
				}
				has_country_leader = {
					ruling_only = yes
					character = LSC_ludwig_von_pliater
				}
			}
		}
		AND = {
			tag = BAL
			has_country_leader = {
				ruling_only = yes
				character = BAL_lavender_berry
			}
		}
		is_in_array = { STG.STG_COMECON_majors_array = THIS }
		is_in_array = { STG.STG_COMECON_minors_array = THIS }
	}
}
STG_karamelka_comecon_member_list = {
	OR = {
		has_government = communism
		has_country_leader_ideology = socialism
	}
	is_subject = no
	NOT = {
		has_idea = detached_country
		has_idea = communal_society
		has_country_leader_ideology = stalinism
		has_country_leader_ideology = anti_revisionism
		has_country_leader_ideology = rozenkampism
		has_country_leader_ideology = juche
		has_country_leader_ideology = oligarchical_collectivism
		tag = BAN ## nasty people ##
		AND = {
			tag = LSC
			OR = {
				has_country_leader = {
					ruling_only = yes
					character = LSC_abba_povner
				}
				has_country_leader = {
					ruling_only = yes
					character = LSC_ludwig_von_pliater
				}
			}
		}
		AND = {
			tag = BAL
			has_country_leader = {
				ruling_only = yes
				character = BAL_lavender_berry
			}
		}
		is_in_array = { STG.STG_COMECON_majors_array = THIS }
		is_in_array = { STG.STG_COMECON_minors_array = THIS }
	}
}


STG_sinister_comecon_member_list = {
	has_government = communism
	is_subject = no
	NOT = {
		has_idea = detached_country
		has_idea = communal_society
		has_country_leader_ideology = democratic_socialism
		has_country_leader_ideology = anarchist_communism
		has_country_leader_ideology = socialist_monarchism
		has_country_leader_ideology = oligarchical_collectivism
		tag = BAN ## nasty people ##
		AND = {
			tag = LSC
			OR = {
				has_country_leader = {
					ruling_only = yes
					character = LSC_abba_povner
				}
				has_country_leader = {
					ruling_only = yes
					character = LSC_ludwig_von_pliater
				}
			}
		}
		AND = {
			tag = BAL
			has_country_leader = {
				ruling_only = yes
				character = BAL_lavender_berry
			}
		}
		is_in_array = { STG.STG_COMECON_majors_array = THIS }
		is_in_array = { STG.STG_COMECON_minors_array = THIS }
	}
}


STG_masha_comecon_member_list = {
	has_government = communism
	is_subject = no
	has_country_leader_ideology = anti_revisionism
	NOT = {
		has_idea = detached_country
		has_idea = communal_society
		is_in_array = { STG.STG_COMECON_majors_array = THIS }
		is_in_array = { STG.STG_COMECON_minors_array = THIS }
	}
}

STG_check_actual_cat_flags = {
	if = { 
		limit = {
			is_in_array = { STG.STG_comecon_categories_array = v }
		}
		NOT = { has_country_flag = STG_active_comecon_decision_inf }		
	}
	if = {
		limit = {
			is_in_array = { STG.STG_comecon_categories_heavyeq_array = v }
		}
		NOT = { has_country_flag = STG_active_comecon_decision_heavy }
	}
	if = {
		limit = {
			is_in_array = { STG.STG_comecon_categories_misc_array = v }
		}
		NOT = { has_country_flag = STG_active_comecon_decision_misc }
	} 
}

STG_has_available_sev_decisions = {

	has_country_flag = available_comecon_flag
	
	OR = {
		NOT = { has_country_flag = STG_active_comecon_decision_inf }
		NOT = { has_country_flag = STG_active_comecon_decision_heavy }
		NOT = { has_country_flag = STG_active_comecon_decision_misc }
	}
	
	NOT = { 
		has_country_flag = comecon_alert_hidden
	}
	
}