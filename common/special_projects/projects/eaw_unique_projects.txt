sp_future_infantry_rifle = {

	specialization = specialization_land	
	icon = GFX_sp_nuclear_reactor # TO CHANGE
	complexity = sp_complexity.large 
	prototype_time = sp_time.prototype.long	

	project_tags = sp_tag_infantry

	allowed = {
		original_tag = HIP
	}
	visible = {
		FROM = {
			has_completed_focus = HIP_exotic_weapons
		}
	}
	resource_cost = {
		resources = { steel=8 tungsten=4 }
	}
	breakthrough_cost = {
		specialization_land = 1
	}
	
	project_output = {
		country_effects = {
			if = {
				limit = {
					has_country_flag = HIP_chose_caseless
				}
				
				if = {
					limit = {
						has_dlc = "Arms Against Tyranny"
					}
					unlock_mio_policy_tooltip = {
						policy = mio_policy_HIP_land_caseless_rifles
					}
				}
				else = {
					add_ideas = HIP_exotic_weapons_division_0
				}
				set_country_flag = HIP_making_caseless_rifles
				set_technology = {
					HIP_caseless_rifle = 1
					popup = no
				}
				custom_effect_tooltip = HIP_caseless_rifles_effect
			}
			else = {

				set_technology = {
					HIP_flechette_rifle = 1
					popup = no
				}
				custom_effect_tooltip = HIP_flechette_rifles_effect
				set_country_flag = HIP_making_flechette_rifles
				if = {
					limit = {
						has_dlc = "Arms Against Tyranny"
					}
					unlock_mio_policy_tooltip = {
						policy = mio_policy_HIP_land_flechette_rifles
					}
				}
				else = {
					add_ideas = HIP_exotic_weapons_division
				}
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_infantry_tech_1
		sp_land_generic_reward_infantry_tech_2
		sp_land_generic_reward_infantry_tech_3
		sp_land_generic_reward_infantry_bonus_1
		sp_land_generic_reward_infantry_bonus_2
		sp_land_generic_reward_infantry_bonus_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {

		sp_land_reward_future_infantry_rifle_focus_preference = {
			fire_only_once = yes

			threshold = { 
				min = 30
				max = 100
			}

			weight = {
				base = 50
			}

			option = {
				token = sp_land_reward_option_caseless
				
				iteration_output = {
					country_effects = {
						set_country_flag = HIP_chose_caseless
					}
				}
			}

			option = {
				token = sp_land_reward_option_flechette
				
				iteration_output = {
					country_effects = {
						set_country_flag = HIP_chose_flechette
					}
				}
			}
		}
	}

}
sp_future_tank = {

	specialization = specialization_land	
	icon = GFX_sp_nuclear_reactor # TO CHANGE
	complexity = sp_complexity.medium 
	prototype_time = sp_time.prototype.medium	

	project_tags = sp_tag_tank

	allowed = {
		original_tag = HIP
	}
	visible = {
		FROM = {
			has_completed_focus = HIP_exotic_weapons
		}
	}
	resource_cost = {
		resources = { steel=8 tungsten=8 chromium = 8 } 
	}
	breakthrough_cost = {
		specialization_land = 1
	}
	
	project_output = {
		country_effects = {
			if = {
				limit = {
					has_country_flag = HIP_tank_conventional
				}
				if = {
					limit = {
						has_dlc = "No Step Back"
					}
					add_tech_bonus = {
						name = secret_bonus
						technology = super_heavy_tank_chassis_a
						technology = super_heavy_tank_chassis_b
						technology = super_heavy_tank_chassis_c
						bonus = 1
						uses = 1
						ahead_reduction = 2
					}
				}
				else = {
					add_tech_bonus = {
						name = secret_bonus
						technology = super_heavy_tank
						technology = super_heavy_tank_a
						technology = super_heavy_tank_b
						bonus = 1
						uses = 1
						ahead_reduction = 2
					}
				}
			}
			else = {
				
				set_technology = {
					HIP_amphibious_super_heavies = 1
					popup = no
				}
				custom_effect_tooltip = HIP_amphibious_super_heavies_effect
			}
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_armor_tech_1
		sp_land_generic_reward_armor_tech_2
		sp_land_generic_reward_armor_tech_3
		sp_land_generic_reward_armor_bonus_1
		sp_land_generic_reward_armor_bonus_2
		sp_land_generic_reward_armor_bonus_3
		sp_land_generic_reward_engine_bonus_1
		sp_land_generic_reward_engine_bonus_2
		sp_land_generic_reward_engine_bonus_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {

		sp_land_reward_future_tank_preference = {
			fire_only_once = yes

			threshold = { 
				min = 30
				max = 100
			}

			weight = {
				base = 50
			}

			option = {
				token = sp_land_reward_option_conventional
				
				iteration_output = {
					country_effects = {
						set_country_flag = HIP_tank_conventional
					}
				}
			}

			option = {
				token = sp_land_reward_option_amphibious
				
				iteration_output = {
					country_effects = {
					}
				}
			}
		}
	}

}