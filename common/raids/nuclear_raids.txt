types = {

	nuclear_strike = {
		days_to_prepare = 30

		category = nuclear_raids

		command_power = 20 # command power allocation cost
		ai_will_do = {
			base = 1
			modifier = {
				# Don't target anyone who is not a potential enemy
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM  # Target country
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					is_major = yes
				}
			}
			modifier = {
				factor = 5 # Historical bombing of Japan
				FROM = {
					original_tag = JAP 
				}
				original_tag = USA
				has_war_with = FROM 
			}
			modifier = {
				factor = 0.25 # If possible, during peacetime, prepare strikes against the main enemies
				NOT = { has_war_with = FROM }
				FROM = { is_major = no }
			}
		}

		allowed = {
			has_dlc = "Gotterdammerung"
		}
		# Raid Type is visible
		visible = {
			has_tech = nukes	
		}
		# Specific Target is visible
		show_target = {
			NOT = {
				is_in_faction_with = FROM
			}
		}

		# Can prepare 
		available = {
			#has_war_with = FROM 
		}
		launchable = {
			has_war_with = FROM 
		}

		launch_sound = raid_launch_nuclear_strike

		target_type = {
			province = any
		}

		unit_requirements = {
			equipment = {
				type = { strategic_bomber }
				amount = { min = 10 }
			}
		}
		essential_equipment = {
			nukes = 1
		}

		starting_point = {
		    types = { air_base }
		}

		arrow = {
			type = air
		}
        unit_model = {
            type = equipment
        }

		success_factors = {
			success = {
				base = 0.5
				experience = {
					weight = 0.1
					start_weight = -0.1
					reference = 1000
				}
				air_defence = {
					reference = 100
					start_weight = -0.05
					weight = 0.05
				}
				air_agility = {
					reference = 100
					start_weight = -0.1
					weight = 0.1
				}
				reliability = {
					start_weight = -0.1
					weight = 0.1
				}



				air_superiority = {
					reference = 1.0
					start_weight = -0.25
					weight = 0.25
				}
				
				

				# Target
				interceptor = {
					reference = 10
					weight = -0.25
				}
				anti_air = {
					weight = -0.05
				}
				radar = {
					weight = -0.05
				}
				intel = {
					weight = 0.2
					#start_reference = 50
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
						add_political_power = -50
					}
					raid_damage_units = {
						plane_loss = 0.5
						ratio = yes
					}
					
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
					}
					raid_damage_units = {
						plane_loss = 0.25
						ratio = yes
					}
					raid_add_unit_experience = 25
				}
			}
			success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = no
						}	
					}
					raid_damage_units = {
						plane_loss = 0.05
						ratio = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_nuclear_strike_tt
						add_dynamic_modifier = {
							modifier = fallout_atomic
							days = 365
						}
					}
				}
			}
			critical_success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = no
						}	
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_nuclear_strike_tt
						add_dynamic_modifier = {
							modifier = fallout_atomic
							days = 365
						}
					}
				}
			}
		}
		
	}
	
	nuclear_missile_strike = {
		category = nuclear_raids

		days_to_prepare = 7

		ai_will_do = {
			base = 1
			modifier = {
				# Don't target anyone who is not a potential enemy
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM  # Target country
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					original_tag = USA
					original_tag = SOV
				}
			}
			modifier = {
				factor = 2
				FROM = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0.25 # If possible, during peacetime, prepare strikes against the main enemies
				NOT = { has_war_with = FROM }
				FROM = { is_major = no }
			}
		}

		command_power = 5 # command power allocation cost

		allowed = {
			has_dlc = "Gotterdammerung"
		}
		# Raid Type is visible
		visible = {
			is_special_project_completed = sp:sp_nuclear_warheads
		}
		# Specific Target is visible
		show_target = {
			NOT = {
				is_in_faction_with = FROM
			}
		}

		# Can prepare 
		available = {
			#has_war_with = FROM 
		}
		launchable = {
			has_war_with = FROM 
		}
		
		target_type = {
			province = any
		}

		unit_requirements = {
			equipment = {
				type = { nuclear_missile_equipment } 
				amount = { min = 1 }
			}
		}
		essential_equipment = {
			nukes = 1
		}

		starting_point = {
		    types = {
		        rocket_site
		        submarine
		    }
		}
		arrow = {
		    type = ballistic
		}

		launch_sound = raid_launch_nuclear_missile

        unit_model = {
            type = equipment
            scale = 0.5
        }

		success_factors = {
			success = {
				base = 0.8
				intel = {
					weight = 0.2
					#start_reference = 50
					reference = 100
				}
			}
		}



		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
					}
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
					}
				}
			}
			success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = no #will consume nuke if specified
						}	
					}
					var:target_state = {
						#custom_effect_tooltip = raid_nuclear_strike_tt
						add_dynamic_modifier = {
							modifier = fallout_atomic
							days = 365
						}
					}
				}
			}
			critical_success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = no #will consume nuke if specified
						}	
					}
					var:target_state = {
						
						add_dynamic_modifier = {
							modifier = fallout_atomic
							days = 365
						}
					}
				}
			}
		}
		
	}

	thermonuclear_strike = {
		days_to_prepare = 30

		category = nuclear_raids

		ai_will_do = {
			base = 1
			modifier = {
				# Don't target anyone who is not a potential enemy
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM  # Target country
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					original_tag = USA
					original_tag = SOV
				}
			}
			modifier = {
				factor = 2
				FROM = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0.25 # If possible, during peacetime, prepare strikes against the main enemies
				NOT = { has_war_with = FROM }
				FROM = { is_major = no }
			}
		}

		command_power = 20 # command power allocation cost

		allowed = {
			has_dlc = "Gotterdammerung"
		}
		# Raid Type is visible
		visible = {
			is_special_project_completed = sp:sp_thermo_nuclear_bomb
		}
		# Specific Target is visible
		show_target = {
			NOT = {
				is_in_faction_with = FROM
			}
		}

		# Can prepare 
		available = {
			#has_war_with = FROM 
		}
		launchable = {
			has_war_with = FROM 
		}

		launch_sound = raid_launch_nuclear_strike

		target_type = {
			province = any
		}

		unit_requirements = {
			equipment = {
				type = { strategic_bomber }
				amount = { min = 10 }
			}
		}
		nuke_type = thermonuclear_bomb

		essential_equipment = {
			nukes = 1
		}

		starting_point = {
		    types = { air_base }
		}

		arrow = {
			type = air
		}
        unit_model = {
            type = equipment
        }

		success_factors = {
			success = {
				base = 0.5
				experience = {
					weight = 0.1
					start_weight = -0.1
					reference = 1000
				}
				air_defence = {
					reference = 100
					start_weight = -0.05
					weight = 0.05
				}
				air_agility = {
					reference = 100
					start_weight = -0.1
					weight = 0.1
				}
				reliability = {
					start_weight = -0.1
					weight = 0.1
				}



				air_superiority = {
					reference = 1.0
					start_weight = -0.25
					weight = 0.25
				}
				
				

				# Target
				interceptor = {
					reference = 10
					weight = -0.25
				}
				anti_air = {
					weight = -0.05
				}
				radar = {
					weight = -0.05
				}
				intel = {
					weight = 0.2
					#start_reference = 50
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
						add_political_power = -50
					}
					raid_damage_units = {
						plane_loss = 0.5
						ratio = yes
					}
					
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = raid_aborted_tt
					}
					raid_damage_units = {
						plane_loss = 0.25
						ratio = yes
					}
					raid_add_unit_experience = 25
				}
			}
			success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = yes
							nuke_type = thermonuclear_bomb
						}	
					}
					raid_damage_units = {
						plane_loss = 0.05
						ratio = yes
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_nuclear_strike_tt
						add_dynamic_modifier = {
							modifier = fallout_thermonuclear
							days = 730
						}
					}
				}
			}
			critical_success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = yes
							nuke_type = thermonuclear_bomb
						}	
					}
				}
				victim_effects = {
					var:target_state = {
						custom_effect_tooltip = raid_nuclear_strike_tt
							add_dynamic_modifier = {
								modifier = fallout_thermonuclear
								days = 730
							}
						}
					}
			}
		}
	}
	

	thermonuclear_missile_strike = {
		category = nuclear_raids

		days_to_prepare = 7

		ai_will_do = {
			base = 1
			modifier = {
				# Don't target anyone who is not a potential enemy
				factor = 0
				NOT = {
					is_in_array = {
						array = potential_and_current_enemies
						value = FROM  # Target country
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					original_tag = USA
					original_tag = SOV
				}
			}
			modifier = {
				factor = 2
				FROM = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0.25 # If possible, during peacetime, prepare strikes against the main enemies
				NOT = { has_war_with = FROM }
				FROM = { is_major = no }
			}
		}

		command_power = 5 # command power allocation cost

		allowed = {
			has_dlc = "Gotterdammerung"
		}
		# Raid Type is visible
		visible = {
			is_special_project_completed = sp:sp_nuclear_warheads
		}
		# Specific Target is visible
		show_target = {
			NOT = {
				is_in_faction_with = FROM
			}
		}

		# Can prepare 
		available = {
			#has_war_with = FROM 
		}
		launchable = {
			has_war_with = FROM 
		}
		
		target_type = {
			province = any
		}

		unit_requirements = {
			equipment = {
				type = { nuclear_missile_equipment } 
				amount = { min = 1 }
			}
		}
		essential_equipment = {
			nukes = 1
		}
		nuke_type = thermonuclear_bomb
		starting_point = {
		    types = {
		        rocket_site
		        submarine
		    }
		}
		arrow = {
		    type = ballistic
		}

		launch_sound = raid_launch_nuclear_missile

        unit_model = {
            type = equipment
            scale = 0.5
        }

		success_factors = {
			success = {
				base = 0.8
				intel = {
					weight = 0.2
					#start_reference = 50
					reference = 100
				}
			}
		}

		success_levels = {
			failure = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
					}
				}
			}
			limited_success = {
				actor_effects = {
					var:actor_country = {
						custom_effect_tooltip = dud_missile_tt
					}
				}
			}
			success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = yes #will consume nuke if specified
							nuke_type = thermonuclear_bomb
						}	
					}
					var:target_state = {
						#custom_effect_tooltip = raid_nuclear_strike_tt
						add_dynamic_modifier = {
							modifier = fallout_thermonuclear
							days = 730
						}
					}
				}
			}
			critical_success = {
				actor_effects = {
					var:actor_country = {
						launch_nuke = {
							province = var:ROOT.target_province #optional use either province or state
							use_nuke = yes #will consume nuke if specified
							nuke_type = thermonuclear_bomb
						}	
					}
					var:target_state = {
						add_dynamic_modifier = {
							modifier = fallout_thermonuclear
							days = 730
						}
					}
				}
			}
		}
	}
}