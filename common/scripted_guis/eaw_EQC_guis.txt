scripted_gui = {

	EQC_parliament_gui = {
		context_type = decision_category
		window_name = "EQC_parliament_decision_window"
		dirty = EQC_parliament_dirty
		
		dynamic_lists = {
			parliament_popularities = {
				array = EQC_party_token_array
				entry_container = EQC_parliament_party_popularity_entry
				value = w
				index = i
			}
			parliament_parties = {
				array = EQC_party_token_array
				entry_container = EQC_parliament_party_entry
				value = w
				index = i
			}
		}
		
		triggers = {
			parliament_coalition_button_click_enabled = {
				OR = {
					check_variable = { EQC_coalition_party_index = i }
					check_variable = { EQC_coalition_party_index = -1 }
				}
			}
		}

		effects = {
			parliament_coalition_button_click = {
				if = {
					limit = {
						check_variable = { EQC_coalition_party_index = i }
					}
					set_variable = { EQC_party_coalition_partner_array^i = 1 }
					set_variable = { EQC_coalition_party_index = -1 }
				}
				else = {
					set_variable = { EQC_party_coalition_partner_array^i = 2 }
					set_variable = { EQC_coalition_party_index = i }
				}
				add_to_variable = { EQC_parliament_dirty = 0.01 }
			}
		}

		properties = {
			parliament_party_popularity_icon = {
				image = "GFX_EQC_popularity_[?w.GetTokenKey]"
				frame = EQC_party_popularity_frames_array^i
			}
			parliament_party_icon = {
				image = "GFX_EQC_parliament_icon_[?w.GetTokenKey]"
			}
			parliament_coalition_button = {
				frame = EQC_party_coalition_partner_array^i
			}
		}
	}
}