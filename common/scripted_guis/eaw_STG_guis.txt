@STG_DW_REGION_FILL = 3
@STG_DW_REGION_SELECT = 1
@STG_DW_REGION_HOME = 2

scripted_gui = {
	stg_politics_sgui_1 = {
		context_type = decision_category
		window_name = "stg_politics_sgui_1_window"
	}
	
	stg_politics_sgui_2 = {
		context_type = decision_category
		window_name = "stg_politics_sgui_2_window"
	}
	
	
	
	# stg_hunger_sgui = {
	# 	context_type = decision_category
	# 	window_name = "stg_hunger_pb_cat"
		
	# 	properties = {
	# 		hunger_level_stg = {
	# 			frame = hunger_level_100
	# 		}
	# 	}
	# }
	
	stg_politics_parties_gui = {
		context_type = decision_category
		window_name = "stg_politics_parties_gui_win"
		
		properties = {
			STG_left_op_pb = { 
				frame = STG_left_opposition_support 
			}
			STG_centre_op_pb = {
				frame = STG_main_party_support
			}
			STG_right_op_pb = {
				frame = STG_right_opposition_support
			}
		}
	}

	stg_propaganda_campaigns_ui = {
		context_type = decision_category
		window_name = "stg_propaganda_campaigns_ui_window"

		properties = {
			propaganda_poster_left = {
				image = "[GetPropagandaLeftSlotAge]"
				frame = STG_poster_left_icon_frame
			}

			propaganda_poster_center = {
				image = "[GetPropagandaCenterSlotAge]"
				frame = STG_poster_center_icon_frame
			}
			
			propaganda_poster_right = {
				image = "[GetPropagandaRightSlotAge]"
				frame = STG_poster_right_icon_frame
			}
		}
	}

	STG_DW_reforms_gui = {
		window_name = "STG_DW_reforms_gui_win"
		context_type = decision_category
		#context_type = player_context

		dirty = STD_DW_update_reform_gui

		visible = {
			has_country_flag = STG_DW_minigame_enabled
		}
	}

	STG_DW_regional_influence_gui = {
		window_name = "STG_DW_regional_influence_gui_win"
		context_type = player_context

		dirty = STG_DW_update_regional_influence_gui

		visible = {
			has_country_flag = STG_DW_minigame_regional_influence_enabled
		}

		dynamic_lists = {
			STG_DW_region_gridbox = {
				array = STG_DW_regions_array
				index = STG_DW_region_index
				value = STG_DW_region_value
				change_scope = no
				entry_container = STG_DW_regional_influence_region_win
			}
		}

		triggers = {
			region_button_visible = {
				always = yes
				set_temp_variable = { temp_region_frame = STG_DW_regions_array^STG_DW_region_index }
				multiply_temp_variable = { temp_region_frame = 255 }
				divide_temp_variable = { temp_region_frame = 100 }
				round_temp_variable = temp_region_frame
				multiply_temp_variable = { temp_region_frame = 4 }
				if = {
					limit = {
						check_variable = { STG_DW_region_index = STG_DW_region_selected }
					}

					add_to_temp_variable = { temp_region_frame = @STG_DW_REGION_SELECT }
				} else_if = {
					limit = {
						check_variable = { STG_DW_region_index = 0 }
					}

					add_to_temp_variable = { temp_region_frame = @STG_DW_REGION_HOME }
				} else = {
					add_to_temp_variable = { temp_region_frame = @STG_DW_REGION_FILL }
				}
				add_to_temp_variable = { temp_region_frame = 1 }
			}
		}

		properties = {
			region_button = {
				image = "GFX_STG_DW_reform_region_[?STG_DW_region_index]"
				frame = temp_region_frame
			}
		}

		effects = {
			region_button_click = {
				if = {
					limit = {
						check_variable = { STG_DW_region_selected = STG_DW_region_index }
					}

					set_variable = { STG_DW_region_selected = -1 }
				} else = {
					set_variable = { STG_DW_region_selected = STG_DW_region_index }
				}
				
				add_to_variable = { STG_DW_update_regional_influence_gui = 1 }
			}
		}
	}
} 