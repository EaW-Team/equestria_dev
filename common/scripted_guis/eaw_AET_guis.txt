scripted_gui = {
	eaw_AET_helldivers_gui = {
		window_name = AET_helldivers_gui
		context_type = decision_category
		dirty = AET_HLDV_dirty
		
		dynamic_lists = {
			stratagems_grid = {
				entry_container = AET_helldivers_gui_stratagmes_entry
				array = AET_HLDV_stratagem_list
				index = i
				value = j
			}
			stratagems_code_grid = {
				entry_container = AET_helldivers_gui_stratagmes_code_entry
				array = AET_HLDV_stratagem_code_list_@var:j
				index = k
				value = l
			}
		}
		effects = {
			key_left_click = {
				log = "AET Helldivers Reference: Left"
				set_temp_variable = { temp_arrow_direction = 1 }
				AET_HLDV_key_press = yes
			}
			key_up_click = {
				log = "AET Helldivers Reference: Up"
				set_temp_variable = { temp_arrow_direction = 2 }
				AET_HLDV_key_press = yes
			}
			key_right_click = {
				log = "AET Helldivers Reference: Right"
				set_temp_variable = { temp_arrow_direction = 3 }
				AET_HLDV_key_press = yes
			}
			key_down_click = {
				log = "AET Helldivers Reference: Down"
				set_temp_variable = { temp_arrow_direction = 4 }
				AET_HLDV_key_press = yes
			}
			key_confirm_click = {
				AET_HLDV_evaluate_sequence = yes
			}
		}
		triggers = {
			code_arrow_icon_visible = {
				if = {
					limit = {
						check_variable = { AET_HLDV_current_arrows^k = AET_HLDV_stratagem_code_list_@var:j^k }
						all_of = {
							array = AET_HLDV_stratagem_code_list_@var:j
							index = check_i
							value = check_v

							if = {
								limit = {
									check_variable = { AET_HLDV_current_arrows^check_i > 0 }
								}
								check_variable = { check_v = AET_HLDV_current_arrows^check_i }
							}
						}
						check_variable = { var = AET_HLDV_current_arrows^num value = AET_HLDV_stratagem_code_list_@var:j^num compare = less_than_or_equals }
					}
					set_temp_variable = { code_arrow_icon_frame = 2 }
				}
				else = {
					set_temp_variable = { code_arrow_icon_frame = 1 }
				}
			}
			code_arrow_icon_click_enabled = {
				all_of = {
					array = AET_HLDV_stratagem_code_list_@var:j
					index = check_i
					value = check_v

					if = {
						limit = {
							check_variable = { AET_HLDV_current_arrows^check_i > 0 }
						}
						check_variable = { check_v = AET_HLDV_current_arrows^check_i }
					}
				}
				check_variable = { var = AET_HLDV_current_arrows^num value = AET_HLDV_stratagem_code_list_@var:j^num compare = less_than_or_equals }
			}
		}
		properties = {
			code_arrow_icon = {
				frame = code_arrow_icon_frame
				image = "GFX_AET_HLDV_key_small_[?l]"
			}
			key_left = {
				frame = key_left_frame
			}
			key_up = {
				frame = key_up_frame
			}
			key_right = {
				frame = key_right_frame
			}
			key_down = {
				frame = key_down_frame
			}
		}
	}
}