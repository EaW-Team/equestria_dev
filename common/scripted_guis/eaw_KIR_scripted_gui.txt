scripted_gui = {
	KIR_diary_SG_trigger = {
		context_type = player_context
		parent_window_token = politics_tab

		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
					AND = {
						tag = CFR
						has_country_flag = CFR_diary_stealer_flag
					}
				}
				NOT = {
					has_country_flag = KIC_children_of_concord_flag
					has_country_flag = KIS_FRV_flag
					has_country_flag = KIR_NSA
				}
				##No in-game option to tag switch over to KIS Protectorates/Commanderies, KAG, STH, or Nirik Warlord States, so no checks needed for those tags.
			}
		}

		window_name = "KIR_diary_SG_trigger_window"

		triggers = {
			KIR_diary_SG_glowy_shiny_sparkly_glimmery_shimmery_thing_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_clicked_flag
				}
			}
			KIR_diary_SG_new_entry_notification_visible = {
				check_variable = { KIR_diary_SG_new_entry_var > 0 }
			}
		}

		properties = {
            KIR_diary_SG_glowy_shiny_sparkly_glimmery_shimmery_thing = {
                x = ROOT.KIR_diary_SG_glowy_shiny_sparkly_glimmery_shimmery_thing_offset_X
                y = ROOT.KIR_diary_SG_glowy_shiny_sparkly_glimmery_shimmery_thing_offset_Y
            }
            KIR_diary_SG_trigger_button = {
                x = ROOT.KIR_diary_SG_trigger_button_offset_X
                y = ROOT.KIR_diary_SG_trigger_button_offset_Y
            }
            KIR_diary_SG_new_entry_notification = {
                x = ROOT.KIR_diary_SG_new_entry_notification_offset_X
                y = ROOT.KIR_diary_SG_new_entry_notification_offset_Y
            }
        }

		effects = {
			KIR_diary_SG_trigger_button_click = {
				set_country_flag = KIR_diary_SG_clicked_flag
				set_country_flag = KIR_toggled_diary_SG
				clr_country_flag = KIR_diary_SG_new_entry_flag
				set_variable = { KIR_diary_SG_new_entry_var = 0 }

				set_temp_variable = { temp_KIR_diary_protag = 1 } # 1 per default
				set_temp_variable = { temp_KIR_diary_entry = -1 } # No entry selected
				if = {
					limit = {
						original_tag = KIR
					}
					if = {
						limit = {
							OR = {
								has_government = democratic
								has_country_flag = CFR_stole_KIR_AB_journal
							}
						}
						set_temp_variable = { temp_KIR_diary_protag = 1 }
					}
					if = {
						limit = {
							OR = {
								has_government = neutrality
								has_country_flag = CFR_stole_KIR_WF_journal
							}
						}
						set_temp_variable = { temp_KIR_diary_protag = 2 }
					}
				}
				if = {
					limit = {
						original_tag = KIS
					}
					set_temp_variable = { temp_KIR_diary_protag = 3 }
				}
				if = {
					limit = {
						OR = {
							original_tag = KIC
							has_country_flag = CFR_stole_KIC_journal
						}
					}
					set_temp_variable = { temp_KIR_diary_protag = 4 }
				}
				KIR_diary_set_active_protagonist = yes
			}
		}
	}

	KIR_diary_SG = {
		context_type = player_context

		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
					AND = {
						tag = CFR
						has_country_flag = CFR_diary_stealer_flag
					}
				}
				has_country_flag = KIR_toggled_diary_SG
			}
		}

		window_name = "KIR_diary_SG_window"

		dirty = KIR_diary_SG_DIRTY

		properties = {
			KIR_diary_SG_protag_1_button = {
				frame = protagonist_frame^0
                x = ROOT.KIR_diary_SG_protag_1_button_offset_X
                y = ROOT.KIR_diary_SG_protag_1_button_offset_Y
			}
			KIR_diary_SG_protag_2_button = {
				frame = protagonist_frame^1
                x = ROOT.KIR_diary_SG_protag_2_button_offset_X
                y = ROOT.KIR_diary_SG_protag_2_button_offset_Y
			}
			KIR_diary_SG_protag_3_button = {
				frame = protagonist_frame^2
                x = ROOT.KIR_diary_SG_protag_3_button_offset_X
                y = ROOT.KIR_diary_SG_protag_3_button_offset_Y
			}
			KIR_diary_SG_protag_4_button = {
				frame = protagonist_frame^3
                x = ROOT.KIR_diary_SG_protag_4_button_offset_X
                y = ROOT.KIR_diary_SG_protag_4_button_offset_Y
			}
			KIR_diary_SG_protag_5_button = {
				frame = protagonist_frame^4
                x = ROOT.KIR_diary_SG_protag_5_button_offset_X
                y = ROOT.KIR_diary_SG_protag_5_button_offset_Y
			}
			KIR_diary_SG_protag_6_button = {
				frame = protagonist_frame^5
                x = ROOT.KIR_diary_SG_protag_6_button_offset_X
                y = ROOT.KIR_diary_SG_protag_6_button_offset_Y
			}
			KIR_diary_SG_popup_toggle_button = {
				frame = KIR_diary_SG_popup_toggle_button_frame
			}
		}

		triggers = {
			KIR_diary_SG_protag_1_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_1_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_2_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_2_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_3_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_3_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_4_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_4_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_5_button_visible = {
				has_country_flag = KIR_diary_SG_protag_5_AVAILABLE_flag
			}
			KIR_diary_SG_protag_6_button_visible = {
				has_country_flag = KIR_diary_SG_protag_6_AVAILABLE_flag
			}
		}

		effects = {
			KIR_diary_SG_protag_1_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 1 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_protag_2_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 2 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_protag_3_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 3 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_protag_4_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 4 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_protag_5_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 5 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_protag_6_button_click = {
				set_temp_variable = { temp_KIR_diary_entry = -1 }
				set_temp_variable = { temp_KIR_diary_protag = 6 }
				KIR_diary_set_active_protagonist = yes
			}
			KIR_diary_SG_popup_toggle_button_click = {
				if = {
					limit = {
						has_country_flag = KIR_diary_SG_popup_toggle_YES
					}
					clr_country_flag = KIR_diary_SG_popup_toggle_YES
					set_variable = { KIR_diary_SG_popup_toggle_button_frame = 1 }
					add_to_variable = { KIR_diary_SG_DIRTY = 1 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = KIR_diary_SG_popup_toggle_YES }
					}
					set_country_flag = KIR_diary_SG_popup_toggle_YES
					set_variable = { KIR_diary_SG_popup_toggle_button_frame = 2 }
					add_to_variable = { KIR_diary_SG_DIRTY = 1 }
				}
			}
			KIR_diary_SG_ESC_click = {
				clr_country_flag = KIR_toggled_diary_SG
				set_variable = { KIR_diary_SG_entry_var = 0 }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}

	KIR_diary_SG_protag_window = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"

		visible = {
			always = yes # Visibility handled by the dynamic list
		}

		window_name = "KIR_diary_SG_protag_window"

		dirty = KIR_diary_SG_DIRTY

		dynamic_lists = {
			KIR_entry_button_gridbox = {
				array = KIR_current_entries
				change_scope = no
				index = KIR_diary_index_button
				value = KIR_diary_value_button
				entry_container = KIR_entry_button_cell
			}
		}

		triggers = {
			KIR_entry_button_visible = {
				if = {
					limit = {
						check_variable = { KIR_diary_index_button = KIR_diary_active_entry }
					}
					set_temp_variable = { temp_KIR_diary_button_frame = 2 }
				}
				else = {
					set_temp_variable = { temp_KIR_diary_button_frame = 1 }
				}
			}
		}

		properties = {
			KIR_entry_button = {
				frame = temp_KIR_diary_button_frame
			}
		}

		effects = {
			KIR_entry_button_click = {
				set_variable = { KIR_diary_active_entry = KIR_diary_index_button }

				meta_effect = {
					text = {
						set_variable = {
							KIR_diary_entry_content = token:[ENTRY_TOKEN]_CONTENT
						}
					}
					
					ENTRY_TOKEN = "[?KIR_diary_value_button.GetTokenKey]"
				}

				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}

	KIR_great_leap_decision_image = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIR
				has_completed_focus = KIR_focus_3b
			}
		}

		window_name = "KIR_great_leap_decision_window"
		
		properties = {
			Image = {
				x = ImageX
				y = ImageY
			}
			Title = {
				x = TitleX
				y = TitleY
			}
			Description = {
				x = DescriptionX
				y = DescriptionY
			}
			Description2 = {
				x = Description2X
				y = Description2Y
			}
			Bar1Title = {
				x = Bar1TitleX
				y = Bar1TitleY
			}
			KIR_GGO_PROG_BAR = {
				frame = KIR_GGO_PROG_VAR
				x = KIR_GGO_PROG_BARX
				y = KIR_GGO_PROG_BARY
			}
			Frame1 = {
				x = Frame1X
				y = Frame1Y
			}
			KIR_GGO_PROG_NUM = {
				x = KIR_GGO_PROG_NUMX
				y = KIR_GGO_PROG_NUMY
			}
			Bar2Title = {
				x = Bar2TitleX
				y = Bar2TitleY
			}
			KIR_GGO_TIME_BAR = {
				frame = KIR_GGO_TIME_VAR
				x = KIR_GGO_TIME_BARX
				y = KIR_GGO_TIME_BARY
			}
			Frame2 = {
				x = Frame2X
				y = Frame2Y
			}
			KIR_GGO_TIME_NUM = {
				x = KIR_GGO_TIME_NUMX
				y = KIR_GGO_TIME_NUMY
			}
		}
		
		triggers = {
			Bar1Title_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			KIR_GGO_PROG_BAR_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			Frame1_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			KIR_GGO_PROG_NUM_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			Bar2Title_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			KIR_GGO_TIME_BAR_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			Frame2_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
			KIR_GGO_TIME_NUM_visible = {
				has_country_flag = KIR_national_focus_title_1_flag
			}
		}
	}

	KIS_nakp_treasury_image = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_unlocked_treasury
			}
		}

		window_name = "KIS_nakp_treasury_window"

		triggers = {
			KIS_nakp_treasury_current_balance_gold_coin_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}
			KIS_nakp_treasury_current_balance_background_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}
			KIS_nakp_treasury_current_balance_coins_amount_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}

			KIS_nakp_treasury_debt_balance_gold_coin_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}
			KIS_nakp_treasury_debt_balance_background_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}
			KIS_nakp_treasury_debt_balance_debt_amount_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}

			KIS_nakp_treasury_last_month_income_coin_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
			KIS_nakp_treasury_last_month_income_background_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
			KIS_nakp_treasury_last_month_income_income_amount_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
			KIS_nakp_treasury_return_loan_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIS_return_loan_indebted_tt
					check_variable = {
						var = KIS.TreasuryDebt
						value = 1000
						compare = greater_than_or_equals
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIS_nakp_treasury_return_loan_button_cost_tt
					check_variable = {
						var = KIS.TreasuryWealth
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}
			KIS_nakp_treasury_return_loan_icon_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIS_return_loan_indebted_tt
					check_variable = {
						var = KIS.TreasuryDebt
						value = 1000
						compare = greater_than_or_equals
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIS_nakp_treasury_return_loan_button_cost_tt
					check_variable = {
						var = KIS.TreasuryWealth
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}
		}

		ai_enabled = {
			original_tag = KIS
		}

		ai_test_interval = 48

		ai_weights = {
			KIS_nakp_treasury_return_loan_button_click = {
				ai_will_do = {
					base = 1
					modifier = {
						add = 10
						check_variable = {
							var = KIS.TreasuryWealth
							value = 10000
							compare = greater_than_or_equals
						}
					}
				}
			}
		}

		effects = {
			KIS_nakp_treasury_return_loan_button_click = {
				ROOT = {
					subtract_from_variable = {
						var = TreasuryWealth
						value = 1000
					}
					subtract_from_variable = {
						var = TreasuryDebt
						value = 1000
					}
					if = {
						limit = {
							check_variable = {
								var = KIS_take_out_loan_decision_cost
								value = 25
								compare = greater_than
							}
						}
						subtract_from_variable = {
							var = KIS_take_out_loan_decision_cost
							value = 5
						}
					}
				}
			}
			KIS_nakp_treasury_return_loan_button_shift_click = {
				ROOT = {
					if = {
						limit = {
							check_variable = {
								var = TreasuryWealth
								value = TreasuryDebt
								compare = greater_than_or_equals
							}
						}
						subtract_from_variable = {
							var = TreasuryWealth
							value = TreasuryDebt
						}
						set_variable = { TreasuryDebt = 0 }
						set_variable = { KIS_take_out_loan_decision_cost = 25 }
					}
					else_if = {
						limit = {
							check_variable = {
								var = TreasuryWealth
								value = TreasuryDebt
								compare = less_than
							}
						}
						set_temp_variable = { AvailableTreasuryWealth = TreasuryWealth }
						divide_temp_variable = { AvailableTreasuryWealth = 1000 }
						subtract_from_temp_variable = { AvailableTreasuryWealth = 0.5 }
						clamp_temp_variable = {
							min = 0
							var = AvailableTreasuryWealth
						}
						round_temp_variable = AvailableTreasuryWealth
						multiply_temp_variable = { AvailableTreasuryWealth = 1000 }
						subtract_from_variable = {
							var = TreasuryWealth
							value = AvailableTreasuryWealth
						}
						subtract_from_variable = {
							var = TreasuryDebt
							value = AvailableTreasuryWealth
						}
						
						set_temp_variable = { KIS_new_take_out_loan_decision_cost = TreasuryDebt }
						divide_temp_variable = { KIS_new_take_out_loan_decision_cost = 1000 }
						multiply_temp_variable = { KIS_new_take_out_loan_decision_cost = 5 }
						set_variable = { KIS_take_out_loan_decision_cost = 25 }
						add_to_variable = { KIS_take_out_loan_decision_cost = KIS_new_take_out_loan_decision_cost }
						clamp_variable = {
							min = 25
							max = 150
							var = KIS_take_out_loan_decision_cost
						}
					}
				}
			}
		}
	}

	KIS_plebiscite_progress_bar_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_northern_compact_plebiscite_begun
			}
		}

		window_name = "KIS_plebiscite_progress_bar_GUI_window"

		properties = {
			KIS_plebiscite_progress_bar = {
				frame = KIS.KIS_plebiscite_average_popular_support
			}
		}
	}

	KIS_state_corporate_vassal_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_state_corporate_vassal_GUI_enabled_flag
			}
			if = {
				limit = {
					KIS = {
						has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
					}
				}
				OR = {
					is_controlled_by = KIS
					AND = {
						owner = {
							is_subject_of = KIS
						}
						is_controlled_by = owner
					}
				}
			}
			else_if = {
				limit = {
					KIS = {
						NOT = {
							has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
						}
					}
				}
				is_controlled_by = KIS
			}
		}

		window_name = "KIS_state_corporate_vassal_GUI_container"

		dirty = KIS_state_corporate_vassal_SG_DIRTY

		effects = {
			KIS_state_corporate_vassal_GUI_selection_button_click = {
				ROOT = {
					set_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
					add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
				}
			}
		}

		triggers = {
			KIS_state_corporate_vassal_GUI_add_icon_visible = {
				THIS = {
					NOT = {
						has_state_flag = KIS_selected_SYCEE_state_flag
						has_state_flag = KIS_selected_GUILD_state_flag
						has_state_flag = KIS_selected_SORGHUM_state_flag
						has_state_flag = KIS_selected_BULL_state_flag
						has_state_flag = KIS_selected_RHAPSODY_state_flag
						has_state_flag = KIS_selected_COLLEGIUM_state_flag
						has_state_flag = KIS_selected_CRANE_state_flag
						has_state_flag = KIS_selected_WINGLUCK_state_flag
						has_state_flag = KIS_selected_FRAGRANCE_state_flag
						has_state_flag = KIS_selected_DREAMBOAT_state_flag
						has_state_flag = KIS_selected_SCARLET_state_flag
						has_state_flag = KIS_selected_KIRIA_state_flag
					}
				}
			}
			KIS_state_corporate_vassal_SYCEE_visible = {
				THIS = {
					has_state_flag = KIS_selected_SYCEE_state_flag
				}
			}
			KIS_state_corporate_vassal_GUILD_visible = {
				THIS = {
					has_state_flag = KIS_selected_GUILD_state_flag
				}
			}
			KIS_state_corporate_vassal_SORGHUM_visible = {
				THIS = {
					has_state_flag = KIS_selected_SORGHUM_state_flag
				}
			}
			KIS_state_corporate_vassal_BULL_visible = {
				THIS = {
					has_state_flag = KIS_selected_BULL_state_flag
				}
			}
			KIS_state_corporate_vassal_RHAPSODY_visible = {
				THIS = {
					has_state_flag = KIS_selected_RHAPSODY_state_flag
				}
				ROOT = {
					NOT = {
						has_country_flag = KIR_rhapsody_arsenal_rebranded_available
					}
				}
			}
			KIS_state_corporate_vassal_RHAPSODY_rebranded_visible = {
				THIS = {
					has_state_flag = KIS_selected_RHAPSODY_state_flag
				}
				ROOT = {
					has_country_flag = KIR_rhapsody_arsenal_rebranded_available
				}
			}
			KIS_state_corporate_vassal_COLLEGIUM_visible = {
				THIS = {
					has_state_flag = KIS_selected_COLLEGIUM_state_flag
				}
			}
			KIS_state_corporate_vassal_CRANE_visible = {
				THIS = {
					has_state_flag = KIS_selected_CRANE_state_flag
				}
			}
			KIS_state_corporate_vassal_WINGLUCK_visible = {
				THIS = {
					has_state_flag = KIS_selected_WINGLUCK_state_flag
				}
			}
			KIS_state_corporate_vassal_FRAGRANCE_visible = {
				THIS = {
					has_state_flag = KIS_selected_FRAGRANCE_state_flag
				}
			}
			KIS_state_corporate_vassal_DREAMBOAT_visible = {
				THIS = {
					has_state_flag = KIS_selected_DREAMBOAT_state_flag
				}
			}
			KIS_state_corporate_vassal_SCARLET_visible = {
				THIS = {
					has_state_flag = KIS_selected_SCARLET_state_flag
				}
			}
			KIS_state_corporate_vassal_KIRIA_visible = {
				THIS = {
					has_state_flag = KIS_selected_KIRIA_state_flag
				}
			}
		}
	}

	KIS_state_corporate_vassal_selection_menu_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
			}
			if = {
				limit = {
					KIS = {
						has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
					}
				}
				OR = {
					is_controlled_by = KIS
					AND = {
						owner = {
							is_subject_of = KIS
						}
						is_controlled_by = owner
					}
				}
			}
			else_if = {
				limit = {
					KIS = {
						NOT = {
							has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
						}
					}
				}
				is_controlled_by = KIS
			}
		}

		window_name = "KIS_state_corporate_vassal_selection_menu_GUI_container"

		dirty = KIS_state_corporate_vassal_SG_DIRTY

		effects = {
			KIS_state_corporate_vassal_selection_menu_close_button_click = {
				ROOT = {
					clr_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SYCEE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SYCEE_state_flag
						add_dynamic_modifier = { modifier = KIS_SYCEE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SYCEE_cost_var }
						add_to_variable = { KIS_SYCEE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SYCEE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SYCEE_state_flag
						remove_dynamic_modifier = { modifier = KIS_SYCEE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SYCEE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_COLLEGIUM_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_COLLEGIUM_state_flag
						add_dynamic_modifier = { modifier = KIS_COLLEGIUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_COLLEGIUM_country_modifier }
						add_to_variable = { KIS_COLLEGIUM_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_COLLEGIUM_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_COLLEGIUM_cost_var }
						add_to_variable = { KIS_COLLEGIUM_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_COLLEGIUM_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_COLLEGIUM_state_flag
						remove_dynamic_modifier = { modifier = KIS_COLLEGIUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_COLLEGIUM_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_COLLEGIUM_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_COLLEGIUM_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_GUILD_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_GUILD_state_flag
						add_dynamic_modifier = { modifier = KIS_GUILD_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_GUILD_cost_var }
						add_to_variable = { KIS_GUILD_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_GUILD_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_GUILD_state_flag
						remove_dynamic_modifier = { modifier = KIS_GUILD_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_GUILD_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SORGHUM_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SORGHUM_state_flag
						add_dynamic_modifier = { modifier = KIS_SORGHUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SORGHUM_cost_var }
						add_to_variable = { KIS_SORGHUM_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SORGHUM_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SORGHUM_state_flag
						remove_dynamic_modifier = { modifier = KIS_SORGHUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SORGHUM_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_RHAPSODY_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_RHAPSODY_state_flag
						add_dynamic_modifier = { modifier = KIS_RHAPSODY_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_RHAPSODY_country_modifier }
						subtract_from_variable = { KIS_RHAPSODY_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_RHAPSODY_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_RHAPSODY_cost_var }
						add_to_variable = { KIS_RHAPSODY_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_RHAPSODY_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_RHAPSODY_state_flag
						remove_dynamic_modifier = { modifier = KIS_RHAPSODY_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame = 1 }
					}
					ROOT = {
						add_to_variable = { KIS_RHAPSODY_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_RHAPSODY_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS_RHAPSODY_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_BULL_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_BULL_state_flag
						add_dynamic_modifier = { modifier = KIS_BULL_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_BULL_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_BULL_cost_var }
						add_to_variable = { KIS_BULL_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_BULL_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_BULL_state_flag
						remove_dynamic_modifier = { modifier = KIS_BULL_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_BULL_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_BULL_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_CRANE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_CRANE_state_flag
						add_dynamic_modifier = { modifier = KIS_CRANE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_CRANE_cost_var }
						add_to_variable = { KIS_CRANE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_CRANE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_CRANE_state_flag
						remove_dynamic_modifier = { modifier = KIS_CRANE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_CRANE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_WINGLUCK_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_WINGLUCK_state_flag
						add_dynamic_modifier = { modifier = KIS_WINGLUCK_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_WINGLUCK_country_modifier }
						subtract_from_variable = { KIS_WINGLUCK_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_WINGLUCK_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_WINGLUCK_cost_var }
						add_to_variable = { KIS_WINGLUCK_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_WINGLUCK_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_WINGLUCK_state_flag
						remove_dynamic_modifier = { modifier = KIS_WINGLUCK_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame = 1 }
					}
					ROOT = {
						add_to_variable = { KIS_WINGLUCK_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_WINGLUCK_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS_WINGLUCK_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_FRAGRANCE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_FRAGRANCE_state_flag
						set_variable = { KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_FRAGRANCE_country_modifier }
						add_to_variable = { KIS_FRAGRANCE_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_FRAGRANCE_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_FRAGRANCE_cost_var }
						add_to_variable = { KIS_FRAGRANCE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_FRAGRANCE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_FRAGRANCE_state_flag
						set_variable = { KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_FRAGRANCE_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_FRAGRANCE_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_FRAGRANCE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_DREAMBOAT_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_DREAMBOAT_state_flag
						add_dynamic_modifier = { modifier = KIS_DREAMBOAT_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_DREAMBOAT_country_modifier }
						add_to_variable = { KIS_DREAMBOAT_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_DREAMBOAT_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_DREAMBOAT_cost_var }
						add_to_variable = { KIS_DREAMBOAT_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_DREAMBOAT_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_DREAMBOAT_state_flag
						remove_dynamic_modifier = { modifier = KIS_DREAMBOAT_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_DREAMBOAT_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_DREAMBOAT_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_DREAMBOAT_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SCARLET_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SCARLET_state_flag
						add_dynamic_modifier = { modifier = KIS_SCARLET_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_SCARLET_country_modifier }
						add_to_variable = { KIS_SCARLET_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_SCARLET_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SCARLET_cost_var }
						add_to_variable = { KIS_SCARLET_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SCARLET_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SCARLET_state_flag
						remove_dynamic_modifier = { modifier = KIS_SCARLET_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SCARLET_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_SCARLET_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.KIS_SCARLET_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_KIRIA_state_flag
						}
					}
					if = {
						limit = {
							THIS = {
								is_controlled_by = KIS
							}
							KIS = {
								has_country_flag = KIS_Corp_of_Kiria_core_state
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							add_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier }
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					if = {
						limit = {
							THIS = {
								is_controlled_by = KIS
							}
							KIS = {
								has_country_flag = KIS_Corp_of_Kiria_non_core_state
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							add_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier_non_core }
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					if = {
						limit = {
							THIS = {
								owner = {
									is_subject_of = KIS
								}
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							owner = {
								give_resource_rights = { receiver = KIS state = PREV }
								if = {
									limit = {
										NOT = { has_country_flag = KIS_KIRIA_CORP_reduce_autonomy_cooldown }
									}
									add_autonomy_score = {
										value = -200
										localization = KIS_corporation_of_kiria_reason_autonomy_points
									}
									set_country_flag = { flag = KIS_KIRIA_CORP_reduce_autonomy_cooldown days = 90 value = 1 }
								}
							}
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_KIRIA_cost_var }
						add_to_variable = { KIS.KIS_KIRIA_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_KIRIA_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_KIRIA_state_flag
						remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier }
						remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier_non_core }
						KIS = { remove_resource_rights = PREV }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS.KIS_KIRIA_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
		}

		triggers = {
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SYCEE_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						STH = {
							exists = yes
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_GUILD_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						KAG = {
							exists = yes
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SORGHUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_BULL_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_RHAPSODY_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_COLLEGIUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_CRANE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_WINGLUCK_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_FRAGRANCE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_DREAMBOAT_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SCARLET_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_KIRIA_cost_var
						compare = greater_than_or_equals
					}
				}
			}

			KIS_state_corporate_vassal_GUI_selection_SYCEE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SYCEE_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						STH = {
							exists = yes
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_GUILD_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						KAG = {
							exists = yes
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SORGHUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_BULL_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_RHAPSODY_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_COLLEGIUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_CRANE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_WINGLUCK_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_FRAGRANCE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_DREAMBOAT_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SCARLET_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_idea_icon_click_enabled = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_KIRIA_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_icon_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIRIA_textbox_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIRIA_COST_textbox_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_idea_icon_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_visible = {
				ROOT = {
					NOT = {
						has_country_flag = KIR_rhapsody_arsenal_rebranded_available
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_rebranded_visible = {
				ROOT = {
					has_country_flag = KIR_rhapsody_arsenal_rebranded_available
				}
			}
		}

		properties = {
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_BULL_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SYCEE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_BULL_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame
			}
		}
	}

	KIC_state_actions_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			ROOT = {
				original_tag = KIC
				OR = {
					has_country_flag = KIC_chose_agressive_offensive_route
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
			}
			THIS = {
				OR = {
					region = 283
					region = 316
					region = 94
					region = 85
					region = 82
					region = 79
					region = 31
				}
			}
			if = {
				limit = {
					KIC = {
						has_country_flag = KIC_chose_agressive_offensive_route
					}
				}
				OR = {
					is_controlled_by = KIC
					AND = {
						owner = {
							is_subject_of = KIC
						}
						is_controlled_by = owner
					}
				}
			}
			else_if = {
				limit = {
					KIC = {
						has_country_flag = KIC_chose_defensive_maneuver_route
					}
				}
				## No Additional Checks
			}
		}

		window_name = "KIC_state_actions_GUI_container"

		dirty = KIC_state_actions_SG_DIRTY

		triggers = {
			KIC_state_actions_recruitment_button_visible = {
				KIC = {
					command_power > 4
					has_political_power > 9
				}
				THIS = {
					state_population > KIC.KIC_state_actions_recruitment_LIMIT_var ## 10x of KIC.KIC_state_actions_recruitment_POSITIVE_var
					check_variable = { KIC_state_actions_recruitment_COOLDOWN_var = 0 }
					is_fully_controlled_by = KIC
				}
			}
			KIC_state_actions_conscription_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_agressive_offensive_route
					has_political_power > 19
					has_manpower > 1999
				}
				THIS = {
					state_population > KIC.KIC_state_actions_conscription_LIMIT_var ## 20x of KIC.KIC_state_actions_conscription_NEGATIVE_var
					check_variable = { KIC_state_actions_conscription_COOLDOWN_var = 0 }
					if = {
						limit = {
							NOT = {
								is_core_of = KIC
							}
						}
						is_fully_controlled_by = KIC
					}
					else_if = {
						limit = {
							is_core_of = KIC
						}
						is_controlled_by = KIC
					}
				}
			}
			KIC_uprising_preparation_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
					command_power > 9
					has_manpower > 1199
				}
				THIS = {
					NOT = {
						has_state_flag = KIC_uprising_prepared_flag
					}
					state_population > KIC.KIC_state_actions_uprising_LIMIT_var ## 20x of KIC.KIC_state_actions_uprising_NEGATIVE_var
					check_variable = { KIC_state_actions_uprising_COOLDOWN_var = 0 }
					if = {
						limit = {
							CONTROLLER = {
								NOT = {
									original_tag = KIC
								}
							}
						}
						CONTROLLER = {
							has_war_with = KIC
						}
						if = {
							limit = {
								NOT = {
									is_core_of = KIC
								}
							}
							any_neighbor_state = {
								is_controlled_by = KIC
								PREV = {
									any_neighbor_state = {
										NOT = { state = PREV.PREV }
										is_controlled_by = KIC
									}
								}
							}
						}
						else_if = {
							limit = {
								is_core_of = KIC
							}
							any_neighbor_state = {
								is_controlled_by = KIC
							}
						}
					}
				}
			}
			KIC_uprising_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
					has_political_power > 19
				}
				THIS = {
					has_state_flag = KIC_uprising_prepared_flag
					NOT = {
						is_controlled_by = KIC
					}
					CONTROLLER = {
						has_war_with = KIC
					}
					if = {
						limit = {
							CONTROLLER = {
								NOT = {
									original_tag = KIC
								}
							}
						}
						is_capital = no
					}
				}
			}
			KIC_uprising_preparation_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
				THIS = {
					NOT = {
						has_state_flag = KIC_uprising_prepared_flag
					}
				}
			}
			KIC_uprising_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
				THIS = {
					has_state_flag = KIC_uprising_prepared_flag
				}
			}
			KIC_conscription_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_agressive_offensive_route
				}
			}
		}

		ai_enabled = {
			original_tag = KIC
		}

		ai_test_interval = 48
		ai_test_scopes = test_self_controlled_states
		ai_test_scopes = test_enemy_controlled_states

		ai_weights = {
			KIC_state_actions_recruitment_button_click = {
				ai_will_do = {
					base = 1
					modifier = {
						add = 10
						KIC = { NOT = { has_full_control_of_state = PREV } }
					}
				}
			}
			KIC_state_actions_conscription_button_click = {
				ai_will_do = { base = 1 }
			}
			KIC_uprising_preparation_button_click = {
				ai_will_do = {
					base = 1
					modifier = {
						add = -2
						KIC = { has_political_power < 10 }
					}
				}
			}
			KIC_uprising_button_click = {
				ai_will_do = {
					base = 1
					modifier = {
						add = 50
						has_state_flag = KIC_uprising_prepared_flag
					}
				}
			}
		}

		effects = {
			KIC_state_actions_recruitment_button_click = {
				THIS = {
					add_manpower = KIC.KIC_state_actions_recruitment_NEGATIVE_var
					set_variable = { KIC_state_actions_recruitment_COOLDOWN_var = KIC.KIC_state_actions_recruitment_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					add_manpower = KIC.KIC_state_actions_recruitment_POSITIVE_var
					add_command_power = -5
					add_political_power = -10
				}
			}
			KIC_state_actions_conscription_button_click = {
				KIC = {
					save_current_manpower = yes
				}
				THIS = {
					add_manpower = KIC.KIC_state_actions_conscription_NEGATIVE_var
					create_unit = {
						division = "division_template = \"Militiakirin Banner\" start_equipment_factor = 0.5 start_experience_factor = 0"
						owner = KIC
						count = KIC.KIC_state_actions_conscription_NUM_O_BANNERS_var
					}
					set_variable = { KIC_state_actions_conscription_COOLDOWN_var = KIC.KIC_state_actions_conscription_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					restore_previous_manpower = yes
					add_political_power = -20
					country_event = { id = kirin_utility.22 hours = 1 }
				}
			}
			KIC_uprising_preparation_button_click = {
				THIS = {
					set_state_flag = KIC_uprising_prepared_flag
					if = {
						limit = {
							THIS = {
								is_core_of = KIC
							}
						}
						add_dynamic_modifier = { modifier = KIC_uprising_brewing_core }
					}
					else_if = {
						limit = {
							THIS = {
								NOT = {
									is_core_of = KIC
								}
							}
						}
						add_dynamic_modifier = { modifier = KIC_uprising_brewing_non_core }
					}
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					add_command_power = -10
					country_event = { id = kirin_utility.24 hours = 1 }
				}
			}
			KIC_uprising_button_click = {
				KIC = {
					save_current_manpower = yes
				}
				THIS = {
					add_manpower = KIC.KIC_state_actions_uprising_NEGATIVE_var
					meta_effect = {
						text = {
							THIS = {
								create_unit = {
									division = "name = \"First [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.055 start_equipment_factor = 0.33"
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
								create_unit = {
									division = "name = \"Second [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.05 start_equipment_factor = 0.33"
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
								create_unit = {
									division = "name = \"Third [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.05 start_equipment_factor = 0.33"
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
							}
							if = {
								limit = {
									KIC = {
										check_variable = { KIC_state_actions_uprising_NUM_O_BANNERS_var > 3 }
									}
								}
								THIS = {
									create_unit = {
										division = "name = \"Fifth [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.055 start_equipment_factor = 0.33"
										owner = KIC
										count = 1
										allow_spawning_on_enemy_provs = yes
									}
								}
							}
						}
						KIC_INCENDIARIES_STATE_NAME = "[THIS.GetName]"
					}
					set_variable = { KIC_state_actions_uprising_COOLDOWN_var = KIC.KIC_state_actions_uprising_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
					clr_state_flag = KIC_uprising_prepared_flag
					if = {
						limit = {
							THIS = {
								NOT = {
									is_core_of = KIC
								}
							}
						}
						THIS = {
							state_event = {
								id = kirin_republic.18
								hours = 1
								trigger_for = owner
							}
							state_event = {
								id = kirin_republic.18
								hours = 1
								trigger_for = ROOT
							}
						}
					}
				}
				KIC = {
					add_political_power = -20
					restore_previous_manpower = yes
				}
			}
		}
	}

	KIR_power_struggle_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIR
				has_country_flag = KIR_power_struggle_ongoing_flag
			}
		}

		window_name = "KIR_power_struggle_GUI_window"

		properties = {
			KIR_power_struggle_bar = {
				frame = KIR.KIR_power_struggle_WF_var
			}
		}

		triggers = {
			KIR_power_struggle_red_60_visible = {
				check_variable = {
					var = KIR_power_struggle_RS_var
					value = 60
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_red_75_visible = {
				check_variable = {
					var = KIR_power_struggle_RS_var
					value = 75
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_blue_60_visible = {
				check_variable = {
					var = KIR_power_struggle_WF_var
					value = 60
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_blue_75_visible = {
				check_variable = {
					var = KIR_power_struggle_WF_var
					value = 75
					compare = greater_than_or_equals
				}
			}
		}
	}

	COC_power_struggle_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIC
				has_country_flag = KIC_children_of_concord_flag
			}
		}

		window_name = "COC_power_struggle_GUI_window"

		properties = {
			COC_PS_DS_Progress_Bar = {
				frame = COC_power_struggle_DR_Progress_Bar_var
			}
			COC_PS_KF_Progress_Bar = {
				frame = COC_power_struggle_KF_Progress_Bar_var
			}
		}
	}

	KIC_POST_WAR_BANNER_JURISDICTION_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			ROOT = {
				original_tag = KIC
				has_country_flag = KIC_unlock_postwar_banner_jurisdiction
			}
			THIS = {
				is_owned_and_controlled_by = ROOT
				if = {
					limit = {
						KIC = {
							NOT = {
								has_country_flag = KIR_republic_postwar_focus_XY_flag
							}
						}
					}
					OR = {
						region = 283
						region = 316
						region = 94
						region = 85
						region = 82
						region = 79
						region = 31
						state = 1065 ##Auburn Isle
						region = 279 ##Zebrides
						state = 1160 ##Pulalap
					}
				}
				if = {
					limit = {
						KIC = {
							has_country_flag = KIR_republic_postwar_focus_XY_flag
						}
					}
					OR = {
						region = 283
						region = 316
						region = 94
						region = 85
						region = 82
						region = 79
						region = 31
						state = 1065
						region = 279
						state = 1160
						state = 1126
						state = 1127
						state = 1128
						state = 1129
						state = 1130
						state = 1131
						state = 1132
						state = 1133
						state = 1134
						state = 1135
					}
				}
			}
		} ##should I be using an array for this

		window_name = "KIC_POST_WAR_BANNER_JURISDICTION_GUI_WINDOW"
		
		dirty = KIC_POST_WAR_BANNER_JURISDICTION_DIRTY
		
		triggers = {
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_1_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_2_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_1_TITLE_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_2_TITLE_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_31_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_32_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_4_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_3_TITLE_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}
			KIC_POST_WAR_BANNER_JURISDICTION_ICON_4_TITLE_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}
			KIC_POST_WAR_BANNER_LOCK_1_visible = {
				THIS = {
					is_core_of = ROOT
				}
				ROOT = {
					NOT = {
						has_country_flag = KIC_POST_WAR_BANNER_JURISDICTION_ACTION_1_2_UNLOCKED
					}
				}
			}
			KIC_POST_WAR_BANNER_LOCK_2_visible = {
				THIS = {
					is_core_of = ROOT
				}
				ROOT = {
					NOT = {
						has_country_flag = KIC_POST_WAR_BANNER_JURISDICTION_ACTION_1_2_UNLOCKED
					}
				}
			}
			KIC_POST_WAR_BANNER_LOCK_3_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
				ROOT = {
					NOT = {
						has_country_flag = KIC_POST_WAR_BANNER_JURISDICTION_ACTION_3_UNLOCKED
					}
				}
			}
			KIC_POST_WAR_BANNER_LOCK_4_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
				ROOT = {
					NOT = {
						has_country_flag = KIC_POST_WAR_BANNER_JURISDICTION_ACTION_4_UNLOCKED
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_ADD_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_MIN_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_1_DISPLAY_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_ADD_click_enabled = {
				KIC = {
					has_manpower > 1000
					custom_trigger_tooltip = {
						tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_cap_tt
						check_variable = {
							var = BANNER_JURISDICTION_VAR_1
							value = 0.3
							compare = less_than
						}
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_MIN_click_enabled = {
				KIC = {
					custom_trigger_tooltip = {
						tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_MIN_withdraw_tt
						check_variable = {
							var = BANNER_JURISDICTION_VAR_1_MP
							value = 1000
							compare = greater_than_or_equals
						}
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_ADD_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_MIN_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_2_DISPLAY_visible = {
				THIS = {
					is_core_of = ROOT
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_ADD_click_enabled = {
				KIC = {
					has_manpower > 1000
					custom_trigger_tooltip = {
						tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_cap_tt
						check_variable = {
							var = BANNER_JURISDICTION_VAR_2
							value = 0.3
							compare = less_than
						}
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_MIN_click_enabled = {
				KIC = {
					custom_trigger_tooltip = {
						tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_MIN_withdraw_tt
						check_variable = {
							var = BANNER_JURISDICTION_VAR_2_MP
							value = 1000
							compare = greater_than_or_equals
						}
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_ADD_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_MIN_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_3_DISPLAY_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_ADD_click_enabled = {
				KIC = { has_manpower > 3000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_3
						value = -0.3
						compare = greater_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_3_MP
						value = 3000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_ADD_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_MIN_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_4_DISPLAY_visible = {
				THIS = {
					NOT = { is_core_of = ROOT }
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_ADD_click_enabled = {
				KIC = { has_manpower > 1000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_4
						value = 0.3
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_4_MP
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_ADD_click_enabled = {
				KIC = { has_manpower > 2000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_5
						value = THIS.BANNER_JURISDICTION_VARS_CAP
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_5_MP
						value = 2000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_ADD_click_enabled = {
				KIC = { has_manpower > 5000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_cap_tt
					check_variable = {
						var = THIS.BANNER_JURISDICTION_VAR_6
						value = 0.25
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_6_MP
						value = 5000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_ADD_click_enabled = {
				KIC = { has_manpower > 1000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_7
						value = 0.3
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_7_MP
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_ADD_click_enabled = {
				KIC = { has_manpower > 1000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_8
						value = KIC.BANNER_JURISDICTION_PRODUCTION_VARS_CAP
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_8_MP
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_ADD_click_enabled = {
				KIC = { has_manpower > 8000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_9
						value = KIC.BANNER_JURISDICTION_PROSPECTING_VARS_CAP
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_9_MP
						value = 8000
						compare = greater_than_or_equals
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_ADD_click_enabled = {
				KIC = { has_manpower > 1000 }
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_cap_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_10
						value = THIS.BANNER_JURISDICTION_VARS_CAP
						compare = less_than
					}
				}
			}

			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_MIN_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_MIN_withdraw_tt
					check_variable = {
						var = BANNER_JURISDICTION_VAR_10_MP
						value = 1000
						compare = greater_than_or_equals
					}
				}
			}
		}

		effects = {
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_ADD_click = {
				ROOT = {
					add_manpower = -1000
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER_COUNTRY }
					add_to_variable = { BANNER_JURISDICTION_VAR_1 = 0.002 }
					add_to_variable = { BANNER_JURISDICTION_VAR_1_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_1
						min = 0
						max = 0.3
					}
				}
				ROOT = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_1_MIN_click = {
				ROOT = {
					add_manpower = 1000
					subtract_from_variable = { BANNER_JURISDICTION_VAR_1 = 0.002 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_1_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_1
						min = 0
						max = 0.3
					}
				}
				ROOT = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_ADD_click = {
				ROOT = {
					add_manpower = -1000
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER_COUNTRY }
					add_to_variable = { BANNER_JURISDICTION_VAR_2 = 0.002 }
					add_to_variable = { BANNER_JURISDICTION_VAR_2_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_2
						min = 0
						max = 0.3
					}
				}
				ROOT = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_2_MIN_click = {
				ROOT = {
					add_manpower = 1000
					subtract_from_variable = { BANNER_JURISDICTION_VAR_2 = 0.002 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_2_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_2
						min = 0
						max = 0.3
					}
				}
				ROOT = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_3 = 0.01 }
					add_to_variable = { BANNER_JURISDICTION_VAR_3_MP = 3000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_3
						min = -0.3
						max = 0
					}
				}
				ROOT = {
					add_manpower = -3000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_3_MIN_click = {
				THIS = {
					add_to_variable = { BANNER_JURISDICTION_VAR_3 = 0.01 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_3_MP = 3000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_3
						min = -0.3
						max = 0
					}
				}
				ROOT = {
					add_manpower = 3000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_4 = 0.01 }
					add_to_variable = { BANNER_JURISDICTION_VAR_4_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_4
						min = 0
						max = 0.3
					}
				}
				ROOT = {
					add_manpower = -1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_4_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_4 = 0.01 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_4_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_4
						min = 0
						max = 0.3
					}
				}
				ROOT = {
					add_manpower = 1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_5 = 0.01 }
					add_to_variable = { BANNER_JURISDICTION_VAR_5_MP = 2000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_5
						min = 0
						max = THIS.BANNER_JURISDICTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = -2000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_5_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_5 = 0.01 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_5_MP = 2000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_5
						min = 0
						max = THIS.BANNER_JURISDICTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = 2000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_6 = 0.05 }
					add_to_variable = { BANNER_JURISDICTION_VAR_6_MP = 5000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_6
						min = 0
						max = 0.25
					}
				}
				ROOT = {
					add_manpower = -5000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_6_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_6 = 0.05 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_6_MP = 5000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_6
						min = 0
						max = 0.25
					}
				}
				ROOT = {
					add_manpower = 5000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_7 = 0.01 }
					add_to_variable = { BANNER_JURISDICTION_VAR_7_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_7
						min = 0
						max = 0.3
					}
				}
				ROOT = {
					add_manpower = -1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_7_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_7 = 0.01 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_7_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_7
						min = 0
						max = 0.3
					}
				}
				ROOT = {
					add_manpower = 1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_8 = KIC.BANNER_JURISDICTION_VAR_8_VAR }
					add_to_variable = { BANNER_JURISDICTION_VAR_8_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_8
						min = 0
						max = KIC.BANNER_JURISDICTION_PRODUCTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = -1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_8_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_8 = KIC.BANNER_JURISDICTION_VAR_8_VAR }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_8_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_8
						min = 0
						max = KIC.BANNER_JURISDICTION_PRODUCTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = 1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_9 = 0.1 }
					add_to_variable = { BANNER_JURISDICTION_VAR_9_MP = 8000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_9
						min = 0
						max = KIC.BANNER_JURISDICTION_PROSPECTING_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = -8000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_9_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_9 = 0.1 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_9_MP = 8000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_9
						min = 0
						max = KIC.BANNER_JURISDICTION_PROSPECTING_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = 8000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_ADD_click = {
				THIS = {
					add_dynamic_modifier = { modifier = KIC_BANNER_JURISDICTION_DYNAMIC_MODIFIER }
					add_to_variable = { BANNER_JURISDICTION_VAR_10 = 0.01 }
					add_to_variable = { BANNER_JURISDICTION_VAR_10_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_10
						min = 0
						max = THIS.BANNER_JURISDICTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = -1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
			KIC_POST_WAR_BANNER_JURISDICTION_BUTTON_10_MIN_click = {
				THIS = {
					subtract_from_variable = { BANNER_JURISDICTION_VAR_10 = 0.01 }
					subtract_from_variable = { BANNER_JURISDICTION_VAR_10_MP = 1000 }
					clamp_variable = {
						var = BANNER_JURISDICTION_VAR_10
						min = 0
						max = THIS.BANNER_JURISDICTION_VARS_CAP
					}
				}
				ROOT = {
					add_manpower = 1000
				}
				THIS = { add_to_variable = { KIC_POST_WAR_BANNER_JURISDICTION_DIRTY = 1 } }
			}
		}
	}

	KIR_FRV_FOCUS_FRAME = {
		context_type = player_context
		parent_window_token = national_focus

		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_FRV_flag
			}
		}

		window_name = "KIR_FRV_FOCUS_FRAME_GUI_WINDOW"
	}

	KIR_FRV_END_SCREEN = {
		context_type = player_context

		visible = {
			has_global_flag = KIR_FRV_END_SCREEN_visible_flag
			is_ai = no
		}

		window_name = "KIR_FRV_END_SCREEN_WINDOW"

		#triggers = {
		#	FRVESFlag2_visible = {
		#		FRV = {
		#			has_country_flag = FRV_commonwealth_flag
		#		}
		#	}
		#	FRVESFlag3_visible = {
		#		FRV = {
		#			has_country_flag = FRV_collective_flag
		#		}
		#	}
		#}
		
		triggers = {
			KIR_FRV_COM_FLAG_visible = {
				FRV = {
					has_country_flag = FRV_commonwealth_flag
				}
			}
			KIR_FRV_ANR_FLAG_visible = {
				FRV = {
					has_country_flag = FRV_collective_flag
				}
			}
		}

		effects = {
			KIR_FRV_END_SCREEN_BUTTON_click = {
				clr_global_flag = KIR_FRV_END_SCREEN_visible_flag
				set_global_flag = KIR_FRV_END_SCREEN_closed_flag
			}
		}
	}

	CHN_FRV_toggle = {
		context_type = player_context
		parent_window_token = politics_tab

		visible = {
			ROOT = {
				original_tag = CHN
				has_country_flag = CHN_FRV_flag
				has_country_flag = CHN_FRV_toggle_unlocked
			}
		}

		window_name = "CHN_FRV_toggle_window"

		#dirty = CHN_FRV_toggle_frame_var

		triggers = {
			CHN_FRV_SG_glowy_shiny_sparkly_glimmery_shimmery_thing_visible = {
				NOT = {
					has_country_flag = CHN_FRV_SG_clicked_flag
				}
			}
			CHN_FRV_CHELI_CERAE_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			CHN_FRV_Portrait_Frame_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_OVERLAY_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_OVERLAY_SUBIDEOLOGY_ICON_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_OVERLAY_TEXT_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_TITLE_OVERLAY_TEXT_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_OVERLAY_TRANSPARENT_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_OVERLAY_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_1_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_2_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_3_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_4_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_LEADER_NAME_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_PIE_OVERLAY_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
				has_country_flag = CHN_FRV_CHN_dissidents_liquidated_flag
			}
			KIR_CHN_FRV_POL_TAB_PARTY_PIE_BARS_visible = {
				has_country_flag = CHN_FRV_CHN_active_flag
				has_country_flag = CHN_FRV_CHN_dissidents_liquidated_flag
			}
			CHN_FRV_toggle_CHN_button_visible = {
				#check_variable = { CHN_FRV_toggle_frame_var = 0 }
				NOT = {
					has_country_flag = CHN_FRV_CHN_active_flag
				}
			}
			CHN_FRV_toggle_KIR_button_visible = {
				#check_variable = { CHN_FRV_toggle_frame_var = 1 }
				has_country_flag = CHN_FRV_CHN_active_flag
			}
		}

		effects = {
			CHN_FRV_toggle_CHN_button_click = {
				set_country_flag = CHN_FRV_SG_clicked_flag
				set_country_flag = CHN_FRV_CHN_active_flag
				set_variable = { CHN_FRV_toggle_frame_var = 1 }
				mark_focus_tree_layout_dirty = yes
			}
			CHN_FRV_toggle_KIR_button_click = {
				clr_country_flag = CHN_FRV_CHN_active_flag
				set_variable = { CHN_FRV_toggle_frame_var = 0 }
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	CFR_infiltration_category_SG = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			original_tag = CHN
			has_country_flag = CHN_FRV_flag
			has_country_flag = CFR_infiltration_category_unlocked_flag
		}

		triggers = {
			## No trigger needed for 1
			CFR_decisions_2_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_2_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_3_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_3_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_4_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_4_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_5_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_5_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_available
				}
			}
			CFR_decisions_6_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			CFR_decisions_6_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			CFR_decisions_7_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			CFR_decisions_7_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			CFR_decisions_8_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			CFR_decisions_8_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_infiltrate_country_state_available
				}
			}
			## No trigger needed for 9
			CFR_decisions_10_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			CFR_decisions_10_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			## No trigger needed for 11
			## 12 doesn't exist
			CFR_decisions_13_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			CFR_decisions_13_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			CFR_decisions_14_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			CFR_decisions_14_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_just_fuck_my_shit_up_darling_available
				}
			}
			CFR_decisions_15_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_imago_parastatal_available
				}
			}
			CFR_decisions_15_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_imago_parastatal_available
				}
			}
			CFR_decisions_16_button_click_enabled = {
				ROOT = {
					has_country_flag = CFR_imago_parastatal_available
				}
			}
			CFR_decisions_16_button_icon_click_enabled = {
				ROOT = {
					has_country_flag = CFR_imago_parastatal_available
				}
			}
		}

		properties = {
			CFR_decisions_1_button = {
				frame = CFR_decisions_1_button_frame
			}
			CFR_decisions_2_button = {
				frame = CFR_decisions_2_button_frame
			}
			CFR_decisions_3_button = {
				frame = CFR_decisions_3_button_frame
			}
			CFR_decisions_4_button = {
				frame = CFR_decisions_4_button_frame
			}
			CFR_decisions_5_button = {
				frame = CFR_decisions_5_button_frame
			}
			CFR_decisions_6_button = {
				frame = CFR_decisions_6_button_frame
			}
			CFR_decisions_7_button = {
				frame = CFR_decisions_7_button_frame
			}
			CFR_decisions_8_button = {
				frame = CFR_decisions_8_button_frame
			}
			CFR_decisions_9_button = {
				frame = CFR_decisions_9_button_frame
			}
			CFR_decisions_10_button = {
				frame = CFR_decisions_10_button_frame
			}
			CFR_decisions_11_button = {
				frame = CFR_decisions_11_button_frame
			}
			CFR_decisions_13_button = {
				frame = CFR_decisions_13_button_frame
			}
			CFR_decisions_14_button = {
				frame = CFR_decisions_14_button_frame
			}
			CFR_decisions_15_button = {
				frame = CFR_decisions_15_button_frame
			}
			CFR_decisions_16_button = {
				frame = CFR_decisions_16_button_frame
			}
		}

		effects = {
			CFR_decisions_1_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_1_button_frame = 1 }
					}
					set_country_flag = CFR_infiltrate_country_visible
					set_variable = { CFR_decisions_1_button_frame = 2 }
					##Update Zebrican Countries Array
					for_each_scope_loop = {
						array = global.countries
						if = {
							limit = {
								capital_scope = {
									is_on_continent = africa
								}
								NOT = {
									is_in_array = {
										array = CFR_infiltrated_countries_array
									}
									is_in_array = {
										array = CFR_zebrican_countries_array
									}
									has_country_flag = CFR_infiltrated_this_country
								}
							}
							add_to_array = {
								array = CFR.CFR_zebrican_countries_array
								value = THIS
							}
						}
					}
				}
				else = {
					clr_country_flag = CFR_infiltrate_country_visible
					set_variable = { CFR_decisions_1_button_frame = 1 }
				}
			}
			CFR_decisions_2_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_2_button_frame = 1 }
					}
					set_country_flag = CFR_steal_tech_visible
					set_variable = { CFR_decisions_2_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_steal_tech_visible
					set_variable = { CFR_decisions_2_button_frame = 1 }
				}
			}
			CFR_decisions_3_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_3_button_frame = 1 }
					}
					set_country_flag = CFR_INGOV_visible
					set_variable = { CFR_decisions_3_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_INGOV_visible
					set_variable = { CFR_decisions_3_button_frame = 1 }
				}
			}
			CFR_decisions_4_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_4_button_frame = 1 }
					}
					set_country_flag = CFR_BBO_visible
					set_variable = { CFR_decisions_4_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_BBO_visible
					set_variable = { CFR_decisions_4_button_frame = 1 }
				}
			}
			CFR_decisions_5_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_5_button_frame = 1 }
					}
					set_country_flag = CFR_FACTORY_visible
					set_variable = { CFR_decisions_5_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_FACTORY_visible
					set_variable = { CFR_decisions_5_button_frame = 1 }
				}
			}
			CFR_decisions_6_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_6_button_frame = 1 }
					}
					set_country_flag = CFR_disruption_operation_visible
					set_variable = { CFR_decisions_6_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_disruption_operation_visible
					set_variable = { CFR_decisions_6_button_frame = 1 }
				}
			}
			CFR_decisions_7_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_7_button_frame = 1 }
					}
					set_country_flag = CFR_resource_operation_visible
					set_variable = { CFR_decisions_7_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_resource_operation_visible
					set_variable = { CFR_decisions_7_button_frame = 1 }
				}
			}
			CFR_decisions_8_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_8_button_frame = 1 }
					}
					set_country_flag = CFR_sabotage_operation_visible
					set_variable = { CFR_decisions_8_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_sabotage_operation_visible
					set_variable = { CFR_decisions_8_button_frame = 1 }
				}
			}
			CFR_decisions_9_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_9_button_frame = 1 }
					}
					set_country_flag = CFR_peace_operation_visible
					set_variable = { CFR_decisions_9_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_peace_operation_visible
					set_variable = { CFR_decisions_9_button_frame = 1 }
				}
			}
			CFR_decisions_10_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_10_button_frame = 1 }
					}
					set_country_flag = CFR_call_into_war_visible
					set_variable = { CFR_decisions_10_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_call_into_war_visible
					set_variable = { CFR_decisions_10_button_frame = 1 }
				}
			}
			CFR_decisions_11_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_11_button_frame = 1 }
					}
					set_country_flag = CFR_infiltration_school_flag
					set_variable = { CFR_decisions_11_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_infiltration_school_flag
					set_variable = { CFR_decisions_11_button_frame = 1 }
				}
			}
			## Somehow I misnumbered the buttons - there are only 15, not 16. So #12 has been cut.
			CFR_decisions_13_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_13_button_frame = 1 }
					}
					set_country_flag = CFR_incite_civil_war_visible
					set_variable = { CFR_decisions_13_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_incite_civil_war_visible
					set_variable = { CFR_decisions_13_button_frame = 1 }
				}
			}
			CFR_decisions_14_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_14_button_frame = 1 }
					}
					for_each_scope_loop = {
						array = CFR.CFR_infiltrated_countries_array
						if = {
							limit = {
								num_divisions > 9
							}
							set_variable = { CFR_provoke_army_defections_AGENTS_REQ = num_divisions }
							divide_variable = { CFR_provoke_army_defections_AGENTS_REQ = 10 }
							round_variable = CFR_provoke_army_defections_AGENTS_REQ
							set_variable = { CFR_provoke_army_defections_DIVISIONS = CFR_provoke_army_defections_AGENTS_REQ }
							multiply_variable = { CFR_provoke_army_defections_AGENTS_REQ = 15 }
						}
					}
					set_country_flag = CFR_provoke_army_defections_visible
					set_variable = { CFR_decisions_14_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_provoke_army_defections_visible
					set_variable = { CFR_decisions_14_button_frame = 1 }
				}
			}
			CFR_decisions_15_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_15_button_frame = 1 }
					}
					set_country_flag = CFR_guns_heist_visible
					set_variable = { CFR_decisions_15_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_guns_heist_visible
					set_variable = { CFR_decisions_15_button_frame = 1 }
				}
			}
			CFR_decisions_16_button_click = {
				if = {
					limit = {
						check_variable = { CFR_decisions_16_button_frame = 1 }
					}
					for_each_scope_loop = {
						array = CFR.CFR_infiltrated_countries_array
						if = {
							limit = {
								num_of_military_factories > 9
							}
							set_variable = { CFR_fraudulent_arms_contract_AGENTS_REQ = num_of_military_factories }
							divide_variable = { CFR_fraudulent_arms_contract_AGENTS_REQ = 10 }
							multiply_variable = { CFR_fraudulent_arms_contract_AGENTS_REQ = 5 }
							round_variable = CFR_fraudulent_arms_contract_AGENTS_REQ
						}
					}
					set_country_flag = CFR_fraudulent_arms_contract_visible
					set_variable = { CFR_decisions_16_button_frame = 2 }
				}
				else = {
					clr_country_flag = CFR_fraudulent_arms_contract_visible
					set_variable = { CFR_decisions_16_button_frame = 1 }
				}
			}
		}

		window_name = "CFR_infiltration_category_SG_window"
	}

	KIR_VAKA_SG = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIR
				has_completed_focus = KIR_ARMY_0
			}
		}

		window_name = "KIR_VAKA_SG_WINDOW"

		properties = {
			KIR_VAKA_BUTTON_1 = {
				frame = KIR_VAKA_BUTTON_1_frame
			}
			KIR_VAKA_BUTTON_2 = {
				frame = KIR_VAKA_BUTTON_2_frame
			}
			KIR_VAKA_BUTTON_3 = {
				frame = KIR_VAKA_BUTTON_3_frame
			}
			KIR_VAKA_BUTTON_4 = {
				frame = KIR_VAKA_BUTTON_4_frame
			}
			KIR_VAKA_BUTTON_5 = {
				frame = KIR_VAKA_BUTTON_5_frame
			}
			KIR_VAKA_BUTTON_6 = {
				frame = KIR_VAKA_BUTTON_6_frame
			}
		}

		triggers = {
			KIR_VAKA_BUTTON_1_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_VAKA_raise_territorial_guard_flag
				}
			}
			KIR_VAKA_BUTTON_1_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_VAKA_raise_territorial_guard_flag }
				}
			}
			KIR_VAKA_BUTTON_1_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_MILITIA
				}
			}
			KIR_VAKA_BUTTON_1_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_MILITIA
				}
			}
			KIR_VAKA_BUTTON_2_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_VAKA_guerilla_strike_flag
				}
			}
			KIR_VAKA_BUTTON_2_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_VAKA_guerilla_strike_flag }
				}
			}
			KIR_VAKA_BUTTON_2_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_GUERILLA_2
				}
			}
			KIR_VAKA_BUTTON_2_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_GUERILLA_2
				}
			}
			KIR_VAKA_BUTTON_3_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_VAKA_strategic_denial_doctrine_flag
				}
			}
			KIR_VAKA_BUTTON_3_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_VAKA_strategic_denial_doctrine_flag }
				}
			}
			KIR_VAKA_BUTTON_3_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_DEF_1
				}
			}
			KIR_VAKA_BUTTON_3_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_DEF_1
				}
			}
			KIR_VAKA_BUTTON_4_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_VAKA_free_shooters_flag
				}
			}
			KIR_VAKA_BUTTON_4_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_VAKA_free_shooters_flag }
				}
			}
			KIR_VAKA_BUTTON_4_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_FORCES_2
				}
			}
			KIR_VAKA_BUTTON_4_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_FORCES_2
				}
			}
			KIR_VAKA_BUTTON_5_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_military_police_decision_flag
				}
			}
			KIR_VAKA_BUTTON_5_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_military_police_decision_flag }
				}
			}
			KIR_VAKA_BUTTON_5_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_SUPPORT_3
				}
			}
			KIR_VAKA_BUTTON_5_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_SUPPORT_3
				}
			}
			KIR_VAKA_BUTTON_6_icon_X_visible = {
				ROOT = {
					has_country_flag = KIR_VAKA_porters_decision_flag
				}
			}
			KIR_VAKA_BUTTON_6_icon_visible = {
				ROOT = {
					NOT = { has_country_flag = KIR_VAKA_porters_decision_flag }
				}
			}
			KIR_VAKA_BUTTON_6_icon_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_SUPPORT_2
				}
			}
			KIR_VAKA_BUTTON_6_click_enabled = {
				ROOT = {
					has_completed_focus = KIR_SUPPORT_2
				}
			}
		}

		effects = {
			KIR_VAKA_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_1_frame = 1 }
					}
					set_country_flag = KIR_VAKA_raise_territorial_guard_flag
					set_variable = { KIR_VAKA_BUTTON_1_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_VAKA_raise_territorial_guard_flag
					set_variable = { KIR_VAKA_BUTTON_1_frame = 1 }
				}
			}
			KIR_VAKA_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_2_frame = 1 }
					}
					set_country_flag = KIR_VAKA_guerilla_strike_flag
					set_variable = { KIR_VAKA_BUTTON_2_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_VAKA_guerilla_strike_flag
					set_variable = { KIR_VAKA_BUTTON_2_frame = 1 }
				}
			}
			KIR_VAKA_BUTTON_3_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_3_frame = 1 }
					}
					set_country_flag = KIR_VAKA_strategic_denial_doctrine_flag
					set_variable = { KIR_VAKA_BUTTON_3_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_VAKA_strategic_denial_doctrine_flag
					set_variable = { KIR_VAKA_BUTTON_3_frame = 1 }
				}
			}
			KIR_VAKA_BUTTON_4_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_4_frame = 1 }
					}
					set_country_flag = KIR_VAKA_free_shooters_flag
					set_variable = { KIR_VAKA_BUTTON_4_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_VAKA_free_shooters_flag
					set_variable = { KIR_VAKA_BUTTON_4_frame = 1 }
				}
			}
			KIR_VAKA_BUTTON_5_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_5_frame = 1 }
					}
					set_country_flag = KIR_military_police_decision_flag
					set_variable = { KIR_VAKA_BUTTON_5_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_military_police_decision_flag
					set_variable = { KIR_VAKA_BUTTON_5_frame = 1 }
				}
			}
			KIR_VAKA_BUTTON_6_click = {
				if = {
					limit = {
						check_variable = { KIR_VAKA_BUTTON_6_frame = 1 }
					}
					set_country_flag = KIR_VAKA_porters_decision_flag
					set_variable = { KIR_VAKA_BUTTON_6_frame = 2 }
				}
				else = {
					clr_country_flag = KIR_VAKA_porters_decision_flag
					set_variable = { KIR_VAKA_BUTTON_6_frame = 1 }
				}
			}
		}
	}

	KIR_FACTORY_SG = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIR
			}
		}

		window_name = "KIR_FACTORY_SG_WINDOW"
		#dirty = KIR_FACTORY_SG_DIRTY

		properties = {
			KIRCivFactoryIcon = {
				frame = 1
			}
			KIRMilFactoryIcon = {
				frame = 2
			}
			KIRNavFactoryIcon = {
				frame = 4
			}
			KIR_FACTORY_RATIO_OPTION_1 = {
				frame = KIR_FACTORY_RATIO_OPTION_1_frame
			}
			KIR_FACTORY_RATIO_OPTION_2 = {
				frame = KIR_FACTORY_RATIO_OPTION_2_frame
			}
			KIR_FACTORY_RATIO_OPTION_3 = {
				frame = KIR_FACTORY_RATIO_OPTION_3_frame
			}
			KIR_FACTORY_RATIO_OPTION_4 = {
				frame = KIR_FACTORY_RATIO_OPTION_4_frame
			}
		}

		triggers = {
			KIR_FACTORY_RATIO_OPTION_1_click_enabled = {
				hidden_trigger = {
					ROOT = {
						has_political_power > 99
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIR_FACTORY_RATIO_GREEN_tt
					check_variable = { KIR_military_factories_ratio = KIR_military_factories_ratio_flat }
					check_variable = { KIR_civilian_factories_ratio = KIR_civilian_factories_ratio_flat }
				}
			}
			KIR_FACTORY_RATIO_OPTION_2_click_enabled = {
				hidden_trigger = {
					ROOT = {
						has_political_power > 149
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIR_FACTORY_RATIO_GREEN_tt
					check_variable = { KIR_military_factories_ratio = KIR_military_factories_ratio_flat }
					check_variable = { KIR_civilian_factories_ratio = KIR_civilian_factories_ratio_flat }
				}
			}
			KIR_FACTORY_RATIO_OPTION_3_click_enabled = {
				hidden_trigger = {
					ROOT = {
						has_political_power > 149
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIR_FACTORY_RATIO_GREEN_tt
					check_variable = { KIR_military_factories_ratio = KIR_military_factories_ratio_flat }
					check_variable = { KIR_civilian_factories_ratio = KIR_civilian_factories_ratio_flat }
				}
			}
			KIR_FACTORY_RATIO_OPTION_4_click_enabled = {
				hidden_trigger = {
					ROOT = {
						has_political_power > 199
					}
				}
				custom_trigger_tooltip = {
					tooltip = KIR_FACTORY_RATIO_GREEN_tt
					check_variable = { KIR_military_factories_ratio = KIR_military_factories_ratio_flat }
					check_variable = { KIR_civilian_factories_ratio = KIR_civilian_factories_ratio_flat }
				}
				custom_trigger_tooltip = {
					tooltip = KIR_FACTORY_RATIO_OPTION_4_REQ_tt
					OR = {
						has_idea = tot_economic_mobilisation
						has_idea = war_economy
						has_war = yes
					}
				}
			}
		}

		effects = {
			KIR_FACTORY_RATIO_OPTION_1_click = {
				if = {
					limit = {
						check_variable = { KIR_FACTORY_RATIO_OPTION_1_frame = 1 }
					}
					set_variable = { KIR_FACTORY_RATIO_OPTION_2_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_3_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_1_frame = 2 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_4_frame = 1 }
					add_political_power = -100
				}
				set_variable = { KIR_civilian_factories_ratio_flat = 3 }
				set_variable = { KIR_military_factories_ratio_flat = 2 }
				set_variable = { KIR_naval_factories_ratio_flat = 1 }
				set_variable = { KIR_MIL_FAC_PP_COST = 50 }
				KIR_get_factory_ratio = yes
			}
			KIR_FACTORY_RATIO_OPTION_2_click = {
				if = {
					limit = {
						check_variable = { KIR_FACTORY_RATIO_OPTION_2_frame = 1 }
					}
					set_variable = { KIR_FACTORY_RATIO_OPTION_1_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_3_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_2_frame = 2 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_4_frame = 1 }
					add_political_power = -150
				}
				set_variable = { KIR_civilian_factories_ratio_flat = 2 }
				set_variable = { KIR_military_factories_ratio_flat = 2 }
				set_variable = { KIR_naval_factories_ratio_flat = 1 }
				set_variable = { KIR_MIL_FAC_PP_COST = 50 }
				KIR_get_factory_ratio = yes
			}
			KIR_FACTORY_RATIO_OPTION_3_click = {
				if = {
					limit = {
						check_variable = { KIR_FACTORY_RATIO_OPTION_3_frame = 1 }
					}
					set_variable = { KIR_FACTORY_RATIO_OPTION_1_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_2_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_3_frame = 2 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_4_frame = 1 }
					add_political_power = -150
				}
				set_variable = { KIR_civilian_factories_ratio_flat = 2 }
				set_variable = { KIR_military_factories_ratio_flat = 1 }
				set_variable = { KIR_naval_factories_ratio_flat = 1 }
				set_variable = { KIR_MIL_FAC_PP_COST = 50 }
				KIR_get_factory_ratio = yes
			}
			KIR_FACTORY_RATIO_OPTION_4_click = {
				if = {
					limit = {
						check_variable = { KIR_FACTORY_RATIO_OPTION_4_frame = 1 }
					}
					set_variable = { KIR_FACTORY_RATIO_OPTION_1_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_2_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_3_frame = 1 }
					set_variable = { KIR_FACTORY_RATIO_OPTION_4_frame = 2 }
					add_political_power = -200
				}
				set_variable = { KIR_civilian_factories_ratio_flat = 1 }
				set_variable = { KIR_military_factories_ratio_flat = 3 }
				set_variable = { KIR_naval_factories_ratio_flat = 1 }
				set_variable = { KIR_MIL_FAC_PP_COST = 40 }
				KIR_get_factory_ratio = yes
			}
			KIR_FACTORY_REFRESH_click = {
				KIR_get_factory_ratio = yes
			}
		}
	}

	KIR_KI_SG = {
		context_type = decision_category
		parent_window_token = decision_tab

		visible = {
			ROOT = {
				original_tag = KIR
			}
		}

		window_name = "KIR_KI_SG_WINDOW"

		properties = {
			KIRKICivFactoryIcon = {
				frame = 1
			}
			KIRKISynRefineryIcon = {
				frame = 10
			}
			KIR_KI_steel_BUTTON_1 = {
				frame = KIR_KI_steel_BUTTON_1_frame
			}
			KIR_KI_chromium_BUTTON_1 = {
				frame = KIR_KI_chromium_BUTTON_1_frame
			}
			KIR_KI_crystals_BUTTON_1 = {
				frame = KIR_KI_crystals_BUTTON_1_frame
			}
			KIR_KI_aluminium_BUTTON_1 = {
				frame = KIR_KI_aluminium_BUTTON_1_frame
			}
			KIR_KI_tungsten_BUTTON_1 = {
				frame = KIR_KI_tungsten_BUTTON_1_frame
			}
			KIR_KI_rubber_BUTTON_1 = {
				frame = KIR_KI_rubber_BUTTON_1_frame
			}
			KIR_KI_oil_BUTTON_1 = {
				frame = KIR_KI_oil_BUTTON_1_frame
			}
			KIR_KI_steel_BUTTON_2 = {
				frame = KIR_KI_steel_BUTTON_2_frame
			}
			KIR_KI_chromium_BUTTON_2 = {
				frame = KIR_KI_chromium_BUTTON_2_frame
			}
			KIR_KI_crystals_BUTTON_2 = {
				frame = KIR_KI_crystals_BUTTON_2_frame
			}
			KIR_KI_aluminium_BUTTON_2 = {
				frame = KIR_KI_aluminium_BUTTON_2_frame
			}
			KIR_KI_tungsten_BUTTON_2 = {
				frame = KIR_KI_tungsten_BUTTON_2_frame
			}
			KIR_KI_rubber_BUTTON_2 = {
				frame = KIR_KI_rubber_BUTTON_2_frame
			}
			KIR_KI_oil_BUTTON_2 = {
				frame = KIR_KI_oil_BUTTON_2_frame
			}
		}

		triggers = {
			KIR_KI_steel_ICON_1_visible = {
				check_variable = { KIR_KI_steel_BUTTON_1_frame = 2 }
			}
			KIR_KI_chromium_ICON_1_visible = {
				check_variable = { KIR_KI_chromium_BUTTON_1_frame = 2 }
			}
			KIR_KI_crystals_ICON_1_visible = {
				check_variable = { KIR_KI_crystals_BUTTON_1_frame = 2 }
			}
			KIR_KI_aluminium_ICON_1_visible = {
				check_variable = { KIR_KI_aluminium_BUTTON_1_frame = 2 }
			}
			KIR_KI_tungsten_ICON_1_visible = {
				check_variable = { KIR_KI_tungsten_BUTTON_1_frame = 2 }
			}
			KIR_KI_rubber_ICON_1_visible = {
				check_variable = { KIR_KI_rubber_BUTTON_1_frame = 2 }
			}
			KIR_KI_oil_ICON_1_visible = {
				check_variable = { KIR_KI_oil_BUTTON_1_frame = 2 }
			}
			KIR_KI_steel_ICON_2_visible = {
				check_variable = { KIR_KI_steel_BUTTON_2_frame = 2 }
			}
			KIR_KI_chromium_ICON_2_visible = {
				check_variable = { KIR_KI_chromium_BUTTON_2_frame = 2 }
			}
			KIR_KI_crystals_ICON_2_visible = {
				check_variable = { KIR_KI_crystals_BUTTON_2_frame = 2 }
			}
			KIR_KI_aluminium_ICON_2_visible = {
				check_variable = { KIR_KI_aluminium_BUTTON_2_frame = 2 }
			}
			KIR_KI_tungsten_ICON_2_visible = {
				check_variable = { KIR_KI_tungsten_BUTTON_2_frame = 2 }
			}
			KIR_KI_rubber_ICON_2_visible = {
				check_variable = { KIR_KI_rubber_BUTTON_2_frame = 2 }
			}
			KIR_KI_oil_ICON_2_visible = {
				check_variable = { KIR_KI_oil_BUTTON_2_frame = 2 }
			}
			KIR_KI_steel_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_steel_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_steel_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_steel_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_steel_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_chromium_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_chromium_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_chromium_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_chromium_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_chromium_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_crystals_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_crystals_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_crystals_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_crystals_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_crystals_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_aluminium_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_aluminium_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_aluminium_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_aluminium_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_aluminium_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_tungsten_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_tungsten_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_tungsten_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_tungsten_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_tungsten_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_rubber_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_rubber_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_rubber_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_rubber_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_rubber_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_oil_BUTTON_1_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_oil_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_oil_ICON_1_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_oil_BUTTON_1_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_oil_ICON_1_click_enabled = { has_political_power > 19 }
			KIR_KI_steel_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_steel_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_steel_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_steel_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_steel_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_chromium_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_chromium_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_chromium_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_chromium_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_chromium_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_crystals_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_crystals_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_crystals_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_crystals_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_crystals_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_aluminium_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_aluminium_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_aluminium_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_aluminium_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_aluminium_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_tungsten_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_tungsten_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_tungsten_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_tungsten_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_tungsten_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_rubber_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_rubber_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_rubber_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_rubber_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_rubber_ICON_2_click_enabled = { has_political_power > 19 }
			KIR_KI_oil_BUTTON_2_click_enabled = {
				hidden_trigger = { has_political_power > 19 }
				if = { limit = { check_variable = { KIR_KI_oil_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
						custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_5 check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } }
					} else = { custom_trigger_tooltip = { tooltip = KIR_KI_RESOURCE_LIMIT_4 check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } } }
				}
			}
			KIR_KI_oil_ICON_2_X_click_enabled = {
				has_political_power > 19
				if = { limit = { check_variable = { KIR_KI_oil_BUTTON_2_frame = 1 } }
					if = { limit = { has_country_flag = KIR_KI_RESOURCE_LIMIT_INCREASED }
					check_variable = { KIR_KI_RESOURCES_PRODUCED < 5 } } else = { check_variable = { KIR_KI_RESOURCES_PRODUCED < 4 } }
				}
			} KIR_KI_oil_ICON_2_click_enabled = { has_political_power > 19 }
		}

		effects = {
			KIR_KI_steel_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_steel_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_steel_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = steel amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_steel_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_steel_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = steel amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_chromium_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_chromium_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_chromium_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = chromium amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_chromium_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_chromium_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = chromium amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_crystals_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_crystals_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_crystals_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = crystals amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_crystals_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_crystals_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = crystals amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_aluminium_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_aluminium_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_aluminium_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = aluminium amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_aluminium_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_aluminium_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = aluminium amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_tungsten_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_tungsten_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_tungsten_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = tungsten amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_tungsten_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_tungsten_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = tungsten amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_rubber_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_rubber_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_rubber_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = rubber amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_rubber_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_rubber_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = rubber amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_oil_BUTTON_1_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_oil_BUTTON_1_frame = 1 }
					}
					set_variable = { KIR_KI_oil_BUTTON_1_frame = 2 }
					modify_building_resources = { building = industrial_complex resource = oil amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_oil_BUTTON_1_frame = 2 }
					}
					set_variable = { KIR_KI_oil_BUTTON_1_frame = 1 }
					modify_building_resources = { building = industrial_complex resource = oil amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_steel_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_steel_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_steel_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = steel amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_steel_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_steel_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = steel amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_chromium_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_chromium_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_chromium_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = chromium amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_chromium_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_chromium_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = chromium amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_crystals_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_crystals_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_crystals_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = crystals amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_crystals_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_crystals_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = crystals amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_aluminium_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_aluminium_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_aluminium_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = aluminium amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_aluminium_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_aluminium_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = aluminium amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_tungsten_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_tungsten_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_tungsten_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = tungsten amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_tungsten_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_tungsten_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = tungsten amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_rubber_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_rubber_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_rubber_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = rubber amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_rubber_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_rubber_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = rubber amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
			KIR_KI_oil_BUTTON_2_click = {
				if = {
					limit = {
						check_variable = { KIR_KI_oil_BUTTON_2_frame = 1 }
					}
					set_variable = { KIR_KI_oil_BUTTON_2_frame = 2 }
					modify_building_resources = { building = synthetic_refinery resource = oil amount = 1 }
					KIR_KI_RES_OUTPUT_COST_ADD = yes
					hidden_effect = { add_political_power = -20 }
				}
				else_if = {
					limit = {
						check_variable = { KIR_KI_oil_BUTTON_2_frame = 2 }
					}
					set_variable = { KIR_KI_oil_BUTTON_2_frame = 1 }
					modify_building_resources = { building = synthetic_refinery resource = oil amount = -1 }
					KIR_KI_RES_OUTPUT_COST_SUBTRACT = yes
					hidden_effect = { add_political_power = -20 }
				}
			}
		}
	}

	KIR_STATE_SGUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			is_core_of = ROOT
			ROOT = {
				original_tag = KIR
				has_full_control_of_state = PREV
				has_country_flag = KIR_STATE_SGUI_ENABLED
			}
		}

		window_name = "KIR_STATE_SGUI_WINDOW"

		dirty = KIR_STATE_SGUI_DIRTY
		
		properties = { ## Positions need to be set for each state
			## Palace
            KIR_STATE_SGUI_PALACE_SLOT = {
                x = 7
                y = KIR_STATE_SGUI_PALACE_SLOT_Y
            }
			KIR_STATE_SGUI_PLUS_PALACE = {
                x = 4
                y = KIR_STATE_SGUI_PLUS_PALACE_Y
            }
			KIR_STATE_SGUI_BAR_PALACE = {
                x = 4
                y = KIR_STATE_SGUI_PLUS_PALACE_Y
            }
			KIR_STATE_SGUI_PALACE = {
                x = 7
                y = KIR_STATE_SGUI_PALACE_Y
            }
			KIR_STATE_SGUI_PALACE_YES = {
                x = 7
                y = KIR_STATE_SGUI_PALACE_Y
            }
			KIR_STATE_H1_PALACE_BICON = {
                x = 18
                y = KIR_STATE_H1_PALACE_BICON_Y
				image = "[THIS.KIRGetH1Icon]"
            }
			KIR_STATE_H2_PALACE_BICON = {
                x = 18
                y = KIR_STATE_H2_PALACE_BICON_Y
            }
			KIR_STATE_H3_PALACE_BICON = {
                x = 18
                y = KIR_STATE_H3_PALACE_BICON_Y
            }
			KIR_STATE_N1_PALACE_BICON = {
                x = 18
                y = KIR_STATE_N1_PALACE_BICON_Y
            }
			KIR_STATE_N2_PALACE_BICON = {
                x = 18
                y = KIR_STATE_N2_PALACE_BICON_Y
            }
			KIR_STATE_N3_PALACE_BICON = {
                x = 18
                y = KIR_STATE_N3_PALACE_BICON_Y
            }
			KIR_STATE_N4_PALACE_BICON = {
                x = 18
                y = KIR_STATE_N4_PALACE_BICON_Y
            }
			KIR_STATE_N5_PALACE_BICON = {
                x = 18
                y = KIR_STATE_N5_PALACE_BICON_Y
            }
			KIR_STATE_C1_PALACE_BICON = {
                x = 18
                y = KIR_STATE_C1_PALACE_BICON_Y
            }
			KIR_STATE_C2_PALACE_BICON = {
                x = 18
                y = KIR_STATE_C2_PALACE_BICON_Y
            }
			KIR_STATE_C3_PALACE_BICON = {
                x = 18
                y = KIR_STATE_C3_PALACE_BICON_Y
            }
			## Yamen
            KIR_STATE_SGUI_YAMEN_SLOT = {
                x = 7
                y = KIR_STATE_SGUI_YAMEN_SLOT_Y
            }
			KIR_STATE_SGUI_PLUS_YAMEN = {
                x = 4
                y = KIR_STATE_SGUI_PLUS_YAMEN_Y
            }
			KIR_STATE_SGUI_BAR_YAMEN = {
                x = 4
                y = KIR_STATE_SGUI_PLUS_YAMEN_Y
            }
			KIR_STATE_SGUI_YAMEN = {
                x = 7
                y = KIR_STATE_SGUI_YAMEN_Y
            }
			KIR_STATE_SGUI_YAMEN_YES = {
                x = 7
                y = KIR_STATE_SGUI_YAMEN_Y
            }
			KIR_STATE_H1_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_H1_YAMEN_BICON_Y
				image = "[THIS.KIRGetH1Icon]"
            }
			KIR_STATE_H2_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_H2_YAMEN_BICON_Y
            }
			KIR_STATE_H3_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_H3_YAMEN_BICON_Y
            }
			KIR_STATE_N1_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_N1_YAMEN_BICON_Y
            }
			KIR_STATE_N2_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_N2_YAMEN_BICON_Y
            }
			KIR_STATE_N3_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_N3_YAMEN_BICON_Y
            }
			KIR_STATE_N4_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_N4_YAMEN_BICON_Y
            }
			KIR_STATE_N5_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_N5_YAMEN_BICON_Y
            }
			KIR_STATE_C1_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_C1_YAMEN_BICON_Y
            }
			KIR_STATE_C2_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_C2_YAMEN_BICON_Y
            }
			KIR_STATE_C3_YAMEN_BICON = {
                x = 18
                y = KIR_STATE_C3_YAMEN_BICON_Y
            }
		}

		effects = {
			KIR_STATE_SGUI_PALACE_SLOT_click = {
				ROOT = {
					set_country_flag = KIR_STATE_SGUI_PALACE_MENU_ENABLED
					add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				}
			}
			KIR_STATE_SGUI_YAMEN_SLOT_click = {
				ROOT = {
					set_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				}
			}
		}

		triggers = {
			## Palace
			KIR_STATE_SGUI_PALACE_visible = {
				THIS = {
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
			}
			KIR_STATE_SGUI_PALACE_YES_visible = {
				THIS = {
					OR = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
			}
			KIR_STATE_SGUI_PLUS_PALACE_visible = {
				THIS = {
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
				if = {
					limit = {
						KIR = { 
							has_country_flag = KIR_national_focus_title_2_flag
							NOT = { has_country_flag = KIR_north_kiria_enfranchised_flag }
						}
					}
					THIS = {
						NOT = {
							state = 1060
							state = 1061
							state = 1066
							state = 1070
							state = 1071
							state = 1087
							state = 1088
						}
					}
				}
			}
			KIR_STATE_SGUI_BAR_PALACE_visible = {
				KIR = { 
					has_country_flag = KIR_national_focus_title_2_flag
					NOT = { has_country_flag = KIR_north_kiria_enfranchised_flag }
				}
				THIS = {
					OR = {
						state = 1060
						state = 1061
						state = 1066
						state = 1070
						state = 1071
						state = 1087
						state = 1088
					}
				}
			}
			KIR_STATE_SGUI_PALACE_SLOT_click_enabled = {
				THIS = {
					check_variable = { KIR_STATE_SGUI_PALACE_TERM_TIMER < 1 }
				}
				if = {
					limit = {
						KIR = { 
							has_country_flag = KIR_national_focus_title_2_flag
							NOT = { has_country_flag = KIR_north_kiria_enfranchised_flag }
						}
					}
					THIS = {
						NOT = {
							state = 1060
							state = 1061
							state = 1066
							state = 1070
							state = 1071
							state = 1087
							state = 1088
						}
					}
				}
			}
			KIR_STATE_H1_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_H1_PALACE
				}
			}
			KIR_STATE_H2_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_H2_PALACE
				}
			}
			KIR_STATE_H3_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_H3_PALACE
				}
			}
			KIR_STATE_N1_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_N1_PALACE
				}
			}
			KIR_STATE_N2_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_N2_PALACE
				}
			}
			KIR_STATE_N3_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_N3_PALACE
				}
			}
			KIR_STATE_N4_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_N4_PALACE
				}
			}
			KIR_STATE_N5_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_N5_PALACE
				}
			}
			KIR_STATE_C1_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_C1_PALACE
				}
			}
			KIR_STATE_C2_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_C2_PALACE
				}
			}
			KIR_STATE_C3_PALACE_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_C3_PALACE
				}
			}
			
			## Yamen
			KIR_STATE_SGUI_YAMEN_SLOT_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
				}
			}
			KIR_STATE_SGUI_YAMEN_SLOT_click_enabled = {
				THIS = {
					if = {
						limit = {
							OR = {
								has_state_flag = KIR_STATE_HAS_H1_YAMEN
								has_state_flag = KIR_STATE_HAS_H2_YAMEN
								has_state_flag = KIR_STATE_HAS_H3_YAMEN
								has_state_flag = KIR_STATE_HAS_N1_YAMEN
								has_state_flag = KIR_STATE_HAS_N2_YAMEN
								has_state_flag = KIR_STATE_HAS_N3_YAMEN
								has_state_flag = KIR_STATE_HAS_N4_YAMEN
								has_state_flag = KIR_STATE_HAS_N5_YAMEN
								has_state_flag = KIR_STATE_HAS_C1_YAMEN
								has_state_flag = KIR_STATE_HAS_C2_YAMEN
								has_state_flag = KIR_STATE_HAS_C3_YAMEN
							}
						}
						check_variable = { KIR_STATE_SGUI_PALACE_TERM_TIMER < 1 }
					}
					OR = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
			}
			KIR_STATE_SGUI_PLUS_YAMEN_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_YAMEN
						has_state_flag = KIR_STATE_HAS_H2_YAMEN
						has_state_flag = KIR_STATE_HAS_H3_YAMEN
						has_state_flag = KIR_STATE_HAS_N1_YAMEN
						has_state_flag = KIR_STATE_HAS_N2_YAMEN
						has_state_flag = KIR_STATE_HAS_N3_YAMEN
						has_state_flag = KIR_STATE_HAS_N4_YAMEN
						has_state_flag = KIR_STATE_HAS_N5_YAMEN
						has_state_flag = KIR_STATE_HAS_C1_YAMEN
						has_state_flag = KIR_STATE_HAS_C2_YAMEN
						has_state_flag = KIR_STATE_HAS_C3_YAMEN
					}
					OR = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
			}
			KIR_STATE_SGUI_BAR_YAMEN_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_YAMEN
						has_state_flag = KIR_STATE_HAS_H2_YAMEN
						has_state_flag = KIR_STATE_HAS_H3_YAMEN
						has_state_flag = KIR_STATE_HAS_N1_YAMEN
						has_state_flag = KIR_STATE_HAS_N2_YAMEN
						has_state_flag = KIR_STATE_HAS_N3_YAMEN
						has_state_flag = KIR_STATE_HAS_N4_YAMEN
						has_state_flag = KIR_STATE_HAS_N5_YAMEN
						has_state_flag = KIR_STATE_HAS_C1_YAMEN
						has_state_flag = KIR_STATE_HAS_C2_YAMEN
						has_state_flag = KIR_STATE_HAS_C3_YAMEN
					}
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_PALACE
						has_state_flag = KIR_STATE_HAS_H2_PALACE
						has_state_flag = KIR_STATE_HAS_H3_PALACE
						has_state_flag = KIR_STATE_HAS_N1_PALACE
						has_state_flag = KIR_STATE_HAS_N2_PALACE
						has_state_flag = KIR_STATE_HAS_N3_PALACE
						has_state_flag = KIR_STATE_HAS_N4_PALACE
						has_state_flag = KIR_STATE_HAS_N5_PALACE
						has_state_flag = KIR_STATE_HAS_C1_PALACE
						has_state_flag = KIR_STATE_HAS_C2_PALACE
						has_state_flag = KIR_STATE_HAS_C3_PALACE
					}
				}
			}
			#KIR_STATE_SGUI_BAR_YAMEN_click_enabled = {
			#	always = no ## To grey it out.
			#}
			KIR_STATE_SGUI_YAMEN_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					NOT = {
						has_state_flag = KIR_STATE_HAS_H1_YAMEN
						has_state_flag = KIR_STATE_HAS_H2_YAMEN
						has_state_flag = KIR_STATE_HAS_H3_YAMEN
						has_state_flag = KIR_STATE_HAS_N1_YAMEN
						has_state_flag = KIR_STATE_HAS_N2_YAMEN
						has_state_flag = KIR_STATE_HAS_N3_YAMEN
						has_state_flag = KIR_STATE_HAS_N4_YAMEN
						has_state_flag = KIR_STATE_HAS_N5_YAMEN
						has_state_flag = KIR_STATE_HAS_C1_YAMEN
						has_state_flag = KIR_STATE_HAS_C2_YAMEN
						has_state_flag = KIR_STATE_HAS_C3_YAMEN
					}
				}
			}
			KIR_STATE_SGUI_YAMEN_YES_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					OR = {
						has_state_flag = KIR_STATE_HAS_H1_YAMEN
						has_state_flag = KIR_STATE_HAS_H2_YAMEN
						has_state_flag = KIR_STATE_HAS_H3_YAMEN
						has_state_flag = KIR_STATE_HAS_N1_YAMEN
						has_state_flag = KIR_STATE_HAS_N2_YAMEN
						has_state_flag = KIR_STATE_HAS_N3_YAMEN
						has_state_flag = KIR_STATE_HAS_N4_YAMEN
						has_state_flag = KIR_STATE_HAS_N5_YAMEN
						has_state_flag = KIR_STATE_HAS_C1_YAMEN
						has_state_flag = KIR_STATE_HAS_C2_YAMEN
						has_state_flag = KIR_STATE_HAS_C3_YAMEN
					}
				}
			}
			KIR_STATE_H1_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_H1_YAMEN
				}
			}
			KIR_STATE_H2_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_H2_YAMEN
				}
			}
			KIR_STATE_H3_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_H3_YAMEN
				}
			}
			KIR_STATE_N1_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_N1_YAMEN
				}
			}
			KIR_STATE_N2_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_N2_YAMEN
				}
			}
			KIR_STATE_N3_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_N3_YAMEN
				}
			}
			KIR_STATE_N4_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_N4_YAMEN
				}
			}
			KIR_STATE_N5_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_N5_YAMEN
				}
			}
			KIR_STATE_C1_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_C1_YAMEN
				}
			}
			KIR_STATE_C2_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_C2_YAMEN
				}
			}
			KIR_STATE_C3_YAMEN_BICON_visible = {
				THIS = {
					has_state_flag = KIR_STATE_HAS_YAMEN
					has_state_flag = KIR_STATE_HAS_C3_YAMEN
				}
			}
		}
	}

	KIR_STATE_SGUI_PALACE_MENU = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			is_core_of = ROOT
			check_variable = { KIR_STATE_SGUI_PALACE_TERM_TIMER < 1 }
			ROOT = {
				original_tag = KIR
				has_full_control_of_state = PREV
				has_country_flag = KIR_STATE_SGUI_PALACE_MENU_ENABLED
			}
			if = {
				limit = {
					KIR = { 
						has_country_flag = KIR_national_focus_title_2_flag
						NOT = { has_country_flag = KIR_north_kiria_enfranchised_flag }
					}
				}
				THIS = {
					NOT = {
						state = 1060
						state = 1061
						state = 1066
						state = 1070
						state = 1071
						state = 1087
						state = 1088
					}
				}
			}
		}

		window_name = "KIR_STATE_SGUI_PALACE_MENU_WINDOW"

		dirty = KIR_STATE_SGUI_DIRTY

		effects = {
			KIR_STATE_SGUI_PALACE_MENU_CLOSE_click = {
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_PALACE_MENU_ENABLED
				}
			}
			KIR_STATE_H1_PALACE_BUTTON_click = {
				KIR_STATE_H1_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_H2_PALACE_BUTTON_click = {
				KIR_STATE_H2_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_H3_PALACE_BUTTON_click = {
				KIR_STATE_H3_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_N1_PALACE_BUTTON_click = {
				KIR_STATE_N1_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_N2_PALACE_BUTTON_click = {
				KIR_STATE_N2_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_N3_PALACE_BUTTON_click = {
				KIR_STATE_N3_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_N4_PALACE_BUTTON_click = {
				KIR_STATE_N4_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_N5_PALACE_BUTTON_click = {
				KIR_STATE_N5_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_C1_PALACE_BUTTON_click = {
				KIR_STATE_C1_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_C2_PALACE_BUTTON_click = {
				KIR_STATE_C2_PALACE_BUTTON_click_effect = yes
			}
			KIR_STATE_C3_PALACE_BUTTON_click = {
				KIR_STATE_C3_PALACE_BUTTON_click_effect = yes
			}
		}

		triggers = {
			KIR_STATE_N3_PALACE_BUTTON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N3_PALACE_ICON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N3_PALACE_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_PALACE_BUTTON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_PALACE_ICON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_PALACE_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_H1_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H1_PALACE } }
					hidden_trigger = { KIR_STATE_H1_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H1_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H1_PALACE } }
					hidden_trigger = { KIR_STATE_H1_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H2_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H2_PALACE } }
					hidden_trigger = { KIR_STATE_H2_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H2_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H2_PALACE } }
					hidden_trigger = { KIR_STATE_H2_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H3_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H3_PALACE } }
					hidden_trigger = { KIR_STATE_H3_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H3_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H3_PALACE } }
					hidden_trigger = { KIR_STATE_H3_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N1_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N1_PALACE } }
					hidden_trigger = { KIR_STATE_N1_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N1_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N1_PALACE } }
					hidden_trigger = { KIR_STATE_N1_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N2_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N2_PALACE } }
					hidden_trigger = { KIR_STATE_N2_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N2_PALACE_NUM < KIR_STATE_N2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N2_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N2_PALACE } }
					hidden_trigger = { KIR_STATE_N2_PALACE_BUTTON_TRIGGER = yes }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N2_PALACE_NUM < KIR_STATE_N2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N3_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N3_PALACE } }
					hidden_trigger = { KIR_STATE_N34_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N3_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N3_PALACE } }
					hidden_trigger = { KIR_STATE_N34_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N4_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N4_PALACE } }
					hidden_trigger = { KIR_STATE_N34_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N4_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N4_PALACE } }
					hidden_trigger = { KIR_STATE_N34_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N5_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N5_PALACE } }
					hidden_trigger = { KIR_STATE_N5_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N5_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N5_PALACE_NUM < KIR_STATE_N5_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N5_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N5_PALACE } }
					hidden_trigger = { KIR_STATE_N5_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N5_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N5_PALACE_NUM < KIR_STATE_N5_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C1_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C1_PALACE } }
					hidden_trigger = { KIR_STATE_C1_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_RF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_RF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_RF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C1_PALACE_NUM < KIR_STATE_C1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C1_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C1_PALACE } }
					hidden_trigger = { KIR_STATE_C1_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_RF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_RF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_RF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C1_PALACE_NUM < KIR_STATE_C1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C2_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C2_PALACE } }
					hidden_trigger = { KIR_STATE_C23_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_PEASANT_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_PEASANT_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_PEASANT_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C2_PALACE_NUM < KIR_STATE_C2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C2_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C2_PALACE } }
					hidden_trigger = { KIR_STATE_C23_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_PEASANT_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_PEASANT_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_PEASANT_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C2_PALACE_NUM < KIR_STATE_C2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C3_PALACE_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C3_PALACE } }
					hidden_trigger = { KIR_STATE_C23_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WORKER_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WORKER_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WORKER_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C3_PALACE_NUM < KIR_STATE_C3_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C3_PALACE_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C3_PALACE } }
					hidden_trigger = { KIR_STATE_C23_PALACE_BUTTON_TRIGGER = yes }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WORKER_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WORKER_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WORKER_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C3_PALACE_NUM < KIR_STATE_C3_PALACE_NUM_CAP }
						}
					}
				}
			}
		}

		properties = {
			KIR_STATE_H1_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_H1_PALACE_BUTTON_FRAME
			}
			KIR_STATE_H2_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_H2_PALACE_BUTTON_FRAME
			}
			KIR_STATE_H3_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_H3_PALACE_BUTTON_FRAME
			}
			KIR_STATE_N1_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_N1_PALACE_BUTTON_FRAME
			}
			KIR_STATE_N2_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_N2_PALACE_BUTTON_FRAME
			}
			KIR_STATE_N3_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_N3_PALACE_BUTTON_FRAME
			}
			KIR_STATE_N4_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_N4_PALACE_BUTTON_FRAME
			}
			KIR_STATE_N5_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_N5_PALACE_BUTTON_FRAME
                x = 15
                y = KIR_STATE_N5_PALACE_BUTTON_Y
			}
			KIR_STATE_N5_PALACE_ICON = {
                x = 13
                y = KIR_STATE_N5_PALACE_ICON_Y
			}
			KIR_STATE_N5_PALACE = {
                x = 49
                y = KIR_STATE_N5_PALACE_Y
			}
			KIR_STATE_C1_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_C1_PALACE_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C1_PALACE_BUTTON_Y
			}
			KIR_STATE_C1_PALACE_ICON = {
                x = 13
                y = KIR_STATE_C1_PALACE_ICON_Y
			}
			KIR_STATE_C1_PALACE = {
                x = 49
                y = KIR_STATE_C1_PALACE_Y
			}
			KIR_STATE_C2_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_C2_PALACE_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C2_PALACE_BUTTON_Y
			}
			KIR_STATE_C2_PALACE_ICON = {
                x = 13
                y = KIR_STATE_C2_PALACE_ICON_Y
			}
			KIR_STATE_C2_PALACE = {
                x = 49
                y = KIR_STATE_C2_PALACE_Y
			}
			KIR_STATE_C3_PALACE_BUTTON = {
				frame = THIS.KIR_STATE_C3_PALACE_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C3_PALACE_BUTTON_Y
			}
			KIR_STATE_C3_PALACE_ICON = {
                x = 13
                y = KIR_STATE_C3_PALACE_ICON_Y
			}
			KIR_STATE_C3_PALACE = {
                x = 49
                y = KIR_STATE_C3_PALACE_Y
			}
			KIR_STATE_H1_PALACE_ICON = {
				image = "[KIRGetH1Icon]"
			}
		}
	}

	KIR_STATE_SGUI_YAMEN_MENU = {
		context_type = selected_state_context
		parent_window_token = selected_state_view

		visible = {
			is_core_of = ROOT
			has_state_flag = KIR_STATE_HAS_YAMEN
			if = {
				limit = {
					OR = {
						has_state_flag = KIR_STATE_HAS_H1_YAMEN
						has_state_flag = KIR_STATE_HAS_H2_YAMEN
						has_state_flag = KIR_STATE_HAS_H3_YAMEN
						has_state_flag = KIR_STATE_HAS_N1_YAMEN
						has_state_flag = KIR_STATE_HAS_N2_YAMEN
						has_state_flag = KIR_STATE_HAS_N3_YAMEN
						has_state_flag = KIR_STATE_HAS_N4_YAMEN
						has_state_flag = KIR_STATE_HAS_N5_YAMEN
						has_state_flag = KIR_STATE_HAS_C1_YAMEN
						has_state_flag = KIR_STATE_HAS_C2_YAMEN
						has_state_flag = KIR_STATE_HAS_C3_YAMEN
					}
				}
				check_variable = { KIR_STATE_SGUI_PALACE_TERM_TIMER < 1 }
			}
			OR = {
				has_state_flag = KIR_STATE_HAS_H1_PALACE
				has_state_flag = KIR_STATE_HAS_H2_PALACE
				has_state_flag = KIR_STATE_HAS_H3_PALACE
				has_state_flag = KIR_STATE_HAS_N1_PALACE
				has_state_flag = KIR_STATE_HAS_N2_PALACE
				has_state_flag = KIR_STATE_HAS_N3_PALACE
				has_state_flag = KIR_STATE_HAS_N4_PALACE
				has_state_flag = KIR_STATE_HAS_N5_PALACE
				has_state_flag = KIR_STATE_HAS_C1_PALACE
				has_state_flag = KIR_STATE_HAS_C2_PALACE
				has_state_flag = KIR_STATE_HAS_C3_PALACE
			}
			ROOT = {
				original_tag = KIR
				has_full_control_of_state = PREV
				has_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
			}
		}

		window_name = "KIR_STATE_SGUI_YAMEN_MENU_WINDOW"

		dirty = KIR_STATE_SGUI_DIRTY

		effects = {
			KIR_STATE_SGUI_YAMEN_MENU_CLOSE_click = {
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
				}
			}
			KIR_STATE_H1_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H1_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_H1_YAMEN
						set_variable = { KIR_STATE_H1_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_H1_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_H1H2_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_political_power_gain = KIR_CONSOCSYS_YAMEN_political_power_gain_var }
						add_to_variable = { KIR_CONSOCSYS_democratic_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_H1_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_H2_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H2_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_H2_YAMEN
						set_variable = { KIR_STATE_H2_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_H2_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_H1H2_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_command_power_gain = KIR_CONSOCSYS_YAMEN_command_power_gain_var }
						add_to_variable = { KIR_CONSOCSYS_democratic_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_H2_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_H3_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H3_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_H3_YAMEN
						set_variable = { KIR_STATE_H3_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_H3_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_H3N1_PALACE_NUM = 1 }
						subtract_from_variable = { KIR_CONSOCSYS_consumer_goods_factor = KIR_CONSOCSYS_YAMEN_consumer_goods_factor_var }
						add_to_variable = { KIR_CONSOCSYS_democratic_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_H3_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_N1_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N1_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_N1_YAMEN
						set_variable = { KIR_STATE_N1_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_N1_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_H3N1_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_research_speed_factor = KIR_CONSOCSYS_YAMEN_research_speed_factor_var }
						add_to_variable = { KIR_CONSOCSYS_neutrality_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_N1_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_N2_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N2_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_N2_YAMEN
						set_variable = { KIR_STATE_N2_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_N2_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_war_support_factor = KIR_CONSOCSYS_YAMEN_war_support_factor_var }
						add_to_variable = { KIR_CONSOCSYS_fascism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_N2_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_N3_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N3_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_N3_YAMEN
						set_variable = { KIR_STATE_N3_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_N3_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_N3N4_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_local_resources_factor = KIR_CONSOCSYS_YAMEN_local_resources_factor_var }
						add_to_variable = { KIR_CONSOCSYS_fascism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_N3_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_N4_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N4_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_N4_YAMEN
						set_variable = { KIR_STATE_N4_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_N4_PALACE_NUM = 1 }
						add_to_variable = { KIR_STATE_N3N4_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_production_factory_efficiency_gain_factor = KIR_CONSOCSYS_YAMEN_production_factory_efficiency_gain_factor_var }
						add_to_variable = { KIR_CONSOCSYS_fascism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_N4_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_N5_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N5_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_N5_YAMEN
						set_variable = { KIR_STATE_N5_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_N5_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_stability_factor = KIR_CONSOCSYS_YAMEN_stability_factor_var }
						add_to_variable = { KIR_CONSOCSYS_neutrality_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_N5_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_C1_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C1_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_C1_YAMEN
						set_variable = { KIR_STATE_C1_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_C1_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_conscription_factor = KIR_CONSOCSYS_YAMEN_conscription_factor_var }
						add_to_variable = { KIR_CONSOCSYS_communism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_C1_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_C2_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C2_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_C2_YAMEN
						set_variable = { KIR_STATE_C2_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_C2_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_monthly_population = KIR_CONSOCSYS_YAMEN_monthly_population_var }
						add_to_variable = { KIR_CONSOCSYS_communism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_C2_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
			KIR_STATE_C3_YAMEN_BUTTON_click = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C3_YAMEN } }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
						set_state_flag = KIR_STATE_HAS_C3_YAMEN
						set_variable = { KIR_STATE_C3_YAMEN_BUTTON_FRAME = 1 }
						KIR_STATE_YAMEN_BUTTON_CLICK_PALACE_ADD_EFFECT = yes
					}
					ROOT = {
						add_political_power = KIR_STATE_YAMEN_COST_VAR_NEGATIVE
						add_to_variable = { KIR_STATE_C3_PALACE_NUM = 1 }
						add_to_variable = { KIR_CONSOCSYS_production_speed_buildings_factor = KIR_CONSOCSYS_YAMEN_production_speed_buildings_factor_var }
						add_to_variable = { KIR_CONSOCSYS_communism_drift = 0.01 }
						add_to_variable = { KIR_CONSOCSYS_KIR_STATE_MAYORALTIES_Modifier = 1 }
					}
				}
				else_if = {
					limit = { has_state_flag = KIR_STATE_HAS_C3_YAMEN }
					THIS = {
						KIR_STATE_YAMEN_BUTTON_CLICK_EFFECT = yes
					}
					ROOT = {
					}
				}
				add_to_variable = { KIR_STATE_SGUI_DIRTY = 1 }
				ROOT = {
					clr_country_flag = KIR_STATE_SGUI_YAMEN_MENU_ENABLED
					if = {
						limit = {
							has_country_flag = KIR_Balance_of_the_Realm_Enabled
						}
						KIR_Get_Balance_of_the_Realm = yes
					}
					KIR_STATE_PALACE_CALL_ALERT = yes
				}
			}
		}

		triggers = {
			KIR_STATE_N3_YAMEN_BUTTON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N3_YAMEN_ICON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N3_YAMEN_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_YAMEN_BUTTON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_YAMEN_ICON_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_N4_YAMEN_visible = {
				ROOT = { NOT = { has_country_flag = KIS_council_salvation_front_civil_war_scenario } }
			}
			KIR_STATE_H1_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H1_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H2_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H2_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H1H2_PALACE_NUM < KIR_STATE_H1H2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H3_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_H3_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_H3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_H3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N1_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N1_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_H3N1_PALACE_NUM < KIR_STATE_H3N1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N2_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N2_PALACE_NUM < KIR_STATE_N2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N2_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N2_PALACE_NUM < KIR_STATE_N2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N3_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N3_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N4_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N4_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N4_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N4_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_NAKP_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_NAKP_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_NAKP_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N3N4_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N3N4_PALACE_NUM < KIR_STATE_N3N4_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N5_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N5_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N5_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N5_PALACE_NUM < KIR_STATE_N5_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_N5_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_N5_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WoF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WoF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WoF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_N5_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_N5_PALACE_NUM < KIR_STATE_N5_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C1_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_RF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_RF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_RF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C1_PALACE_NUM < KIR_STATE_C1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C1_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C1_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_RF_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_RF_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_RF_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C1_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C1_PALACE_NUM < KIR_STATE_C1_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C2_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_PEASANT_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_PEASANT_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_PEASANT_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C2_PALACE_NUM < KIR_STATE_C2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C2_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C2_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_PEASANT_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_PEASANT_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_PEASANT_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C2_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C2_PALACE_NUM < KIR_STATE_C2_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C3_YAMEN_BUTTON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WORKER_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WORKER_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WORKER_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C3_PALACE_NUM < KIR_STATE_C3_PALACE_NUM_CAP }
						}
					}
				}
			}
			KIR_STATE_C3_YAMEN_ICON_click_enabled = {
				if = {
					limit = { NOT = { has_state_flag = KIR_STATE_HAS_C3_YAMEN } }
					hidden_trigger = { check_variable = { var = ROOT.political_power value = KIR.KIR_STATE_YAMEN_COST_VAR compare = greater_than_or_equals } }
					if = {
						limit = {
							THIS = {
								has_state_flag = KIR_STATE_WORKER_Exclusion_flag
							}
						}
						custom_trigger_tooltip = {
							tooltip = KIR_STATE_WORKER_Exclusion_tt
							ROOT = {
								has_country_flag = KIR_STATE_WORKER_Exclusion_Resolved_flag
							}
						}
					}
					custom_trigger_tooltip = {
						tooltip = KIR_STATE_C3_PALACE_BUTTON_click_enabled_tt
						ROOT = {
							check_variable = { KIR_STATE_C3_PALACE_NUM < KIR_STATE_C3_PALACE_NUM_CAP }
						}
					}
				}
			}
		}

		properties = {
			KIR_STATE_H1_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_H1_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_H2_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_H2_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_H3_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_H3_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_N1_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_N1_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_N2_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_N2_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_N3_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_N3_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_N4_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_N4_YAMEN_BUTTON_FRAME
			}
			KIR_STATE_N5_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_N5_YAMEN_BUTTON_FRAME
                x = 15
                y = KIR_STATE_N5_YAMEN_BUTTON_Y
			}
			KIR_STATE_N5_YAMEN_ICON = {
                x = 13
                y = KIR_STATE_N5_YAMEN_ICON_Y
			}
			KIR_STATE_N5_YAMEN = {
                x = 49
                y = KIR_STATE_N5_YAMEN_Y
			}
			KIR_STATE_C1_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_C1_YAMEN_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C1_YAMEN_BUTTON_Y
			}
			KIR_STATE_C1_YAMEN_ICON = {
                x = 13
                y = KIR_STATE_C1_YAMEN_ICON_Y
			}
			KIR_STATE_C1_YAMEN = {
                x = 49
                y = KIR_STATE_C1_YAMEN_Y
			}
			KIR_STATE_C2_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_C2_YAMEN_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C2_YAMEN_BUTTON_Y
			}
			KIR_STATE_C2_YAMEN_ICON = {
                x = 13
                y = KIR_STATE_C2_YAMEN_ICON_Y
			}
			KIR_STATE_C2_YAMEN = {
                x = 49
                y = KIR_STATE_C2_YAMEN_Y
			}
			KIR_STATE_C3_YAMEN_BUTTON = {
				frame = THIS.KIR_STATE_C3_YAMEN_BUTTON_FRAME
                x = 15
                y = KIR_STATE_C3_YAMEN_BUTTON_Y
			}
			KIR_STATE_C3_YAMEN_ICON = {
                x = 13
                y = KIR_STATE_C3_YAMEN_ICON_Y
			}
			KIR_STATE_C3_YAMEN = {
                x = 49
                y = KIR_STATE_C3_YAMEN_Y
			}
			KIR_STATE_H1_YAMEN_ICON = {
				image = "[KIRGetH1Icon]"
			}
		}
	}
}