scripted_gui = {
	eaw_MSH_House_of_Worship_GUI = {
		window_name = eaw_MSH_House_of_Worship_GUI
		context_type = decision_category
		dirty = MSH_Influences_Dirty
		dynamic_lists = {
			map_gridbox = {
				array = MSH_Influences_States
				entry_container = MSH_map_entry
				value = MSH_v
				index = MSH_i
			}
		}
		triggers = {
			map_item_button_visible = {
				owns_state = MSH_v
			}
			map_item_visible = {
				owns_state = MSH_v
			}
			map_selected_visible = {
				owns_state = MSH_v
				check_variable = { MSH_Influences_Selected_State = MSH_v }
			}
		}
		properties = {
			map_item_button = {
				image = "GFX_MSH_WRSP_click_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
			}
			map_item = {
				image = "GFX_MSH_WRSP_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
				frame = MSH_v:MSH_Influences_Frame
			}
			map_selected = {
				image = "GFX_MSH_WRSP_selected_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
			}
		}
		effects = {
			map_item_button_click = {
				set_variable = { MSH_Influences_Selected_State = MSH_v }
				
				MSH_Influences_local_or_national = yes
				MSH_Influences_re_position_num = yes
			
				add_to_variable = { MSH_Influences_Dirty = 0.01 }
			}
			toggle_local_national_click = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					clr_country_flag = MSH_Influences_local_view
				}
				else = { set_country_flag = MSH_Influences_local_view }
				
				MSH_Influences_local_or_national = yes
				MSH_Influences_re_position_num = yes

				add_to_variable = { MSH_Influences_Dirty = 0.01 }
			}
		}
	
		properties = {
			piety_bar = {
				frame = MSH_piety_frame
			}
		
			peasants_progbar_0 = {
				frame = MSH_peasants_display_0
			}
			peasants_progbar_2 = {
				frame = MSH_peasants_display_2
			}
			soldiers_progbar_0 = {
				frame = MSH_soldiers_display_0
			}
			soldiers_progbar_2 = {
				frame = MSH_soldiers_display_2
			}
			intelligentsia_progbar_0 = {
				frame = MSH_intelligentsia_display_0
			}
			intelligentsia_progbar_2 = {
				frame = MSH_intelligentsia_display_2
			}
			leadership_progbar_0 = {
				frame = MSH_leadership_display_0
			}
			leadership_progbar_2 = {
				frame = MSH_leadership_display_2
			}
			
			peasants_legalists_num = {
				x = peasants_legalists_x_pos
			}
			peasants_purists_num = {
				x = peasants_purists_x_pos
			}
			peasants_reformists_num = {
				x = peasants_reformists_x_pos
			}
			
			soldiers_legalists_num = {
				x = soldiers_legalists_x_pos
			}
			soldiers_purists_num = {
				x = soldiers_purists_x_pos
			}
			soldiers_reformists_num = {
				x = soldiers_reformists_x_pos
			}
			
			intelligentsia_legalists_num = {
				x = intelligentsia_legalists_x_pos
			}
			intelligentsia_purists_num = {
				x = intelligentsia_purists_x_pos
			}
			intelligentsia_reformists_num = {
				x = intelligentsia_reformists_x_pos
			}
			
			leadership_legalists_num = {
				x = leadership_legalists_x_pos
			}
			leadership_purists_num = {
				x = leadership_purists_x_pos
			}
			leadership_reformists_num = {
				x = leadership_reformists_x_pos
			}
		}
		triggers = {
			peasants_legalists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Peasants^0 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Peasants_Average^0 < 5 } }
				}
			}
			peasants_purists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Peasants^1 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Peasants_Average^1 < 5 } }
				}
			}
			peasants_reformists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Peasants^2 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Peasants_Average^2 < 5 } }
				}
			}
		
			soldiers_legalists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Soldiers^0 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Soldiers_Average^0 < 5 } }
				}
			}
			soldiers_purists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Soldiers^1 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Soldiers_Average^1 < 5 } }
				}
			}
			soldiers_reformists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Soldiers^2 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Soldiers_Average^2 < 5 } }
				}
			}
		
			intelligentsia_legalists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Intelligentsia^0 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Intelligentsia_Average^0 < 5 } }
				}
			}
			intelligentsia_purists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Intelligentsia^1 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Intelligentsia_Average^1 < 5 } }
				}
			}
			intelligentsia_reformists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Intelligentsia^2 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Intelligentsia_Average^2 < 5 } }
				}
			}
		
			leadership_legalists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Leadership^0 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Leadership_Average^0 < 5 } }
				}
			}
			leadership_purists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Leadership^1 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Leadership_Average^1 < 5 } }
				}
			}
			leadership_reformists_num_visible = {
				if = {
					limit = {
						has_country_flag = MSH_Influences_local_view
					}
					NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences_Leadership^2 < 5 } }
				}
				else = {
					NOT = { check_variable = { MSH_Influences_Leadership_Average^2 < 5 } }
				}
			}
			
			peasants_progbar_0_visible  = {
				check_variable = { MSH_peasants_display_0 > 0 }
			}
			peasants_progbar_2_visible  = {
				check_variable = { MSH_peasants_display_2 > 0 }
			}
			soldiers_progbar_0_visible  = {
				check_variable = { MSH_soldiers_display_0 > 0 }
			}
			soldiers_progbar_2_visible  = {
				check_variable = { MSH_soldiers_display_2 > 0 }
			}
			intelligentsia_progbar_0_visible  = {
				check_variable = { MSH_intelligentsia_display_0 > 0 }
			}
			intelligentsia_progbar_2_visible  = {
				check_variable = { MSH_intelligentsia_display_2 > 0 }
			}
			leadership_progbar_0_visible  = {
				check_variable = { MSH_leadership_display_0 > 0 }
			}
			leadership_progbar_2_visible  = {
				check_variable = { MSH_leadership_display_2 > 0 }
			}
		}
	}
	
	eaw_MSH_Scholastic_Focus_GUI = {
		window_name = eaw_MSH_Scholastic_Focus_GUI
		context_type = decision_category
		properties = {
			focus_legalist_button = {
				frame = legalist_btn_frame
			}
			focus_purist_button = {
				frame = purist_btn_frame
			}
			focus_reformist_button = {
				frame = reformist_btn_frame
			}
		}
		effects = {
			focus_legalist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 0
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 0 }
					set_variable = { legalist_btn_frame = 1 }
					set_variable = { purist_btn_frame = 2 }
					set_variable = { reformist_btn_frame = 2 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
			focus_purist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 1
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 1 }
					set_variable = { legalist_btn_frame = 2 }
					set_variable = { purist_btn_frame = 1 }
					set_variable = { reformist_btn_frame = 2 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
			focus_reformist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 2
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 2 }
					set_variable = { legalist_btn_frame = 2 }
					set_variable = { purist_btn_frame = 2 }
					set_variable = { reformist_btn_frame = 1 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
		}
	}
}