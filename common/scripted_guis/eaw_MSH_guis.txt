scripted_gui = {
	eaw_MSH_House_of_Worship_GUI = {
		window_name = eaw_MSH_House_of_Worship_GUI
		context_type = decision_category
		dirty = MSH_Influences_Dirty
		dynamic_lists = {
			map_gridbox = {
				array = MSH_Influences_States
				entry_container = MSH_map_entry
				value = MSH_v
				index = MSH_i
			}
		}
		triggers = {
			map_item_button_visible = {
				owns_state = MSH_v
			}
			map_item_visible = {
				owns_state = MSH_v
			}
			map_selected_visible = {
				owns_state = MSH_v
				check_variable = { MSH_Influences_Selected_State = MSH_v }
			}
		}
		properties = {
			map_item_button = {
				image = "GFX_MSH_WRSP_click_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
			}
			map_item = {
				image = "GFX_MSH_WRSP_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
				frame = MSH_v:MSH_Influences_Frame
			}
			map_selected = {
				image = "GFX_MSH_WRSP_selected_map_[?MSH_v]"
				x = MSH_Influences_x^MSH_i
				y = MSH_Influences_y^MSH_i
			}
		}
		effects = {
			map_item_button_click = {
				set_variable = { MSH_Influences_Selected_State = MSH_v }
				
				MSH_Influences_local_or_national = yes
				MSH_Influences_re_position_num = yes
			
				add_to_variable = { MSH_Influences_Dirty = 0.01 }
			}
		}
	
		properties = {
			piety_bar = {
				frame = MSH_piety_frame
			}
			reformism_bar = {
				frame = MSH_reformism_frame
			}
		
			progbar_0 = {
				frame = MSH_Influences_Selected_State:MSH_Influences^0
			}
			progbar_2 = {
				frame = MSH_Influences_Selected_State:MSH_local_display
			}
		
			progbar_national_0 = {
				frame = MSH_Influences_National^0
			}
			progbar_national_2 = {
				frame = MSH_national_display
			}
			
			legalists_num = {
				x = legalists_x_pos
			}
			purists_num = {
				x = purists_x_pos
			}
			reformists_num = {
				x = reformists_x_pos
			}
		
			legalists_national_num = {
				x = legalists_national_x_pos
			}
			purists_national_num = {
				x = purists_national_x_pos
			}
			reformists_national_num = {
				x = reformists_national_x_pos
			}
		}
		triggers = {
			legalists_num_visible = {
				NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences^0 < 5 } }
			}
			purists_num_visible = {
				NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences^1 < 5 } }
			}
			reformists_num_visible = {
				NOT = { check_variable = { MSH_Influences_Selected_State:MSH_Influences^2 < 5 } }
			}

			legalists_national_num_visible = {
				NOT = { check_variable = { MSH_Influences_National^0 < 5 } }
			}
			purists_national_num_visible = {
				NOT = { check_variable = { MSH_Influences_National^1 < 5 } }
			}
			reformists_national_num_visible = {
				NOT = { check_variable = { MSH_Influences_National^2 < 5 } }
			}
			
			progbar_0_visible  = {
				check_variable = { MSH_Influences_Selected_State:MSH_Influences^0 > 0 }
			}
			progbar_2_visible  = {
				check_variable = { MSH_Influences_Selected_State:MSH_local_display > 0 }
			}
		}
	}
	
	eaw_MSH_Scholastic_Focus_GUI = {
		window_name = eaw_MSH_Scholastic_Focus_GUI
		context_type = decision_category
		properties = {
			focus_legalist_button = {
				frame = legalist_btn_frame
			}
			focus_purist_button = {
				frame = purist_btn_frame
			}
			focus_reformist_button = {
				frame = reformist_btn_frame
			}
		}
		effects = {
			focus_legalist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 0
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 0 }
					set_variable = { legalist_btn_frame = 1 }
					set_variable = { purist_btn_frame = 2 }
					set_variable = { reformist_btn_frame = 2 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
			focus_purist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 1
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 1 }
					set_variable = { legalist_btn_frame = 2 }
					set_variable = { purist_btn_frame = 1 }
					set_variable = { reformist_btn_frame = 2 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
			focus_reformist_button_click = {
				if = {
					limit = {
						NOT = {
							check_variable = {
								MSH_Focus_Faction = 2
							}
						}
					}
					set_variable = { MSH_Focus_Faction = 2 }
					set_variable = { legalist_btn_frame = 2 }
					set_variable = { purist_btn_frame = 2 }
					set_variable = { reformist_btn_frame = 1 }
					add_to_variable = { MSH_Influences_Dirty = 0.01 }
				}
			}
		}
	}
}