scripted_gui = {
	tetownia = {
		window_name = "tetownia_container"
  
		context_type = player_context
  
		visible = {
			tag = BAR
		}
		effects = { 
			tetownia_bg_click = {
				if = {
					limit = {
						has_country_flag = BAR_show_window
					}
					clr_country_flag = BAR_show_window
					set_variable = { bar_pen_screen = 1 }
				}
				else = {
					set_country_flag = BAR_show_window
					set_variable = { bar_pen_screen = 1 }
				}	
			}
		}
	}
	tetownia2 = {
		window_name = "pentarchy_info_window"
  
		context_type = player_context
  
		visible = {
			has_country_flag = BAR_show_window
			tag = BAR
		}
		triggers = {
			bar_pen_screen_ambrosius_button_off_visible = {
				NOT = { check_variable = { bar_pen_screen = 1 } }
				NOT = { has_country_flag = BAR_advisors_killed}
			}
			bar_pen_screen_ambrosius_button_on_visible = {
				check_variable = { bar_pen_screen = 1 }
				NOT = { has_country_flag = BAR_advisors_killed}
			}
			bar_pen_screen_asinti_button_off_visible = {
				NOT = { check_variable = { bar_pen_screen = 2 } }
				has_country_flag = barrad_asinti_alive
			}
			bar_pen_screen_asinti_button_on_visible = {
				check_variable = { bar_pen_screen = 2 }
				has_country_flag = barrad_asinti_alive
			}
			bar_pen_screen_leopold_button_off_visible = {
				NOT = { check_variable = { bar_pen_screen = 3 } }
				has_country_flag = barrad_leopold_alive
			}
			bar_pen_screen_leopold_button_on_visible = {
				check_variable = { bar_pen_screen = 3 }
				has_country_flag = barrad_leopold_alive
			}
			bar_pen_screen_silver_button_off_visible = {
				NOT = { check_variable = { bar_pen_screen = 4 } }
				has_country_flag = barrad_silver_star_alive
			}
			bar_pen_screen_silver_button_on_visible = {
				check_variable = { bar_pen_screen = 4 }
				has_country_flag = barrad_silver_star_alive
			}
			bar_pen_screen_viira_button_off_visible = {
				NOT = {
					OR = {
						check_variable = { bar_pen_screen = 5 }
						check_variable = { bar_pen_screen = 6 }
					}
				}	
				has_country_flag = barrad_viira_alive
			}
			bar_pen_screen_viira_button_on_visible = {
				OR = {
					check_variable = { bar_pen_screen = 5 }
					check_variable = { bar_pen_screen = 6 }
				}
				has_country_flag = barrad_viira_alive
			}
			bar_pen_screen_ambrosius_button_off_ded_visible = {
				NOT = { check_variable = { bar_pen_screen = 1 } }
				has_country_flag = BAR_advisors_killed
			}
			bar_pen_screen_ambrosius_button_on_ded_visible = {
				check_variable = { bar_pen_screen = 1 }
				has_country_flag = BAR_advisors_killed
			}
			bar_pen_screen_asinti_button_off_ded_visible = {
				NOT = { check_variable = { bar_pen_screen = 2 } }
				NOT = { has_country_flag = barrad_asinti_alive }
			}
			bar_pen_screen_asinti_button_on_ded_visible = {
				check_variable = { bar_pen_screen = 2 }
				NOT = { has_country_flag = barrad_asinti_alive }
			}
			bar_pen_screen_leopold_button_off_ded_visible = {
				NOT = { check_variable = { bar_pen_screen = 3 } }
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			bar_pen_screen_leopold_button_on_ded_visible = {
				check_variable = { bar_pen_screen = 3 }
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			bar_pen_screen_silver_button_off_ded_visible = {
				NOT = { check_variable = { bar_pen_screen = 4 } }
				NOT = { has_country_flag = barrad_silver_star_alive }
			}
			bar_pen_screen_silver_button_on_ded_visible = {
				check_variable = { bar_pen_screen = 4 }
				NOT = { has_country_flag = barrad_silver_star_alive }
			}
			bar_pen_screen_viira_button_off_ded_visible = {
				NOT = {
					OR = {
						check_variable = { bar_pen_screen = 5 }
						check_variable = { bar_pen_screen = 6 }
					}
				}	
				NOT = { has_country_flag = barrad_viira_alive }
			}
			bar_pen_screen_viira_button_on_ded_visible = {
				OR = {
					check_variable = { bar_pen_screen = 5 }
					check_variable = { bar_pen_screen = 6 }
				}
				NOT = { has_country_flag = barrad_viira_alive }
			}
		}
		effects = { 
			bar_pen_close_button_click = {
				clr_country_flag = BAR_show_window
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_ambrosius_button_off_click = {
				set_variable = { bar_pen_screen = 1 }
			}
			bar_pen_screen_ambrosius_button_on_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_asinti_button_off_click = {
				set_variable = { bar_pen_screen = 2 }
			}
			bar_pen_screen_asinti_button_on_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_leopold_button_off_click = {
				set_variable = { bar_pen_screen = 3 }
			}
			bar_pen_screen_leopold_button_on_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_silver_button_off_click = {
				set_variable = { bar_pen_screen = 4 }
			}
			bar_pen_screen_silver_button_on_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_viira_button_off_click = {
				set_variable = { bar_pen_screen = 5 }
			}
			bar_pen_screen_viira_button_on_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_ambrosius_button_off_ded_click = {
				set_variable = { bar_pen_screen = 1 }
			}
			bar_pen_screen_ambrosius_button_on_ded_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_asinti_button_off_ded_click = {
				set_variable = { bar_pen_screen = 2 }
			}
			bar_pen_screen_asinti_button_on_ded_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_leopold_button_off_ded_click = {
				set_variable = { bar_pen_screen = 3 }
			}
			bar_pen_screen_leopold_button_on_ded_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_silver_button_off_ded_click = {
				set_variable = { bar_pen_screen = 4 }
			}
			bar_pen_screen_silver_button_on_ded_click = {
				clear_variable = bar_pen_screen
			}
			bar_pen_screen_viira_button_off_ded_click = {
				set_variable = { bar_pen_screen = 5 }
			}
			bar_pen_screen_viira_button_on_ded_click = {
				clear_variable = bar_pen_screen
			}
		}
	}
	bar_pen_screen_ambrosius = {
		context_type = player_context

		window_name = "bar_pen_ambrosius_info"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 1 }
		}
	}
	bar_pen_screen_asinti = {
		context_type = player_context

		window_name = "bar_pen_asinti_info"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 2 }
		}
	}
	bar_pen_screen_leopold = {
		context_type = player_context

		window_name = "bar_pen_leopold_info"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 3 }
		}
	}
	bar_pen_screen_silver = {
		context_type = player_context

		window_name = "bar_pen_screen_silver_info"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 4 }
		}
	}
	bar_pen_screen_viira = {
		context_type = player_context

		window_name = "bar_pen_viira_info"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 5 }
		}
		triggers = {
			bar_pen_screen_viira_clues_button = {
				check_variable = { bar_pen_screen = 5 }
			}
		}
		effects = {
			bar_pen_screen_viira_clues_button_click = {
				set_variable = { bar_pen_screen = 6 }
			}
		}	
	}
	bar_pen_screen_viira_clues = {
		context_type = player_context

		window_name = "bar_pen_screen_viira_clues"
		parent_window_name = "pentarchy_info_window"

		visible = {
			check_variable = { bar_pen_screen = 6 }
		}
		triggers = { 
			bar_pen_viira_clues_text = {
				has_country_flag = barrad_plants
			}
		}
		effects = {
			bar_pen_screen_viira_clues_button_click = {
				set_variable = { bar_pen_screen = 5 }
			}
		}	
	}
	bar_viira_nukes = {
		window_name = "bar_viira_nukes"
		context_type = selected_state_context
		parent_window_token = selected_state_view
  
		visible = {
			ROOT = {
				tag = BAR
				has_country_flag = BAR_viira_control
			}	
			controller = {
				has_war_with = BAR
			}
			any_neighbor_state ={
				is_controlled_by = BAR
			}
		}
		effects = { 
			bar_viira_nukes_button_click = {
				ROOT = {
					launch_nuke = {
						state = PREV
						use_nuke = no
					}
					add_to_variable = {
						viira_mana_overload = 5
					}
					bar_viira_spells_max_overload = yes
				}	
			}
		}
	}
	bar_viira_zone = {
		window_name = "bar_viira_zone"
		context_type = selected_state_context
		parent_window_token = selected_state_view
  
		visible = {
			ROOT = {
				tag = BAR
				OR = {
					has_country_flag = BAR_viira_control
					has_country_flag = BAR_viira_pup
				}	
			}	
			is_controlled_by = BAR
			NOT = {
				has_state_flag = BAR_climate
			}
		}
		effects = { 
			bar_viira_zone_button_click = {
				set_state_flag = BAR_climate
				add_province_modifier = {
					static_modifiers = { barrad_climate3 }
					province = {
						all_provinces = yes
					}
				}
				add_resistance_target = {
					amount = -10
					occupier = BAR
				}
				add_compliance = 30
				ROOT = {
					add_to_variable = {
						viira_mana_overload = 5
					}
					bar_viira_spells_max_overload = yes
				}
			}
		}
	}	
	bar_cpt_quest = {
		window_name = "bar_cpt_quest"
		context_type = selected_state_context
		parent_window_token = selected_state_view
  
		visible = {
			ROOT = {
				tag = BAR
				has_country_flag = barrad_plants
			}	
			is_controlled_by = BAR
			state = 624
		}
		effects = {
			bar_cpt_quest_button_click = {
				ROOT = {
					clr_country_flag = barrad_plants
					country_event = { id = barrad_third.8 }
				}
			}
		}
	}	
	bar_vir_quest = {
		window_name = "bar_vir_quest"
		context_type = selected_state_context
		parent_window_token = selected_state_view
  
		visible = {
			ROOT = {
				tag = BAR
				has_country_flag = bar_elemele2
			}	
			is_controlled_by = BAR
			state = 624
		}
		effects = {
			bar_vir_quest_button_click = {
				ROOT = {
					clr_country_flag = bar_elemele2
					country_event = { id = barrad_third.10 }
				}
			}
		}
	}	
}