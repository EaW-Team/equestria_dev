scripted_gui = {
	KXN_Nirik_Kirin_Toggle_SGUI = {
		context_type = player_context
		parent_window_name = "countrypoliticsview"

		visible = {
			ROOT = {
				tag = KXN
			}
		}

		window_name = "KXN_Nirik_Kirin_Toggle_Window"

		triggers = {
			KXN_Nirik_Glow_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var > 0 }
			}
			KXN_Nirik_Pulsar_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var > 0 }
			}
			KXN_Nirik_Counter_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var > 0 }
			}
			KXN_Kirin_Button_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var < 1 }
				check_variable = { KXN.KXN_Kirin_Countdown_Var < 1 }
			}
			KXN_Kirin_Counter_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var < 1 }
				check_variable = { KXN.KXN_Kirin_Countdown_Var > 0 }
			}
			KXN_Kirin_Icon_visible = {
				check_variable = { KXN.KXN_Nirik_Counter_Var < 1 }
				check_variable = { KXN.KXN_Kirin_Countdown_Var > 0 }
			}
			KXN_Kirin_Icon_click_enabled = {
				always = no ## Grey-out
			}
		}

		properties = {
		}

		effects = {
			KXN_Kirin_Button_click = {
				set_variable = { var = KXN_Nirik_Counter_Var value = KXN_Nirik_Counter_Days }
				set_variable = { var = KXN_Kirin_Countdown_Var value = KXN_Kirin_Countdown_Days }
			}
		}
	}
	
	KXN_City_Fall_SGUI_0 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_0_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_0 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_0
					clr_country_flag = KXN_City_Fall_SGUI_0_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_0 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_0
					clr_country_flag = KXN_City_Fall_SGUI_0_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_0 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_0
					clr_country_flag = KXN_City_Fall_SGUI_0_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_1 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_1_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_1 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_1
					clr_country_flag = KXN_City_Fall_SGUI_1_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_1 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_1
					clr_country_flag = KXN_City_Fall_SGUI_1_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_1 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_1
					clr_country_flag = KXN_City_Fall_SGUI_1_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_2 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_2_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_2 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_2
					clr_country_flag = KXN_City_Fall_SGUI_2_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_2 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_2
					clr_country_flag = KXN_City_Fall_SGUI_2_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_2 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_2
					clr_country_flag = KXN_City_Fall_SGUI_2_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_3 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_3_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_3 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_3
					clr_country_flag = KXN_City_Fall_SGUI_3_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_3 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_3
					clr_country_flag = KXN_City_Fall_SGUI_3_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_3 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_3
					clr_country_flag = KXN_City_Fall_SGUI_3_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_4 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_4_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_4 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_4
					clr_country_flag = KXN_City_Fall_SGUI_4_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_4 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_4
					clr_country_flag = KXN_City_Fall_SGUI_4_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_4 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_4
					clr_country_flag = KXN_City_Fall_SGUI_4_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_5 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_5_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_5 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_5
					clr_country_flag = KXN_City_Fall_SGUI_5_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_5 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_5
					clr_country_flag = KXN_City_Fall_SGUI_5_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_5 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_5
					clr_country_flag = KXN_City_Fall_SGUI_5_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_6 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_6_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_6 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_6
					clr_country_flag = KXN_City_Fall_SGUI_6_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_6 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_6
					clr_country_flag = KXN_City_Fall_SGUI_6_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_6 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_6
					clr_country_flag = KXN_City_Fall_SGUI_6_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_7 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_7_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_7 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_7
					clr_country_flag = KXN_City_Fall_SGUI_7_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_7 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_7
					clr_country_flag = KXN_City_Fall_SGUI_7_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_7 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_7
					clr_country_flag = KXN_City_Fall_SGUI_7_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_8 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_8_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_8 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_8
					clr_country_flag = KXN_City_Fall_SGUI_8_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_8 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_8
					clr_country_flag = KXN_City_Fall_SGUI_8_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_8 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_8
					clr_country_flag = KXN_City_Fall_SGUI_8_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_9 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_9_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_9 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_9
					clr_country_flag = KXN_City_Fall_SGUI_9_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_9 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_9
					clr_country_flag = KXN_City_Fall_SGUI_9_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_9 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_9
					clr_country_flag = KXN_City_Fall_SGUI_9_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_10 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_10_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_10 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_10
					clr_country_flag = KXN_City_Fall_SGUI_10_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_10 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_10
					clr_country_flag = KXN_City_Fall_SGUI_10_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_10 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_10
					clr_country_flag = KXN_City_Fall_SGUI_10_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_11 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_11_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_11 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_11
					clr_country_flag = KXN_City_Fall_SGUI_11_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_11 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_11
					clr_country_flag = KXN_City_Fall_SGUI_11_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_11 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_11
					clr_country_flag = KXN_City_Fall_SGUI_11_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_12 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_12_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_12 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_12
					clr_country_flag = KXN_City_Fall_SGUI_12_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_12 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_12
					clr_country_flag = KXN_City_Fall_SGUI_12_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_12 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_12
					clr_country_flag = KXN_City_Fall_SGUI_12_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_13 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_13_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_13 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_13
					clr_country_flag = KXN_City_Fall_SGUI_13_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_13 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_13
					clr_country_flag = KXN_City_Fall_SGUI_13_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_13 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_13
					clr_country_flag = KXN_City_Fall_SGUI_13_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_14 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_14_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_14 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_14
					clr_country_flag = KXN_City_Fall_SGUI_14_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_14 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_14
					clr_country_flag = KXN_City_Fall_SGUI_14_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_14 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_14
					clr_country_flag = KXN_City_Fall_SGUI_14_ACTIVE
				}
			}
		}
	}
	KXN_City_Fall_SGUI_15 = {
		context_type = player_context
		window_name = "KXN_City_Fall_Window"

		visible = {
			ROOT = {
				tag = KXN
				has_country_flag = KXN_City_Fall_SGUI_15_ACTIVE
			}
		}

		effects = {
			KXN_CF_OCCUPY_BUTTON_click = {
				event_target:KXN_City_Fall_State_15 = {
					KXN_OCCUPY_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_15
					clr_country_flag = KXN_City_Fall_SGUI_15_ACTIVE
				}
			}
			KXN_CF_PILLAGE_BUTTON_click = {
				event_target:KXN_City_Fall_State_15 = {
					KXN_PILLAGE_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_15
					clr_country_flag = KXN_City_Fall_SGUI_15_ACTIVE
				}
			}
			KXN_CF_BURN_BUTTON_click = {
				event_target:KXN_City_Fall_State_15 = {
					KXN_BURN_STATE_EFFECT = yes
				}
				ROOT = {
					clear_global_event_target = KXN_City_Fall_State_15
					clr_country_flag = KXN_City_Fall_SGUI_15_ACTIVE
				}
			}
		}
	}
}