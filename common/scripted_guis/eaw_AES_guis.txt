scripted_gui = {
	AES_aesgyptian_lore_gui = {
		context_type = decision_category
		window_name = AES_aesgyptian_lore_container
		
		dynamic_lists = {
			map_markers_grid = {
				array = AES_aesgyptian_lore_map_markers
				entry_container = "AES_aesgyptian_map_marker_entry_container"
			}
		}
		
		properties = {
			map_marker = {
				x = AES_aesgyptian_lore_map_marker_x@var:v
				y = AES_aesgyptian_lore_map_marker_y@var:v
				frame = AES_aesgyptian_lore_map_marker_frame@var:v
			}
		}
		
		effects = {
			map_marker_click = {
				set_variable = { AES_aesgyptian_lore_map_marker_frame@var:v = 1 }
				meta_effect = {
					text = {
						country_event = aestloniamaregypt.[ID]
					}
					ID = "[?v]"
				}
			}
		}
	}
	AES_kelpie_lore_gui = {
		context_type = decision_category
		window_name = AES_kelpie_lore_container
		
		dynamic_lists = {
			map_markers_grid = {
				array = AES_kelpie_lore_map_markers
				entry_container = "AES_kelpie_map_marker_entry_container"
			}
		}
		
		properties = {
			map_marker = {
				x = AES_kelpie_lore_map_marker_x@var:v
				y = AES_kelpie_lore_map_marker_y@var:v
				frame = AES_kelpie_lore_map_marker_frame@var:v
			}
		}
		
		effects = {
			map_marker_click = {
				set_variable = { AES_kelpie_lore_map_marker_frame@var:v = 1 }
				meta_effect = {
					text = {
						country_event = aestloniakelpielore.[ID]
					}
					ID = "[?v]"
				}
			}
		}
	}
	AES_kelpie_tech_salvage_gui = {
		#context_type = decision_category
		context_type = player_context
		window_name = AES_kelpie_tech_salvage_container
		
		visible = {
			always = no
		}
		
		dynamic_lists = {
			map_markers_grid = {
				array = AES_kelpie_tech_salvage_markers
				entry_container = "AES_kelpie_coltlantis_map_marker_entry_container"
			}
		}
		
		triggers = {
			kelpie_old_coltlantis_map_icon_visible = {
				
				#Wanted to avoid doing an on_daily check.
				meta_trigger = {
					text = {
						set_temp_variable = { temp_frame = [DAYS_LEFT] }
					}
					DAYS_LEFT = "[?AES_tech_salvage_underway:days_left]"
				}
				subtract_from_temp_variable = { temp_frame = 100 }
				#divide_temp_variable = { temp_frame = 100 }
				multiply_temp_variable = { temp_frame = -1 }
			}
			map_marker_btn_visible = {
				check_variable = { AES_kelpie_tech_salvage_marker_stage@var:v = 0 }
			}
			map_marker_btn_click_enabled = {
				NOT = { has_variable = AES_kelpie_tech_salvage_target }
			}
			map_marker_icon_visible = {
				check_variable = { AES_kelpie_tech_salvage_marker_stage@var:v > 0 }
			}
			map_marker_progressbar_visible = {
				check_variable = { AES_kelpie_tech_salvage_marker_stage@var:v = 1 }
			}
			map_marker_sonar_line_visible = {
				check_variable = { AES_kelpie_tech_salvage_marker_stage@var:v = 1 }
			}
		}
		
		properties = {
			map_marker_btn = {
				x = AES_kelpie_tech_salvage_marker_x@var:v
				y = AES_kelpie_tech_salvage_marker_y@var:v
			}
			map_marker_icon = {
				x = AES_kelpie_tech_salvage_marker_x@var:v
				y = AES_kelpie_tech_salvage_marker_y@var:v
				image = "[GetColtlantisGUIIcon]"
			}
			map_marker_progressbar = {
				x = AES_kelpie_tech_salvage_marker_x@var:v
				y = AES_kelpie_tech_salvage_marker_y@var:v
				frame = temp_frame
			}
			map_marker_sonar_line = {
				x = AES_kelpie_tech_salvage_marker_x@var:v
				y = AES_kelpie_tech_salvage_marker_y@var:v
				frame = temp_frame
			}
		}
		
		effects = {
			#map_marker_click = {
			#	set_variable = { AES_kelpie_lore_map_marker_frame@var:v = 1 }
			#	meta_effect = {
			#		text = {
			#			country_event = aestloniakelpielore.[ID]
			#		}
			#		ID = "[?v]"
			#	}
			#}
			map_marker_btn_click = {
				set_variable = { AES_kelpie_tech_salvage_marker_stage@var:v = 1 }
				set_variable = { AES_kelpie_tech_salvage_target = v }
				add_to_variable = { AES_kelpie_tech_salvage_marker_x@var:v = -7 }
				add_to_variable = { AES_kelpie_tech_salvage_marker_y@var:v = -7 }
				set_country_flag = {
					flag = AES_tech_salvage_underway
					days = 100
					value = 1
				}
				country_event = {
					id = aestloniacoltlantis.100
					days = 100
				}
			}
		}
	}
}
