scripted_gui = {
    MER_SoD_deccat = {
		window_name = "MER_SoD_deccat"
		context_type = decision_category
		#context_type = player_context

		visible = {
			original_tag = MER
		}

		dynamic_lists = {
			bottom_factions_gridbox = {
				array = MER_factions_list
				change_scope = no
				value = selected_faction_value
				index = selected_faction_index
				entry_container = "MER_SoD_button_entry" 
			}
		}

		effects = {
			bottom_factions_button_click = {
				# Made the information be carried by the index
				# But maybe it will be better to be with the value, depending the situation
				set_variable = { MER_selected_faction = selected_faction_index }
				if = {
					limit = {
						check_variable = { MER_factions_list^num < 10 }
					}

					add_to_array = { MER_factions_list = 0 }
				}
			}

			bottom_factions_button_right_click = {
				set_variable = { MER_selected_faction = 0 }
				if = {
					limit = {
						check_variable = { MER_factions_list^num > 1 }
					}

					remove_from_array = {
						array = MER_factions_list
						index = selected_faction_index
					}
				}
			}
		}

		triggers = {
			bottom_factions_button_click_enabled = {
				#always = yes
				if = {
					limit = {
						check_variable = { MER_selected_faction = selected_faction_index }
					}
					set_temp_variable = { button_frame = 1 }
				} else = {
					set_temp_variable = { button_frame = 2 }
				}
			}
		}

		properties = {
			bottom_factions_button = { frame = button_frame }
			MER_faction_button_icon = { frame = button_frame }
		}
	}
}