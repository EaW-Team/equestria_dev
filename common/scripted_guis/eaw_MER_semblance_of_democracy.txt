scripted_gui = {
    MER_SoD_deccat = {
		window_name = "MER_SoD_deccat"
		context_type = decision_category
		#context_type = player_context
		dirty = mer_sod_dirty_var 
		visible = {
			original_tag = MER
		}

		dynamic_lists = {
			bottom_factions_gridbox = {
				array = MER_factions_list
				change_scope = no
				value = selected_faction_value
				index = selected_faction_index
				entry_container = "MER_SoD_button_entry" 
			}
			
			MER_SoD_group_members_grid = {
				array = MER_group_members_array
				change_scope = no 
				value = curr_member_supporter
				index = curr_member_index 
				entry_container = MER_SoD_member_entry
			} 
		}

		effects = {
			bottom_factions_button_click = {
				# Made the information be carried by the index
				# But maybe it will be better to be with the value, depending the situation
				set_variable = { MER_selected_faction = selected_faction_index }
				if = {
					limit = {
						check_variable = { MER_factions_list^num < 10 }
					}

					add_to_array = { MER_factions_list = 0 }
				}
			}

			bottom_factions_button_right_click = {
				set_variable = { MER_selected_faction = 0 }
				if = {
					limit = {
						check_variable = { MER_factions_list^num > 1 }
					}

					remove_from_array = {
						array = MER_factions_list
						index = selected_faction_index
					}
				}
			}
			
			MER_SoD_group_next_click = {
				add_to_variable = { MER_group_number = 1 }
				clamp_variable = { 
					var	= MER_group_number
					max = 3
				}
				
				add_to_variable = { mer_sod_dirty_var = 1 }
				
			}
			MER_SoD_group_prev_click = {
				add_to_variable = { MER_group_number = -1 }
				clamp_variable = { 
					var	= MER_group_number
					min = 0
				}
				
				add_to_variable = { mer_sod_dirty_var = 1 }
			}
		}

		triggers = {
			bottom_factions_button_click_enabled = {
				#always = yes
				if = {
					limit = {
						check_variable = { MER_selected_faction = selected_faction_index }
					}
					set_temp_variable = { button_frame = 1 }
				} else = {
					set_temp_variable = { button_frame = 2 }
				}
			}
		}

		properties = {
			bottom_factions_button = { frame = button_frame }
			MER_faction_button_icon = { frame = button_frame }
			MER_SoD_current_faction = { image = "[GetMERGroupIcon]" }
			MER_member_icon = { image = "[GetMERGroupIcon]" }
		}
	}
}