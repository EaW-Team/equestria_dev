scripted_gui = {

    MZN_TOE_GUI = {
		window_name = MZN_TOE_GUI
		context_type = decision_category

        VISIBLE = {
            tag = CTH
        }

        EFFECTS = {
            MZN_TOE_PJDI_parliament_seat_click = {
                if = {
                    limit = {
                        NOT = {
                            has_country_flag = MZN_open_PJDI_PANEL_flag
                        }
                    }
                    set_country_flag = MZN_open_PJDI_PANEL_flag
                }

                else_if = {
                    limit = {
                        has_country_flag = MZN_open_PJDI_PANEL_flag
                    }
                    clr_country_flag = MZN_open_PJDI_PANEL_flag
                }

                set_variable = { MZN_RS_BAR_var = MZN_RS_var }
                multiply_variable = { MZN_RS_BAR_var = 96 }
                set_variable = { MZN_BC_BAR_var = MZN_BC_var }
                multiply_variable = { MZN_BC_BAR_var = 96 }
            }
        }

        properties = {
            MZN_TOE_ACT_BAR = {
                frame = MZN_TOE_ACT_BAR_var
            }
        }
	}

        MZN_PJDI_Display_side_panel = {
            window_name = "MZN_PJDI_Display_side_panel"
            context_type = player_context
            visible = {
                tag = CTH
                has_country_flag = MZN_open_PJDI_PANEL_flag
                #has_country_flag = MZN_constitution_amendment_start
            }
        }

        MZN_PJDI_Display = {
            window_name = "MZN_PJDI_Display"
            context_type = player_context

            visible = {
                tag = CTH
                has_country_flag = MZN_open_PJDI_PANEL_flag
            }

            effects = {
                close_button_click = {
                    if = {
                        limit = {
                            NOT = {
                                has_country_flag = MZN_open_PJDI_PANEL_flag
                            }
                        }
                        set_country_flag = MZN_open_PJDI_PANEL_flag
                    }

                    else_if = {
                        limit = {
                            has_country_flag = MZN_open_PJDI_PANEL_flag
                        }
                        clr_country_flag = MZN_open_PJDI_PANEL_flag
                    }
                }
            }

            triggers = {
            }

            properties = {
                MZN_chance_of_pass = {
                    frame = MZN_CA_chance_of_pass
                }

                MZN_PJDI_AOS = {
                    frame = MZN_AOS_var
                }

                MZN_PJDI_solidarity_within_reformist_bar = {
                    x = MZN_RS_BAR_var
                }

                MZN_PJDI_balance_within_conservatives_bar = {
                    x = MZN_BC_BAR_var
                }
            }

            MZN_PJDI_Display_side_panel = {
                window_name = "MZN_PJDI_Display_side_panel"
                context_type = player_context
    
                visible = {
                    has_country_flag = MZN_Constitution_Amendment_start
                }
            }
        }
    }