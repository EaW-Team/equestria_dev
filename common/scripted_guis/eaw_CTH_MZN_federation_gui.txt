scripted_gui = {

    MZN_Federation_GUI_open_button = {
        window_name = MZN_Federation_GUI_open_button
        context_type = player_category

        visible = {
            tag = CTH
        #    has_completed_focus = CTH_MZN_dream_of_superstate
        }

        effects = {
            MZN_NZF_OPEN_button_click = {
                if = {
                    limit = {
                        has_country_flag = MZN_federation_GUI_show
                    }
                    MZN_NZF_clr_allset = yes
                    clr_country_flag = MZN_federation_GUI_show
                    set_variable = { MZN_NZF_reform_name = token:MZN_NZF_no_chosen }
                    set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_blank }
                }

                else = {
                    set_country_flag = MZN_NZF_GR_chosen_flag
                    set_variable = { MZN_NZF_top_bar_GR_var = 2 }
                    set_country_flag = MZN_federation_GUI_show
                    set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 185 }
                    set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_PR_title }
                }
            }
        }
    }
    MZN_federation_GUI = {
        window_name = MZN_Federation_GUI
		context_type = player_category

        visible = {
            tag = CTH
            has_country_flag = MZN_federation_GUI_show
        }

        triggers = {
            MZN_NZF_start_reform_button_click_enabled = {
                not = {
                    or = {
                        check_variable = { MZN_NZF_reform_name = token:MZN_NZF_no_chosen }
                        has_country_flag = MZN_NZF_reform_start
                    }
                }
            }
        }

        effects = {
            MZN_NZF_close_button_click = {
                MZN_NZF_clr_allset = yes
                clr_country_flag = MZN_federation_GUI_show
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_no_chosen }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_blank }
            }
            MZN_NZF_top_bar_CF_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_CF_var = 2 }
                set_country_flag = MZN_NZF_CF_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_CF_title}
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 0 }
            }

            MZN_NZF_top_bar_GR_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_GR_var = 2 }
                set_country_flag = MZN_NZF_GR_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_PR_title }
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 185 }
            }

            MZN_NZF_top_bar_SB_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_SB_var = 2 }
                set_country_flag = MZN_NZF_SB_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_FF_title}
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 360 }
            }
            
            MZN_NZF_start_reform_button_click = {
                set_variable = { MZN_NZF_in_processing_reform = MZN_NZF_reform_name }
                set_country_flag = MZN_NZF_reform_start
            }
        }

        properties = {

            MZN_NZF_top_bar_CF = {
                frame = MZN_NZF_top_bar_CF_var
            }
            MZN_NZF_top_bar_GR = {
                frame = MZN_NZF_top_bar_GR_var
            }
            MZN_NZF_top_bar_SB = {
                frame = MZN_NZF_top_bar_SB_var
            }
            MZN_NZF_top_bar_chosen_mark_triangle = {
                x = MZN_NZF_top_bar_chosen_mark_x_var
            }
            MZN_NZF_progress_bar = {
                frame = MZN_NZF_reform_process
            }
        }
    }

    MZN_Federation_reform_CF = {
        window_name = MZN_Federation_reform_CF
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_CF_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            MZN_NZF_reform_CF_1_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_1_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_1_d }
            }
            
            MZN_NZF_reform_CF_2_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_2_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_2_d }
            }

            MZN_NZF_reform_CF_3_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_3_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_3_d }
            }

            MZN_NZF_reform_CF_4_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_4_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_4_d }
            }

            MZN_NZF_reform_CF_5_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_5_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_5_d }
            }
        }

        properties = {
            MZN_NZF_reform_CF_1 = {
                frame = MZN_NZF_CF_array^0
            }
            MZN_NZF_reform_CF_2 = {
                frame = MZN_NZF_CF_array^1
            }
            MZN_NZF_reform_CF_3 = {
                frame = MZN_NZF_CF_array^2
            }
            MZN_NZF_reform_CF_4 = {
                frame = MZN_NZF_CF_array^3
            }
            MZN_NZF_reform_CF_5 = {
                frame = MZN_NZF_CF_array^4
            }
        }
    }

    MZN_Federation_reform_PR = {
        window_name = MZN_Federation_reform_PR
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_GR_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            MZN_NZF_reform_PR_1_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_1_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_1_d }
            }
            
            MZN_NZF_reform_PR_2_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_2_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_2_d }
            }

            MZN_NZF_reform_PR_3_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_3_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_3_d }
            }

            MZN_NZF_reform_PR_4_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_4_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_4_d }
            }

            MZN_NZF_reform_PR_5_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_5_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_5_d }
            }

            MZN_NZF_reform_PR_6_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_6_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_6_d }
            }

            MZN_NZF_reform_PR_7_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_7_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_7_d }
            }

            MZN_NZF_reform_PR_8_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_PR_8_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_PR_8_d }
            }
        }

        properties = {
            MZN_NZF_reform_PR_1 = {
                frame = MZN_NZF_PR_array^0
            }
            MZN_NZF_reform_PR_2 = {
                frame = MZN_NZF_PR_array^1
            }
            MZN_NZF_reform_PR_3 = {
                frame = MZN_NZF_PR_array^2
            }
            MZN_NZF_reform_PR_4 = {
                frame = MZN_NZF_PR_array^3
            }
            MZN_NZF_reform_PR_5 = {
                frame = MZN_NZF_PR_array^4
            }
            MZN_NZF_reform_PR_6 = {
                frame = MZN_NZF_PR_array^5
            }
            MZN_NZF_reform_PR_7 = {
                frame = MZN_NZF_PR_array^6
            }
            MZN_NZF_reform_PR_8 = {
                frame = MZN_NZF_PR_array^7
            }
        }
    }

    MZN_Federation_reform_FF = {
        window_name = MZN_Federation_reform_FF
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_SB_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            MZN_NZF_reform_FF_1_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_FF_1_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_FF_1_d }
            }
            
            MZN_NZF_reform_FF_2_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_FF_2_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_FF_2_d }
            }

            MZN_NZF_reform_FF_3_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_FF_3_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_FF_3_d }
            }

            MZN_NZF_reform_FF_4_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_FF_4_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_FF_4_d }
            }

            MZN_NZF_reform_FF_5_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_FF_5_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_FF_5_d }
            }
        }

        properties = {
            MZN_NZF_reform_FF_1 = {
                frame = MZN_NZF_FF_array^0
            }
            MZN_NZF_reform_FF_2 = {
                frame = MZN_NZF_FF_array^1
            }
            MZN_NZF_reform_FF_3 = {
                frame = MZN_NZF_FF_array^2
            }
            MZN_NZF_reform_FF_4 = {
                frame = MZN_NZF_FF_array^3
            }
            MZN_NZF_reform_FF_5 = {
                frame = MZN_NZF_FF_array^4
            }
        }
    }
}