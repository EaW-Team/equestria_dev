scripted_gui = {

    MZN_Federation_GUI_open_button = {
        window_name = MZN_Federation_GUI_open_button
        context_type = player_category

        visible = {
            tag = CTH
        #    has_completed_focus = CTH_MZN_dream_of_superstate
        }

        effects = {
            MZN_NZF_OPEN_button_click = {
                if = {
                    limit = {
                        has_country_flag = MZN_federation_GUI_show
                    }
                    MZN_NZF_clr_allset = yes
                    clr_country_flag = MZN_federation_GUI_show
                    set_variable = { MZN_NZF_reform_name = token:MZN_NZF_no_chosen }
                    set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_blank }
                }

                else = {
                    set_country_flag = MZN_NZF_GR_chosen_flag
                    set_variable = { MZN_NZF_top_bar_GR_var = 2 }
                    set_country_flag = MZN_federation_GUI_show
                    set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 185 }
                    set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_PR_title }
                }
            }
        }
    }
    MZN_federation_GUI = {
        window_name = MZN_Federation_GUI
		context_type = player_category

        visible = {
            tag = CTH
            has_country_flag = MZN_federation_GUI_show
        }

        triggers = {

        }

        effects = {
            MZN_NZF_close_button_click = {
                MZN_NZF_clr_allset = yes
                clr_country_flag = MZN_federation_GUI_show
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_no_chosen }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_blank }
            }
            MZN_NZF_top_bar_CF_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_CF_var = 2 }
                set_country_flag = MZN_NZF_CF_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_CF_title}
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 0 }
            }

            MZN_NZF_top_bar_GR_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_GR_var = 2 }
                set_country_flag = MZN_NZF_GR_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_PR_title }
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 185 }
            }

            MZN_NZF_top_bar_SB_click = {
                MZN_NZF_clr_allset = YES
                set_variable = { MZN_NZF_top_bar_SB_var = 2 }
                set_country_flag = MZN_NZF_SB_chosen_flag
                set_variable = { MZN_NZF_reform_title_var = token:MZN_NZF_FF_title}
                set_variable = { MZN_NZF_top_bar_chosen_mark_x_var = 360 }
            }
        }

        properties = {

            MZN_NZF_top_bar_CF = {
                frame = MZN_NZF_top_bar_CF_var
            }
            MZN_NZF_top_bar_GR = {
                frame = MZN_NZF_top_bar_GR_var
            }
            MZN_NZF_top_bar_SB = {
                frame = MZN_NZF_top_bar_SB_var
            }
            MZN_NZF_top_bar_chosen_mark_triangle = {
                x = MZN_NZF_top_bar_chosen_mark_x_var
            }
            MZN_NZF_progress_bar = {
                frame = MZN_NZF_reform_process
            }
        }
    }

    MZN_Federation_reform_CF = {
        window_name = MZN_Federation_reform_CF
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_CF_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            MZN_NZF_reform_CF_1_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_1_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_1_d }
            }
            
            MZN_NZF_reform_CF_2_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_2_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_2_d }
            }

            MZN_NZF_reform_CF_3_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_3_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_3_d }
            }

            MZN_NZF_reform_CF_4_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_4_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_4_d }
            }

            MZN_NZF_reform_CF_5_click = {
                set_variable = { MZN_NZF_reform_name = token:MZN_NZF_reform_CF_5_t }
                set_variable = { MZN_NZF_reform_desc = token:MZN_NZF_reform_CF_5_d }
            }
        }
    }

    MZN_Federation_reform_PR = {
        window_name = MZN_Federation_reform_PR
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_GR_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            
        }
    }

    MZN_Federation_reform_FF = {
        window_name = MZN_Federation_reform_FF
        context_type = player_category
        parent_window_token = MZN_Federation_GUI

        visible = {
            tag = CTH
            has_country_flag = MZN_NZF_SB_chosen_flag
            has_country_flag = MZN_federation_GUI_show
        }

        effects = {
            
        }
    }
}