carrier_battlegroups = {
    track = carriers
    name = SUBDOCTRINE_CARRIER_BATTLEGROUPS
    description = SUBDOCTRINE_CARRIER_BATTLEGROUPS_DESC
    icon = GFX_carrier_battlegroups_medium

    xp_cost = 100
    xp_type = navy

    ai_will_do = { 
        base = 1
        #modifier = {
        #    factor = 95
        #    original_tag = USA
        #}
    }

    available = {
        always = yes
    }

    ai_will_do = { }

    # EFFECTS
	port_strike = 0.20

    rewards = {
		long_distance_logistics = {
			navy_max_range_factor = 0.1
		}
        long_range_target_acquisition = {
			navy_carrier_air_targetting_factor = 0.1
		}
		personnel_management = {
			carrier = {
				max_organisation = 60
			}
		}
		dedicated_record_keeping = {
			carrier = {
				carrier_surface_detection = 0.20
			}
		}
		floating_fortresses = {
			carrier = {
				anti_air_attack = 0.35
			}
		}
    }
}

floating_airfields = {
    track = carriers
    name = SUBDOCTRINE_CARRIER_AIRFIELDS
    description = SUBDOCTRINE_CARRIER_AIRFIELDS_DESC
    icon = GFX_floating_airfield_medium

    xp_cost = 100
    xp_type = navy

    available = {
        always = yes
    }

    ai_will_do = { 
        base = 1
        #modifier = {
        #    factor = 95
        #    OR = {
        #        original_tag = ENG
        #        original_tag = FRA
        #    }
        #}
        modifier = {
            factor = 2
            is_major = yes 
        }
        modifier = {
            factor = 0
            is_major = no 
        }
    }

    # EFFECTS
	sortie_efficiency = 0.10
	
    rewards = {
       traffic_control_systems = {
			carrier_capacity_penalty_reduction = -0.20
	   }
	   floating_city = {
			carrier = {
				max_organisation = 40
			}
	   }
	   veteran_pilots = {
			navy_carrier_air_attack_factor = 0.15
	   }
	   night_fighting_expertise = {
			air_carrier_night_penalty_reduction_factor = 0.15
	   }
	   rough_weather_procedures = {
			carrier = {
				naval_weather_penalty_factor = -0.25
			}
	   }
    }
}

escort_carrier_support = {
    track = carriers
    name = SUBDOCTRINE_ESCORT_CARRIER_SUPPORT
    description = SUBDOCTRINE_ESCORT_CARRIER_SUPPORT_DESC
    icon = GFX_escort_carriers_medium

    xp_cost = 100
    xp_type = navy

    available = {
        is_special_project_completed = sp:sp_naval_escort_carrier
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
    }
    
    convoy_escort_efficiency = 0.5

    rewards = {
    	evasive_convoy_maneuvers = {
    		convoy_retreat_speed = 0.5
    	}
    	anti_submarine_escorts = {
    		carrier = {
    		 sub_detection = 0.2
    		}
    	}
    	civilian_hull_shapes = {
        	equipment_bonus = {
                escort_carrier = {
                    surface_visibility = -0.2
                    instant = yes
                }
            }
    	}
    	integrated_convoy_escorts = {
            equipment_bonus = {
                escort_carrier = {
                    sub_detection = 0.15
                    instant = yes
                }
                convoy = {
                    naval_speed = 0.25
                    instant = yes
                }
            }
			carrier = {
				max_organisation = 20
			}

    	}
    	convoy_carrier_support_groups = {
            equipment_bonus = {
                escort_carrier = {
                    build_cost_ic = -0.1
                    instant = yes
                }
            }
			repair_ship = {
				reliability = 0.2
			}

			support_ship = {
				reliability = 0.2
			}

    	}
   	}
}

broad_naval_support = {
    track = carriers
    name = SUBDOCTRINE_BROAD_NAVAL_SUPPORT
    description = SUBDOCTRINE_BROAD_NAVAL_SUPPORT_DESC
    icon = GFX_carrier_task_forces_medium

    xp_cost = 100
    xp_type = navy

    available = {
        OR = {
            is_special_project_completed = sp:sp_naval_escort_carrier
            is_special_project_completed = sp:sp_naval_support_ships
        }
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
    }

    critical_receive_chance = -0.1

    rewards = {
    	carrier_maneuvering = {
    		carrier = {
    			naval_speed = 0.1
    		}
    	}
    	task_force_concentration = {
    		ships_at_battle_start = 0.1
    	}

    	organized_support_protocols = {
    		naval_repair_support_value_factor = 0.25
    		naval_general_support_value_factor = 0.25 
    	}
    	escorts_in_battle = {
            equipment_bonus = {
                escort_carrier = {
                    lg_attack = 0.15
                    anti_air_attack = 0.1
                    lg_armor_piercing = 0.15
                    instant = yes
                }
            }
    	}
    	support_rotation = {
    		naval_repair_support_factor = 0.25
    		naval_general_support_factor = 0.25 
    		repair_ship = {
    			max_organisation = 20
    		}
    		support_ship = {
    			max_organisation = 20
    		}
    	}
	}
}

massed_carrier_fleet = {
    track = carriers
    name = SUBDOCTRINE_MASSED_CARRIER_FLEET
    description = SUBDOCTRINE_MASSED_CARRIER_FLEET_DESC
    icon = GFX_carrier_primacy_medium

    xp_cost = 100
    xp_type = navy

    ai_will_do = { 
        base = 1
        modifier = {
            factor = 95
            original_tag = JAP
        }
    }
    available = {
        always = yes
    }

    naval_morale_factor	= 0.05

    rewards = {
    	deep_operative_support = {
    		carrier = {
    			reliability = 0.05
    			naval_range = 0.2
    		}
    	}
    	carrier_independence = {
    		screening_without_screens = 0.3
    	}
    	crew_shifts = {
    		sortie_efficiency = 0.3
    		carrier_sortie_hours_delay = -2
    	}
    	efficient_rearming = {
    		carrier = {
    			supply_consumption = -0.2
    			fuel_consumption = -0.1
    		}
    	}
    	unceasing_airpower = {
    		carrier_traffic = 0.3
    		carrier_night_traffic = 0.3
    		carrier = {
    			anti_air_attack = 0.2
    		}
    	}
    }
}


light_task_forces = {
    track = carriers
    name = SUBDOCTRINE_LIGHT_TASK_FORCES
    description = SUBDOCTRINE_LIGHT_TASK_FORCES_DESC
    icon = GFX_subsidiary_carrier_role_medium

    xp_cost = 100
    xp_type = navy

    ai_will_do = { 
        base = 1
        #modifier = {
        #    factor = 95
        #    original_tag = GER
        #}
    }
    mastery = { # This will override the default mastery conditions for the track
        multiplier = 2 # Scales how much XP is converted to mastery
        sub_units = { # Which subunits contribute to mastery gain?
            carrier
            destroyer
        }
        
    }
    available = {
        always = yes
    }
    visible = {
        has_dlc = "No Compromise, No Surrender"
    }


    naval_retreat_speed_after_initial_combat = 0.2

    rewards = {
    	direct_fire_avoidance = {
    		carrier = {
    			naval_speed = 0.1
    			surface_visibility = -0.1
    		}
    	}
    	surface_fleets = {
    		carrier = {
                surface_visibility = -0.10
			}
			destroyer = {
                surface_visibility = -0.10
			}
    	}
    	screen_raiders = {
    		destroyer = {
    			lg_attack = 0.2
    			lg_armor_piercing = 0.2
    			max_organisation = 20
    		}
    	}
    	evasive_engagements_focus = {
    		carrier = {
    			max_organisation = 30
    		}
    		destroyer = {
    			naval_speed = 0.2
    			surface_detection = 0.2
    		}
    	}
    	localized_sea_power = {
    		strike_force_movement_org_loss = -0.3
    		naval_enemy_fleet_size_ratio_penalty_factor = 0.2	
    	}
    }

}
