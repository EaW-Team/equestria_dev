armored_spearhead = {
    track = armor
    name = SUBDOCTRINE_ARMORED_SPEARHEAD
    description = SUBDOCTRINE_ARMORED_SPEARHEAD_DESC
    icon = GFX_doctrine_armored_spearhead_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 95
            ROOT = { tag = CHN } 
        }
        modifier = {
            factor = 0.5
            ROOT = { is_major = no }
        }
    }

    # EFFECTS
    enable_tactic = tactic_breakthrough
    #TODO jack look if you can make a script effect for production bonuses

    rewards = {
        force_concentration = {
        #1
            category_tanks= {
                max_organisation = 1
                default_morale = 0.1
            }
        }
        armored_breakthrough_exploits = {
        #2
            category_all_armor = {
                breakthrough = 0.1
            }
        }
        local_reserves = {
        #3
        #TODO add armored car category
            armored_car = {
                default_morale = 0.1
                max_organisation = 7
            }
        }
        tactical_reconnaissance = {
        #4
            category_all_armor = {
                breakthrough = 0.1
            }
        }
        assault_detachments = {
        #5
        
             category_tanks= {
                max_organisation = 3
                breakthrough = 0.2
            }
        }
    }
}

armored_infantry_support = {
    track = armor
    name = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
    description = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT_DESC
    icon = GFX_doctrine_armored_infantry_support_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 95
            OR = {
                ROOT = { tag = EQS }
                ROOT = { tag = NLR }
            }
        }
        modifier = {
            factor = 0.5
            ROOT = { is_major = no }
        }
    }

    # EFFECTS
    enable_tactic = tactic_blitz
    effect = {
        add_tech_bonus = {
            bonus = 1
            uses = 1
            category = cat_heavy_armor
            name = SUBDOCTRINE_ARMORED_INFANTRY_SUPPORT
        }
    }
    #TODO jack look if you can make a script effect for production bonuses

    rewards = {
        mobile_reserves = {
        #1
            medium_armor = {
                breakthrough = 0.05
                soft_attack = 0.1
            }
            heavy_armor = {
                breakthrough = 0.05
                soft_attack = 0.1
            }
        }
        armored_cohorts = {
        #2
            medium_armor = {
                max_organisation = 7
            }
            heavy_armor = {
                max_organisation = 7
            }
        }
        maintenance_routines = {
        #3
        #TODO add armored car category
            armored_maintenance = {
                battalion_mult = {
                    category = category_all_armor
                    max_strength = 0.15
                    add = yes
                }
            }
        }
        fuel_rationing = {
        #4
            heavy_armor = {
                supply_consumption = -0.08
            }
        }
        mobile_armored_strongpoints = {
        #5
            category_all_infantry = {
                breakthrough = 0.05
            }
            heavy_armor = {
                breakthrough = 0.05
            }
        }
    }
}

streamlined_deployment = {
    track = armor
    name = SUBDOCTRINE_STREAMLINED_DEPLOYMENT
    description = SUBDOCTRINE_STREAMLINED_DEPLOYMENT_DESC
    icon = GFX_doctrine_streamlined_deployment_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

        ai_will_do = {

        base = 1
        modifier = {
            factor = 95
            ROOT = { tag = STG }
        }

    }

    category_all_armor = {
        soft_attack = 0.1
        breakthrough = 0.1
    }


    rewards = {
        flexible_armored_battalions = {

            unit_medium_armor_design_cost_factor = -0.5
            unit_light_armor_design_cost_factor  = -0.5
            light_tank_recon = {
                battalion_mult = {
                    category = category_all_armor
                    max_organisation = 2
                    add = yes
                }
            }

        }
        mechanized_wave = {
            armored_car = {
                max_organisation = 5
                default_morale = 0.2
            }
            category_all_armor = {
                default_morale = 0.2
            }
        }
        tank_desant = {
            #TODO: would be great to find a way to give a proportional speed increase to infantry based on presence of armored.
            armored_signal = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.05
                }
            }
            light_tank_recon = {
                battalion_mult = {
                    category = category_light_infantry
                    maximum_speed = 0.05
                }
            }
        }
        full_front_deployment = {
            category_all_armor = {
                reliability = 0.05
                supply_consumption = -0.02
            }

        }
        continuous_offensives = {
            category_all_armor = {
                default_morale = 0.2
                max_organisation = 2
            }
        }
    }


}

mobile_defense = {
    track = armor
    name = SUBDOCTRINE_MOBILE_DEFENSE
    description = SUBDOCTRINE_MOBILE_DEFENSE_DESC
    icon = GFX_doctrine_mobile_defense_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

        ai_will_do = {

        base = 1
        modifier = {
            factor = 95
            ROOT = { tag = HIP }
        }

        modifier = {
            factor = 0.5
            ROOT = { is_major = no }
        }

    }

    armored_engineer = {
        battalion_mult = {
            category = category_all_armor
            entrenchment = 0.02
        }
    }
    category_all_armor = {
        defense = 0.1
    }

    rewards = {

        mechanized_offensive = {
            mechanized = {
                defense = 0.1
                soft_attack = 0.1
            }
        }
        advance_under_fire = {
            light_armor = {
                breakthrough = 0.1
                default_morale = 0.2
            }
            medium_armor = {
                breakthrough = 0.1
                default_morale = 0.2
            }
        }
        attached_support = {
            assault_engineer = {
                max_organisation = 10
            }
            armored_engineer = {
                max_organisation = 10
            }
            armored_signal = {
                max_organisation = 10
            }

        }
        combined_anti_armor = {
            anti_tank = {
                battalion_mult = {
                    category = category_all_armor
                    hard_attack = 0.05
                    ap_attack = 0.05

                }
            }

        }
        tank_on_tank_engagement = {
            category_all_armor = {
                hard_attack = 0.1
                soft_attack = 0.1
                ap_attack = 0.05
            }
        }    
    }
}

armored_cavalry = {
    track = armor
    name = SUBDOCTRINE_ARMORED_CAVALRY
    description = SUBDOCTRINE_ARMORED_CAVALRY_DESC
    icon = GFX_doctrine_armored_cavalry_medium

    xp_cost = 100
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {

        base = 1
        modifier = {
            factor = 95
        }

    }

    armored_car = {
        max_organisation = 5
        defense = 0.05
    }
    mechanized =  {
        max_organisation = 5
        defense = 0.05
    }
    # EFFECTS
    rewards = {
        cruiser_tanks = {
            light_armor = {
				supply_consumption = -0.05
				fuel_consumption_factor = -0.15
                max_organisation = 5
                breakthrough = 0.05
				forest = {
					movement = 0.15
					attack = 0.05
				}
				jungle = {
					movement = 0.15
					attack = 0.05
				}
				river = {
					movement = 0.1
					attack = 0.05
				}
				marsh = {
					movement = 0.1
					attack = 0.05
				}
				mountains = {
					movement = 0.05
					attack = 0.05
				}
				hills = {
					movement = 0.05
					attack = 0.05
				}
				desert = {
					movement = 0.05
					attack = 0.05
				}
            }
        }
        quick_response_force = {
            motorized_military_police = {
                    battalion_mult = {
                        category = category_vehicle_infantry
                        suppression_factor = 0.05
                    }
    
            }
            armored_car = {
                suppression_factor = 0.2
            }
			coordination_bonus = 0.1
			initiative_factor = 0.05
        }
        speed_as_armour = {
            light_armor = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
            armored_car = {
                maximum_speed = 0.05
                breakthrough = 0.1
                soft_attack = 0.1
    
            }
            mechanized = {
                maximum_speed = 0.05
                breakthrough = 0.05
            }
			armored_car_recon = {
                battalion_mult = {
					category = category_special_forces
					maximum_speed = 0.1
					add = yes
				}
            }
			light_tank_recon = {
				battalion_mult = {
					category = category_special_forces
					maximum_speed = 0.15
					add = yes
				}
			}
        }
        fighting_reconnaissance = {
			intel_from_combat_factor = 0.15
            armored_car_recon = {
                max_organisation = 3
                soft_attack = 0.05
				recon = 0.25
				forest = {
					movement = 0.05
					attack = 0.025
				}
				jungle = {
					movement = 0.05
					attack = 0.025
				}
				river = {
					movement = 0.05
					attack = 0.025
				}
				marsh = {
					movement = 0.05
					attack = 0.025
				}
				mountains = {
					movement = 0.05
					attack = 0.025
				}
				hills = {
					movement = 0.05
					attack = 0.025
				}
				desert = {
					movement = 0.05
					attack = 0.025
				}
            }
            light_tank_recon = {
                max_organisation = 3
                soft_attack = 0.05
				recon = 0.25
				forest = {
					movement = 0.1
					attack = 0.05
				}
				jungle = {
					movement = 0.1
					attack = 0.05
				}
				river = {
					movement = 0.1
					attack = 0.05
				}
				marsh = {
					movement = 0.1
					attack = 0.05
				}
				mountains = {
					movement = 0.1
					attack = 0.05
				}
				hills = {
					movement = 0.1
					attack = 0.05
				}
				desert = {
					movement = 0.1
					attack = 0.05
				}
            }
        }
        sustained_deployments = {
			planning_speed = 0.2
			org_loss_when_moving = -0.15
			supply_node_range = 0.1
            light_armor = {
                max_organisation = 5
                soft_attack = 0.05
                hard_attack = 0.1
                default_morale = 0.2
            }
			armored_car = {
                default_morale = 0.1
            }
            mechanized = {
                default_morale = 0.1
            }
            motorized = {
                default_morale = 0.1
            }
        }
    }
}

tank_destroyer_force = {
     track = armor
    name = SUBDOCTRINE_TANK_DESTROYER_FORCE
    description = SUBDOCTRINE_TANK_DESTROYER_FORCE_DESC
    icon = GFX_doctrine_tank_destroyer_force_medium

    xp_cost = 100
    xp_type = army

    visible = {
        has_dlc = "No Compromise, No Surrender"
    }
    #Not my proudest moment

    ai_will_do = {

        base = 0

        }  

    armored_car = {
        hard_attack = 0.1
        ap_attack = 0.1
    }
    category_all_armor = {
        defense = 0.1
    }

    rewards = {

        mobile_anti_tank = {
            mot_anti_tank_brigade = {
                max_organisation = 10
                hard_attack = 0.1
                ap_attack = 0.1
            }

        }
        committed_operational_units = {
            assault_engineer = {
                battalion_mult = {
                    category = category_tank_destroyers
                    reliability = 0.02
                    soft_attack = 0.05
                    hard_attack = 0.2
                }
            }
        }
        redeployment_priority = {
            category_tank_destroyers = {
                supply_consumption = -0.02
                default_morale = 0.2
            }
        }

        independent_counterattacks = {
            category_tank_destroyers = {
                max_organisation = 6
                initiative = 0.1
            }
        }

        selfsufficient_battalion = {
            armored_signal = {
                battalion_mult = {
                    category = category_tank_destroyers
                    hard_attack = 0.1
                    ap_attack = 0.25

                }
            }
        }



    }
}
