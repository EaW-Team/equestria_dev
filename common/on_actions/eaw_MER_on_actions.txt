on_actions = {
	# MER #
	on_weekly_MER = {
		effect = {
			## Advisor
			if = {
				limit = { has_idea = MER_navy_chief_1 }
				add_equipment_to_stockpile = { 
					type = convoy
					amount = 18
				}
			}
			## Semblance
			#MPA
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_meridionalist_pop }
				}
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_meridionalist_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_meridionalists = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_geriatrie_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_geriatrie_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_geriatrie = yes
			}
			#PPH
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_expat_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_expat_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_expats = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_philantropes_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_philantropes_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_philantropes = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_yute_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_yute_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_yute = yes
			}

			#KPEy
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_clique_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_clique_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_troupe = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_flock_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_flock_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_flock = yes
			}
			#L'establishment
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_conservatives_pop }
				}
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_conservatives_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_conservatives = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_bureaucrats_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_bureaucrats_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_bureaucrats = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_weekly_nonpartisans_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_weekly_nonpartisans_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_nonpartisans = yes
			}

			### Salade d'Oeuf effect
			
			if = {
				limit = { MER_salade_doeuf = { is_political_advisor = yes } }
				set_temp_variable = { MER_MPA_equilibrium_effect = mer_sod_members_array_0^0 } 
				subtract_from_temp_variable = { MER_MPA_equilibrium_effect = mer_sod_members_array_0^1 }
				if = { 
					limit = { check_variable = { MER_MPA_equilibrium_effect < 0 } }
					set_temp_variable = { i_quantity = 1 }
					MER_sod_add_popularity_meridionalists = yes 
				}
				else_if = { 
					limit = { check_variable = { MER_MPA_equilibrium_effect > 0 } }
					set_temp_variable = { i_quantity = 1 }
					MER_sod_add_popularity_geriatrie = yes 
				}
			}
			
			## NAC
			if = {
				limit = {
					has_completed_focus = MER_naval_appropriations_commission
				}

				# Update the current number of dockyard
				set_temp_variable = { temp_dockyard_nb = MER_NAC_current_dockyard_nb }
				multiply_temp_variable = { temp_dockyard_nb = -1 }
				add_offsite_building = {
					type = dockyard
					level = temp_dockyard_nb
				}

				# Update the array of NAC members
				for_each_scope_loop = {
					array = MER_NAC_members_array

					if = {
						limit = {
							MER_current_scope_under_NAC = yes
						}

						add_to_temp_array = { temp_NAC_member_array = THIS }
					}
				}

				# Get the new number of dockyards
				clear_array = MER_NAC_members_array
				set_temp_variable = { temp_tot_dockyard_nb = 0 }
				for_each_scope_loop = {
					array = temp_NAC_member_array

					MER_NAC_get_steallable_dockyard_f = yes
					add_to_temp_variable = { temp_tot_docyard_nb = temp_dockyard_nb }
					add_to_array = { MER_NAC_members_array = temp_NAC_member }
				}
				add_offsite_building = {
					type = dockyard
					level = temp_tot_dockyard_nb
				}

			}
			if = {
				limit = {
					has_idea = MER_minuscule_hawkish_loyalty_reward
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 5 
				}
			}
			if = {
				limit = {
					has_idea = MER_small_hawkish_loyalty_reward
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 15 
				}
			}
			if = {
				limit = {
					has_idea = MER_moderate_hawkish_loyalty_reward
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 30
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 5
				}
			}
			if = {
				limit = {
					has_idea = MER_big_hawkish_loyalty_reward
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 40
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 10
				}
				add_equipment_to_stockpile = { 
					type = artillery_equipment
					amount = 5
				}
			}
			if = {
				limit = {
					has_idea = MER_super_hawkish_loyalty_reward
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 50
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 15
				}
				add_equipment_to_stockpile = { 
					type = artillery_equipment
					amount = 10
				}
			}
		}
	}

	on_daily_MER = {
		effect = {
			## Semblance
			#MPA
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_meridionalist_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_meridionalist_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_meridionalists = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_geriatrie_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_geriatrie_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_geriatrie = yes
			}
			#PPH
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_expat_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_expat_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_expats = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_philantropes_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_philantropes_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_philantropes = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_yute_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_yute_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_yute = yes
			}
			#KPEy
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_clique_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_clique_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_troupe = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_flock_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_flock_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_flock = yes
			}
			#L'establishment
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_conservatives_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_conservatives_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_conservatives = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_bureaucrats_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_bureaucrats_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_bureaucrats = yes
			}
			if = {
				limit = { 
					check_variable = { 0 < modifier@MER_sod_daily_nonpartisans_pop }
				}	
				set_temp_variable = { i_quantity = modifier@MER_sod_daily_nonpartisans_pop }
				MER_sod_clamp_weekly_drift = yes
				MER_sod_add_popularity_nonpartisans = yes
			}
		}
	}
	
	on_monthly_MER = { 
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_MER"
			

		}
	}
}