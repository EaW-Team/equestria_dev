on_actions = {
	on_monthly_ROA = {
		effect = {
			if = {
				limit = {
					check_variable = { ROOT.recently_integrated_states^num > 0}
				}
				for_each_scope_loop = {
					array = ROOT.recently_integrated_states
					if = {
						limit = {
							check_variable = { months_since_integration > 4 } # 6 months
						}
						if = {
							limit = {
								is_in_array = {
									array = ROOT.eaw_successfully_integrated_states
									value = THIS
								}
							}
							remove_from_array = { ROOT.eaw_successfully_integrated_states = THIS }
						}
						remove_from_array = { ROOT.recently_integrated_states = THIS }
						clear_variable = months_since_integration
					}
					else = {
						add_to_variable = { months_since_integration = 1 }
					}
				}
			}
			resistance_dm_calculations = yes
			if = {
				limit = {
					has_country_flag = uprising_mechanic_active
				}
				add_to_variable = { ROA_on_action_timer_var = 1 }
				if = {
					limit = {
						check_variable = { ROA_on_action_timer_var > 1 }
					}
					if = {
						limit = {
							check_variable = {
								ROA_divs_calibration_var = 10
							}
						}
						add_to_variable = { ROA_probabylity_calibration_var = 1 }
						clamp_variable = {
							var = ROA_probabylity_calibration_var
							max = 10
						}
					}
					if = {
						limit = {
							check_variable = {
								ROA_probabylity_calibration_var = 10
							}
						}
						country_event = {
							id = roam_lansin_uprising.2
						}
					}
					else = {
						lansin_uprising_random_event_dispatcher = yes
					}
					set_variable = { ROA_on_action_timer_var = 0 }
				}
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = ZLU
					}
					FROM = {
						has_country_leader = {
    						character = ROA_kaiser_augustus
    						ruling_only = yes
						}
					}
				}
				FROM = {
					country_event = {
						id = roam_curse.1
						days = 15
						random_days = 5
					}
				}
			}
		}
	}
}
