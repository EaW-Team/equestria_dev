on_actions = {
	# Months counter initialization
	on_startup = {
		effect = {
			set_variable = { global.month = 1 }
		}
	}
	
	# Months counter
	on_monthly = {
		effect = {
			if = {
				limit = {
					NOT = { has_global_flag = on_monthly_done }
				}
				log = "[GetDateText]: global on_monthly"
				set_AI_strategies_on_every_possible_country = yes
				add_to_variable = { global.month = 1 }
				if = {
					limit = {
						check_variable = { global.month > 12 }
					}
					set_variable = { global.month = 1 }
				}
				set_global_flag = { flag = on_monthly_done value = 1 days = 1 }
			}
		}
	}
	
	# ROOT is country, this is ran for every country
	on_monthly = {
		effect = {
			# Disbanding land units, trigger inside
			country_event = { id = utility.14 days = 1 random = 480 }

			build_air_base = yes
			if = {
				limit = {
					has_war = yes
					num_of_civilian_factories_available_for_projects > 29
				}
				country_event = { id = utility.18 days = 9 random = 72 }
				if = {
					limit = {
						num_of_civilian_factories_available_for_projects > 44
					}
					country_event = { id = utility.18 days = 19 random = 72 }
				}
			}

			# ON YEARLY
			if = {
				#don't touch!
				limit = {
					NOT = {
						check_variable = { global.last_year = global.year }
						has_global_flag = on_yearly_done
					}
				}
				#this is done only ONCE per year, even though on_daily fires for every country
				#will also be done on startup
				log = "[GetDateText]: global on_yearly"

				#your code here
				SRS = { country_event = socrep_grif.76 }
				
				#don't touch!
				set_variable = { global.last_year = global.year }
				set_global_flag = { flag = on_yearly_done value = 1 days = 1 }
			}

			if = {
				limit = {
					check_variable = { occupied_countries^num > 0 }
				}
				core_all_occupied_through_compliance = yes
			}
			
			1077 = {
				reset_province_name = 17113
				if = {
					limit = {
						owner = {
							NOT = {
								original_tag = KIS
							}
						}
					}
					set_province_name = {
						id = 17113
						name = KIR_milset_baobab
					}
				}
			}
			1080 = {
				reset_province_name = 17127
				if = {
					limit = {
						owner = {
							NOT = {
								original_tag = KIS
							}
						}
					}
					set_province_name = {
						id = 17127
						name = KIR_milset_iroko
					}
				}
			}
			926 = {
				reset_province_name = 16732
				if = {
					limit = {
						owner = {
							NOT = {
								original_tag = KIS
							}
						}
					}
					set_province_name = {
						id = 16732
						name = KIR_milset_redcedar
					}
				}
			}
		}
	}

	on_monthly_CHN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_CHN"
			if = {
				limit = {
					NOT = { has_global_flag = christmas_truce_fired }
					check_variable = { global.month = 12 }
					event_target:equestria = {
						exists = yes
						has_government = democratic
						has_war_with = CHN
						CHN = { has_government = fascism }
						fascism < 0.1
					}
				}
				event_target:equestria = { country_event = { id = equestria.181 days = 24 random = 48 } }#days to hours applied
			}
		}
	}

	on_weekly_CHN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_CHN"
			if = {
				limit = {
					has_active_mission = CHN_acornage_colonisation_decision
				}
				CHN = {
					save_current_manpower = yes
				}
				136 = {
					add_manpower = -5000
				}
				137 = {
					add_manpower = 1250
				}
				138 = {
					add_manpower = 1250
				}
				172 = {
					add_manpower = 1250
				}
				175 = {
					add_manpower = 1250
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_active_mission = CHN_vanhoover_colonisation_decision
					NOT = { 
						has_country_flag = CHN_vanhoover_colonisation_decision_updated_flag
					}
				}
				CHN = {
					save_current_manpower = yes
				}
				14 = {
					add_manpower = -5000
				}
				45 = {
					add_manpower = 1250
				}
				72 = {
					add_manpower = 1250
				}
				73 = {
					add_manpower = 1250
				}
				172 = {
					add_manpower = 1250
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_active_mission = CHN_vanhoover_colonisation_decision
					has_country_flag = CHN_vanhoover_colonisation_decision_updated_flag
				}
				CHN = {
					save_current_manpower = yes
				}
				14 = {
					add_manpower = -100
				}
				45 = {
					add_manpower = 25
				}
				72 = {
					add_manpower = 25
				}
				73 = {
					add_manpower = 25
				}
				172 = {
					add_manpower = 25
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos3
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 40
					}
					set_compliance = 40
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos2
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 60
					}
					set_compliance = 60
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos1
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 80
					}
					set_compliance = 80
				}
			}
			if = {
				limit = {
					has_completed_focus = CHN_post_war_5
					is_ai = yes
					check_variable = { CHN_amount_of_allowed_battalions < num_battalions }
				}
				set_temp_variable = { disband_fraction = num_battalions }
				subtract_from_temp_variable = { disband_fraction = CHN_amount_of_allowed_battalions }
				divide_temp_variable = { disband_fraction = num_battalions }
				clamp_temp_variable = {
					var = disband_fraction ## I suppose this is to stop CHN from disbanding too much of their army at once?
					min = 0
					max = 0.1
				}
				disband_units_fraction = yes
			}
			if = {
				limit = {
					has_completed_focus = CHN_post_war_5
					check_variable = { CHN_amount_of_allowed_battalions < CHN.num_battalions }
				}
				subtract_from_variable = { CHN_love_variable = CHN_excess_battalions_cost }
			}
		}
	}
	
	on_monthly_EQS = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_EQS"
			if = {
				limit = {
					original_tag = EQS
					has_government = democratic
					any_enemy_country = {
						is_major = yes
					}
					NLR = {
						exists = no
					}
					NOT = {
						has_country_flag = EQS_sunset_shimmer_arrived
					}
				}
				country_event = equestria.188
			}
			if = {
				limit = {
					original_tag = EQS
					has_government = democratic
					has_defensive_war_with = STG
					has_country_flag = EQS_sunset_shimmer_arrived
					NOT = {
						has_country_flag = EQS_starlight_glimmer_arrived
					}
				}
				country_event = equestria.189
			}
		}
	}

	on_monthly_JER = {
		effect = {
			# log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_JER"
			if = {
				limit = {
					has_global_flag = update_JER_parliament_max_fired
					has_completed_focus = JER_the_triumph
				}
				update_JER_parliament_max = yes
			}
		}
	}
	
	on_monthly_WNG = {
		effect = {
			# log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_WNG"
			if = {
				limit = {
					has_war_with = ABY
					ABY = {
						surrender_progress < 0.1
						controls_state = 1201
						controls_state = 1200
					}
				}
				ABY = {
					country_event = wingbardy.601
				}
			}
		}
	}

	on_weekly_MAN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_MAN"
			if = {
				limit = {
					has_country_flag = MAN_continuous_love_distribution_country_flag
				}
				add_political_power = var:MAN_continuous_love_distribution_pp_var
				add_stability = var:MAN_continuous_love_distribution_stab_var
				set_temp_variable = { MAN_continuous_love_distribution_pp_var_TEMP = MAN_lovetax_variable }
				multiply_temp_variable = { MAN_continuous_love_distribution_pp_var_TEMP = 20 }
				set_variable = { MAN_continuous_love_distribution_pp_var = MAN_continuous_love_distribution_pp_var_TEMP }
				round_variable = MAN_continuous_love_distribution_pp_var
				set_temp_variable = { MAN_continuous_love_distribution_stab_var_TEMP = MAN_lovetax_variable }
				divide_temp_variable = { MAN_continuous_love_distribution_stab_var_TEMP = 200 }
				set_variable = { MAN_continuous_love_distribution_stab_var = MAN_continuous_love_distribution_stab_var_TEMP }
			}
			if = {
				limit = {
					has_country_flag = MAN_continuous_love_tax_sucking_country_flag
				}
				add_to_variable = { var = MAN_lovetax_variable value = 0.50}
				add_to_variable = { MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable = 1 }
				add_to_variable = { var = MAN_lovetax_variable value = MAN_continuous_love_tax_sucking_bonus_variable }
				### calculations for the next weekly love harvest ###
				clear_variable = MAN_continuous_love_tax_sucking_bonus_variable
				clear_variable = MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable
				set_variable = { MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable = num_of_available_civilian_factories }
				set_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable }
				multiply_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = 0.015 }
				set_temp_variable = { MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable_TEMP = MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable } ## base value should always be one (1) ##
				multiply_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable_TEMP }
				set_variable = { MAN_continuous_love_tax_sucking_bonus_variable = MAN_continuous_love_tax_sucking_bonus_variable_TEMP }
			}
			if = {
				limit = {
					has_idea = MAN_internal_migration
				}
				save_current_manpower = yes
				every_owned_state = {
					limit = { has_state_category = megalopolis }
					add_manpower = 2500
				}
				every_owned_state = {
					limit = { has_state_category = metropolis }
					add_manpower = 2000
				}
				every_owned_state = {
					limit = { has_state_category = large_city }
					add_manpower = 1500
				}
				every_owned_state = {
					limit = { has_state_category = city }
					add_manpower = 1000
				}
				restore_previous_manpower = yes
			}
		}
	}

	on_weekly_ELF = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_ELF"
			if = {
				limit = {
					has_country_flag = ELF_bits_gun_weekly_shipments
					has_idea = ELF_bits_gun_idea
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 200
					producer = ELF
				}
			}
		}
	}
	on_weekly_CTH = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_CTH"
			if = {
				limit = {
					has_country_flag = CTH_colthage_zarcaid
					has_war_with = CTC
					surrender_progress > 0.49
				}
				CTC = {
					country_event = colthage_civil_war.10
				}
			}
			if = {
				limit = {
					has_country_flag = CTH_MZN_CW_guns
					has_idea = CTH_MZO_zur_improvised_weapons
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 50
					producer = CTH
				}
			}
		}
	}
	on_weekly_BAT = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_BAT"
			if = {
				limit = {
					has_country_flag = BAT_ZAR_limited_war
					has_war_with = ZAR
					ZAR = {
						surrender_progress > 0.39
					}
				}
				clr_country_flag = BAT_ZAR_limited_war
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = ZAR
				set_truce = { target = ZAR days = 365 }
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						has_war_with = ZAR
					}
					set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
					white_peace = ZAR
					set_truce = { target = ZAR days = 365 }
				}
				transfer_state = 730
				if = {
					limit = {
						ZAR = {
							owns_state = 729
						}
					}
					transfer_state = 729
				}
				if = {
					limit = {
						ZAR = {
							owns_state = 745
						}
					}
					transfer_state = 745
				}
				if = {
					limit = {
						ZAR = {
							owns_state = 728
						}
					}
					transfer_state = 728
				}
				if = {
					limit = {
						ZAR = {
							owns_state = 1205
						}
					}
					transfer_state = 1205
				}
				if = {
					limit = {
						ZAR = {
							owns_state = 692
						}
					}
					transfer_state = 692
				}
			}
			if = {
				limit = {
					has_country_flag = BAT_MGY_limited_war
					has_war_with = MGY
					MGY = {
						surrender_progress > 0.69
					}
				}
				clr_country_flag = BAT_MGY_limited_war
				set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
				white_peace = MGY
				set_truce = { target = MGY days = 365 }
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						has_war_with = MGY
					}
					set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
					white_peace = MGY
					set_truce = { target = MGY days = 365 }
				}
				transfer_state = 731
				transfer_state = 733
				transfer_state = 734
				transfer_state = 737
				if = {
					limit = {
						MGY = {
							owns_state = 738
						}
					}
					transfer_state = 738
				}
				if = {
					limit = {
						ABY = {
							owns_state = 741
						}
						MGY = {
							owns_state = 740
						}
					}
					ABY = {
						transfer_state = 740
					}
				}
			}
		}
	}
	on_monthly_CVA = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_CVA"
			if = {
				limit = {
					has_country_flag = CVA_CTH_2_patricians_integrated
					has_completed_focus = CVA_CTH_2_d23
					has_completed_focus = CVA_CTH_2_e11
					has_completed_focus = CVA_CTH_2_g10
					has_completed_focus = CVA_CTH_2_h22
					has_completed_focus = CVA_CTH_2_i1
				}
				country_event = colthaginian_federation_2.61
			}
		}
	}
	on_weekly_CVA = {
	    effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_CVA"
			if = {
				limit = {
					has_country_flag = CVA_crisis_of_authority_flag
				}
				log = "[GetDateText]: ROOT: [Root.GetName] CVA_crisis_of_authority_flag"
				if = {
					limit = {
						has_idea = CVA_CTH_collapsed_authority
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 1.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 1.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 1.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 1.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 1.25
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 1.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 1.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 1.25
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_collapsed_authority_2
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 1.00
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 1.00
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 1.00
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 1.00
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 1.00
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 1.00
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 1.00
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 1.00
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_collapsed_authority_3
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.75
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.75 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.75 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.75 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.75
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.75 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.75
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.75
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_collapsed_authority_4
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.50
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.50
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.50
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.50
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.50
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.50
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.50
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.50
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_redefining_the_plan_idea
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.25
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_anti_intellectual_proscriptions
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.25
					}
				}
				if = {
					limit = {
					    OR = {
							has_idea = CVA_CTH_corrective_labour_idea
							has_idea = CVA_CTH_corrective_labour_idea_2
						}
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.25
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_streamlined_judicial_process
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.25
					}
				}
				if = {
					limit = {
						has_country_flag = CVA_CTH_alcoholism
					}
					if = {
						limit = {
							has_country_flag = CVA_coltva_fed_up
						}
						subtract_from_variable = { #Coltva
							var = CVA_CO_Authority 
							value = 0.25 
						}
					}
					subtract_from_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.25 
					}
					subtract_from_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.25 
					}
					if = {
					    limit = {
							NOT = {
							    has_completed_focus = CVA_CTH_c2
							}
						}
						subtract_from_variable = { #Zur-Zamitha
							var = CVA_ZZ_Authority 
							value = 0.25
						}
					}
					subtract_from_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.25
					}
				}
				if = {
					limit = {
					    OR = {
							has_idea = CVA_CTH_industrial_reconstruction_idea
							has_idea = CVA_CTH_industrial_reconstruction_idea_2
						}
					}
					add_to_variable = { #Coltva
						var = CVA_CO_Authority 
						value = 0.30 
					}
					add_to_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.30 
					}
					add_to_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.30 
					}
					add_to_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zur-Zamitha
						var = CVA_ZZ_Authority 
						value = 0.30
					}
					add_to_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.30
					}
				}
				if = {
					limit = {
					    OR = {
							has_idea = CVA_CTH_restructure_academia_idea
							has_idea = CVA_CTH_restructure_academia_idea_2
						}
					}
					add_to_variable = { #Coltva
						var = CVA_CO_Authority 
						value = 0.30 
					}
					add_to_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.30 
					}
					add_to_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.30 
					}
					add_to_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zur-Zamitha
						var = CVA_ZZ_Authority 
						value = 0.30
					}
					add_to_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.30
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_building_navy
					}
					add_to_variable = { #Coltva
						var = CVA_CO_Authority 
						value = 0.30 
					}
					add_to_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.30 
					}
					add_to_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.30 
					}
					add_to_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zur-Zamitha
						var = CVA_ZZ_Authority 
						value = 0.30
					}
					add_to_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.30
					}
				}
				if = {
					limit = {
						has_idea = CVA_CTH_national_pacification_campaign
					}
					add_to_variable = { #Coltva
						var = CVA_CO_Authority 
						value = 0.30 
					}
					add_to_variable = { #Trotkart-Zeordu
						var = CVA_TZ_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zebinop-Amanesya
						var = CVA_ZA_Authority 
						value = 0.30 
					}
					add_to_variable = { #Colthage
						var = CVA_CH_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zalihli-Sophoovene
						var = CVA_ZS_Authority 
						value = 0.30 
					}
					add_to_variable = { #Sivmareas-Karamane
						var = CVA_SK_Authority 
						value = 0.30 
					}
					add_to_variable = { #Zur-Zamitha
						var = CVA_ZZ_Authority 
						value = 0.30
					}
					add_to_variable = { #Hippone
						var = CVA_HI_Authority 
						value = 0.30
					}
				}
				clamp_variable = {
					var = CVA_CO_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_TZ_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_ZA_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_CH_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_ZS_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_SK_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_ZZ_Authority
					min = 0
					max = 100
				}
				clamp_variable = {
					var = CVA_HI_Authority
					min = 0
					max = 100
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_CO_Authority < 20 
						}
						1093 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						1094 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						1095 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					1093 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					1094 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					1095 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_TZ_Authority < 20 
						}
						705 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						706 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					705 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					706 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_ZA_Authority < 20 
						}
						703 = {
							NOT = {
							    OR = {
			    					has_state_flag = CVA_state_in_anarchy
									has_state_flag = CVA_special_circumstances
								}
							}
						}
						704 = {
							NOT = {
							    OR = {
			    					has_state_flag = CVA_state_in_anarchy
									has_state_flag = CVA_special_circumstances
								}
							}
						}
					}
					703 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					704 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_CH_Authority < 20 
						}
						875 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					875 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_ZS_Authority < 20 
						}
						702 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						876 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					702 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					876 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_SK_Authority < 20 
						}
						700 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						709 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					700 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					709 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_ZZ_Authority < 20 
						}
						701 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
						852 = {
							NOT = {
			    				has_state_flag = CVA_state_in_anarchy
							}
						}
					}
					701 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					852 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				if = {
				    limit = {
					    check_variable = {
							CVA_HI_Authority < 20 
						}
						699 = {
							NOT = {
							    OR = {
			    					has_state_flag = CVA_state_in_anarchy
									has_state_flag = CVA_special_circumstances
								}
							}
						}
						877 = {
							NOT = {
							    OR = {
			    					has_state_flag = CVA_state_in_anarchy
									has_state_flag = CVA_special_circumstances
								}
							}
						}
					}
					699 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					877 = {
		    			set_demilitarized_zone = yes
						set_state_flag = CVA_state_in_anarchy
					}
					add_to_variable = {
			            var = CVA_collapsed_states 
				        value = 1 
			        }
				}
				clamp_variable = {
					var = CVA_collapsed_states
					min = 0
					max = 8
				}
				if = {
				    limit = {
					    check_variable = {
							var = CVA_collapsed_states
							value = 4
							compare = greater_than_or_equals
						}
					}
					country_event = {
						id = colthaginian_federation.50
					}
				}
			}
			if = {
				limit = {
					has_country_flag = CVA_zapatista_factions_flag
				}
				set_temp_variable = { t_change = modifier@CVA_CTH_Weekly_Evolutionary_Influence }
				set_temp_variable = { t_index = 0 }
				CVA_Change_Zapatistas_Influence = yes
				
				set_temp_variable = { t_change = modifier@CVA_CTH_Weekly_Orthodox_Influence }
				set_temp_variable = { t_index = 1 }
				CVA_Change_Zapatistas_Influence = yes
				
				set_temp_variable = { t_change = modifier@CVA_CTH_Weekly_Pragmatist_Influence }
				set_temp_variable = { t_index = 2 }
				CVA_Change_Zapatistas_Influence = yes
			}
        }
    }
	on_weekly_HIP = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_HIP"
			if = {
				limit = {
					has_completed_focus = HIP_power_of_the_sun
				}
				every_owned_state = {
					limit = {
						check_variable = { building_level@nuclear_reactor > 0 }						
					}
					if = {
						limit = {
							NOT = { has_dynamic_modifier = { modifier = HIP_reactor_modifier } }
						}
						add_dynamic_modifier = { modifier = HIP_reactor_modifier }	
					}
				}			  
			}

			if = {
				limit = {
					NOT = { has_country_flag = HIP_underwater_conscription_weekly_disabled }
				}
				HIP_underwater_conscription_weekly = yes
			}
		}
	}
	on_weekly_TRO = {
		effect = {
			if = {
				limit = {
					has_country_flag = TRO_CTH_great_game_unlocked
				}
				TRO_CTH_evaluate_sphere_great_game_points = yes
			}
		}
	}
	on_weekly_EQS = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_EQS"
			if = {
				limit = {
					has_country_flag = EQS_HIP_elements_sent
					has_war = yes
				}
				clr_country_flag = EQS_HIP_elements_sent
				country_event = hippogriff_abyss_resistance.19
			}
		}
	}
	on_monthly_CTL = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_CTL"
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_all_the_riches_of_riaportu
					has_completed_focus = CTL_wage_thralldom
					has_completed_focus = CTL_obedience_above_all
					has_country_flag = CTL_MAR_chose_candidate
					NOT = { has_country_flag = CTL_jakob_dead }
				}
				set_country_flag = CTL_jakob_dead
				country_event = chital.197
			}
			
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_let_wake_the_soul_of_zebrica
					NOT = { has_country_flag = CTL_ivar_ending }
				}
				set_country_flag = CTL_ivar_ending
				country_event = chital.200
			}
			
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_a_symphony_to_break_the_silence
					OR = { 
					has_completed_focus = CTL_the_kungliga_riksdagen
					has_completed_focus = CTL_the_yaril_and_his_mayors
					}
					NOT = { has_country_flag = CTL_benjen_ending }
				}
				set_country_flag = CTL_benjen_ending
				country_event = chital.204
			}
			
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_the_moscada_affair
					has_completed_focus = CTL_appeal_to_the_spectre
					NOT = { has_country_flag = CTL_eva_ending }
				}
				set_country_flag = CTL_eva_ending
				country_event = chital.203
			}
			
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_war_with_kiria
					has_completed_focus = CTL_a_sword_in_every_hand
					NOT = { has_country_flag = CTL_bhushan_ending }
				}
				set_country_flag = CTL_bhushan_ending
				country_event = chital.202
			}
			
			if = {
				limit = {
					has_war = no
					has_completed_focus = CTL_when_in_roam
					OR = { 
					has_completed_focus = CTL_the_surveillance_state
					has_completed_focus = CTL_the_hundred_year_yarildom
					has_completed_focus = CTL_the_new_democracy
					}
					NOT = { has_country_flag = CTL_hira_ending }
				}
				set_country_flag = CTL_hira_ending
				country_event = chital.201
			}
		}
	}
	
	on_monthly_BAR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_BAR"
			if = {
				limit = {
					original_tag = BAR
				}
				if = {
					limit = { 
						country_exists = BAR
						BAR = {
							has_country_flag = { flag = barrad_endgame value = 0 }
							has_country_flag = barrad_silver_star_alive
							OR = {
								AND = {
									has_country_flag = barrad_asinti_alive
									check_variable = { BAR_relations_asinti_silver < 70 }
								}
								AND = {
									has_country_flag = barrad_leopold_alive
									check_variable = { BAR_relations_silver_leopold < 70 }
								}
								AND = {
									has_country_flag = barrad_viira_alive
									check_variable = { BAR_relations_silver_viira < 70 }
								}
							}
						}
					}
					BAR = {
						if = {
							limit = {
								has_country_flag = BAR_silver_sad
							}
							country_event = { days = 1 random_days = 14 id = barrad_silver_star.11 }
						}
						else = {
							country_event = { days = 1 random_days = 14 id = barrad_silver_star.1 }
						}
					}
				}
				if = {
					limit = {
						country_exists = BAR
						BAR = {
							OR = {
								has_variable = BAR_viira_pup
								has_variable = BAR_viira_control
							}	
							check_variable = { viira_mana_overload > 9 }
						}
					}
					BAR = {
						subtract_from_variable = { viira_mana_overload = 10 }
					}
					
				}
				if = {
					limit = {
						has_country_flag = { flag = barrad_endgame value = 0 }
						OR = {
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_silver_star_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_viira_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_viira_alive
								has_country_flag = barrad_silver_star_alive
							}
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_viira_alive
							}
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_silver_star_alive
							}
						}
					}
					random_list = {
						30 = {
							if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive	
								}
								random_list = {
									16 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									16 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
							}
						}
						70 = {

						}
					}
				}
				if = {
					limit = {
						BAR = {
							has_war = yes
							has_country_flag = BAR_asinti_ded_count
						}
					}
					BAR = {
						divide_variable = { BAR_asinti_blood_resource = 2 }
						round_variable = BAR_asinti_blood_resource
						set_variable = { inflicted_casualties_last_month = inflicted_casualties }
						count_inflicted_casualties_on_current_enemies = yes
						subtract_from_variable = { inflicted_casualties_last_month = inflicted_casualties }
						multiply_variable = { inflicted_casualties_last_month = -1 }
						if = {
							limit = {
								check_variable = { BAR_asinti_blood_resource < 2100000 }
							}
							add_to_variable = { BAR_asinti_blood_resource = inflicted_casualties_last_month }
						}
						else = {
							set_variable = { BAR_asinti_blood_resource = 2100000 }
						}
					}	
				}
			}	
		}
	}

	on_monthly_KIR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_KIR"
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_bipartite_war_started_flag
						has_completed_focus = KIR_focus_10b
					}
					check_variable = { KIR_pirate_raid_events_var < 7 }
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.1
							has_stability < 0.5
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 0 }
							}
							country_event = { id = kirin_pirate.1 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 1 }
							}
							country_event = { id = kirin_pirate.2 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 2 }
							}
							country_event = { id = kirin_pirate.3 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 3 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.4 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 4 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.5 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 5 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.6 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 6 }
							}
							country_event = { id = kirin_pirate.7 days = 1 random_days = 14 }
						}
						add_to_variable = { KIR_pirate_raid_events_var = 1 }
					}
					6 = {
						modifier = {
							factor = 1.1
							has_stability > 0.5
						}
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_1_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					count_triggers = {
						amount = 2
						has_completed_focus = KIR_focus_8a
						has_completed_focus = KIR_focus_8g
						has_completed_focus = KIR_focus_10a
						has_completed_focus = KIR_focus_11a
					}
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_1_flag
						country_event = { id = kirin_crisis.1 days = 7 random_days = 30 }
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
					}
					5 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_2_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						## is exempted from the monthly crisis quota
					}
					OR = { ##between the months of june and september
						AND = {
							date > 1007.06.01
							date < 1007.10.01
						}
						AND = {
							date > 1008.06.01
							date < 1008.10.01
						}
						AND = {
							date > 1009.06.01
							date < 1009.10.01
						}
						AND = {
							date > 1010.06.01
							date < 1010.10.01
						}
						AND = {
							date > 1011.06.01
							date < 1011.10.01
						}
						AND = {
							date > 1012.06.01
							date < 1012.10.01
						}
						AND = {
							date > 1013.06.01
							date < 1013.10.01
						}
						AND = {
							date > 1014.06.01
							date < 1014.10.01
						}
						AND = {
							date > 1015.06.01
							date < 1015.10.01
						}
						AND = {
							date > 1016.06.01
							date < 1016.10.01
						}
						AND = {
							date > 1017.06.01
							date < 1017.10.01
						}
						AND = {
							date > 1018.06.01
							date < 1018.10.01
						}
						AND = {
							date > 1019.06.01
							date < 1019.10.01
						}
						AND = {
							date > 1020.06.01
							date < 1020.10.01
						}
					}
				}
				random_list = {
					1 = {
						country_event = { id = kirin_crisis.3 days = 1 random_days = 14 }
					}
					5 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_3_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					OR = {
						has_country_flag = KIR_focus_6a_risky_choice_flag
						has_country_flag = KIR_focus_6a_inaction_choice_flag
					}
					has_completed_focus = KIR_focus_6a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						if = {
							limit = { has_country_flag = KIR_focus_6a_risky_choice_flag }
							country_event = { id = kirin_crisis.6 days = 7 random_days = 30 }
						}
						else_if = {
							limit = { has_country_flag = KIR_focus_6a_inaction_choice_flag }
							country_event = { id = kirin_crisis.7 days = 7 random_days = 30 }
						}
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_4_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5h
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						country_event = { id = kirin_crisis.8 days = 7 random_days = 30 }
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_7_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5h
					has_completed_focus = KIR_focus_6a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						set_country_flag = KIR_crisis_7_flag
						country_event = { id = kirin_crisis.10 days = 30 random_days = 180 }
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_15_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3b
					has_completed_focus = KIR_focus_5a
					has_completed_focus = KIR_focus_7a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_15_flag
						country_event = { id = kirin_crisis.15 days = 14 random_days = 14 }
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_16_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_6b
					has_completed_focus = KIR_focus_6h
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_16_flag
						country_event = { id = kirin_crisis.16 days = 14 random_days = 14 }
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_17_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_4b
					has_completed_focus = KIR_focus_5c
					has_completed_focus = KIR_focus_6b
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_17_flag
						country_event = { id = kirin_crisis.17 days = 14 random_days = 14 }
					}
					4 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_18_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_8f
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_18_flag
						country_event = { id = kirin_crisis.18 days = 14 random_days = 14 }
					}
					3 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_19_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5f
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_19_flag
						country_event = { id = kirin_crisis.19 days = 14 random_days = 14 }
					}
					3 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_20_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
					OR = {
						has_completed_focus = KIR_focus_8g
						has_completed_focus = KIR_focus_9b
					}
					OR = {
						has_completed_focus = KIR_focus_4a
						has_completed_focus = KIR_focus_5c
					}
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_20_flag
						country_event = { id = kirin_crisis.20 days = 14 random_days = 14 }
					}
					3 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_21_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_21_flag
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						country_event = { id = kirin_crisis.21 days = 14 random_days = 14 }
					}
					3 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_22_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3c
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
					has_country_flag = KIR_crisis_21_flag
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_22_flag
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						country_event = { id = kirin_crisis.22 days = 14 random_days = 14 }
					}
					3 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_great_leap_begun
					NOT = {
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_great_leap_timer_countdown
						has_country_flag = KIR_great_leap_over
					}
				}
				set_country_flag = KIR_great_leap_over
				country_event = { id = kirin.30 }
			}
			if = {
				limit = {
					has_war_with = KIC
					has_country_flag = KIR_bipartite_war_started_flag
					has_country_flag = KIR_EVENT_400_FLAG_TIMER
					1076 = {
						is_controlled_by = KIR
						any_neighbor_state = {
							is_controlled_by = KIC
						}
					}
				}
				random_character = {
					limit = {
						is_army_leader = yes
						NOT = {
							is_character = KIR_firethorn
							is_character = KIR_bright_burn
						}
					}
					unit_leader_event = { id = kirin_loyalists.400 random_days = 30 }
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_EMBASSY_DECISION_unlocked
				}
				clear_array = KIR.KIR_EMBASSY_ARRAY
				for_each_scope_loop = {
					array = global.states
					if = {
						limit = {
							is_capital = yes
							owner = {
								has_full_control_of_state = PREV
								NOT = {
									has_war_with = KIR
									has_opinion_modifier = KIR_incandescent_embassy
								}
								has_opinion = { target = KIR value > 0 }
							}
						}
						add_to_array = {
							array = KIR.KIR_EMBASSY_ARRAY
							value = THIS
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = KIR_news_event_27_fired
					}
					controls_state = 1063
					divisions_in_state = {
						size > 0
						state = 1063
					}
					any_enemy_country = {
						divisions_in_state = {
							size > 0
							state = 1063
						}
					}
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
						set_global_flag = KIR_news_event_27_fired
						news_event = { id =  kirin_news.27 days = 3 }
					}
					9 = {
					}
				}
			}
		}
	}

	on_weekly_KIR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_KIR"
			if = {
				limit = {
					has_idea = KIR_modernisation_exclamation_mark2
				}
				every_controlled_state = {
					limit = {
						is_coastal = yes
					}
					add_manpower = 300
				}
			}
			if = {
				limit = {
					has_completed_focus = KIR_focus_8e
					check_variable = { KIR_focus_8e_event_tries_var < 4 } ##4 weeks where it might trigger
				}
				add_to_variable = { KIR_focus_8e_event_tries_var = 1 }
				random_list = {
					1 = {
						modifier = {
							factor = 1.5
							has_stability < 0.3
						}
						country_event = { id = kirin.15 days = 1 random_days = 14 }
						add_to_variable = { KIR_focus_8e_event_tries_var = 10 }
					}
					1 = {
						modifier = {
							factor = 1.5
							has_stability > 0.5
						}
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { KIR.num_battalions_with_type@bar_weak_clockwerk > 45 }
				}
				subtract_from_variable = { var = clockworks_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIR_clockworks_over_limit }
			}
			if = {
				limit = {
					check_variable = { KIR.num_battalions_with_type@bar_weak_clockwerk < 46 }
				}
				set_variable = { var = clockworks_debuff_var value = 0 }
			}
			if = {
				limit = {
					check_variable = {
						var = KIR_power_struggle_WF_var
						value = 60
						compare = greater_than_or_equals
					}
				}
				add_ideas = KIR_power_struggle_WF_60_hidden_buffs
			}
			if = {
				limit = {
					check_variable = {
						var = KIR_power_struggle_WF_var
						value = 75
						compare = greater_than_or_equals
					}
				}
				add_ideas = KIR_power_struggle_WF_75_hidden_buffs
				country_event = { id = kirin_loyalists.19 hours = 1 }
				set_country_flag = KIR_PS_WF_75_event_fired_flag
			}
			if = {
				limit = {
					check_variable = {
						var = KIR_power_struggle_RS_var
						value = 60
						compare = greater_than_or_equals
					}
				}
				add_ideas = KIR_power_struggle_RS_60_hidden_buffs
			}
			if = {
				limit = {
					check_variable = {
						var = KIR_power_struggle_RS_var
						value = 75
						compare = greater_than_or_equals
					}
				}
				add_ideas = KIR_power_struggle_RS_75_hidden_buffs
				country_event = { id = kirin_loyalists.20 hours = 1 }
				set_country_flag = KIR_PS_RS_75_event_fired_flag
			}
			if = {
				limit = {
					has_country_flag = KIR_civil_war_PS_RS_win_flag
					check_variable = { party_popularity@communism < 0.30 }
				}
				set_political_party = {
					ideology = communism
					popularity = 30
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_civil_war_PS_WF_win_flag
					check_variable = { party_popularity@neutrality < 0.30 }
				}
				set_political_party = {
					ideology = neutrality
					popularity = 30
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_civil_war_PS_compromise_flag
					check_variable = { party_popularity@communism < 0.25 }
				}
				set_political_party = {
					ideology = communism
					popularity = 25
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_civil_war_PS_compromise_flag
					check_variable = { party_popularity@neutrality < 0.25 }
				}
				set_political_party = {
					ideology = neutrality
					popularity = 25
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_power_struggle_ongoing_flag
					NOT = {
						OR = {
							has_completed_focus = KIR_civil_war_focus_7e
							has_completed_focus = KIR_civil_war_focus_7x
						}
					}
					check_variable = { KIR.KIR_power_struggle_RS_var < 15 }
					NOT = {
						has_active_mission = KIR_power_struggle_death_spiral_RS_mission
					}
				}
				activate_mission = KIR_power_struggle_death_spiral_RS_mission
			}
			if = {
				limit = {
					has_country_flag = KIR_power_struggle_ongoing_flag
					NOT = {
						OR = {
							has_completed_focus = KIR_civil_war_focus_7e
							has_completed_focus = KIR_civil_war_focus_7x
						}
					}
					check_variable = { KIR.KIR_power_struggle_WF_var < 15 }
					NOT = {
						has_active_mission = KIR_power_struggle_death_spiral_WF_mission
					}
				}
				activate_mission = KIR_power_struggle_death_spiral_WF_mission
			}
			KIR_get_factory_ratio = yes
			if = {
				limit = {
					has_country_flag = KIR_POST_1B_flag
					check_variable = { party_popularity@democratic < 0.15 }
				}
				set_political_party = {
					ideology = democratic
					popularity = 15
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_POST_1B_flag
					check_variable = { party_popularity@neutrality < 0.15 }
				}
				set_political_party = {
					ideology = neutrality
					popularity = 15
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_POST_1B_flag
					check_variable = { party_popularity@communism < 0.15 }
				}
				set_political_party = {
					ideology = communism
					popularity = 15
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_POST_1B_flag
					check_variable = { party_popularity@fascism < 0.15 }
				}
				set_political_party = {
					ideology = fascism
					popularity = 15
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_POST_6A_flag
					check_variable = { party_popularity@democratic < 0.25 }
				}
				set_political_party = {
					ideology = democratic
					popularity = 25
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_guardian_of_zebrica_flag
				}
				clear_array = KIR.enemies_of_harmony
				for_each_scope_loop = {
					array = global.countries
					if = {
						limit = {
							exists = yes
							capital_scope = { is_on_continent = africa }
							NOT = {
								original_tag = KIR
								is_ally_with = KIR
								has_war_with = KIR
								has_government = democratic
							}
							count_triggers = {
								amount = 3 ## KIR.KIR_demand_disarmament_threshold
								has_added_tension_amount > 4
								strength_ratio = { tag = KIR ratio > 1 }
								OR = {
									num_occupied_states > 4
									set_temp_variable = { num_non_core_states = num_controlled_states }
									subtract_from_temp_variable = { num_non_core_states = num_core_states }
									check_variable = { num_non_core_states > 4 }
								}
								OR = {
									num_occupied_states > num_core_states
									set_temp_variable = { num_non_core_states = num_controlled_states }
									subtract_from_temp_variable = { num_non_core_states = num_core_states }
									check_variable = { num_non_core_states > num_core_states }
								}
								any_other_country = {
									PREV = {
										has_wargoal_against = PREV
									}
								}
								any_other_country = {
									PREV = {
										is_justifying_wargoal_against = PREV
									}
								}
								any_other_country = {
									OR = {
										occupation_law = forced_labor_occupation
										occupation_law = harsh_quotas_occupation
										occupation_law = brutally_oppressive_occupation
										#occupation_law = barrack_manipulation_occupation
										occupation_law = BAT_slave_state
									}
								}
								is_in_array = { KIR.potential_and_current_enemies = THIS }
								is_in_array = { KIR.enemies_of_allies = THIS }
							}
						}
						add_to_array = {
							array = KIR.enemies_of_harmony
							value = THIS
						}
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_STATE_SGUI_ENABLED
				}
				country_event = { id = kirin.200 hours = 8 }
			}
			if = {
				limit = {
					has_country_flag = KIR_FS_WAR_Flag
				}
				clear_variable = KDWLM3A_var
				clear_variable = KDWLM3B_var
				clear_variable = KDWLM3C_var
				clear_variable = KDWLM3D_var
				clear_variable = KDWLM3E_var
				clear_variable = KDWLM3F_var
				clear_variable = KDWLM_OWSF
				clear_variable = KDWLM_PPF
				clear_variable = KDWLM_AAM
				if = {
					limit = {
						set_temp_variable = { KDWL_MT_tempvar = KIR.KDWLM1_var }
						add_to_temp_variable = { KDWL_MT_tempvar = 55 }
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KDWL_MT_tempvar]"
						}
					}
					set_variable = { KDWLM3F_var = -0.15 } ## IS
					set_variable = { KDWLM_OWSF = -0.15 } ## OWSF
					set_variable = { KDWLM_PPF = -0.75 } ## PPF
					set_variable = { KDWLM_AAM = -0.2 } ## AAM
				}
				else_if = {
					limit = {
						set_temp_variable = { KDWL_MT_tempvar = KIR.KDWLM1_var }
						add_to_temp_variable = { KDWL_MT_tempvar = 45 }
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KDWL_MT_tempvar]"
						}
					}
					set_variable = { KDWLM3E_var = -0.1 } ## IS
					set_variable = { KDWLM_OWSF = -0.1 } ## OWSF
					set_variable = { KDWLM_PPF = -0.5 } ## PPF
					set_variable = { KDWLM_AAM = -0.15 } ## AAM
				}
				else_if = {
					limit = {
						set_temp_variable = { KDWL_MT_tempvar = KIR.KDWLM1_var }
						add_to_temp_variable = { KDWL_MT_tempvar = 35 }
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KDWL_MT_tempvar]"
						}
					}
					set_variable = { KDWLM3D_var = -0.1 } ## IS
					set_variable = { KDWLM_OWSF = -0.1 } ## OWSF
					set_variable = { KDWLM_PPF = -0.25 } ## PPF
					set_variable = { KDWLM_AAM = -0.15 } ## AAM
				}
				else_if = {
					limit = {
						set_temp_variable = { KDWL_MT_tempvar = KIR.KDWLM1_var }
						add_to_temp_variable = { KDWL_MT_tempvar = 25 }
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KDWL_MT_tempvar]"
						}
					}
					set_variable = { KDWLM3C_var = -0.05 } ## IS
					set_variable = { KDWLM_OWSF = -0.1 } ## OWSF
					set_variable = { KDWLM_PPF = -0.2 } ## PPF
					set_variable = { KDWLM_AAM = -0.1 } ## AAM
				}
				else_if = {
					limit = {
						set_temp_variable = { KDWL_MT_tempvar = KIR.KDWLM1_var }
						add_to_temp_variable = { KDWL_MT_tempvar = 15 }
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KDWL_MT_tempvar]"
						}
					}
					set_variable = { KDWLM3B_var = -0.05 } ## IS
					set_variable = { KDWLM_OWSF = -0.05 } ## OWSF
					set_variable = { KDWLM_PPF = -0.15 } ## PPF
					set_variable = { KDWLM_AAM = -0.05 } ## AAM
				}
				else_if = {
					limit = {
						meta_trigger = {
							text = {
								num_battalions_in_states = {
									count > [KDWL_MT_var]
									states = { 1139 1141 1142 1144 1145 1192 }
									exclude = { irregular_infantry }
								}
							}
							KDWL_MT_var = "[?KIR.KDWLM1_var]"
						}
					}
					set_variable = { KDWLM3A_var = -0.02 } ## IS
					set_variable = { KDWLM_OWSF = -0.02 } ## OWSF
					set_variable = { KDWLM_PPF = -0.1 } ## PPF
					set_variable = { KDWLM_AAM = -0.05 } ## AAM
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_Balance_of_the_Realm_Enabled
				}
				KIR_Get_Balance_of_the_Realm = yes
				KIR_POST_BOU_3A_Get_Ref_Support = yes
			}
		}
	}

	on_weekly_KIS = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_KIS"
			if = {
				limit = {
					has_country_flag = KIS_unlocked_treasury
				}
				############################
				## Predict Monthly Income ##
				############################
				set_variable = { var = KISTreasuryIncomeFC value = KIS.num_of_civilian_factories }
				multiply_variable = { var = KISTreasuryIncomeFC value = KISTreasuryIncomePerFC }
				set_variable = { var = KISTreasuryIncomeFM value = KIS.num_of_military_factories }
				multiply_variable = { var = KISTreasuryIncomeFM value = KISTreasuryIncomePerFM }
				set_variable = { var = KISTreasuryIncomeFD value = KIS.num_of_naval_factories }
				multiply_variable = { var = KISTreasuryIncomeFD value = KISTreasuryIncomePerFD }
				set_variable = { var = TreasuryIncomePredicted value = 0 }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFC }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFM }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFD }
				if = {
					limit = {
						has_country_flag = KIR_state_land_tax_flag
					}
					set_variable = { var = TreasuryIncomeLandTax value = KIS.num_owned_controlled_states }
					multiply_variable = { var = TreasuryIncomeLandTax value = 200 }
					add_to_variable = { var = TreasuryIncomePredicted value = TreasuryIncomeLandTax }
				}
				if = {
					limit = {
						has_country_flag = KIR_corporate_tithes_flag
					}
					set_variable = { var = TreasuryIncomeTithe value = KIS.KIS_corporate_vassals_var }
					multiply_variable = { var = TreasuryIncomeTithe value = 250 }
					add_to_variable = { var = TreasuryIncomePredicted value = TreasuryIncomeTithe }
				}
				if = {
					limit = {
						has_country_flag = KIR_unlocked_tourism_flag
					}
					clear_variable = KIS_tourist_destinations_var
					clear_variable = KIS_tourist_destinations_income_var
					if = {
						limit = {
							909 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							924 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1054 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1097 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1132 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1135 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1139 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					if = {
						limit = {
							1158 = {
								has_state_flag = KIS_tourist_spot_flag
								owner = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
								controller = {
									OR = {
										original_tag = KIS
										is_subject_of = KIS
									}
								}
							}
						}
						add_to_variable = { var = KIS_tourist_destinations_var value = 1 }
					}
					set_variable = { var = KIS_tourist_destinations_income_var value = KIS_tourist_destinations_var }
					multiply_variable = { var = KIS_tourist_destinations_income_var value = 150 }
					add_to_variable = { var = TreasuryIncomePredicted value = KIS_tourist_destinations_income_var }
				}
				if = {
					limit = {
						AUB = {
							exists = yes
							has_full_control_of_state = 833
							has_full_control_of_state = 1065
						}
					}
					add_to_variable = { var = TreasuryIncomePredicted value = 4000 }
				}
				######################
				## Accounting Error ##
				######################
				set_variable = { var = TreasuryIncomeMax value = TreasuryIncomePredicted }
				multiply_variable = { var = TreasuryIncomeMax value = TreasuryAccountingError }
				#######################
				## Figure out Prices ##
				#######################
				KIS_treasury_figure_out_prices = yes
			}
			if = {
				limit = {
					has_country_flag = KIS_unlocked_treasury
					check_variable = { KIS.TreasuryDebt > 999 }
				}
				set_variable = { var = KIS_treasury_debt_PP_var_TEMP value = KIS.TreasuryDebt }
				divide_variable = { var = KIS_treasury_debt_PP_var_TEMP value = KIS_treasury_debt_PP_RATIO_var }
				set_variable = { var = KIS_treasury_debt_PP_var value = 0 }
				subtract_from_variable = { var = KIS_treasury_debt_PP_var value = KIS_treasury_debt_PP_var_TEMP }
				set_variable = { var = KIS_treasury_debt_consumer_goods_var value = KIS.TreasuryDebt }
				divide_variable = { var = KIS_treasury_debt_consumer_goods_var value = KIS_treasury_debt_consumer_goods_RATIO_var }
				add_dynamic_modifier = { modifier = KIS_treasury_debt_modifier }
			}
			if = {
				limit = {
					has_country_flag = KIS_northern_compact_plebiscite_begun
				}
				KIS_plebiscite_calculate_average_popular_support = yes
			}
			if = {
				limit = {
					has_country_flag = KIR_plebiscite_rain_shine_tour_started_flag
					has_country_flag = KIR_plebiscite_fickle_current_tour_started_flag
					NOT = {
						has_country_flag = KIR_event_council_21_has_fired_flag
					}
				}
				every_country = {
					limit = {
						OR = {
							original_tag = KIR
							original_tag = KIS
						}
					}
					country_event = { id = kirin_council.21 random_days = 7 }
					set_country_flag = KIR_event_council_21_has_fired_flag
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_council_24_flag
					check_variable = { party_popularity@ruling_party < 0.30 }
				}
				if = {
					limit = {
						has_government = fascism
					}
					set_political_party = {
						ideology = fascism
						popularity = 30
					}
				}
				if = {
					limit = {
						has_government = neutrality
					}
					set_political_party = {
						ideology = neutrality
						popularity = 30
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_empire_focus_4b_effect_flag
					check_variable = { party_popularity@neutrality > 0.1 }
				}
				set_political_party = {
					ideology = neutrality
					popularity = 10
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_empire_focus_5b_effect_flag
					check_variable = { party_popularity@democratic > 0.1 }
				}
				set_political_party = {
					ideology = democratic
					popularity = 10
				}
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@jager > KIS.jager_cap_var }
				}
				subtract_from_variable = { var = jager_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIS_battalion_over_limit }
			}
			if = {
				limit = {
					check_variable = {
						var = KIS.num_battalions_with_type@jager
						value = KIS.jager_cap_var
						compare = less_than_or_equals
					}
				}
				set_variable = { var = jager_debuff_var value = 0 }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@knights > 10 }
				}
				subtract_from_variable = { var = knights_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIS_battalion_over_limit }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@knights < 11 }
				}
				set_variable = { var = knights_debuff_var value = 0 }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@pegasi > 10 }
				}
				subtract_from_variable = { var = pegasi_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIS_battalion_over_limit }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@pegasi < 11 }
				}
				set_variable = { var = pegasi_debuff_var value = 0 }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@spirit_warriors > 10 }
				}
				subtract_from_variable = { var = spirit_warriors_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIS_battalion_over_limit }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@spirit_warriors < 11 }
				}
				set_variable = { var = spirit_warriors_debuff_var value = 0 }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@ironpaws > 10 }
				}
				subtract_from_variable = { var = ironpaws_debuff_var value = 1 }
				add_dynamic_modifier = { modifier = KIS_battalion_over_limit }
			}
			if = {
				limit = {
					check_variable = { KIS.num_battalions_with_type@ironpaws < 11 }
				}
				set_variable = { var = ironpaws_debuff_var value = 0 }
			}
			if = {
				limit = {
					has_idea = KIS_sycee_guild_corporate_dispute
				}
				add_to_variable = { var = KIS.TreasuryDebt value = 3000 }
			}
			if = {
				limit = {
					has_idea = KIS_griffonian_debts
				}
				add_to_variable = { var = KIS.TreasuryDebt value = 3000 }
			}
			if = {
				limit = {
					has_idea = KIS_changeling_debts1
				}
				add_to_variable = { var = KIS.TreasuryDebt value = 5000 }
			}
			if = {
				limit = {
					has_idea = KIS_changeling_debts2
				}
				add_to_variable = { var = KIS.TreasuryDebt value = 15000 }
			}
		}
	}
	
	on_yearly_TBK = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_yearly_TBK"
			if = {
				limit = {
					TBK = {
						exists = yes
						OR = {
							has_completed_focus = TBK_house_of_trade
							has_completed_focus = TBK_criminal_ministry
						}
					}
				}
				TBK = {
					add_to_variable = {
						var = TBK_dirty_money
						value = TBK_yearly_money 
					}
				}
			}
		}
	}

	on_monthly_KIS = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_KIS"
			if = {
				limit = {
					has_country_flag = KIS_state_corporate_vassal_GUI_enabled_flag
					has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
					NOT = {
						has_active_mission = KIS_stop_corporate_war_mission
						has_country_flag = KIS_corporate_war_happened_flag
						has_country_flag = KIS_corporate_crisis_ongoing
						has_war_with = COC
					}
				}
				set_variable = { var = KIS_SYCEE_VASSALS_PRI value = KIS_SYCEE_cost_var }
				subtract_from_variable = { var = KIS_SYCEE_VASSALS_PRI value = 8000 }
				set_variable = { var = KIS_SYCEE_VASSALS_SEC value = KIS_SYCEE_VASSALS_PRI }
				multiply_variable = { var = KIS_SYCEE_VASSALS_SEC value = 2 }
				set_variable = { var = KIS_GUILD_VASSALS_PRI value = KIS_GUILD_cost_var }
				subtract_from_variable = { var = KIS_GUILD_VASSALS_PRI value = 8000 }
				set_variable = { var = KIS_GUILD_VASSALS_SEC value = KIS_GUILD_VASSALS_PRI }
				multiply_variable = { var = KIS_GUILD_VASSALS_SEC value = 2 }
				if = {
					limit = {
						check_variable = { KIS_SYCEE_VASSALS_PRI > KIS_GUILD_VASSALS_SEC } ##Checks if the amount of states chartered by Sycee is more than double that of the Guild, or vice versa
					}
					country_event = { id = kirin_council.580 }
					set_country_flag = KIS_corporate_crisis_ongoing
				}
				if = {
					limit = {
						check_variable = { KIS_GUILD_VASSALS_PRI > KIS_SYCEE_VASSALS_SEC }
					}
					country_event = { id = kirin_council.581 }
					set_country_flag = KIS_corporate_crisis_ongoing
				}
			}
			if = {
				limit = {
					has_tech = nukes
					has_full_control_of_state = 817
					817 = { NOT = { has_state_flag = KIR_KirCorWar_817_nuking } }
					has_country_flag = KIS_corporate_war_happened_flag
					NOT = { has_country_flag = KIS_corporate_war_escalation_timer }
					STH = {
						exists = yes
						KAG = {
							has_war_with = PREV
						}
					}
					KAG = {
						exists = yes
						STH = {
							has_war_with = PREV
						}
					}
				}
				random_list = {
					2 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
					}
					1 = {
						817 = { set_state_flag = KIR_KirCorWar_817_nuking }
						launch_nuke = { province = 20480 }
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = KIR_news_event_27_fired
					}
					controls_state = 1063
					divisions_in_state = {
						size > 0
						state = 1063
					}
					any_enemy_country = {
						divisions_in_state = {
							size > 0
							state = 1063
						}
					}
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
						set_global_flag = KIR_news_event_27_fired
						news_event = { id =  kirin_news.27 days = 3 }
					}
					9 = {
					}
				}
			}
		}
	}

	on_monthly_KIC = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_KIC"
			if = {
				limit = {
					has_country_flag = KIC_unlock_postwar_focus_tree
					has_full_control_of_state = 1073
					has_full_control_of_state = 1074
					has_full_control_of_state = 1075
					has_full_control_of_state = 1076
					NOT = {
						has_country_flag = KIC_famine_started_flag
					}
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.1
							check_variable = { KIC_marepower_consumed_VAR > 2 }
						}
						modifier = {
							factor = 1.2
							check_variable = { KIC_marepower_consumed_VAR > 3 }
						}
						modifier = {
							factor = 1.4
							check_variable = { KIC_marepower_consumed_VAR > 4 }
						}
						modifier = {
							factor = 1.25
							check_variable = { KIC_public_works_corvee_taken_var > 2 }
						}
						modifier = {
							factor = 2
							check_variable = { KIR.KIR_90_percent_of_kiria_1007_population > KIC.max_manpower_k } ##If 10% of the Kirian population has died.
						}
						country_event = { id = kirin_republic.50 days = 3 random_days = 21 }
						set_country_flag = KIC_famine_started_flag
					}
					9 = {
						modifier = {
							factor = 1.1
							has_stability > 0.5
						}
						modifier = {
							factor = 1.2
							has_stability > 0.6
						}
						modifier = {
							factor = 1.3
							has_stability > 0.7
						}
						modifier = {
							factor = 1.4
							has_stability > 0.8
						}
						modifier = {
							factor = 1.5
							has_stability > 0.9
						}
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology ##Why yes, I am a historical materialist.
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { KIC_authoritarian_var > 8 }
				}
				country_event = { id = kirin_republic.68 days = 1 random_days = 10 }
			}
			if = {
				limit = {
					check_variable = { KIC_authoritarian_var > 10 }
					has_country_flag = KIC_event_68_fired_flag
				}
				country_event = { id = kirin_republic.69 days = 3 random_days = 21 }
			}
			if = {
				limit = {
					NOT = { 
						has_global_flag = KIR_news_event_27_fired
					}
					controls_state = 1063
					divisions_in_state = {
						size > 0
						state = 1063
					}
					any_enemy_country = {
						divisions_in_state = {
							size > 0
							state = 1063
						}
					}
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.05
							has_tech = tech_kirin_astrology
						}
						set_global_flag = KIR_news_event_27_fired
						news_event = { id =  kirin_news.27 days = 3 }
					}
					9 = {
					}
				}
			}
		}
	}
	
	on_weekly_TBK = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_TBK"
			if = {
				limit = {
					TBK = {
						exists = yes
						has_dynamic_modifier = {
							modifier = TBK_commoner_mood_modifier
						}
					}
				}
				TBK = {
					add_to_variable = {
						var = TBK_commoner_mood_weekly_tick
						value = TBK_commoner_mood_weekly_tick_change 
					}
					clamp_variable = {
						var = TBK_commoner_mood_weekly_tick
						min = 0
						max = TBK_commoner_mood_weekly_tick_max
					}
					TBK_calculate_commoner_mood_modifier = yes
				}
			}
		}
	}

	on_weekly_KIC = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_KIC"
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_SR_1B_flag
				}
				### Initial Calculations
				set_variable = { var = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var value = KIR.surrender_progress } ## Make sure to include option to switch target to KIS
				multiply_variable = { var = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var value = 0.15 }
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var
					min = 0
					max = 0.15
				}
				set_variable = { var = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var value = 0 }
				subtract_from_variable = { var = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var
					min = -0.15
					max = 0
				}
				### Assign Modifiers Values
				### Negatives
				set_variable = { var = KIC_aggressive_offence_modifier_RG_var value = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_aggressive_offence_modifier_OLWM_var value = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_aggressive_offence_modifier_SCF_var value = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_shared_military_modifier_TTF_var value = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_shared_military_modifier_PKP_var value = KIC_aggressive_offence_modifier_OVERALL_NEGATIVE_var }
				### Positives
				set_variable = { var = KIC_aggressive_offence_modifier_PLS_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_aggressive_offence_modifier_BTF_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_aggressive_offence_modifier_RD_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_LNA_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_surrender_limit_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_ASF_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
				## AAF and ADF scaling
				if = {
					limit = {
						has_country_flag = KIR_republic_focus_SR_6_flag
					}
					set_variable = { var = KIC_aggressive_offence_modifier_AAF_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
					set_variable = { var = KIC_aggressive_offence_modifier_ADF_var value = KIC_aggressive_offence_modifier_OVERALL_POSITIVE_var }
					clamp_variable = {
						var = KIC_aggressive_offence_modifier_AAF_var
						min = 0.05
						max = KIC_military_POSITIVE_limit_var
					}
					clamp_variable = {
						var = KIC_aggressive_offence_modifier_ADF_var
						min = 0.05
						max = KIC_military_POSITIVE_limit_var
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_BH_1A_flag
				}
				### Initial Calculations
				set_variable = { var = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var value = KIC.surrender_progress }
				multiply_variable = { var = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var value = 0.25 }
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var
					min = 0
					max = 0.25
				}
				set_variable = { var = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var value = 0 }
				subtract_from_variable = { var = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var
					min = -0.25
					max = 0
				}
				### Assign Modifiers Values
				### Positives
				set_variable = { var = KIC_maneuver_defence_modifier_RGOOOS_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_maneuver_defence_modifier_RFWE_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_maneuver_defence_modifier_MDIF_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_maneuver_defence_modifier_TPR_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_LNA_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_surrender_limit_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				set_variable = { var = KIC_shared_military_modifier_ASF_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
				### Negatives
				set_variable = { var = KIC_shared_military_modifier_TTF_var value = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_shared_military_modifier_PKP_var value = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var }
				set_variable = { var = KIC_maneuver_defence_modifier_RDOOOS_var value = KIC_maneuver_defence_modifier_OVERALL_NEGATIVE_var }
				## ACAF and ACDF scaling
				if = {
					limit = {
						has_country_flag = KIR_republic_focus_BH_1B_flag
					}
					set_variable = { var = KIC_maneuver_defence_modifier_ACAF_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
					set_variable = { var = KIC_maneuver_defence_modifier_ACDF_var value = KIC_maneuver_defence_modifier_OVERALL_POSITIVE_var }
					clamp_variable = {
						var = KIC_maneuver_defence_modifier_ACAF_var
						min = 0.05
						max = KIC_military_POSITIVE_limit_var
					}
					clamp_variable = {
						var = KIC_maneuver_defence_modifier_ACDF_var
						min = 0.05
						max = KIC_military_POSITIVE_limit_var
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_SR_1A_flag
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_BTF_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_OLWM_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_SR_4A_flag
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_SCF_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_SR_2B_flag
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_PLS_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_SR_4B_flag
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_RD_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_aggressive_offence_modifier_RG_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_BH_3C_flag
				}
				clamp_variable = {
					var = KIC_shared_military_modifier_surrender_limit_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_shared_military_modifier_PKP_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_shared_2B_flag
				}
				clamp_variable = {
					var = KIC_shared_military_modifier_TTF_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_BH_4A_flag
				}
				clamp_variable = {
					var = KIC_shared_military_modifier_ASF_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_shared_military_modifier_LNA_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_BH_3A_flag
				}
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_RGOOOS_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_RDOOOS_var
					min = KIC_military_NEGATIVE_limit_var
					max = -0.05
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_focus_BH_5B_flag
				}
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_RFWE_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_MDIF_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
				clamp_variable = {
					var = KIC_maneuver_defence_modifier_TPR_var
					min = 0.05
					max = KIC_military_POSITIVE_limit_var
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_republic_postwar_focus_19b_flag
					check_variable = { party_popularity@ruling_party < 0.5 }
				}
				add_ideas = KIC_paramountcy_jeopardised
			}
		}
	}
	
	on_weekly_ZAR = {
        effect = {
            log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_ZAR"
            if = {
                limit = {
                    has_idea = ZAR_trans_zebharan_caravans
                }
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 15 
            	}
        	}
            if = {
                limit = {
                    has_idea = ZAR_flourishing_trans_zebharan_caravans
                }
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 25 
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 5
				}
			}
			if = {
                limit = {
                    has_idea = ZAR_awesome_trans_zebharan_caravans
                }
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 50
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 10
				}
			}
			if = {
				limit = {
					has_idea = ZAR_wasting_eqpt
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = -25 
				}
			}
			if = {
                limit = {
					has_idea = ZAR_wasting_eqpt_2
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = -20
				}
			}
			if = {
				limit = {
					has_idea = ZAR_wasting_eqpt_4
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = -10
				}
			}
			if = {
				limit = {
					has_idea = ZAR_wasting_eqpt_3
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = -15
				}
			}
			if = {
				limit = {
					has_idea = ZAR_wasting_eqpt_5
				}
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = -5
				}
			}
		}
	}
	
	on_weekly = { ##Children of Concord
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly"
			if = {
				limit = {
					original_tag = KIC
					has_country_flag = KIC_children_of_concord_flag
				}
				if = {
					limit = {
						check_variable = {
							var = COC_power_struggle_DR_var
							value = 2
							compare = greater_than_or_equals
						}
					}
					add_ideas = COC_PS_DR_hidden_buffs_1
				}
				if = {
					limit = {
						check_variable = {
							var = COC_power_struggle_DR_var
							value = 4
							compare = greater_than_or_equals
						}
					}
					add_ideas = COC_PS_DR_hidden_buffs_2
					if = {
						limit = {
							EQS = { exists = yes is_subject = no }
						}
						country_event = { id = kirin_council.320 hours = 1 }
					}
				}
				if = {
					limit = {
						check_variable = {
							var = COC_power_struggle_KF_var
							value = 2
							compare = greater_than_or_equals
						}
					}
					add_ideas = COC_PS_KF_hidden_buffs_1
				}
				if = {
					limit = {
						check_variable = {
							var = COC_power_struggle_KF_var
							value = 4
							compare = greater_than_or_equals
						}
					}
					add_ideas = COC_PS_KF_hidden_buffs_2
					if = {
						limit = {
							OR = {
								STG = { exists = yes is_subject = no }
								SRS = { exists = yes is_subject = no }
								GRW = { exists = yes is_subject = no }
							}
						}
						country_event = { id = kirin_council.319 hours = 1 }
					}
				}
			}

			
			#if = {
			#	limit = {
			#		NOT = {
			#			has_completed_focus = ZAR_emerald_fields
			#		}
			#	}
			#	every_owned_state = {
			#		limit = {
			#			has_dynamic_modifier = {
			#				modifier = ZAR_the_flowering
			#			}
			#		}
			#		ROOT = {
			#			 if = {
			#				limit = {
			#					has_completed_focus = ZAR_emerald_fields
			#					NOT = {
			#						has_completed_focus = ZAR_the_desert_blossoms
			#					}
			#				}
			#				add_manpower = 100 
			#			}
			#			else_if = {
			#				limit = {
			#					has_completed_focus = ZAR_the_desert_blossoms
			#				}
			#				add_manpower = 200 
			#			}
			#			else = {
			#				add_manpower = 50
			#			}
			#		}
			#	}
			#}
           
		}
    }
	on_monthly_HIE = {
		effect = {
			if = {
				limit = {
					has_war = yes
				}
				set_variable = { inflicted_casualties_last_month = inflicted_casualties }
				count_inflicted_casualties_on_current_enemies = yes
				subtract_from_variable = { inflicted_casualties_last_month = inflicted_casualties }
				multiply_variable = { inflicted_casualties_last_month = -1 }

				add_to_variable = { inflicted_casualties_last_month = inflicted_casualties_last_month_remainer }

				set_temp_variable = { crystals_var_remainer = inflicted_casualties_last_month }
				set_temp_variable = { crystals_var_remainer_decimal = inflicted_casualties_last_month }
				modulo_temp_variable = { crystals_var_remainer = 10 }
				subtract_from_temp_variable = { crystals_var_remainer_decimal = 0.499 }
				round_temp_variable = crystals_var_remainer_decimal
				set_temp_variable = { crystals_var_remainer_decimal_2 = inflicted_casualties_last_month }
				subtract_from_temp_variable = { crystals_var_remainer_decimal_2 = crystals_var_remainer_decimal }
				add_to_temp_variable = { crystals_var_remainer = crystals_var_remainer_decimal_2 }

				set_temp_variable = { crystals_var = inflicted_casualties_last_month }
				divide_temp_variable = { crystals_var = 10 }
				subtract_from_temp_variable = { crystals_var = 0.499 }
				round_temp_variable = crystals_var
				if = {
					limit = {
						has_country_flag = HIE_LET_THE_KILLINGS_BEGIN
					}
					multiply_temp_variable = { crystals_var = 2 }
				}

				set_variable = { inflicted_casualties_last_month_remainer = crystals_var_remainer }

				875 = {
					add_to_variable = { HIE_CTH_e1_crystals_var_temp = crystals_var }
					if = {
						limit = { is_owned_and_controlled_by = PREV	}
						set_variable = { HIE_CTH_e1_crystals_var = HIE_CTH_e1_crystals_var_temp }
						force_update_dynamic_modifier = yes
					}
				}
			}
		}
	}
	
	on_monthly_HIP = {
		effect = {
			HIP_underwater_population_increase = yes
			HIP_seapony_migration = yes
			if = {
				limit = {
					has_tech = HIP_nuclear_air_to_air_missiles_tech
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_air_to_air_missiles_tech_bba
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_depth_charges_aironly
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_depth_charges_full
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_depth_charges_full_nomtg
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_land_mines_tech
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_naval_mines_tech
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_torpedos_tech
				}
				add_nuclear_bombs = -1
			}
			if = {
				limit = {
					has_tech = HIP_nuclear_rocket_artillery_tech
				}
				add_nuclear_bombs = -1
			}
			
		}
	}
	on_monthly_TBK = {
		effect = {
			if = {
				limit = {
					tag = TBK
					has_completed_focus = TBK_great_temple
					has_global_flag = on_monthly_done
					OR = {
						check_variable = { global.month = 4 }
						check_variable = { global.month = 8 }
						check_variable = { global.month = 12 }
					}
				}
				country_event = { id = tobuck_baragzen.18 }
			}
			if = {
				limit = {
					has_global_flag = on_monthly_done
					check_variable = { global.month = 1 }
					TBK = {
						exists = yes
						OR = {
							has_completed_focus = TBK_house_of_trade
							has_completed_focus = TBK_criminal_ministry
						}
					}
				}
				TBK = {
					add_to_variable = {
						var = TBK_dirty_money
						value = TBK_yearly_money 
					}
				}
			}
			if = {
				limit = {
					has_global_flag = on_monthly_done
					check_variable = { global.month = 1 }
					TBK = {
						exists = yes
						has_country_leader = {
							character = TBK_baragzen
							ruling_only = yes
						}
					}
				}
				TBK = {
					add_to_variable = {
						var = TBK_baragzen_cholesterol_timer_var
						value = 12
					}
				}
			}
		}
	}
	on_weekly_WIN = {
        effect = {
		    if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_2
                }
				add_equipment_to_stockpile = { 
					type = motorized_equipment 
					amount = 50 
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_3
                }
				add_equipment_to_stockpile = { 
					type = mechanized_equipment 
					amount = 25 
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_8
                }
				add_equipment_to_stockpile = { 
					type = infantry_equipment 
					amount = 150
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_9
                }
				add_equipment_to_stockpile = { 
					type = artillery_equipment 
					amount = 25 
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_10
                }
				add_equipment_to_stockpile = { 
					type = support_equipment 
					amount = 15 
            	}
        	}
		}
	}
	on_monthly_WIN = {
        effect = {
		    if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_5
					NOT = {
						has_country_flag = WIN_cas_designed
					}
                }
				generic_basic_cas = yes
				set_country_flag = WIN_cas_designed
				add_equipment_to_stockpile = { 
					type = small_plane_cas_airframe_1
					variant_name = "Basic CAS"
					amount = 5 
            	}
        	}
			else_if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_5
                }
				add_equipment_to_stockpile = { 
					type = small_plane_cas_airframe_1
					variant_name = "Basic CAS"
					amount = 5 
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_6
					NOT = {
						has_country_flag = WIN_fighter_designed
					}
                }
				generic_basic_fighter = yes
				set_country_flag = WIN_fighter_designed
				add_equipment_to_stockpile = { 
					type = small_plane_airframe_1
					variant_name = "Basic Fighter" 
					amount = 10 
            	}
        	}
			else_if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_6
                }
				add_equipment_to_stockpile = { 
					type = small_plane_airframe_1
					variant_name = "Basic Fighter" 
					amount = 10 
            	}
        	}
			if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_7
					NOT = {
						has_country_flag = WIN_tac_designed
					}
                }
				generic_basic_tac_bomber = yes
				set_country_flag = WIN_tac_designed
				add_equipment_to_stockpile = { 
					type = medium_plane_airframe_1
					variant_name = "Basic Tactical Bomber"
					amount = 5
            	}
        	}
			else_if = {
                limit = {
                    has_idea = WIN_ocean_spray_designer_7
                }
				add_equipment_to_stockpile = { 
					type = medium_plane_airframe_1
					variant_name = "Basic Tactical Bomber"
					amount = 5
            	}
        	}
		}
	}
	on_monthly_ZAR = {
		effect = {
			if = {
				limit = { has_country_flag = ZAR_monthly_wurms_flag }
				ZAR_monthly_wurms = yes
			}
		}
	}
}
