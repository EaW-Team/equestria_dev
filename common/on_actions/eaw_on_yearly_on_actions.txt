on_actions = {
	# Months counter initialization
	on_startup = {
		effect = {
			set_variable = { global.month = 1 }
		}
	}
	
	# Months counter
	on_monthly = {
		effect = {
			if = {
				limit = {
					NOT = { has_global_flag = on_monthly_done }
				}
				log = "[GetDateText]: global on_monthly"
				add_to_variable = { global.month = 1 }
				if = {
					limit = {
						check_variable = { global.month > 12 }
					}
					set_variable = { global.month = 1 }
				}
				set_global_flag = { flag = on_monthly_done value = 1 days = 1 }
			}
		}
	}
	
	# ROOT is country, this is ran for every country
	on_monthly = {
		effect = {
			# ON YEARLY
			if = {
				#don't touch!
				limit = {
					NOT = {
						check_variable = { global.last_year = global.year }
						has_global_flag = on_yearly_done
					}
				}
				#this is done only ONCE per year, even though on_daily fires for every country
				#will also be done on startup
				log = "[GetDateText]: global on_yearly"

				#your code here
				SRS = { country_event = socrep_grif.76 }
				
				#don't touch!
				set_variable = { global.last_year = global.year }
				set_global_flag = { flag = on_yearly_done value = 1 days = 1 }
			}

			core_all_occupied_through_compliance = yes
		}
	}

	on_monthly_CHN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_CHN"
			if = {
				limit = {
					NOT = { has_global_flag = christmas_truce_fired }
					check_variable = { global.month = 12 }
					event_target:equestria = {
						exists = yes
						has_government = democratic
						has_war_with = CHN
						CHN = { has_government = fascism }
						fascism < 0.1
					}
				}
				event_target:equestria = { country_event = { id = equestria.181 days = 24 random = 48 } }#days to hours applied
			}
		}
	}

	on_weekly_CHN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_CHN"
			if = {
				limit = {
					has_active_mission = CHN_acornage_colonisation_decision
				}
				CHN = {
					save_current_manpower = yes
				}
				136 = {
					add_manpower = -5000
				}
				137 = {
					add_manpower = 1250
				}
				138 = {
					add_manpower = 1250
				}
				172 = {
					add_manpower = 1250
				}
				175 = {
					add_manpower = 1250
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_active_mission = CHN_vanhoover_colonisation_decision
					NOT = { 
						has_country_flag = CHN_vanhoover_colonisation_decision_updated_flag
					}
				}
				CHN = {
					save_current_manpower = yes
				}
				14 = {
					add_manpower = -5000
				}
				45 = {
					add_manpower = 1250
				}
				72 = {
					add_manpower = 1250
				}
				73 = {
					add_manpower = 1250
				}
				172 = {
					add_manpower = 1250
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_active_mission = CHN_vanhoover_colonisation_decision
					has_country_flag = CHN_vanhoover_colonisation_decision_updated_flag
				}
				CHN = {
					save_current_manpower = yes
				}
				14 = {
					add_manpower = -100
				}
				45 = {
					add_manpower = 25
				}
				72 = {
					add_manpower = 25
				}
				73 = {
					add_manpower = 25
				}
				172 = {
					add_manpower = 25
				}
				CHN = {
					restore_previous_manpower = yes
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos3
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 40
					}
					set_compliance = 40
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos2
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 60
					}
					set_compliance = 60
				}
			}
			if = {
				limit = {
					has_idea = CHN_equestria_chaos1
				}
				every_controlled_state = {
					limit = {
						is_core_of = EQS
						compliance > 80
					}
					set_compliance = 80
				}
			}
			if = {
				limit = {
					has_completed_focus = CHN_post_war_5
					is_ai = yes
					check_variable = { CHN_amount_of_allowed_battalions < num_battalions }
				}
				set_temp_variable = { disband_fraction = num_battalions }
				subtract_from_temp_variable = { disband_fraction = CHN_amount_of_allowed_battalions }
				divide_temp_variable = { disband_fraction = num_battalions }
				clamp_temp_variable = {
					var = divide_temp_variable
					min = 0
					max = 0.1
				}
				disband_units_fraction = yes
			}
			if = {
				limit = {
					has_completed_focus = CHN_post_war_5
					check_variable = { CHN_amount_of_allowed_battalions < CHN.num_battalions }
				}
				subtract_from_variable = { CHN_love_variable = CHN_excess_battalions_cost }
			}
		}
	}

	on_weekly_MAN = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_MAN"
			if = {
				limit = {
					has_country_flag = MAN_continuous_love_distribution_country_flag
				}
				add_political_power = var:MAN_continuous_love_distribution_pp_var
				add_stability = var:MAN_continuous_love_distribution_stab_var
				set_temp_variable = { MAN_continuous_love_distribution_pp_var_TEMP = MAN_lovetax_variable }
				multiply_temp_variable = { MAN_continuous_love_distribution_pp_var_TEMP = 20 }
				set_variable = { MAN_continuous_love_distribution_pp_var = MAN_continuous_love_distribution_pp_var_TEMP }
				round_variable = MAN_continuous_love_distribution_pp_var
				set_temp_variable = { MAN_continuous_love_distribution_stab_var_TEMP = MAN_lovetax_variable }
				divide_temp_variable = { MAN_continuous_love_distribution_stab_var_TEMP = 200 }
				set_variable = { MAN_continuous_love_distribution_stab_var = MAN_continuous_love_distribution_stab_var_TEMP }
			}
			if = {
				limit = {
					has_country_flag = MAN_continuous_love_tax_sucking_country_flag
				}
				add_to_variable = { var = MAN_lovetax_variable value = 0.005 }
				add_to_variable = { MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable = 1 }
				add_to_variable = { var = MAN_lovetax_variable value = MAN_continuous_love_tax_sucking_bonus_variable }
				### calculations for the next weekly love harvest ###
				clear_variable = MAN_continuous_love_tax_sucking_bonus_variable
				clear_variable = MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable
				set_variable = { MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable = num_of_available_civilian_factories }
				set_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = MAN_continuous_love_tax_sucking_bonus_civ_factories_display_variable }
				multiply_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = 0.015 }
				set_temp_variable = { MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable_TEMP = MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable } ## base value should always be one (1) ##
				multiply_temp_variable = { MAN_continuous_love_tax_sucking_bonus_variable_TEMP = MAN_continuous_love_tax_sucking_how_many_weeks_elasped_variable_TEMP }
				set_variable = { MAN_continuous_love_tax_sucking_bonus_variable = MAN_continuous_love_tax_sucking_bonus_variable_TEMP }
			}
			if = {
				limit = {
					has_idea = MAN_internal_migration
				}
				save_current_manpower = yes
				every_owned_state = {
					limit = { has_state_category = megalopolis }
					add_manpower = 2500
				}
				every_owned_state = {
					limit = { has_state_category = metropolis }
					add_manpower = 2000
				}
				every_owned_state = {
					limit = { has_state_category = large_city }
					add_manpower = 1500
				}
				every_owned_state = {
					limit = { has_state_category = city }
					add_manpower = 1000
				}
				restore_previous_manpower = yes
			}
		}
	}

	on_weekly_ELF = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_ELF"
			if = {
				limit = {
					has_country_flag = ELF_bits_gun_weekly_shipments
					has_idea = ELF_bits_gun_idea
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 200
					producer = ELF
				}
			}
		}
	}
	on_monthly_BAR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_BAR"
			if = {
				limit = {
					original_tag = BAR
				}
				if = {
					limit = { 
						country_exists = BAR
						BAR = {
							has_country_flag = { flag = barrad_endgame value = 0 }
							has_country_flag = barrad_silver_star_alive
							OR = {
								AND = {
									has_country_flag = barrad_asinti_alive
									check_variable = { BAR_relations_asinti_silver < 70 }
								}
								AND = {
									has_country_flag = barrad_leopold_alive
									check_variable = { BAR_relations_silver_leopold < 70 }
								}
								AND = {
									has_country_flag = barrad_viira_alive
									check_variable = { BAR_relations_silver_viira < 70 }
								}
							}
						}
					}
					BAR = {
						if = {
							limit = {
								has_country_flag = BAR_silver_sad
							}
							country_event = { days = 1 random_days = 14 id = barrad_silver_star.11 }
						}
						else = {
							country_event = { days = 1 random_days = 14 id = barrad_silver_star.1 }
						}
					}
				}
				if = {
					limit = {
						country_exists = BAR
						BAR = {
							OR = {
								has_variable = BAR_viira_pup
								has_variable = BAR_viira_control
							}	
							check_variable = { viira_mana_overload > 9 }
						}
					}
					BAR = {
						subtract_from_variable = { viira_mana_overload = 10 }
					}
					
				}
				if = {
					limit = {
						has_country_flag = { flag = barrad_endgame value = 0 }
						OR = {
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_silver_star_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_viira_alive
								has_country_flag = barrad_asinti_alive
							}
							AND = {
								has_country_flag = barrad_viira_alive
								has_country_flag = barrad_silver_star_alive
							}
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_viira_alive
							}
							AND = {
								has_country_flag = barrad_leopold_alive
								has_country_flag = barrad_silver_star_alive
							}
						}
					}
					random_list = {
						30 = {
							if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive	
								}
								random_list = {
									16 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									16 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
									17 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.2 days = 8 }
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.5 days = 8 }
							}
							else_if = {
								limit = {
									has_country_flag = barrad_silver_star_alive
									NOT = { has_country_flag = barrad_asinti_alive }
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.6 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								random_list = {
									34 = {
										country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
									}
									33 = {
										country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
									}
								}
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									has_country_flag = barrad_viira_alive
									NOT = { has_country_flag = barrad_leopold_alive }
								}
								country_event = { id = barrad_monthy_relation_hit_event.3 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									has_country_flag = barrad_asinti_alive
									NOT = { has_country_flag = barrad_viira_alive }
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.1 days = 8 }
							}
							else_if = {
								limit = {
									NOT = { has_country_flag = barrad_silver_star_alive }
									NOT = { has_country_flag = barrad_asinti_alive }
									has_country_flag = barrad_viira_alive
									has_country_flag = barrad_leopold_alive
								}
								country_event = { id = barrad_monthy_relation_hit_event.4 days = 8 }
							}
						}
						70 = {

						}
					}
				}
				if = {
					limit = {
						BAR = {
							has_war = yes
							has_country_flag = BAR_asinti_ded_count
						}
					}
					BAR = {
						divide_variable = { BAR_asinti_blood_resource = 2 }
						round_variable = BAR_asinti_blood_resource
						set_variable = { inflicted_casualties_last_month = inflicted_casualties }
						count_inflicted_casualties_on_current_enemies = yes
						subtract_from_variable = { inflicted_casualties_last_month = inflicted_casualties }
						multiply_variable = { inflicted_casualties_last_month = -1 }
						if = {
							limit = {
								check_variable = { BAR_asinti_blood_resource < 2100000 }
							}
							add_to_variable = { BAR_asinti_blood_resource = inflicted_casualties_last_month }
						}
						else = {
							set_variable = { BAR_asinti_blood_resource = 2100000 }
						}
					}	
				}
			}	
		}
	}

	on_monthly_KIR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_monthly_KIR"
			if = {
				limit = {
					NOT = { has_completed_focus = KIR_focus_10b }
					check_variable = { KIR_pirate_raid_events_var < 7 }
				}
				random_list = {
					1 = {
						modifier = {
							factor = 1.1
							has_stability < 0.5
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 0 }
							}
							country_event = { id = kirin_pirate.1 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 1 }
							}
							country_event = { id = kirin_pirate.2 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 2 }
							}
							country_event = { id = kirin_pirate.3 days = 1 random_days = 14 }
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 3 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.4 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 4 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.5 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 5 }
							}
							every_country = {
								limit = {
									OR = {
										is_kiria_country = yes
										is_southeastern_zebrica_country = yes
									}
								}
								news_event = { id = kirin_pirate.6 days = 1 random_days = 14 }
							}
						}
						if = {
							limit = {
								check_variable = { KIR_pirate_raid_events_var = 6 }
							}
							country_event = { id = kirin_pirate.7 days = 1 random_days = 14 }
						}
						add_to_variable = { KIR_pirate_raid_events_var = 1 }
					}
					6 = {
						modifier = {
							factor = 1.1
							has_stability > 0.5
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_1_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					count_triggers = {
						amount = 2
						has_completed_focus = KIR_focus_8a
						has_completed_focus = KIR_focus_8g
						has_completed_focus = KIR_focus_10a
						has_completed_focus = KIR_focus_11a
					}
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_1_flag
						country_event = { id = kirin_crisis.1 days = 7 random_days = 30 }
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
					}
					5 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_2_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						## is exempted from the monthly crisis quota
					}
					OR = { ##between the months of june and september
						AND = {
							date > 1007.06.01
							date < 1007.10.01
						}
						AND = {
							date > 1008.06.01
							date < 1008.10.01
						}
						AND = {
							date > 1009.06.01
							date < 1009.10.01
						}
						AND = {
							date > 1010.06.01
							date < 1010.10.01
						}
						AND = {
							date > 1011.06.01
							date < 1011.10.01
						}
						AND = {
							date > 1012.06.01
							date < 1012.10.01
						}
						AND = {
							date > 1013.06.01
							date < 1013.10.01
						}
						AND = {
							date > 1014.06.01
							date < 1014.10.01
						}
						AND = {
							date > 1015.06.01
							date < 1015.10.01
						}
						AND = {
							date > 1016.06.01
							date < 1016.10.01
						}
						AND = {
							date > 1017.06.01
							date < 1017.10.01
						}
						AND = {
							date > 1018.06.01
							date < 1018.10.01
						}
						AND = {
							date > 1019.06.01
							date < 1019.10.01
						}
						AND = {
							date > 1020.06.01
							date < 1020.10.01
						}
						AND = {
							date > 1021.06.01
							date < 1021.10.01
						}
						AND = {
							date > 1022.06.01
							date < 1022.10.01
						}
						AND = {
							date > 1023.06.01
							date < 1023.10.01
						}
						AND = {
							date > 1024.06.01
							date < 1024.10.01
						}
						AND = {
							date > 1025.06.01
							date < 1025.10.01
						}
						AND = {
							date > 1026.06.01
							date < 1026.10.01
						}
						AND = {
							date > 1027.06.01
							date < 1027.10.01
						}
						AND = {
							date > 1028.06.01
							date < 1028.10.01
						}
						AND = {
							date > 1029.06.01
							date < 1029.10.01
						}
						AND = {
							date > 1030.06.01
							date < 1030.10.01
						}
					}
				}
				random_list = {
					1 = {
						country_event = { id = kirin_crisis.3 days = 1 random_days = 14 }
					}
					5 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_3_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					OR = {
						has_country_flag = KIR_focus_6a_risky_choice_flag
						has_country_flag = KIR_focus_6a_inaction_choice_flag
					}
					has_completed_focus = KIR_focus_6a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						if = {
							limit = { has_country_flag = KIR_focus_6a_risky_choice_flag }
							country_event = { id = kirin_crisis.6 days = 7 random_days = 30 }
						}
						else_if = {
							limit = { has_country_flag = KIR_focus_6a_inaction_choice_flag }
							country_event = { id = kirin_crisis.7 days = 7 random_days = 30 }
						}
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_4_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5h
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						country_event = { id = kirin_crisis.8 days = 7 random_days = 30 }
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_7_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5h
					has_completed_focus = KIR_focus_6a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 30 }
						set_country_flag = KIR_crisis_7_flag
						country_event = { id = kirin_crisis.10 days = 30 random_days = 180 }
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_15_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3b
					has_completed_focus = KIR_focus_5a
					has_completed_focus = KIR_focus_7a
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_15_flag
						country_event = { id = kirin_crisis.15 days = 14 random_days = 14 }
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_16_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_6b
					has_completed_focus = KIR_focus_6h
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_16_flag
						country_event = { id = kirin_crisis.16 days = 14 random_days = 14 }
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_17_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_4b
					has_completed_focus = KIR_focus_5c
					has_completed_focus = KIR_focus_6b
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_17_flag
						country_event = { id = kirin_crisis.17 days = 14 random_days = 14 }
					}
					4 = {
					}
				}
			}
			if = {
				limit = {
					NOT = { 
						has_country_flag = KIR_crisis_18_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_8f
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_18_flag
						country_event = { id = kirin_crisis.18 days = 14 random_days = 14 }
					}
					3 = {
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_19_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_5f
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_19_flag
						country_event = { id = kirin_crisis.19 days = 14 random_days = 14 }
					}
					3 = {
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_20_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
					OR = {
						has_completed_focus = KIR_focus_8g
						has_completed_focus = KIR_focus_9b
					}
					OR = {
						has_completed_focus = KIR_focus_4a
						has_completed_focus = KIR_focus_5c
					}
				}
				random_list = {
					1 = {
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						set_country_flag = KIR_crisis_20_flag
						country_event = { id = kirin_crisis.20 days = 14 random_days = 14 }
					}
					3 = {
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_21_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_21_flag
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						country_event = { id = kirin_crisis.21 days = 14 random_days = 14 }
					}
					3 = {
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = KIR_crisis_22_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_monthly_crisis_quota_filled
					}
					has_completed_focus = KIR_focus_3c
					has_completed_focus = KIR_focus_3d
					has_completed_focus = KIR_focus_3e
					has_country_flag = KIR_crisis_21_flag
				}
				random_list = {
					1 = {
						set_country_flag = KIR_crisis_22_flag
						set_country_flag = { flag = KIR_monthly_crisis_quota_filled value = 1 days = 7 }
						country_event = { id = kirin_crisis.22 days = 14 random_days = 14 }
					}
					3 = {
					}
				}
			}
			if = {
				limit = {
					has_country_flag = KIR_great_leap_begun
					NOT = {
						has_country_flag = KIR_bipartite_war_started_flag
						has_country_flag = KIR_has_completed_three_and_half_year_plan
						has_country_flag = KIR_great_leap_timer_countdown
						has_country_flag = KIR_great_leap_over
					}
				}
				set_country_flag = KIR_great_leap_over
				country_event = { id = kirin.30 }
			}
		}
	}

	on_weekly_KIR = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_KIR"
			if = {
				limit = {
					has_idea = KIR_modernisation_exclamation_mark2
				}
				every_controlled_state = {
					limit = {
						is_coastal = yes
					}
					add_manpower = 300
				}
			}
			if = {
				limit = {
					has_completed_focus = KIR_focus_8e
					check_variable = { KIR_focus_8e_event_tries_var < 4 } ##4 weeks where it might trigger
				}
				add_to_variable = { KIR_focus_8e_event_tries_var = 1 }
				random_list = {
					1 = {
						modifier = {
							factor = 1.5
							has_stability < 0.3
						}
						country_event = { id = kirin.15 days = 1 random_days = 14 }
						add_to_variable = { KIR_focus_8e_event_tries_var = 10 }
					}
					1 = {
						modifier = {
							factor = 1.5
							has_stability > 0.5
						}
					}
				}
			}
		}
	}

	on_weekly_KIS = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] on_weekly_KIS"
			if = {
				limit = {
					has_country_flag = KIS_unlocked_treasury
				}
				############################
				## Predict Monthly Income ##
				############################
				set_variable = { var = KISTreasuryIncomeFC value = KIS.num_of_civilian_factories }
				multiply_variable = { var = KISTreasuryIncomeFC value = KISTreasuryIncomePerFC }
				set_variable = { var = KISTreasuryIncomeFM value = KIS.num_of_military_factories }
				multiply_variable = { var = KISTreasuryIncomeFM value = KISTreasuryIncomePerFM }
				set_variable = { var = KISTreasuryIncomeFD value = KIS.num_of_naval_factories }
				multiply_variable = { var = KISTreasuryIncomeFD value = KISTreasuryIncomePerFD }
				set_variable = { var = TreasuryIncomePredicted value = 0 }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFC }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFM }
				add_to_variable = { var = TreasuryIncomePredicted value = KISTreasuryIncomeFD }
				#######################
				## Figure out Prices ##
				#######################
				KIS_treasury_figure_out_prices = yes
			}
			if = {
				limit = {
					has_country_flag = KIS_unlocked_treasury
					check_variable = { KIS.TreasuryDebt > 999 }
				}
				set_variable = { var = KIS_treasury_debt_PP_var_TEMP value = KIS.TreasuryDebt }
				divide_variable = { var = KIS_treasury_debt_PP_var_TEMP value = KIS_treasury_debt_PP_RATIO_var }
				set_variable = { var = KIS_treasury_debt_PP_var value = 0 }
				subtract_from_variable = { var = KIS_treasury_debt_PP_var value = KIS_treasury_debt_PP_var_TEMP }
				set_variable = { var = KIS_treasury_debt_consumer_goods_var value = KIS.TreasuryDebt }
				divide_variable = { var = KIS_treasury_debt_consumer_goods_var value = KIS_treasury_debt_consumer_goods_RATIO_var }
				add_dynamic_modifier = { modifier = KIS_treasury_debt_modifier }
			}
			if = {
				limit = {
					has_country_flag = KIS_northern_compact_plebiscite_begun
				}
				KIS_plebiscite_calculate_average_popular_support = yes
			}
		}
	}
}