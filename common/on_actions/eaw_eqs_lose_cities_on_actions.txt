on_actions = {
		

	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID

	on_state_control_changed = {
		
		##cities Hopping
		effect = {
			if = {
				limit = {
					FROM = { 						
						OR = {
						 	tag = CHN
							is_in_faction_with = CHN
						 	tag = CRY
							is_in_faction_with = CRY
						 	tag = HIP
							is_in_faction_with = HIP                                                   
							tag = STG
							is_in_faction_with = STG
						}  
					}
					ROOT = { 
						OR = { 
							is_in_faction_with = EQS 
							tag = EQS
						} 
					}
					FROM.FROM = {
                        OR = {
						    has_state_flag = NOT_EQS_controls                      
                            }
					}
				}
				FROM.FROM = {  
				 	set_state_flag = EQS_controls
				 	clr_state_flag = NOT_EQS_controls  
				}
			 	EQS = { 
			 		EQS_CITY_HOLDING_level_up = yes
			 	}
			}
		}
		effect = {
			if = {
				limit = {
					FROM = { 
					    OR = { 
							is_in_faction_with = EQS 
							tag = EQS
						}
					}
					ROOT = {
						OR = {
						 	tag = CHN
							is_in_faction_with = CHN
						 	tag = CRY
							is_in_faction_with = CRY
						 	tag = HIP
							is_in_faction_with = HIP                                                   
							tag = STG
							is_in_faction_with = STG
						} 
					}
					FROM.FROM = {
						has_state_flag = EQS_controls
					}
				}
				FROM.FROM = { 
				 	set_state_flag = NOT_EQS_controls  
				 	clr_state_flag = EQS_controls 
				}
		 		if = { 
				   limit = {
					   FROM = {
				   		OR = {
				  			original_tag = STG
					  		original_tag = CHN
							original_tag = CRY
                            original_tag = HIP
				   		} 
					   }	
		 			 
					} 
		 		}
		 		EQS = {
					EQS_CITY_HOLDING_level_down = yes
		 		} 
			}
		}
    }
}