#==============================#
### Karamelka's advisors GUI ###
#==============================#
# Made by Scars
# The closest I can get into making pdxscript OOPs

# on_add will have the information of any 'ticks' that they have
#	The if block contains information that gets triggered when the advisor is activated
#	The else block is for the sake of adding the cooldown number to the display of the selection gui

ideas = {
	hidden_ideas = {
		STG_KRMLK_test_1 = {
			on_add = {
				set_temp_variable = { temp_idea_cooldown = 5 }
				if = {
					limit = {
						is_in_array = { KRMLK_active_advisors = token:STG_KRMLK_test_1 }
					}
					set_temp_variable = { temp_tick_days = 10 }
					set_temp_variable = { temp_id = token:STG_KRMLK_test_1 }
					KRMLK_set_tick = yes

					set_temp_variable = { temp_value = token:STG_KRMLK_test_1 }
					KRMLK_find_index = yes

					set_variable = { KRMLK_advisor_slot_cooldown^out_index = temp_idea_cooldown }
				}
				else = {
					add_to_array = { KRMLK_advisors_cooldown_tracker = temp_idea_cooldown }
					if = {
						limit = {
							has_variable = added_index
						}
						set_variable = { KRMLK_advisors_cooldown_tracker^added_index = temp_idea_cooldown }
					}
				}
			}
			on_remove = {

			}
			modifier = {
				hidden_modifier = {
					
				}
			}
		}
		STG_KRMLK_test_2 = {
			on_add = {
				set_temp_variable = { temp_idea_cooldown = 10 }
				if = {
					limit = {
						is_in_array = { KRMLK_active_advisors = token:STG_KRMLK_test_2 }
					}
					set_temp_variable = { temp_tick_days = 15 }
					set_temp_variable = { temp_id = token:STG_KRMLK_test_2 }
					KRMLK_set_tick = yes

					set_temp_variable = { temp_value = token:STG_KRMLK_test_2 }
					KRMLK_find_index = yes

					set_variable = { KRMLK_advisor_slot_cooldown^out_index = temp_idea_cooldown }
				}
				else = {
					add_to_array = { KRMLK_advisors_cooldown_tracker = temp_idea_cooldown }
					if = {
						limit = {
							has_variable = added_index
						}
						set_variable = { KRMLK_advisors_cooldown_tracker^added_index = temp_idea_cooldown }
					}
				}
			}
			on_remove = {

			}
			modifier = {
				hidden_modifier = {
					
				}
				weekly_manpower = 5000
			}
		}
		STG_KRMLK_test_3 = {
			on_add = {
				set_temp_variable = { temp_idea_cooldown = 15 }
				if = {
					limit = {
						is_in_array = { KRMLK_active_advisors = token:STG_KRMLK_test_3 }
					}
					set_temp_variable = { temp_tick_days = 10 }
					set_temp_variable = { temp_id = token:STG_KRMLK_test_3 }
					KRMLK_set_tick = yes
					add_dynamic_modifier = {
						modifier = STG_KRMLK_test_3_dynamic_modifier
					}

					set_temp_variable = { temp_value = token:STG_KRMLK_test_3 }
					KRMLK_find_index = yes

					set_variable = { KRMLK_advisor_slot_cooldown^out_index = temp_idea_cooldown }
				}
				else = {
					add_to_array = { KRMLK_advisors_cooldown_tracker = temp_idea_cooldown }
					if = {
						limit = {
							has_variable = added_index
						}
						set_variable = { KRMLK_advisors_cooldown_tracker^added_index = temp_idea_cooldown}
					}
				}
			}
			on_remove = {
				remove_dynamic_modifier = {
					modifier = STG_KRMLK_test_3_dynamic_modifier
				}
				clear_variable = KRMLK_test_3_stability_factor
			}
			modifier = {
				hidden_modifier = {
					
				}
				industrial_capacity_factory = 0.1
				production_speed_buildings_factor = 0.05
			}
		}
		STG_KRMLK_test_reset_guy = {
			on_add = {
				set_temp_variable = { temp_idea_cooldown = 20 }
				if = {
					limit = {
						is_in_array = { KRMLK_active_advisors = token:STG_KRMLK_test_reset_guy }
					}
					set_temp_variable = { temp_tick_days = 5 }
					set_temp_variable = { temp_id = token:STG_KRMLK_test_reset_guy }
					KRMLK_set_tick = yes

					set_temp_variable = { temp_value = token:STG_KRMLK_test_reset_guy }
					KRMLK_find_index = yes

					set_variable = { KRMLK_advisor_slot_cooldown^out_index = temp_idea_cooldown }
				}
				else = {
					add_to_array = { KRMLK_advisors_cooldown_tracker = temp_idea_cooldown }
					if = {
						limit = {
							has_variable = added_index
						}
						set_variable = { KRMLK_advisors_cooldown_tracker^added_index = temp_idea_cooldown}
					}
				}
			}
			on_remove = {
				
			}
			modifier = {
				hidden_modifier = {
					
				}
			}
		}
	}

	# Backend stuff
	hidden_ideas = {
		STG_KRMLK_no_advisor = {}
	}
}