
#losing and gaining cities
EQS_CITY_HOLDING_level_up = {

	if = {
		limit = { has_idea = EQS_city_holding9 }
		swap_ideas = {
			remove_idea = EQS_city_holding9
			add_idea = EQS_city_holding10
		}
	}
	if = {
		limit = { has_idea = EQS_city_holding8 }
		swap_ideas = {
			remove_idea = EQS_city_holding8
			add_idea = EQS_city_holding9
		}
	}	
	if = {
		limit = { has_idea = EQS_city_holding7 }
		swap_ideas = {
			remove_idea = EQS_city_holding7
			add_idea = EQS_city_holding8
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding6}
		swap_ideas = {
			remove_idea = EQS_city_holding6
			add_idea = EQS_city_holding7
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding5 }
		swap_ideas = {
			remove_idea = EQS_city_holding5
			add_idea = EQS_city_holding6
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding4 }
		swap_ideas = {
			remove_idea = EQS_city_holding4
			add_idea = EQS_city_holding5
		}		
	}
	else_if = {
		limit = { has_idea = EQS_city_holding3 }
		swap_ideas = {
			remove_idea = EQS_city_holding3
			add_idea = EQS_city_holding4
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding2 }
		swap_ideas = {
			remove_idea = EQS_city_holding2
			add_idea = EQS_city_holding3
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding1 }
		swap_ideas = {
			remove_idea = EQS_city_holding1
			add_idea = EQS_city_holding2
		}
	}
}

# Like the level up effect except it runs in reverse
EQS_CITY_HOLDING_level_down = {
	if = {
		limit = { has_idea = EQS_city_holding2 }
		swap_ideas = {
			remove_idea = EQS_city_holding2
			add_idea = EQS_city_holding1
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding3 }
		swap_ideas = {
			remove_idea = EQS_city_holding3
			add_idea = EQS_city_holding2
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding4 }
		swap_ideas = {
			remove_idea = EQS_city_holding4
			add_idea = EQS_city_holding3
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding5 }
		swap_ideas = {
			remove_idea = EQS_city_holding5
			add_idea = EQS_city_holding4
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding6 }
		swap_ideas = {
			remove_idea = EQS_city_holding6
			add_idea = EQS_city_holding5
		}		
	}
	else_if = {
		limit = { has_idea = EQS_city_holding7 }
		swap_ideas = {
			remove_idea = EQS_city_holding7
			add_idea = EQS_city_holding6
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding8 }
		swap_ideas = {
			remove_idea = EQS_city_holding8
			add_idea = EQS_city_holding7
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding9 }
		swap_ideas = {
			remove_idea = EQS_city_holding9
			add_idea = EQS_city_holding8
		}
	}
	else_if = {
		limit = { has_idea = EQS_city_holding10 }
		swap_ideas = {
			remove_idea = EQS_city_holding10
			add_idea = EQS_city_holding9
		}
	}			
}



EQS_weekly_change_sanity = {
	add_to_variable = { EQS_celestia_sanity = modifier@EQS_celestia_weekly_sanity }
	clamp_variable = { var = EQS_celestia_sanity min = 0 max = 100 }
}

EQS_load_region_state_arrays = {

	clear_array = EQS_south_west_states
	add_to_array = { EQS_south_west_states = 66 }
	add_to_array = { EQS_south_west_states = 119 }
	add_to_array = { EQS_south_west_states = 114 }
	add_to_array = { EQS_south_west_states = 123 }
	add_to_array = { EQS_south_west_states = 121 }
	add_to_array = { EQS_south_west_states = 22 }
	add_to_array = { EQS_south_west_states = 120 }
	add_to_array = { EQS_south_west_states = 23 }
	add_to_array = { EQS_south_west_states = 19 }
	add_to_array = { EQS_south_west_states = 80 }
	add_to_array = { EQS_south_west_states = 93 }
	add_to_array = { EQS_south_west_states = 91 }
	add_to_array = { EQS_south_west_states = 92 }
	add_to_array = { EQS_south_west_states = 78 }
	add_to_array = { EQS_south_west_states = 89 }
	add_to_array = { EQS_south_west_states = 85 }
	add_to_array = { EQS_south_west_states = 117 }
	add_to_array = { EQS_south_west_states = 118 }
	add_to_array = { EQS_south_west_states = 100 }
	add_to_array = { EQS_south_west_states = 38 }
	add_to_array = { EQS_south_west_states = 87 }
	add_to_array = { EQS_south_west_states = 21 }
	add_to_array = { EQS_south_west_states = 94 }
	add_to_array = { EQS_south_west_states = 49 }
	add_to_array = { EQS_south_west_states = 71 }
	add_to_array = { EQS_south_west_states = 51 }
	add_to_array = { EQS_south_west_states = 47 }
	add_to_array = { EQS_south_west_states = 42 }
	add_to_array = { EQS_south_west_states = 20 }
	add_to_array = { EQS_south_west_states = 44 }
	add_to_array = { EQS_south_west_states = 43 }
	
	
	clear_array = EQS_north_west_states
	add_to_array = { EQS_north_west_states = 137 }
	add_to_array = { EQS_north_west_states = 138 }
	add_to_array = { EQS_north_west_states = 136 }
	add_to_array = { EQS_north_west_states = 175 }
	add_to_array = { EQS_north_west_states = 172 }
	add_to_array = { EQS_north_west_states = 173 }
	add_to_array = { EQS_north_west_states = 54 }
	add_to_array = { EQS_north_west_states = 174 }
	add_to_array = { EQS_north_west_states = 131 }
	add_to_array = { EQS_north_west_states = 180 }
	add_to_array = { EQS_north_west_states = 181 }
	add_to_array = { EQS_north_west_states = 171 }
	add_to_array = { EQS_north_west_states = 129 }
	add_to_array = { EQS_north_west_states = 41 }
	add_to_array = { EQS_north_west_states = 96 }
	add_to_array = { EQS_north_west_states = 48 }
	add_to_array = { EQS_north_west_states = 46 }
	add_to_array = { EQS_north_west_states = 59 }
	add_to_array = { EQS_north_west_states = 45 }
	add_to_array = { EQS_north_west_states = 14 }
	add_to_array = { EQS_north_west_states = 73 }
	add_to_array = { EQS_north_west_states = 169 }
	add_to_array = { EQS_north_west_states = 170 }
	add_to_array = { EQS_north_west_states = 126 }
	add_to_array = { EQS_north_west_states = 124 }
	add_to_array = { EQS_north_west_states = 125 }
	add_to_array = { EQS_north_west_states = 18 }
	add_to_array = { EQS_north_west_states = 60 }
	add_to_array = { EQS_north_west_states = 72 }
	add_to_array = { EQS_north_west_states = 61 }
	add_to_array = { EQS_north_west_states = 132 }
	add_to_array = { EQS_north_west_states = 127 }
	add_to_array = { EQS_north_west_states = 130 }
	add_to_array = { EQS_north_west_states = 133 }
	
	clear_array = EQS_north_east_states
	add_to_array = { EQS_north_east_states = 241 }
	add_to_array = { EQS_north_east_states = 678 }
	add_to_array = { EQS_north_east_states = 240 }
	add_to_array = { EQS_north_east_states = 57 }
	add_to_array = { EQS_north_east_states = 165 }
	add_to_array = { EQS_north_east_states = 334 }
	add_to_array = { EQS_north_east_states = 153 }
	add_to_array = { EQS_north_east_states = 234 }
	add_to_array = { EQS_north_east_states = 332 }
	add_to_array = { EQS_north_east_states = 233 }
	add_to_array = { EQS_north_east_states = 166 }
	add_to_array = { EQS_north_east_states = 67 }
	add_to_array = { EQS_north_east_states = 155 }
	add_to_array = { EQS_north_east_states = 102 }
	add_to_array = { EQS_north_east_states = 223 }
	add_to_array = { EQS_north_east_states = 12 }
	add_to_array = { EQS_north_east_states = 185 }
	add_to_array = { EQS_north_east_states = 187 }
	add_to_array = { EQS_north_east_states = 75 }
	add_to_array = { EQS_north_east_states = 184 }
	add_to_array = { EQS_north_east_states = 232 }
	add_to_array = { EQS_north_east_states = 227 }
	add_to_array = { EQS_north_east_states = 230 }
	add_to_array = { EQS_north_east_states = 231 }
	add_to_array = { EQS_north_east_states = 228 }
	add_to_array = { EQS_north_east_states = 525 }
	add_to_array = { EQS_north_east_states = 235 }
	add_to_array = { EQS_north_east_states = 333 }
	add_to_array = { EQS_north_east_states = 225 }
	add_to_array = { EQS_north_east_states = 168 }
	add_to_array = { EQS_north_east_states = 161 }
	add_to_array = { EQS_north_east_states = 163 }
	add_to_array = { EQS_north_east_states = 237 }
	add_to_array = { EQS_north_east_states = 164 }
	add_to_array = { EQS_north_east_states = 156 }
	add_to_array = { EQS_north_east_states = 154 }
	add_to_array = { EQS_north_east_states = 157 }
	add_to_array = { EQS_north_east_states = 160 }
	add_to_array = { EQS_north_east_states = 158 }
	add_to_array = { EQS_north_east_states = 162 }
	add_to_array = { EQS_north_east_states = 159 }
	add_to_array = { EQS_north_east_states = 228 }
	add_to_array = { EQS_north_east_states = 167 }
	add_to_array = { EQS_north_east_states = 653 }
	add_to_array = { EQS_north_east_states = 326 }
	add_to_array = { EQS_north_east_states = 229 }
	add_to_array = { EQS_north_east_states = 662 }
	add_to_array = { EQS_north_east_states = 661 }
	add_to_array = { EQS_north_east_states = 226 }
	add_to_array = { EQS_north_east_states = 349 }
	add_to_array = { EQS_north_east_states = 188 }
	add_to_array = { EQS_north_east_states = 110 }
	add_to_array = { EQS_north_east_states = 108 }
	
	clear_array = EQS_south_east_states
	add_to_array = { EQS_south_east_states = 28 }
	add_to_array = { EQS_south_east_states = 27 }
	add_to_array = { EQS_south_east_states = 84 }
	add_to_array = { EQS_south_east_states = 112 }
	add_to_array = { EQS_south_east_states = 63 }
	add_to_array = { EQS_south_east_states = 122 }
	add_to_array = { EQS_south_east_states = 113 }
	add_to_array = { EQS_south_east_states = 35 }
	add_to_array = { EQS_south_east_states = 81 }
	add_to_array = { EQS_south_east_states = 50 }
	add_to_array = { EQS_south_east_states = 15 }
	add_to_array = { EQS_south_east_states = 34 }
	add_to_array = { EQS_south_east_states = 33 }
	add_to_array = { EQS_south_east_states = 351 }
	add_to_array = { EQS_south_east_states = 221 }
	add_to_array = { EQS_south_east_states = 52 }
	add_to_array = { EQS_south_east_states = 79 }
	add_to_array = { EQS_south_east_states = 25 }
	add_to_array = { EQS_south_east_states = 83 }
	add_to_array = { EQS_south_east_states = 24 }
	add_to_array = { EQS_south_east_states = 352 }
	add_to_array = { EQS_south_east_states = 88 }
	add_to_array = { EQS_south_east_states = 31 }
	add_to_array = { EQS_south_east_states = 90 }
	add_to_array = { EQS_south_east_states = 82 }
	add_to_array = { EQS_south_east_states = 37 }
	add_to_array = { EQS_south_east_states = 13 }
	add_to_array = { EQS_south_east_states = 115 }
	add_to_array = { EQS_south_east_states = 17 }
	add_to_array = { EQS_south_east_states = 350 }
	add_to_array = { EQS_south_east_states = 30 }
	add_to_array = { EQS_south_east_states = 16 }
	add_to_array = { EQS_south_east_states = 348 }
	add_to_array = { EQS_south_east_states = 32 }
	add_to_array = { EQS_south_east_states = 86 }
	add_to_array = { EQS_south_east_states = 26 }
	add_to_array = { EQS_south_east_states = 353 }
	add_to_array = { EQS_south_east_states = 36 }
	
	clear_array = EQS_central_states
	add_to_array = { EQS_central_states = 3 }
	add_to_array = { EQS_central_states = 39 }
	add_to_array = { EQS_central_states = 128 }
	add_to_array = { EQS_central_states = 68 }
	add_to_array = { EQS_central_states = 2 }
	add_to_array = { EQS_central_states = 1 }
	add_to_array = { EQS_central_states = 65 }
	add_to_array = { EQS_central_states = 106 }
	add_to_array = { EQS_central_states = 29 }
	add_to_array = { EQS_central_states = 107 }
	add_to_array = { EQS_central_states = 186 }
	add_to_array = { EQS_central_states = 40 }
	add_to_array = { EQS_central_states = 182 }
	add_to_array = { EQS_central_states = 177 }
	add_to_array = { EQS_central_states = 183 }
	add_to_array = { EQS_central_states = 56 }
	add_to_array = { EQS_central_states = 134 }
	add_to_array = { EQS_central_states = 70 }
	add_to_array = { EQS_central_states = 178 }
	add_to_array = { EQS_central_states = 179 }
	add_to_array = { EQS_central_states = 105 }
	add_to_array = { EQS_central_states = 103 }
	add_to_array = { EQS_central_states = 135 }
	add_to_array = { EQS_central_states = 176 }
	add_to_array = { EQS_central_states = 74 }
	add_to_array = { EQS_central_states = 104 }
	add_to_array = { EQS_central_states = 109 }
	add_to_array = { EQS_central_states = 99 }
	add_to_array = { EQS_central_states = 95 }
	add_to_array = { EQS_central_states = 101 }
	add_to_array = { EQS_central_states = 97 }
	add_to_array = { EQS_central_states = 5 }
	add_to_array = { EQS_central_states = 327 }
	add_to_array = { EQS_central_states = 111 }
	add_to_array = { EQS_central_states = 116 }
	
}

### Temp variable: tmp_cel_sanity_ch

EQS_change_sanity_level = {
	add_to_variable = { EQS_celestia_sanity = tmp_cel_sanity_ch tooltip = EQS_adjust_celestia_sanity_value }
}

EQS_initiate_om_vars = {
	set_variable = { EQS_om_doctrine_cost_var = 0.75 }
	set_variable = { EQS_om_experience_gain_var = -0.25 }
	set_variable = { EQS_om_org_var = -0.15 }
	set_variable = { EQS_om_attack_var = -0.15 }
	set_variable = { EQS_om_leader_cost_var = 1 }
}

EQS_initiate_hs_vars = {
	set_variable = { EQS_hs_stab_ws_var = -0.15 }
	set_variable = { EQS_hs_consgood_var = 0.25 }
	set_variable = { EQS_hs_pp_gain_var = -0.25 }
	set_variable = { EQS_hs_resspeed_var = -0.25 }
	set_variable = { EQS_celestia_weekly_sanity = -0.25 }	
}

EQS_initiate_rm_vars = {
	set_variable = { EQS_rm_cons_goods_var = -0.15 }
	set_variable = { EQS_rm_conversion_cost_var = -0.25 }
	set_variable = { EQS_rm_ind_capacity_var = 0.15 }
	set_variable = { EQS_rm_efficiency_gain_var = 0.15 }
	set_variable = { EQS_rm_efficiency_max_var = 0.15 }
	set_variable = { EQS_rm_resource_lack_var = 0.05 }
	set_variable = { EQS_rm_line_change_var = -0.05 }
	set_variable = { production_speed_buildings_factor = -0.15 }
}

EQS_check_resource_storage = {
	clamp_variable = { var = EQS_steel_storage min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_tungsten_storage min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_chromium_storage min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_aluminium_storage min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_rubber_storage min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_aluminium_oil min = 0 max = EQS_max_resource_storage }
	clamp_variable = { var = EQS_crystals_storage min = 0 max = EQS_max_resource_storage }
}

EQS_remove_civil_war_ideas = {
	remove_ideas = eqs_civil_war
	hidden_effect = {
		remove_ideas = SOL_civil_war
		remove_ideas = communist_civil_war
		if = {
			limit = {
				EQS_princess_celestia = {
					is_country_leader = yes
					NOT = {
						OR = {
							has_trait = stout_defender
							has_character_flag = EQS_celestia_is_db
						}
					}
				}
			}
			EQS = {
				add_country_leader_trait = stout_defender
			}
		}
	}
}

EQS_create_new_commanders = {
	set_country_flag = EQS_create_new_commanders_flag
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Tempest_Wind_created }
		}

		custom_effect_tooltip = tempest_wind_stats_tp
		set_global_flag = EQS_Tempest_Wind_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Selenite_created }
		}

		custom_effect_tooltip = selenite_stats_tp
		set_global_flag = EQS_Selenite_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Bipen_created }
		}

		custom_effect_tooltip = bipen_stats_tp
		set_global_flag = EQS_Bipen_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Midnight_Oil_created }
		}

		custom_effect_tooltip = midnight_oil_stats_tp
		set_global_flag = EQS_Midnight_Oil_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Oligarch_created }
		}

		custom_effect_tooltip = oli_equites_stats_tp
		set_global_flag = EQS_Oligarch_created
	}
}

EQS_SOL_remove_ideas = {
	remove_ideas = {
		EQS_stagnation_of_harmony
        EQS_stagnation_of_harmony_B_1
        EQS_stagnation_of_harmony_B_2
        EQS_friendship_magic
        EQS_thestral_divide
        EQS_thestral_divide_2
        EQS_thestral_divide_3
        EQS_thestral_divide_4
        EQS_thestral_economy_integration
        EQS_thestral_neighua_negotiations
        EQS_pony_friendship_campaign
        EQS_thestral_friendship_campaign
        EQS_full_thestral_integration
        EQS_political_disorder
        EQS_political_disorder_2
        EQS_thestral_military_integration
        EQS_thestral_auxiliaries
        EQS_friendship_warfare
        EQS_civilwar_industry_bonus
        EQS_civilwar_industry_bonus_temp
        EQS_civilwar_conscription_bonus
        EQS_civilwar_conscription_bonus_temp
        EQS_civilwar_combat_bonus
        EQS_civilwar_combat_bonus_temp
        EQS_equestria_fractured
        EQS_equestria_fractured_2
        EQS_equestria_fractured_3
        EQS_equestria_fractured_4
        EQS_equestrian_reconstruction_effort
        EQS_reorg_administration
        EQS_LSP_administrative_integration
        EQS_ROC_socialist_overtures
        EQS_civwar_low_defeatism
        EQS_civwar_med_defeatism
        EQS_civwar_high_defeatism
        EQS_innovating_industry
        EQS_equestrian_production
        EQS_education_reform_1
        EQS_education_reform_2
        EQS_education_reform_3
        EQS_education_reform_4
        EQS_streamlined_bureaucracy_1
        EQS_streamlined_bureaucracy_2
        EQS_around_the_clock_nation
        EQS_representative_overhaul 
        EQS_absolute_order
        EQS_crystal_economic_integration
        EQS_thestral_internment
        EQS_SMILE
        EQS_SMILE_nonlar
        EQS_SMILE_nonlar
        eqs_equestrian_arts
        cry_friendship_school
        yak_friendship_school
        eqs_equestrian_testing
        eqs_canterlot_stands
        eqs_war_norun
        eqs_war_song
        eqs_canterlot_falls
        EQS_studied_BUG_units
        EQS_city_holding10
        EQS_city_holding9
        EQS_city_holding8
        EQS_city_holding7
        EQS_city_holding6
        EQS_city_holding5
        EQS_city_holding4
        EQS_city_holding3
        EQS_city_holding2
        EQS_city_holding1
        eqs_equestrian_rations
        eqs_religious_rights_act
        eqs_labourreform
        eqs_Investment_Campaign
        EQS_SMILE_industry_attacks
        eqs_SMILE_assassin
        EQS_CHN_shun_bug
        EQS_army_guard
        EQS_magicalprototype
        EQS_army_artillery
        EQS_army_armour
        EQS_payment
        EQS_payment2
        EQS_payment3
        eqs_merc_payments
        eqs_merc_payments2
        eqs_merc_payments3
        EQS_rationingplan
        eqs_equestrian_KIR_treaty
        eqs_equestrian_KIR_treaty1
        EQS_UPA_military_cooperation
        eqs_equestrian_trade_connections
        eqs_yak_citizens
        eqs_welfare_reform
        equestrian_housing_reform
        EQS_retooling_idea
        EQS_wonderbolt_elites
        EQS_plane_numbers
        EQS_guns_quantity
        EQS_guns_quality
        
        
	}
}

#ROOT is EQS
EQS_SOL_wartime_change = {
	clr_country_flag = manpower_laws_blocked
	clr_country_flag = economic_laws_blocked

	set_global_flag = daybreaker_spawned
	set_country_flag = sol_wartime_change
	#set_cosmetic_tag = EQS_SOL
	#set_faction_name = SOL_faction

	#set_country_flag = SOL_new_generals_flag
	set_party_name = { ideology = democratic long_name = EQS_SOL_anti_solarist_initial name = EQS_SOL_anti_solarist_initial }
	set_party_name = { ideology = fascism long_name = EQS_SOL_solarist_initial name = EQS_SOL_solarist_initial }
	save_global_event_target_as = solar_empire
	clear_global_event_target = equestria
	set_politics = { ruling_party = fascism }
	hidden_effect = {
		EQS_princess_celestia = {
			set_character_name = EQS_SOL_daybreaker
			set_portraits = {
				civilian = {
					large = GFX_DaybreakerPortrait
				}
				army = {
					large = GFX_DaybreakerPortrait
					small = GFX_idea_EQS_SOL_daybreaker
				}
			}
			remove_country_leader_role = {
                ideology = alicornrule
            }
			add_country_leader_role = {
				promote_leader = yes

				country_leader = {
					expire = "1965.1.1"
					desc = "POLITICS_DAYBREAKER_DESC"
					ideology = nazism
					traits = { }
				}
			}
			set_character_flag = EQS_celestia_is_db
		}
        #Starlight Glimmer is default leader temporarily
        EQS_starlight_glimmer = {
            add_country_leader_role = {
                promote_leader = yes

                country_leader = {
                    expire = "1965.1.1"
                    desc = "POLITICS_STARLIGHTGLIMMER_DESC"
                    ideology = socialism
                    traits = { }
                }
            }
        }
        
		add_opinion_modifier = {
			target = BAT
			modifier = mortal_enemies
		}
		reverse_add_opinion_modifier = {
			target = BAT
			modifier = mortal_enemies
		}
	}

	SOL = {
		#set_politics = { ruling_party = democratic }
		save_global_event_target_as = equestria
	}
 
	if = {
		limit = { 
            has_character = EQS_princess_luna
        }
        # This doesnt happen just yet
		# EQS_princess_luna = {
			# remove_unit_leader_role = yes
			# if = {
				# limit = {
					# is_high_command = yes
				# }
				# remove_advisor_role = {
					# slot = high_command
				# }
			# }
			# if = {
				# limit = {
					# is_army_chief = yes
				# }
				# remove_advisor_role = {
					# slot = army_chief
				# }
			# }
			# #using a flag doesnt seem to work
			# set_character_flag = EQS_luna_leader_disabled 
			# promote_character = alicornrule
		# }
		set_country_flag = EQS_had_luna
	}
    else_if = {
		limit = { has_war_with = NLR }
		every_other_country = {
			limit = {
				OR = {
					is_subject_of = ROOT
					AND = { is_in_faction_with = ROOT is_subject = no }
				}
			}
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = yes }
			}
			country_event = { id = solarempire.14 hours = 1 }
		}
	}
	# if = {
		# limit = { EQS_NLR_tempest_wind = { is_unit_leader = yes } }
		# EQS_NLR_tempest_wind = { set_nationality = SOL }
	# }
	# if = {
		# limit = { EQS_NLR_bipen = { is_unit_leader = yes } }
		# EQS_NLR_bipen = { set_nationality = SOL }
	# }
	# if = {
		# limit = { EQS_NLR_midnight_oil = { is_unit_leader = yes } }
		# EQS_NLR_midnight_oil = { set_nationality = SOL }
	# }
	every_country = {
		limit = { original_tag = CRY is_subject_of = EQS }
		set_country_flag = is_sol_puppet
	}
	#country_event = { id = solarempire.17 days = 4 }
	
	#else = {
	#	set_province_name = { id = 6023 name = EQS_SOL_invicta_vp }
	#}
	#if = {
	#	limit = { surrender_progress > 0.4 }
	#	set_country_flag = remove_db_70_days
	#}
	EQS_SOL_remove_ideas = yes
    load_focus_tree = { 
        tree = EQS_solar_empire
        keep_completed = yes		   
    }
	country_event = { id = solarempire.1018 }
	if = {
		limit = { country_exists = CES }
		CES = {
			country_event = {
				id = daring.20
			}
		}
		#CES = { load_focus_tree = celestial_state_civil_war_focus }
	}
	#if = {
	#	limit = {
	#		BUF = {
	#			is_ai = yes
	#			is_subject_of = ROOT
	#		}
	#	}
	#	annex_country = {
	#		target = BUF transfer_troops = yes
	#	}
	#}
	#EQS_SOL_show_advisors = yes
	if = {
        limit = {
            EQS_princess_celestia = {
                is_field_marshal = no
            }
        }
        add_field_marshal_role = {
            character = EQS_princess_celestia
            traits = { supernova pony_race_trait }
            skill = 7
            legacy_id = 1337
            attack_skill = 7
            defense_skill = 5
            planning_skill = 5
            logistics_skill = 5
        }
       # custom_effect_tooltip = daybreaker_stats_tp
    }
    else = {
        EQS_princess_celestia = {
            add_unit_leader_trait = supernova
        }
    }
    set_division_template_lock = {
        division_template = "Royal Guards"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Royal Armor"
        is_locked = yes
    }
    if = {
        limit = {
            has_country_flag = EQS_HIP_elements_sent
        }
        clr_country_flag = EQS_HIP_elements_sent
        HIP = {
            country_event = hippogriff_abyss_resistance.20
        }
    }
    country_event = { id = solarempire.1 hours = 1 }
    country_event = { id = solarempire.2 days = 1 }
}

#THIS IS DEPRECATED BUT KEPT FOR FUTURE REFERENCE
#ROOT is EQS
EQS_SOL_civil_war = {
	set_global_flag = daybreaker_spawned
	set_global_flag = equestrian_civil_war_daybreaker
	clr_country_flag = manpower_laws_blocked
	clr_country_flag = economic_laws_blocked
	every_country = {
		limit = { exists = yes is_guaranteed_by = EQS }
		EQS = { diplomatic_relation = { country = PREV relation = guarantee active = no } }
	}
	every_other_country = {
		limit = {
			OR = {
				is_subject_of = ROOT
				AND = { is_in_faction_with = ROOT is_subject = no }
			}
		}
		if = {
			limit = { is_subject = yes is_ai = no }
			set_rule = { can_decline_call_to_war = yes }
		}
		country_event = { id = solarempire.6 hours = 1 }
	}
	set_cosmetic_tag = EQS_SOL
	set_temp_variable = { var = civil_war_size value = 1 }
	subtract_from_temp_variable = { var = civil_war_size value = party_popularity@fascism }
	set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
	divide_temp_variable = { var = civil_war_size value = 2.5 }
	add_to_temp_variable = { var = civil_war_size value = 0.04 }
	start_civil_war = {
		ruling_party = fascism
		ideology = democratic
		size = civil_war_size
		capital = 75
	}
	set_politics = { ruling_party = fascism }
	if = {
		limit = { is_faction_leader = no }
		create_faction = "SOL_faction"
	}
	else = {
		set_faction_name = SOL_faction
	}
	save_global_event_target_as = solar_empire
	clear_global_event_target = equestria
	add_ideas = SOL_civil_war
	add_ideas = SOL_harmonic_resistance_idea
	add_stability = -0.1
	country_event = { id = solarempire.1018 }
	#country_event = { id = solarempire.17 days = 4 }
	news_event = { id = news.sol.1 hours = 6 }
	random_other_country = {
		limit = {
			original_tag = EQS
			has_government = democratic
		}
		save_global_event_target_as = equestria
		#load_focus_tree = { tree = equestria_focus keep_completed = yes }
		set_capital = { state = 75 remember_old_capital = no }
		add_political_power = 450
		set_party_name = { ideology = fascism long_name = EQS_fascism_generic_party_long name = EQS_fascism_generic_party }
		add_stability = -0.3
		set_cosmetic_tag = EQS_DEM
		if = {
			limit = {
				ROOT = { has_country_flag = luna_alive }
			}
			clr_country_flag = luna_alive
			every_possible_country = {
				limit = {
					has_character = EQS_princess_luna
				}
				EQS_princess_luna = {
					set_nationality = PREV.PREV
				}
			}
			EQS_princess_luna = {
				promote_character = alicornrule
			}
			set_country_flag = EQD_dem_luna
			add_stability = -0.1
			remove_ideas = alicorn_sisters
			ROOT = {
				add_stability = -0.1
			}
		}
		else = {
			set_country_flag = EQS_force_republic
			complete_national_focus = eqs_come_to_compromise
			complete_national_focus = eqs_allow_the_vote
			set_country_flag = congress_president
			set_cosmetic_tag = EQS_DEM1
			set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
			country_event = { hours = 24 id = equestriadem.1 }
			remove_ideas = alicorn_sisters
		}
		add_ideas = SOL_civil_war
		set_country_flag = { flag = celestia_evil_meter value = 0 }
		every_character = {
			limit = {
				OR = {
					is_character = EQS_princess_celestia
					is_character = EQS_prince_blueblood
					is_character = EQS_august_fon_eisenstadt
					is_character = EQS_SOL_comet_trail
				}
			}
			set_nationality = event_target:solar_empire
		}
	}
	every_character = {
		limit = {
			OR = {
				is_character = EQS_applejack
				is_character = EQS_sergeant_reckless
				is_character = EQS_big_macintosh
				# is_character = 8
				is_character = EQS_pinkie_pie
				is_character = EQS_caltrop_decay
				is_character = EQS_braeburn
				is_character = EQS_NLR_tempest_wind
				is_character = EQS_NLR_midnight_oil
				is_character = EQS_oli_equites
				is_character = EQS_NLR_bipen
			}
		}
		set_nationality = event_target:equestria
	}
	hidden_effect = {
		EQS_princess_celestia = {
			set_character_name = EQS_SOL_daybreaker
			set_portraits = {
				civilian = {
					large = GFX_DaybreakerPortrait
				}
				army = {
					large = GFX_DaybreakerPortrait
                    small = GFX_idea_EQS_SOL_daybreaker
				}
			}

			add_country_leader_role = {
				promote_leader = yes

				country_leader = {
					expire = "1965.1.1"
					desc = "POLITICS_DAYBREAKER_DESC"
					ideology = nazism
					traits = { }
					id = -1
				}
			}

			set_character_flag = EQS_celestia_is_db
		}
		add_opinion_modifier = {
			target = BAT
			modifier = mortal_enemies
		}
		reverse_add_opinion_modifier = {
			target = BAT
			modifier = mortal_enemies
		}
	}
	EQS_SOL_remove_ideas = yes
	if = {
		limit = { country_exists = CES }
		CES = {
			country_event = {
				id = daring.20
			}
		}
		
		#CES = { load_focus_tree = celestial_state_civil_war_focus }
	}
	#EQS_SOL_show_advisors = yes
}

#ROOT is EQS
EQS_NLR_civil_war = {
	set_global_flag = equestrian_civil_war
	news_event = { hours = 6 id = equestria_news.3 }
	country_event = { id = equestria_civwar.1 days = 10 }
	STG = {
		country_event = { id = stalliongrad.5 days = 2 }
	}
	every_other_country = {
		limit = { exists = yes is_guaranteed_by = ROOT }
		ROOT = { diplomatic_relation = { country = PREV relation = guarantee active = no } }
	}
	every_other_country = {
		limit = {
			OR = {
				is_subject_of = ROOT
				AND = { is_in_faction_with = ROOT is_subject = no }
			}
			NOT = {
				original_tag = NLR
			}
		}
		if = {
			limit = { is_subject = yes is_ai = no }
			set_rule = { can_decline_call_to_war = yes }
		}
		country_event = { id = solarempire.5 hours = 1 }
	}
	every_possible_country = {
		limit = {
			has_character = EQS_princess_luna
		}
		EQS_princess_luna = {
			retire = yes
		}
	}
	set_stability = 0.6
	add_popularity = {
		ideology = fascism
		popularity = 0.1
	}
	add_popularity = {
		ideology = communism
		popularity = 0.1
	}
	every_state = {
		limit = {
			OR = {
				region = 33
				state = 221
				region = 32
				state = 83
				region = 35
				region = 34
				region = 43
				state = 120
				state = 122
				state = 111
				state = 97
				region = 57
				state = 1
				state = 5
				region = 44
				region = 42
				region = 45
				region = 62
				state = 182
				state = 177
				state = 183
				region = 69
				region = 46
				state = 661
				state = 662
				state = 653
				state = 229
				state = 167
				state = 67
			}
		}
		add_core_of = NLR
	}

	every_state = {
		limit = {
			NOT = { is_core_of = NLR }
			OR = {
				is_core_of = EQS
				is_claimed_by = EQS
			}
		}
		add_claim_by = NLR
	}

	every_owned_state = {
		limit = {
			is_controlled_by = PREV
			OR = {
				region = 33
				state = 221
				region = 32
				state = 83
				region = 35
				region = 34
				region = 43
				state = 120
				state = 122
				state = 111
				state = 97
				region = 57
				state = 1
				state = 5
				region = 44
				region = 42
				region = 45
				region = 62
				state = 182
				state = 177
				state = 183
				region = 69
				region = 46
				state = 661
				state = 662
				state = 653
				state = 229
				state = 167
				state = 67
			}
		}
		NLR = { transfer_state = PREV }
	}
	add_ideas = EQS_civil_war
	40 = {
		add_building_construction = {
			type = air_base
			level = 1
			instant_build = yes
		}
	}
	every_state = {
		limit = { is_controlled_by = NLR }
		teleport_armies = {
			limit = { tag = EQS }
		}	
	}
	EQS = {
		transfer_ship = {
    		type = battleship
    		target = NLR
		}
		transfer_ship = {
    		type = battleship
    		target = NLR
		}
		transfer_ship = {
    		type = battle_cruiser
    		target = NLR
		}
		transfer_ship = {
    		type = battle_cruiser
    		target = NLR
		}
		transfer_ship = {
    		type = light_cruiser
    		target = NLR
		}
		transfer_ship = {
   			type = destroyer
   	 		target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
			type = destroyer
			target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
			type = destroyer
			target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		transfer_ship = {
   			type = destroyer
   	 		target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		add_equipment_to_stockpile = {
			type = train_equipment_1
			amount = -50
		}
	}


	EQS = {
		if = {
			limit = {
				check_variable = { NMM_partisans = 3 }
			}
			add_timed_idea = { idea = EQS_moonshine_partisans_3 days = 180 }
		}
		else_if = {
			limit = {
				check_variable = { NMM_partisans = 2 }
			}
		    add_timed_idea = { idea = EQS_moonshine_partisans_2 days = 180 }
		}
		else_if = {
			limit = {
				check_variable = { NMM_partisans = 1 }
			}
			add_timed_idea = { idea = EQS_moonshine_partisans_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = EQS_moonshine_partisans_0 days = 180 }
		}
	}
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_infiltrated_urban_centers
			}
		}
		EQS = {
			add_timed_idea = {
				idea = BAT_infiltrate_urban_centers_idea
				days = 180
			}
		}
    }
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_academia_infiltration
			}
		}
		EQS = {
			add_timed_idea = {
			    idea = BAT_academic_infiltration_idea
				days = 180
			}
		}
	}
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_terror_bombs
			}
		}
		EQS = {
			add_ideas = BAT_terror_bombing_idea
		}
	}
	load_oob = "EQS_Civil_War"
	EQS = {
		set_global_flag = EQS_Bipen_created
		EQS_NLR_bipen = { set_nationality =  NLR }
		set_global_flag = EQS_Selenite_created
		EQS_NLR_celenite = { set_nationality = NLR }
		set_global_flag = EQS_Tempest_Wind_created
		EQS_NLR_tempest_wind = { set_nationality = NLR }
		set_global_flag = EQS_Midnight_Oil_created
		EQS_NLR_midnight_oil = { set_nationality = NLR }
	}
	NLR = {
		if = {
			limit = { is_ai = yes }
			Evil_unicorn_magic = yes
		}
		if = {
			limit = {
				NOT = {
					has_game_rule = {
						rule = equestria_united_status
						option = EQS_STATUS_CIVIL_WAR
					}
				}
			}
			country_event = { id = lunas.2 days = 7 }#days to hours applied
		}
		country_event = equestria_debug.1
		country_event = { id = equestria_civwar.1 days = 10 } #rarity captured
		set_stability = 0.7
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
		load_oob = "NLR_Civil_War"
		if = {
			limit = { has_dlc = "By Blood Alone" }
			load_oob = "NLR_Civil_War_air_bba"
		}
		else = {
			load_oob = "NLR_Civil_War_air_legacy"
		}
		add_ideas = eqs_civil_war
		if = {
			limit = { country_exists = EQS }
			hidden_effect = {
				create_wargoal = {
					type = civil_war
					target = EQS
				}
			}
			declare_war_on = {
				target = EQS type = civil_war
			}
			add_civil_war_target = EQS
		}
		add_ideas = NLR_fragile_rule_1
		### Moonshine national spirits ###
		country_event = { id = lunas.1 days = 1 }
		if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_0 days = 180 }
		}
		if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_workers_0 days = 180 }
		}
		if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_bats_0 days = 180 }
		}
		create_faction = NLR_lunar_hegemony
		if = {
		    limit = {
			   	BAT = {
				    has_country_flag = BAT_supplies
				}
			}
			NLR = {
				add_ideas = BAT_focus_on_supplies_idea
			}
		}
		if = {
		    limit = {
			    BAT = {
				    has_country_flag = BAT_weapons
				}
			}
			NLR = {
				add_ideas = BAT_focus_on_weaponry_idea
			}
		}
		if = {
		   	limit = {
		    	BAT = {
			    	has_country_flag = BAT_send_resources
				}
			}
			NLR = {
				add_offsite_building = {
		           	type = arms_factory
		           	level = 3
				}
			}
		}
		if = {
	    	limit = {
		   	    BAT = {
			    	has_country_flag = BAT_sent_officers
				}
			}
			NLR = {
				every_unit_leader = {
			       	add_logistics = 1
				   	add_planning = 1
                   	add_defense = 1
				   	add_attack = 1
			    }
			}
		}
	}
	BAT = {
		country_event = {
			id = bat.15
		}
	}
	set_variable = { EQS_celestia_DB_meter = 3 }
}

add_to_war_EQS_against_SOL = {
	#SOL is EQS
	event_target:equestria = {
		ROOT = {
			add_to_war = { targeted_alliance = PREV enemy = EQS }
		}
	}
}

add_to_war_SOL_against_EQS = {
	#SOL is EQS
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = PREV targeted_alliance = EQS }
		}
	}
}

add_to_war_EQS_against_NLR = {
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = NLR targeted_alliance = PREV }
		}
	}
}

add_to_war_NLR_against_EQS = {
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = PREV targeted_alliance = NLR }
		}
	}
}

spawn_GRF_volunteers = {
	if = {
		limit = { NOT = { has_country_flag = has_GRF_volunteers } }
		division_template = {
			name = "Free Griffon Division"
			is_locked = yes
			priority = 0
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
			}
		}
		if = {
			limit = {
				capital_scope = {
					is_fully_controlled_by = PREV
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
		else_if = {
			limit = {
				any_owned_state = {
					is_fully_controlled_by = PREV
					is_coastal = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_coastal = yes
				}
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
		else = {
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
				}
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
	}
	set_country_flag = has_GRF_volunteers
}
EQS_add_glostor_gladiator_template = {
	create_equipment_variant = {
		name = "Gloster Gladiator"
		type = small_plane_airframe_0
		design_team = mio:EQS_wonderbolt_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			engine_type_slot = engine_1_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_early_fighter_medium"
	}
}
EQS_add_glostor_sea_gladiator_template = {
	create_equipment_variant = {
		name = "Gloster Sea Gladiator"
		type = cv_small_plane_airframe_0
		design_team = mio:EQS_ultramarine_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			engine_type_slot = engine_1_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_early_fighter_medium"
	}
}
EQS_add_hawker_hurricane_template = {
	create_equipment_variant = {
		name = "Hawker Hurricane"
		type = small_plane_airframe_1
		design_team = mio:EQS_wonderbolt_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter1_medium"
	}
}
EQS_add_hawker_sea_hurricane_template = {
	create_equipment_variant = {
		name = "Hawker Sea Hurricane"
		type = cv_small_plane_airframe_1
		design_team = mio:EQS_ultramarine_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter1_medium"
	}
}
EQS_add_blackburn_skua_template = {
	create_equipment_variant = {
		name = "Blackburn Skua"
		type = cv_small_plane_cas_airframe_1
		design_team = mio:EQS_stratus_organization
		modules = {
			fixed_main_weapon_slot = bomb_locks
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = dive_brakes_small
			special_type_slot_2 = fuel_tanks_small
		}
		icon = "GFX_ENG_CAS1_medium"
	}
}
EQS_add_supermarine_spitfire_template = {
	create_equipment_variant = {
		name = "Supermarine Spitfire"
		type = small_plane_airframe_2
		design_team = mio:EQS_wonderbolt_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter2_medium"
	}
}
EQS_add_supermarine_seafire_template = {
	create_equipment_variant = {
		name = "Supermarine Seafire"
		type = cv_small_plane_airframe_2
		design_team = mio:EQS_ultramarine_organization
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter2_medium"
	}
}
EQS_add_hawker_typhoon_template = {
	create_equipment_variant = {
		name = "Hawker Typhoon"
		type = small_plane_cas_airframe_2
		design_team = mio:EQS_stratus_organization
		modules = {
			fixed_main_weapon_slot = rocket_rails
			fixed_auxiliary_weapon_slot_1 = bomb_locks
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_CAS2_medium"
	}
}
EQS_add_hawker_tempest_template = {
	create_equipment_variant = {
		name = "Hawker Tempest"
		type = small_plane_cas_airframe_3
		design_team = mio:EQS_stratus_organization
		modules = {
			fixed_main_weapon_slot = rocket_rails
			fixed_auxiliary_weapon_slot_1 = bomb_locks
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_CAS3_medium"
	}
}
EQS_add_supermarine_spiteful_template = {
	create_equipment_variant = {
		name = "Supermarine Spiteful"
		type = small_plane_airframe_3
		design_team = mio:EQS_wonderbolt_organization
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = rocket_rails
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter3_medium"
	}
}
EQS_add_gloster_meteor_template = {
	create_equipment_variant = {
		name = "Gloster Meteor"
		type = small_plane_airframe_4
		design_team = mio:EQS_wonderbolt_organization
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = rocket_rails
			engine_type_slot = jet_engine_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_jet_plane_1_medium"
	}
}
EQS_add_hawker_sea_fury_template = {
	create_equipment_variant = {
		name = "Hawker Sea Fury"
		type = cv_small_plane_airframe_4
		design_team = mio:EQS_ultramarine_organization
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = bomb_locks
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter3_medium"
	}
}
EQS_SOL_strengthen_resistance_a_little = {
    custom_effect_tooltip = SOL_resistance_increase_smol_tt
    hidden_effect = {
        add_to_variable = { SOL_resistance_size = 5 }
        subtract_from_variable = { SOL_res_small_var = 0.005 }
        subtract_from_variable = { SOL_res_big_var = 0.025 }
    }
}
