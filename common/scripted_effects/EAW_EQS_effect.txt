EQS_remove_civil_war_ideas = {
	remove_ideas = eqs_civil_war
	hidden_effect = {
		remove_ideas = SOL_civil_war
		remove_ideas = communist_civil_war
		if = {
			limit = {
				EQS_princess_celestia = {
					is_country_leader = yes
					NOT = {
						OR = {
							has_trait = stout_defender
							has_character_flag = EQS_celestia_is_db
						}
					}
				}
			}
			EQS = {
				add_country_leader_trait = stout_defender
			}
		}
	}
}

EQS_create_new_commanders = {
	set_country_flag = EQS_create_new_commanders_flag

	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Tempest_Wind_created }
		}
		
		custom_effect_tooltip = tempest_wind_stats_tp
		set_global_flag = EQS_Tempest_Wind_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Selenite_created }
		}
		
		custom_effect_tooltip = selenite_stats_tp
		set_global_flag = EQS_Selenite_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Bipen_created }
		}
		
		custom_effect_tooltip = bipen_stats_tp
		set_global_flag = EQS_Bipen_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Midnight_Oil_created }
		}
		
		custom_effect_tooltip = midnight_oil_stats_tp
		set_global_flag = EQS_Midnight_Oil_created
	}
	if = {
		limit = {
			has_global_flag = equestria_diarchy_formed
			NOT = { has_global_flag = EQS_Oligarch_created }
		}
		
		custom_effect_tooltip = oli_equites_stats_tp
		set_global_flag = EQS_Oligarch_created
	}
}

EQS_SOL_remove_ideas = {
	remove_ideas = {
		EQS_harmonic_stagnation
        EQS_harmonic_stagnation_2
        EQS_harmonic_stagnation_3
        EQS_friendship_magic
        EQS_outdated_military
        EQS_outdated_military_2
        EQS_thestral_divide
        EQS_thestral_divide_2
        EQS_thestral_divide_3
        EQS_thestral_divide_4
        EQS_thestral_economy_integration
        EQS_thestral_neighua_negotiations
        EQS_pony_friendship_campaign
        EQS_thestral_friendship_campaign
        EQS_full_thestral_integration
        EQS_political_disorder
        EQS_political_disorder_2
        EQS_thestral_military_integration
        EQS_thestral_auxiliaries
        EQS_friendship_warfare
        EQS_civilwar_industry_bonus
        EQS_civilwar_industry_bonus_temp
        EQS_civilwar_conscription_bonus
        EQS_civilwar_conscription_bonus_temp
        EQS_civilwar_combat_bonus
        EQS_civilwar_combat_bonus_temp
        EQS_equestria_fractured
        EQS_equestria_fractured_2
        EQS_equestria_fractured_3
        EQS_equestria_fractured_4
        EQS_equestrian_reconstruction_effort
        EQS_reorg_administration
        EQS_LSP_administrative_integration
        EQS_ROC_socialist_overtures
        EQS_civwar_low_defeatism
        EQS_civwar_med_defeatism
        EQS_civwar_high_defeatism
        EQS_innovating_industry
        EQS_equestrian_production
        EQS_education_reform_1
        EQS_education_reform_2
        EQS_education_reform_3
        EQS_education_reform_4
        EQS_streamlined_bureaucracy_1
        EQS_streamlined_bureaucracy_2
        EQS_around_the_clock_nation
        EQS_representative_overhaul 
	}
}

#ROOT is EQS
EQS_SOL_wartime_change = {
	clr_country_flag = manpower_laws_blocked
	clr_country_flag = economic_laws_blocked

	set_global_flag = daybreaker_spawned
	set_country_flag = sol_wartime_change
	#set_cosmetic_tag = EQS_SOL
	#set_faction_name = SOL_faction

	#set_country_flag = SOL_new_generals_flag
	set_party_name = { ideology = democratic long_name = EQS_SOL_anti_solarist_initial name = EQS_SOL_anti_solarist_initial }
	set_party_name = { ideology = fascism long_name = EQS_SOL_solarist_initial name = EQS_SOL_solarist_initial }
	save_global_event_target_as = solar_empire
	clear_global_event_target = equestria
	set_politics = { ruling_party = fascism }
	hidden_effect = {
		EQS_princess_celestia = { 
			set_character_name = EQS_SOL_daybreaker
			set_portraits = {
				civilian = {
					large = GFX_DaybreakerPortrait
				}
				army = {
					large = GFX_DaybreakerPortrait
					small = GFX_idea_EQS_SOL_daybreaker
				}
			}
			remove_country_leader_role = {
                ideology = alicornrule
            }
			add_country_leader_role = {
				promote_leader = yes

				country_leader = {
					expire = "1965.1.1"
					desc = "POLITICS_DAYBREAKER_DESC"
					ideology = nazism
					traits = { }
					id = -1
				}
			}
			set_character_flag = EQS_celestia_is_db
		}
	}
	
	SOL = {
		set_politics = { ruling_party = democratic }
		save_global_event_target_as = equestria
	}
 
	if = {
		limit = { 
            has_character = EQS_princess_luna
        }
        # This doesnt happen just yet
		# EQS_princess_luna = {
			# remove_unit_leader_role = yes
			# if = {
				# limit = {
					# is_high_command = yes
				# }
				# remove_advisor_role = {
					# slot = high_command
				# }
			# }
			# if = {
				# limit = {
					# is_army_chief = yes
				# }
				# remove_advisor_role = {
					# slot = army_chief
				# }
			# }
			# #using a flag doesnt seem to work
			# set_character_flag = EQS_luna_leader_disabled 
			# promote_character = alicornrule
		# }
		set_country_flag = EQS_had_luna
	}
    else_if = {
		limit = { has_war_with = NLR }
		every_other_country = {
			limit = {
				OR = {
					is_subject_of = ROOT
					AND = { is_in_faction_with = ROOT is_subject = no }
				}
			}
			if = {
				limit = { is_subject = yes is_ai = no }
				set_rule = { can_decline_call_to_war = yes }
			}
			country_event = { id = solarempire.14 hours = 1 }
		}
	}
	# if = {
		# limit = { EQS_NLR_tempest_wind = { is_unit_leader = yes } }
		# EQS_NLR_tempest_wind = { set_nationality = SOL }
	# }
	# if = {
		# limit = { EQS_NLR_bipen = { is_unit_leader = yes } }
		# EQS_NLR_bipen = { set_nationality = SOL }
	# }
	# if = {
		# limit = { EQS_NLR_midnight_oil = { is_unit_leader = yes } }
		# EQS_NLR_midnight_oil = { set_nationality = SOL }
	# }
	every_country = {
		limit = { original_tag = CRY is_subject_of = EQS }
		set_country_flag = is_sol_puppet
	}
	#country_event = { id = solarempire.17 days = 4 }
	
	#else = {
	#	set_province_name = { id = 6023 name = EQS_SOL_invicta_vp }
	#}
	#if = {
	#	limit = { surrender_progress > 0.4 }
	#	set_country_flag = remove_db_70_days
	#}
	EQS_SOL_remove_ideas = yes
    load_focus_tree = { 
        tree = EQS_solar_empire
        keep_completed = yes		   
    }
	country_event = { id = solarempire.1018 }
	if = {
		limit = { country_exists = CES }
		CES = { load_focus_tree = Celestial_State_Focus_db }
	}
	#if = {
	#	limit = {
	#		BUF = {
	#			is_ai = yes
	#			is_subject_of = ROOT
	#		}
	#	}
	#	annex_country = {
	#		target = BUF transfer_troops = yes
	#	}
	#}
	#EQS_SOL_show_advisors = yes
	if = {
        limit = {
            EQS_princess_celestia = {
                is_field_marshal = no
            }
        }
        add_field_marshal_role = {
            character = EQS_princess_celestia
            traits = { supernova pony_race_trait }
            skill = 7
            legacy_id = 1337
            attack_skill = 7
            defense_skill = 5
            planning_skill = 5
            logistics_skill = 5
        }
       # custom_effect_tooltip = daybreaker_stats_tp
    }
    else = {
        EQS_princess_celestia = {
            add_unit_leader_trait = supernova
        }
    }
    country_event = { id = solarempire.1 hours = 1 }
    country_event = { id = solarempire.2 days = 1 }
}

#THIS IS DEPRECATED BUT KEPT FOR FUTURE REFERENCE
#ROOT is EQS
EQS_SOL_civil_war = {
	set_global_flag = daybreaker_spawned
	set_global_flag = equestrian_civil_war_daybreaker
	clr_country_flag = manpower_laws_blocked
	clr_country_flag = economic_laws_blocked
	every_country = {
		limit = { exists = yes is_guaranteed_by = EQS }
		EQS = { diplomatic_relation = { country = PREV relation = guarantee active = no } }
	}
	every_other_country = {
		limit = {
			OR = {
				is_subject_of = ROOT
				AND = { is_in_faction_with = ROOT is_subject = no }
			}
		}
		if = {
			limit = { is_subject = yes is_ai = no }
			set_rule = { can_decline_call_to_war = yes }
		}
		country_event = { id = solarempire.6 hours = 1 }
	}
	set_cosmetic_tag = EQS_SOL
	set_temp_variable = { var = civil_war_size value = 1 }
	subtract_from_temp_variable = { var = civil_war_size value = party_popularity@fascism }
	set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
	divide_temp_variable = { var = civil_war_size value = 2.5 }
	add_to_temp_variable = { var = civil_war_size value = 0.04 }
	start_civil_war = {
		ruling_party = fascism
		ideology = democratic
		size = civil_war_size
		capital = 75
	}
	set_politics = { ruling_party = fascism }
	if = {
		limit = { is_faction_leader = no }
		create_faction = "SOL_faction"
	}
	else = {
		set_faction_name = SOL_faction
	}
	save_global_event_target_as = solar_empire
	clear_global_event_target = equestria
	add_ideas = SOL_civil_war
	add_ideas = SOL_harmonic_resistance_idea
	add_stability = -0.1
	country_event = { id = solarempire.1018 }
	#country_event = { id = solarempire.17 days = 4 }
	news_event = { id = news.sol.1 hours = 6 }
	random_other_country = {
		limit = {
			original_tag = EQS
			has_government = democratic
		}
		save_global_event_target_as = equestria
		#load_focus_tree = { tree = equestria_focus keep_completed = yes }
		set_capital = { state = 75 remember_old_capital = no }
		add_political_power = 450
		set_party_name = { ideology = fascism long_name = EQS_fascism_generic_party_long name = EQS_fascism_generic_party }
		add_stability = -0.3
		set_cosmetic_tag = EQS_DEM
		if = {
			limit = {
				ROOT = { has_country_flag = luna_alive }
			}
			clr_country_flag = luna_alive
			every_possible_country = {
				limit = {
					has_character = EQS_princess_luna
				}
				EQS_princess_luna = {
					set_nationality = PREV.PREV 
				}
			}
			EQS_princess_luna = {
				promote_character = alicornrule
			}
			set_country_flag = EQD_dem_luna
			add_stability = -0.1
			remove_ideas = alicorn_sisters
			ROOT = {
				add_stability = -0.1
			}
		}
		else = {
			set_country_flag = EQS_force_republic
			complete_national_focus = eqs_come_to_compromise
			complete_national_focus = eqs_allow_the_vote
			set_country_flag = congress_president
			set_cosmetic_tag = EQS_DEM1
			set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
			country_event = { hours = 24 id = equestriadem.1 }
			remove_ideas = alicorn_sisters
		}
		add_ideas = SOL_civil_war
		set_country_flag = { flag = celestia_evil_meter value = 0 }
		every_character = {
			limit = {
				OR = {
					is_character = EQS_princess_celestia
					is_character = EQS_prince_blueblood
					is_character = EQS_august_fon_eisenstadt
					is_character = EQS_SOL_comet_trail
				}
			}
			set_nationality = event_target:solar_empire
		}
	}
	every_character = {
		limit = {
			OR = {
				is_character = EQS_applejack
				is_character = EQS_sergeant_reckless
				is_character = EQS_big_macintosh
				# is_character = 8
				is_character = EQS_pinkie_pie
				is_character = EQS_caltrop_decay
				is_character = EQS_braeburn
				is_character = EQS_NLR_tempest_wind
				is_character = EQS_NLR_midnight_oil
				is_character = EQS_oli_equites
				is_character = EQS_NLR_bipen
			}
		}
		set_nationality = event_target:equestria
	}
	hidden_effect = {
		EQS_princess_celestia = { 
			set_character_name = EQS_SOL_daybreaker
			set_portraits = {
				civilian = {
					large = "gfx/leaders/SOL/Daybreaker.tga"
				}
				army = {
					large = "gfx/leaders/SOL/Daybreaker.tga"
				}
			}

			add_country_leader_role = {
				promote_leader = yes

				country_leader = {
					expire = "1965.1.1"
					desc = "POLITICS_DAYBREAKER_DESC"
					ideology = nazism
					traits = { }
					id = -1
				}
			}

			set_character_flag = EQS_celestia_is_db
		}
	}
	EQS_SOL_remove_ideas = yes
	if = {
		limit = { country_exists = CES }
		CES = { load_focus_tree = Celestial_State_Focus_db }
	}
	#EQS_SOL_show_advisors = yes
}

#ROOT is EQS
EQS_NLR_civil_war = {
	set_global_flag = equestrian_civil_war
	news_event = { hours = 6 id = equestria_news.3 }
	country_event = { id = equestria_civwar.1 days = 10 }
	STG = {
		country_event = { id = stalliongrad.5 days = 2 }
	}
	every_other_country = {
		limit = { exists = yes is_guaranteed_by = ROOT }
		ROOT = { diplomatic_relation = { country = PREV relation = guarantee active = no } }
	}
	every_other_country = {
		limit = {
			OR = {
				is_subject_of = ROOT
				AND = { is_in_faction_with = ROOT is_subject = no }
			}
			NOT = {
				original_tag = NLR
			}
		}
		if = {
			limit = { is_subject = yes is_ai = no }
			set_rule = { can_decline_call_to_war = yes }
		}
		country_event = { id = solarempire.5 hours = 1 }
	}
	every_possible_country = {
		limit = {
			has_character = EQS_princess_luna
		}
		EQS_princess_luna = {
			retire = yes 
		}
	}
	set_stability = 0.6
	add_popularity = {
		ideology = fascism
		popularity = 0.1
	}
	add_popularity = {
		ideology = communism
		popularity = 0.1
	}
	every_state = {
		limit = {
			OR = {
				region = 33
				state = 221
				region = 32
				state = 83
				region = 35
				region = 34
				region = 43
				state = 120
				state = 122
				state = 111
				state = 97
				region = 57
				state = 1
				state = 5
				region = 44
				region = 42
				region = 45
				region = 62
				state = 182
				state = 177
				state = 183
				region = 69
				region = 46
				state = 661
				state = 662
				state = 653
				state = 229
				state = 167
				state = 67
			}
		}
		add_core_of = NLR
	}

	every_state = {
		limit = {
			NOT = { is_core_of = NLR }
			OR = {
				is_core_of = EQS
				is_claimed_by = EQS
			}
		}
		add_claim_by = NLR
	}

	every_owned_state = {
		limit = {
			is_controlled_by = PREV
			OR = {
				region = 33
				state = 221
				region = 32
				state = 83
				region = 35
				region = 34
				region = 43
				state = 120
				state = 122
				state = 111
				state = 97
				region = 57
				state = 1
				state = 5
				region = 44
				region = 42
				region = 45
				region = 62
				state = 182
				state = 177
				state = 183
				region = 69
				region = 46
				state = 661
				state = 662
				state = 653
				state = 229
				state = 167
				state = 67
			}
		}
		NLR = { transfer_state = PREV }
	}
	add_ideas = EQS_civil_war
	40 = {
		add_building_construction = {
			type = air_base
			level = 1
			instant_build = yes
		}
	}
	every_state = {
		limit = { is_controlled_by = NLR }
		teleport_armies = {
			limit = { tag = EQS }
		}	
	}
	EQS = {
		transfer_ship = {
    		type = battleship
    		target = NLR
		}
		transfer_ship = {
    		type = battleship
    		target = NLR
		}
		transfer_ship = {
    		type = battle_cruiser
    		target = NLR
		}
		transfer_ship = {
    		type = battle_cruiser
    		target = NLR
		}
		transfer_ship = {
    		type = light_cruiser
    		target = NLR
		}
		transfer_ship = {
   			type = destroyer
   	 		target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
			type = destroyer
			target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
			type = destroyer
			target = NLR
		}
		transfer_ship = {
   			type = destroyer
   			target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		transfer_ship = {
   			type = destroyer
   	 		target = NLR
		}
		transfer_ship = {
	    	type = destroyer
	    	target = NLR
		}
		add_equipment_to_stockpile = {
			type = train_equipment_1
			amount = -50
		}
	}	

		
	EQS = {
		if = {
			limit = {
				check_variable = { NMM_partisans = 3 }
			}
			add_timed_idea = { idea = EQS_moonshine_partisans_3 days = 180 }
		}
		else_if = {
			limit = {
				check_variable = { NMM_partisans = 2 }
			}
		    add_timed_idea = { idea = EQS_moonshine_partisans_2 days = 180 }
		}
		else_if = {
			limit = {
				check_variable = { NMM_partisans = 1 }
			}
			add_timed_idea = { idea = EQS_moonshine_partisans_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = EQS_moonshine_partisans_0 days = 180 }
		}
	}
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_infiltrated_urban_centers
			}
		}
		EQS = {
			add_timed_idea = { 
				idea = BAT_infiltrate_urban_centers_idea 
				days = 180 
			}
		}
    }
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_academia_infiltration
			}
		}
		EQS = {
			add_timed_idea = { 
			    idea = BAT_academic_infiltration_idea
				days = 180 
			}
		}
	}
	if = {
		limit = {
			BAT = {
				has_country_flag = BAT_terror_bombs
			}
		}
		EQS = {
			add_ideas = BAT_terror_bombing_idea
		}
	}
	load_oob = "EQS_Civil_War"
	EQS = {
		set_global_flag = EQS_Bipen_created
		EQS_NLR_bipen = { set_nationality =  NLR }
		set_global_flag = EQS_Selenite_created
		EQS_NLR_celenite = { set_nationality = NLR }
		set_global_flag = EQS_Tempest_Wind_created
		EQS_NLR_tempest_wind = { set_nationality = NLR }
		set_global_flag = EQS_Midnight_Oil_created
		EQS_NLR_midnight_oil = { set_nationality = NLR }
	}
	NLR = {
		if = {
			limit = { is_ai = yes }
			Evil_unicorn_magic = yes
		}
		if = {
			limit = {
				NOT = {
					has_game_rule = {
						rule = equestria_united_status
						option = EQS_STATUS_CIVIL_WAR
					}
				}
			}
			country_event = { id = lunas.2 days = 7 }#days to hours applied
		}
		country_event = equestria_debug.1
		country_event = { id = equestria_civwar.1 days = 10 } #rarity captured
		set_stability = 0.7
		add_popularity = {
			ideology = fascism
			popularity = 0.1
		}
		load_oob = "NLR_Civil_War"
		if = {
			limit = { has_dlc = "By Blood Alone" }
			load_oob = "NLR_Civil_War_air_bba"
		}
		else = {
			load_oob = "NLR_Civil_War_air_legacy"
		}
		add_ideas = eqs_civil_war
		if = {
			limit = { country_exists = EQS }
			hidden_effect = {
				create_wargoal = { 
					type = civil_war
					target = EQS
				}
			}
			declare_war_on = {
				target = EQS type = civil_war
			}
		}
		add_ideas = NLR_fragile_rule_1
		### Moonshine national spirits ###
		country_event = { id = lunas.1 days = 1 }
		if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_weaponstealers = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_weaponstealers_0 days = 180 }
		}
		if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_workers = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_workers_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_workers_0 days = 180 }
		}
		if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 3 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_3 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 2 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_2 days = 180 }
		}
		else_if = {
			limit = {
				EQS = { check_variable = { NMM_bats = 1 } }
			}
			add_timed_idea = { idea = NLR_moonshine_bats_1 days = 180 }
		}
		else = {
			add_timed_idea = { idea = NLR_moonshine_bats_0 days = 180 }
		}
		create_faction = NLR_lunar_hegemony
		if = {
		    limit = {
			   	BAT = {
				    has_country_flag = BAT_supplies
				}
			}
			NLR = {
				add_ideas = BAT_focus_on_supplies_idea
			}
		}
		if = {
		    limit = {
			    BAT = {
				    has_country_flag = BAT_weapons
				}
			}
			NLR = {
				add_ideas = BAT_focus_on_weaponry_idea
			}
		}
		if = {
		   	limit = {
		    	BAT = {
			    	has_country_flag = BAT_send_resources
				}
			}
			NLR = {
				add_offsite_building = { 
		           	type = arms_factory 
		           	level = 3 
				}
			}
		}
		if = {
	    	limit = {
		   	    BAT = {
			    	has_country_flag = BAT_sent_officers
				}
			}
			NLR = {
				every_unit_leader = {
			       	add_logistics = 1
				   	add_planning = 1
                   	add_defense = 1
				   	add_attack = 1
			    }
			}
		}
	}
	BAT = {
		country_event = {
			id = bat.15
		}
	}
}

add_to_war_EQS_against_SOL = {
	#SOL is EQS
	event_target:equestria = {
		ROOT = {
			add_to_war = { targeted_alliance = PREV enemy = EQS }
		}
	}
}

add_to_war_SOL_against_EQS = {
	#SOL is EQS
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = PREV targeted_alliance = EQS }
		}
	}
}

add_to_war_EQS_against_NLR = {
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = NLR targeted_alliance = PREV }
		}
	}
}

add_to_war_NLR_against_EQS = {
	event_target:equestria = {
		ROOT = {
			add_to_war = { enemy = PREV targeted_alliance = NLR }
		}
	}
}

spawn_GRF_volunteers = {
	if = {
		limit = { NOT = { has_country_flag = has_GRF_volunteers } }
		division_template = {
			name = "Free Griffon Division"
			is_locked = yes
			priority = 0
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
			}
		}
		if = {
			limit = {
				capital_scope = {
					is_fully_controlled_by = PREV
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
		else_if = {
			limit = {
				any_owned_state = {
					is_fully_controlled_by = PREV
					is_coastal = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_coastal = yes
				}
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
		else = {
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = PREV
				}
				create_unit = {
					division = "name = \"Weter's Own Volunteer Regiment\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Mystic Warriors\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
				create_unit = {
					division = "name = \"Fetermyst Guard\" division_template = \"Free Griffon Division\" start_experience_factor = 0.4 start_equipment_factor = 1"
					owner = PREV
				}
			}
		}
	}
	set_country_flag = has_GRF_volunteers
}
EQS_add_glostor_gladiator_template = {
	create_equipment_variant = {
		name = "Gloster Gladiator" 
		type = small_plane_airframe_0
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			engine_type_slot = engine_1_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_early_fighter_medium"
	}
}
EQS_add_glostor_sea_gladiator_template = {
	create_equipment_variant = {
		name = "Gloster Sea Gladiator" 
		type = cv_small_plane_airframe_0
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			engine_type_slot = engine_1_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_early_fighter_medium"
	}
}
EQS_add_hawker_hurricane_template = {
	create_equipment_variant = {
		name = "Hawker Hurricane" 
		type = small_plane_airframe_1
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter1_medium"
	}
}
EQS_add_hawker_sea_hurricane_template = {
	create_equipment_variant = {
		name = "Hawker Hurricane" 
		type = cv_small_plane_airframe_1
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter1_medium"
	}
}
EQS_add_blackburn_skua_template = {
	create_equipment_variant = {
		name = "Blackburn Skua" 
		type = cv_small_plane_cas_airframe_1
		modules = {
			fixed_main_weapon_slot = bomb_locks
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = dive_brakes_small
			special_type_slot_2 = fuel_tanks_small
		}
		icon = "GFX_ENG_CAS1_medium"
	}
}
EQS_add_supermarine_spitfire_template = {
	create_equipment_variant = {
		name = "Supermarine Spitfire" 
		type = small_plane_airframe_2
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter2_medium"
	}
}
EQS_add_supermarine_seafire_template = {
	create_equipment_variant = {
		name = "Supermarine Seafire" 
		type = cv_small_plane_airframe_2
		modules = {
			fixed_main_weapon_slot = light_mg_4x
			fixed_auxiliary_weapon_slot_1 = light_mg_4x
			engine_type_slot = engine_2_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter2_medium"
	}
}
EQS_add_hawker_typhoon_template = {
	create_equipment_variant = {
		name = "Hawker Typhoon"
		type = small_plane_cas_airframe_2
		modules = {
			fixed_main_weapon_slot = rocket_rails
			fixed_auxiliary_weapon_slot_1 = bomb_locks
			fixed_auxiliary_weapon_slot_2 = aircraft_cannon_1_2x
			engine_type_slot = engine_3_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_CAS2_medium"
	}
}
EQS_add_hawker_tempest_template = {
	create_equipment_variant = {
		name = "Hawker Tempest"
		type = small_plane_cas_airframe_3
		modules = {
			fixed_main_weapon_slot = bomb_locks
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = aircraft_cannon_2_2x
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_CAS3_medium"
	}
}
EQS_add_supermarine_spiteful_template = {
	create_equipment_variant = {
		name = "Supermarine Spiteful"
		type = small_plane_airframe_3
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = rocket_rails
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter3_medium"
	}
}
EQS_add_gloster_meteor_template = {
	create_equipment_variant = {
		name = "Gloster Meteor"
		type = small_plane_airframe_4
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = rocket_rails
			engine_type_slot = jet_engine_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_jet_plane_1_medium"
	}
}
EQS_add_hawker_sea_fury_template = {
	create_equipment_variant = {
		name = "Hawker Sea Fury"
		type = cv_small_plane_airframe_4
		modules = {
			fixed_main_weapon_slot = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
			fixed_auxiliary_weapon_slot_2 = bomb_locks
			engine_type_slot = engine_4_1x
			special_type_slot_1 = empty
		}
		icon = "GFX_ENG_fighter3_medium"
	}
}