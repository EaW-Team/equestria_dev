### CIVIL WAR M& GUI EFFECTS
	FLY_photos_starting_location = {
		clear_array = FLY_applejack_position_x
		clear_array = FLY_applejack_position_y
		clear_array = FLY_fluttershy_position_x
		clear_array = FLY_fluttershy_position_y
		clear_array = FLY_rarity_position_x
		clear_array = FLY_rarity_position_y
		clear_array = FLY_pinkie_position_x
		clear_array = FLY_pinkie_position_y
		clear_array = FLY_rainbow_position_x
		clear_array = FLY_rainbow_position_y
		clear_array = FLY_twilight_position_x
		clear_array = FLY_twilight_position_y

		add_to_array = { FLY_applejack_position_x = -55 } # Starting position
		add_to_array = { FLY_applejack_position_y = -40 }
		add_to_array = { FLY_applejack_position_x = -130 } # Position 1 - around west
		add_to_array = { FLY_applejack_position_y = -25 }
		add_to_array = { FLY_applejack_position_x = -165 } # Position 2 - with her cousins around Vanhoover
		add_to_array = { FLY_applejack_position_y = -90 }

		add_to_array = { FLY_fluttershy_position_x = 40 } # Starting position
		add_to_array = { FLY_fluttershy_position_y = 55 }
		add_to_array = { FLY_fluttershy_position_x = 90 } # Position 1 - arrived to Filly
		add_to_array = { FLY_fluttershy_position_y = 30 }

		add_to_array = { FLY_pinkie_position_x = -50 } # Starting position
		add_to_array = { FLY_pinkie_position_y = 42 }
		add_to_array = { FLY_pinkie_position_x = -80 } # Position 1 - around west
		add_to_array = { FLY_pinkie_position_y = 25 }
		add_to_array = { FLY_pinkie_position_x = -105 } # Position 2 - with her family in Rockville
		add_to_array = { FLY_pinkie_position_y = 75 }

		add_to_array = { FLY_rarity_position_x = 153 } # Starting position
		add_to_array = { FLY_rarity_position_y = 2 }
		add_to_array = { FLY_rarity_position_x = 195 } # Position 1 - moved to Albion
		add_to_array = { FLY_rarity_position_y = -50 }

		add_to_array = { FLY_rainbow_position_x = 53 } # Starting position
		add_to_array = { FLY_rainbow_position_y = -10 }
		add_to_array = { FLY_rainbow_position_x = 30 } # Position 1 - in Amethyst Basin
		add_to_array = { FLY_rainbow_position_y = 60 }

		add_to_array = { FLY_twilight_position_x = 0 } # Starting position
		add_to_array = { FLY_twilight_position_y = 0 }
		add_to_array = { FLY_twilight_position_x = -2 } # Position 1 - moved to Whinnyapolis
		add_to_array = { FLY_twilight_position_y = -60 }

		set_variable = { FLY_applejack_position_index = 0 }
		set_variable = { FLY_fluttershy_position_index = 0 }
		set_variable = { FLY_pinkie_position_index = 0 }
		set_variable = { FLY_rarity_position_index = 0 }
		set_variable = { FLY_rainbow_position_index = 0 }
		set_variable = { FLY_twilight_position_index = 0 }

		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_map_start_reset = {
		FLY_photos_starting_location = yes
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	### Applejack is rumoured to be in the west
	FLY_applejack_location_west = {
		set_variable = { FLY_applejack_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	### Applejack is rumoured to be with her cousins the Pears in north-western Equestria, close to Vanhoover
	FLY_applejack_location_pears = {
		set_variable = { FLY_applejack_position_index = 2 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	### Changea portrait frame to one with tick-mark
	FLY_applejack_found = {
		set_variable = {
			FLY_applejack_status = 2
		}
	}

	### Fluttershy has arrived to Fillydelphia
	FLY_flutershy_location_fly = {
		set_variable = { FLY_fluttershy_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_fluttershy_found = {
		set_variable = {
			FLY_fluttershy_status = 2
		}
	}

	### Pinkie is rumoured to be in the west
	FLY_pinkie_location_west = {
		set_variable = { FLY_pinkie_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	### Pinkie  is rumoured to be with her family in Rockville
	FLY_pinkie_location_family = {
		set_variable = { FLY_pinkie_position_index = 2 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_pinkie_found = {
		set_variable = {
			FLY_pinkie_status = 2
		}
	}

	### Rarity is moved north to Albion
	FLY_rarity_location_moved = {
		set_variable = { FLY_rarity_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_rarity_found = {
		set_variable = {
			FLY_rarity_status = 2
		}
	}

	### Rainbow is hiding in Amethyst Basin
	FLY_rainbow_location_rambling_rock_ridge = {
		set_variable = { FLY_rainbow_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_rainbow_found = {
		set_variable = {
			FLY_rainbow_status = 2
		}
	}

	### Twilight is moved to Whinnyapolis
	FLY_twilight_location_moved = {
		set_variable = { FLY_twilight_position_index = 1 }
		add_to_variable = { FLY_m6_map_update_true = 1 }
	}

	FLY_twilight_found = {
		set_variable = {
			FLY_twilight_status = 2
		}
	}

### LEGITIMACY EFFECTS

	FLY_recalculate_legitimacy = {
		hidden_effect = {
			clamp_variable = {
				var = FLY_legitimacy
				min = 0
				max = FLY_legitimacy_max
			}
			set_temp_variable = {
				FLY_legitimacy_temp_var = FLY_legitimacy
			}
			multiply_temp_variable = {
				FLY_legitimacy_temp_var = 0.001
			}
			set_variable = {
				FLY_legitimacy_democratic_drift_var = FLY_legitimacy_temp_var
			}
			set_temp_variable = {
				FLY_legitimacy_temp_var = FLY_legitimacy
			}
			multiply_temp_variable = {
				FLY_legitimacy_temp_var = 0.005
			}
			set_variable = {
				FLY_legitimacy_stability_factor_var = FLY_legitimacy_temp_var
			}
			set_variable = {
				FLY_legitimacy_war_support_factor_var = FLY_legitimacy_temp_var
			}
			set_temp_variable = {
				FLY_legitimacy_temp_var = FLY_legitimacy
			}
			multiply_temp_variable = {
				FLY_legitimacy_temp_var = 0.01
			}
			set_variable = {
				FLY_legitimacy_political_power_gain_var = FLY_legitimacy_temp_var
			}
			force_update_dynamic_modifier = yes
		}
	}

### MILITARY EFFECTS

	FLY_set_starting_civil_defence_force_modifier = {
		#### Setting starting zero value for all modifiers
		hidden_effect = {

		}
		#### Setting starting zero value for all modifiers
		custom_effect_tooltip = FLY_civil_defence_force_modifier_start_tp
		set_variable = {
			FLY_experience_gain_army_var = 0.1
		}
		set_variable = {
			FLY_experience_gain_air_var = 0.1
		}
		set_variable = {
			FLY_experience_gain_navy_var = 0.1
		}
		add_dynamic_modifier = {
			modifier = FLY_civil_defence_force_modifier
		}
		force_update_dynamic_modifier = yes
	}

	### Air tree effects ###

	FLY_civil_defence_force_victorian_desurper = {
		custom_effect_tooltip = FLY_civil_defence_force_victorian_desurper_tp
		set_variable = {
			FLY_ground_attack_factor_var = 0.05
		}
		set_variable = {
			FLY_air_cas_present_factor_var = 0.1
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.15
		}
		force_update_dynamic_modifier = yes
	}

	FLY_civil_defence_force_absoluta_victoria = {
		custom_effect_tooltip = FLY_civil_defence_force_absoluta_victoria_tp
		set_variable = {
			FLY_ground_attack_factor_var = 0.1
		}
		set_variable = {
			FLY_air_cas_present_factor_var = 0.1
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.25
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_gloriosae_volant = {
		custom_effect_tooltip = FLY_civil_defence_force_gloriosae_volant_tp
		set_variable = {
			FLY_ground_attack_factor_var = 0.15
		}
		set_variable = {
			FLY_air_cas_present_factor_var = 0.2
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.25
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_dare_to_fly_attitude = {
		custom_effect_tooltip = FLY_civil_defence_force_dare_to_fly_attitude_tp
		set_variable = {
			FLY_air_agility_factor_var = 0.05
		}
		set_variable = {
			FLY_air_attack_factor_var = 0.1
		}
		set_variable = {
			FLY_air_superiority_detect_factor_var = 0.1
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_air_academy = {
		custom_effect_tooltip = FLY_civil_defence_force_air_academy_tp
		set_variable = {
			FLY_experience_gain_air_var = 0.2
		}
		set_variable = {
			FLY_air_ace_generation_chance_factor_var = 0.1
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_no_recklessness = {
		custom_effect_tooltip = FLY_civil_defence_force_no_recklessness_tp
		set_variable = {
			FLY_air_agility_factor_var = 0.05
		}
		set_variable = {
			FLY_air_defence_factor_var = 0.1
		}
		set_variable = {
			FLY_army_bonus_air_superiority_factor_var = 0.1
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_exitium_desurper = {
		custom_effect_tooltip = FLY_civil_defence_force_exitium_desurper_tp
		set_variable = {
			FLY_air_strategic_bomber_bombing_factor_var = 0.05
		}
		set_variable = {
			FLY_air_range_factor_factor_var = 0.1
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.15
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_ultima_exitium = {
		custom_effect_tooltip = FLY_civil_defence_force_ultima_exitium_tp
		set_variable = {
			FLY_air_strategic_bomber_bombing_factor_var = 0.1
		}
		set_variable = {
			FLY_air_range_factor_factor_var = 0.1
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.25
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_magna_volant = {
		custom_effect_tooltip = FLY_civil_defence_force_magna_volant_tp
		set_variable = {
			FLY_air_range_factor_factor_var = 0.15
		}
		set_variable = {
			FLY_air_strategic_bomber_bombing_factor_var = 0.2
		}
		set_variable = {
			FLY_air_superiority_efficiency_var = 0.25
		}
		force_update_dynamic_modifier = yes
	}

	### Army tree effects ###

	FLY_civil_defence_force_join_the_sps = {
		custom_effect_tooltip = FLY_civil_defence_force_join_the_sps_tp
		set_variable = {
			FLY_land_night_attack_var = 0.1
		}
		set_variable = {
			FLY_recon_factor_var = 0.1
		}
		set_variable = {
			FLY_modifier_army_sub_unit_pegasi_attack_factor_var = 0.05
		}
		set_variable = {
			FLY_modifier_army_sub_unit_pegasi_defence_factor_var = 0.05
		}
		set_variable = {
			FLY_modifier_army_sub_unit_pegasi_speed_factor_var = 0.05
		}
		set_variable = {
			FLY_special_forces_cap_var = 0.15
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_regional_militia_formations = {
		custom_effect_tooltip = FLY_civil_defence_regional_militia_formations_tp
		set_variable = {
			FLY_training_time_factor_var = -0.1
		}
		set_variable = {
			FLY_experience_gain_army_unit_factor_var = 0.15
		}
		set_variable = {
			FLY_resistance_growth_on_our_occupied_states_var = 0.1
		}
		set_variable = {
			FLY_resistance_damage_to_garrison_on_our_occupied_states_var = 0.15
		}
		force_update_dynamic_modifier = yes
	}
	FLY_civil_defence_force_starlight_doctrine = {
		custom_effect_tooltip = FLY_civil_defence_force_starlight_doctrine_tp
		set_variable = {
			FLY_max_command_power_var = 50
		}
		set_variable = {
			FLY_max_planning_factor_var = 0.1
		}
		set_variable = {
			FLY_coordination_bonus_var = 0.05
		}
		set_variable = {
			FLY_army_org_factor_var = 0.1
		}
		force_update_dynamic_modifier = yes
	}

### UTILITY EFFECTS

	FLY_civil_war_occupation_effect = {
		custom_effect_tooltip = FLY_state_category_tp
		if = { ### for Megapolis, Dense Urban Region
			limit = {
				event_target:FLY_liberation_target = {
					OR = {
						has_state_category = megalopolis
						has_state_category = metropolis
						has_state_category = large_city
					}
				}
			}
			event_target:FLY_liberation_target = {
				set_state_flag = FLY_state_captured
				create_unit = {
					division = "name = \"Militia Bridage\" division_template = \"Militia Brigade\" start_experience_factor = 0.01"
					owner = ROOT
					count = 3
					allow_spawning_on_enemy_provs = no
				}
			}
			ROOT = {
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 10
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
		}
		else_if = { ### for Urban/Sparse Urban Region
			limit = {
				event_target:FLY_liberation_target = {
					OR = {
						has_state_category = city
						has_state_category = large_town
					}
				}
			}
			event_target:FLY_liberation_target = {
				set_state_flag = FLY_state_captured
				create_unit = {
					division = "name = \"Militia Bridage\" division_template = \"Militia Brigade\" start_experience_factor = 0.01"
					owner = ROOT
					count = 2
					allow_spawning_on_enemy_provs = no
				}
			}
			ROOT = {
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 5
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
		}
		else_if = { ### for Developed Rural
			limit = {
				event_target:FLY_liberation_target = {
					has_state_category = town
				}
			}
			event_target:FLY_liberation_target = {
				set_state_flag = FLY_state_captured
				create_unit = {
					division = "name = \"Militia Bridage\" division_template = \"Militia Brigade\" start_experience_factor = 0.01"
					owner = ROOT
					count = 1
					allow_spawning_on_enemy_provs = no
				}
			}
			ROOT = {
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 2.5
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
		}
		else_if = { ### for Rural/Pastoral
			limit = {
				event_target:FLY_liberation_target = {
					OR = {
						has_state_category = rural
						has_state_category = pastoral
					}
				}
			}
			event_target:FLY_liberation_target = {
				set_state_flag = FLY_state_captured
				create_unit = {
					division = "name = \"Militia Bridage\" division_template = \"Militia Brigade\" start_experience_factor = 0.01"
					owner = ROOT
					count = 1
					allow_spawning_on_enemy_provs = no
				}
			}
			ROOT = {
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 1.5
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
		}
		else = { ### any other state
			event_target:FLY_liberation_target = {
				set_temp_variable = {
					FLY_local_manpower = state_population_k
				}
			}
			multiply_variable = {
				FLY_local_manpower = 0.1
			}
			multiply_variable = {
				FLY_local_manpower = 1000
			}
			clamp_variable = {
				var = FLY_local_manpower
				min = 0
				max = 25000
			}
			ROOT = {
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 1
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
		}
	}