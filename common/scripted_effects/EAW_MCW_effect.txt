
# Parliament effects

@INITIAL_PCM_DEPUTY_NB = 28
@INITIAL_PTRJ_DEPUTY_NB = 48
@INITIAL_PRA_DEPUTY_NB = 162
@INITIAL_AIO_DEPUTY_NB = 42

# Function    : f_MCW_initialize_parliament
# Description : Activate multiple sanity checks and debug verbose for the parliament interface
# Inputs      : None
# Outputs     : None
f_MCW_initialize_parliament = {
	# TODO: Deactivate once you are sure all the effects that use the parliament framework plays flawlessly :)
	# That will increase performance, until then you will have more log in the console
	f_eaw_parliament_activate_verbose = yes

	# Start the parliament framework
	# Initial deputies :
	# PCM - 28
	# PTRJ - 48
	# PRA - 162
	# AIO - 42
	set_variable = { PCM_index = 0 }
	set_variable = { PTRJ_index = 1 }
	set_variable = { PRA_index = 2 }
	set_variable = { AIO_index = 3 }
	set_variable = { MDM_index = 4 } # Don't exist at the start
	add_to_temp_array = { i_parties_a = @INITIAL_PCM_DEPUTY_NB }
	add_to_temp_array = { i_parties_a = @INITIAL_PTRJ_DEPUTY_NB }
	add_to_temp_array = { i_parties_a = @INITIAL_PRA_DEPUTY_NB }
	add_to_temp_array = { i_parties_a = @INITIAL_AIO_DEPUTY_NB }
	f_eaw_parliament_set_parliament_state = yes
	f_MCW_reload_parliament = yes
}

f_MCW_reload_parliament = {
	set_variable = { temp_color = 0 }
	set_variable = { temp_sum = 0 }
	for_loop_effect = {
		end = 280
		value = t
		if = {
			limit = {
				check_variable = {
					var = t
					value = temp_sum
					compare = greater_than_or_equals
				}
			}
			add_to_variable = {
				temp_sum = generic_parliament_party_a^temp_color
			}
			add_to_variable = {
				temp_color = 1
			}
		}
		set_variable = { MCW_seat_color^t = temp_color }
	}
}

MCW_add_039_template = {
	create_equipment_variant = {
		name = "O. 39F-0"
		type = small_plane_airframe_2
		parent_version = 0
		design_team = mio:MCW_ornithian_air_organization
		modules = {
			fixed_main_weapon_slot = heavy_mg_4x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_1x
			fixed_auxiliary_weapon_slot_2 = empty
			engine_type_slot = engine_3_1x
			special_type_slot_1 = drop_tanks
			special_type_slot_2 = empty
			special_type_slot_3 = empty
		}
		icon = "gfx/interface/equipmentdesigner/planes/designer/lamp_USA/small_1/usa_p_39q.dds"
	}
	create_equipment_variant = {
		name = "O. 39B-1"
		type = small_plane_cas_airframe_2
		parent_version = 0
		design_team = mio:MCW_grande_air_organization
		modules = {
			fixed_main_weapon_slot = bomb_locks
			fixed_auxiliary_weapon_slot_1 = tank_buster_1
			fixed_auxiliary_weapon_slot_2 = rocket_rails
			engine_type_slot = engine_3_1x
			special_type_slot_1 = drop_tanks
			special_type_slot_2 = dive_brakes_small
			special_type_slot_3 = empty
		}
		icon = "gfx/interface/equipmentdesigner/planes/designer/lamp_USA/small_1/usa_p_39f.dds"
	}
}

MCW_add_xfl_template = {
	create_equipment_variant = {
		name = "XFL. 39F-0"
		type = cv_small_plane_airframe_2
		parent_version = 0
		design_team = mio:MCW_ornithian_air_organization
		modules = {
			fixed_main_weapon_slot = heavy_mg_4x
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_1x
			fixed_auxiliary_weapon_slot_2 = empty
			engine_type_slot = engine_3_1x
			special_type_slot_1 = drop_tanks
			special_type_slot_2 = empty
			special_type_slot_3 = empty
		}
		icon = "gfx/interface/equipmentdesigner/planes/designer/lamp_USA/small_1/usa_p_39c.dds"
	}
	create_equipment_variant = {
		name = "XFL. 39B-1"
		type = cv_small_plane_cas_airframe_2
		parent_version = 0
		design_team = mio:MCW_grande_air_organization
		modules = {
			fixed_main_weapon_slot = bomb_locks
			fixed_auxiliary_weapon_slot_1 = tank_buster_1
			fixed_auxiliary_weapon_slot_2 = bomb_locks
			engine_type_slot = engine_3_1x
			special_type_slot_1 = drop_tanks
			special_type_slot_2 = dive_brakes_small
			special_type_slot_3 = empty
		}
		icon = "gfx/interface/equipmentdesigner/planes/designer/lamp_USA/small_1/usa_p_39d.dds"
	}
	create_equipment_variant = {
		name = "XFL. 39T-4"
		type = cv_small_plane_naval_bomber_airframe_2
		parent_version = 0
		design_team = mio:MCW_grande_air_organization
		modules = {
			fixed_main_weapon_slot = torpedo_mounting_2
			fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_1x
			fixed_auxiliary_weapon_slot_2 = heavy_mg_4x
			engine_type_slot = engine_3_1x
			special_type_slot_1 = drop_tanks
			special_type_slot_2 = empty
			special_type_slot_3 = empty
		}
		icon = "gfx/interface/equipmentdesigner/planes/designer/lamp_USA/small_1/usa_p_39d.dds"
	}
}