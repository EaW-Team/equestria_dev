clear_monarchist_spirts = {
    remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_right_of_counsel
	remove_ideas = JRR_hounds_of_angaz_barak
	remove_ideas = JRR_fighting_against_mob_rule
	remove_ideas = JRR_insurgent_army
	remove_ideas = JRR_insurgent_army_2
	remove_ideas = JRR_flower_of_chivalry
	remove_ideas = JRR_flower_of_chivalry_2
	remove_ideas = JRR_feathisian_connection
	clr_country_flag = JRR_monarchist
}
clear_republican_spirits = {
    remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_bulwark_strategy
	remove_ideas = JRR_bulwark_strategy_2
	remove_ideas = JRR_talons_bared
	remove_ideas = JRR_talons_bared_2
	remove_ideas = JRR_craftshounds
	remove_ideas = JRR_talking_with_landlords
	remove_ideas = JRR_not_talking_with_landlords
	remove_ideas = JRR_anti_landlord_action
	remove_ideas = JRR_camaris_route
	remove_ideas = JRR_emergency_grain_depo
	remove_ideas = JRR_shock_troops
	clr_country_flag = JRR_revolutionary
}
bring_to_aquileian_level = {
    remove_ideas = JRR_cottage_gunsmiths
	remove_ideas = JRR_morale_optimisation
	remove_ideas = JRR_the_final_push
	remove_ideas = JRR_legacy_of_serfdom
	remove_ideas = JRR_legacy_of_serfdom_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_right_of_counsel
	remove_ideas = JRR_hounds_of_angaz_barak
	remove_ideas = JRR_fighting_against_mob_rule
	remove_ideas = JRR_insurgent_army
	remove_ideas = JRR_insurgent_army_2
	remove_ideas = JRR_flower_of_chivalry
	remove_ideas = JRR_flower_of_chivalry_2
	remove_ideas = JRR_feathisian_connection
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_bulwark_strategy
	remove_ideas = JRR_bulwark_strategy_2
	remove_ideas = JRR_talons_bared
	remove_ideas = JRR_talons_bared_2
	remove_ideas = JRR_craftshounds
	remove_ideas = JRR_talking_with_landlords
	remove_ideas = JRR_not_talking_with_landlords
	remove_ideas = JRR_anti_landlord_action
	remove_ideas = JRR_camaris_route
	remove_ideas = JRR_emergency_grain_depo
	remove_ideas = JRR_shock_troops
	add_ideas = outdated_industry 
	add_ideas = lack_of_scientists 
	add_ideas = proper_science_base
	every_state = {
		limit = {
		    OR = {
				is_core_of = JEB
				is_core_of = JER
				is_core_of = VIN
				is_core_of = JFT
			}
		}
		add_core_of = ROOT
	}
	set_capital = {
        state = 345 
        remember_old_capital = no
    }
	if = {
	    limit = {
		    has_country_flag = JRR_revolutionary
		}
		clr_country_flag = JRR_revolutionary
	}
	if = {
	    limit = {
		    has_country_flag = JRR_monarchist
		}
		clr_country_flag = JRR_monarchist
	}
	JER = { 
		JRR = {
			transfer_technology = yes 
		} 
	}
}

### Thank you Scars, very cool ###

# Index

# 0 - Coqiste
# 1 - Militarist
# 2 - Cercle

# How to use

# set_temp_variable = { t_change = 10 }
# set_temp_variable = { t_index = 1 }
# JRR_change_directorate_Influence = yes

# This will change Militarist influence by 10, adjusting the others accordingly.

JRR_change_directorate_Influence = {
	set_temp_variable = { v_check = JRR_Directorate_Influence^t_index }
	add_to_temp_variable = { v_check = t_change }

	if = {
		limit = {
			check_variable = { v_check < 0 }
		}
		subtract_from_temp_variable = { t_change = v_check }
	}
	else_if = {
		limit = {
			check_variable = { v_check > 100 }
		}
		set_temp_variable = { n_100 = v_check }
		subtract_from_temp_variable = { n_100 = 100 }
		subtract_from_temp_variable = { t_change = n_100 }
	}
	
	custom_effect_tooltip = JRR_Pol_Influence_CET
	
	if = {
		limit = {
			NOT = {
				check_variable = { t_change = 0 }
			}
		}
		add_to_variable = { JRR_Directorate_Influence^t_index = t_change }
		divide_temp_variable = { t_change = 2 }
		set_temp_variable = { excess = 0 }
		for_each_loop = {
			array = JRR_Directorate_Influence
			if = {
				limit = {
					NOT = {
						check_variable = { i = t_index }
					}
				}
				subtract_from_variable = { JRR_Directorate_Influence^i = t_change }
			}
			if = {
				limit = { check_variable = { JRR_Directorate_Influence^i < 0 } }
				add_to_temp_variable = { excess = JRR_Directorate_Influence^i }
				set_variable = { JRR_Directorate_Influence^i = 0 }
				add_to_temp_array = { zero_value = i }
			}
		}
		for_each_loop = {
			array = JRR_Directorate_Influence
			if = {
				limit = {
					NOT = {
						is_in_array = { array = zero_value value = i }
						check_variable = { i = t_index }
					}
				}
				add_to_variable = { JRR_Directorate_Influence^i = excess }
			}
		}
	}

	# Display pie chart

	set_variable = { militarist_frame = JRR_Directorate_Influence^0 }
	add_to_variable = { militarist_frame = JRR_Directorate_Influence^1 }
}

JRR_modify_fascist_military = {
	custom_effect_tooltip = JRR_modify_fascist_military_main_tp
	add_to_variable = { JRR_conscription_factor_1_var = temp_conscription_factor_1 }
	add_to_variable = { JRR_army_morale_factor_1_var = temp_army_morale_factor_1 }
	add_to_variable = { JRR_org_factor_1_var = temp_org_factor_1 }
	add_to_variable = { JRR_mobilization_speed_1_var = temp_mobilization_speed_1 }
	add_to_variable = { JRR_max_command_power_1_var = temp_max_command_power_1 }
	add_to_variable = { JRR_conscription_1_var = temp_conscription_1 }
	add_to_variable = { JRR_army_speed_factor_1_var = temp_army_speed_factor_1 }
	add_to_variable = { JRR_out_of_supply_factor_1_var = temp_out_of_supply_factor_1 }
	add_to_variable = { JRR_org_loss_when_moving_1_var = temp_org_loss_when_moving_1 }
	add_to_variable = { JRR_army_attack_factor_1_var = temp_army_attack_factor_1 }
	add_to_variable = { JRR_army_defence_factor_1_var = temp_army_defence_factor_1 }
	add_to_variable = { JRR_supply_consumption_factor_1_var = temp_supply_consumption_factor_1 }
	force_update_dynamic_modifier = yes
}

JRR_modify_fascist_politics = {
	custom_effect_tooltip = JRR_modify_fascist_politics_main_tp
	add_to_variable = { JRR_stability_weekly_2_var = temp_stability_weekly_2 }
	add_to_variable = { JRR_war_support_weekly_2_var = temp_war_support_weekly_2 }
	add_to_variable = { JRR_party_popularity_stability_factor_2_var = temp_party_popularity_stability_factor_2 }
	add_to_variable = { JRR_political_power_factor_2_var = temp_political_power_factor_2 }
	add_to_variable = { JRR_neutrality_drift_2_var = temp_neutrality_drift_2 }
	add_to_variable = { JRR_democratic_drift_2_var = temp_democratic_drift_2 }
	add_to_variable = { JRR_communism_drift_2_var = temp_communism_drift_2 }
	add_to_variable = { JRR_Weekly_Coqiste_Influence_2_var = temp_Weekly_Coqiste_Influence_2 }
	add_to_variable = { JRR_Weekly_Militarist_Influence_2_var = temp_Weekly_Militarist_Influence_2 }
	add_to_variable = { JRR_Weekly_Cercle_Influence_2_var = temp_Weekly_Cercle_Influence_2 }
	add_to_variable = { JRR_research_speed_factor_2_var = temp_research_speed_factor_2 }
	add_to_variable = { JRR_war_stability_factor_2_var = temp_war_stability_factor_2 }
	force_update_dynamic_modifier = yes
}

JRR_modify_fascist_economics = {
	custom_effect_tooltip = JRR_modify_fascist_economics_main_tp
	add_to_variable = { JRR_industrial_capacity_3_var = temp_industrial_capacity_3 }
	add_to_variable = { JRR_consumer_goods_factor_3_var = temp_consumer_goods_factor_3 }
	add_to_variable = { JRR_production_speed_buildings_factor_3_var = temp_production_speed_buildings_factor_3 }
	add_to_variable = { JRR_local_resources_factor_3_var = temp_local_resources_factor_3 }
	add_to_variable = { JRR_production_factory_efficiency_gain_factor_3_var = temp_production_factory_efficiency_gain_factor_3 }
	add_to_variable = { JRR_conscription_factor_3_var = temp_conscription_factor_3 }
	add_to_variable = { JRR_monthly_population_3_var = temp_monthly_population_3 }
	add_to_variable = { JRR_global_building_slots_3_var = temp_global_building_slots_3 }
	add_to_variable = { JRR_fuel_gain_factor_3_var = temp_fuel_gain_factor_3 }
	force_update_dynamic_modifier = yes
}