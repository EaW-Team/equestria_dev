RIV_remove_fed_member_ideas = {
	if = {
		limit = { has_idea = RIV_member_state }
		remove_ideas = RIV_member_state
	}
	else_if = {
		limit = { has_idea = RIV_rcsc_member }
		remove_ideas = RIV_rcsc_member
	}
	else_if = {
		limit = { has_idea = RIV_rec_member1 }
		remove_ideas = RIV_rec_member1
	}
	else_if = {
		limit = { has_idea = RIV_rec_member2 }
		remove_ideas = RIV_rec_member2
	}
	else_if = {
		limit = { has_idea = RIV_rec_member3 }
		remove_ideas = RIV_rec_member3
	}
	else_if = {
		limit = { has_idea = RIV_rec_member4 }
		remove_ideas = RIV_rec_member4
	}
	else_if = {
		limit = { has_idea = RIV_river_union_member1 }
		remove_ideas = RIV_river_union_member1
	}
	else_if = {
		limit = { has_idea = RIV_river_union_member2 }
		remove_ideas = RIV_river_union_member2
	}
	if = {
		limit = { has_idea = RIV_rdc }
		remove_ideas = RIV_rdc
	}
	else_if = {
		limit = { has_idea = RIV_rdc2 }
		remove_ideas = RIV_rdc2
	}
	if = {
		limit = { has_idea = RIV_centeral_bank_idea }
		remove_ideas = RIV_centeral_bank_idea
	}
	else_if = {
		limit = { has_idea = RIV_rivbit_idea }
		remove_ideas = RIV_rivbit_idea
	}
	if = {
		limit = { has_idea = RIV_river_army_idea }
		remove_ideas = RIV_river_army_idea
	}
	if = {
		limit = { has_idea = RIV_development_grants_idea }
		remove_ideas = RIV_development_grants_idea
	}
}

RIV_leave_fed = {
	log = "[GetDateText] [Root.GetName] RIV_leave_fed"
    RIV_remove_fed_member_ideas = yes
    RIV_drop_cosmetic_tag = yes
    leave_faction = yes

    every_country = {		
        limit = {
            is_subject_of = ROOT
			is_river_fed_member = yes
        }
		log = "[GetDateText] [This.GetName] RIV_leave_fed as Subject"
        RIV_remove_fed_member_ideas = yes
        RIV_drop_cosmetic_tag = yes
    }
}

RIV_leave_fed_no_ally = {
	log = "[GetDateText] [Root.GetName] RIV_leave_fed_no_ally"
    RIV_remove_fed_member_ideas = yes
    RIV_drop_cosmetic_tag = yes

    every_country = {
        limit = {
            is_subject_of = ROOT
			is_river_fed_member = yes
        }
		log = "[GetDateText] [This.GetName] RIV_leave_fed_no_ally as Subject"
        RIV_remove_fed_member_ideas = yes
        RIV_drop_cosmetic_tag = yes
    }
}

RIV_drop_cosmetic_tag = {
    if = {
        limit = {
            has_cosmetic_tag = RIV_federation_mem
        }
        drop_cosmetic_tag = yes
    }
    else_if = {
        limit = {
            has_cosmetic_tag = LCT_prince_ally
        }
        set_cosmetic_tag = LCT_prince
    }
    else_if = {
        limit = {
            has_cosmetic_tag = LCT_prince_army_ally
        }
        set_cosmetic_tag = LCT_prince_army
    }
}
river_cup_calculate = {
	if = {
		limit = { NOT = { has_variable = global.rc_cup } }
		set_variable = { global.rc_cup = 3 }
	}
	add_to_variable = { global.rc_cup = 1 }
	if = {
		limit = { has_event_target = rc_winner }
		event_target:rc_winner = { save_event_target_as = rc_last_winner }
	}
	#winner
	random_state = {
		limit = {
			is_river_cup_state = yes
		}
		save_global_event_target_as = rc_winner
	}
	#runner up
	random_state = {
		limit = {
			NOT = { state = event_target:rc_winner }
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_runner_up
	}
	#team 3
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner
				state = event_target:rc_runner_up
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_3
	}
	#team 4
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner
				state = event_target:rc_runner_up
				state = event_target:rc_team_3
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_4
	}
	#team 5
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner 
				state = event_target:rc_runner_up
				state = event_target:rc_team_3
				state = event_target:rc_team_4
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_5
	}
	#team 6
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner 
				state = event_target:rc_runner_up
				state = event_target:rc_team_3
				state = event_target:rc_team_4
				state = event_target:rc_team_5
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_6
	}
	#team 7
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner 
				state = event_target:rc_runner_up
				state = event_target:rc_team_3
				state = event_target:rc_team_4
				state = event_target:rc_team_5
				state = event_target:rc_team_6
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_7
	}
	#team 8
	random_state = {
		limit = {
			NOT = { 
				state = event_target:rc_winner 
				state = event_target:rc_runner_up
				state = event_target:rc_team_3
				state = event_target:rc_team_4
				state = event_target:rc_team_5
				state = event_target:rc_team_6
				state = event_target:rc_team_7
			}
			is_river_cup_state = yes
		}		
		save_event_target_as = rc_team_8
	}
	#venue
	random_state = {
		limit = {
			OR = {
				state = 619
				state = 387
				state = 637
				state = 645
				state = 617
				state = 544
				state = 649
				state = 580
				state = 455
				state = 642
				state = 454
				state = 670
				state = 550
			}
			can_be_river_cup_state = yes
		}		
		set_variable = { global.rc_venue = THIS.id}
	}
	#Attendance
	set_variable = { global.rc_attendance = random } #0 to 1
	multiply_variable = { global.rc_attendance = 32 }
	add_to_variable = { global.rc_attendance = 8 }
	round_variable = global.rc_attendance
}

RIV_get_cosmetic_tag = {
	hidden_effect = {
		set_cosmetic_tag = RIV
		if = {
			limit = { check_variable = { annexed_riv_members = 2 } }
			set_cosmetic_tag = RIV_2
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 3 } }
			set_cosmetic_tag = RIV_3
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 4 } }
			set_cosmetic_tag = RIV_4
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 5 } }
			set_cosmetic_tag = RIV_5
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 6 } }
			set_cosmetic_tag = RIV_6
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 7 } }
			set_cosmetic_tag = RIV_7
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 8 } }
			set_cosmetic_tag = RIV_8
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 9 } }
			set_cosmetic_tag = RIV_9
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 10 } }
			set_cosmetic_tag = RIV_10
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 11 } }
			set_cosmetic_tag = RIV_11
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members = 12 } }
			set_cosmetic_tag = RIV_12
		}
		else_if = {
			limit = { check_variable = { annexed_riv_members > 12 } }
			set_cosmetic_tag = RIV_13
		}
	}
}