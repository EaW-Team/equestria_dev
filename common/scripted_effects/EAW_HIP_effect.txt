HIP_increase_divided_society = {
	custom_effect_tooltip = HIP_increase_divided_society_tt
	if = {
		limit = {
			NOT = {
				has_idea = HIP_divided_society_9
			}
		}
		custom_effect_tooltip = HIP_underwater_building_cost_up_tt
		add_to_variable = {
			var = HIP_underwater_building_cost value = 10
		}
	}
	if = {
		limit = {
			has_idea = HIP_divided_society_1
		}
		swap_ideas = { remove_idea = HIP_divided_society_1 add_idea = HIP_divided_society_2 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_2
		}
		swap_ideas = { remove_idea = HIP_divided_society_2 add_idea = HIP_divided_society_3 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_3
		}
		swap_ideas = { remove_idea = HIP_divided_society_3 add_idea = HIP_divided_society_4 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_4
		}
		swap_ideas = { remove_idea = HIP_divided_society_4 add_idea = HIP_divided_society_5 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_5
		}
		swap_ideas = { remove_idea = HIP_divided_society_5 add_idea = HIP_divided_society_6 }
		hidden_effect = {
			HIP_hippogriff_leader = yes
		}
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_6
		}
		swap_ideas = { remove_idea = HIP_divided_society_6 add_idea = HIP_divided_society_7 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_7
		}
		swap_ideas = { remove_idea = HIP_divided_society_7 add_idea = HIP_divided_society_8 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_8
		}
		swap_ideas = { remove_idea = HIP_divided_society_8 add_idea = HIP_divided_society_9 }
	}
}

HIP_decrease_divided_society = {
	custom_effect_tooltip = HIP_decrease_divided_society_tt
	if = {
		limit = {
			NOT = {
				has_idea = HIP_divided_society_1
			}
		}
		custom_effect_tooltip = HIP_underwater_building_cost_down_tt
		add_to_variable = {
			var = HIP_underwater_building_cost value = -10
		}
	}
	if = {
		limit = {
			has_idea = HIP_divided_society_9
		}
		swap_ideas = { remove_idea = HIP_divided_society_9 add_idea = HIP_divided_society_8 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_8
		}
		swap_ideas = { remove_idea = HIP_divided_society_8 add_idea = HIP_divided_society_7 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_7
		}
		swap_ideas = { remove_idea = HIP_divided_society_7 add_idea = HIP_divided_society_6 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_6
		}
		swap_ideas = { remove_idea = HIP_divided_society_6 add_idea = HIP_divided_society_5 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_5
		}
		swap_ideas = { remove_idea = HIP_divided_society_5 add_idea = HIP_divided_society_4 }
		hidden_effect = {
			HIP_seapony_leader = yes
		}
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_4
		}
		swap_ideas = { remove_idea = HIP_divided_society_4 add_idea = HIP_divided_society_3 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_3
		}
		swap_ideas = { remove_idea = HIP_divided_society_3 add_idea = HIP_divided_society_2 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_2
		}
		swap_ideas = { remove_idea = HIP_divided_society_2 add_idea = HIP_divided_society_1 }
	}
}

HIP_seapony_leader = {
	if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
		}
		HIP_queen_novo = {
			set_portraits={
				civilian={
					large="gfx/leaders/HIP/Queen_Novo_Seapony.tga"
				}
			}
		}
	}
}

HIP_hippogriff_leader = {
	if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
		}
		HIP_queen_novo = {
			set_portraits={
				civilian={
					large="gfx/leaders/HIP/Queen_Novo_Hippogriff.tga"
				}
			}
		}
	}
}

HIP_remove_underwater_buildings = {
	custom_effect_tooltip = HIP_remove_underwater_buildings_tt
	add_offsite_building = {
		type = industrial_complex
		level = var:HIP_underwater_civ_remove
	}
	add_offsite_building = {
		type = arms_factory
		level = var:HIP_underwater_mil_remove
	}
	add_offsite_building = {
		type = dockyard
		level = var:HIP_underwater_dockyard_remove
	}
	add_offsite_building = {
		type = synthetic_refinery
		level = var:HIP_underwater_refinery_remove
	}
	add_offsite_building = {
		type = fuel_silo
		level = var:HIP_underwater_fuel_silo_remove
	}
	add_offsite_building = {
		type = nuclear_reactor
		level = var:HIP_underwater_reactor_remove
	}
}

HIP_seapony_breakway = {
	HIP_remove_underwater_buildings = yes
}
HIP_hippogriff_breakway = {
	HIP_remove_underwater_buildings = yes
}
HIP_check_posada_sad = {
	if = {
		limit = {
			has_country_flag = {
				flag = posada_sad_level
				value > 11
			}
		}
		HIP_posada = {
			set_portraits = {
				civilian={
					large="gfx/leaders/HIP/posadasad.tga"
				}
			}
			set_leader_description = HIP_POSADA_SAD_DESC
		HIP = {
			country_event = {
				id = hippocommie.381
				days = 21
			}
		}
		}
	}
}
HIP_SIR_magic_change = {
	add_to_variable = {
		HIP_siren_power = HIP_SIR_magic_change_var
	}
	clamp_variable = {
		var = HIP_siren_power
		min = 0
		max = HIP_siren_power_max
	}
	if = {
		limit = {
			check_variable = {
				HIP_SIR_magic_change_var < 0
			}
		}
		multiply_temp_variable = {
			HIP_SIR_magic_change_var = -1
		}
		custom_effect_tooltip = HIP_SIR_power_decrease_tt
	}
	else = {
		custom_effect_tooltip = HIP_SIR_power_increase_tt
	}
}
HIP_SIR_MAGIC_conscription_down = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 1
			}
		}
		set_temp_variable = { temp_rp_change = -0.01 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 2
			}
		}
		set_temp_variable = { temp_rp_change = -0.015 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 3
			}
		}
		set_temp_variable = { temp_rp_change = -0.03 }
		set_temp_variable = { temp_m_change = 2 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 4
			}
		}
		set_temp_variable = { temp_rp_change = -0.05 }
		set_temp_variable = { temp_m_change = 2 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 5
			}
		}
		set_temp_variable = { temp_rp_change = -0.1 }
		set_temp_variable = { temp_m_change = 5 }
	}
	add_to_variable = { HIP_MAGIC_conscription = temp_rp_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	custom_effect_tooltip = HIP_SIR_MAGIC_conscription_decrease_CET
	subtract_from_variable = { HIP_SIR_MAGIC_conscription_level = 1 }
}
HIP_SIR_MAGIC_conscription_up = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 0
			}
		}
		set_temp_variable = { temp_rp_change = 0.01 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 1
			}
		}
		set_temp_variable = { temp_rp_change = 0.015 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 2
			}
		}
		set_temp_variable = { temp_rp_change = 0.03 }
		set_temp_variable = { temp_m_change = -2 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 3
			}
		}
		set_temp_variable = { temp_rp_change = 0.05 }
		set_temp_variable = { temp_m_change = -2 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_conscription_level = 4
			}
		}
		set_temp_variable = { temp_rp_change = 0.1 }
		set_temp_variable = { temp_m_change = -5 }
	}
	add_to_variable = { HIP_MAGIC_conscription = temp_rp_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	custom_effect_tooltip = HIP_SIR_MAGIC_conscription_increase_CET
	add_to_variable = { HIP_SIR_MAGIC_conscription_level = 1 }
}
HIP_SIR_MAGIC_economy_down = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 1
			}
		}
		set_temp_variable = { temp_cg_change = 0.05 }
		set_temp_variable = { temp_psbf_change = -0.1 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 2
			}
		}
		set_temp_variable = { temp_cg_change = 0.1 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 3
			}
		}
		set_temp_variable = { temp_cg_change = 0.1 }
		set_temp_variable = { temp_psbf_change = -0.1 }
		set_temp_variable = { temp_m_change = 4 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 4
			}
		}
		set_temp_variable = { temp_cg_change = 0.05 }
		set_temp_variable = { temp_psbf_change = -0.15 }
		set_temp_variable = { temp_m_change = 5 }
	}
	add_to_variable = { HIP_MAGIC_consumer_goods_factor = temp_cg_change }
	add_to_variable = { HIP_MAGIC_production_speed_buildings_factor = temp_psbf_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 2
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_economy_decrease_CET1
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_economy_decrease_CET2
	}
	subtract_from_variable = { HIP_SIR_MAGIC_economy_level = 1 }
}
HIP_SIR_MAGIC_economy_up = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 0
			}
		}
		set_temp_variable = { temp_cg_change = -0.05 }
		set_temp_variable = { temp_psbf_change = 0.1 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 1
			}
		}
		set_temp_variable = { temp_cg_change = -0.1 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 2
			}
		}
		set_temp_variable = { temp_cg_change = -0.1 }
		set_temp_variable = { temp_psbf_change = 0.1 }
		set_temp_variable = { temp_m_change = -4 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 3
			}
		}
		set_temp_variable = { temp_cg_change = -0.05 }
		set_temp_variable = { temp_psbf_change = 0.15 }
		set_temp_variable = { temp_m_change = -5 }
	}
	add_to_variable = { HIP_MAGIC_consumer_goods_factor = temp_cg_change }
	add_to_variable = { HIP_MAGIC_production_speed_buildings_factor = temp_psbf_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_economy_level = 1
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_economy_increase_CET1
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_economy_increase_CET2
	}
	add_to_variable = { HIP_SIR_MAGIC_economy_level = 1 }
}
HIP_SIR_MAGIC_production_down = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 1
			}
		}
		set_temp_variable = { temp_pfmef_change = -0.15 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 2
			}
		}
		set_temp_variable = { temp_pfmef_change = -0.05 }
		set_temp_variable = { temp_pfegf_change = -0.05 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 3
			}
		}
		set_temp_variable = { temp_pfmef_change = -0.05 }
		set_temp_variable = { temp_pfegf_change = -0.05 }
		set_temp_variable = { temp_icf_change = -0.05 }
		set_temp_variable = { temp_icd_change = -0.05 }
		set_temp_variable = { temp_m_change = 4 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 4
			}
		}
		set_temp_variable = { temp_pfmef_change = -0.05 }
		set_temp_variable = { temp_pfegf_change = -0.1 }
		set_temp_variable = { temp_icf_change = -0.05 }
		set_temp_variable = { temp_icd_change = -0.05 }
		set_temp_variable = { temp_m_change = 5 }
	}
	add_to_variable = { HIP_MAGIC_production_factory_max_efficiency_factor = temp_pfmef_change }
	add_to_variable = { HIP_MAGIC_production_factory_efficiency_gain_factor = temp_pfegf_change }
	add_to_variable = { HIP_MAGIC_industrial_capacity_factory = temp_icf_change }
	add_to_variable = { HIP_MAGIC_industrial_capacity_dockyard = temp_icd_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 1
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_production_decrease_CET1
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 2
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_production_decrease_CET2
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_production_decrease_CET3
	}
	subtract_from_variable = { HIP_SIR_MAGIC_production_level = 1 }
}
HIP_SIR_MAGIC_production_up = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 0
			}
		}
		set_temp_variable = { temp_pfmef_change = 0.15 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 1
			}
		}
		set_temp_variable = { temp_pfmef_change = 0.05 }
		set_temp_variable = { temp_pfegf_change = 0.05 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HHIP_SIR_MAGIC_production_level = 2
			}
		}
		set_temp_variable = { temp_pfmef_change = 0.05 }
		set_temp_variable = { temp_pfegf_change = 0.05 }
		set_temp_variable = { temp_icf_change = 0.05 }
		set_temp_variable = { temp_icd_change = 0.05 }
		set_temp_variable = { temp_m_change = -4 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 3
			}
		}
		set_temp_variable = { temp_pfmef_change = 0.05 }
		set_temp_variable = { temp_pfegf_change = 0.1 }
		set_temp_variable = { temp_icf_change = 0.05 }
		set_temp_variable = { temp_icd_change = 0.05 }
		set_temp_variable = { temp_m_change = -5 }
	}
	add_to_variable = { HIP_MAGIC_production_factory_max_efficiency_factor = temp_pfmef_change }
	add_to_variable = { HIP_MAGIC_production_factory_efficiency_gain_factor = temp_pfegf_change }
	add_to_variable = { HIP_MAGIC_industrial_capacity_factory = temp_icf_change }
	add_to_variable = { HIP_MAGIC_industrial_capacity_dockyard = temp_icd_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 0
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_production_increase_CET1
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_production_level = 1
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_production_increase_CET2
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_production_increase_CET3
	}
	add_to_variable = { HIP_SIR_MAGIC_production_level = 1 }
}
HIP_SIR_MAGIC_professionalism_down = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 1
			}
		}
		set_temp_variable = { temp_aof_change = -0.15 }
		set_temp_variable = { temp_aaf_change = -0.05 }
		set_temp_variable = { temp_adf_change = -0.05 }
		set_temp_variable = { temp_m_change = 1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 2
			}
		}
		set_temp_variable = { temp_aof_change = -0.05 }
		set_temp_variable = { temp_amf_change = -0.05 }
		set_temp_variable = { temp_m_change = 3 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 3
			}
		}
		set_temp_variable = { temp_aof_change = -0.05 }
		set_temp_variable = { temp_aaf_change = -0.05 }
		set_temp_variable = { temp_adf_change = -0.05 }
		set_temp_variable = { temp_m_change = 7 }
	}
	add_to_variable = { HIP_MAGIC_army_org_factor = temp_aof_change }
	add_to_variable = { HIP_MAGIC_army_morale_factor = temp_amf_change }
	add_to_variable = { HIP_MAGIC_army_attack_factor = temp_aaf_change }
	add_to_variable = { HIP_MAGIC_army_defence_factor = temp_adf_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 2
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_professionalism_decrease_CET1
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_professionalism_decrease_CET2
	}
	subtract_from_variable = { HIP_SIR_MAGIC_professionalism_level = 1 }
}
HIP_SIR_MAGIC_professionalism_up = {
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 0
			}
		}
		set_temp_variable = { temp_aof_change = 0.15 }
		set_temp_variable = { temp_aaf_change = 0.05 }
		set_temp_variable = { temp_adf_change = 0.05 }
		set_temp_variable = { temp_m_change = -1 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 1
			}
		}
		set_temp_variable = { temp_aof_change = 0.05 }
		set_temp_variable = { temp_amf_change = 0.05 }
		set_temp_variable = { temp_m_change = -3 }
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 2
			}
		}
		set_temp_variable = { temp_aof_change = 0.05 }
		set_temp_variable = { temp_aaf_change = 0.05 }
		set_temp_variable = { temp_adf_change = 0.05 }
		set_temp_variable = { temp_m_change = -7 }
	}
	add_to_variable = { HIP_MAGIC_army_org_factor = temp_aof_change }
	add_to_variable = { HIP_MAGIC_army_morale_factor = temp_amf_change }
	add_to_variable = { HIP_MAGIC_army_attack_factor = temp_aaf_change }
	add_to_variable = { HIP_MAGIC_army_defence_factor = temp_adf_change }
	add_to_variable = { HIP_MAGIC_magic_drift = temp_m_change }
	if = {
		limit = {
			check_variable = {
				HIP_SIR_MAGIC_professionalism_level = 1
			}
		}
		custom_effect_tooltip = HIP_SIR_MAGIC_professionalism_increase_CET1
	}
	else = {
		custom_effect_tooltip = HIP_SIR_MAGIC_professionalism_increase_CET2
	}
	add_to_variable = { HIP_SIR_MAGIC_professionalism_level = 1 }
}
HIP_SIR_zumidia_wargoal_effect = {
	set_temp_variable = { HIP_SIR_zumidia_stability_loss = 0 }
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_last_minute_preparations
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_break_them_apart
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_a_shattered_crown
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_our_time_is_now
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 1
			}
		}
		add_stability = -0.05
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 2
			}
		}
		add_stability = -0.1
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 3
			}
		}
		add_stability = -0.15
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 4
			}
		}
		add_stability = -0.2
	}
}