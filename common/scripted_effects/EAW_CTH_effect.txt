CTH_add_1_constitutionalist_strength = {
	custom_effect_tooltip = CTH_add_1_constitutionalist_strength_tt
	add_to_variable = {
		var = CTH_constitutionalist_strength
		value = 1
	}
	CTH_clamp_constitutionalist_strength = yes
}

CTH_take_1_constitutionalist_strength = {
	custom_effect_tooltip = CTH_take_1_constitutionalist_strength_tt
	hidden_effect = {
		add_to_variable = {
			var = CTH_constitutionalist_strength
			value = -1
		}
		CTH_clamp_constitutionalist_strength = yes
	}
}

CTH_clamp_constitutionalist_strength = {
	clamp_variable = {
		var = CTH_constitutionalist_strength
		min = 0
		max = 5
	}
}

CTH_remove_coltvan_unrest_ideas = {
	custom_effect_tooltip = CTH_remove_coltvan_unrest_ideas
	if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_unrest
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_unrest
		}
	}
	else_if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_defiance
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_defiance
		}
	}
	else_if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_rebellion
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_rebellion
		}
	}
}

CTH_set_to_minimal_unrest = {
	custom_effect_tooltip = CTH_set_to_minimal_unrest
	if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_defiance
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_defiance
		}
		add_dynamic_modifier = {
			modifier = coltvan_unrest
		}
	}
	else_if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_rebellion
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_rebellion
		}
		add_dynamic_modifier = {
			modifier = coltvan_unrest
		}
	}
}

CTH_unrest_up = {
	custom_effect_tooltip = CTH_unrest_up
	if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_defiance
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_defiance
		}
		add_dynamic_modifier = {
			modifier = coltvan_rebellion
		}
	}
	else_if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_unrest
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_unrest
		}
		add_dynamic_modifier = {
			modifier = coltvan_defiance
		}
	}
}

CTH_unrest_down = {
	custom_effect_tooltip = CTH_unrest_down
	if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_rebellion
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_rebellion
		}
		add_dynamic_modifier = {
			modifier = coltvan_defiance
		}
	}
	else_if = {
		limit = {
			has_dynamic_modifier = {
				modifier = coltvan_defiance
			}
		}
		remove_dynamic_modifier = {
			modifier = coltvan_defiance
		}
		add_dynamic_modifier = {
			modifier = coltvan_unrest
		}
	}
}

CTH_clamp_variables = {
	clamp_variable = {
		var = CTH_scientifid_power
		min = 0
		max = 5
	}
	clamp_variable = {
		var = CTH_scientifid_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CTH_military_faction_power
		min = 0
		max = 5
	}
	clamp_variable = {
		var = CTH_military_faction_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CTH_landowners_power
		min = 0
		max = 5
	}
	clamp_variable = {
		var = CTH_landowners_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CTH_constitutionalist_power
		min = 0
		max = 5
	}
	clamp_variable = {
		var = CTH_constitutionalist_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CTH_harmonites_power
		min = 0
		max = 5
	}
	clamp_variable = {
		var = CTH_harmonites_loyalty
		min = 0
		max = 100
	}
}
CTH_add_10_scientifid_loyalty = {
	custom_effect_tooltip = CTH_add_10_scientifid_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty < 50
			}
		}
		add_to_variable = {
			var = CTH_scientifid_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_scientifid_loyalty > 49
				}
			}
			multiply_variable = {
				var = CTH_science_production_factory_efficiency_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_science_eureka_factor_var
				value = -1
			}
		}
	}
	else = {
		add_to_variable = {
			var = CTH_scientifid_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_10_scientifid_loyalty = {
	custom_effect_tooltip = CTH_remove_10_scientifid_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty > 49
			}
		}
		subtract_from_variable = {
			var = CTH_scientifid_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_scientifid_loyalty < 50
				}
			}
			multiply_variable = {
				var = CTH_science_production_factory_efficiency_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_science_eureka_factor_var
				value = -1
			}
		}
	}
	else = {
		subtract_from_variable = {
			var = CTH_scientifid_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_1_scientifid_power = {
	custom_effect_tooltip = CTH_add_1_scientifid_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty > 49
			}
			check_variable = {
				CTH_scientifid_power < 5
			}
		}
		add_to_variable = {
			var = CTH_science_production_factory_efficiency_factor_var
			value = 0.02
		}
		add_to_variable = {
			var = CTH_science_eureka_factor_var
			value = 0.02
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty < 50
			}
			check_variable = {
				CTH_scientifid_power < 5
			}
		}
		subtract_from_variable = {
			var = CTH_science_production_factory_efficiency_factor_var
			value = 0.02
		}
		subtract_from_variable = {
			var = CTH_science_eureka_factor_var
			value = 0.02
		}
	}
	add_to_variable = {
		var = CTH_scientifid_power
		value = 1
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_1_scientifid_power = {
	custom_effect_tooltip = CTH_remove_1_scientifid_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty > 49
			}
			check_variable = {
				CTH_scientifid_power > 0
			}
		}
		subtract_from_variable = {
			var = CTH_science_production_factory_efficiency_factor_var
			value = 0.02
		}
		subtract_from_variable = {
			var = CTH_science_eureka_factor_var
			value = 0.02
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_scientifid_loyalty < 50
			}
			check_variable = {
				CTH_scientifid_power > 0
			}
		}
		add_to_variable = {
			var = CTH_science_production_factory_efficiency_factor_var
			value = 0.02
		}
		add_to_variable = {
			var = CTH_science_eureka_factor_var
			value = 0.02
		}
	}
	subtract_from_variable = {
		var = CTH_scientifid_power
		value = 1
	}
	if = {
		limit = {
			check_variable = {
				CTH_scientifid_power = 0
			}
		}
		set_variable = { CTH_science_production_factory_efficiency_factor_var = 0 }
		set_variable = { CTH_science_eureka_factor_var = 0 }
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_10_military_faction_loyalty = {
	custom_effect_tooltip = CTH_add_10_military_faction_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty < 50
			}
		}
		add_to_variable = {
			var = CTH_military_faction_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_military_faction_loyalty > 49
				}
			}
			multiply_variable = {
				var = CTH_military_army_organisation_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_military_surrender_limit_factor_var
				value = -1
			}
		}
	}
	else = {
		add_to_variable = {
			var = CTH_military_faction_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_10_military_faction_loyalty = {
	custom_effect_tooltip = CTH_remove_10_military_faction_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty > 49
			}
		}
		subtract_from_variable = {
			var = CTH_military_faction_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_military_faction_loyalty < 50
				}
			}
			multiply_variable = {
				var = CTH_military_army_organisation_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_military_surrender_limit_factor_var
				value = -1
			}
		}
	}
	else = {
		subtract_from_variable = {
			var = CTH_military_faction_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_1_military_faction_power = {
	custom_effect_tooltip = CTH_add_1_military_faction_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty > 49
			}
			check_variable = {
				CTH_military_faction_power < 5
			}
		}
		add_to_variable = {
			var = CTH_military_army_organisation_factor_var
			value = 0.02
		}
		add_to_variable = {
			var = CTH_military_surrender_limit_factor_var
			value = 0.02
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty < 50
			}
			check_variable = {
				CTH_military_faction_power < 5
			}
		}
		subtract_from_variable = {
			var = CTH_military_army_organisation_factor_var
			value = 0.02
		}
		subtract_from_variable = {
			var = CTH_military_surrender_limit_factor_var
			value = 0.02
		}
	}
	add_to_variable = {
		var = CTH_military_faction_power
		value = 1
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_1_military_faction_power = {
	custom_effect_tooltip = CTH_remove_1_military_faction_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty > 49
			}
			check_variable = {
				CTH_military_faction_power > 0
			}
		}
		subtract_from_variable = {
			var = CTH_military_army_organisation_factor_var
			value = 0.02
		}
		subtract_from_variable = {
			var = CTH_military_surrender_limit_factor_var
			value = 0.02
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_military_faction_loyalty < 50
			}
			check_variable = {
				CTH_military_faction_power > 0
			}
		}
		add_to_variable = {
			var = CTH_military_army_organisation_factor_var
			value = 0.02
		}
		add_to_variable = {
			var = CTH_military_surrender_limit_factor_var
			value = 0.02
		}
	}
	subtract_from_variable = {
		var = CTH_military_faction_power
		value = 1
	}
	if = {
		limit = {
			check_variable = {
				CTH_military_faction_power = 0
			}
		}
		set_variable = { CTH_military_army_organisation_factor_var = 0 }
		set_variable = { CTH_military_surrender_limit_factor_var = 0 }
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_10_landowners_loyalty = {
	custom_effect_tooltip = CTH_add_10_landowners_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty < 50
			}
		}
		add_to_variable = {
			var = CTH_landowners_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_landowners_loyalty > 49
				}
			}
			multiply_variable = {
				var = CTH_landowner_political_power_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_landowner_consumer_goods_factor_var
				value = -1
			}
		}
	}
	else = {
		add_to_variable = {
			var = CTH_landowners_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_10_landowners_loyalty = {
	custom_effect_tooltip = CTH_remove_10_landowners_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty > 49
			}
		}
		subtract_from_variable = {
			var = CTH_landowners_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_landowners_loyalty < 50
				}
			}
			multiply_variable = {
				var = CTH_landowner_political_power_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_landowner_consumer_goods_factor_var
				value = -1
			}
		}
	}
	else = {
		subtract_from_variable = {
			var = CTH_landowners_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_1_landowners_power = {
	custom_effect_tooltip = CTH_add_1_landowners_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty > 49
			}
			check_variable = {
				CTH_landowners_power < 5
			}
		}
		add_to_variable = {
			var = CTH_landowner_political_power_factor_var
			value = 0.1
		}
		subtract_from_variable = {
			var = CTH_landowner_consumer_goods_factor_var
			value = 0.04
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty < 50
			}
			check_variable = {
				CTH_landowners_power < 5
			}
		}
		subtract_from_variable = {
			var = CTH_landowner_political_power_factor_var
			value = 0.1
		}
		add_to_variable = {
			var = CTH_landowner_consumer_goods_factor_var
			value = 0.04
		}
	}
	add_to_variable = {
		var = CTH_landowners_power
		value = 1
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_1_landowners_power = {
	custom_effect_tooltip = CTH_remove_1_landowners_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty > 49
			}
			check_variable = {
				CTH_landowners_power > 0
			}
		}
		subtract_from_variable = {
			var = CTH_landowner_political_power_factor_var
			value = 0.1
		}
		add_to_variable = {
			var = CTH_landowner_consumer_goods_factor_var
			value = 0.04
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_landowners_loyalty < 50
			}
			check_variable = {
				CTH_landowners_power > 0
			}
		}
		add_to_variable = {
			var = CTH_landowner_political_power_factor_var
			value = 0.1
		}
		subtract_from_variable = {
			var = CTH_landowner_consumer_goods_factor_var
			value = 0.04
		}
	}
	subtract_from_variable = {
		var = CTH_landowners_power
		value = 1
	}
	if = {
		limit = {
			check_variable = {
				CTH_landowners_power = 0
			}
		}
		set_variable = { CTH_landowner_political_power_factor_var = 0 }
		set_variable = { CTH_landowner_consumer_goods_factor_var = 0 }
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_10_constitutionalist_loyalty = {
	custom_effect_tooltip = CTH_add_10_constitutionalist_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty < 50
			}
		}
		add_to_variable = {
			var = CTH_constitutionalist_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_constitutionalist_loyalty > 49
				}
			}
			multiply_variable = {
				var = CTH_constitutionalist_economy_cost_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_constitutionalist_mobilization_laws_cost_factor_var
				value = -1
			}
		}
	}
	else = {
		add_to_variable = {
			var = CTH_constitutionalist_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_10_constitutionalist_loyalty = {
	custom_effect_tooltip = CTH_remove_10_constitutionalist_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty > 49
			}
		}
		subtract_from_variable = {
			var = CTH_constitutionalist_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_constitutionalist_loyalty < 50
				}
			}
			multiply_variable = {
				var = CTH_constitutionalist_economy_cost_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_constitutionalist_mobilization_laws_cost_factor_var
				value = -1
			}
		}
	}
	else = {
		subtract_from_variable = {
			var = CTH_constitutionalist_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_1_constitutionalist_power = {
	custom_effect_tooltip = CTH_add_1_constitutionalist_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty > 49
			}
			check_variable = {
				CTH_constitutionalist_power < 5
			}
		}
		subtract_from_variable = {
			var = CTH_constitutionalist_economy_cost_factor_var
			value = 0.1
		}
		subtract_from_variable = {
			var = CTH_constitutionalist_mobilization_laws_cost_factor_var
			value = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty < 50
			}
			check_variable = {
				CTH_constitutionalist_power < 5
			}
		}
		add_to_variable = {
			var = CTH_constitutionalist_economy_cost_factor_var
			value = 0.1
		}
		add_to_variable = {
			var = CTH_constitutionalist_mobilization_laws_cost_factor_var
			value = 0.1
		}
	}
	add_to_variable = {
		var = CTH_constitutionalist_power
		value = 1
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_1_constitutionalist_power = {
	custom_effect_tooltip = CTH_remove_1_constitutionalist_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty > 49
			}
			check_variable = {
				CTH_constitutionalist_power > 0
			}
		}
		add_to_variable = {
			var = CTH_constitutionalist_economy_cost_factor_var
			value = 0.1
		}
		add_to_variable = {
			var = CTH_constitutionalist_mobilization_laws_cost_factor_var
			value = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_loyalty < 50
			}
			check_variable = {
				CTH_constitutionalist_power > 0
			}
		}
		subtract_from_variable = {
			var = CTH_constitutionalist_economy_cost_factor_var
			value = 0.1
		}
		subtract_from_variable = {
			var = CTH_constitutionalist_mobilization_laws_cost_factor_var
			value = 0.1
		}
	}
	subtract_from_variable = {
		var = CTH_constitutionalist_power
		value = 1
	}
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_power = 0
			}
		}
		set_variable = { CTH_constitutionalist_economy_cost_factor_var = 0 }
		set_variable = { CTH_constitutionalist_mobilization_laws_cost_factor_var = 0 }
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_10_harmonites_loyalty = {
	custom_effect_tooltip = CTH_add_10_harmonites_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty < 50
			}
		}
		add_to_variable = {
			var = CTH_harmonites_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_harmonites_loyalty > 49
				}
			}
			multiply_variable = {
				var = CTH_harmonite_stability_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_harmonite_trade_opinion_factor_var
				value = -1
			}
		}
	}
	else = {
		add_to_variable = {
			var = CTH_harmonites_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_10_harmonites_loyalty = {
	custom_effect_tooltip = CTH_remove_10_harmonites_loyalty_tt
	if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty > 49
			}
		}
		subtract_from_variable = {
			var = CTH_harmonites_loyalty
			value = 10
		}
		if = {
			limit = {
				check_variable = {
					CTH_harmonites_loyalty < 50
				}
			}
			multiply_variable = {
				var = CTH_harmonite_stability_factor_var
				value = -1
			}
			multiply_variable = {
				var = CTH_harmonite_trade_opinion_factor_var
				value = -1
			}
		}
	}
	else = {
		subtract_from_variable = {
			var = CTH_harmonites_loyalty
			value = 10
		}
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_add_1_harmonites_power = {
	custom_effect_tooltip = CTH_add_1_harmonites_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty > 49
			}
			check_variable = {
				CTH_harmonites_power < 5
			}
		}
		add_to_variable = {
			var = CTH_harmonite_stability_factor_var
			value = 0.025
		}
		add_to_variable = {
			var = CTH_harmonite_trade_opinion_factor_var
			value = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty < 50
			}
			check_variable = {
				CTH_harmonites_power < 5
			}
		}
		subtract_from_variable = {
			var = CTH_harmonite_stability_factor_var
			value = 0.025
		}
		subtract_from_variable = {
			var = CTH_harmonite_trade_opinion_factor_var
			value = 0.1
		}
	}
	add_to_variable = {
		var = CTH_harmonites_power
		value = 1
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
CTH_remove_1_harmonites_power = {
	custom_effect_tooltip = CTH_remove_1_harmonites_power_tt
	if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty > 49
			}
			check_variable = {
				CTH_harmonites_power > 0
			}
		}
		subtract_from_variable = {
			var = CTH_harmonite_stability_factor_var
			value = 0.025
		}
		subtract_from_variable = {
			var = CTH_harmonite_trade_opinion_factor_var
			value = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CTH_harmonites_loyalty < 50
			}
			check_variable = {
				CTH_harmonites_power > 0
			}
		}
		add_to_variable = {
			var = CTH_harmonite_stability_factor_var
			value = 0.025
		}
		add_to_variable = {
			var = CTH_harmonite_trade_opinion_factor_var
			value = 0.1
		}
	}
	subtract_from_variable = {
		var = CTH_harmonites_power
		value = 1
	}
	if = {
		limit = {
			check_variable = {
				CTH_harmonites_power = 0
			}
		}
		set_variable = { CTH_harmonite_stability_factor_var = 0 }
		set_variable = { CTH_harmonite_trade_opinion_factor_var = 0 }
	}
	force_update_dynamic_modifier = yes
	CTH_clamp_variables = yes
}
create_more_sand = {
	hidden_effect = {
		country_event = { id = dragon.3 days = 28 }
	}
}
CTH_setup_CTC = {
	news_event = { id = colthage_news.5 hours = 12 }
	CTH_zanno_mzelqatid = {
		set_nationality = CTC
	}
	CTH_jezabzella_zeshmid = {
		set_nationality = CTC
	}
	CTH_zenut_zaranzid = {
		set_nationality = CTC
	}
	CTH_zacual_orozid = {
		set_nationality = CTC
	}
	CTH_zannido_zidon = {
		set_nationality = CTC 
	}
	CTC = {
		clr_country_flag = CTH_colthage_zarcaid
		drop_cosmetic_tag = yes
		set_cosmetic_tag = CTH_constitutionalist
		#thx pdx for breaking character event targets, very cool
		#event_target:CTH_Zanno_Mzelqatid_target = { set_nationality = CTC }
		#event_target:CTH_Jezabzella_Zeshmid_target = { set_nationality = CTC }
		#event_target:CTH_Zenut_Zaranzid_target = { set_nationality = CTC }
		#Keep this just in case
		promote_character = CTH_zanno_mzelqatid
		promote_character = CTH_jezabzella_zeshmid
		set_popularities = {
			democratic = 39
			neutrality = 50
			communism = 11
		}
		transfer_state = 709
		709 = { set_state_flag = CTH_sided_with_constitutionalists }
		load_focus_tree = {
			tree = colthage_constitutionalist_civil_war_focus_tree
			keep_completed = yes	   
		}
	}

	#he cant be in two places at the same time
	#CTA = {
	#	retire_ideology_leader = neutrality
	#	create_country_leader = {
	#		name = "Zarvad Orzagid"
	#		picture = "zarvad_orzagid.tga"
	#		expire = "1965.1.1"
	#		ideology = centrism
	#		desc = ""
	#	}
	#}

	#Add Devisions to CTC
	CTC = {
		division_template = {
			name = "Abiyot Yennterib"
			is_locked = yes
			template_counter = 6
			division_names_group = CTH_GAR_02
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
			}
			priority = 0
		}
	}

	709 = {
		teleport_armies = {
			to_state = 700
		}
		create_unit = {
			division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
			owner = CTC
			count = 5
			allow_spawning_on_enemy_provs = yes
		}
	}

	# Add extra state
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_strength > 1
			}
		}
		CTC = {
			transfer_state = 877
		}
		877 = {
			teleport_armies = {
				to_state = 852
			}
			if = {
				limit = {
					CTH = { has_country_flag = CTH_bandits_crackdown_in_tefemanei }
				}
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 1
					allow_spawning_on_enemy_provs = yes
				}
			}
			else = {
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 3
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	# Add all the West
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_strength > 2
			}
		}
		CTC = {
			transfer_state = 699
			transfer_state = 876
		}
		699 = {
			teleport_armies = {
				to_state = 852
			}
			if = {
				limit = {
					CTH = { has_country_flag = CTH_bandits_crackdown_in_alaudid_range }
				}
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 2
					allow_spawning_on_enemy_provs = yes
				}
			}
			else = {
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 4
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
		876 = {
			teleport_armies = {
				to_state = 702
			}
			if = {
				limit = {
					CTH = { has_country_flag = CTH_bandits_crackdown_in_zalihli }
				}
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 1
					allow_spawning_on_enemy_provs = yes
				}
			}
			else = {
				create_unit = {
					division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
					owner = CTC
					count = 2
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	# Give Army Support
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_strength > 3
			}
		}
		transfer_units_fraction = {
			target = CTC
			size = 0.2
			stockpile_ratio = 0.2
			army_ratio = 0.2
			navy_ratio = 0.2
			air_ratio = 0.2
			keep_unit_leaders_trigger = {
				OR = {
					has_trait = zarcid_supporter
					has_trait = scientific_supporter
					has_trait = pirate_supporter
					FROM = { PREV = { is_character = CTH_batrun_zaryes }}
					FROM = { PREV = { is_character = CTH_zauro_ochzor }}
					FROM = { PREV = { is_character = CTH_bezelshazzar_zerutra }}
					FROM = { PREV = { is_character = CTH_zurelo_balzanquet }}
					FROM = { PREV = { is_character = CTH_jebzel_zoblos }}
					FROM = { PREV = { is_character = CTH_xikala_gunslinger }}
					FROM = { PREV = { is_character = CTH_ziliad_annizalid }}
					FROM = { PREV = { is_character = CTH_fancy_name_dude }}
					FROM = { PREV = { is_character = CTH_batnoam_zarza }}
				}
				NOT = {
					has_trait = harmonid_supporter
				}
			}
		}
		#Just in case because i genuinely have no idea if keep_unit_leaders crap still works...
		# seems to still work?
		#CTC = {
			#every_character = {
				#limit = {
					#OR = {
						#has_trait = zarcid_supporter
						#has_trait = scientific_supporter
						#has_trait = pirate_supporter
						#is_character = CTH_batrun_zaryes
						#is_character = CTH_zauro_ochzor
						#is_character = CTH_bezelshazzar_zerutra
						#is_character = CTH_zurelo_balzanquet
						#is_character = CTH_jebzel_zoblos
						#is_character = CTH_xikala_gunslinger
						#is_character = CTH_ziliad_annizalid
						#is_character = CTH_fancy_name_dude
						#is_character = CTH_batnoam_zarza
					#}
					#NOT = {
						#has_trait = harmonid_supporter
						#has_trait = constitutionalist_supporter
					#}
				#}
				#set_nationality = CTH
			#}
		#}
	}
	#Give CTC all supporting leaders
	every_character = {
		limit = {
			OR = {
				has_trait = constitutionalist_supporter
				has_trait = harmonid_supporter
			}
		}
		set_nationality = CTC
	}

	# Setup CTC cores, capital, ideas, tech
	CTC = {
		every_state = {
			limit = {
				has_state_flag = CTH_core_of_colthage_flag
			}
			add_core_of = CTC
		}
		every_owned_state = {
			set_state_flag = CTH_sided_with_constitutionalists
		}
		transfer_technology = yes
		if = {
			limit = {
				709 = { is_owned_by = CTC }
			}
			CTC = { set_capital = { state = 709 } }
		}
		else = {
			random_owned_state = {
				CTC = { set_capital = { state = PREV } }
			}
		}
		set_country_flag = CTC_has_zidon
		# doesn't seem to be a need to remove these ideas?
		#remove_ideas = {
			#CTH_batrun_zaryes
			#CTH_baltazar_zakbar
			#CTH_zaron_zorrel
		#}

		add_ideas = {
			lack_of_scientists3
			proper_science_base
			slavery_economy
			pre_industrial_society3
			poverty4
			CTC_freedom_or_death
			zebrica_legacy_of_storm2
		}
		#lets just do this after the victory so theres no duplicates
		#set_country_flag = CTH_no_co_sufrit_flag
		#if = {
		#	limit = {
		#		NOT = {
		#			has_idea = CTH_no_co_sufrit
		#		}
		#	}
		#	add_ideas = CTH_no_co_sufrit
		#}
	}

	# Start the Civil War
	CTC = {
		declare_war_on = {
			target = CTA
			type = civil_war
		}
		add_civil_war_target = CTA
	}

	# Add rebels to major cities
	if = {
		limit = {
			check_variable = {
				CTH_constitutionalist_strength > 4
			}
		}
		875 = {
			create_unit = {
				division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
				owner = CTC
				count = 2
				allow_spawning_on_enemy_provs = yes
			}
		}
		701 = {
			create_unit = {
				division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
				owner = CTC
				count = 2
				allow_spawning_on_enemy_provs = yes
			}
		}
		852 = {
			create_unit = {
				division = "division_template = \"Abiyot Yennterib\" start_experience_factor = 0.1"
				owner = CTC
				count = 2
				allow_spawning_on_enemy_provs = yes
			}
		}
	}
	every_owned_state = {
		set_state_flag = CTH_sided_with_zarcids
	}
}
CTH_second_civil_war = {
	start_civil_war = {
		ruling_party = fascism
		ideology = neutrality
		size = 0.4
		capital = 709
		states = { 
			709 876 877 699
		}
		keep_unit_leaders = {
			1924 1920 1941 1942 1933 1928 1931 1926 1946 1930
		}
		keep_political_leader = no
		set_country_flag = CTH_colthage_constitutionalist
		set_cosmetic_tag = CTH_constitutionalist
		load_focus_tree = { 
			tree = colthage_constitutionalist_civil_war_focus_tree_2_electric_boogaloo
			keep_completed = yes		   
		}
		add_ideas = {
			CTC_restored_constitution
			CTC_freedom_or_death
			CTC_municipal_democracy
			CTC_free_media_idea
			CTC_liberated_labour_idea
			proper_science_base
			slavery_economy
			pre_industrial_society3
			poverty4
			zebrica_legacy_of_storm2
		}
		set_popularities = {
			democratic = 20
			fascism = 0
			communism = 20
			neutrality = 60
		}
		hidden_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				create_equipment_variant = {
					name = "Hunter Class"
					type = ship_hull_submarine_1
					parent_version = 0
					modules = {
						fixed_ship_torpedo_slot = ship_torpedo_sub_1
						fixed_ship_engine_slot = sub_ship_engine_1
						rear_1_custom_slot = ship_mine_layer_sub
					}
				}
				create_equipment_variant = {
					name = "Free Zumidia Class"
					type = ship_hull_submarine_2
					parent_version = 0
					modules = {
						fixed_ship_torpedo_slot = ship_torpedo_sub_2
						fixed_ship_engine_slot = sub_ship_engine_2
						rear_1_custom_slot = ship_mine_layer_sub
					}
				}

				create_equipment_variant = {
					name = "Gunboat Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = empty
						fixed_ship_radar_slot = empty
						fixed_ship_torpedo_slot = ship_torpedo_1
						fixed_ship_engine_slot = light_ship_engine_2
						mid_1_custom_slot = empty
						rear_1_custom_slot = empty
					}
					obsolete = yes
				}

				create_equipment_variant = {
					name = "Trapper Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						rear_1_custom_slot = ship_mine_layer_1
					}
					obsolete = yes
				}

				create_equipment_variant = {
					name = "Trident Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						rear_1_custom_slot = ship_depth_charge_1
					}
					obsolete = yes
				}
				create_equipment_variant = {
					name = "Strips Class"
					type = ship_hull_light_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_2
						mid_1_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_depth_charge_1
					}
				}

				create_equipment_variant = {
					name = "Raider Class"
					type = ship_hull_cruiser_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_medium_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = empty
						mid_1_custom_slot = ship_torpedo_1
						mid_2_custom_slot = ship_torpedo_1
						rear_1_custom_slot = ship_airplane_launcher_1
					}
				}

				create_equipment_variant = {
					name = "Akik Class"
					type = ship_hull_cruiser_coastal_defense_ship
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_armor_slot = empty
						fixed_ship_secondaries_slot = ship_secondaries_1
						mid_1_custom_slot = ship_anti_air_2
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_medium_battery_2
					}
				}

				create_equipment_variant = {
					name = "Colthage Class"
					type = ship_hull_heavy_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bc_1
						front_1_custom_slot = empty
						mid_1_custom_slot = empty
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
				}

				create_equipment_variant = {
					name = "Storm Class"
					type = ship_hull_heavy_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_1
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bb_2
						front_1_custom_slot = empty
						mid_1_custom_slot = empty
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
					obsolete = yes
				}
				create_equipment_variant = {
					name = "Republic Class"
					type = ship_hull_heavy_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_2
						fixed_ship_armor_slot = ship_armor_bb_2
						front_1_custom_slot = empty
						mid_1_custom_slot = ship_secondaries_2
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
				}
			}
		}
	}
	#hidden_effect = {
		#random_other_country = {
		#	limit = {
		#		original_tag = CTH
		#		has_government = neutrality
		#	}
			
		#}
		#create_country_leader = {
		#	name = "Zarvad Orzagid"
		#	picture = "zarvad_orzagid.tga"
		#	expire = "1965.1.1"
		#	ideology = centrism
		#	desc = ""
		#}
	#}
	CTH_zalathel_zarca = {
		set_nationality = CTM
	}
	every_character = {
		limit = {
			has_trait = constitutionalist_supporter
		}
		set_nationality = CTC
	}
	hidden_effect = {
		country_event = { 
			days = 7
			id = colthage_other.70
		}
	}
}
CTH_second_civil_war_2 = {
	706 = {
		teleport_armies = {
			to_state = 875
		}
	}
	705 = {
		teleport_armies = {
			to_state = 875
		}
	}
	852 = {
		teleport_armies = {
			to_state = 875
		}
	}
	701 = {
		teleport_armies = {
			to_state = 875
		}
	}
	create_dynamic_country = {
		original_tag = CTH
		set_country_flag = CTH_colthage_bandit
		set_country_flag = CTH_peace_with_coltva
		set_AI_strategies_on_every_possible_country_delayed = yes
		set_politics = {
			ruling_party = democratic
			elections_allowed = no
		}
		set_party_name = { 
			ideology = democratic 
			long_name = CTH_zidonid_party_long 
			name = CTH_zidonid_party
		}
		set_popularities = {
			democratic = 60
			fascism = 0
			communism = 40
			neutrality = 0
		}
		add_ideas = {
			CTC_restored_constitution
			CTC_municipal_democracy
			CTC_free_media_idea
			CTC_liberated_labour_idea
			proper_science_base
			slavery_economy
			pre_industrial_society3
			poverty4
			zebrica_legacy_of_storm2
		}
		set_cosmetic_tag = CTH_bandit
		reserve_dynamic_country = yes
		transfer_technology = yes
		transfer_state = 706
		transfer_state = 705
		transfer_state = 852
		transfer_state = 701
		set_capital = {
			state = 701
		}
		load_focus_tree = { 
			tree = colthage_bandit_civil_war_focus_tree
			keep_completed = yes		   
		}
		every_possible_country = {
			limit = {
				has_character = CTH_zacual_orozid
				NOT = { tag = CTB }
			}
			CTH_zacual_orozid = {
				set_nationality = CTB 
			}
		}
		every_possible_country = {
			limit = {
				has_character = CTH_zannido_zidon
				NOT = { tag = CTB }
			}
			CTH_zannido_zidon = {
				set_nationality = CTB 
			}
		}
		add_country_leader_role = {
			character = CTH_zannido_zidon
			country_leader = {
				desc = CTH_zannido_zidon_desc
				expire = "1965.1.1"
				ideology = social_banditry
				traits = {  }
			}
			promote_leader = yes
		}
		declare_war_on = {
			target = CTM
			type = civil_war
		}
		add_civil_war_target = CTM
		hidden_effect = {
			if = {
				limit = { has_dlc = "Man the Guns" }
				create_equipment_variant = {
					name = "Hunter Class"
					type = ship_hull_submarine_1
					parent_version = 0
					modules = {
						fixed_ship_torpedo_slot = ship_torpedo_sub_1
						fixed_ship_engine_slot = sub_ship_engine_1
						rear_1_custom_slot = ship_mine_layer_sub
					}
				}
				create_equipment_variant = {
					name = "Free Zumidia Class"
					type = ship_hull_submarine_2
					parent_version = 0
					modules = {
						fixed_ship_torpedo_slot = ship_torpedo_sub_2
						fixed_ship_engine_slot = sub_ship_engine_2
						rear_1_custom_slot = ship_mine_layer_sub
					}
				}

				create_equipment_variant = {
					name = "Gunboat Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = empty
						fixed_ship_radar_slot = empty
						fixed_ship_torpedo_slot = ship_torpedo_1
						fixed_ship_engine_slot = light_ship_engine_2
						mid_1_custom_slot = empty
						rear_1_custom_slot = empty
					}
					obsolete = yes
				}

				create_equipment_variant = {
					name = "Trapper Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						rear_1_custom_slot = ship_mine_layer_1
					}
					obsolete = yes
				}

				create_equipment_variant = {
					name = "Trident Class"
					type = ship_hull_light_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_1
						rear_1_custom_slot = ship_depth_charge_1
					}
					obsolete = yes
				}
				create_equipment_variant = {
					name = "Strips Class"
					type = ship_hull_light_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_2
						mid_1_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_depth_charge_1
					}
				}

				create_equipment_variant = {
					name = "Raider Class"
					type = ship_hull_cruiser_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_medium_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = empty
						mid_1_custom_slot = ship_torpedo_1
						mid_2_custom_slot = ship_torpedo_1
						rear_1_custom_slot = ship_airplane_launcher_1
					}
				}

				create_equipment_variant = {
					name = "Akik Class"
					type = ship_hull_cruiser_coastal_defense_ship
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_armor_slot = empty
						fixed_ship_secondaries_slot = ship_secondaries_1
						mid_1_custom_slot = ship_anti_air_2
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_medium_battery_2
					}
				}

				create_equipment_variant = {
					name = "Colthage Class"
					type = ship_hull_heavy_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bc_1
						front_1_custom_slot = empty
						mid_1_custom_slot = empty
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
				}

				create_equipment_variant = {
					name = "Storm Class"
					type = ship_hull_heavy_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_1
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bb_2
						front_1_custom_slot = empty
						mid_1_custom_slot = empty
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
					obsolete = yes
				}
				create_equipment_variant = {
					name = "Republic Class"
					type = ship_hull_heavy_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_2
						fixed_ship_armor_slot = ship_armor_bb_2
						front_1_custom_slot = empty
						mid_1_custom_slot = ship_secondaries_2
						mid_2_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_heavy_battery_2
					}
				}
			}
		}
	}
	every_state = {
		limit = {
			has_state_flag = CTH_core_of_colthage_flag
		}
		add_core_of = CTB
	}
	if = {
		limit = {
			CVA = {
				exists = yes
			}
		}
		CVA = {
			country_event = colthage_other.71
		}
	}
	else = {
		CVA = {
			if = {
				limit = {
					NOT = {
						has_global_flag = zeirutid_dead
					}
				}
				CVA_zeshmunazash_zeirutid = {
					set_nationality = CTB
				}
			}
			CVA_zarishat_zeirutid = {
				set_nationality = CTB
			}
			every_character = {
				limit = {
					is_country_leader = no
					is_unit_leader = yes
				}
				set_nationality = CTB
			}
		}
		CTB = {
			transfer_state = 1093
			transfer_state = 1094
			transfer_state = 1095
			add_state_core = 1093
			add_state_core = 1094
			add_state_core = 1095
			every_owned_state = {
				limit = {
					is_core_of = CVA
				}
				CTH_remove_coltvan_unrest_ideas = yes
			}
		}
	}
	every_character = {
		limit = {
			has_trait = harmonid_supporter
		}
		set_nationality = CTB
	}
	transfer_units_fraction = {
		target = CTB
		size = 0.4
		stockpile_ratio = 0.4
		army_ratio = 0.4
		navy_ratio = 0.4
		air_ratio = 0.4
		keep_unit_leaders_trigger = {
			OR = {
				has_trait = zarcid_supporter
				has_trait = scientific_supporter
				has_trait = pirate_supporter
				FROM = { PREV = { is_character = CTH_zauro_ochzor }}
				FROM = { PREV = { is_character = CTH_jebzel_zoblos }}
				FROM = { PREV = { is_character = CTH_batnoam_zarza }}
				FROM = { PREV = { is_character = CTH_bezelshazzar_zerutra }}
				FROM = { PREV = { is_character = CTH_zurelo_balzanquet }}
				FROM = { PREV = { is_character = CTH_fancy_name_dude }}
			}
		}
	}
	#CTB = {
		#every_character = {
			#limit = {
				#OR = {
					#has_trait = zarcid_supporter
					#has_trait = scientific_supporter
					#has_trait = pirate_supporter
					#is_character = CTH_zauro_ochzor
					#is_character = CTH_jebzel_zoblos
					#is_character = CTH_batnoam_zarza
					#is_character = CTH_bezelshazzar_zerutra
					#is_character = CTH_zurelo_balzanquet
					#is_character = CTH_fancy_name_dude
				#}
				#NOT = {
					#has_trait = harmonid_supporter
					#has_trait = constitutionalist_supporter
				#}
			#}
			#set_nationality = CTM
		#}
	#}
}
CTH_increase_army_dominance = {
	if = {
		limit = {  has_idea = CTH_interservice_rivalry_army_strengthened }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_army_strengthened
			add_idea = CTH_interservice_rivalry_army_dominant
		}
	}

	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_balanced }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_balanced
			add_idea = CTH_interservice_rivalry_army_strengthened
		}
	}

	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_navy_strengthened }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_navy_strengthened
			add_idea = CTH_interservice_rivalry_balanced
		}
	}

	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_navy_dominant }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_navy_dominant
			add_idea = CTH_interservice_rivalry_navy_strengthened
		}
	}
}
CTH_increase_navy_dominance = {
	if = {
		limit = { has_idea = CTH_interservice_rivalry_navy_strengthened }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_navy_strengthened
			add_idea = CTH_interservice_rivalry_navy_dominant
		}
	}	
	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_balanced }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_balanced
			add_idea = CTH_interservice_rivalry_navy_strengthened
		}
	}
	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_army_strengthened }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_army_strengthened
			add_idea = CTH_interservice_rivalry_balanced
		}
	}
	else_if = {
		limit = { has_idea = CTH_interservice_rivalry_army_dominant }
		swap_ideas = {
			remove_idea = CTH_interservice_rivalry_army_dominant
			add_idea = CTH_interservice_rivalry_army_strengthened
		}
	}
}