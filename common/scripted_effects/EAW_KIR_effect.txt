KIR_KIS_transfer_civil_war_provinces = {
	KIS = {
		set_province_controller = 20525 
		set_province_controller = 20549 
		set_province_controller = 20649 
		set_province_controller = 20531 
		set_province_controller = 20530 
		set_province_controller = 20540 
		set_province_controller = 20551 
		set_province_controller = 20527 
		set_province_controller = 20648 
		set_province_controller = 20541 
		set_province_controller = 20545 
		set_province_controller = 20547 
		set_province_controller = 20550 
		set_province_controller = 20560 
		set_province_controller = 20561 
		set_province_controller = 20572 
		set_province_controller = 20542
	}
	KIC = {
		set_province_controller = 16721
		set_province_controller = 20619
	}
	KIR = {
		set_province_controller = 19200
		set_province_controller = 20362
		set_province_controller = 20347
		set_province_controller = 20365
		set_province_controller = 20392
		set_province_controller = 13134
		set_province_controller = 13057
		set_province_controller = 13043
		set_province_controller = 20639
		set_province_controller = 12268
		set_province_controller = 10319
		set_province_controller = 10206
	}
}

KIR_diary_SG_RESET_ENTRY_FRAMES = {
	set_variable = { KIR_diary_SG_protag_1_entry_1_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_2_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_3_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_4_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_5_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_6_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_7_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_8_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_9_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_10_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_11_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_1_entry_12_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_1_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_2_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_3_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_4_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_5_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_6_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_7_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_8_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_9_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_10_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_11_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_2_entry_12_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_1_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_2_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_3_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_4_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_5_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_6_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_7_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_8_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_9_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_10_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_11_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_12_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_3_entry_13_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_1_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_2_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_3_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_4_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_5_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_6_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_7_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_8_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_9_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_10_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_11_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_12_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_13_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_14_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_4_entry_15_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_1_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_2_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_3_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_4_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_5_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_6_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_7_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_8_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_9_button_frame = 1 }
	set_variable = { KIR_diary_SG_protag_5_entry_10_button_frame = 1 }
}

KIR_diary_SG_RESET_FRAMES = {
	set_variable = {
		protagonist_1_frame = 2
	}
	set_variable = {
		protagonist_2_frame = 2
	}
	set_variable = {
		protagonist_3_frame = 2
	}
	set_variable = {
		protagonist_4_frame = 2
	}
	set_variable = {
		protagonist_5_frame = 2
	}
	KIR_diary_SG_RESET_ENTRY_FRAMES = YES
}

KIR_unlock_entry_effect = {
	if = {
		limit = {
			has_country_flag = KIR_diary_SG_popup_toggle_YES
		}
		set_country_flag = KIR_toggled_diary_SG
		KIR_diary_SG_RESET_FRAMES = yes
		set_variable = { protagonist_1_frame = 1 }
	}
	else = {
		clr_country_flag = KIR_diary_SG_clicked_flag
		add_to_variable = { KIR_diary_SG_new_entry_var = 1 }
	}
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_diary_SG_protag_1_button_click_effect = {
	KIR_diary_SG_RESET_FRAMES = yes
	set_variable = { protagonist_1_frame = 1 }
	set_variable = { KIR_diary_SG_entry_var = 0 }
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_diary_SG_protag_2_button_click_effect = {
	KIR_diary_SG_RESET_FRAMES = yes
	set_variable = { protagonist_2_frame = 1 }
	set_variable = { KIR_diary_SG_entry_var = 0 }
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_diary_SG_protag_3_button_click_effect = {
	KIR_diary_SG_RESET_FRAMES = yes
	set_variable = { protagonist_3_frame = 1 }
	set_variable = { KIR_diary_SG_entry_var = 0 }
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_diary_SG_protag_4_button_click_effect = {
	KIR_diary_SG_RESET_FRAMES = yes
	set_variable = { protagonist_4_frame = 1 }
	set_variable = { KIR_diary_SG_entry_var = 0 }
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_diary_SG_protag_5_button_click_effect = {
	KIR_diary_SG_RESET_FRAMES = yes
	set_variable = { protagonist_5_frame = 1 }
	set_variable = { KIR_diary_SG_entry_var = 0 }
	add_to_variable = { KIR_diary_SG_DIRTY = 1 }
}

KIR_civil_war_transfer_diary_variables_effect = {
	set_variable = { KIR_diary_SG_protag_1_button_var = KIR.KIR_diary_SG_protag_1_button_var }
	set_variable = { KIR_diary_SG_protag_2_button_var = KIR.KIR_diary_SG_protag_2_button_var }
	set_variable = { KIR_diary_SG_protag_3_button_var = KIR.KIR_diary_SG_protag_3_button_var }
	set_variable = { KIR_diary_SG_protag_4_button_var = KIR.KIR_diary_SG_protag_4_button_var }
	set_variable = { KIRDiary1Entry1TitleVar = KIR.KIRDiary1Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_1_var = KIR.KIR_diary_SG_protag_1_entry_1_var }
	set_variable = { KIRDiary1Entry2TitleVar = KIR.KIRDiary1Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_2_var = KIR.KIR_diary_SG_protag_1_entry_2_var }
	set_variable = { KIRDiary1Entry3TitleVar = KIR.KIRDiary1Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_3_var = KIR.KIR_diary_SG_protag_1_entry_3_var }
	set_variable = { KIRDiary2Entry1TitleVar = KIR.KIRDiary2Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_2_entry_1_var = KIR.KIR_diary_SG_protag_2_entry_1_var }
	set_variable = { KIRDiary2Entry2TitleVar = KIR.KIRDiary2Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_2_entry_2_var = KIR.KIR_diary_SG_protag_2_entry_2_var }
	set_variable = { KIRDiary2Entry3TitleVar = KIR.KIRDiary2Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_2_entry_3_var = KIR.KIR_diary_SG_protag_2_entry_3_var }
	set_variable = { KIRDiary3Entry1TitleVar = KIR.KIRDiary3Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_3_entry_1_var = KIR.KIR_diary_SG_protag_3_entry_1_var }
	set_variable = { KIRDiary3Entry2TitleVar = KIR.KIRDiary3Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_3_entry_2_var = KIR.KIR_diary_SG_protag_3_entry_2_var }
	set_variable = { KIRDiary3Entry3TitleVar = KIR.KIRDiary3Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_3_entry_3_var = KIR.KIR_diary_SG_protag_3_entry_3_var }
	set_variable = { KIRDiary4Entry1TitleVar = KIR.KIRDiary4Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_1_var = KIR.KIR_diary_SG_protag_4_entry_1_var }
	set_variable = { KIRDiary4Entry2TitleVar = KIR.KIRDiary4Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_2_var = KIR.KIR_diary_SG_protag_4_entry_2_var }
	set_variable = { KIRDiary4Entry3TitleVar = KIR.KIRDiary4Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_3_var = KIR.KIR_diary_SG_protag_4_entry_3_var }
}

CFR_steal_diary_KIR = {
	set_country_flag = KIR_diary_SG_protag_2_UNAVAILABLE_flag
	set_country_flag = KIR_diary_SG_protag_3_UNAVAILABLE_flag
	set_country_flag = KIR_diary_SG_protag_4_UNAVAILABLE_flag
	set_variable = { var = KIR_diary_SG_protag_1_button_offset_X value = -77 }
	set_variable = { var = KIR_diary_SG_protag_1_button_offset_Y value = 18 }
	set_variable = { KIR_diary_SG_protag_1_button_var = KIR.KIR_diary_SG_protag_1_button_var }
	set_variable = { KIRDiary1Entry1TitleVar = KIR.KIRDiary1Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_1_var = KIR.KIR_diary_SG_protag_1_entry_1_var }
	set_variable = { KIRDiary1Entry2TitleVar = KIR.KIRDiary1Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_2_var = KIR.KIR_diary_SG_protag_1_entry_2_var }
	set_variable = { KIRDiary1Entry3TitleVar = KIR.KIRDiary1Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_3_var = KIR.KIR_diary_SG_protag_1_entry_3_var }
	set_variable = { KIRDiary1Entry4TitleVar = KIR.KIRDiary1Entry4TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_4_var = KIR.KIR_diary_SG_protag_1_entry_4_var }
	set_variable = { KIRDiary1Entry5TitleVar = KIR.KIRDiary1Entry5TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_5_var = KIR.KIR_diary_SG_protag_1_entry_5_var }
	set_variable = { KIRDiary1Entry6TitleVar = KIR.KIRDiary1Entry6TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_6_var = KIR.KIR_diary_SG_protag_1_entry_6_var }
	set_variable = { KIRDiary1Entry7TitleVar = KIR.KIRDiary1Entry7TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_7_var = KIR.KIR_diary_SG_protag_1_entry_7_var }
	set_variable = { KIRDiary1Entry8TitleVar = KIR.KIRDiary1Entry8TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_8_var = KIR.KIR_diary_SG_protag_1_entry_8_var }
	set_variable = { KIRDiary1Entry9TitleVar = KIR.KIRDiary1Entry9TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_9_var = KIR.KIR_diary_SG_protag_1_entry_9_var }
	set_variable = { KIRDiary1Entry10TitleVar = KIR.KIRDiary1Entry10TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_10_var = KIR.KIR_diary_SG_protag_1_entry_10_var }
	set_variable = { KIRDiary1Entry11TitleVar = KIR.KIRDiary1Entry11TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_11_var = KIR.KIR_diary_SG_protag_1_entry_11_var }
	set_variable = { KIRDiary1Entry12TitleVar = KIR.KIRDiary1Entry12TitleVar }
	set_variable = { KIR_diary_SG_protag_1_entry_12_var = KIR.KIR_diary_SG_protag_1_entry_12_var }
}

CFR_steal_diary_KIC = {
	set_country_flag = KIR_diary_SG_protag_1_UNAVAILABLE_flag
	set_country_flag = KIR_diary_SG_protag_2_UNAVAILABLE_flag
	set_country_flag = KIR_diary_SG_protag_3_UNAVAILABLE_flag
	set_variable = { var = KIR_diary_SG_protag_4_button_offset_X value = -77 }
	set_variable = { var = KIR_diary_SG_protag_4_button_offset_Y value = 18 }
	set_variable = { KIR_diary_SG_protag_4_button_var = KIC.KIR_diary_SG_protag_4_button_var }
	set_variable = { KIRDiary4Entry1TitleVar = KIC.KIRDiary4Entry1TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_1_var = KIC.KIR_diary_SG_protag_4_entry_1_var }
	set_variable = { KIRDiary4Entry2TitleVar = KIC.KIRDiary4Entry2TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_2_var = KIC.KIR_diary_SG_protag_4_entry_2_var }
	set_variable = { KIRDiary4Entry3TitleVar = KIC.KIRDiary4Entry3TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_3_var = KIC.KIR_diary_SG_protag_4_entry_3_var }
	set_variable = { KIRDiary4Entry4TitleVar = KIC.KIRDiary4Entry4TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_4_var = KIC.KIR_diary_SG_protag_4_entry_4_var }
	set_variable = { KIRDiary4Entry5TitleVar = KIC.KIRDiary4Entry5TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_5_var = KIC.KIR_diary_SG_protag_4_entry_5_var }
	set_variable = { KIRDiary4Entry6TitleVar = KIC.KIRDiary4Entry6TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_6_var = KIC.KIR_diary_SG_protag_4_entry_6_var }
	set_variable = { KIRDiary4Entry7TitleVar = KIC.KIRDiary4Entry7TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_7_var = KIC.KIR_diary_SG_protag_4_entry_7_var }
	set_variable = { KIRDiary4Entry8TitleVar = KIC.KIRDiary4Entry8TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_8_var = KIC.KIR_diary_SG_protag_4_entry_8_var }
	set_variable = { KIRDiary4Entry9TitleVar = KIC.KIRDiary4Entry9TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_9_var = KIC.KIR_diary_SG_protag_4_entry_9_var }
	set_variable = { KIRDiary4Entry10TitleVar = KIC.KIRDiary4Entry10TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_10_var = KIC.KIR_diary_SG_protag_4_entry_10_var }
	set_variable = { KIRDiary4Entry11TitleVar = KIC.KIRDiary4Entry11TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_11_var = KIC.KIR_diary_SG_protag_4_entry_11_var }
	set_variable = { KIRDiary4Entry12TitleVar = KIC.KIRDiary4Entry12TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_12_var = KIC.KIR_diary_SG_protag_4_entry_12_var }
	set_variable = { KIRDiary4Entry13TitleVar = KIC.KIRDiary4Entry13TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_13_var = KIC.KIR_diary_SG_protag_4_entry_13_var }
	set_variable = { KIRDiary4Entry14TitleVar = KIC.KIRDiary4Entry14TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_14_var = KIC.KIR_diary_SG_protag_4_entry_14_var }
	set_variable = { KIRDiary4Entry15TitleVar = KIC.KIRDiary4Entry15TitleVar }
	set_variable = { KIR_diary_SG_protag_4_entry_15_var = KIC.KIR_diary_SG_protag_4_entry_15_var }
}

KIS_treasury_figure_out_prices = {
	#############################################
	## Figure out GRI Infantry Equipment Level ##
	#############################################
	if = {
		limit = {
			GRI = {
				has_tech = infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 4500 }
	}
	if = {
		limit = {
			GRI = {
				has_tech = infantry_weapons1
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 5000 }
	}
	if = {
		limit = {
			GRI = {
				has_tech = improved_infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 5500 }
	}
	if = {
		limit = {
			GRI = {
				has_tech = advanced_infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 6000 }
	}
	if = {
		limit = {
			GRI = {
				has_tech = advanced_infantry_weapons_b
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 6500 }
	}
	if = {
		limit = {
			GRI = {
				has_tech = advanced_infantry_weapons_e
			}
		}
		set_variable = { KIS_buy_guns_GRI_cost = 7000 }
	}
	#############################################
	## Figure out KIS Infantry Equipment Level ##
	#############################################
	if = {
		limit = {
			KIS = {
				has_tech = infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 3500 }
	}
	if = {
		limit = {
			KIS = {
				has_tech = infantry_weapons1
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 4000 }
	}
	if = {
		limit = {
			KIS = {
				has_tech = improved_infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 4500 }
	}
	if = {
		limit = {
			KIS = {
				has_tech = advanced_infantry_weapons
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 5000 }
	}
	if = {
		limit = {
			KIS = {
				has_tech = advanced_infantry_weapons_b
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 5500 }
	}
	if = {
		limit = {
			KIS = {
				has_tech = advanced_infantry_weapons_e
			}
		}
		set_variable = { KIS_buy_guns_KIS_cost = 6000 }
	}
}

KIS_plebiscite_calculate_average_popular_support = {
	set_variable = { KIS_plebiscite_average_popular_support = 0 }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_fragrance_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_comely_cape_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_prosperous_dell_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_rhapsody_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_viridian_coast_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_radiance_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_verdant_fields_support_var }
	add_to_variable = { KIS_plebiscite_average_popular_support = KIS_plebiscite_apricot_glen_support_var }
	multiply_variable = { KIS_plebiscite_average_popular_support = 100 }
	divide_variable = { KIS_plebiscite_average_popular_support = 8 }
	clamp_variable = {
		var = KIS_plebiscite_average_popular_support
		min = 0
		max = 100
	}
}

KIS_gain_offsite_factories_wacky_trigger_one = {
	add_offsite_building = { type = industrial_complex level = 1 }
	add_offsite_building = { type = arms_factory level = 1 }
	add_offsite_building = { type = dockyard level = 1 }
}

KIS_gain_offsite_factories_wacky_trigger_two = {
	add_offsite_building = { type = industrial_complex level = -1 }
	add_offsite_building = { type = arms_factory level = -1 }
	add_offsite_building = { type = dockyard level = -1 }
}

KIR_alleviate_failed_industrialisation_idea_effect = {
	if = {
		limit = {
			has_idea = KIR_failed_industrialisation_idea
		}
		swap_ideas = { add_idea = KIR_failed_industrialisation_idea1 remove_idea = KIR_failed_industrialisation_idea }
	}
	else_if = {
		limit = {
			has_idea = KIR_failed_industrialisation_idea1
		}
		swap_ideas = { add_idea = KIR_failed_industrialisation_idea2 remove_idea = KIR_failed_industrialisation_idea1 }
	}
	else_if = {
		limit = {
			has_idea = KIR_failed_industrialisation_idea2
		}
		swap_ideas = { add_idea = KIR_failed_industrialisation_idea3 remove_idea = KIR_failed_industrialisation_idea2 }
	}
	else_if = {
		limit = {
			has_idea = KIR_failed_industrialisation_idea3
		}
		remove_ideas = KIR_failed_industrialisation_idea3
	}
	else_if = {
		limit = {
			NOT = { 
				AND = {
					has_idea = KIR_failed_industrialisation_idea
					has_idea = KIR_failed_industrialisation_idea1
					has_idea = KIR_failed_industrialisation_idea2
					has_idea = KIR_failed_industrialisation_idea3
				}
			}
		}
		add_political_power = 100
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 2.0
			uses = 2
			category = industry
		}
	}
}

KIR_alleviate_civil_war_idea_effect = {
	if = {
		limit = {
			has_idea = KIR_civil_war
		}
		swap_ideas = { add_idea = KIR_civil_war1 remove_idea = KIR_civil_war }
	}
	else_if = {
		limit = {
			has_idea = KIR_civil_war1
		}
		swap_ideas = { add_idea = KIR_civil_war2 remove_idea = KIR_civil_war1 }
	}
	else_if = {
		limit = {
			has_idea = KIR_civil_war2
		}
		remove_ideas = KIR_civil_war2
	}
	else_if = {
		limit = {
			NOT = { 
				AND = {
					has_idea = KIR_civil_war
					has_idea = KIR_civil_war1
					has_idea = KIR_civil_war2
				}
			}
		}
		add_political_power = 150
		add_stability = 0.05
	}
}

KIR_upgrade_iron_order_idea_effect = {
	if = {
		limit = {
			has_idea = KIR_NAKP
		}
		swap_ideas = { add_idea = KIR_NAKP1 remove_idea = KIR_NAKP }
	}
	else_if = {
		limit = {
			has_idea = KIR_NAKP1
		}
		swap_ideas = { add_idea = KIR_NAKP2 remove_idea = KIR_NAKP1 }
	}
	else_if = {
		limit = {
			has_idea = KIR_NAKP2
		}
		swap_ideas = { add_idea = KIR_NAKP3 remove_idea = KIR_NAKP2 }
	}
	else_if = {
		limit = {
			has_idea = KIR_NAKP3
		}
		add_command_power = 25
		army_experience = 25
		if = {
			limit = {
				has_government = fascism
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
		}
		if = {
			limit = {
				has_government = neutrality
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
		}
	}
}

KIS_state_corporate_vassal_clear_other_vassals_effect = {
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_SYCEE_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_SYCEE_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_SYCEE_state_flag
		remove_dynamic_modifier = { modifier = KIS_SYCEE_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_GUILD_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_GUILD_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_GUILD_state_flag
		remove_dynamic_modifier = { modifier = KIS_GUILD_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_SORGHUM_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_SORGHUM_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_SORGHUM_state_flag
		remove_dynamic_modifier = { modifier = KIS_SORGHUM_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_COLLEGIUM_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_COLLEGIUM_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_COLLEGIUM_country_modifier_var
				min = 0
				max = 0.2
			}
			subtract_from_variable = { KIS_COLLEGIUM_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_COLLEGIUM_state_flag
		remove_dynamic_modifier = { modifier = KIS_COLLEGIUM_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_FRAGRANCE_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_FRAGRANCE_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_FRAGRANCE_country_modifier_var
				min = 0
				max = 0.2
			}
			subtract_from_variable = { KIS_FRAGRANCE_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_FRAGRANCE_state_flag
		set_variable = { KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_DREAMBOAT_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_DREAMBOAT_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_DREAMBOAT_country_modifier_var
				min = 0
				max = 0.2
			}
			subtract_from_variable = { KIS_DREAMBOAT_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_DREAMBOAT_state_flag
		remove_dynamic_modifier = { modifier = KIS_DREAMBOAT_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_SCARLET_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_SCARLET_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_SCARLET_country_modifier_var
				min = 0
				max = 0.2
			}
			subtract_from_variable = { KIS_SCARLET_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_SCARLET_state_flag
		remove_dynamic_modifier = { modifier = KIS_SCARLET_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_WINGLUCK_state_flag
			}
		}
		ROOT = {
			add_to_variable = { KIS_WINGLUCK_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_WINGLUCK_country_modifier_var
				min = -0.2
				max = 0
			}
			subtract_from_variable = { KIS_WINGLUCK_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_WINGLUCK_state_flag
		remove_dynamic_modifier = { modifier = KIS_WINGLUCK_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_CRANE_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_CRANE_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_CRANE_state_flag
		remove_dynamic_modifier = { modifier = KIS_CRANE_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_RHAPSODY_state_flag
			}
		}
		ROOT = {
			add_to_variable = { KIS_RHAPSODY_country_modifier_var = 0.02 }
			clamp_variable = {
				var = KIS_RHAPSODY_country_modifier_var
				min = -0.2
				max = 0
			}
			subtract_from_variable = { KIS_RHAPSODY_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_RHAPSODY_state_flag
		remove_dynamic_modifier = { modifier = KIS_RHAPSODY_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_BULL_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_BULL_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_BULL_state_flag
		remove_dynamic_modifier = { modifier = KIS_BULL_state_modifier }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_BULL_button_frame = 1 }
	}
	if = {
		limit = {
			THIS = {
				has_state_flag = KIS_selected_KIRIA_state_flag
			}
		}
		ROOT = {
			subtract_from_variable = { KIS_KIRIA_cost_var = 1000 }
		}
		clr_state_flag = KIS_selected_KIRIA_state_flag
		remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier }
		remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier_non_core }
		KIS = { remove_resource_rights = PREV }
		set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 1 }
	}
	ROOT = {
		clr_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
		add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
	}
}

KIR_upgrade_rising_fire_idea_effect = {
	if = {
		limit = {
			has_idea = KIR_rising_fire
		}
		swap_ideas = { add_idea = KIR_rising_fire_1 remove_idea = KIR_rising_fire }
	}
	else_if = {
		limit = {
			has_idea = KIR_rising_fire_1
		}
		swap_ideas = { add_idea = KIR_rising_fire_2 remove_idea = KIR_rising_fire_1 }
	}
	else_if = {
		limit = {
			has_idea = KIR_rising_fire_2
			has_completed_focus = KIR_republic_focus_back_hoof
		}
		swap_ideas = { add_idea = KIR_rising_fire_def remove_idea = KIR_rising_fire_2 }
	}
	else_if = {
		limit = {
			has_idea = KIR_rising_fire_2
			has_completed_focus = KIR_republic_focus_sacred_revolution
		}
		swap_ideas = { add_idea = KIR_rising_fire_ofs remove_idea = KIR_rising_fire_2 }
	}
	else_if = {
		limit = {
			has_idea = KIR_rising_fire_def
		}
		swap_ideas = { add_idea = KIR_rising_fire_def1 remove_idea = KIR_rising_fire_def }
	}
	else_if = {
		limit = {
			has_idea = KIR_rising_fire_ofs
		}
		swap_ideas = { add_idea = KIR_rising_fire_ofs1 remove_idea = KIR_rising_fire_ofs }
	}
}