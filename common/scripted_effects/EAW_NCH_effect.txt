NCH_spylevel_setvars = {
	FBK = { set_variable = { NCH_spylevel = 0 } }
	DMT = { set_variable = { NCH_spylevel = 0 } }
	BAK = { set_variable = { NCH_spylevel = 0 } }
	NIM = { set_variable = { NCH_spylevel = 0 } }
	DEP = { set_variable = { NCH_spylevel = 0 } }
	RCT = { set_variable = { NCH_spylevel = 0 } }
	FRE = { set_variable = { NCH_spylevel = 0 } }
	LCT = { set_variable = { NCH_spylevel = 0 } }
	WIT = { set_variable = { NCH_spylevel = 0 } }
}

NCH_spylevel_tooltip = {
	if = {
		limit = {
			check_variable = { var = NCH_spylevel value = 1 compare = equals }
		}
		custom_effect_tooltip = NCH_spylevel_none_tt
	}
	if = {
		limit = {
			check_variable = { var = NCH_spylevel value = 2 compare = equals }
		}
		custom_effect_tooltip = NCH_spylevel_weak_tt
	}
	if = {
		limit = {
			check_variable = { var = NCH_spylevel value = 3 compare = equals }
		}
		custom_effect_tooltip = NCH_spylevel_strong_tt
	}
	if = {
		limit = {
			check_variable = { var = NCH_spylevel value = 4 compare = equals }
		}
		custom_effect_tooltip = NCH_spylevel_total_tt
	}
}

NCH_get_trading_idea = {
	hidden_effect = {
		remove_ideas = {
			NCH_trade_1
			NCH_trade_2
			NCH_trade_3
			NCH_trade_4
		}
	}
	if = {
		limit = {
			check_variable = { NCH_trade_partners_iter = 1 }
		}
		add_ideas = NCH_trade_1
	}
	else_if = {
		limit = {
			check_variable = { NCH_trade_partners_iter = 2 }
		}
		add_ideas = NCH_trade_2
	}
	else_if = {
		limit = {
			check_variable = { NCH_trade_partners_iter = 3 }
		}
		add_ideas = NCH_trade_3
	}
	else_if = {
		limit = {
			check_variable = { NCH_trade_partners_iter > 3 }
		}
		add_ideas = NCH_trade_4
	}
}

NCH_set_trade_in_partner = { #This looks like old code? Negative trading modifier causes errors, seems to be nonexistent.
	remove_ideas = {
		NCH_trading_with_NCH_fascist
		NCH_trading_with_NCH_harmonic
	}
	remove_opinion_modifier = {
		#modifier = NCH_negative_trading target = NCH
	}
	remove_opinion_modifier = {
		modifier = trading target = NCH
	}
	if = {
		limit = {
			NCH = {
				has_government = fascism
			}
		}
		add_ideas = NCH_trading_with_NCH_fascist
		#add_opinion_modifier = { modifier = NCH_negative_trading target = NCH }

	}
	else = {
		add_ideas = NCH_trading_with_NCH_harmonic
		add_opinion_modifier = { modifier = trading target = NCH }
	}
	NCH = {
		add_to_variable = {
			var = NCH_trade_partners_iter
			value = 1
		}
		NCH_get_trading_idea = yes
	}
}
NCH_hate_level_modifiers = {

	if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total < 95
			}
			NOT = {
				check_variable = {
					NCH_hatred_total < 10
				}
				check_variable = {
					NCH_hatred_total < 25
				}
				check_variable = {
					NCH_hatred_total < 50
				}
				check_variable = {
					NCH_hatred_total < 75
				}
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.125 }
		set_variable = { NCH_hate_army_attack_factor = 0.125 }
		set_variable = { NCH_hate_civvie_factors = -0.1 }
		set_variable = { NCH_hate_stability_factor = -0.1 }
		set_variable = { NCH_hate_army_org_regain = -0.025 }
		
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total < 75
			}
			NOT = {
				check_variable = {
					NCH_hatred_total < 10
				}
				check_variable = {
					NCH_hatred_total < 25
				}
				check_variable = {
					NCH_hatred_total < 50
				}
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.1 }
		set_variable = { NCH_hate_army_attack_factor = 0.1 }
		set_variable = { NCH_hate_civvie_factors = -0.075 }
		set_variable = { NCH_hate_stability_factor = -0.05 }
		set_variable = { NCH_hate_army_org_regain = 0.0 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total < 50
			}
			NOT = {
				check_variable = {
					NCH_hatred_total < 10
				}
				check_variable = {
					NCH_hatred_total < 25
				}
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.05 }
		set_variable = { NCH_hate_army_attack_factor = 0.05 }
		set_variable = { NCH_hate_civvie_factors = -0.025 }
		set_variable = { NCH_hate_stability_factor = 0.0 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total < 25
			}
			NOT = {
				check_variable = {
					NCH_hatred_total < 10
				}
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.025 }
		set_variable = { NCH_hate_army_attack_factor = 0.025 }
		set_variable = { NCH_hate_civvie_factors = -0.01 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total < 10
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.0 }
		set_variable = { NCH_hate_army_attack_factor = 0.0 }
		set_variable = { NCH_hate_civvie_factors = 0.0 }
	}

	if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total > 94
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.15 }
		set_variable = { NCH_hate_army_attack_factor = 0.15 }
		set_variable = { NCH_hate_civvie_factors = -0.15 }
		set_variable = { NCH_hate_stability_factor = -0.15 }
		set_variable = { NCH_hate_army_org_regain = -0.05 }
		
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total > 74
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.125 }
		set_variable = { NCH_hate_army_attack_factor = 0.125 }
		set_variable = { NCH_hate_civvie_factors = -0.1 }
		set_variable = { NCH_hate_stability_factor = -0.1 }
		set_variable = { NCH_hate_army_org_regain = -0.025 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total > 49
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.1 }
		set_variable = { NCH_hate_army_attack_factor = 0.1 }
		set_variable = { NCH_hate_civvie_factors = -0.075 }
		set_variable = { NCH_hate_stability_factor = -0.05 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total > 24
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.05 }
		set_variable = { NCH_hate_army_attack_factor = 0.05 }
		set_variable = { NCH_hate_civvie_factors = -0.025 }
	}
	else_if = {
		limit = {
			has_country_flag = NCH_hatred_enabled
			NCH = { is_puppet = no }
			check_variable = {
				NCH_hatred_total > 9
			}
		}
		set_variable = { NCH_hate_breakthrough_factor = 0.025 }
		set_variable = { NCH_hate_army_attack_factor = 0.025 }
		set_variable = { NCH_hate_civvie_factors = -0.01 }
	}
}