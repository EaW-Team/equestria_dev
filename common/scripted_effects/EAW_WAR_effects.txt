WAR_revolution_gui_setup = {
    clear_array = WAR_revolution_map_array
    clear_array = WAR_revolution_map_x
	clear_array = WAR_revolution_map_y

    clear_array = WAR_revolution_map_tag_array
    clear_array = WAR_revolution_map_tag_x
	clear_array = WAR_revolution_map_tag_y

    add_to_array = { WAR_revolution_map_tag_array = BAT }
    add_to_array = { WAR_revolution_map_tag_x = 9 }
    add_to_array = { WAR_revolution_map_tag_y = 136 }

    BAT = {
        set_variable = { WAR_satellite_value = 5 }
    }

    add_to_array = { WAR_revolution_map_tag_array = ZAR }
    add_to_array = { WAR_revolution_map_tag_x = 86 }
    add_to_array = { WAR_revolution_map_tag_y = 104 }

    ZAR = {
        set_variable = { WAR_satellite_value = 5 }
    }

    add_to_array = { WAR_revolution_map_tag_array = BKH }
    add_to_array = { WAR_revolution_map_tag_x = 282 }
    add_to_array = { WAR_revolution_map_tag_y = 123 }

    BKH = {
        set_variable = { WAR_satellite_value = 5 }
    }

    add_to_array = { WAR_revolution_map_tag_array = CGI }
    add_to_array = { WAR_revolution_map_tag_x = 344 }
    add_to_array = { WAR_revolution_map_tag_y = 99 }

    CGI = {
        set_variable = { WAR_satellite_value = 5 }
    }

    add_to_array = { WAR_revolution_map_array = 688 }
    add_to_array = { WAR_revolution_map_x = 51 }
    add_to_array = { WAR_revolution_map_y = 115 }

    688 = {
        set_variable = { WAR_revolution_value = 34 }
        add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 691 }
    add_to_array = { WAR_revolution_map_x = 55 }
    add_to_array = { WAR_revolution_map_y = 157 }

    691 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 692 }
    add_to_array = { WAR_revolution_map_x = 66 }
    add_to_array = { WAR_revolution_map_y = 183 }

    692 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 698 }
    add_to_array = { WAR_revolution_map_x = 98 }
    add_to_array = { WAR_revolution_map_y = 73 }

    698 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 697 }
    add_to_array = { WAR_revolution_map_x = 95 }
    add_to_array = { WAR_revolution_map_y = 88 }

    697 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 699 }
    add_to_array = { WAR_revolution_map_x = 125 }
    add_to_array = { WAR_revolution_map_y = 46 }

    699 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 700 }
    add_to_array = { WAR_revolution_map_x = 198 }
    add_to_array = { WAR_revolution_map_y = 40 }

    700 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 701 }
    add_to_array = { WAR_revolution_map_x = 219 }
    add_to_array = { WAR_revolution_map_y = 30 }

    701 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 702 }
    add_to_array = { WAR_revolution_map_x = 208 }
    add_to_array = { WAR_revolution_map_y = 68 }

    702 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 703 }
    add_to_array = { WAR_revolution_map_x = 265 }
    add_to_array = { WAR_revolution_map_y = 14 }

    703 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 704 }
    add_to_array = { WAR_revolution_map_x = 280 }
    add_to_array = { WAR_revolution_map_y = 32 }

    704 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 705 }
    add_to_array = { WAR_revolution_map_x = 312 }
    add_to_array = { WAR_revolution_map_y = 18 }

    705 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 706 }
    add_to_array = { WAR_revolution_map_x = 314 }
    add_to_array = { WAR_revolution_map_y = 37 }

    706 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 707 }
    add_to_array = { WAR_revolution_map_x = 241 }
    add_to_array = { WAR_revolution_map_y = 90 }

    707 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 708 }
    add_to_array = { WAR_revolution_map_x = 269 }
    add_to_array = { WAR_revolution_map_y = 97 }

    708 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 709 }
    add_to_array = { WAR_revolution_map_x = 170 }
    add_to_array = { WAR_revolution_map_y = 64 }

    709 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 710 }
    add_to_array = { WAR_revolution_map_x = 72 }
    add_to_array = { WAR_revolution_map_y = 108 }

    710 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 711 }
    add_to_array = { WAR_revolution_map_x = 117 }
    add_to_array = { WAR_revolution_map_y = 94 }

    711 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 714 }
    add_to_array = { WAR_revolution_map_x = 312 }
    add_to_array = { WAR_revolution_map_y = 5 }

    714 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 743 }
    add_to_array = { WAR_revolution_map_x = 56 }
    add_to_array = { WAR_revolution_map_y = 146 }

    743 = {
        set_variable = { WAR_revolution_value = 61 }
        add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 744 }
    add_to_array = { WAR_revolution_map_x = 83 }
    add_to_array = { WAR_revolution_map_y = 138 }

    744 = {
        set_variable = { WAR_revolution_value = 18 }
        add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 751 }
    add_to_array = { WAR_revolution_map_x = 319 }
    add_to_array = { WAR_revolution_map_y = 94 }

    751 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 815 }
    add_to_array = { WAR_revolution_map_x = 37 }
    add_to_array = { WAR_revolution_map_y = 195 }

    815 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 852 }
    add_to_array = { WAR_revolution_map_x = 159 }
    add_to_array = { WAR_revolution_map_y = 25 }

    852 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 875 }
    add_to_array = { WAR_revolution_map_x = 237 }
    add_to_array = { WAR_revolution_map_y = 60 }

    875 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 876 }
    add_to_array = { WAR_revolution_map_x = 199 }
    add_to_array = { WAR_revolution_map_y = 83 }

    876 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 877 }
    add_to_array = { WAR_revolution_map_x = 145 }
    add_to_array = { WAR_revolution_map_y = 51 }

    877 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 933 }
    add_to_array = { WAR_revolution_map_x = 348 }
    add_to_array = { WAR_revolution_map_y = 58 }

    933 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1089 }
    add_to_array = { WAR_revolution_map_x = 284 }
    add_to_array = { WAR_revolution_map_y = 68 }

    1089 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1092 }
    add_to_array = { WAR_revolution_map_x = 407 }
    add_to_array = { WAR_revolution_map_y = 46 }

    1092 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1093 }
    add_to_array = { WAR_revolution_map_x = 352 }
    add_to_array = { WAR_revolution_map_y = 22 }

    1093 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1094 }
    add_to_array = { WAR_revolution_map_x = 370 }
    add_to_array = { WAR_revolution_map_y = 40 }

    1094 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1095 }
    add_to_array = { WAR_revolution_map_x = 409 }
    add_to_array = { WAR_revolution_map_y = 17 }

    1095 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1205 }
    add_to_array = { WAR_revolution_map_x = 70 }
    add_to_array = { WAR_revolution_map_y = 171 }

    1205 = {
        set_variable = { WAR_revolution_value = -1 }
        #add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_array = { WAR_revolution_map_array = 1206 }
    add_to_array = { WAR_revolution_map_x = 58 }
    add_to_array = { WAR_revolution_map_y = 127 }

    1206 = {
        set_variable = { WAR_revolution_value = 45 }
        add_dynamic_modifier = { modifier = WAR_revolution_effect }
        WAR_revolution_update_value = yes
    }

    add_to_variable = { WAR_revolution_dirty_bit = 1 }

    log = "Vive la Revolution"
}

WAR_revolution_update_value = {
    if = {
        limit = {
            check_variable =  {
                WAR_revolution_value > -1
            }
            check_variable =  {
                WAR_revolution_value < 15
            }
        }
        set_variable = { THIS.WAR_state_manpower = -0.1 }
        set_variable = { THIS.WAR_state_factories = -0.2 }
        set_variable = { THIS.WAR_state_building = -0.15 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_revolution_value > 14
            }
            check_variable =  {
                WAR_revolution_value < 40
            }
        }
        set_variable = { THIS.WAR_state_manpower = -0.05 }
        set_variable = { THIS.WAR_state_factories = -0.1 }
        set_variable = { THIS.WAR_state_building = -0.05 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_revolution_value > 39
            }
            check_variable =  {
                WAR_revolution_value < 60
            }
        }
        set_variable = { THIS.WAR_state_manpower = 0 }
        set_variable = { THIS.WAR_state_factories = 0 }
        set_variable = { THIS.WAR_state_building = 0 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_revolution_value > 59
            }
            check_variable =  {
                WAR_revolution_value < 85
            }
        }
        set_variable = { THIS.WAR_state_manpower = 0.05 }
        set_variable = { THIS.WAR_state_factories = 0.1 }
        set_variable = { THIS.WAR_state_building = 0.05 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_revolution_value > 84
            }
            check_variable =  {
                WAR_revolution_value < 101
            }
        }
        set_variable = { THIS.WAR_state_manpower = 0.1 }
        set_variable = { THIS.WAR_state_factories = 0.2 }
        set_variable = { THIS.WAR_state_building = 0.15 }
    }
    else = {
        set_variable = { THIS.WAR_state_manpower = 0 }
        set_variable = { THIS.WAR_state_factories = 0 }
        set_variable = { THIS.WAR_state_building = 0 }
    }
    force_update_dynamic_modifier = yes
}

WAR_revolution_tag_update_value = {
    if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > -1
            }
            check_variable =  {
                WAR_satellite_value < 1
            }
        }
        set_variable = { WAR_revolution_tag_effect_stability = -0.1 }
        set_variable = { WAR_revolution_tag_effect_war_supp = -0.1 }
        set_variable = { WAR_revolution_tag_effect_building_speed = -0.1 }
        set_variable = { WAR_revolution_tag_effect_conscription = -0.05 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = -0.2 }
        set_variable = { WAR_revolution_tag_effect_army_org = -0.2 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 0.9
            }
            check_variable =  {
                WAR_satellite_value < 2
            }
        }
        set_variable = { WAR_revolution_tag_effect_stability = -0.05 }
        set_variable = { WAR_revolution_tag_effect_war_supp = -0.05 }
        set_variable = { WAR_revolution_tag_effect_building_speed = -0.05 }
        set_variable = { WAR_revolution_tag_effect_conscription = -0.02 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = -0.1 }
        set_variable = { WAR_revolution_tag_effect_army_org = -0.1 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 1.9
            }
            check_variable =  {
                WAR_satellite_value < 3
            }
        }
        set_variable = { WAR_revolution_tag_effect_stability = 0 }
        set_variable = { WAR_revolution_tag_effect_war_supp = 0 }
        set_variable = { WAR_revolution_tag_effect_building_speed = 0 }
        set_variable = { WAR_revolution_tag_effect_conscription = 0 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = 0 }
        set_variable = { WAR_revolution_tag_effect_army_org = 0 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 2.9
            }
            check_variable =  {
                WAR_satellite_value < 4
            }
        }
        set_variable = { WAR_revolution_tag_effect_stability = 0.05 }
        set_variable = { WAR_revolution_tag_effect_war_supp = 0.05 }
        set_variable = { WAR_revolution_tag_effect_building_speed = 0.05 }
        set_variable = { WAR_revolution_tag_effect_conscription = 0.02 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = 0.1 }
        set_variable = { WAR_revolution_tag_effect_army_org = 0.1 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 3.9
            }
            check_variable =  {
                WAR_satellite_value < 5
            }
        }
        set_variable = { WAR_revolution_tag_effect_stability = 0.1 }
        set_variable = { WAR_revolution_tag_effect_war_supp = 0.1 }
        set_variable = { WAR_revolution_tag_effect_building_speed = 0.1 }
        set_variable = { WAR_revolution_tag_effect_conscription = 0.05 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = 0.2 }
        set_variable = { WAR_revolution_tag_effect_army_org = 0.2 }
    }
    else = {
        set_variable = { WAR_revolution_tag_effect_stability = 0 }
        set_variable = { WAR_revolution_tag_effect_war_supp = 0 }
        set_variable = { WAR_revolution_tag_effect_building_speed = 0 }
        set_variable = { WAR_revolution_tag_effect_conscription = 0 }
        set_variable = { WAR_revolution_tag_effect_reinforce_rate = 0 }
        set_variable = { WAR_revolution_tag_effect_army_org = 0 }
    }
    force_update_dynamic_modifier = yes
}

WAR_satellite_update_value = {
    set_variable = { WAR_pp_gain = 0 }
    add_to_variable = { WAR_pp_gain = BAT.WAR_pp_gain }
    add_to_variable = { WAR_pp_gain = ZAR.WAR_pp_gain }
    add_to_variable = { WAR_pp_gain = BKH.WAR_pp_gain }
    add_to_variable = { WAR_pp_gain = CGI.WAR_pp_gain }
    set_variable = { WAR_supply = 0 }
    add_to_variable = { WAR_supply = BAT.WAR_supply }
    add_to_variable = { WAR_supply = ZAR.WAR_supply }
    add_to_variable = { WAR_supply = BKH.WAR_supply }
    add_to_variable = { WAR_supply = CGI.WAR_supply }
    set_variable = { WAR_cp_gain = 0 }
    add_to_variable = { WAR_cp_gain = BAT.WAR_cp_gain }
    add_to_variable = { WAR_cp_gain = ZAR.WAR_cp_gain }
    add_to_variable = { WAR_cp_gain = BKH.WAR_cp_gain }
    add_to_variable = { WAR_cp_gain = CGI.WAR_cp_gain }
    force_update_dynamic_modifier = yes
    log = "[?WAR_pp_gain]"
    log = "[?WAR_supply]"
    log = "[?WAR_cp_gain]"
}

WAR_satellite_TAG_update_value = {
    if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > -1
            }
            check_variable =  {
                WAR_satellite_value < 1
            }
        }
        set_variable = { WAR_pp_gain = -0.03 }
        set_variable = { WAR_supply = 0.05 }
        set_variable = { WAR_cp_gain = -0.03 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 0.9
            }
            check_variable =  {
                WAR_satellite_value < 2
            }
        }
        set_variable = { WAR_pp_gain = -0.01 }
        set_variable = { WAR_supply = 0.02 }
        set_variable = { WAR_cp_gain = -0.01 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 1.9
            }
            check_variable =  {
                WAR_satellite_value < 3
            }
        }
        set_variable = { WAR_pp_gain = 0 }
        set_variable = { WAR_supply = 0 }
        set_variable = { WAR_cp_gain = 0 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 2.9
            }
            check_variable =  {
                WAR_satellite_value < 4
            }
        }
        set_variable = { WAR_pp_gain = 0.01 }
        set_variable = { WAR_supply = -0.02 }
        set_variable = { WAR_cp_gain = 0.01 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_satellite_value > 3.9
            }
            check_variable =  {
                WAR_satellite_value < 5
            }
        }
        set_variable = { WAR_pp_gain = 0.03 }
        set_variable = { WAR_supply = -0.05 }
        set_variable = { WAR_cp_gain = 0.03 }
    }
    else = {
        set_variable = { WAR_pp_gain = 0 }
        set_variable = { WAR_supply = 0 }
        set_variable = { WAR_cp_gain = 0 }
    }
    log = "[?WAR_pp_gain]"
    log = "[?WAR_supply]"
    log = "[?WAR_cp_gain]"
}

WAR_lunar_gui_setup = {
    clear_array = WAR_lunar_map_array
    clear_array = WAR_lunar_map_x
	clear_array = WAR_lunar_map_y

    add_to_array = { WAR_lunar_map_array = 689 }
    add_to_array = { WAR_lunar_map_x = 60 }
    add_to_array = { WAR_lunar_map_y = 100 }

    689 = {
        set_variable = { WAR_lunar_value = -1 }
        set_variable = { THIS.WAR_lunar_resist = 0 }
        #add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_array = { WAR_lunar_map_array = 690 }
    add_to_array = { WAR_lunar_map_x = 98 }
    add_to_array = { WAR_lunar_map_y = 73 }

    690 = {
        set_variable = { WAR_lunar_value = -1 }
        set_variable = { THIS.WAR_lunar_resist = 0 }
        #add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_array = { WAR_lunar_map_array = 691 }
    add_to_array = { WAR_lunar_map_x = 80 }
    add_to_array = { WAR_lunar_map_y = 120 }

    691 = {
        set_variable = { WAR_lunar_value = 80 }
        set_variable = { THIS.WAR_lunar_resist = 0.375 }
        add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_array = { WAR_lunar_map_array = 712 }
    add_to_array = { WAR_lunar_map_x = 66 }
    add_to_array = { WAR_lunar_map_y = 183 }

    712 = {
        set_variable = { WAR_lunar_value = -1 }
        set_variable = { THIS.WAR_lunar_resist = 0 }
        #add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_array = { WAR_lunar_map_array = 713 }
    add_to_array = { WAR_lunar_map_x = 95 }
    add_to_array = { WAR_lunar_map_y = 88 }

    713 = {
        set_variable = { WAR_lunar_value = -1 }
        set_variable = { THIS.WAR_lunar_resist = 0 }
        #add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_array = { WAR_lunar_map_array = 815 }
    add_to_array = { WAR_lunar_map_x = 70 }
    add_to_array = { WAR_lunar_map_y = 195 }

    815 = {
        set_variable = { WAR_lunar_value = 98 }
        set_variable = { THIS.WAR_lunar_resist = 0.75 }
        add_dynamic_modifier = { modifier = WAR_lunar_effect }
        WAR_lunar_update_value = yes
    }

    add_to_variable = { WAR_lunar_dirty_bit = 1 }

    log = "Bats Be Gone!"
}

WAR_lunar_update_value = {
    if = {
        limit = {
            check_variable =  {
                WAR_lunar_value > -1
            }
            check_variable =  {
                WAR_lunar_value < 15
            }
        }
        set_variable = { THIS.WAR_bat_manpower = 0.1 }
        set_variable = { THIS.WAR_bat_factories = 0.2 }
        set_variable = { THIS.WAR_bat_building = 0.15 }
        set_variable = { THIS.WAR_bat_resources = 0.1 }
        set_variable = { THIS.WAR_bat_supply = 0.25 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_lunar_value > 14
            }
            check_variable =  {
                WAR_lunar_value < 35
            }
        }
        set_variable = { THIS.WAR_bat_manpower = 0.05 }
        set_variable = { THIS.WAR_bat_factories = 0.1 }
        set_variable = { THIS.WAR_bat_building = 0.1 }
        set_variable = { THIS.WAR_bat_resources = 0.05 }
        set_variable = { THIS.WAR_bat_supply = 0.15 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_lunar_value > 34
            }
            check_variable =  {
                WAR_lunar_value < 65
            }
        }
        set_variable = { THIS.WAR_bat_manpower = 0 }
        set_variable = { THIS.WAR_bat_factories = 0 }
        set_variable = { THIS.WAR_bat_building = 0.05 }
        set_variable = { THIS.WAR_bat_resources = 0 }
        set_variable = { THIS.WAR_bat_supply = 0.05 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_lunar_value > 64
            }
            check_variable =  {
                WAR_lunar_value < 85
            }
        }
        set_variable = { THIS.WAR_bat_manpower = -0.05 }
        set_variable = { THIS.WAR_bat_factories = -0.1 }
        set_variable = { THIS.WAR_bat_building = -0.05 }
        set_variable = { THIS.WAR_bat_resources = -0.1 }
        set_variable = { THIS.WAR_bat_supply = -0.1 }
    }
    else_if = {
        limit = {
            check_variable =  {
                WAR_lunar_value > 84
            }
            check_variable =  {
                WAR_lunar_value < 101
            }
        }
        set_variable = { THIS.WAR_bat_manpower = -0.1 }
        set_variable = { THIS.WAR_bat_factories = -0.2 }
        set_variable = { THIS.WAR_bat_building = -0.1 }
        set_variable = { THIS.WAR_bat_resources = -0.15 }
        set_variable = { THIS.WAR_bat_supply = -0.2 }
    }
    else = {
        set_variable = { THIS.WAR_bat_manpower = 0 }
        set_variable = { THIS.WAR_bat_factories = 0 }
        set_variable = { THIS.WAR_bat_building = 0 }
        set_variable = { THIS.WAR_bat_resources = 0 }
        set_variable = { THIS.WAR_bat_supply = 0 }
    }
    force_update_dynamic_modifier = yes
}
