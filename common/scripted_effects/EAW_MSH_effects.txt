calculate_MSH_piety = {
    set_temp_variable = { MSH_piety_temp = MSH_piety } # Copy variable between 0 and 100

    set_temp_variable = { MSH_reverse_piety_temp = 100 }
    subtract_from_temp_variable = { MSH_reverse_piety_temp = MSH_piety_temp } #While piety temp increases, reverse piety decreases

    divide_temp_variable = { MSH_piety_temp = 100 } #Variable is now -1 to 1
    divide_temp_variable = { MSH_reverse_piety_temp = 100 }

    set_temp_variable = { MSH_piety_min_ppf = 0.15 }
    set_temp_variable = { MSH_piety_min_wkstab = 0.005 }
    set_temp_variable = { MSH_piety_min_indcap = 0.10 }
    set_temp_variable = { MSH_piety_min_moralf = 0.10 }

    set_temp_variable = { MSH_piety_max_locresf = 0.15 }
    set_temp_variable = { MSH_piety_max_compgain = 0.10 }
    set_temp_variable = { MSH_piety_max_consgood = -0.10 }
    set_temp_variable = { MSH_piety_max_supplycomp = -0.10 }

    multiply_temp_variable = { MSH_piety_min_ppf = MSH_piety_temp }
    multiply_temp_variable = { MSH_piety_min_wkstab = MSH_piety_temp }
    multiply_temp_variable = { MSH_piety_min_indcap = MSH_piety_temp }
    multiply_temp_variable = { MSH_piety_min_moralf = MSH_piety_temp }

    multiply_temp_variable = { MSH_piety_max_locresf = MSH_reverse_piety_temp }
    multiply_temp_variable = { MSH_piety_max_compgain = MSH_reverse_piety_temp }
    multiply_temp_variable = { MSH_piety_max_consgood = MSH_reverse_piety_temp }
    multiply_temp_variable = { MSH_piety_max_supplycomp = MSH_reverse_piety_temp }

    set_variable = { modif_MSH_piety_min_ppf = MSH_piety_min_ppf }
    set_variable = { modif_MSH_piety_min_wkstab = MSH_piety_min_wkstab }
    set_variable = { modif_MSH_piety_min_indcap = MSH_piety_min_indcap }
    set_variable = { modif_MSH_piety_min_moralf = MSH_piety_min_moralf }
    set_variable = { modif_MSH_piety_max_locresf = MSH_piety_max_locresf }
    set_variable = { modif_MSH_piety_max_compgain = MSH_piety_max_compgain }
    set_variable = { modif_MSH_piety_max_consgood = MSH_piety_max_consgood }
    set_variable = { modif_MSH_piety_max_supplycomp = MSH_piety_max_supplycomp }
    force_update_dynamic_modifier = yes
}