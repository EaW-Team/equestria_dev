calculate_TRO_CTH_corruption = {
	set_temp_variable = { TRO_CTH_corruption_temp = TRO_CTH_corruption } # Copy variable between 0 and 100
	subtract_from_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now between -50 to 50
	divide_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now -1 to 1

	set_temp_variable = { TRO_CTH_corruption_min_ppf = -0.15 }
	set_temp_variable = { TRO_CTH_corruption_min_wkstab = -0.005 }
	set_temp_variable = { TRO_CTH_corruption_min_indcap = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_min_moralf = -0.1 }

	set_temp_variable = { TRO_CTH_corruption_max_locresf = 0.15 }
	set_temp_variable = { TRO_CTH_corruption_max_compgain = 0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_consgood = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_supplycomp = -0.1 }

	multiply_temp_variable = { TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_temp}

	set_variable = { modif_TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_min_ppf}
	set_variable = { modif_TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_min_wkstab}
	set_variable = { modif_TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_min_indcap}
	set_variable = { modif_TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_min_moralf}
	set_variable = { modif_TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_max_locresf}
	set_variable = { modif_TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_max_compgain}
	set_variable = { modif_TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_max_consgood}
	set_variable = { modif_TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_max_supplycomp}
	force_update_dynamic_modifier = yes
	
	TRO_calculate_corruption_karma_gui = yes
}

# x = 2.62a + 81 where a is the corruption var.
TRO_calculate_corruption_karma_gui = {
	set_temp_variable = { x_calc = TRO_CTH_corruption }
	multiply_temp_variable = { x_calc = 2.62 }
	add_to_temp_variable = { x_calc = 81 }
	set_variable = { TRO_corruption_karma_x = x_calc }
}

TRO_modify_army_of_the_republic = {
	custom_effect_tooltip = TRO_CTH_army_reforms_main_tp
	add_to_variable = { TRO_CTH_army_conscription_factor_var = temp_conscription_factor }
	add_to_variable = { TRO_CTH_planning_speed_factor_var = temp_planning }
	add_to_variable = { TRO_CTH_mobilization_speed_var = temp_mob }
	add_to_variable = { TRO_CTH_conscription_var = temp_conscription }
	add_to_variable = { TRO_CTH_army_org_regain_var = temp_army_org_regain }
	add_to_variable = { TRO_CTH_training_time_factor_var = temp_training_time_factor }
	add_to_variable = { TRO_CTH_army_fuel_consumption_factor_var = temp_army_fuel_consumption_factor }
	add_to_variable = { TRO_CTH_industrial_capacity_factory_1_var = temp_industrial_capacity_factory }
	add_to_variable = { TRO_CTH_army_defence_factor_var = temp_army_defence_factor }
	add_to_variable = { TRO_CTH_no_supply_grace_var = temp_no_supply_factor }
	add_to_variable = { TRO_CTH_supply_consumption_factor_var = temp_supply_consumption_factor }
	add_to_variable = { TRO_CTH_modifier_army_sub_unit_spirit_warriors_attack_factor_var = temp_chargers }
	add_to_variable = { TRO_CTH_production_factory_start_efficiency_factor_var = temp_start_eff }
	add_to_variable = { TRO_CTH_special_forces_attack_factor_var = temp_sf_attack }
	add_to_variable = { TRO_CTH_army_org_factor_var = temp_army_org_factor }
	add_to_variable = { TRO_CTH_army_speed_factor_var = temp_army_speed_factor }
	add_to_variable = { TRO_CTH_out_of_supply_factor_var = temp_out_of_supply_factor }
	add_to_variable = { TRO_CTH_org_loss_when_moving_var = temp_org_loss_when_moving }
	add_to_variable = { TRO_CTH_army_attack_factor_var = temp_army_attack_factor }
	add_to_variable = { TRO_CTH_special_forces_cap_var = temp_special_forces_cap }
	add_to_variable = { TRO_CTH_army_morale_factor_var = temp_army_morale_factor }
	force_update_dynamic_modifier = yes
}

TRO_modify_economic_development = {
	custom_effect_tooltip = TRO_CTH_economic_development_main_tp
	add_to_variable = { TRO_CTH_consumer_goods_var = temp_consumer_goods }
	add_to_variable = { TRO_CTH_monthly_population_var = temp_monthly_pop }
	add_to_variable = { TRO_CTH_political_power_factor_1_var = temp_pp_factor }
	add_to_variable = { TRO_CTH_global_building_slots_factor_var = temp_global_building_slots }
	add_to_variable = { TRO_CTH_trade_opinion_factor_var = temp_trade_opinion }
	add_to_variable = { TRO_CTH_min_export_var = temp_min_export }
	add_to_variable = { TRO_CTH_industrial_capacity_factory_2_var = temp_ic }
	add_to_variable = { TRO_CTH_local_resources_factor_var = temp_local_resources }
	add_to_variable = { TRO_CTH_stability_weekly_1_var = temp_weekly_stability }
	add_to_variable = { TRO_CTH_production_factory_start_efficiency_factor_var_2 = temp_start_eff_2 }
	add_to_variable = { TRO_CTH_production_speed_buildings_factor_var = temp_construction }
	add_to_variable = { TRO_CTH_production_factory_efficiency_gain_factor_var = temp_eff_gain }
	force_update_dynamic_modifier = yes
}

TRO_CTH_modify_social_policy_modifier = {
	custom_effect_tooltip = TRO_CTH_social_policy_modifier_main_tp
	add_to_variable = { TRO_CTH_stability_weekly_2_var = temp_weekly_stability }
	add_to_variable = { TRO_CTH_weekly_war_support_var = temp_weekly_war_support }
	add_to_variable = { TRO_CTH_army_conscription_factor_2_var = temp_conscription_factor }
	add_to_variable = { TRO_CTH_consumer_goods_2_var = temp_consumer_goods }
	add_to_variable = { TRO_CTH_research_speed_var = temp_research_speed }
	add_to_variable = { TRO_CTH_political_advisor_cost_factor_2_var = temp_political_advisor_cost_factor }
	add_to_variable = { TRO_CTH_compliance_growth_var = temp_compliance_growth }
	add_to_variable = { TRO_CTH_resistance_damage_to_garrison_var = temp_resistance_damage_to_garrison }
	add_to_variable = { TRO_CTH_resistance_growth_var = temp_resistance_growth }
	add_to_variable = { TRO_CTH_required_garrison_factor_var = temp_required_garrison_factor }
	add_to_variable = { TRO_CTH_political_power_factor_3_var = temp_pp_factor }
	add_to_variable = { TRO_CTH_local_resources_factor_2_var = temp_local_resources }
	force_update_dynamic_modifier = yes
}

TRO_CTH_modify_politics_modifier = {
	custom_effect_tooltip = TRO_CTH_politics_modifier_main_tp
	add_to_variable = { TRO_CTH_political_power_factor_2_var = temp_pp_factor }
	add_to_variable = { TRO_CTH_war_stability_factor_var = temp_war_stability_factor }
	add_to_variable = { TRO_CTH_fascism_drift_var = temp_fascism_drift }
	add_to_variable = { TRO_CTH_political_advisor_cost_factor_var = temp_political_advisor_cost_factor }
	add_to_variable = { TRO_CTH_party_popularity_stability_factor_var = temp_party_popularity_stability_factor }
	add_to_variable = { TRO_CTH_stability_factor_var = temp_stability_factor }
	add_to_variable = { TRO_CTH_production_factory_efficiency_gain_factor_2_var = temp_eff_gain }
	add_to_variable = { TRO_CTH_industrial_capacity_factory_3_var = temp_ic }
	add_to_variable = { TRO_CTH_consumer_goods_3_var = temp_consumer_goods_2 }
	add_to_variable = { TRO_CTH_research_speed_2_var = temp_research_speed_2 }
	add_to_variable = { TRO_CTH_neutrality_drift_var = temp_neutrality_drift }
	force_update_dynamic_modifier = yes
}

TRO_CTH_evaluate_sphere_great_game_points = {
	subtract_from_variable = { TRO_CTH_geopolitics_points = prev_sphere_points }
	set_temp_variable = { points = 0 }
	for_each_scope_loop = {
		array = TRO_CTH_economic_sphere_countries
		log = "TRO Great Game script. ([THIS.GetTag]): [THIS.GetName] ruling ideology: [THIS.GetRulingIdeology]"
		if = {
			limit = {
				original_tag = ZES
				has_government = democratic
			}
			log = "No points are added for ([THIS.GetTag]): [THIS.GetName]"
		}
		else_if = {
			limit = {
				exists = yes
				OR = {
					is_subject = no
					is_subject_of = ROOT
				}
				NOT = {
					has_government = communism
				}
			}
			add_to_temp_variable = { points = 5 }
			log = "Add 5 points to a total of [?points]"
		}
		else_if = {
			limit = {
				is_subject = yes
				NOT = {
					is_subject_of = ROOT
					has_government = communism
				}
			}
			add_to_temp_variable = { points = 2.5 }
			log = "Add 2.5 points to a total of [?points]"
		}
		else = {
			log = "No points are added for ([THIS.GetTag]): [THIS.GetName]"
		}
	}
	set_variable = { prev_sphere_points = points }
	add_to_variable = { TRO_CTH_geopolitics_points = points }
	clamp_variable = {
		var = TRO_CTH_geopolitics_points
		min = 0
		max = 100
	}
}

# Join the war on drugs (On the side of the drugs)

TRO_join_the_war_on_drugs_on_the_side_of_the_drugs = {
	set_country_flag = TRO_CTH_enable_drugs_lmao
	
	# Mid section setup
	clear_array = TRO_drugs_dummy_midsection
	add_to_array = { TRO_drugs_dummy_midsection = 0 }
	
	clear_array = TRO_drugs_friendly_power_status
	clear_array = TRO_drugs_friendly_relations_status
	resize_array = {
		array = TRO_drugs_friendly_power_status
		value = 0
		size = 5
	}
	resize_array = {
		array = TRO_drugs_friendly_relations_status
		value = 0
		size = 5
	}
	
	clear_array = TRO_drugs_enemy_influence_status
	clear_array = TRO_drugs_enemy_control_status
	clear_array = TRO_drugs_enemy_aggression_status
	resize_array = {
		array = TRO_drugs_enemy_influence_status
		value = 0
		size = 5
	}
	resize_array = {
		array = TRO_drugs_enemy_control_status
		value = 0
		size = 5
	}
	resize_array = {
		array = TRO_drugs_enemy_aggression_status
		value = 0
		size = 5
	}
	
	# Map gui setup
	clear_array = TRO_drugs_map_array
	clear_array = TRO_drugs_map_x
	clear_array = TRO_drugs_map_y

	add_to_array = { TRO_drugs_map_array = 699 }
	add_to_array = { TRO_drugs_map_array = 852 }
	add_to_array = { TRO_drugs_map_array = 875 }
	add_to_array = { TRO_drugs_map_array = 877 }
	add_to_array = { TRO_drugs_map_array = 700 }
	add_to_array = { TRO_drugs_map_array = 701 }
	add_to_array = { TRO_drugs_map_array = 702 }
	add_to_array = { TRO_drugs_map_array = 876 }
	add_to_array = { TRO_drugs_map_array = 703 }
	add_to_array = { TRO_drugs_map_array = 704 }
	add_to_array = { TRO_drugs_map_array = 705 }
	add_to_array = { TRO_drugs_map_array = 706 }
	add_to_array = { TRO_drugs_map_array = 709 }
	add_to_array = { TRO_drugs_map_array = 714 }
	add_to_array = { TRO_drugs_map_array = 1093 }
	add_to_array = { TRO_drugs_map_array = 1094 }
	add_to_array = { TRO_drugs_map_array = 1095 }
	
	add_to_array = { TRO_drugs_map_x = 6 } # 699
	add_to_array = { TRO_drugs_map_y = 69 }

	add_to_array = { TRO_drugs_map_x = 60 } # 852
	add_to_array = { TRO_drugs_map_y = 35 }

	add_to_array = { TRO_drugs_map_x = 183 } # 875
	add_to_array = { TRO_drugs_map_y = 92 }

	add_to_array = { TRO_drugs_map_x = 35 } # 877
	add_to_array = { TRO_drugs_map_y = 77 }
	
	add_to_array = { TRO_drugs_map_x = 123 } # 700
	add_to_array = { TRO_drugs_map_y = 60 }

	add_to_array = { TRO_drugs_map_x = 153 } # 701
	add_to_array = { TRO_drugs_map_y = 43 }

	add_to_array = { TRO_drugs_map_x = 138 } # 702
	add_to_array = { TRO_drugs_map_y = 104 }

	add_to_array = { TRO_drugs_map_x = 124 } # 876
	add_to_array = { TRO_drugs_map_y = 129 }

	add_to_array = { TRO_drugs_map_x = 225 } # 703
	add_to_array = { TRO_drugs_map_y = 19 }

	add_to_array = { TRO_drugs_map_x = 252 } # 704
	add_to_array = { TRO_drugs_map_y = 48 }

	add_to_array = { TRO_drugs_map_x = 303 } # 705
	add_to_array = { TRO_drugs_map_y = 23 }

	add_to_array = { TRO_drugs_map_x = 305 } # 706
	add_to_array = { TRO_drugs_map_y = 50 }

	add_to_array = { TRO_drugs_map_x = 77 } # 709
	add_to_array = { TRO_drugs_map_y = 98 }

	add_to_array = { TRO_drugs_map_x = 300 } # 714
	add_to_array = { TRO_drugs_map_y = 5 }

	add_to_array = { TRO_drugs_map_x = 366 } # 1093
	add_to_array = { TRO_drugs_map_y = 30 }

	add_to_array = { TRO_drugs_map_x = 394 } # 1094
	add_to_array = { TRO_drugs_map_y = 58 }

	add_to_array = { TRO_drugs_map_x = 455 } # 1095
	add_to_array = { TRO_drugs_map_y = 23 }
	
	# States control setup
	set_variable = { 699.TRO_drugs_ruling_cartel = 1 }
	set_variable = { 700.TRO_drugs_ruling_cartel = 2 }
	set_variable = { 701.TRO_drugs_ruling_cartel = 0 }
	set_variable = { 702.TRO_drugs_ruling_cartel = 3 }
	set_variable = { 703.TRO_drugs_ruling_cartel = 1 }
	set_variable = { 704.TRO_drugs_ruling_cartel = 4 }
	set_variable = { 705.TRO_drugs_ruling_cartel = 0 }
	set_variable = { 706.TRO_drugs_ruling_cartel = 4 }
	set_variable = { 709.TRO_drugs_ruling_cartel = 2 }
	set_variable = { 714.TRO_drugs_ruling_cartel = 1 }
	set_variable = { 852.TRO_drugs_ruling_cartel = 2 }
	set_variable = { 875.TRO_drugs_ruling_cartel = 5 }
	set_variable = { 876.TRO_drugs_ruling_cartel = 3 }
	set_variable = { 877.TRO_drugs_ruling_cartel = 0 }
	set_variable = { 1093.TRO_drugs_ruling_cartel = 0 }
	set_variable = { 1094.TRO_drugs_ruling_cartel = 4 }
	set_variable = { 1095.TRO_drugs_ruling_cartel = 0 }
	
	add_to_variable = { TRO_drugs_dirty_bit = 0.001 }
}

TRO_drugs_reassign_state_dynmods = {
	hidden_effect = {
		for_each_loop = {
			array = TRO_drugs_map_array
			var:v = {
				if = {
					limit = {
						has_dynamic_modifier = { modifier = TRO_CTH_drugs_tiger_dynmod }
					}
					remove_dynamic_modifier = { modifier = TRO_CTH_drugs_tiger_dynmod }
				}
				if = {
					limit = {
						has_dynamic_modifier = { modifier = TRO_CTH_drugs_zaga_dynmod }
					}
					remove_dynamic_modifier = { modifier = TRO_CTH_drugs_zaga_dynmod }
				}
				if = {
					limit = {
						has_dynamic_modifier = { modifier = TRO_CTH_drugs_zapsa_dynmod }
					}
					remove_dynamic_modifier = { modifier = TRO_CTH_drugs_zapsa_dynmod }
				}
				if = {
					limit = {
						has_dynamic_modifier = { modifier = TRO_CTH_drugs_zurumilki_dynmod }
					}
					remove_dynamic_modifier = { modifier = TRO_CTH_drugs_zurumilki_dynmod }
				}
				if = {
					limit = {
						has_dynamic_modifier = { modifier = TRO_CTH_drugs_abizaal_dynmod }
					}
					remove_dynamic_modifier = { modifier = TRO_CTH_drugs_abizaal_dynmod }
				}
				
				if = {
					limit = {
						check_variable = { TRO_drugs_ruling_cartel = 0 }
						has_variable = TRO_drugs_ruling_cartel
					}
					add_dynamic_modifier = { modifier = TRO_CTH_drugs_tiger_dynmod }
				}
				else_if = {
					limit = {
						check_variable = { TRO_drugs_ruling_cartel = 1 }
					}
					add_dynamic_modifier = { modifier = TRO_CTH_drugs_zaga_dynmod }
				}
				else_if = {
					limit = {
						check_variable = { TRO_drugs_ruling_cartel = 2 }
					}
					add_dynamic_modifier = { modifier = TRO_CTH_drugs_zapsa_dynmod }
				}
				else_if = {
					limit = {
						check_variable = { TRO_drugs_ruling_cartel = 3 }
					}
					add_dynamic_modifier = { modifier = TRO_CTH_drugs_zurumilki_dynmod }
				}
				else_if = {
					limit = {
						check_variable = { TRO_drugs_ruling_cartel = 4 }
					}
					add_dynamic_modifier = { modifier = TRO_CTH_drugs_abizaal_dynmod }
				}
			}
		}
		TRO_drugs_recalculate_dynmod_values = yes
	}
}

TRO_drugs_recalculate_dynmod_values = {
	clear_array = TRO_drugs_tiger_dynmod_array
	clear_array = TRO_drugs_zaga_dynmod_array
	clear_array = TRO_drugs_zapsa_dynmod_array
	clear_array = TRO_drugs_zurumilki_dynmod_array
	clear_array = TRO_drugs_abizaal_dynmod_array

	if = {
		limit = {
			NOT = { is_in_array = { array = TRO_cartels_finished value = 0 } }
		}
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^0 = 1 }
			}
			set_temp_variable = { x = TRO_drugs_friendly_power_status^0 }
			divide_temp_variable = { x = 100 }
			set_temp_variable = { y = TRO_drugs_friendly_relations_status^0 }
			divide_temp_variable = { y = 100 }
			subtract_from_temp_variable = { y = 0.5 }
			multiply_temp_variable = { y = 2 }
			
			add_to_array = { TRO_drugs_tiger_dynmod_array = 0.2 }
			add_to_array = { TRO_drugs_tiger_dynmod_array = 0.1 }
			if = {
				limit = {
					check_variable = { x > 0.5 }
					check_variable = { y > 0 }
				}
				add_to_array = { TRO_drugs_tiger_dynmod_array = -0.15 }
			}
			for_each_loop = {
				array = TRO_drugs_tiger_dynmod_array
				multiply_variable = { TRO_drugs_tiger_dynmod_array^i = x }
				multiply_variable = { TRO_drugs_tiger_dynmod_array^i = y }
			}
		}
		else = {
			set_temp_variable = { z = TRO_drugs_enemy_control_status^0 }
			subtract_from_temp_variable = { z = 40 }
			divide_temp_variable = { z = 60 }
		
			add_to_array = { TRO_drugs_tiger_dynmod_array = -0.15 }
			add_to_array = { TRO_drugs_tiger_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_tiger_dynmod_array = -0.2 }
			for_each_loop = {
				array = TRO_drugs_tiger_dynmod_array
				multiply_variable = { TRO_drugs_tiger_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			NOT = { is_in_array = { array = TRO_cartels_finished value = 1 } }
		}
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^1 = 1 }
			}
			set_temp_variable = { x = TRO_drugs_friendly_power_status^1 }
			divide_temp_variable = { x = 100 }
			set_temp_variable = { y = TRO_drugs_friendly_relations_status^1 }
			divide_temp_variable = { y = 100 }
			subtract_from_temp_variable = { y = 0.5 }
			multiply_temp_variable = { y = 2 }
			
			add_to_array = { TRO_drugs_zaga_dynmod_array = -0.3 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = 0.1 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = 0.25 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = -0.1 }
			for_each_loop = {
				array = TRO_drugs_zaga_dynmod_array
				multiply_variable = { TRO_drugs_zaga_dynmod_array^i = x }
				multiply_variable = { TRO_drugs_zaga_dynmod_array^i = y }
			}
		}
		else = {
			set_temp_variable = { z = TRO_drugs_enemy_control_status^1 }
			subtract_from_temp_variable = { z = 40 }
			divide_temp_variable = { z = 60 }
		
			add_to_array = { TRO_drugs_zaga_dynmod_array = 0.2 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = -0.2 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_zaga_dynmod_array = -0.25 }
			for_each_loop = {
				array = TRO_drugs_zaga_dynmod_array
				multiply_variable = { TRO_drugs_zaga_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			NOT = { is_in_array = { array = TRO_cartels_finished value = 02} }
		}
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^2 = 1 }
			}
			set_temp_variable = { x = TRO_drugs_friendly_power_status^2 }
			divide_temp_variable = { x = 100 }
			set_temp_variable = { y = TRO_drugs_friendly_relations_status^2 }
			divide_temp_variable = { y = 100 }
			subtract_from_temp_variable = { y = 0.5 }
			multiply_temp_variable = { y = 2 }
			
			add_to_array = { TRO_drugs_zapsa_dynmod_array = 0.2 }
			add_to_array = { TRO_drugs_zapsa_dynmod_array = 0.15 }
			add_to_array = { TRO_drugs_zapsa_dynmod_array = 0.1 }
			for_each_loop = {
				array = TRO_drugs_zapsa_dynmod_array
				multiply_variable = { TRO_drugs_zapsa_dynmod_array^i = x }
				multiply_variable = { TRO_drugs_zapsa_dynmod_array^i = y }
			}
		}
		else = {
			set_temp_variable = { z = TRO_drugs_enemy_control_status^2 }
			subtract_from_temp_variable = { z = 40 }
			divide_temp_variable = { z = 60 }
			
			add_to_array = { TRO_drugs_zapsa_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_zapsa_dynmod_array = -0.15 }
			add_to_array = { TRO_drugs_zapsa_dynmod_array = -0.125 }
			for_each_loop = {
				array = TRO_drugs_zapsa_dynmod_array
				multiply_variable = { TRO_drugs_zapsa_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			NOT = { is_in_array = { array = TRO_cartels_finished value = 3 } }
		}
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^3 = 1 }
			}
			set_temp_variable = { x = TRO_drugs_friendly_power_status^3 }
			divide_temp_variable = { x = 100 }
			set_temp_variable = { y = TRO_drugs_friendly_relations_status^3 }
			divide_temp_variable = { y = 100 }
			subtract_from_temp_variable = { y = 0.5 }
			multiply_temp_variable = { y = 2 }
			
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = 0.1 }
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = 0.1 }
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = 0.075 }
			for_each_loop = {
				array = TRO_drugs_zurumilki_dynmod_array
				multiply_variable = { TRO_drugs_zurumilki_dynmod_array^i = x }
				multiply_variable = { TRO_drugs_zurumilki_dynmod_array^i = y }
			}
		}
		else = {
			set_temp_variable = { z = TRO_drugs_enemy_control_status^3 }
			subtract_from_temp_variable = { z = 40 }
			divide_temp_variable = { z = 60 }
			
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_zurumilki_dynmod_array = -0.1 }
			for_each_loop = {
				array = TRO_drugs_zurumilki_dynmod_array
				multiply_variable = { TRO_drugs_zurumilki_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			NOT = { is_in_array = { array = TRO_cartels_finished value = 4 } }
		}
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^4 = 1 }
			}
			set_temp_variable = { x = TRO_drugs_friendly_power_status^4 }
			divide_temp_variable = { x = 100 }
			set_temp_variable = { y = TRO_drugs_friendly_relations_status^4 }
			divide_temp_variable = { y = 100 }
			subtract_from_temp_variable = { y = 0.5 }
			multiply_temp_variable = { y = 2 }
			
			add_to_array = { TRO_drugs_abizaal_dynmod_array = 0.125 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = 0.125 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = 0.15 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = 0.1 }
			for_each_loop = {
				array = TRO_drugs_abizaal_dynmod_array
				multiply_variable = { TRO_drugs_abizaal_dynmod_array^i = x }
				multiply_variable = { TRO_drugs_abizaal_dynmod_array^i = y }
			}
		}
		else = {
			set_temp_variable = { z = TRO_drugs_enemy_control_status^4 }
			subtract_from_temp_variable = { z = 40 }
			divide_temp_variable = { z = 60 }
			
			add_to_array = { TRO_drugs_abizaal_dynmod_array = -0.125 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = -0.125 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = -0.15 }
			add_to_array = { TRO_drugs_abizaal_dynmod_array = -0.1 }
			for_each_loop = {
				array = TRO_drugs_abizaal_dynmod_array
				multiply_variable = { TRO_drugs_abizaal_dynmod_array^i = z }
			}
		}
	}
}

TRO_drugs_recalculate_national_dynmod_values = {
	clear_variable = TRO_drugs_national_pp_factor
	clear_variable = TRO_drugs_national_stab_factor
	for_loop_effect = {
		start = 0
		end = 5
		value = v
		if = {
			limit = {
				check_variable = { TRO_cartel_action_option^v = 1 }
			}
			set_temp_variable = { pp = -0.05 }
			set_temp_variable = { pp_x = TRO_drugs_friendly_power_status^v }
			multiply_temp_variable = { pp_x = TRO_drugs_friendly_relations_status^v }
			divide_temp_variable = { pp_x = 10000 }
			multiply_temp_variable = { pp = pp_x }
		}
		else = {
			set_temp_variable = { pp = 0.05 }
			set_temp_variable = { pp_x = 100 }
			subtract_from_temp_variable = { pp_x = TRO_drugs_enemy_influence_status^v }
			set_temp_variable = { pp_y = 100 }
			subtract_from_temp_variable = { pp_y = TRO_drugs_enemy_control_status^v }
			divide_temp_variable = { pp_x = 100 }
			divide_temp_variable = { pp_y = 100 }
			multiply_temp_variable = { pp = pp_x }
			multiply_temp_variable = { pp = pp_y }
		}
		add_to_variable = { TRO_drugs_national_pp_factor = pp }
	}
	set_variable = { TRO_drugs_national_stab_factor = TRO_drugs_national_pp_factor }
	divide_variable = { TRO_drugs_national_stab_factor = 3 }
	multiply_variable = { TRO_drugs_national_stab_factor = 2 }

	clear_array = TRO_drugs_national_tiger_dynmod_array
	clear_array = TRO_drugs_national_zaga_dynmod_array
	clear_array = TRO_drugs_national_zapsa_dynmod_array
	clear_array = TRO_drugs_national_zurumilki_dynmod_array
	clear_array = TRO_drugs_national_abizaal_dynmod_array

	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^0 = 1 }
		}
		set_temp_variable = { x = TRO_drugs_friendly_power_status^0 }
		divide_temp_variable = { x = 100 }
		set_temp_variable = { y = TRO_drugs_friendly_relations_status^0 }
		divide_temp_variable = { y = 100 }
		subtract_from_temp_variable = { y = 0.5 }
		multiply_temp_variable = { y = 2 }
		
		add_to_array = { TRO_drugs_national_tiger_dynmod_array = 0.1 }
		add_to_array = { TRO_drugs_national_tiger_dynmod_array = 0.125 }
		add_to_array = { TRO_drugs_national_tiger_dynmod_array = 0.08 }
		add_to_array = { TRO_drugs_national_tiger_dynmod_array = 0.15 }
		for_each_loop = {
			array = TRO_drugs_national_tiger_dynmod_array
			multiply_variable = { TRO_drugs_national_tiger_dynmod_array^i = x }
			multiply_variable = { TRO_drugs_national_tiger_dynmod_array^i = y }
		}
		else_if = {
			limit = {
				check_variable = { TRO_cartel_action_option^0 = 2 }
			}
			set_temp_variable = { z = TRO_drugs_enemy_influence_status^0 }
			subtract_from_temp_variable = { z = 25 }
			divide_temp_variable = { z = 75 }
			
			add_to_array = { TRO_drugs_national_tiger_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_national_tiger_dynmod_array = -0.075 }
			add_to_array = { TRO_drugs_national_tiger_dynmod_array = -0.1 }
			add_to_array = { TRO_drugs_national_tiger_dynmod_array = -0.8 }
			for_each_loop = {
				array = TRO_drugs_national_tiger_dynmod_array
				multiply_variable = { TRO_drugs_national_tiger_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^1 = 1 }
		}
		set_temp_variable = { x = TRO_drugs_friendly_power_status^1 }
		divide_temp_variable = { x = 100 }
		set_temp_variable = { y = TRO_drugs_friendly_relations_status^1 }
		divide_temp_variable = { y = 100 }
		subtract_from_temp_variable = { y = 0.5 }
		multiply_temp_variable = { y = 2 }
		
		add_to_array = { TRO_drugs_national_zaga_dynmod_array = 0.15 }
		add_to_array = { TRO_drugs_national_zaga_dynmod_array = 0.1 }
		add_to_array = { TRO_drugs_national_zaga_dynmod_array = 0.15 }
		for_each_loop = {
			array = TRO_drugs_national_zaga_dynmod_array
			multiply_variable = { TRO_drugs_national_zaga_dynmod_array^i = x }
			multiply_variable = { TRO_drugs_national_zaga_dynmod_array^i = y }
		}
		else_if = {
			limit = {
				check_variable = { TRO_cartel_action_option^1 = 2 }
			}
			set_temp_variable = { z = TRO_drugs_enemy_influence_status^1 }
			subtract_from_temp_variable = { z = 25 }
			divide_temp_variable = { z = 75 }
			
			add_to_array = { TRO_drugs_national_zaga_dynmod_array = -0.125 }
			add_to_array = { TRO_drugs_national_zaga_dynmod_array = -0.175 }
			add_to_array = { TRO_drugs_national_zaga_dynmod_array = -0.15 }
			for_each_loop = {
				array = TRO_drugs_national_zaga_dynmod_array
				multiply_variable = { TRO_drugs_national_zaga_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^2 = 1 }
		}
		set_temp_variable = { x = TRO_drugs_friendly_power_status^2 }
		divide_temp_variable = { x = 100 }
		set_temp_variable = { y = TRO_drugs_friendly_relations_status^2 }
		divide_temp_variable = { y = 100 }
		subtract_from_temp_variable = { y = 0.5 }
		multiply_temp_variable = { y = 2 }
		
		add_to_array = { TRO_drugs_national_zapsa_dynmod_array = 0.15 }
		add_to_array = { TRO_drugs_national_zapsa_dynmod_array = 0.1 }
		add_to_array = { TRO_drugs_national_zapsa_dynmod_array = 0.15 }
		for_each_loop = {
			array = TRO_drugs_national_zapsa_dynmod_array
			multiply_variable = { TRO_drugs_national_zapsa_dynmod_array^i = x }
			multiply_variable = { TRO_drugs_national_zapsa_dynmod_array^i = y }
		}
		else_if = {
			limit = {
				check_variable = { TRO_cartel_action_option^2 = 2 }
			}
			set_temp_variable = { z = TRO_drugs_enemy_influence_status^2 }
			subtract_from_temp_variable = { z = 25 }
			divide_temp_variable = { z = 75 }
			
			add_to_array = { TRO_drugs_national_zapsa_dynmod_array = -0.125 }
			add_to_array = { TRO_drugs_national_zapsa_dynmod_array = -0.175 }
			add_to_array = { TRO_drugs_national_zapsa_dynmod_array = -0.15 }
			for_each_loop = {
				array = TRO_drugs_national_zapsa_dynmod_array
				multiply_variable = { TRO_drugs_national_zapsa_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^3 = 1 }
		}
		set_temp_variable = { x = TRO_drugs_friendly_power_status^3 }
		divide_temp_variable = { x = 100 }
		set_temp_variable = { y = TRO_drugs_friendly_relations_status^3 }
		divide_temp_variable = { y = 100 }
		subtract_from_temp_variable = { y = 0.5 }
		multiply_temp_variable = { y = 2 }
		
		add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = 0.003 }
		add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = 0.1 }
		add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = -0.1 }
		for_each_loop = {
			array = TRO_drugs_national_zurumilki_dynmod_array
			multiply_variable = { TRO_drugs_national_zurumilki_dynmod_array^i = x }
			multiply_variable = { TRO_drugs_national_zurumilki_dynmod_array^i = y }
		}
		else_if = {
			limit = {
				check_variable = { TRO_cartel_action_option^3 = 2 }
			}
			set_temp_variable = { z = TRO_drugs_enemy_influence_status^3 }
			subtract_from_temp_variable = { z = 25 }
			divide_temp_variable = { z = 75 }
			
			add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = -0.005 }
			add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = -0.175 }
			add_to_array = { TRO_drugs_national_zurumilki_dynmod_array = 0.15 }
			for_each_loop = {
				array = TRO_drugs_national_zurumilki_dynmod_array
				multiply_variable = { TRO_drugs_national_zurumilki_dynmod_array^i = z }
			}
		}
	}
	
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^4 = 1 }
		}
		set_temp_variable = { x = TRO_drugs_friendly_power_status^4 }
		divide_temp_variable = { x = 100 }
		set_temp_variable = { y = TRO_drugs_friendly_relations_status^4 }
		divide_temp_variable = { y = 100 }
		subtract_from_temp_variable = { y = 0.5 }
		multiply_temp_variable = { y = 2 }
		
		add_to_array = { TRO_drugs_national_abizaal_dynmod_array = 0.15 }
		add_to_array = { TRO_drugs_national_abizaal_dynmod_array = 0.125 }
		add_to_array = { TRO_drugs_national_abizaal_dynmod_array = 0.075 }
		add_to_array = { TRO_drugs_national_abizaal_dynmod_array = 0.01 }
		for_each_loop = {
			array = TRO_drugs_national_abizaal_dynmod_array
			multiply_variable = { TRO_drugs_national_abizaal_dynmod_array^i = x }
			multiply_variable = { TRO_drugs_national_abizaal_dynmod_array^i = y }
		}
		else_if = {
			limit = {
				check_variable = { TRO_cartel_action_option^4 = 2 }
			}
			set_temp_variable = { z = TRO_drugs_enemy_influence_status^4 }
			subtract_from_temp_variable = { z = 25 }
			divide_temp_variable = { z = 75 }
			
			add_to_array = { TRO_drugs_national_abizaal_dynmod_array = -0.05 }
			add_to_array = { TRO_drugs_national_abizaal_dynmod_array = -0.2 }
			add_to_array = { TRO_drugs_national_abizaal_dynmod_array = -0.05 }
			add_to_array = { TRO_drugs_national_abizaal_dynmod_array = -0.007 }
			for_each_loop = {
				array = TRO_drugs_national_abizaal_dynmod_array
				multiply_variable = { TRO_drugs_national_abizaal_dynmod_array^i = z }
			}
		}
	}
}

TRO_drugs_friendly_change_together = {
	set_temp_variable = { temp_p_change = coeff }
	set_temp_variable = { temp_r_change = coeff }
	multiply_temp_variable = { temp_r_change = 1.3 }
	
	if = {
		limit = {
			NOT = { check_variable = { p_multiplier = 0 } }
		}
		multiply_temp_variable = { temp_p_change = p_multiplier }
	}
	if = {
		limit = {
			NOT = { check_variable = { r_multiplier = 0 } }
		}
		multiply_temp_variable = { temp_r_change = r_multiplier }
	}
	
	clear_variable = p_multiplier
	clear_variable = r_multiplier
	
	if = {
		limit = {
			check_variable = { temp_side = 1 }
		}
		
		set_temp_variable = { temp_idx = 0 }
		TRO_drugs_friendly_variables_change = yes
		
		set_temp_variable = { temp_idx = 1 }
		TRO_drugs_friendly_variables_change = yes
	}
	else_if = {
		limit = {
			check_variable = { temp_side = 2 }
		}
		
		set_temp_variable = { temp_idx = 3 }
		TRO_drugs_friendly_variables_change = yes
		
		set_temp_variable = { temp_idx = 4 }
		TRO_drugs_friendly_variables_change = yes
	}
}

TRO_drugs_friendly_variables_change = {
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^temp_idx = 1 }
			NOT = { is_in_array = { array = TRO_cartels_finished value = temp_idx } }
		}
		
		custom_effect_tooltip = TRO_CTH_drugs_effect_scope_tooltip
		
		if = {
			limit = {
				NOT = { check_variable = { temp_p_change = 0 } }
			}
			
			add_to_variable = { TRO_drugs_friendly_power_status^temp_idx = temp_p_change }
			if = {
				limit = {
					check_variable = { temp_p_change < 0 }
				}
				multiply_temp_variable = { temp_p_change = -1 }
				custom_effect_tooltip = TRO_CTH_drugs_friendly_power_decrease
				multiply_temp_variable = { temp_p_change = -1 }
			}
			else = {
				custom_effect_tooltip = TRO_CTH_drugs_friendly_power_increase
			}
			for_each_loop = {
				array = TRO_drugs_friendly_power_status
				clamp_variable = { var = TRO_drugs_friendly_power_status^i min = 0 max = 100 }
			}
		}
		
		if = {
			limit = {
				NOT = { check_variable = { temp_r_change = 0 } }
			}
			
			add_to_variable = { TRO_drugs_friendly_relations_status^temp_idx = temp_r_change }
			if = {
				limit = {
					check_variable = { temp_r_change < 0 }
				}
				multiply_temp_variable = { temp_r_change = -1 }
				custom_effect_tooltip = TRO_CTH_drugs_friendly_relations_worsen
				multiply_temp_variable = { temp_r_change = -1 }
			}
			else = {
				custom_effect_tooltip = TRO_CTH_drugs_friendly_relations_improve
			}
			for_each_loop = {
				array = TRO_drugs_friendly_relations_status
				clamp_variable = { var = TRO_drugs_friendly_relations_status^i min = 0 max = 100 }
			}
		}
		
		TRO_drugs_recalculate_dynmod_values = yes
		TRO_drugs_recalculate_national_dynmod_values = yes
		add_to_variable = { TRO_drugs_dirty_bit = 0.001 }
	}
}

TRO_drugs_enemy_change_together = {
	set_temp_variable = { temp_i_change = coeff }
	set_temp_variable = { temp_c_change = coeff }
	multiply_temp_variable = { temp_c_change = 1.3 }
	set_temp_variable = { temp_a_change = coeff }
	multiply_temp_variable = { temp_a_change = 1.5 }
	
	if = {
		limit = {
			NOT = { check_variable = { i_multiplier = 0 } }
		}
		multiply_temp_variable = { temp_i_change = i_multiplier }
	}
	if = {
		limit = {
			NOT = { check_variable = { c_multiplier = 0 } }
		}
		multiply_temp_variable = { temp_c_change = c_multiplier }
	}
	if = {
		limit = {
			NOT = { check_variable = { a_multiplier = 0 } }
		}
		multiply_temp_variable = { temp_a_change = a_multiplier }
	}
	
	clear_variable = i_multiplier
	clear_variable = c_multiplier
	clear_variable = a_multiplier
	
	if = {
		limit = {
			check_variable = { temp_side = 1 }
		}
		
		set_temp_variable = { temp_idx = 0 }
		TRO_drugs_enemy_variables_change = yes
		
		set_temp_variable = { temp_idx = 1 }
		TRO_drugs_enemy_variables_change = yes
	}
	else_if = {
		limit = {
			check_variable = { temp_side = 2 }
		}
		
		set_temp_variable = { temp_idx = 3 }
		TRO_drugs_enemy_variables_change = yes
		
		set_temp_variable = { temp_idx = 4 }
		TRO_drugs_enemy_variables_change = yes
	}
}

TRO_drugs_enemy_variables_change = {
	if = {
		limit = {
			check_variable = { TRO_cartel_action_option^temp_idx = 2 }
			NOT = { is_in_array = { array = TRO_cartels_finished value = temp_idx } }
		}
		
		custom_effect_tooltip = TRO_CTH_drugs_effect_scope_tooltip
		
		if = {
			limit = {
				NOT = { check_variable = { temp_i_change = 0 } }
			}
			add_to_variable = { TRO_drugs_enemy_influence_status^temp_idx = temp_i_change }
			if = {
				limit = {
					check_variable = { temp_i_change < 0 }
				}
				multiply_temp_variable = { temp_i_change = -1 }
				custom_effect_tooltip = TRO_CTH_drugs_enemy_influence_shrink
				multiply_temp_variable = { temp_i_change = -1 }
				else = {
					custom_effect_tooltip = TRO_CTH_drugs_enemy_influence_grow
				}
			}
			for_each_loop = {
				array = TRO_drugs_enemy_influence_status
				clamp_variable = { var = TRO_drugs_enemy_influence_status^i min = 0 max = 100 }
			}
		}
		
		if = {
			limit = {
				NOT = { check_variable = { temp_c_change = 0 } }
			}
			add_to_variable = { TRO_drugs_enemy_control_status^temp_idx = temp_c_change }
			if = {
				limit = {
					check_variable = { temp_c_change < 0 }
				}
				multiply_temp_variable = { temp_c_change = -1 }
				custom_effect_tooltip = TRO_CTH_drugs_enemy_control_weaken
				multiply_temp_variable = { temp_c_change = -1 }
				else = {
					custom_effect_tooltip = TRO_CTH_drugs_enemy_control_strengthen
				}
			}
			for_each_loop = {
				array = TRO_drugs_enemy_control_status
				clamp_variable = { var = TRO_drugs_enemy_control_status^i min = 0 max = 100 }
			}
		}
		
		if = {
			limit = {
				NOT = { check_variable = { temp_a_change = 0 } }
			}
			add_to_variable = { TRO_drugs_enemy_aggression_status^temp_idx = temp_a_change }
			if = {
				limit = {
					check_variable = { temp_a_change < 0 }
				}
				multiply_temp_variable = { temp_a_change = -1 }
				custom_effect_tooltip = TRO_CTH_drugs_enemy_aggression_decrease
				multiply_temp_variable = { temp_a_change = -1 }
				else = {
					custom_effect_tooltip = TRO_CTH_drugs_enemy_aggression_increase
				}
			}
			for_each_loop = {
				array = TRO_drugs_enemy_aggression_status
				clamp_variable = { var = TRO_drugs_enemy_aggression_status^i min = 0 max = 100 }
			}
		}
		
		TRO_drugs_recalculate_dynmod_values = yes
		TRO_drugs_recalculate_national_dynmod_values = yes
		add_to_variable = { TRO_drugs_dirty_bit = 0.001 }
	}
}
	
TRO_drugs_state_control_change = {
	set_variable = { TRO_drugs_ruling_cartel = temp_idx }
	custom_effect_tooltip = TRO_CTH_drugs_state_control_change
	TRO_drugs_reassign_state_dynmods = yes
	
	add_to_variable = { TRO_drugs_dirty_bit = 0.001 }
}

TRO_drugs_finished = {
	hidden_effect = {
		clr_country_flag = TRO_CTH_enable_drugs_lmao
		remove_mission = TRO_CTH_build_civ_demand
		remove_mission = TRO_CTH_build_mil_demand
		remove_mission = TRO_CTH_build_dock_demand
		remove_mission = TRO_CTH_happenings_in_the_underworld
		remove_mission = TRO_CTH_cartel_sabotage_tick
		complete_national_focus = TRO_CTH_b25
	}
}

d_debug_TRO_load_tree = {
	load_focus_tree = trotkart_tree_2
}

### "PSEUDO DECISIONS" a.k.a a way to not make me wanna kill myself ###

## FRIENDLY
TRO_CTH_friendly_promise_protection_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_friendly_promise_protection_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_friendly_promise_protection_CARTEL }
	}
	set_temp_variable = { temp_r_change = 3 }
	TRO_drugs_friendly_variables_change = yes
	
	if = {
		limit = {
			NOT = { check_variable = { selected_cartel = 2 } }
		}
		set_temp_variable = { enemy = 4 }
		subtract_from_temp_variable = { enemy = temp_idx }
		set_temp_variable = { temp_idx = enemy }
		set_temp_variable = { temp_r_change = -4.5 }
		set_temp_variable = { temp_p_change = -3 }
		TRO_drugs_friendly_variables_change = yes

		set_temp_variable = { temp_i_change = -2.5 }
		set_temp_variable = { temp_a_change = 3 }
		set_temp_variable = { temp_c_change = 1 }
		TRO_drugs_enemy_variables_change = yes
	}
	
	clear_variable = TRO_CTH_friendly_promise_protection_CARTEL
}

TRO_CTH_friendly_overlook_enforcement_effect = {
	add_stability = -0.05
	
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_friendly_overlook_enforcement_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_friendly_overlook_enforcement_CARTEL }
	}
	set_temp_variable = { temp_p_change = 4.5 }
	set_temp_variable = { temp_r_change = 4.5 }
	TRO_drugs_friendly_variables_change = yes
	
	clear_variable = TRO_CTH_friendly_overlook_enforcement_CARTEL
}

TRO_CTH_friendly_grant_licenses_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_friendly_grant_licenses_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_friendly_grant_licenses_CARTEL }
	}
	set_temp_variable = { temp_p_change = 5 }
	set_temp_variable = { temp_r_change = 4.5 }
	TRO_drugs_friendly_variables_change = yes
	
	clear_variable = TRO_CTH_friendly_grant_licenses_CARTEL
}

TRO_CTH_friendly_lease_land_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_friendly_lease_land_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_friendly_lease_land_CARTEL }
	}
	set_temp_variable = { temp_p_change = 2.5 }
	set_temp_variable = { temp_r_change = 5 }
	TRO_drugs_friendly_variables_change = yes
	
	clear_variable = TRO_CTH_friendly_lease_land_CARTEL
}

## ENEMY
TRO_CTH_operation_appease_cartel_effect = {
	add_stability = -0.05
	
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_appease_cartel_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_operation_appease_cartel_CARTEL }
	}
	set_temp_variable = { temp_i_change = 1.5 }
	set_temp_variable = { temp_a_change = -6.5 }
	TRO_drugs_enemy_variables_change = yes
	
	clear_variable = TRO_CTH_operation_appease_cartel_CARTEL
}

TRO_CTH_operation_investigate_cartel_officials_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_investigate_cartel_officials_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_operation_investigate_cartel_officials_CARTEL }
	}
	set_temp_variable = { temp_i_change = -5 }
	set_temp_variable = { temp_c_change = -6 }
	set_temp_variable = { temp_a_change = 2 }
	TRO_drugs_enemy_variables_change = yes
	
	clear_variable = TRO_CTH_operation_investigate_cartel_officials_CARTEL
}

TRO_CTH_operation_carry_out_small_raids_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_carry_out_small_raids_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_operation_carry_out_small_raids_CARTEL }
	}
	set_temp_variable = { temp_a_change = 1.5 }
	set_temp_variable = { temp_c_change = -4.5 }
	set_temp_variable = { temp_i_change = -5 }
	TRO_drugs_enemy_variables_change = yes
	
	clear_variable = TRO_CTH_operation_carry_out_small_raids_CARTEL
}

TRO_CTH_operation_show_of_force_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_show_of_force_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_operation_show_of_force_CARTEL }
	}
	set_temp_variable = { temp_c_change = -3 }
	set_temp_variable = { temp_i_change = -5.5 }
	set_temp_variable = { temp_a_change = -8 }
	TRO_drugs_enemy_variables_change = yes
	
	clear_variable = TRO_CTH_operation_show_of_force_CARTEL
}

TRO_CTH_operation_aid_their_enemy_effect = {
	set_temp_variable = { enemy = 4 }
	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_aid_their_enemy_CARTEL
			}
		}
		subtract_from_temp_variable = { enemy = selected_cartel }
	}
	else = {
		subtract_from_temp_variable = { enemy = TRO_CTH_operation_aid_their_enemy_CARTEL }
	}
	set_temp_variable = { temp_idx = enemy }
	set_temp_variable = { temp_p_change = 4.5 }
	set_temp_variable = { temp_r_change = 6 }
	TRO_drugs_friendly_variables_change = yes

	if = {
		limit = {
			NOT = {
				has_variable = TRO_CTH_operation_aid_their_enemy_CARTEL
			}
		}
		set_temp_variable = { temp_idx = selected_cartel }
	}
	else = {
		set_temp_variable = { temp_idx = TRO_CTH_operation_aid_their_enemy_CARTEL }
	}
	set_temp_variable = { temp_c_change = -5 }
	set_temp_variable = { temp_i_change = -6 }
	TRO_drugs_enemy_variables_change = yes
	
	clear_variable = TRO_CTH_operation_aid_their_enemy_CARTEL
}