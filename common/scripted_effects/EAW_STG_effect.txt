modify_var_stg_construction_2 = {
	if = {
		limit = {
			OR = { has_food_shortages_STG = yes has_war = yes }
		}
		add_to_variable = { var = palace_construction value = 3 }
	}
	else_if = {
		limit = {
			has_war = no
			NOT = { has_food_shortages_STG = yes }
		}
		add_to_variable = { var = palace_construction value = 4 }
	}
	else_if = {
		limit = {
			has_war = no
			NOT = { has_food_shortages_STG = yes }
			NOT = { has_idea = incomplete_industrialization }
		}
		add_to_variable = { var = palace_construction value = 5 }
	}
}

deconstruct_the_palace_stg = {
	if = {
		limit = {
			check_variable = { var = palace_construction value = 20 compare = greater_than_or_equals }
			NOT = { check_variable = { var = palace_construction value = 20 compare = less_than } }
			has_country_flag = statue_obtained
		}
		four_random_industrial_complex = yes
		add_resource = { type = steel amount = 20 state = 153 }
		add_resource = { type = steel amount = 5 state = 166 }
	}
	if = {
		limit = {
			check_variable = { var = palace_construction value = 20 compare = greater_than_or_equals }
			NOT = { check_variable = { var = palace_construction value = 20 compare = less_than } }
			NOT = { has_country_flag = statue_obtained }
		}
		four_random_industrial_complex = yes
		add_resource = { type = steel amount = 20 state = 153 }
	}
	if = {
		limit = {
			NOT = { check_variable = { var = palace_construction value = 20 compare = greater_than_or_equals } }
			check_variable = { var = palace_construction value = 15 compare = greater_than_or_equals }
			NOT = { check_variable = { var = palace_construction value = 15 compare = less_than } }
		}
		three_random_industrial_complex = yes
		add_resource = { type = steel amount = 15 state = 153 }
	}
	if = {
		limit = {
			NOT = { check_variable = { var = palace_construction value = 15 compare = greater_than_or_equals } }
			check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals }
			NOT = { check_variable = { var = palace_construction value = 10 compare = less_than } }
		}
		two_random_industrial_complex = yes
		add_resource = { type = steel amount = 10 state = 153 }
	}
	if = {
		limit = {
			NOT = { check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals } }
			check_variable = { var = palace_construction value = 1 compare = greater_than_or_equals }
		}
		two_random_industrial_complex = yes
		add_resource = { type = steel amount = 5 state = 153 }
	}
	if = {
		limit = {
			check_variable = { var = palace_construction value = 0 compare = equals }
		}
		one_random_industrial_complex = yes
		add_resource = { type = steel amount = 3 state = 153 }
	}
}

remove_hunger_effect = {
	if = {
		limit = {
			has_idea = severe_famine
		}
		swap_ideas = { add_idea = severe_famine2 remove_idea = severe_famine }
	}
	else_if = {
		limit = {
			has_idea = severe_famine2
		}
		swap_ideas = { add_idea = severe_famine3 remove_idea = severe_famine2 }
	}
	else_if = {
		limit = {
			has_idea = severe_famine3
		}
		swap_ideas = { add_idea = severe_famine4 remove_idea = severe_famine3 }
	}
	else_if = {
		limit = {
			has_idea = severe_famine4
		}
		swap_ideas = { add_idea = severe_famine5 remove_idea = severe_famine4 }
	}
	else_if = {
		limit = {
			has_idea = severe_famine5
		}
		swap_ideas = { add_idea = severe_famine6 remove_idea = severe_famine5 }
	}
	else_if = {
		limit = {
			has_idea = severe_famine6
		}
		remove_ideas = severe_famine6
	}
}

remove_housing_problem = {
	if = {
		limit = {
			has_idea = STG_housing_problems
		}
		swap_ideas = { remove_idea = STG_housing_problems add_idea = STG_housing_problems1 }
	}
	else_if = {
		limit = {
			has_idea = STG_housing_problems1
		}
		swap_ideas = { remove_idea = STG_housing_problems1 add_idea = STG_housing_problems2 }
	}
	else_if = {
		limit = {
			has_idea = STG_housing_problems2
		}
		swap_ideas = { remove_idea = STG_housing_problems2 add_idea = STG_housing_problems3 }
	}
	else_if = {
		limit = {
			has_idea = STG_housing_problems3
		}
		swap_ideas = { remove_idea = STG_housing_problems3 add_idea = STG_housing_problems4 }
	}
	else_if = {
		limit = {
			has_idea = STG_housing_problems4
		}
		remove_ideas = STG_housing_problems4
	}
}
remove_serovki_effect = {
	if = {
		limit = {
			has_idea = Serovki
		}
		swap_ideas = { remove_idea = Serovki add_idea = Serovki_2 }
	}
	else_if = {
		limit = {
			has_idea = Serovki_2
		}
		swap_ideas = { remove_idea = Serovki_2 add_idea = Serovki_3 }
	}
	else_if = {
		limit = {
			has_idea = Serovki_3
		}
		swap_ideas = { remove_idea = Serovki_3 add_idea = Serovki_4 }
	}
	else_if = {
		limit = {
			has_idea = Serovki_4
		}
		swap_ideas = { remove_idea = Serovki_4 add_idea = Serovki_5 }
	}
	else_if = {
		limit = {
			has_idea = Serovki_5
		}
		remove_ideas = Serovki_5
	}
}

spawn_sinister_line = {
	168 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6270
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 9297
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6268
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3342
				}
			}
			166 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6221
				}
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 7239
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 407
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 3274
				}
			}
			161 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 303
				}
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 11293
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3329
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 3379
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 337
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 3359
				}
			}
			163= {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3396
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 7377
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6451
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 409
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3403
				}
			}
			237 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6458
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 6532
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3468
				}
			}
}

STG_recalc_congress_icon_frames = {

	set_temp_variable = { senators_temp = senators_support }
	divide_temp_variable = { senators_temp = senators_total }
	multiply_temp_variable = { senators_temp = 21 }
	if = {
		limit = { check_variable = { senators_temp > 0 } }
		clamp_temp_variable = {
			var = senators_temp
			min = 1
			max = 21
		}
	}
	else = {
		set_temp_variable = { senators_temp = 1 }
	}
	set_variable = { current_senate_icon_frame = senators_temp }

	set_temp_variable = { house_temp = representatives_support }
	divide_temp_variable = { house_temp = representatives_total }
	multiply_temp_variable = { house_temp = 21 }
	if = {
		limit = { check_variable = { house_temp > 0 } }
		clamp_temp_variable = {
			var = house_temp
			min = 1
			max = 21
		}
	}
	else = {
		set_temp_variable = { house_temp = 1 }		
	}
	set_variable = { current_house_icon_frame = house_temp }
}