LSP_reduce_famine = {
	if = {
		limit = {
			has_idea = LSP_catastrophic_famine
		}
		swap_ideas = {
			remove_idea = LSP_catastrophic_famine
			add_idea = LSP_severe_famine
		}
		activate_mission = LSP_famine_timer
	}
	else_if = {
		limit = {
			has_idea = LSP_severe_famine
		}
		swap_ideas = {
			remove_idea = LSP_severe_famine
			add_idea = LSP_famine
		}
	}
	else_if = {
		limit = {
			has_idea = LSP_famine
		}
		swap_ideas = {
			remove_idea = LSP_famine
			add_idea = LSP_mild_famine
		}
	}
	else_if = {
		limit = { 
			has_idea = LSP_mild_famine
		}
		swap_ideas = {
			remove_idea = LSP_mild_famine
			add_idea = LSP_fragile_food_supply
		}
	}
}
LSP_increase_famine = {
	if = {
		limit = {
			has_idea = LSP_severe_famine
		}
		swap_ideas = {
			remove_idea = LSP_severe_famine
			add_idea = LSP_catastrophic_famine
		}
	}
	else_if = {
		limit = {
			has_idea = LSP_famine
		}
		swap_ideas = {
			remove_idea = LSP_famine
			add_idea = LSP_severe_famine
		}
	}
	else_if = {
		limit = {
			has_idea = LSP_mild_famine
		}
		swap_ideas = {
			remove_idea = LSP_mild_famine
			add_idea = LSP_famine
		}
	}
	else_if = {
		limit = { 
			has_idea = LSP_fragile_food_supply
		}
		swap_ideas = {
			remove_idea = LSP_fragile_food_supply
			add_idea = LSP_mild_famine
		}
	}
}
LSP_reduce_chaotic_politics = {
	if = {
		limit = { has_idea = LSP_chaotic_politics }
		swap_ideas = { add_idea = LSP_chaotic_politics_2 remove_idea = LSP_chaotic_politics }
	}
	else_if = {
		limit = { has_idea = LSP_chaotic_politics_2 }
		remove_ideas = LSP_chaotic_politics_2
	}
}
oijgidfhgj = {
	country_event = { id = romau.53 days = 1 }
}

LSP_clamp_variables = {
	for_each_loop = {
        array = LSP_faction_power
        index = i
        break = break
        clamp_variable = {
            var = LSP_faction_power^i
            min = 0
            max = 5
        }
    }
	for_each_loop = {
        array = LSP_faction_loyalty
        index = i
        break = break
        clamp_variable = {
            var = LSP_faction_loyalty^i
            min = 0
            max = 6
        }
    }
}
# Police
LSP_add_1_police_power = {
	custom_effect_tooltip = LSP_add_1_police_power_tt
	add_to_variable = {
		var = LSP_faction_power^0
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_police_power = {
	custom_effect_tooltip = LSP_remove_1_police_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^0
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_police_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^0 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_police_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^0
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_police_loyalty = {
	custom_effect_tooltip = LSP_remove_1_police_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^0
		value = 1
	}
	LSP_clamp_variables = yes
}

#Unions
LSP_add_1_unions_power = {
	custom_effect_tooltip = LSP_add_1_unions_power_tt
	add_to_variable = {
		var = LSP_faction_power^1
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_unions_power = {
	custom_effect_tooltip = LSP_remove_1_unions_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^1
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_unions_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^1 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_unions_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^1
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_unions_loyalty = {
	custom_effect_tooltip = LSP_remove_1_unions_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^1
		value = 1
	}
	LSP_clamp_variables = yes
}


# Entertainers
LSP_add_1_entertainers_power = {
	custom_effect_tooltip = LSP_add_1_entertainers_power_tt
	add_to_variable = {
		var = LSP_faction_power^2
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_entertainers_power = {
	custom_effect_tooltip = LSP_remove_1_entertainers_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^2
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_entertainers_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^2 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_entertainers_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^2
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_entertainers_loyalty = {
	custom_effect_tooltip = LSP_remove_1_entertainers_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^2
		value = 1
	}
	LSP_clamp_variables = yes
}

# PCA
LSP_add_1_pca_power = {
	custom_effect_tooltip = LSP_add_1_pca_power_tt
	add_to_variable = {
		var = LSP_faction_power^3
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_pca_power = {
	custom_effect_tooltip = LSP_remove_1_pca_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^3
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_pca_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^3 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_pca_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^3
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_pca_loyalty = {
	custom_effect_tooltip = LSP_remove_1_pca_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^3
		value = 1
	}
	LSP_clamp_variables = yes
}

# Innovators
LSP_add_1_innovators_power = {
	custom_effect_tooltip = LSP_add_1_innovators_power_tt
	add_to_variable = {
		var = LSP_faction_power^4
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_innovators_power = {
	custom_effect_tooltip = LSP_remove_1_innovators_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^4
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_innovators_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^4 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_innovators_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^4
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_innovators_loyalty = {
	custom_effect_tooltip = LSP_remove_1_innovators_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^4
		value = 1
	}
	LSP_clamp_variables = yes
}

# Republicans
LSP_add_1_republicans_power = {
	custom_effect_tooltip = LSP_add_1_republicans_power_tt
	add_to_variable = {
		var = LSP_faction_power^5
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_republicans_power = {
	custom_effect_tooltip = LSP_remove_1_republicans_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^5
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_republicans_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^5 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_republicans_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^5
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_republicans_loyalty = {
	custom_effect_tooltip = LSP_remove_1_republicans_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^5
		value = 1
	}
	LSP_clamp_variables = yes
}

# Cabal
LSP_add_1_cabal_power = {
	custom_effect_tooltip = LSP_add_1_cabal_power_tt
	add_to_variable = {
		var = LSP_faction_power^6
		value = 1
	}
	LSP_clamp_variables = yes
}
LSP_remove_1_cabal_power = {
	custom_effect_tooltip = LSP_remove_1_cabal_power_tt
	subtract_from_variable = {
		var = LSP_faction_power^6
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_add_1_cabal_loyalty = {
	if = {
		limit = {
			check_variable = {
				LSP_faction_loyalty^6 < 5
			}
		}
		custom_effect_tooltip = LSP_add_1_cabal_loyalty_tt
		add_to_variable = {
			var = LSP_faction_loyalty^6 
			value = 1
		}
		LSP_clamp_variables = yes
	}
}
LSP_remove_1_cabal_loyalty = {
	custom_effect_tooltip = LSP_remove_1_cabal_loyalty_tt
	subtract_from_variable = {
		var = LSP_faction_loyalty^6 
		value = 1
	}
	LSP_clamp_variables = yes
}

LSP_decide_who_wins = {
	set_variable = {
		LSP_win_decider = 0
	}
	for_loop_effect = {
		end = 6
		
		value = temp
		if = {
			limit = {
				check_variable = {
					LSP_faction_loyalty^temp < 6
				}
			}
			set_temp_variable = {
				LSP_temp_loyalty = LSP_faction_loyalty^temp
			}
			subtract_from_temp_variable = {
				LSP_temp_loyalty = 3
			}
			multiply_temp_variable = {
				LSP_temp_loyalty = LSP_faction_power^temp
			}
			add_to_variable = {
				LSP_win_decider = LSP_temp_loyalty
			}
		}
	}
	# DECIDE WHO WINS
	if = {
		limit = {
			check_variable = {
				LSP_temp_loyalty < 0
			}
		}
		# make Horse win
		add_country_leader_role = {
			character = LSP_mr_horse
			promote_leader = yes

			country_leader = {
				desc = horseDesc
				expire = "1965.1.1"
				ideology = technocracy
				traits = { }
			}
		}
		set_party_name = { ideology = neutrality name = LSP_house_party long_name = LSP_house_party_long }
		set_cosmetic_tag = LSP_technocracy
	}
	else_if = {
		limit = {
			check_variable = {
				LSP_temp_loyalty > 0
			}
		}
		# make Mayor win - nothing changes
	}
	else = {
		# exactly zero - make Flim and Flam win
		add_country_leader_role = {
			character = LSP_flim_flam
			promote_leader = yes

			country_leader = {
				desc = flimflambros
				expire = "1965.1.1"
				ideology = anarchism
				traits = { }
			}
		}
		set_party_name = { ideology = neutrality name = LSP_flimflam_party long_name = LSP_flimflam_party_long }
		set_cosmetic_tag = LSP_flimflam

	}

}