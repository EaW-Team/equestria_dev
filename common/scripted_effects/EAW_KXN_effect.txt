KXN_TALLY_CASUALTIES_EFFECT = {
	clear_variable = KXN.KXNHarvest_Kills_Var
	add_to_variable = { KXN.KXNHarvest_Kills_Var = KXN.inflicted_casualties }
	add_to_variable = { KXN.KXNHarvest_Kills_Var = KXN.total_inflicted_civilian_casualties }
	subtract_from_variable = { KXN.KXNHarvest_Kills_Var = KXN.KXNHarvest_Total_Kills_Var }
	
	set_variable = { KXN.KXNHarvest_Total_Inflicted_Casualties_Var = KXN.inflicted_casualties }
	add_to_variable = { KXN.KXNHarvest_Total_Inflicted_Casualties_Var = KXN.total_inflicted_civilian_casualties }
	
	set_variable = { KXN.KXNHarvestProgBar_Var = KXN.KXNHarvest_Kills_Var }
	divide_variable = { KXN.KXNHarvestProgBar_Var = KXN.KXNHarvest_Max_Var }
	multiply_variable = { KXN.KXNHarvestProgBar_Var = 100 }
}
KXN_OCCUPY_STATE_EFFECT = {
	custom_effect_tooltip = KIR_line_break
	KXN = {
		add_to_variable = { KXN.total_states_pacified = 1 }
		hidden_effect = {
			add_political_power = -15
		}
	}
	add_dynamic_modifier = { modifier = KXN_Pacified_State days = 365 }
	custom_effect_tooltip = KXN_CF_OCCUPY_BUTTON_COST
}
KXN_PILLAGE_STATE_EFFECT = {
	custom_effect_tooltip = KIR_line_break
	KXN = {
		add_to_variable = { KXN.total_inflicted_civilian_casualties = 7.5 }
		add_to_variable = { KXN.total_states_pillaged = 1 }
		KXN_TALLY_CASUALTIES_EFFECT = yes
		save_current_manpower = yes
	}
	add_manpower = -7500
	custom_effect_tooltip = KXN_PILLAGE_BUILDING_DAMAGE
	hidden_effect = {
		KXN = { restore_previous_manpower = yes }
		damage_building = { type = infrastructure damage = 1.5 }
		damage_building = { type = nuclear_reactor damage = 1.5 }
		damage_building = { type = industrial_complex damage = 1.5 }
		damage_building = { type = arms_factory damage = 1.5 }
		damage_building = { type = dockyard damage = 1.5 }
		damage_building = { type = fuel_silo damage = 1.5 }
		damage_building = { type = synthetic_refinery damage = 1.5 }
	}
	add_dynamic_modifier = { modifier = KXN_Plundered_State days = 365 }
}
KXN_BURN_STATE_EFFECT = {
	custom_effect_tooltip = KIR_line_break
	KXN = {
		add_to_variable = { KXN.total_inflicted_civilian_casualties = 25 }
		add_to_variable = { KXN.total_states_burned = 1 }
		KXN_TALLY_CASUALTIES_EFFECT = yes
		save_current_manpower = yes
	}
	add_manpower = -25000
	custom_effect_tooltip = KXN_BURN_BUILDING_REMOVE
	hidden_effect = {
		KXN = { restore_previous_manpower = yes }
		remove_building = { type = infrastructure level = 3 }
		remove_building = { type = nuclear_reactor level = 3 }
		remove_building = { type = industrial_complex level = 3 }
		remove_building = { type = arms_factory level = 3 }
		remove_building = { type = dockyard level = 3 }
		remove_building = { type = fuel_silo level = 3 }
		remove_building = { type = synthetic_refinery level = 3 }
	}
	add_dynamic_modifier = { modifier = KXN_Purified_State days = 365 }
	add_resistance = -15
}

KXN_INCREASE_UNREST = {
	if = {
		limit = {
			KXN = {
				is_ai = no
				num_subjects > 0
				any_subject_country = {
					has_idea = KXN_Tributary_State
				}
			}
		}
		custom_effect_tooltip = KIR_line_break
		KXN = {
			every_subject_country = {
				limit = {
					has_idea = KXN_Tributary_State
				}
				custom_effect_tooltip = KXN_Increase_Tributary_Unrest_tt
				add_to_variable = { KXN_Tributary_Unrest_Var = 1 }
			}
			custom_effect_tooltip = KIR_line_break
		}
	}
}
KXN_SPAWN_REVOLT_UNITS = {
	division_template = {
		name = "Rebel Infantry"
		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }
			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }
		}
		support = {
			artillery = { x = 0 y = 0 }
		}
	}
	division_template = {
		name = "Rebel Militia"
		regiments = {
			militia = { x = 0 y = 0 }
			militia = { x = 0 y = 1 }
			militia = { x = 0 y = 2 }
			militia = { x = 1 y = 0 }
			militia = { x = 1 y = 1 }
			militia = { x = 1 y = 2 }
		}
	}
	capital_scope = {
		create_unit = {
			division = "division_template = \"Rebel Infantry\" start_experience_factor = 0.25 start_equipment_factor = 1"
			owner = ROOT
			count = 2
		}
		create_unit = {
			division = "division_template = \"Rebel Militia\" start_experience_factor = 0.15 start_equipment_factor = 0.75"
			owner = ROOT
			count = 4
		}
	}
}