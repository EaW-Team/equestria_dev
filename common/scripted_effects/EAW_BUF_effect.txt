
BUF_reset_bop_for_new_leader = { #Reset BoP to 0 (only if lower than 0)
	if = {
		limit = {
			power_balance_value = {
				id = BUF_power_balance
				value < 0
			}
		}
		set_power_balance = {
			id = BUF_power_balance
			set_value = 0
		}
	}
}

BUF_strongheart_becomes_country_leader = {
	effect_tooltip = {
		retire_country_leader = yes	
	}
	set_politics = {
		ruling_party = democratic
		elections_allowed = no
	}
	BUF_reset_bop_for_new_leader = yes
}


# BUF_check_and_manage_losing_cores_for_bop_effect = {
# 	if = {
# 		limit = {
# 			any_core_state = {
# 				is_owned_by = ROOT
# 				NOT = { is_controlled_by = ROOT }
# 			}
# 		}
# 		if = {
# 			limit = {
# 				NOT = {
# 					has_power_balance_modifier = {
# 						id = BUF_power_balance
# 						modifier = BUF_bop_modifier_finnish_sovereignty_threatened
# 					}
# 				}
# 			}
# 			add_power_balance_modifier = {
# 				id = BUF_power_balance
# 				modifier = BUF_bop_modifier_finnish_sovereignty_threatened
# 			}
# 		}
# 	}
# 	else_if = {
# 		limit = {
# 			has_power_balance_modifier = {
# 				id = BUF_power_balance
# 				modifier = BUF_bop_modifier_finnish_sovereignty_threatened
# 			}
# 		}
# 		remove_power_balance_modifier = {
# 			id = BUF_power_balance
# 			modifier = BUF_bop_modifier_finnish_sovereignty_threatened
# 		}
# 	}
# }



BUF_clean_all_obsolete_bop_modifiers_effect = {
	if = {
		limit = {
			has_power_balance_modifier = {
				id = BUF_power_balance
				modifier = BUF_bop_modifier_eradicate_extremists
			}
			NOT = {
				has_country_leader = {
					ruling_only = yes
					character = BUF_chief_thunderhooves
				}
			}
		}
		remove_power_balance_modifier = {
			id = BUF_power_balance
			modifier = BUF_bop_modifier_eradicate_extremists
		}
	}
	if = {
		limit = {
			has_power_balance_modifier = {
				id = BUF_power_balance
				modifier = BUF_bop_modifier_concerning_support_for_extremists
			}
			NOT = {
				has_country_leader = {
					ruling_only = yes
					character = BUF_chief_thunderhooves
				}
			}
		}
		remove_power_balance_modifier = {
			id = BUF_power_balance
			modifier = BUF_bop_modifier_concerning_support_for_extremists
		}
	}
	if = {
		limit = {
			has_power_balance_modifier = {
				id = BUF_power_balance
				modifier = BUF_bop_modifier_anti_supremacist_crusade
			}
			NOT = {
				has_country_leader = {
					ruling_only = yes
					character = BUF_chieftess_strongheart
				}
			}
		}
		remove_power_balance_modifier = {
			id = BUF_power_balance
			modifier = BUF_bop_modifier_anti_supremacist_crusade
		}
	}
	if = {
		limit = {
			has_power_balance_modifier = {
				id = BUF_power_balance
				modifier = BUF_bop_modifier_traitors_to_harmony
			}
			NOT = {
				has_country_leader = {
					ruling_only = yes
					character = BUF_chieftess_strongheart
				}
			}
		}
		remove_power_balance_modifier = {
			id = BUF_power_balance
			modifier = BUF_bop_modifier_traitors_to_harmony
		}
	}
}

BUF_initiate_balance_of_power_effect = {
	set_power_balance = {
		id = BUF_power_balance
		set_default = yes
	}
}

BUF_bop_absurdly_high_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 1
	}
}

BUF_bop_very_high_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 0.25
	}
}

BUF_bop_high_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 0.2
	}
}

BUF_bop_medium_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 0.15
	}
}

BUF_bop_low_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 0.1
	}
}

BUF_bop_very_low_increase_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = 0.05
	}
}

BUF_bop_absurdly_high_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -1
	}
}

BUF_bop_very_high_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -0.25
	}
}

BUF_bop_high_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -0.2
	}
}

BUF_bop_medium_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -0.15
	}
}

BUF_bop_low_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -0.1
	}
}

BUF_bop_very_low_decrease_effect = {
	add_power_balance_value = {
		id = BUF_power_balance
		value = -0.05
	}
}


BUF_ROC_setup_faction = {
	if = {
		limit = {
			ROC = {
				is_ai = no
			}
			BUF = {
				is_ai = yes
			}
		}
		create_faction = BUF_ROC_faction
		add_to_faction = BUF
		BUF = {
			set_major = yes
		}
	}
	else= {
		BUF = {
			create_faction = BUF_ROC_faction
			add_to_faction = ROC
			ROC = {
				set_major = yes
			}
		}
	}
}
