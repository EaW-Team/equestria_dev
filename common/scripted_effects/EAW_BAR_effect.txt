BAR_pentarchy_is_dead = {
	if = {
		limit = {
			NOT = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_viira_alive
			}
			has_country_flag = { flag = barrad_endgame value = 0 }
		}
		add_corps_commander_role = {
			character = BAR_captain_gasienica
			traits = { griffon_race_trait bar_cpt_gasienica trait_mountaineer infantry_officer trickster }
			skill = 5
			attack_skill = 4
			defense_skill = 4
			planning_skill = 4
			logistics_skill = 4
			legacy_id = 997003
		} custom_effect_tooltip = cpt_gasienica_stats_tp
		set_country_flag = { flag = barrad_endgame value = 1 }
		country_event = { days = 1 id = barrad_end.1 }
	}
}
BAR_lich_up = {
	if = {
		limit = {
			has_idea = BAR_lich_1
		}
		swap_ideas = {
			remove_idea = BAR_lich_1
			add_idea = BAR_lich_2
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_lich_2
		}
		swap_ideas = {
			remove_idea = BAR_lich_2
			add_idea = BAR_lich_3
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_lich_3
		}
		swap_ideas = {
			remove_idea = BAR_lich_3
			add_idea = BAR_lich_4
		}
	}
	else = {
		add_ideas = BAR_lich_1
	}
}
BAR_unded_army_up = {
	if = {
		limit = {
			has_idea = BAR_undead_army_1
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_1
			add_idea = BAR_undead_army_2
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_2
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_2
			add_idea = BAR_undead_army_3
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_3
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_3
			add_idea = BAR_undead_army_4
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_4
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_4
			add_idea = BAR_undead_army_5
		}
	}
	else = {
		add_ideas = BAR_undead_army_1
	}
}
BAR_happy_ending = {
	hidden_effect = {
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_viira_alive
				has_country_flag = { flag = barrad_endgame value = 0 }
				check_variable = {
					var = BAR_relations_asinti_silver
					value = 70
					compare = greater_than_or_equals
				}
				check_variable = {
					var = BAR_relations_asinti_viira
					value = 70
					compare = greater_than_or_equals
				}
				check_variable = {
					var = BAR_relations_silver_leopold
					value = 70
					compare = greater_than_or_equals
				}
				check_variable = {
					var = BAR_relations_silver_viira
					value = 70
					compare = greater_than_or_equals
				}
				check_variable = {
					var = BAR_relations_leopold_viira
					value = 70
					compare = greater_than_or_equals
				}
				check_variable = {
					var = BAR_relations_asinti_leopold
					value = 70
					compare = greater_than_or_equals
				}
			}
			country_event = { days = 1 id = barrad_end.2 }
		}
	}
}
BAR_relations_idea_swap = {
	hidden_effect = {
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_silver
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
			}	
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_silver_positive }
				}
				add_ideas = BAR_relations_asinti_silver_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_silver
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_silver_negative }
				}
				add_ideas = BAR_relations_asinti_silver_negative
			}
		}
		if = {
			limit = {
				check_variable = {
					var = BAR_relations_asinti_leopold
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_leopold_positive }
				}
				add_ideas = BAR_relations_asinti_leopold_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_leopold
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_leopold_negative }
				}
				add_ideas = BAR_relations_asinti_leopold_negative
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_viira
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_viira_positive }
				}
				add_ideas = BAR_relations_asinti_viira_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_viira
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_asinti_viira_negative }
				}
				add_ideas = BAR_relations_asinti_viira_negative
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_leopold
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_silver_leopold_positive }
				}
				add_ideas = BAR_relations_silver_leopold_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_leopold
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_silver_leopold_negative }
				}
				add_ideas = BAR_relations_silver_leopold_negative
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_viira
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_silver_viira_positive }
				}
				add_ideas = BAR_relations_silver_viira_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_viira
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_silver_viira_negative }
				}
				add_ideas = BAR_relations_silver_viira_negative
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_leopold_viira
					value = 70
					compare = greater_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_leopold_viira_positive }
				}
				add_ideas = BAR_relations_leopold_viira_positive
			}
		}
		if = {
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_leopold_viira
					value = 30
					compare = less_than_or_equals
				}
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			if = {
				limit = {
					NOT = { has_idea = BAR_relations_leopold_viira_negative }
				}
				add_ideas = BAR_relations_leopold_viira_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_silver
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_asinti_silver
					value = 70
					compare = less_than
				}
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_silver_positive
				}
				remove_ideas = BAR_relations_asinti_silver_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_silver_negative
				}
				remove_ideas = BAR_relations_asinti_silver_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_leopold
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_asinti_leopold
					value = 70
					compare = less_than
				}
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_leopold_positive
				}
				remove_ideas = BAR_relations_asinti_leopold_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_leopold_negative
				}
				remove_ideas = BAR_relations_asinti_leopold_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_asinti_viira
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_asinti_viira
					value = 70
					compare = less_than
				}
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_viira_positive
				}
				remove_ideas = BAR_relations_asinti_viira_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_asinti_viira_negative
				}
				remove_ideas = BAR_relations_asinti_viira_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_leopold
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_silver_leopold
					value = 70
					compare = less_than
				}
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					has_idea = BAR_relations_silver_leopold_positive
				}
				remove_ideas = BAR_relations_silver_leopold_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_silver_leopold_negative
				}
				remove_ideas = BAR_relations_silver_leopold_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_silver_viira
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_silver_viira
					value = 70
					compare = less_than
				}
			}
			if = {
				limit = {
					has_idea = BAR_relations_silver_viira_positive
				}
				remove_ideas = BAR_relations_silver_viira_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_silver_viira_negative
				}
				remove_ideas = BAR_relations_silver_viira_negative
			}
		}
		if = { #remove both
			limit = {
				tag = BAR
				check_variable = {
					var = BAR_relations_leopold_viira
					value = 30
					compare = greater_than
				}
				check_variable = {
					var = BAR_relations_leopold_viira
					value = 70
					compare = less_than
				}
			}
			if = {
				limit = {
					has_idea = BAR_relations_leopold_viira_positive
				}
				remove_ideas = BAR_relations_leopold_viira_positive
			}
			if = {
				limit = {
					has_idea = BAR_relations_leopold_viira_negative
				}
				remove_ideas = BAR_relations_leopold_viira_negative
			}
		}
	BAR_happy_ending = yes
	}
}
BAR_resources_add_asinti_250 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_250
	add_to_variable = {
		var = BAR_resources_asinti
		value = 250
	}
}
BAR_resources_add_asinti_500 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_500
	add_to_variable = {
		var = BAR_resources_asinti
		value = 500
	}
}
BAR_resources_add_asinti_750 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_750
	add_to_variable = {
		var = BAR_resources_asinti
		value = 750
	}
}
BAR_resources_add_asinti_1000 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_1000
	add_to_variable = {
		var = BAR_resources_asinti
		value = 1000
	}
}
BAR_resources_add_silver_250 = {
	custom_effect_tooltip = BAR_resources_gain_silver_250
	add_to_variable = {
		var = BAR_resources_silver
		value = 250
	}
}
BAR_resources_add_silver_500 = {
	custom_effect_tooltip = BAR_resources_gain_silver_500
	add_to_variable = {
		var = BAR_resources_silver
		value = 500
	}
}
BAR_resources_add_silver_750 = {
	custom_effect_tooltip = BAR_resources_gain_silver_750
	add_to_variable = {
		var = BAR_resources_silver
		value = 750
	}
}
BAR_resources_add_silver_1000 = {
	custom_effect_tooltip = BAR_resources_gain_silver_1000
	add_to_variable = {
		var = BAR_resources_silver
		value = 1000
	}
}
BAR_resources_add_leopold_250 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_250
	add_to_variable = {
		var = BAR_resources_leopold
		value = 250
	}
}
BAR_resources_add_leopold_500 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_500
	add_to_variable = {
		var = BAR_resources_leopold
		value = 500
	}
}
BAR_resources_add_leopold_750 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_750
	add_to_variable = {
		var = BAR_resources_leopold
		value = 750
	}
}
BAR_resources_add_leopold_1000 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_1000
	add_to_variable = {
		var = BAR_resources_leopold
		value = 1000
	}
}
BAR_resources_add_viira_250 = {
	custom_effect_tooltip = BAR_resources_gain_viira_250
	add_to_variable = {
		var = BAR_resources_viira
		value = 250
	}
}
BAR_resources_add_viira_500 = {
	custom_effect_tooltip = BAR_resources_gain_viira_500
	add_to_variable = {
		var = BAR_resources_viira
		value = 500
	}
}
BAR_resources_add_viira_750 = {
	custom_effect_tooltip = BAR_resources_gain_viira_750
	add_to_variable = {
		var = BAR_resources_viira
		value = 750
	}
}
BAR_resources_add_viira_1000 = {
	custom_effect_tooltip = BAR_resources_gain_viira_1000
	add_to_variable = {
		var = BAR_resources_viira
		value = 1000
	}
}

### subtract resources ###

BAR_resources_subtract_asinti_1500 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_1350
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 900
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_1500
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 1500
		}
	}	
}
BAR_resources_subtract_asinti_500 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_300
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 300
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_500
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 500
		}
	}	
}
BAR_resources_subtract_asinti_750 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_450
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 450
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_750
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 750
		}
	}
}
BAR_resources_subtract_asinti_1000 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_600
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 600
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_1000
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 1000
		}
	}
}
BAR_resources_subtract_silver_1500 = {
	custom_effect_tooltip = BAR_resources_substract_silver_1500
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 1500
	}
}
BAR_resources_subtract_silver_500 = {
	custom_effect_tooltip = BAR_resources_substract_silver_500
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 500
	}
}
BAR_resources_subtract_silver_750 = {
	custom_effect_tooltip = BAR_resources_substract_silver_750
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 750
	}
}
BAR_resources_subtract_silver_1000 = {
	custom_effect_tooltip = BAR_resources_substract_silver_1000
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 1000
	}
}
BAR_resources_subtract_leopold_1500 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_1500
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 1500
	}
}
BAR_resources_subtract_leopold_500 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_500
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 500
	}
}
BAR_resources_subtract_leopold_750 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_750
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 750
	}
}
BAR_resources_subtract_leopold_1000 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_1000
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 1000
	}
}
BAR_resources_subtract_viira_1500 = {
	custom_effect_tooltip = BAR_resources_substract_viira_1500
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 1500
	}
}
BAR_resources_subtract_viira_500 = {
	custom_effect_tooltip = BAR_resources_substract_viira_500
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 500
	}
}
BAR_resources_subtract_viira_750 = {
	custom_effect_tooltip = BAR_resources_substract_viira_750
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 750
	}
}
BAR_resources_subtract_viira_1000 = {
	custom_effect_tooltip = BAR_resources_substract_viira_1000
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 1000
	}
}

### relations ###

BAR_relations_increase_asinti_silver_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_silver
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_silver
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_silver = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_asinti_leopold_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_leopold = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_asinti_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_viira
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_asinti_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_silver_leopold_5 = {
	custom_effect_tooltip = BAR_relations_increase_silver_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_silver_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_leopold = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_silver_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_silver_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_silver_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_leopold_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_leopold_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_leopold_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_leopold_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}

BAR_relations_decrease_asinti_silver_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_silver
	if = {
		limit = {
			has_country_flag = { flag = barrad_endgame value = 0 }
			has_country_flag = BAR_silver_sad
			check_variable = { BAR_relations_asinti_silver > 69 }
		}
		set_country_flag = BAR_silver_trig_event
	}
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_silver
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_silver = 0 }
	}
	if = {
		limit = {
			has_country_flag = BAR_silver_trig_event
			check_variable = { BAR_relations_asinti_silver < 70 }
		}
		clr_country_flag = BAR_silver_sad
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_asinti_leopold_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_leopold
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_asinti_leopold = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_asinti_viira_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_viira = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_silver_leopold_5 = {
	if = {
		limit = {
			has_country_flag = { flag = barrad_endgame value = 0 }
			has_country_flag = BAR_silver_sad
			check_variable = { BAR_relations_silver_leopold > 69 }
		}
		set_country_flag = BAR_silver_trig_event
	}
	custom_effect_tooltip = BAR_relations_decrease_silver_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_silver_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_leopold = 0 }
	}
	if = {
		limit = {
			has_country_flag = BAR_silver_trig_event
			check_variable = { BAR_relations_silver_leopold < 70 }
		}
		clr_country_flag = BAR_silver_sad
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_silver_viira_5 = {
	if = {
		limit = {
			has_country_flag = { flag = barrad_endgame value = 0 }
			has_country_flag = BAR_silver_sad
			check_variable = { BAR_relations_silver_viira > 69 }
		}
		set_country_flag = BAR_silver_trig_event
	}
	custom_effect_tooltip = BAR_relations_decrease_silver_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_silver_viira
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_silver_viira = 0 }
	}
	if = {
		limit = {
			has_country_flag = BAR_silver_trig_event
			check_variable = { BAR_relations_silver_viira < 70 }
		}
		clr_country_flag = BAR_silver_sad
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_leopold_viira_5 = {
	custom_effect_tooltip = BAR_relations_decrease_leopold_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_leopold_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_leopold_viira = 0 }
	}
	BAR_relations_idea_swap = yes
}



BAR_viira_round_end = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
		}
		country_event = { id = barrad_huj.5 }
	}
	else = {
		country_event = { id = barrad_huj.6 } #we lost...
	}
}
BAR_viira_turn = {
	if = {
		limit = {
			check_variable = { v_hp > 0 }
		}
		random_list = {
			50 = { #target weakest one
				set_temp_variable = { min = 1000 }
				set_variable = { viira_target = 0 }
				if = {
					limit = {
						check_variable = { a_hp > 0 }
						check_variable = { a_hp < min }
					}
					set_variable = { min = a_hp }
					set_variable = { viira_target = 1 }
				}
				if = {
					limit = {
						check_variable = { l_hp > 0 }
						check_variable = { l_hp < min }
					}
					set_variable = { min = l_hp }
					set_variable = { viira_target = 2 }
				}
				if = {
					limit = {
						check_variable = { s_hp > 0 }
						check_variable = { s_hp < min }
					}
					set_variable = { min = s_hp }
					set_variable = { viira_target = 3 }
				}
			}
			50 = { #target random one
				if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive	
					}
					random_list = {
						34 = {
							set_variable = { viira_target = 1 }
						}
						33 = {
							set_variable = { viira_target = 2 }
						}
						33 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 2 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					set_variable = { viira_target = 3 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 2 }
						}
					}
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive}
					}
					set_variable = { viira_target = 1 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						NOT = { has_country_flag = barrad_asinti_alive}
						has_country_flag = barrad_leopold_alive
					}
					set_variable = { viira_target = 2 }
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_stun < 1 }
			}
			BAR_viira_attack = yes
		}
		else = {
			set_variable = { viira_turn_action = 5 }
			subtract_from_variable = { v_stun = 1 }
		}
		set_variable = { viira_dmg_debuff = 1 }
		if = {
			limit = {
				check_variable = { a_hp < 1 }
			}
			barrad_kill_asinti = yes
		}
		if = {
			limit = {
				check_variable = { l_hp < 1 }
			}
			barrad_kill_leopold = yes
		}
		if = {
			limit = {
				check_variable = { s_hp < 1 }
			}
			barrad_kill_silver = yes
		}
		bar_pen_fight_gui_reload = yes
		BAR_viira_round_end = yes
	}
	else = {
		clr_country_flag = barrad_viira_alive
		country_event = { id = barrad_huj.7 } #we won!
	}
}
BAR_viira_attack = {
	set_temp_variable = { v_hp_half = v_hp }
	set_temp_variable = { v_hp_qua = v_hp }
	divide_temp_variable = { v_hp_half = 2 }
	divide_temp_variable = { v_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { v_in > 10 }
		}
		if = {
			limit = {
				check_variable = {
					var = v_hp
					value = v_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_viira_strong_attack = yes
					set_variable = { viira_turn_action = 2 }
				}
				30 = {
					BAR_viira_normal_attack = yes
					set_variable = { viira_turn_action = 1 }
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_hp < v_hp_qua }
			}
			random_list = {
				50 = {
					BAR_viira_heal = yes
					set_variable = { viira_turn_action = 3 }
				}
				50 = {
					BAR_viira_strong_attack = yes
					set_variable = { viira_turn_action = 2 }
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_hp < v_hp_half }
			}
			random_list = {
				30 = {
					BAR_viira_heal = yes
					set_variable = { viira_turn_action = 3 }
				}
				70 = {
					BAR_viira_strong_attack = yes
					set_variable = { viira_turn_action = 2 }
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { v_in = 0 }
			}
			BAR_viira_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = v_hp
						value = v_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						60 = {
							BAR_viira_rest = yes
							set_variable = { viira_turn_action = 4 }
						}
						20 = {
							BAR_viira_normal_attack = yes
							set_variable = { viira_turn_action = 1 }
						}
						20 = {
							BAR_viira_strong_attack = yes
							set_variable = { viira_turn_action = 2 }
						}
					}
				}
				else = {
					random_list = {
						60 = {
							BAR_viira_rest = yes
							set_variable = { viira_turn_action = 4 }
						}
						40 = {
							BAR_viira_normal_attack = yes
							set_variable = { viira_turn_action = 1 }
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { v_hp < v_hp_qua }
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						50 = {
							BAR_viira_heal = yes
							set_variable = { viira_turn_action = 3 }
						}
						50 = {
							BAR_viira_strong_attack = yes
							set_variable = { viira_turn_action = 2 }
						}
					}
				}
				else = {
					random_list = {
						50 = {
							BAR_viira_heal = yes
							set_variable = { viira_turn_action = 3 }
						}
						50 = {
							BAR_viira_normal_attack = yes
							set_variable = { viira_turn_action = 1 }
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { v_hp < v_hp_half }
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						30 = {
							BAR_viira_heal = yes
							set_variable = { viira_turn_action = 3 }
						}
						20 = {
							BAR_viira_normal_attack = yes
							set_variable = { viira_turn_action = 1 }
						}
						20 = {
							BAR_viira_strong_attack = yes
							set_variable = { viira_turn_action = 2 }
						}
						30 = {
							BAR_viira_rest = yes
							set_variable = { viira_turn_action = 4 }
						}
					}
				}
				else = {
					random_list = {
						30 = {
							BAR_viira_heal = yes
							set_variable = { viira_turn_action = 3 }
						}
						40 = {
							BAR_viira_strong_attack = yes
							set_variable = { viira_turn_action = 2 }
						}
						30 = {
							BAR_viira_rest = yes
							set_variable = { viira_turn_action = 4 }
						}
					}
				}
			}
		}
	}
}

BAR_viira_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}					
	}
	divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
	if = {
		limit = {
			check_variable = { viira_target = 1 }
		}
		subtract_from_variable = { a_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 2 }
		}
		subtract_from_variable = { l_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 3 }
		}
		subtract_from_variable = { s_hp = dmgToDeal}
	}
	
	if = {
		limit = {
			check_variable = { a_hp < 0 }
		}
		barrad_kill_asinti = yes
	}
	if = {
		limit = {
			check_variable = { l_hp < 0 }
		}
		barrad_kill_leopold = yes
	}
	if = {
		limit = {
			check_variable = { s_hp < 0 }
		}
		barrad_kill_silver = yes
	}
	subtract_from_variable = { v_in = 1 }
}
BAR_viira_strong_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 26 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 28 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 30 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 32 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 34 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 36 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 38 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 40 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 42 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 54 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 56 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 58 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 69 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 62 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 64 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 66 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 68 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 70 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 72 }
		}
	}
	divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
	if = {
		limit = {
			check_variable = { viira_target = 1 }
		}
		subtract_from_variable = { a_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 2 }
		}
		subtract_from_variable = { l_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 3 }
		}
		subtract_from_variable = { s_hp = dmgToDeal}
	}
	
	if = {
		limit = {
			check_variable = { a_hp < 0 }
		}
		barrad_kill_asinti = yes
	}
	if = {
		limit = {
			check_variable = { l_hp < 0 }
		}
		barrad_kill_leopold = yes
	}
	if = {
		limit = {
			check_variable = { s_hp < 0 }
		}
		barrad_kill_silver = yes
	}
	subtract_from_variable = { v_in = 3 }	
}
BAR_viira_rest = {
	if = {
		limit = {
			check_variable = { v_in < 16 }
		}
		add_to_variable = { v_in = 5 }
	}
	else = {
		set_variable = { v_in = 20 }
	}
}
BAR_viira_heal = {
	random_list = {
		10 = {
			set_temp_variable = { healVal = 32 }
		}
		10 = {
			set_temp_variable = { healVal = 34 }
		}
		10 = {
			set_temp_variable = { healVal = 36 }
		}
		10 = {
			set_temp_variable = { healVal = 38 }
		}
		10 = {
			set_temp_variable = { healVal = 40 }
		}
		10 = {
			set_temp_variable = { healVal = 42 }
		}
		10 = {
			set_temp_variable = { healVal = 44 }
		}
		10 = {
			set_temp_variable = { healVal = 46 }
		}
		10 = {
			set_temp_variable = { healVal = 48 }
		}
		10 = {
			set_temp_variable = { healVal = 50 }
		}
	}
	set_temp_variable = { curHp = v_hp }
	add_to_temp_variable = { curHp = healVal }
	if = {
		limit = {
			check_variable = { curHp > v_hp_max }
		}
		set_variable = { v_hp = v_hp_max}
	}
	else = {
		add_to_variable = { v_hp = healVal }
	}
	subtract_from_variable = { v_in = 1 }	
}

BAR_pentarchy_turn = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
			random_list = {
				34 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
			set_variable = { character_attacking = 3 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
			}
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
			set_variable = { character_attacking = 1 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				NOT = { has_country_flag = barrad_asinti_alive}
				has_country_flag = barrad_leopold_alive
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
			set_variable = { character_attacking = 2 }
		}
		BAR_pentarchy_attack = yes
		if = {
			limit = {
				check_variable = { v_hp > 0 }
			}
			country_event = { id = barrad_huj.8 }
		}
		else = { #gameover
			country_event = { id = barrad_huj.9 }
		}
	}
	else = { #viira won
		country_event = { id = barrad_huj.10 }
	}
}
BAR_pentarchy_attack = {
	if = { #asinti
		limit = {
			check_variable = { character_attacking = 1 }
		}
		BAR_asinti_attack = yes
	}
	if = { #leopold
		limit = {
			check_variable = { character_attacking = 2 }
		}
		BAR_leopold_attack = yes
	}
	if = { #silver
		limit = {
			check_variable = { character_attacking = 3 }
		}
		BAR_silver_attack = yes
	}
}
BAR_asinti_attack = {
	set_temp_variable = { a_hp_half = a_hp }
	set_temp_variable = { a_hp_qua = a_hp }
	divide_temp_variable = { a_hp_half = 2 }
	divide_temp_variable = { a_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { a_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = a_hp
					value = a_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { a_hp < a_hp_qua }
			}
			random_list = {
				40 = {
					BAR_asinti_normal_attack = yes
				}
				20 = {
					BAR_asinti_debuff = yes
				}
				40 = {
					BAR_asinti_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { a_hp < a_hp_half }
			}
			random_list = {
				50 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
				20 = {
					BAR_asinti_heal = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { a_in = 0 }
			}
			BAR_pentarchy_rest = yes
			set_variable = { BAR_fight_pentarchy_action = 4}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				random_list = {
					60 = {
						BAR_asinti_normal_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
			if = {
				limit = {
					check_variable = { a_hp < a_hp_qua }
				}
				if = {
					limit = {
						check_variable = { a_in > 1 }
					}
					random_list = {
						20 = {
							BAR_asinti_normal_attack = yes

						}
						40 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					random_list = {
						70 = {
							BAR_asinti_normal_attack = yes
						}
						30 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { a_hp < a_hp_half }
				}
				if = {
					limit = {
						check_variable = { a_in > 1 }
					}
					random_list = {
						40 = {
							BAR_asinti_normal_attack = yes
						}
						20 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					60 = {
						BAR_asinti_normal_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
		}
	}
}

BAR_asinti_normal_attack = {
	set_variable = { BAR_fight_pentarchy_action = 1}
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { a_in = 1 }
}
BAR_asinti_debuff = {
	set_variable = { BAR_fight_pentarchy_action = 2}
	subtract_from_variable = { a_in = 1}
	set_variable = { viira_dmg_debuff = 2 }
}
BAR_asinti_heal = {
	set_variable = { BAR_fight_pentarchy_action = 3}
	random_list = {
		10 = {
			set_temp_variable = { healAmount = 7 }
		}
		10 = {
			set_temp_variable = { healAmount = 8 }
		}
		10 = {
			set_temp_variable = { healAmount = 9 }
		}
		10 = {
			set_temp_variable = { healAmount = 10 }
		}
		10 = {
			set_temp_variable = { healAmount = 11 }
		}
		10 = {
			set_temp_variable = { healAmount = 12 }
		}
		10 = {
			set_temp_variable = { healAmount = 13 }
		}
		10 = {
			set_temp_variable = { healAmount = 14 }
		}
		10 = {
			set_temp_variable = { healAmount = 16 }
		}
		10 = {
			set_temp_variable = { healAmount = 17 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive	
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { l_hp_t = l_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { l_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			NOT = { has_country_flag = barrad_leopold_alive }
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = { has_country_flag = barrad_asinti_alive }
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { l_hp_t = l_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { l_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = { has_country_flag = barrad_asinti_alive }
			NOT = { has_country_flag = barrad_leopold_alive }
		}
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { l_hp_t = l_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { l_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			has_country_flag = barrad_asinti_alive
			NOT = { has_country_flag = barrad_leopold_alive}
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			NOT = { has_country_flag = barrad_asinti_alive}
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { l_hp_t = l_hp_max }
		
		add_to_temp_variable = { l_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
	}
	subtract_from_variable = { a_in = 2}
}


BAR_leopold_attack = {
	set_temp_variable = { l_hp_half = l_hp }
	set_temp_variable = { l_hp_qua = l_hp }
	divide_temp_variable = { l_hp_half = 2 }
	divide_temp_variable = { l_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { l_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = l_hp
					value = l_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				30 = {
					BAR_leopold_normal_attack = yes
				}
				60 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { l_hp < l_hp_qua }
			}
			random_list = {
				80 = {
					BAR_leopold_strong_attack = yes
				}
				20 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { l_hp < l_hp_half }
			}
			random_list = {
				20 = {
					BAR_leopold_normal_attack = yes
				}
				70 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { l_in = 0 }
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { l_hp < l_hp_qua }
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { l_hp < l_hp_half }
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
		}
	}
}

BAR_leopold_normal_attack = {
	set_variable = { BAR_fight_pentarchy_action = 5}
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 1}
}
BAR_leopold_strong_attack = {
	set_variable = { BAR_fight_pentarchy_action = 6}
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 25 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 26 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 27 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 28 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 29 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 30 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 3}
}
BAR_leopold_stun = {
	set_variable = { BAR_fight_pentarchy_action = 7 }
	random_list = {
		90 = {
			random_list = {
				40 = {
					set_variable = { v_stun = 1 }
				}
				50 = {
					set_variable = { v_stun = 2 }
				}
				10 = {
					set_variable = { v_stun = 3 }
				}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 1}
}



BAR_silver_attack = {
	set_temp_variable = { s_hp_half = s_hp }
	set_temp_variable = { s_hp_qua = s_hp }
	divide_temp_variable = { s_hp_half = 2 }
	divide_temp_variable = { s_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { s_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = s_hp
					value = s_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				80 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { s_hp < s_hp_qua }
			}
			random_list = {
				40 = {
					BAR_silver_normal_attack = yes
				}
				30 = {
					BAR_silver_lifesteal_attack = yes
				}
				30 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { s_hp < s_hp_half }
			}
			random_list = {
				60 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_lifesteal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { s_in = 0 }
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = s_hp
						value = s_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						90 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = { s_hp < s_hp_qua }
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						60 = {
							BAR_silver_normal_attack = yes
						}
						30 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = { s_hp < s_hp_half }
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						80 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
		}
	}
}

BAR_silver_normal_attack = {
	set_variable = { BAR_fight_pentarchy_action = 8}
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 2 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { s_in = 1}
}

BAR_silver_lifesteal_attack = {
	set_variable = { BAR_fight_pentarchy_action = 9}
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal }
			set_temp_variable = { s_hp_temp = s_hp }
			add_to_temp_variable = { s_hp_temp = dmgToDeal }
			if = {
				limit = {
					check_variable = { s_hp_max > s_hp_temp}
				}
				add_to_variable = { s_hp = dmgToDeal}
			}
			else = {
				set_variable = { s_hp = s_hp_max}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { s_in = 2}
}

BAR_silver_heal = {
	set_temp_variable = { min = 1000 }
	random_list = {
		10 = {
			set_temp_variable = { healAmount = 24 }
		}
		10 = {
			set_temp_variable = { healAmount = 26 }
		}
		10 = {
			set_temp_variable = { healAmount = 28 }
		}
		10 = {
			set_temp_variable = { healAmount = 30 }
		}
		10 = {
			set_temp_variable = { healAmount = 32 }
		}
		10 = {
			set_temp_variable = { healAmount = 34 }
		}
		10 = {
			set_temp_variable = { healAmount = 36 }
		}
		10 = {
			set_temp_variable = { healAmount = 38 }
		}
		10 = {
			set_temp_variable = { healAmount = 40 }
		}
		10 = {
			set_temp_variable = { healAmount = 42 }
		}
	}
	if = {
		limit = {
			check_variable = { l_hp > 0 }
			check_variable = { l_hp < min }
		}
		set_variable = { min = l_hp }
		set_variable = { heal_target = 2 }
		set_variable = { BAR_fight_pentarchy_action = 10}
	}
	if = {
		limit = {
			check_variable = { a_hp > 0 }
			check_variable = { a_hp < min }
		}
		set_variable = { min = a_hp }
		set_variable = { heal_target = 1 }
		set_variable = { BAR_fight_pentarchy_action = 11}
	}
	if = {
		limit = {
			check_variable = { s_hp > 0 }
			check_variable = { s_hp < min }
		}
		set_variable = { min = s_hp }
		set_variable = { heal_target = 3 }
		set_variable = { BAR_fight_pentarchy_action = 12}
	}
	if = {
		limit = {
			check_variable = { heal_target = 1 }
		}
		set_temp_variable = { a_hp_temp = a_hp}
		add_to_temp_variable = { a_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { a_hp_max > a_hp_temp}
			}
			add_to_variable = { a_hp = healAmount}
		}
		else = {
			set_variable = { a_hp = a_hp_max}
		}
	}
	if = {
		limit = {
			check_variable = { heal_target = 2 }
		}
		set_temp_variable = { l_hp_temp = l_hp}
		add_to_temp_variable = { l_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { l_hp_max > l_hp_temp}
			}
			add_to_variable = { l_hp = healAmount}
		}
		else = {
			set_variable = { l_hp = l_hp_max}
		}
	}
	if = {
		limit = {
			check_variable = { heal_target = 3 }
		}
		set_temp_variable = { s_hp_temp = a_hp}
		add_to_temp_variable = { s_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { s_hp_max > s_hp_temp}
			}
			add_to_variable = { s_hp = healAmount}
		}
		else = {
			set_variable = { s_hp = s_hp_max}
		}
	}
	subtract_from_variable = { s_in = 2}
}


BAR_pentarchy_rest = {
	set_variable = { BAR_fight_pentarchy_action = 4}
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		if = {
			limit = {
				check_variable = { a_in < 10 }
			}
			add_to_variable = { a_in = 2 }
		}
		else = {
			set_variable = { a_in = 10 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		if = {
			limit = {
				check_variable = { s_in < 10 }
			}
			add_to_variable = { s_in = 2 }
		}
		else = {
			set_variable = { s_in = 10 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		if = {
			limit = {
				check_variable = { l_in < 10 }
			}
			add_to_variable = { l_in = 2 }
		}
		else = {
			set_variable = { l_in = 10 }
		}
	}
}

BAR_clear_vars_fight = {
	clear_variable = a_hp
	clear_variable = a_hp_max
	clear_variable = a_in
	clear_variable = l_hp
	clear_variable = l_hp_max
	clear_variable = l_in
	clear_variable = s_hp
	clear_variable = s_hp_max
	clear_variable = s_in
	clear_variable = v_hp
	clear_variable = v_hp_max
	clear_variable = v_in
	clear_variable = heal_target
	clear_variable = character_attacking
	clear_variable = viira_dmg_debuff
	clear_variable = v_stun
}

BAR_population_convert = {
	THIS = {
		set_state_category = rural
		set_building_level = {
			type = industrial_complex
			level = 0
			instant_build = yes
		}
		set_temp_variable = { afac = arms_factory_level }
		subtract_from_temp_variable = { afac = 2 }
		if = {
			limit = {
				check_variable = { afac > 0 }
			}
			set_building_level = {
				type = arms_factory
				level = afac
				instant_build = yes
			}
		}
		else = {
			set_building_level = {
				type = arms_factory
				level = 0
				instant_build = yes
			}
		}
		add_core_of = BAR	
	}
	if = {
		limit = {
			BAR = {
				has_country_flag = BAR_undead_convert_2
			}
		}
		set_temp_variable = { multip = 0.8 }
	}
	else = {
		set_temp_variable = { multip = 0.4 }
	}
	if = {
		limit = {
			THIS = {
				state_population > 900000
			}
		}
		THIS = {
			set_temp_variable = { totalPop = 900000 }
			save_current_manpower = yes
			add_manpower = -900000
			if = {
				limit = {
					THIS = {
						state_population > 900000
					}
				}
				add_manpower = -900000
				if = {
					limit = {
						THIS = {
							state_population > 900000
						}
					}
					add_manpower = -900000
					if = {
						limit = {
							THIS = {
								state_population > 900000
							}
						}
						add_manpower = -900000
						if = {
							limit = {
								THIS = {
									state_population > 900000
								}
							}
							add_manpower = -900000
							if = {
								limit = {
									THIS = {
										state_population > 900000
									}
								}
								add_manpower = -900000
								if = {
									limit = {
										THIS = {
											state_population > 900000
										}
									}
									add_manpower = -900000
									if = {
										limit = {
											THIS = {
												state_population > 900000
											}
										}
										add_manpower = -900000
									}
									else = {
										set_temp_variable = { popToKill = state_population }
										multiply_temp_variable = { popToKill = -1 }
										add_manpower = popToKill
									}
								}
								else = {
									set_temp_variable = { popToKill = state_population }
									multiply_temp_variable = { popToKill = -1 }
									add_manpower = popToKill
								}
							}
							else = {
								set_temp_variable = { popToKill = state_population }
								multiply_temp_variable = { popToKill = -1 }
								add_manpower = popToKill
							}
						}
						else = {
							set_temp_variable = { popToKill = state_population }
							multiply_temp_variable = { popToKill = -1 }
							add_manpower = popToKill
						}
					}
					else = {
						set_temp_variable = { popToKill = state_population }
						multiply_temp_variable = { popToKill = -1 }
						add_manpower = popToKill
					}
				}
				else = {
					set_temp_variable = { popToKill = state_population }
					multiply_temp_variable = { popToKill = -1 }
					add_manpower = popToKill
				}
			}
			else = {
				set_temp_variable = { popToKill = state_population }
				multiply_temp_variable = { popToKill = -1 }
				add_manpower = popToKill
			}
			restore_previous_manpower = yes
			multiply_temp_variable = { totalPop = multip }
			ROOT = {
				add_manpower = totalPop
			}
		}
	}
	else = {
		THIS = {
			set_temp_variable = { totalPop = state_population }
			save_current_manpower = yes
			multiply_temp_variable = { totalPop = -1 }
			add_manpower = totalPop
			restore_previous_manpower = yes
			set_temp_variable = { multip = -1 }
			multiply_temp_variable = { totalPop = multip }
			ROOT = {
				add_manpower = totalPop
			}
		}
	}
}
BAR_un_idea_buffs_remove = {
	hidden_effect = {
		clr_country_flag = BAR_un_buff_piercing_flag
		clr_country_flag = BAR_un_buff_org_flag
		clr_country_flag = BAR_un_buff_break_flag
		clr_country_flag = BAR_un_buff_def_flag
		clr_country_flag = BAR_un_buff_attack_flag
		set_technology = {
			popup = no
			BAR_un_buff_piercing_tech = 0
		}
		set_technology = {
			popup = no
			BAR_un_buff_org_tech = 0
		}
		set_technology = {
			popup = no
			BAR_un_buff_break_tech = 0
		}
		set_technology = {
			popup = no
			BAR_un_buff_def_tech = 0
		}
		set_technology = {
			popup = no
			BAR_un_buff_attack_tech = 0
		}
	}	
}
barrad_kill_leopold = {
	hidden_effect = {
		clr_country_flag = barrad_leopold_alive
		if = {
			limit = {
				has_variable = bar_pen_screen_show
			}
			bar_gui_update = yes
		}
		if = {
			limit = {
				has_character = BAR_leopold_schmeller
			}
			BAR_leopold_schmeller = {
				retire = yes
			}
		}
		set_technology = {
			popup = no
			barrad_leopold_alive = 0
		}
		clear_variable = BAR_resources_leopold
		if = {
			limit = {
				624 = {
					is_owned_by = BAR
				}
			}
			set_province_name = {
				id = 4557
				name = BAR_beorgham
			}
		}
		remove_ideas = BAR_relations_asinti_leopold_negative
		remove_ideas = BAR_relations_asinti_leopold_positive
		remove_ideas = BAR_relations_leopold_viira_negative
		remove_ideas = BAR_relations_leopold_viira_positive
		remove_ideas = BAR_relations_silver_leopold_negative
		remove_ideas = BAR_relations_silver_leopold_positive
		BAR_pentarchy_is_dead = yes
	}
}
barrad_kill_asinti = {
	hidden_effect = {
		clr_country_flag = barrad_asinti_alive
		if = {
			limit = {
				has_variable = bar_pen_screen_show
			}
			bar_gui_update = yes
		}
		if = {
			limit = {
				has_character = BAR_asinti
			}
			BAR_asinti = {
				retire = yes
			}
		}
		set_technology = {
			popup = no
			barrad_asinti_alive = 0
		}
		clear_variable = BAR_resources_asinti
		if = {
			limit = {
				625 = {
					is_owned_by = BAR
				}
			}
			set_province_name = {
				id = 4516
				name = BAR_grenbridge
			}
		}
		remove_ideas = BAR_relations_asinti_leopold_negative
		remove_ideas = BAR_relations_asinti_leopold_positive
		remove_ideas = BAR_relations_asinti_viira_negative
		remove_ideas = BAR_relations_asinti_viira_positive
		remove_ideas = BAR_relations_asinti_silver_negative
		remove_ideas = BAR_relations_asinti_silver_positive
		BAR_pentarchy_is_dead = yes
	}
}
barrad_kill_silver = {
	hidden_effect = {
		clr_country_flag = barrad_silver_star_alive
		if = {
			limit = {
				has_variable = bar_pen_screen_show
			}
			bar_gui_update = yes
		}
		if = {
			limit = {
				has_character = BAR_silver_star
			}
			BAR_silver_star = {
				retire = yes
			}
		}
		set_technology = {
			popup = no
			barrad_silver_star_alive = 0
		}
		clear_variable = BAR_resources_silver
		remove_ideas = BAR_relations_silver_leopold_negative
		remove_ideas = BAR_relations_silver_leopold_positive
		remove_ideas = BAR_relations_silver_viira_negative
		remove_ideas = BAR_relations_silver_viira_positive
		remove_ideas = BAR_relations_asinti_silver_negative
		remove_ideas = BAR_relations_asinti_silver_positive
		BAR_pentarchy_is_dead = yes
	}	
}
barrad_kill_viira = {
	hidden_effect = {
		clr_country_flag = barrad_viira_alive
		if = {
			limit = {
				has_variable = bar_pen_screen_show
			}
			bar_gui_update = yes
		}
		if = {
			limit = {
				has_character = BAR_viira_lehtola
			}
			BAR_viira_lehtola = {
				retire = yes
			}
		}
		set_technology = {
			popup = no
			barrad_viira_alive = 0
		}
		clear_variable = BAR_resources_viira
		if = {
			limit = {
				625 = {
					is_owned_by = BAR
				}
			}
			set_province_name = {
				id = 4910
				name = BAR_axford
			}
		}
		remove_ideas = BAR_relations_leopold_viira_negative
		remove_ideas = BAR_relations_leopold_viira_positive
		remove_ideas = BAR_relations_silver_viira_negative
		remove_ideas = BAR_relations_silver_viira_positive
		remove_ideas = BAR_relations_asinti_viira_negative
		remove_ideas = BAR_relations_asinti_viira_positive
		BAR_pentarchy_is_dead = yes
	}
}
change_all_province_names = {
	hidden_effect = {
		set_province_name = {
			id = 4516
			name = BAR_grenbridge
		}
		set_province_name = {
			id = 4910
			name = BAR_axford
		}
		set_province_name = {
			id = 4557
			name = BAR_beorgham
		}
		set_province_name = {
			id = 12307
			name = BAR_elysium
		}
	}	
}
bar_viira_spells_max_overload = {
	hidden_effect = {
		if = {
			limit = {
				has_variable = BAR_viira_control
				check_variable = {
					viira_mana_overload > 150
				}
			}
			country_event = { id = barrad_viira.997 }
		}
	}	
}
one_state_inf = {
	if = {
		limit = {
			infrastructure < 10
		}
		add_building_construction = { 
			type = infrastructure
			level = 1
			instant_build = yes 
		}
	}
	else = {
		add_extra_state_shared_building_slots = 1
	}
}
BAR_clear_mess_puppet = {
	hidden_effect = {
		set_country_flag = BAR_end_of_pentarchy
		clr_country_flag = BAR_undead_nation_flag
		clr_country_flag = BAR_undead_convert
		clr_country_flag = BAR_undead_convert_2
		clr_country_flag = barrad_endgame
		clr_country_flag = BAR_leololo_smash
		clr_country_flag = BAR_asinti_ded_count
		clear_variable = BAR_viira_pup
		clear_variable = BAR_viira_control
		remove_ideas = BAR_blood_curse_idea
		remove_ideas = BAR_pentarchy
		remove_ideas = BAR_pentarchy_enemy
		remove_ideas = BAR_pentarchy_concern
		if = {
			limit = {
				has_template = "Leopold Schmeller"
			}
			delete_unit_template_and_units = {
				division_template = "Leopold Schmeller"
				disband = no
			}
			add_equipment_to_stockpile = {
				type = bar_leopold_equipment_1
				amount = -1000
			}
		}
		set_technology = {
			bar_leopold_new_body = 0
		}
		set_technology = {
			BAR_knights = 0
		}
		set_technology = {
			BAR_knights_upgrade = 0
		}
		add_country_leader_role = {
			character = BAR_angry_mob
			promote_leader = yes

			country_leader = {
				expire = "1965.1.1"
				ideology = falangism
			}
		}
		every_character = {
			remove_unit_leader_role = yes
		}
		load_focus_tree = generic_griffon_focus
		add_ideas = poverty1
		add_ideas = lack_of_scientists2
		add_ideas = limited_conscription
		add_ideas = civilian_economy
		change_all_province_names = yes
		drop_cosmetic_tag = yes
	}
}
BAR_new_journal_entry_eff = {
	hidden_effect = {
		ROOT = {
			set_variable = { BAR_new_journal_entry_trigger = 1 }
			country_event = { id = BAR_clear.1 hours = 6 }
		}	
	}
}

BAR_divide_resources = {
	if = {
		limit = {
			check_variable = { BAR_who = 2 }
		}
		set_variable = { temp_res = BAR_resources_asinti }
		divide_variable = { temp_res = 3 }
		round_variable = temp_res 
		subtract_from_variable = { BAR_resources_asinti = temp_res }
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 3 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_silver = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_viira_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_silver = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_silver = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
			}
			add_to_variable =  { BAR_resources_silver = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_leopold_alive
			}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_viira_alive
			}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
	}
	if = {
		limit = {
			check_variable = { BAR_who = 3 }
		}
		set_variable = { temp_res = BAR_resources_silver }
		divide_variable = { temp_res = 3 }
		round_variable = temp_res 
		subtract_from_variable = { BAR_resources_silver = temp_res}
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 3 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_viira_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_leopold_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
			}
			add_to_variable =  { BAR_resources_asinti = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_leopold_alive
			}
			add_to_variable =  { BAR_resources_leopold = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_viira_alive
			}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
	}
	if = {
		limit = {
			check_variable = { BAR_who = 4 }
		}
		set_variable = { temp_res = BAR_resources_leopold }
		divide_variable = { temp_res = 3 }
		round_variable = temp_res 
		subtract_from_variable = { BAR_resources_leopold = temp_res}
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_silver_star_alive
			}
			divide_variable = { temp_res = 3 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_silver = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_viira_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_silver_star_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_asinti = temp_res}
			add_to_variable =  { BAR_resources_silver = temp_res}
		}
		else_if ={
			limit = {
				has_country_flag = barrad_viira_alive
				has_country_flag = barrad_silver_star_alive
			}
			divide_variable = { temp_res = 2 }
			round_variable = temp_res 
			add_to_variable =  { BAR_resources_viira = temp_res}
			add_to_variable =  { BAR_resources_silver = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
			}
			add_to_variable =  { BAR_resources_asinti = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
			}
			add_to_variable =  { BAR_resources_silver = temp_res}
		}
		if = {
			limit = {
				has_country_flag = barrad_viira_alive
			}
			add_to_variable =  { BAR_resources_viira = temp_res}
		}
	}
}
BAR_gui_reset = {
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		set_variable = {
			bar_leopold_state = 2
		}
	}
	else = {
		set_variable = {
			bar_leopold_state = 4
		}
	}
	if = {
		limit = {
			OR = {
				has_country_flag = BAR_advisors_killed
				has_country_flag = BAR_ambrosius_killed
			}
		}
		set_variable = {
			bar_ambrosius_state = 4
		}
	}
	else = {
		set_variable = {
			bar_ambrosius_state = 2
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		set_variable = {
			bar_silver_state = 2
		}
	}
	else = {
		set_variable = {
			bar_silver_state = 4
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		set_variable = {
			bar_asinti_state = 2
		}
	}
	else = {
		set_variable = {
			bar_asinti_state = 4
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_viira_alive
		}
		set_variable = {
			bar_viira_state = 2
		}
	}
	else = {
		set_variable = {
			bar_viira_state = 4
		}
	}
}
bar_gui_update = {
	add_to_variable = { bar_pen_screen_show = 1 }
	if = {
		limit = {
			OR = {
				has_country_flag = BAR_advisors_killed
				has_country_flag = BAR_ambrosius_killed
			}
			check_variable = { bar_ambrosius_state < 3 }
		}
		add_to_variable = { bar_ambrosius_state = 2}
	}
	if = {
		limit = {
			NOT = { has_country_flag = barrad_leopold_alive }
			check_variable = { bar_leopold_state < 3 }
		}
		add_to_variable = { bar_leopold_state = 2}
	}
	if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			check_variable = { bar_silver_state < 3 }
		}
		add_to_variable = { bar_silver_state = 2}
	}
	if = {
		limit = {
			NOT = { has_country_flag = barrad_asinti_alive }
			check_variable = { bar_asinti_state < 3 }
		}
		add_to_variable = { bar_asinti_state = 2}
	}
	if = {
		limit = {
			NOT = { has_country_flag = barrad_viira_alive }
			check_variable = { bar_viira_state < 3 }
		}
		add_to_variable = { bar_viira_state = 2}
	}
}

bar_kill_ambrosius = {
	if = {
		limit = {
			has_variable = bar_pen_screen_show
		}
		bar_gui_update = yes
	}
	if = {
		limit = {
			has_character = BAR_count_ambrosius
		}
		BAR_count_ambrosius = {
			retire = yes
		}
	}
	set_country_flag = BAR_ambrosius_killed
}

bar_kill_advisors = {
	if = {
		limit = {
			has_variable = bar_pen_screen_show
		}
		bar_gui_update = yes
	}
	set_country_flag = BAR_advisors_killed
	BAR_leofric_and_godgifu_glaedwine = {
		set_character_name = BAR_ded_scientist
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_aethelflaed_sigeweard = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_hereweald_ealdwine = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_eadmund_heahstan = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_sabedoria = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_oswine_sigespere = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_mister_lilly = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor2
			}
		}
	}
	BAR_leofric_stearcstan = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_beorhtsige_sigespere = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_ceadda_sigeweald = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_godric_hereweald = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_wigmund_sunnespere = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_stithulf_frostdun = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_hrothgar_fiscford = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_wilfrith_faegerwell = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
	BAR_cyneweard_stangaet = {
		set_portraits = {
			army = {
				small=GFX_idea_BAR_undead_advisor
			}
		}
	}
}

bar_fight_initialisation = {
	set_variable = { BAR_fight_pentarchy_action = 0 }
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		set_variable = { a_live = 1 }
		set_variable = { a_hp = 190 }
		set_variable = { a_hp_max = 190 }
		set_variable = { a_in = 10 }
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		set_variable = { s_live = 1 }
		set_variable = { s_hp = 170 }
		set_variable = { s_hp_max = 170 }
		set_variable = { s_in = 10 }
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		set_variable = { l_live = 1 }
		set_variable = { l_hp = 220 }
		set_variable = { l_hp_max = 220 }
		set_variable = { l_in = 10 }
	}
	set_variable = { bar_pen_fight_silver_state = 1 }
	set_variable = { bar_pen_fight_lepold_state = 1 }
	set_variable = { bar_pen_fight_asinti_state = 1 }
	set_variable = { bar_pen_fight_viira_state = 1 }
	set_variable = { v_hp = 280 }
	set_variable = { v_hp_max = 280 }
	set_variable = { v_in = 20 }
	set_variable = { v_stun = 0 }
	set_variable = { viira_dmg_debuff = 1 }

	set_variable = { s_hp_d_10 = 1 }
	set_variable = { s_hp_d_20 = 1 }
	set_variable = { s_hp_d_30 = 1 }
	set_variable = { s_hp_d_40 = 1 }
	set_variable = { s_hp_d_50 = 1 }
	set_variable = { s_hp_d_60 = 1 }
	set_variable = { s_hp_d_70 = 1 }
	set_variable = { s_hp_d_80 = 1 }
	set_variable = { s_hp_d_90 = 1 }
	set_variable = { s_hp_d_100 = 1 }
	set_variable = { s_hp_d_110 = 1 }
	set_variable = { s_hp_d_120 = 1 }
	set_variable = { s_hp_d_130 = 1 }
	set_variable = { s_hp_d_140 = 1 }
	set_variable = { s_hp_d_150 = 1 }
	set_variable = { s_hp_d_160 = 1 }
	set_variable = { s_hp_d_170 = 1 }

	set_variable = { l_hp_d_10 = 1 }
	set_variable = { l_hp_d_20 = 1 }
	set_variable = { l_hp_d_30 = 1 }
	set_variable = { l_hp_d_40 = 1 }
	set_variable = { l_hp_d_50 = 1 }
	set_variable = { l_hp_d_60 = 1 }
	set_variable = { l_hp_d_70 = 1 }
	set_variable = { l_hp_d_80 = 1 }
	set_variable = { l_hp_d_90 = 1 }
	set_variable = { l_hp_d_100 = 1 }
	set_variable = { l_hp_d_110 = 1 }
	set_variable = { l_hp_d_120 = 1 }
	set_variable = { l_hp_d_130 = 1 }
	set_variable = { l_hp_d_140 = 1 }
	set_variable = { l_hp_d_150 = 1 }
	set_variable = { l_hp_d_160 = 1 }
	set_variable = { l_hp_d_170 = 1 }
	set_variable = { l_hp_d_180 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_200 = 1 }
	set_variable = { l_hp_d_210 = 1 }
	set_variable = { l_hp_d_220 = 1 }

	set_variable = { a_hp_d_10 = 1 }
	set_variable = { a_hp_d_20 = 1 }
	set_variable = { a_hp_d_30 = 1 }
	set_variable = { a_hp_d_40 = 1 }
	set_variable = { a_hp_d_50 = 1 }
	set_variable = { a_hp_d_60 = 1 }
	set_variable = { a_hp_d_70 = 1 }
	set_variable = { a_hp_d_80 = 1 }
	set_variable = { a_hp_d_90 = 1 }
	set_variable = { a_hp_d_100 = 1 }
	set_variable = { a_hp_d_110 = 1 }
	set_variable = { a_hp_d_120 = 1 }
	set_variable = { a_hp_d_130 = 1 }
	set_variable = { a_hp_d_140 = 1 }
	set_variable = { a_hp_d_150 = 1 }
	set_variable = { a_hp_d_160 = 1 }
	set_variable = { a_hp_d_170 = 1 }
	set_variable = { a_hp_d_180 = 1 }
	set_variable = { a_hp_d_190 = 1 }

	set_variable = { l_hp_d_10 = 1 }
	set_variable = { l_hp_d_20 = 1 }
	set_variable = { l_hp_d_30 = 1 }
	set_variable = { l_hp_d_40 = 1 }
	set_variable = { l_hp_d_50 = 1 }
	set_variable = { l_hp_d_60 = 1 }
	set_variable = { l_hp_d_70 = 1 }
	set_variable = { l_hp_d_80 = 1 }
	set_variable = { l_hp_d_90 = 1 }
	set_variable = { l_hp_d_100 = 1 }
	set_variable = { l_hp_d_110 = 1 }
	set_variable = { l_hp_d_120 = 1 }
	set_variable = { l_hp_d_130 = 1 }
	set_variable = { l_hp_d_140 = 1 }
	set_variable = { l_hp_d_150 = 1 }
	set_variable = { l_hp_d_160 = 1 }
	set_variable = { l_hp_d_170 = 1 }
	set_variable = { l_hp_d_180 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_200 = 1 }
	set_variable = { l_hp_d_210 = 1 }
	set_variable = { l_hp_d_220 = 1 }
	set_variable = { l_hp_d_230 = 1 }
	set_variable = { l_hp_d_240 = 1 }
	set_variable = { l_hp_d_250 = 1 }
	set_variable = { l_hp_d_260 = 1 }
	set_variable = { l_hp_d_270 = 1 }
	set_variable = { l_hp_d_280 = 1 }


	set_variable = { s_in_d_1 = 1 }
	set_variable = { s_in_d_2 = 1 }
	set_variable = { s_in_d_3 = 1 }
	set_variable = { s_in_d_4 = 1 }
	set_variable = { s_in_d_5 = 1 }
	set_variable = { s_in_d_6 = 1 }
	set_variable = { s_in_d_7 = 1 }
	set_variable = { s_in_d_8 = 1 }
	set_variable = { s_in_d_9 = 1 }
	set_variable = { s_in_d_10 = 1 }

	set_variable = { l_in_d_1 = 1 }
	set_variable = { l_in_d_2 = 1 }
	set_variable = { l_in_d_3 = 1 }
	set_variable = { l_in_d_4 = 1 }
	set_variable = { l_in_d_5 = 1 }
	set_variable = { l_in_d_6 = 1 }
	set_variable = { l_in_d_7 = 1 }
	set_variable = { l_in_d_8 = 1 }
	set_variable = { l_in_d_9 = 1 }
	set_variable = { l_in_d_10 = 1 }

	set_variable = { a_in_d_1 = 1 }
	set_variable = { a_in_d_2 = 1 }
	set_variable = { a_in_d_3 = 1 }
	set_variable = { a_in_d_4 = 1 }
	set_variable = { a_in_d_5 = 1 }
	set_variable = { a_in_d_6 = 1 }
	set_variable = { a_in_d_7 = 1 }
	set_variable = { a_in_d_8 = 1 }
	set_variable = { a_in_d_9 = 1 }
	set_variable = { a_in_d_10 = 1 }

	set_variable = { v_in_d_1 = 1 }
	set_variable = { v_in_d_2 = 1 }
	set_variable = { v_in_d_3 = 1 }
	set_variable = { v_in_d_4 = 1 }
	set_variable = { v_in_d_5 = 1 }
	set_variable = { v_in_d_6 = 1 }
	set_variable = { v_in_d_7 = 1 }
	set_variable = { v_in_d_8 = 1 }
	set_variable = { v_in_d_9 = 1 }
	set_variable = { v_in_d_10 = 1 }
	set_variable = { v_in_d_11 = 1 }
	set_variable = { v_in_d_12 = 1 }
	set_variable = { v_in_d_13 = 1 }
	set_variable = { v_in_d_14 = 1 }
	set_variable = { v_in_d_15 = 1 }
	set_variable = { v_in_d_16 = 1 }
	set_variable = { v_in_d_17 = 1 }
	set_variable = { v_in_d_18 = 1 }
	set_variable = { v_in_d_19 = 1 }
	set_variable = { v_in_d_20 = 1 }

	set_variable = { bar_pentarchy_fight_show = 1 }
	bar_pen_fight_gui_reload = yes
}

bar_fight_initialisation_viira = {
	set_variable = { BAR_fight_pentarchy_action = 0 }
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		set_variable = { a_live = 1 }
		set_variable = { a_hp = 190 }
		set_variable = { a_hp_max = 190 }
		set_variable = { a_in = 10 }
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		set_variable = { s_live = 1 }
		set_variable = { s_hp = 170 }
		set_variable = { s_hp_max = 170 }
		set_variable = { s_in = 10 }
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		set_variable = { l_live = 1 }
		set_variable = { l_hp = 220 }
		set_variable = { l_hp_max = 220 }
		set_variable = { l_in = 10 }
	}
	set_variable = { bar_pen_fight_silver_state = 1 }
	set_variable = { bar_pen_fight_lepold_state = 1 }
	set_variable = { bar_pen_fight_asinti_state = 1 }
	set_variable = { bar_pen_fight_viira_state = 1 }
	set_variable = { v_hp = 280 }
	set_variable = { v_hp_max = 280 }
	set_variable = { v_in = 20 }
	set_variable = { v_stun = 0 }
	set_variable = { viira_dmg_debuff = 1 }

	set_variable = { s_hp_d_10 = 1 }
	set_variable = { s_hp_d_20 = 1 }
	set_variable = { s_hp_d_30 = 1 }
	set_variable = { s_hp_d_40 = 1 }
	set_variable = { s_hp_d_50 = 1 }
	set_variable = { s_hp_d_60 = 1 }
	set_variable = { s_hp_d_70 = 1 }
	set_variable = { s_hp_d_80 = 1 }
	set_variable = { s_hp_d_90 = 1 }
	set_variable = { s_hp_d_100 = 1 }
	set_variable = { s_hp_d_110 = 1 }
	set_variable = { s_hp_d_120 = 1 }
	set_variable = { s_hp_d_130 = 1 }
	set_variable = { s_hp_d_140 = 1 }
	set_variable = { s_hp_d_150 = 1 }
	set_variable = { s_hp_d_160 = 1 }
	set_variable = { s_hp_d_170 = 1 }

	set_variable = { l_hp_d_10 = 1 }
	set_variable = { l_hp_d_20 = 1 }
	set_variable = { l_hp_d_30 = 1 }
	set_variable = { l_hp_d_40 = 1 }
	set_variable = { l_hp_d_50 = 1 }
	set_variable = { l_hp_d_60 = 1 }
	set_variable = { l_hp_d_70 = 1 }
	set_variable = { l_hp_d_80 = 1 }
	set_variable = { l_hp_d_90 = 1 }
	set_variable = { l_hp_d_100 = 1 }
	set_variable = { l_hp_d_110 = 1 }
	set_variable = { l_hp_d_120 = 1 }
	set_variable = { l_hp_d_130 = 1 }
	set_variable = { l_hp_d_140 = 1 }
	set_variable = { l_hp_d_150 = 1 }
	set_variable = { l_hp_d_160 = 1 }
	set_variable = { l_hp_d_170 = 1 }
	set_variable = { l_hp_d_180 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_200 = 1 }
	set_variable = { l_hp_d_210 = 1 }
	set_variable = { l_hp_d_220 = 1 }

	set_variable = { a_hp_d_10 = 1 }
	set_variable = { a_hp_d_20 = 1 }
	set_variable = { a_hp_d_30 = 1 }
	set_variable = { a_hp_d_40 = 1 }
	set_variable = { a_hp_d_50 = 1 }
	set_variable = { a_hp_d_60 = 1 }
	set_variable = { a_hp_d_70 = 1 }
	set_variable = { a_hp_d_80 = 1 }
	set_variable = { a_hp_d_90 = 1 }
	set_variable = { a_hp_d_100 = 1 }
	set_variable = { a_hp_d_110 = 1 }
	set_variable = { a_hp_d_120 = 1 }
	set_variable = { a_hp_d_130 = 1 }
	set_variable = { a_hp_d_140 = 1 }
	set_variable = { a_hp_d_150 = 1 }
	set_variable = { a_hp_d_160 = 1 }
	set_variable = { a_hp_d_170 = 1 }
	set_variable = { a_hp_d_180 = 1 }
	set_variable = { a_hp_d_190 = 1 }

	set_variable = { l_hp_d_10 = 1 }
	set_variable = { l_hp_d_20 = 1 }
	set_variable = { l_hp_d_30 = 1 }
	set_variable = { l_hp_d_40 = 1 }
	set_variable = { l_hp_d_50 = 1 }
	set_variable = { l_hp_d_60 = 1 }
	set_variable = { l_hp_d_70 = 1 }
	set_variable = { l_hp_d_80 = 1 }
	set_variable = { l_hp_d_90 = 1 }
	set_variable = { l_hp_d_100 = 1 }
	set_variable = { l_hp_d_110 = 1 }
	set_variable = { l_hp_d_120 = 1 }
	set_variable = { l_hp_d_130 = 1 }
	set_variable = { l_hp_d_140 = 1 }
	set_variable = { l_hp_d_150 = 1 }
	set_variable = { l_hp_d_160 = 1 }
	set_variable = { l_hp_d_170 = 1 }
	set_variable = { l_hp_d_180 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_200 = 1 }
	set_variable = { l_hp_d_210 = 1 }
	set_variable = { l_hp_d_220 = 1 }
	set_variable = { l_hp_d_230 = 1 }
	set_variable = { l_hp_d_240 = 1 }
	set_variable = { l_hp_d_250 = 1 }
	set_variable = { l_hp_d_260 = 1 }
	set_variable = { l_hp_d_270 = 1 }
	set_variable = { l_hp_d_280 = 1 }


	set_variable = { s_in_d_1 = 1 }
	set_variable = { s_in_d_2 = 1 }
	set_variable = { s_in_d_3 = 1 }
	set_variable = { s_in_d_4 = 1 }
	set_variable = { s_in_d_5 = 1 }
	set_variable = { s_in_d_6 = 1 }
	set_variable = { s_in_d_7 = 1 }
	set_variable = { s_in_d_8 = 1 }
	set_variable = { s_in_d_9 = 1 }
	set_variable = { s_in_d_10 = 1 }

	set_variable = { l_in_d_1 = 1 }
	set_variable = { l_in_d_2 = 1 }
	set_variable = { l_in_d_3 = 1 }
	set_variable = { l_in_d_4 = 1 }
	set_variable = { l_in_d_5 = 1 }
	set_variable = { l_in_d_6 = 1 }
	set_variable = { l_in_d_7 = 1 }
	set_variable = { l_in_d_8 = 1 }
	set_variable = { l_in_d_9 = 1 }
	set_variable = { l_in_d_10 = 1 }

	set_variable = { a_in_d_1 = 1 }
	set_variable = { a_in_d_2 = 1 }
	set_variable = { a_in_d_3 = 1 }
	set_variable = { a_in_d_4 = 1 }
	set_variable = { a_in_d_5 = 1 }
	set_variable = { a_in_d_6 = 1 }
	set_variable = { a_in_d_7 = 1 }
	set_variable = { a_in_d_8 = 1 }
	set_variable = { a_in_d_9 = 1 }
	set_variable = { a_in_d_10 = 1 }

	set_variable = { v_in_d_1 = 1 }
	set_variable = { v_in_d_2 = 1 }
	set_variable = { v_in_d_3 = 1 }
	set_variable = { v_in_d_4 = 1 }
	set_variable = { v_in_d_5 = 1 }
	set_variable = { v_in_d_6 = 1 }
	set_variable = { v_in_d_7 = 1 }
	set_variable = { v_in_d_8 = 1 }
	set_variable = { v_in_d_9 = 1 }
	set_variable = { v_in_d_10 = 1 }
	set_variable = { v_in_d_11 = 1 }
	set_variable = { v_in_d_12 = 1 }
	set_variable = { v_in_d_13 = 1 }
	set_variable = { v_in_d_14 = 1 }
	set_variable = { v_in_d_15 = 1 }
	set_variable = { v_in_d_16 = 1 }
	set_variable = { v_in_d_17 = 1 }
	set_variable = { v_in_d_18 = 1 }
	set_variable = { v_in_d_19 = 1 }
	set_variable = { v_in_d_20 = 1 }

	set_variable = { bar_viira_fight_show = 1 }
	bar_viira_fight_gui_reload = yes
}

bar_fight_silver_hp = {
	set_variable = { s_hp_floor = s_hp }
	divide_variable = { s_hp_floor = 10 }
	round_variable = s_hp_floor
	set_variable = { s_hp_last = s_hp }
	set_temp_variable = { s_hp_dzies = s_hp_floor }
	multiply_temp_variable = { s_hp_dzies = 10 }
	subtract_from_variable = { s_hp_last = s_hp_dzies }

	if = {
		limit = {
			check_variable = { s_hp_floor = 16 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_160 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_160 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 15 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_150 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_150 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 14 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_140 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_140 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 13 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_130 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_130 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 12 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_120 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_120 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 11 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_110 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_110 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 10 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_100 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_100 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 9 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_90 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_90 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 8 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_80 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_80 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 7 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_70 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_70 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 6 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_60 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_60 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 5 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_50 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_50 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 4 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_40 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_40 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 3 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_30 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_30 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
		set_variable = { s_hp_d_40 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 2 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_20 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_20 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
		set_variable = { s_hp_d_40 = 3 }
		set_variable = { s_hp_d_30 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp_floor = 1 }
		}
		if = {
			limit = {
				check_variable = { s_hp_dzies > 0 }
			}
			set_variable = { s_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { s_hp_d_10 = 3 } 
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
		set_variable = { s_hp_d_40 = 3 }
		set_variable = { s_hp_d_30 = 3 }
		set_variable = { s_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp < 10}
			check_variable = { s_hp > 0}
		}
		set_variable = { s_hp_d_10 = 2 } 
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
		set_variable = { s_hp_d_40 = 3 }
		set_variable = { s_hp_d_30 = 3 }
		set_variable = { s_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { s_hp < 1}
		}
		set_variable = { s_hp_d_170 = 3 }
		set_variable = { s_hp_d_160 = 3 }
		set_variable = { s_hp_d_150 = 3 }
		set_variable = { s_hp_d_140 = 3 }
		set_variable = { s_hp_d_130 = 3 }
		set_variable = { s_hp_d_120 = 3 }
		set_variable = { s_hp_d_110 = 3 }
		set_variable = { s_hp_d_100 = 3 }
		set_variable = { s_hp_d_90 = 3 }
		set_variable = { s_hp_d_80 = 3 }
		set_variable = { s_hp_d_70 = 3 }
		set_variable = { s_hp_d_60 = 3 }
		set_variable = { s_hp_d_50 = 3 }
		set_variable = { s_hp_d_40 = 3 }
		set_variable = { s_hp_d_30 = 3 }
		set_variable = { s_hp_d_20 = 3 }
		set_variable = { s_hp_d_10 = 3 }
	}
}
bar_fight_leopold_hp = {
	set_variable = { l_hp_floor = l_hp }
	divide_variable = { l_hp_floor = 10 }
	round_variable = l_hp_floor
	set_variable = { l_hp_last = l_hp }
	set_temp_variable = { l_hp_dzies = l_hp_floor }
	multiply_temp_variable = { l_hp_dzies = 10 }
	subtract_from_variable = { l_hp_last = l_hp_dzies }

	if = {
		limit = {
			check_variable = { l_hp_floor = 21 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_210 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_210 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 20 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_200 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_200 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 19 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_190 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_190 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 18 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_180 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_180 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 17 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_170 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_170 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 16 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_160 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_160 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 15 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_150 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_150 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 14 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_140 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_140 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 13 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_130 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_130 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 12 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_120 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_120 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 11 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_110 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_110 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 10 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_100 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_100 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 9 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_90 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_90 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 8 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_80 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_80 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 7 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_70 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_70 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 6 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_60 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_60 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 5 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_50 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_50 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 4 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_40 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_40 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 3 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_30 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_30 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
		set_variable = { l_hp_d_40 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 2 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_20 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_20 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
		set_variable = { l_hp_d_40 = 3 }
		set_variable = { l_hp_d_30 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 1 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_10 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
		set_variable = { l_hp_d_40 = 3 }
		set_variable = { l_hp_d_30 = 3 }
		set_variable = { l_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp_floor = 0 }
		}
		if = {
			limit = {
				check_variable = { l_hp_dzies > 0 }
			}
			set_variable = { l_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { l_hp_d_10 = 3 } 
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
		set_variable = { l_hp_d_40 = 3 }
		set_variable = { l_hp_d_30 = 3 }
		set_variable = { l_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { l_hp < 1 }
		}
		set_variable = { l_hp_d_220 = 3 }
		set_variable = { l_hp_d_210 = 3 }
		set_variable = { l_hp_d_200 = 3 }
		set_variable = { l_hp_d_190 = 3 }
		set_variable = { l_hp_d_180 = 3 }
		set_variable = { l_hp_d_170 = 3 }
		set_variable = { l_hp_d_160 = 3 }
		set_variable = { l_hp_d_150 = 3 }
		set_variable = { l_hp_d_140 = 3 }
		set_variable = { l_hp_d_130 = 3 }
		set_variable = { l_hp_d_120 = 3 }
		set_variable = { l_hp_d_110 = 3 }
		set_variable = { l_hp_d_100 = 3 }
		set_variable = { l_hp_d_90 = 3 }
		set_variable = { l_hp_d_80 = 3 }
		set_variable = { l_hp_d_70 = 3 }
		set_variable = { l_hp_d_60 = 3 }
		set_variable = { l_hp_d_50 = 3 }
		set_variable = { l_hp_d_40 = 3 }
		set_variable = { l_hp_d_30 = 3 }
		set_variable = { l_hp_d_20 = 3 }
		set_variable = { l_hp_d_10 = 3 }
	}
}
bar_fight_viira_hp = {
	set_variable = { v_hp_floor = v_hp }
	divide_variable = { v_hp_floor = 10 }
	round_variable = v_hp_floor
	set_variable = { v_hp_last = v_hp }
	set_temp_variable = { v_hp_dzies = v_hp_floor }
	multiply_temp_variable = { v_hp_dzies = 10 }
	subtract_from_variable = { v_hp_last = v_hp_dzies }

	if = {
		limit = {
			check_variable = { v_hp_floor = 27 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_270 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_270 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 26 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_260 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_260 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 25 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_250 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_250 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 24 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_240 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_240 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 23 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_230 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_230 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 22 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_220 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_220 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 21 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_210 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_210 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 20 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_200 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_200 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 19 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_190 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_190 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 18 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_180 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_180 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 17 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_170 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_170 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 16 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_160 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_160 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 15 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_150 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_150 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 14 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_140 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_140 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 13 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_130 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_130 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 12 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_120 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_120 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 11 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_110 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_110 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 10 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_100 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_100 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 9 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_90 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_90 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 8 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_80 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_80 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 7 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_70 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_70 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 6 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_60 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_60 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 5 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_50 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_50 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 4 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_40 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_40 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 3 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_30 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_30 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
		set_variable = { v_hp_d_40 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 2 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_20 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_20 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
		set_variable = { v_hp_d_40 = 3 }
		set_variable = { v_hp_d_30 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 1 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_10 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
		set_variable = { v_hp_d_40 = 3 }
		set_variable = { v_hp_d_30 = 3 }
		set_variable = { v_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp_floor = 0 }
		}
		if = {
			limit = {
				check_variable = { v_hp_dzies > 0 }
			}
			set_variable = { v_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { v_hp_d_10 = 3 } 
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
		set_variable = { v_hp_d_40 = 3 }
		set_variable = { v_hp_d_30 = 3 }
		set_variable = { v_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { v_hp < 1 }
		}
		set_variable = { v_hp_d_280 = 3 }
		set_variable = { v_hp_d_270 = 3 }
		set_variable = { v_hp_d_260 = 3 }
		set_variable = { v_hp_d_250 = 3 }
		set_variable = { v_hp_d_240 = 3 }
		set_variable = { v_hp_d_230 = 3 }
		set_variable = { v_hp_d_220 = 3 }
		set_variable = { v_hp_d_210 = 3 }
		set_variable = { v_hp_d_200 = 3 }
		set_variable = { v_hp_d_190 = 3 }
		set_variable = { v_hp_d_180 = 3 }
		set_variable = { v_hp_d_170 = 3 }
		set_variable = { v_hp_d_160 = 3 }
		set_variable = { v_hp_d_150 = 3 }
		set_variable = { v_hp_d_140 = 3 }
		set_variable = { v_hp_d_130 = 3 }
		set_variable = { v_hp_d_120 = 3 }
		set_variable = { v_hp_d_110 = 3 }
		set_variable = { v_hp_d_100 = 3 }
		set_variable = { v_hp_d_90 = 3 }
		set_variable = { v_hp_d_80 = 3 }
		set_variable = { v_hp_d_70 = 3 }
		set_variable = { v_hp_d_60 = 3 }
		set_variable = { v_hp_d_50 = 3 }
		set_variable = { v_hp_d_40 = 3 }
		set_variable = { v_hp_d_30 = 3 }
		set_variable = { v_hp_d_20 = 3 }
		set_variable = { v_hp_d_10 = 3 }
	}
}
bar_fight_asinti_hp = {
	set_variable = { a_hp_floor = a_hp }
	divide_variable = { a_hp_floor = 10 }
	round_variable = a_hp_floor
	set_variable = { a_hp_last = a_hp }
	set_temp_variable = { a_hp_dzies = a_hp_floor }
	multiply_temp_variable = { a_hp_dzies = 10 }
	subtract_from_variable = { a_hp_last = a_hp_dzies }

	if = {
		limit = {
			check_variable = { a_hp_floor = 18 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_180 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_180 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 17 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_170 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_170 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 16 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_160 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_160 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 15 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_150 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_150 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 14 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_140 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_140 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 13 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_130 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_130 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 12 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_120 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_120 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 11 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_110 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_110 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 10 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_100 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_100 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 9 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_90 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_90 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 8 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_80 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_80 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 7 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_70 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_70 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 6 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_60 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_60 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 5 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_50 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_50 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 4 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_40 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_40 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 3 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_30 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_30 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
		set_variable = { a_hp_d_40 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 2 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_20 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_20 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
		set_variable = { a_hp_d_40 = 3 }
		set_variable = { a_hp_d_30 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 1 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_10 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
		set_variable = { a_hp_d_40 = 3 }
		set_variable = { a_hp_d_30 = 3 }
		set_variable = { a_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp_floor = 0 }
		}
		if = {
			limit = {
				check_variable = { a_hp_dzies > 0 }
			}
			set_variable = { a_hp_d_10 = 2 } 
		}
		else = {
			set_variable = { a_hp_d_10 = 3 } 
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
		set_variable = { a_hp_d_40 = 3 }
		set_variable = { a_hp_d_30 = 3 }
		set_variable = { a_hp_d_20 = 3 }
	}
	if = {
		limit = {
			check_variable = { a_hp < 1 }
		}
		set_variable = { a_hp_d_190 = 3 }
		set_variable = { a_hp_d_180 = 3 }
		set_variable = { a_hp_d_170 = 3 }
		set_variable = { a_hp_d_160 = 3 }
		set_variable = { a_hp_d_150 = 3 }
		set_variable = { a_hp_d_140 = 3 }
		set_variable = { a_hp_d_130 = 3 }
		set_variable = { a_hp_d_120 = 3 }
		set_variable = { a_hp_d_110 = 3 }
		set_variable = { a_hp_d_100 = 3 }
		set_variable = { a_hp_d_90 = 3 }
		set_variable = { a_hp_d_80 = 3 }
		set_variable = { a_hp_d_70 = 3 }
		set_variable = { a_hp_d_60 = 3 }
		set_variable = { a_hp_d_50 = 3 }
		set_variable = { a_hp_d_40 = 3 }
		set_variable = { a_hp_d_30 = 3 }
		set_variable = { a_hp_d_20 = 3 }
		set_variable = { a_hp_d_10 = 3 }
	}
}

BAR_fight_pentarchy_leopold_initiative = {
	if = {
		limit = {
			check_variable = { l_in < 10}
		}
		set_variable = { l_in_d_10 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 9 }
		}
		set_variable = { l_in_d_9 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 8 }
		}
		set_variable = { l_in_d_8 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 7 }
		}
		set_variable = { l_in_d_7 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 6 }
		}
		set_variable = { l_in_d_6 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 5 }
		}
		set_variable = { l_in_d_5 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 4 }
		}
		set_variable = { l_in_d_4 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 3 }
		}
		set_variable = { l_in_d_3 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 2 }
		}
		set_variable = { l_in_d_2 = 2 }
	}
	if = {
		limit = {
			check_variable = { l_in < 1 }
		}
		set_variable = { l_in_d_1 = 2 }
	}
}

BAR_fight_pentarchy_silver_initiative = {
	if = {
		limit = {
			check_variable = { s_in < 10}
		}
		set_variable = { s_in_d_10 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 9 }
		}
		set_variable = { s_in_d_9 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 8 }
		}
		set_variable = { s_in_d_8 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 7 }
		}
		set_variable = { s_in_d_7 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 6 }
		}
		set_variable = { s_in_d_6 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 5 }
		}
		set_variable = { s_in_d_5 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 4 }
		}
		set_variable = { s_in_d_4 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 3 }
		}
		set_variable = { s_in_d_3 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 2 }
		}
		set_variable = { s_in_d_2 = 2 }
	}
	if = {
		limit = {
			check_variable = { s_in < 1 }
		}
		set_variable = { s_in_d_1 = 2 }
	}
}

BAR_fight_pentarchy_asinti_initiative = {
	if = {
		limit = {
			check_variable = { a_in < 10}
		}
		set_variable = { a_in_d_10 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 9 }
		}
		set_variable = { a_in_d_9 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 8 }
		}
		set_variable = { a_in_d_8 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 7 }
		}
		set_variable = { a_in_d_7 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 6 }
		}
		set_variable = { a_in_d_6 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 5 }
		}
		set_variable = { a_in_d_5 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 4 }
		}
		set_variable = { a_in_d_4 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 3 }
		}
		set_variable = { a_in_d_3 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 2 }
		}
		set_variable = { a_in_d_2 = 2 }
	}
	if = {
		limit = {
			check_variable = { a_in < 1 }
		}
		set_variable = { a_in_d_1 = 2 }
	}
}

BAR_fight_pentarchy_viira_initiative = {
	if = {
		limit = {
			check_variable = { v_in < 20}
		}
		set_variable = { v_in_d_20 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 19}
		}
		set_variable = { v_in_d_19 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 18}
		}
		set_variable = { v_in_d_18 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 17}
		}
		set_variable = { v_in_d_17 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 16}
		}
		set_variable = { v_in_d_16 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 15}
		}
		set_variable = { v_in_d_15 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 14}
		}
		set_variable = { v_in_d_14 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 13}
		}
		set_variable = { v_in_d_13 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 12}
		}
		set_variable = { v_in_d_12 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 11}
		}
		set_variable = { v_in_d_11 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 10}
		}
		set_variable = { v_in_d_10 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 9 }
		}
		set_variable = { v_in_d_9 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 8 }
		}
		set_variable = { v_in_d_8 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 7 }
		}
		set_variable = { v_in_d_7 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 6 }
		}
		set_variable = { v_in_d_6 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 5 }
		}
		set_variable = { v_in_d_5 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 4 }
		}
		set_variable = { v_in_d_4 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 3 }
		}
		set_variable = { v_in_d_3 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 2 }
		}
		set_variable = { v_in_d_2 = 2 }
	}
	if = {
		limit = {
			check_variable = { v_in < 1 }
		}
		set_variable = { v_in_d_1 = 2 }
	}
}
bar_pen_fight_hp_state_reload = {
	set_variable = { s_in_d_1 = 1 }
	set_variable = { s_in_d_2 = 1 }
	set_variable = { s_in_d_3 = 1 }
	set_variable = { s_in_d_4 = 1 }
	set_variable = { s_in_d_5 = 1 }
	set_variable = { s_in_d_6 = 1 }
	set_variable = { s_in_d_7 = 1 }
	set_variable = { s_in_d_8 = 1 }
	set_variable = { s_in_d_9 = 1 }
	set_variable = { s_in_d_10 = 1 }

	set_variable = { l_in_d_1 = 1 }
	set_variable = { l_in_d_2 = 1 }
	set_variable = { l_in_d_3 = 1 }
	set_variable = { l_in_d_4 = 1 }
	set_variable = { l_in_d_5 = 1 }
	set_variable = { l_in_d_6 = 1 }
	set_variable = { l_in_d_7 = 1 }
	set_variable = { l_in_d_8 = 1 }
	set_variable = { l_in_d_9 = 1 }
	set_variable = { l_in_d_10 = 1 }

	set_variable = { a_in_d_1 = 1 }
	set_variable = { a_in_d_2 = 1 }
	set_variable = { a_in_d_3 = 1 }
	set_variable = { a_in_d_4 = 1 }
	set_variable = { a_in_d_5 = 1 }
	set_variable = { a_in_d_6 = 1 }
	set_variable = { a_in_d_7 = 1 }
	set_variable = { a_in_d_8 = 1 }
	set_variable = { a_in_d_9 = 1 }
	set_variable = { a_in_d_10 = 1 }

	set_variable = { v_in_d_1 = 1 }
	set_variable = { v_in_d_2 = 1 }
	set_variable = { v_in_d_3 = 1 }
	set_variable = { v_in_d_4 = 1 }
	set_variable = { v_in_d_5 = 1 }
	set_variable = { v_in_d_6 = 1 }
	set_variable = { v_in_d_7 = 1 }
	set_variable = { v_in_d_8 = 1 }
	set_variable = { v_in_d_9 = 1 }
	set_variable = { v_in_d_10 = 1 }
	set_variable = { v_in_d_11 = 1 }
	set_variable = { v_in_d_12 = 1 }
	set_variable = { v_in_d_13 = 1 }
	set_variable = { v_in_d_14 = 1 }
	set_variable = { v_in_d_15 = 1 }
	set_variable = { v_in_d_16 = 1 }
	set_variable = { v_in_d_17 = 1 }
	set_variable = { v_in_d_18 = 1 }
	set_variable = { v_in_d_19 = 1 }
	set_variable = { v_in_d_20 = 1 }

	set_variable = { s_hp_d_10 = 1 }
	set_variable = { s_hp_d_20 = 1 }
	set_variable = { s_hp_d_30 = 1 }
	set_variable = { s_hp_d_40 = 1 }
	set_variable = { s_hp_d_50 = 1 }
	set_variable = { s_hp_d_60 = 1 }
	set_variable = { s_hp_d_70 = 1 }
	set_variable = { s_hp_d_80 = 1 }
	set_variable = { s_hp_d_90 = 1 }
	set_variable = { s_hp_d_100 = 1 }
	set_variable = { s_hp_d_110 = 1 }
	set_variable = { s_hp_d_120 = 1 }
	set_variable = { s_hp_d_130 = 1 }
	set_variable = { s_hp_d_140 = 1 }
	set_variable = { s_hp_d_150 = 1 }
	set_variable = { s_hp_d_160 = 1 }
	set_variable = { s_hp_d_170 = 1 }

	set_variable = { l_hp_d_10 = 1 }
	set_variable = { l_hp_d_20 = 1 }
	set_variable = { l_hp_d_30 = 1 }
	set_variable = { l_hp_d_40 = 1 }
	set_variable = { l_hp_d_50 = 1 }
	set_variable = { l_hp_d_60 = 1 }
	set_variable = { l_hp_d_70 = 1 }
	set_variable = { l_hp_d_80 = 1 }
	set_variable = { l_hp_d_90 = 1 }
	set_variable = { l_hp_d_100 = 1 }
	set_variable = { l_hp_d_110 = 1 }
	set_variable = { l_hp_d_120 = 1 }
	set_variable = { l_hp_d_130 = 1 }
	set_variable = { l_hp_d_140 = 1 }
	set_variable = { l_hp_d_150 = 1 }
	set_variable = { l_hp_d_160 = 1 }
	set_variable = { l_hp_d_170 = 1 }
	set_variable = { l_hp_d_180 = 1 }
	set_variable = { l_hp_d_190 = 1 }
	set_variable = { l_hp_d_200 = 1 }
	set_variable = { l_hp_d_210 = 1 }
	set_variable = { l_hp_d_220 = 1 }

	set_variable = { a_hp_d_10 = 1 }
	set_variable = { a_hp_d_20 = 1 }
	set_variable = { a_hp_d_30 = 1 }
	set_variable = { a_hp_d_40 = 1 }
	set_variable = { a_hp_d_50 = 1 }
	set_variable = { a_hp_d_60 = 1 }
	set_variable = { a_hp_d_70 = 1 }
	set_variable = { a_hp_d_80 = 1 }
	set_variable = { a_hp_d_90 = 1 }
	set_variable = { a_hp_d_100 = 1 }
	set_variable = { a_hp_d_110 = 1 }
	set_variable = { a_hp_d_120 = 1 }
	set_variable = { a_hp_d_130 = 1 }
	set_variable = { a_hp_d_140 = 1 }
	set_variable = { a_hp_d_150 = 1 }
	set_variable = { a_hp_d_160 = 1 }
	set_variable = { a_hp_d_170 = 1 }
	set_variable = { a_hp_d_180 = 1 }
	set_variable = { a_hp_d_190 = 1 }

	set_variable = { v_hp_d_10 = 1 }
	set_variable = { v_hp_d_20 = 1 }
	set_variable = { v_hp_d_30 = 1 }
	set_variable = { v_hp_d_40 = 1 }
	set_variable = { v_hp_d_50 = 1 }
	set_variable = { v_hp_d_60 = 1 }
	set_variable = { v_hp_d_70 = 1 }
	set_variable = { v_hp_d_80 = 1 }
	set_variable = { v_hp_d_90 = 1 }
	set_variable = { v_hp_d_100 = 1 }
	set_variable = { v_hp_d_110 = 1 }
	set_variable = { v_hp_d_120 = 1 }
	set_variable = { v_hp_d_130 = 1 }
	set_variable = { v_hp_d_140 = 1 }
	set_variable = { v_hp_d_150 = 1 }
	set_variable = { v_hp_d_160 = 1 }
	set_variable = { v_hp_d_170 = 1 }
	set_variable = { v_hp_d_180 = 1 }
	set_variable = { v_hp_d_190 = 1 }
	set_variable = { v_hp_d_190 = 1 }
	set_variable = { v_hp_d_200 = 1 }
	set_variable = { v_hp_d_210 = 1 }
	set_variable = { v_hp_d_220 = 1 }
	set_variable = { v_hp_d_230 = 1 }
	set_variable = { v_hp_d_240 = 1 }
	set_variable = { v_hp_d_250 = 1 }
	set_variable = { v_hp_d_260 = 1 }
	set_variable = { v_hp_d_270 = 1 }
	set_variable = { v_hp_d_280 = 1 }
}
bar_pen_fight_gui_reload = {
	bar_pen_fight_hp_state_reload = yes
	BAR_fight_pentarchy_viira_initiative = yes
	BAR_fight_pentarchy_silver_initiative = yes
	BAR_fight_pentarchy_leopold_initiative = yes
	BAR_fight_pentarchy_asinti_initiative = yes
	bar_fight_viira_hp = yes
	bar_fight_silver_hp = yes
	bar_fight_leopold_hp = yes
	bar_fight_asinti_hp = yes
	add_to_variable = { bar_pentarchy_fight_show = 1 }
}
bar_viira_fight_gui_reload = {
	bar_pen_fight_hp_state_reload = yes
	BAR_fight_pentarchy_viira_initiative = yes
	BAR_fight_pentarchy_silver_initiative = yes
	BAR_fight_pentarchy_leopold_initiative = yes
	BAR_fight_pentarchy_asinti_initiative = yes
	bar_fight_viira_hp = yes
	bar_fight_silver_hp = yes
	bar_fight_leopold_hp = yes
	bar_fight_asinti_hp = yes
	add_to_variable = { bar_viira_fight_show = 1 }
}
BAR_pen_fight_silver_normal_attack = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { s_in > 0}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 2 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 3 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 4 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}					
			}
			random_list = {
				90 = {
					subtract_from_variable = { v_hp = dmgToDeal}
				}
				10 = {
					set_variable = { bar_pen_fight_missed = 1 }
					#you missed
				}
			}
			subtract_from_variable = { s_in = 1}
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_silver_lifesteal_attack = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { s_in > 1}
			check_variable = { BAR_resources_silver > 49}
		}
		random_list = {
			5 = {
				set_temp_variable = { dmgToDeal = 5 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 6 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 7 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 8 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 9 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 10 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 11 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 12 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 13 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 14 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 15 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 16 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 17 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 18 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 19 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 20 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 21 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 22 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 23 }
			}
			5 = {
				set_temp_variable = { dmgToDeal = 24 }
			}					
		}
		random_list = {
			90 = {
				subtract_from_variable = { v_hp = dmgToDeal }
				set_temp_variable = { s_hp_temp = s_hp }
				add_to_temp_variable = { s_hp_temp = dmgToDeal }
				if = {
					limit = {
						check_variable = { s_hp_max < s_hp_temp}
					}
					add_to_variable = { s_hp = dmgToDeal}
				}
				else = {
					set_variable = { s_hp = s_hp_max}
				}
			}
			10 = {
				set_variable = { bar_pen_fight_missed = 1 }
				#you missed
			}
		}
		subtract_from_variable = { s_in = 2}
		subtract_from_variable = { BAR_resources_silver = 50}
		BAR_viira_turn_new = yes
	}
}
BAR_silver_heal = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { s_in > 1 }
			check_variable = { BAR_resources_silver > 99 }
		}
		set_variable = { BAR_heal_prepare = 1 }
	}
}
BAR_silver_heal_silver = {
	if = {
		limit = {
			check_variable = { BAR_heal_prepare = 1 }
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = { healAmount = 24 }
				}
				10 = {
					set_temp_variable = { healAmount = 26 }
				}
				10 = {
					set_temp_variable = { healAmount = 28 }
				}
				10 = {
					set_temp_variable = { healAmount = 30 }
				}
				10 = {
					set_temp_variable = { healAmount = 32 }
				}
				10 = {
					set_temp_variable = { healAmount = 34 }
				}
				10 = {
					set_temp_variable = { healAmount = 36 }
				}
				10 = {
					set_temp_variable = { healAmount = 38 }
				}
				10 = {
					set_temp_variable = { healAmount = 40 }
				}
				10 = {
					set_temp_variable = { healAmount = 42 }
				}
			}
			set_temp_variable = { s_hp_temp = s_hp}
			add_to_temp_variable = { s_hp_temp = healAmount}
			if = {
				limit = {
					check_variable = { s_hp_max > s_hp_temp}
				}
				add_to_variable = { s_hp = healAmount}
			}
			else = {
				set_variable = { s_hp = s_hp_max}
			}
			subtract_from_variable = { BAR_resources_silver = 100}
			BAR_viira_turn_new = yes
			set_variable = { BAR_heal_prepare = 0 }
		}	
	}
}
BAR_silver_heal_asinti = {
	if = {
		limit = {
			check_variable = { BAR_heal_prepare = 1 }
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = { healAmount = 24 }
				}
				10 = {
					set_temp_variable = { healAmount = 26 }
				}
				10 = {
					set_temp_variable = { healAmount = 28 }
				}
				10 = {
					set_temp_variable = { healAmount = 30 }
				}
				10 = {
					set_temp_variable = { healAmount = 32 }
				}
				10 = {
					set_temp_variable = { healAmount = 34 }
				}
				10 = {
					set_temp_variable = { healAmount = 36 }
				}
				10 = {
					set_temp_variable = { healAmount = 38 }
				}
				10 = {
					set_temp_variable = { healAmount = 40 }
				}
				10 = {
					set_temp_variable = { healAmount = 42 }
				}
			}
			set_temp_variable = { a_hp_temp = a_hp}
			add_to_temp_variable = { a_hp_temp = healAmount}
			if = {
				limit = {
					check_variable = { a_hp_max > a_hp_temp}
				}
				add_to_variable = { a_hp = healAmount}
			}
			else = {
				set_variable = { a_hp = a_hp_max}
			}
			subtract_from_variable = { BAR_resources_silver = 100}
			BAR_viira_turn_new = yes
			set_variable = { BAR_heal_prepare = 0 }
		}	
	}
}
BAR_silver_heal_leopold = {
	if = {
		limit = {
			check_variable = { BAR_heal_prepare = 1 }
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = { healAmount = 24 }
				}
				10 = {
					set_temp_variable = { healAmount = 26 }
				}
				10 = {
					set_temp_variable = { healAmount = 28 }
				}
				10 = {
					set_temp_variable = { healAmount = 30 }
				}
				10 = {
					set_temp_variable = { healAmount = 32 }
				}
				10 = {
					set_temp_variable = { healAmount = 34 }
				}
				10 = {
					set_temp_variable = { healAmount = 36 }
				}
				10 = {
					set_temp_variable = { healAmount = 38 }
				}
				10 = {
					set_temp_variable = { healAmount = 40 }
				}
				10 = {
					set_temp_variable = { healAmount = 42 }
				}
			}
			set_temp_variable = { l_hp_temp = l_hp}
			add_to_temp_variable = { l_hp_temp = healAmount}
			if = {
				limit = {
					check_variable = { l_hp_max > l_hp_temp}
				}
				add_to_variable = { l_hp = healAmount}
			}
			else = {
				set_variable = { l_hp = l_hp_max}
			}
			subtract_from_variable = { BAR_resources_silver = 100}
			BAR_viira_turn_new = yes
			set_variable = { BAR_heal_prepare = 0 }
		}	
	}
}
BAR_pen_fight_leopold_normal_attack = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable  = { l_in > 0 }
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 3 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 4 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}					
			}
			random_list = {
				90 = {
					subtract_from_variable = { v_hp = dmgToDeal}
				}
				10 = {
					set_variable = { bar_pen_fight_missed = 2 }
					#you missed
				}
			}
			subtract_from_variable = { l_in = 1}
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_leopold_strong_attack = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { l_in > 2}
			check_variable = { BAR_resources_leopold > 49}
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 26 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 28 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 30 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 32 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 34 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 36 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 38 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 40 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 42 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 44 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 46 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 48 }
				}					
			}
			random_list = {
				90 = {
					subtract_from_variable = { v_hp = dmgToDeal}
				}
				10 = {
					set_variable = { bar_pen_fight_missed = 2 }
					#you missed
				}
			}
			subtract_from_variable = { l_in = 3}
			subtract_from_variable = { BAR_resources_leopold = 50}
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_leopold_stun = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable  = { l_in > 1}
			check_variable  = { BAR_resources_leopold > 99}
		}
		hidden_effect = {
			random_list = {
				40 = {
					set_variable = { v_stun = 1 }
				}
				50 = {
					set_variable = { v_stun = 2 }
				}
				10 = {
					set_variable = { v_stun = 3 }
				}
			}
			subtract_from_variable = { l_in = 2}
			subtract_from_variable = { BAR_resources_leopold = 100}
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_asinti_normal_attack = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { a_in > 0 }
		}
		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 3 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 4 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}					
			}
			random_list = {
				90 = {
					subtract_from_variable = { v_hp = dmgToDeal}
				}
				10 = {
					set_variable = { bar_pen_fight_missed = 3 }
					#you missed
				}
			}
			subtract_from_variable = { a_in = 1 }
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_asinti_heal = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { a_in > 1}
			check_variable = { BAR_resources_asinti > 49}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = { healAmount = 7 }
				}
				10 = {
					set_temp_variable = { healAmount = 8 }
				}
				10 = {
					set_temp_variable = { healAmount = 9 }
				}
				10 = {
					set_temp_variable = { healAmount = 10 }
				}
				10 = {
					set_temp_variable = { healAmount = 11 }
				}
				10 = {
					set_temp_variable = { healAmount = 12 }
				}
				10 = {
					set_temp_variable = { healAmount = 13 }
				}
				10 = {
					set_temp_variable = { healAmount = 14 }
				}
				10 = {
					set_temp_variable = { healAmount = 16 }
				}
				10 = {
					set_temp_variable = { healAmount = 17 }
				}
			}
			if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					has_country_flag = barrad_asinti_alive
					has_country_flag = barrad_leopold_alive	
				}
				set_temp_variable = { a_hp_t = a_hp }
				set_temp_variable = { l_hp_t = l_hp }
				set_temp_variable = { s_hp_t = s_hp }
				
				add_to_temp_variable = { a_hp_t = healAmount }
				add_to_temp_variable = { l_hp_t = healAmount }
				add_to_temp_variable = { s_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { a_hp_t > a_hp_max}
					}
					set_variable = { a_hp = a_hp_max}
				}
				else = {
					add_to_variable = { a_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { l_hp_t > l_hp_max}
					}
					set_variable = { l_hp = l_hp_max}
				}
				else = {
					add_to_variable = { l_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { s_hp_t > s_hp_max}
					}
					set_variable = { s_hp = s_hp_max}
				}
				else = {
					add_to_variable = { s_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					has_country_flag = barrad_asinti_alive
					NOT = { has_country_flag = barrad_leopold_alive }
				}
				set_temp_variable = { a_hp_t = a_hp }
				set_temp_variable = { s_hp_t = s_hp }
				
				add_to_temp_variable = { a_hp_t = healAmount }
				add_to_temp_variable = { s_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { a_hp_t > a_hp_max}
					}
					set_variable = { a_hp = a_hp_max}
				}
				else = {
					add_to_variable = { a_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { s_hp_t > s_hp_max}
					}
					set_variable = { s_hp = s_hp_max}
				}
				else = {
					add_to_variable = { s_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					NOT = { has_country_flag = barrad_asinti_alive }
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = { l_hp_t = l_hp }
				set_temp_variable = { s_hp_t = s_hp }
				
				add_to_temp_variable = { l_hp_t = healAmount }
				add_to_temp_variable = { s_hp_t = healAmount }
				
				else = {
					add_to_variable = { a_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { l_hp_t > l_hp_max}
					}
					set_variable = { l_hp = l_hp_max}
				}
				else = {
					add_to_variable = { l_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { s_hp_t > s_hp_max}
					}
					set_variable = { s_hp = s_hp_max}
				}
				else = {
					add_to_variable = { s_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					has_country_flag = barrad_silver_star_alive
					NOT = { has_country_flag = barrad_asinti_alive }
					NOT = { has_country_flag = barrad_leopold_alive }
				}
				set_temp_variable = { s_hp_t = s_hp }
				
				add_to_temp_variable = { s_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { s_hp_t > s_hp_max}
					}
					set_variable = { s_hp = s_hp_max}
				}
				else = {
					add_to_variable = { s_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = barrad_silver_star_alive }
					has_country_flag = barrad_asinti_alive
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = { a_hp_t = a_hp }
				set_temp_variable = { l_hp_t = l_hp }
				
				add_to_temp_variable = { a_hp_t = healAmount }
				add_to_temp_variable = { l_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { a_hp_t > a_hp_max}
					}
					set_variable = { a_hp = a_hp_max}
				}
				else = {
					add_to_variable = { a_hp = healAmount }
				}
				if = {
					limit = {
						check_variable = { l_hp_t > l_hp_max}
					}
					set_variable = { l_hp = l_hp_max}
				}
				else = {
					add_to_variable = { l_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = barrad_silver_star_alive }
					has_country_flag = barrad_asinti_alive
					NOT = { has_country_flag = barrad_leopold_alive}
				}
				set_temp_variable = { a_hp_t = a_hp }
				
				add_to_temp_variable = { a_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { a_hp_t > a_hp_max}
					}
					set_variable = { a_hp = a_hp_max}
				}
				else = {
					add_to_variable = { a_hp = healAmount }
				}
			}
			else_if = {
				limit = {
					NOT = { has_country_flag = barrad_silver_star_alive }
					NOT = { has_country_flag = barrad_asinti_alive}
					has_country_flag = barrad_leopold_alive
				}
				set_temp_variable = { l_hp_t = l_hp }
				
				add_to_temp_variable = { l_hp_t = healAmount }
				
				if = {
					limit = {
						check_variable = { l_hp_t > l_hp_max}
					}
					set_variable = { l_hp = l_hp_max}
				}
				else = {
					add_to_variable = { l_hp = healAmount }
				}
			}
			subtract_from_variable = { a_in = 2}
			subtract_from_variable = { BAR_resources_asinti = 100}
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_asinti_debuf = {
	set_variable = { bar_pen_fight_missed = 0 }
	if = {
		limit = {
			check_variable = { a_in > 0}
			check_variable = { BAR_resources_asinti > 99}
		}
		hidden_effect = {
			subtract_from_variable = { a_in = 1}
			subtract_from_variable = { BAR_resources_asinti = 100}
			set_variable = { viira_dmg_debuff = 2 }
			BAR_viira_turn_new = yes
		}
	}
}
BAR_pen_fight_rest = {
	set_variable = { bar_pen_fight_missed = 0 }
	hidden_effect = {
		if = {
			limit = {
				has_country_flag = barrad_asinti_alive
			}
			if = {
				limit = {
					check_variable = { a_in > 8 } 
				}
				set_variable = { a_in = 10 }
			}
			else = {
				add_to_variable = { a_in = 2 } 
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_leopold_alive
			}
			if = {
				limit = {
					check_variable = { l_in > 8 } 
				}
				set_variable = { l_in = 10 }
			}
			else = {
				add_to_variable = { l_in = 2 } 
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
			}
			if = {
				limit = {
					check_variable = { s_in > 8 } 
				}
				set_variable = { s_in = 10 }
			}
			else = {
				add_to_variable = { s_in = 2 } 
			}
		}
		BAR_viira_turn_new = yes
	}	
}
BAR_viira_turn_new = {
	if = {
		limit = {
			check_variable = { v_hp > 0 }
		}
		random_list = {
			35 = { #target weakest one
				set_temp_variable = { min = 1000 }
				set_variable = { viira_target = 0 }
				if = {
					limit = {
						check_variable = { a_hp > 0 }
						check_variable = { a_hp < min }
					}
					set_variable = { min = a_hp }
					set_variable = { viira_target = 1 }
				}
				if = {
					limit = {
						check_variable = { l_hp > 0 }
						check_variable = { l_hp < min }
					}
					set_variable = { min = l_hp }
					set_variable = { viira_target = 2 }
				}
				if = {
					limit = {
						check_variable = { s_hp > 0 }
						check_variable = { s_hp < min }
					}
					set_variable = { min = s_hp }
					set_variable = { viira_target = 3 }
				}
			}
			65 = { #target random one
				if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive	
					}
					random_list = {
						34 = {
							set_variable = { viira_target = 1 }
						}
						33 = {
							set_variable = { viira_target = 2 }
						}
						33 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 2 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					set_variable = { viira_target = 3 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 2 }
						}
					}
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive}
					}
					set_variable = { viira_target = 1 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						NOT = { has_country_flag = barrad_asinti_alive}
						has_country_flag = barrad_leopold_alive
					}
					set_variable = { viira_target = 2 }
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_stun < 1 }
			}
			BAR_viira_attack = yes
		}
		else = {
			set_variable = { viira_turn_action = 5 }
			subtract_from_variable = { v_stun = 1 }
		}
		set_variable = { viira_dmg_debuff = 1 }
		if = {
			limit = {
				check_variable = { a_hp < 1 }
			}
			set_variable = { bar_pen_fight_asinti_state = 2 }
			barrad_kill_asinti = yes
		}
		if = {
			limit = {
				check_variable = { l_hp < 1 }
			}
			set_variable = { bar_pen_fight_leopold_state = 2 }
			barrad_kill_leopold = yes
		}
		if = {
			limit = {
				check_variable = { s_hp < 1 }
			}
			set_variable = { bar_pen_fight_silver_state = 2 }
			barrad_kill_silver = yes
		}
		bar_pen_fight_gui_reload = yes
		BAR_viira_round_end_new = yes
	}
	else = {
		barrad_kill_viira = yes
		set_variable = { bar_pen_fight_viira_state = 2 }
		country_event = { id = barrad_huj.7 } #we won!
	}
}
BAR_viira_round_end_new = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
		}
		log = "[GetDateText]: [Root.GetName]: viir fight next round"
	}
	else = {
		country_event = { id = barrad_huj.6 } #we lost...
	}
}
bar_pen_fight_close_window = {
	clear_variable = BAR_fight_pentarchy_action
	clear_variable = a_hp
	clear_variable = a_hp_max
	clear_variable = a_in
	clear_variable = l_hp
	clear_variable = l_hp_max
	clear_variable = l_in
	clear_variable = s_hp
	clear_variable = s_hp_max
	clear_variable = s_in
	clear_variable = v_hp
	clear_variable = v_hp_max
	clear_variable = v_in
	clear_variable = bar_pen_fight_silver_state
	clear_variable = bar_pen_fight_leopold_state
	clear_variable = bar_pen_fight_asinti_state
	clear_variable = s_hp_d_10
	clear_variable = s_hp_d_20
	clear_variable = s_hp_d_30
	clear_variable = s_hp_d_40
	clear_variable = s_hp_d_50
	clear_variable = s_hp_d_60
	clear_variable = s_hp_d_70
	clear_variable = s_hp_d_80
	clear_variable = s_hp_d_90
	clear_variable = s_hp_d_100
	clear_variable = s_hp_d_110
	clear_variable = s_hp_d_120
	clear_variable = s_hp_d_130
	clear_variable = s_hp_d_140
	clear_variable = s_hp_d_150
	clear_variable = s_hp_d_160
	clear_variable = s_hp_d_170
	clear_variable = l_hp_d_10
	clear_variable = l_hp_d_20
	clear_variable = l_hp_d_30
	clear_variable = l_hp_d_40
	clear_variable = l_hp_d_50
	clear_variable = l_hp_d_60
	clear_variable = l_hp_d_70
	clear_variable = l_hp_d_80
	clear_variable = l_hp_d_90
	clear_variable = l_hp_d_100
	clear_variable = l_hp_d_110
	clear_variable = l_hp_d_120
	clear_variable = l_hp_d_130
	clear_variable = l_hp_d_140
	clear_variable = l_hp_d_150
	clear_variable = l_hp_d_160
	clear_variable = l_hp_d_170
	clear_variable = l_hp_d_180
	clear_variable = l_hp_d_190
	clear_variable = l_hp_d_200
	clear_variable = l_hp_d_210
	clear_variable = l_hp_d_220
	clear_variable = a_hp_d_10
	clear_variable = a_hp_d_20
	clear_variable = a_hp_d_30
	clear_variable = a_hp_d_40
	clear_variable = a_hp_d_50
	clear_variable = a_hp_d_60
	clear_variable = a_hp_d_70
	clear_variable = a_hp_d_80
	clear_variable = a_hp_d_90
	clear_variable = a_hp_d_100
	clear_variable = a_hp_d_110
	clear_variable = a_hp_d_120
	clear_variable = a_hp_d_130
	clear_variable = a_hp_d_140
	clear_variable = a_hp_d_150
	clear_variable = a_hp_d_160
	clear_variable = a_hp_d_170
	clear_variable = a_hp_d_180
	clear_variable = a_hp_d_190
	clear_variable = l_hp_d_10
	clear_variable = l_hp_d_20
	clear_variable = l_hp_d_30
	clear_variable = l_hp_d_40
	clear_variable = l_hp_d_50
	clear_variable = l_hp_d_60
	clear_variable = l_hp_d_70
	clear_variable = l_hp_d_80
	clear_variable = l_hp_d_90
	clear_variable = l_hp_d_100
	clear_variable = l_hp_d_110
	clear_variable = l_hp_d_120
	clear_variable = l_hp_d_130
	clear_variable = l_hp_d_140
	clear_variable = l_hp_d_150
	clear_variable = l_hp_d_160
	clear_variable = l_hp_d_170
	clear_variable = l_hp_d_180
	clear_variable = l_hp_d_190
	clear_variable = l_hp_d_190
	clear_variable = l_hp_d_200
	clear_variable = l_hp_d_210
	clear_variable = l_hp_d_220
	clear_variable = l_hp_d_230
	clear_variable = l_hp_d_240
	clear_variable = l_hp_d_250
	clear_variable = l_hp_d_260
	clear_variable = l_hp_d_270
	clear_variable = l_hp_d_280
	clear_variable = s_in_d_1
	clear_variable = s_in_d_2
	clear_variable = s_in_d_3
	clear_variable = s_in_d_4
	clear_variable = s_in_d_5
	clear_variable = s_in_d_6
	clear_variable = s_in_d_7
	clear_variable = s_in_d_8
	clear_variable = s_in_d_9
	clear_variable = s_in_d_10
	clear_variable = l_in_d_1
	clear_variable = l_in_d_2
	clear_variable = l_in_d_3
	clear_variable = l_in_d_4
	clear_variable = l_in_d_5
	clear_variable = l_in_d_6
	clear_variable = l_in_d_7
	clear_variable = l_in_d_8
	clear_variable = l_in_d_9
	clear_variable = l_in_d_10
	clear_variable = a_in_d_1
	clear_variable = a_in_d_2
	clear_variable = a_in_d_3
	clear_variable = a_in_d_4
	clear_variable = a_in_d_5
	clear_variable = a_in_d_6
	clear_variable = a_in_d_7
	clear_variable = a_in_d_8
	clear_variable = a_in_d_9
	clear_variable = a_in_d_10
	clear_variable = v_in_d_1
	clear_variable = v_in_d_2
	clear_variable = v_in_d_3
	clear_variable = v_in_d_4
	clear_variable = v_in_d_5
	clear_variable = v_in_d_6
	clear_variable = v_in_d_7
	clear_variable = v_in_d_8
	clear_variable = v_in_d_9
	clear_variable = v_in_d_10
	clear_variable = v_in_d_11
	clear_variable = v_in_d_12
	clear_variable = v_in_d_13
	clear_variable = v_in_d_14
	clear_variable = v_in_d_15
	clear_variable = v_in_d_16
	clear_variable = v_in_d_17
	clear_variable = v_in_d_18
	clear_variable = v_in_d_19
	clear_variable = v_in_d_20
	clear_variable = heal_target
	clear_variable = character_attacking
	clear_variable = viira_dmg_debuff
	clear_variable = v_stun
	clear_variable = bar_pentarchy_fight_show
	clear_variable = bar_viira_fight_show
}

bar_viira_fight_normal_attack = {
	if = {
		limit = {
			check_variable = { v_stun < 1}
			check_variable = { v_in > 0}
		}
		clear_variable = bar_viira_fight_strong_attack_prepare
		set_variable = { bar_viira_fight_normal_attack_prepare = 1 }
	}
}
bar_viira_fight_normal_attack_asinti = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_normal_attack_prepare = 1 }
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 23 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}					
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 1 }
			subtract_from_variable = { a_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { a_hp < 0 }
				}
				barrad_kill_asinti = yes
			}
			BAR_pentarchy_turn_new = yes
		}

		clear_variable = bar_viira_fight_normal_attack_prepare
	}
}
bar_viira_fight_normal_attack_leopold = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_normal_attack_prepare = 1 }
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 23 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}					
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 1 }
			subtract_from_variable = { l_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { l_hp < 0 }
				}
				barrad_kill_leopold = yes
			}
			BAR_pentarchy_turn_new = yes
		}

		clear_variable = bar_viira_fight_normal_attack_prepare
	}	
}
bar_viira_fight_normal_attack_silver = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_normal_attack_prepare = 1 }
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 5 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 6 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 7 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 8 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 9 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 10 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 11 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 12 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 13 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 14 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 15 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 16 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 17 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 18 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 19 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 20 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 21 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 22 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 23 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}					
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 1 }
			subtract_from_variable = { s_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { s_hp < 0 }
				}
				barrad_kill_silver = yes
			}
			BAR_pentarchy_turn_new = yes
		}	

		clear_variable = bar_viira_fight_normal_attack_prepare
	}
}
bar_viira_fight_strong_attack  = {
	if = {
		limit = {
			check_variable = { v_stun < 1}
			check_variable = { v_in > 2}
			check_variable = { BAR_resources_viira > 99}
		}
		clear_variable = bar_viira_fight_normal_attack_prepare
		set_variable = { bar_viira_fight_strong_attack_prepare = 1 }
	}
}
bar_viira_fight_strong_attack_asinti = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_strong_attack_prepare = 1}
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 26 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 28 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 30 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 32 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 34 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 36 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 38 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 40 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 42 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 54 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 56 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 58 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 69 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 62 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 64 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 66 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 68 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 70 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 72 }
				}
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 3 }
			subtract_from_variable = { a_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { a_hp < 0 }
				}
				barrad_kill_asinti = yes
			}
			subtract_from_variable = { BAR_resources_viira = 100 }
			BAR_pentarchy_turn_new = yes
		}	
		
		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}
bar_viira_fight_strong_attack_silver = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_strong_attack_prepare = 1}
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 26 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 28 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 30 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 32 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 34 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 36 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 38 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 40 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 42 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 54 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 56 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 58 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 69 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 62 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 64 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 66 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 68 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 70 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 72 }
				}
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 3 }
			subtract_from_variable = { s_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { s_hp < 0 }
				}
				barrad_kill_silver = yes
			}
			subtract_from_variable = { BAR_resources_viira = 100 }
			BAR_pentarchy_turn_new = yes
		}	

		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}
bar_viira_fight_strong_attack_leopold = {
	if = {
		limit = {
			check_variable = { bar_viira_fight_strong_attack_prepare = 1}
		}

		hidden_effect = {
			random_list = {
				5 = {
					set_temp_variable = { dmgToDeal = 24 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 26 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 28 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 30 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 32 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 34 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 36 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 38 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 40 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 42 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 54 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 56 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 58 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 69 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 62 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 64 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 66 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 68 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 70 }
				}
				5 = {
					set_temp_variable = { dmgToDeal = 72 }
				}
			}
			divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
			subtract_from_variable = { v_in = 3 }
			subtract_from_variable = { l_hp = dmgToDeal}
			if = {
				limit = {
					check_variable = { l_hp < 0 }
				}
				barrad_kill_leopold = yes
			}	
			subtract_from_variable = { BAR_resources_viira = 100 }
			BAR_pentarchy_turn_new = yes
		}

		clear_variable = bar_viira_fight_strong_attack_prepare
	}
}
bar_viira_fight_heal = {
	if = {
		limit = {
			check_variable = { v_stun < 1}
			check_variable = { v_in > 0}
			check_variable = { BAR_resources_viira > 199}
		}
		hidden_effect = {
			random_list = {
				10 = {
					set_temp_variable = { healVal = 12 }
				}
				10 = {
					set_temp_variable = { healVal = 14 }
				}
				10 = {
					set_temp_variable = { healVal = 16 }
				}
				10 = {
					set_temp_variable = { healVal = 18 }
				}
				10 = {
					set_temp_variable = { healVal = 20 }
				}
				10 = {
					set_temp_variable = { healVal = 22 }
				}
				10 = {
					set_temp_variable = { healVal = 24 }
				}
				10 = {
					set_temp_variable = { healVal = 26 }
				}
				10 = {
					set_temp_variable = { healVal = 28 }
				}
				10 = {
					set_temp_variable = { healVal = 30 }
				}
			}
			set_temp_variable = { curHp = v_hp }
			add_to_temp_variable = { curHp = healVal }
			if = {
				limit = {
					check_variable = { curHp > v_hp_max }
				}
				set_variable = { v_hp = v_hp_max}
			}
			else = {
				add_to_variable = { v_hp = healVal }
			}
			subtract_from_variable = { v_in = 1 }	
			subtract_from_variable = { BAR_resources_viira = 200 }
			BAR_pentarchy_turn_new = yes
		}
	}
}
bar_viira_fight_rest = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { v_in < 16 }
			}
			add_to_variable = { v_in = 5 }
		}
		else = {
			set_variable = { v_in = 20 }
		}
		BAR_pentarchy_turn_new = yes
	}
}
BAR_pentarchy_turn_new = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
			random_list = {
				34 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
				33 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn silver attack"
			set_variable = { character_attacking = 3 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
					set_variable = { character_attacking = 1 }
				}
				50 = {
					log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
					set_variable = { character_attacking = 2 }
				}
			}
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive}
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn asinti attack"
			set_variable = { character_attacking = 1 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				NOT = { has_country_flag = barrad_asinti_alive}
				has_country_flag = barrad_leopold_alive
			}
			log = "[GetDateText]: [Root.GetName]: pentarchy turn leopold attack"
			set_variable = { character_attacking = 2 }
		}
		BAR_pentarchy_attack = yes
		
		if = {
			limit = {
				check_variable = { v_hp > 0 }
			}
			add_to_variable = { bar_viira_fight_show = 1 }
		}
		else = { #gameover
			set_variable = { bar_pen_fight_viira_state = 2 }
			country_event = { id = barrad_huj.9 }
		}
	}
	else = { #viira won
		country_event = { id = barrad_huj.10 }
	}
	if = {
		limit = { 
			check_variable = { v_stun > 0 }
		}
		subtract_from_variable = { v_stun = 1 }
		BAR_pentarchy_turn_new = yes
	}
	bar_viira_fight_gui_reload = yes
}
BAR_remove_cooperation = {
	remove_ideas = BAR_relations_asinti_silver_positive
	remove_ideas = BAR_relations_asinti_leopold_positive
	remove_ideas = BAR_relations_asinti_viira_positive
	remove_ideas = BAR_relations_silver_leopold_positive
	remove_ideas = BAR_relations_silver_viira_positive
	remove_ideas = BAR_relations_leopold_viira_positive
	remove_ideas = BAR_relations_asinti_silver_negative
	remove_ideas = BAR_relations_asinti_leopold_negative
	remove_ideas = BAR_relations_asinti_viira_negative
	remove_ideas = BAR_relations_silver_leopold_negative
	remove_ideas = BAR_relations_silver_viira_negative
	remove_ideas = BAR_relations_leopold_viira_negative
}
BAR_replace_skeletons_to_stuff = {
	if = {
		limit = {
			has_idea = BAR_undead_minimal_aut
		}
		one_random_industrial_complex = yes
		remove_ideas = BAR_undead_minimal_aut
	}
	if = {
		limit = {
			has_idea = BAR_undead_army_1
		}
		one_random_industrial_complex = yes
		one_random_infrastructure = yes
		remove_ideas = BAR_undead_army_1
	}
	if = {
		limit = {
			has_idea = BAR_undead_army_2
		}
		one_random_industrial_complex = yes
		one_random_infrastructure = yes
		one_random_infrastructure = yes
		remove_ideas = BAR_undead_army_2
	}
	if = {
		limit = {
			has_idea = BAR_undead_army_3
		}
		one_random_industrial_complex = yes
		one_random_infrastructure = yes
		one_random_infrastructure = yes
		one_random_arms_factory = yes
		remove_ideas = BAR_undead_army_3
	}
	if = {
		limit = {
			has_idea = BAR_undead_army_4
		}
		one_random_industrial_complex = yes
		one_random_infrastructure = yes
		one_random_infrastructure = yes
		one_random_arms_factory = yes
		one_random_arms_factory = yes
		remove_ideas = BAR_undead_army_4
	}
	if = {
		limit = {
			has_idea = BAR_undead_army_5
		}
		one_random_industrial_complex = yes
		one_random_industrial_complex = yes
		one_random_infrastructure = yes
		one_random_infrastructure = yes
		one_random_arms_factory = yes
		one_random_arms_factory = yes
		remove_ideas = BAR_undead_army_5
	}
}
BAR_titan_turn = {
	set_temp_variable = { dmgMult = 1 }
	if = {
		limit = {
			check_variable = { titanHP < 70  }
		}
		random_list = {
			50 = {
				multiply_temp_variable = { dmgMult = 2 }
			}
			50 = {

			}
		}	
	}
	divide_temp_variable = { dmgMult = onDef }
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}					
	}
	multiply_temp_variable = { dmgToDeal = dmgMult }
	
	if = { #if viira is around
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		random_list = {
			75 = {
				set_variable = { lastDmgTaken = dmgToDeal }
				subtract_from_variable = { leoHP = dmgToDeal }
			}
			25 = {
				set_variable = { lastDmgDealth = 0 }
			}
		}
	}
	else = {
		random_list = {
			90 = {
				set_variable = { lastDmgTaken = dmgToDeal }
				subtract_from_variable = { leoHP = dmgToDeal }
			}
			10 = {
				set_variable = { lastDmgDealth = 0 }
			}
		}
	}
	set_variable = { onDef = 1 }
	if = {
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP > 0 }
			}
			country_event = { id = barrad_esb.21 }
		}
		else_if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP < 1 }
			}
			country_event = { id = barrad_esb.51 }
		}
		else_if = {
			limit = {
				check_variable = { leoHP > 0 }
				check_variable = { titanHP < 1 }
			}
			country_event = { id = barrad_esb.53 }
		}
		else = {
			country_event = { id = barrad_esb.52 }
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP > 0 }
			}
			country_event = {id = barrad_esb.21 }
		}
		else_if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP < 1 }
			}
			country_event = { id = barrad_esb.41 }
		}
		else_if = {
			limit = {
				check_variable = { leoHP > 0 }
				check_variable = { titanHP < 1 }
			}
			country_event = { id = barrad_esb.43 }
		}
		else = {
			country_event = { id = barrad_esb.42 }
		}
	}
}
BAR_titan_turn2 = {
	set_temp_variable = { dmgMult = 1 }
	if = {
		limit = {
			check_variable = { titanHP < 70  }
		}
		random_list = {
			50 = {
				multiply_temp_variable = { dmgMult = 2 }
			}
			50 = {

			}
		}	
	}
	divide_temp_variable = { dmgMult = onDef }
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}						
	}
	multiply_temp_variable = { dmgToDeal = dmgMult }
	
	if = { #if viira is around
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		random_list = {
			75 = {
				set_variable = { lastDmgTaken = dmgToDeal }
				subtract_from_variable = { leoHP = dmgToDeal }
			}
			25 = {
				set_variable = { lastDmgDealth = 0 }
			}
		}
	}
	else = {
		random_list = {
			90 = {
				set_variable = { lastDmgTaken = dmgToDeal }
				subtract_from_variable = { leoHP = dmgToDeal }
			}
			10 = {
				set_variable = { lastDmgDealth = 0 }
			}
		}
	}
	set_variable = { onDef = 1 }
	if = {
		limit = {
			has_country_flag = BAR_viira_fights_leo
		}
		if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP > 0 }
			}
			country_event = { id = barrad_esb.2 }
		}
		else_if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP < 1 }
			}
			country_event = { id = barrad_esb.51 }
		}
		else_if = {
			limit = {
				check_variable = { leoHP > 0 }
				check_variable = { titanHP < 1 }
			}
			country_event = { id = barrad_esb.53 }
		}
		else = {
			country_event = { id = barrad_esb.52 }
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP > 0 }
			}
			country_event = {id = barrad_esb.2 }
		}
		else_if = {
			limit = {
				check_variable = { titanHP > 0 }
				check_variable = { leoHP < 1 }
			}
			country_event = { id = barrad_esb.41 }
		}
		else_if = {
			limit = {
				check_variable = { leoHP > 0 }
				check_variable = { titanHP < 1 }
			}
			country_event = { id = barrad_esb.43 }
		}
		else = {
			country_event = { id = barrad_esb.42 }
		}
	}
}