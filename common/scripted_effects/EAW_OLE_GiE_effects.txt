col = {
	OLE = {
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		CHN = {
			puppet = PREV
		}
		add_ideas = surrender_test
		save_global_event_target_as = chnole
		# add_to_war = { targeted_alliance = CHN enemy = OLE }
		every_state = {
			limit = { is_core_of = OLE NOT = { state = 292 } }
			transfer_state_to = PREV
		}
	}
}

t = {
	194 = {
		for_each_loop = {
			array = core_countries
			log = "[?v.GetTag]"
		}
	}
}

ex = {
	#OLE = {
	#	become_exiled_in = {
	#		target = ROOT
	#		legitimacy = 50
	#	}
	#}
	create_dynamic_country = {
		original_tag = OLE
		set_temp_variable = { goodole = THIS}
		every_state = {
			limit = { is_core_of = OLE NOT = { state = 194 } }
			if = {
				limit = {
					is_owned_by = CHN
				}
				set_state_flag = chn_owned
			}
			var:goodole = { set_state_owner = PREV }
			set_state_flag = a
		}
	}
	var:goodole = {
		EQS = { add_to_faction = PREV }
		add_to_war = { targeted_alliance = EQS enemy = CHN }
		# add_ideas = surrender_test
	}
	every_state = {
		limit = { has_state_flag = a }
		if = {
			limit = {
				has_state_flag = chn_owned
			}
			CHN = { set_state_controller = PREV }
		}
		else = {
			OLE = { set_state_controller = PREV }
		}
		clr_state_flag = a
		clr_state_flag = chn_owned
	}
	var:goodole = { change_tag_from = OLE }
}

sw = {
	add_legitimacy = 100
}

end = {
	every_state = {
		limit = { is_core_of = OLE }
		EQS = { set_state_controller = PREV }
	}
}