######################################
### Semblance of Democracy Effects ###
######################################

### Temp Effects for Tooltips ###

# Enable Secondary Ideologies #
MER_enable_sec_ideology_supremacy = {
	set_temp_variable = { MER_temp_enable_sec_ideology = 1 }
	set_temp_variable = { MER_temp_sec_ideology = 1 }
}
MER_enable_sec_ideology_harmony = {
	set_temp_variable = { MER_temp_enable_sec_ideology = 1 }
	set_temp_variable = { MER_temp_sec_ideology = 2 }
}
MER_enable_sec_ideology_neutrality = {
	set_temp_variable = { MER_temp_enable_sec_ideology = 1 }
	set_temp_variable = { MER_temp_sec_ideology = 3 }
}
MER_enable_sec_ideology_communism = {
	set_temp_variable = { MER_temp_enable_sec_ideology = 1 }
	set_temp_variable = { MER_temp_sec_ideology = 4 }
}

# Enable Tertiary Ideologies #
MER_enable_third_ideology_supremacy = {
	set_temp_variable = { MER_temp_enable_third_ideology = 1 }
	set_temp_variable = { MER_temp_third_ideology = 1 }
}
MER_enable_third_ideology_harmony = {
	set_temp_variable = { MER_temp_enable_third_ideology = 1 }
	set_temp_variable = { MER_temp_third_ideology = 2 }
}
MER_enable_third_ideology_neutrality = {
	set_temp_variable = { MER_temp_enable_third_ideology = 1 }
	set_temp_variable = { MER_temp_third_ideology = 3 }
}
MER_enable_third_ideology_communism = {
	set_temp_variable = { MER_temp_enable_third_ideology = 1 }
	set_temp_variable = { MER_temp_third_ideology = 4 }
}

# Enable Quarternary Ideologies # 
MER_enable_fourth_ideology_supremacy = {
	set_temp_variable = { MER_temp_enable_fourth_ideology = 1 }
	set_temp_variable = { MER_temp_fourth_ideology = 1 }
}
MER_enable_fourth_ideology_harmony = {
	set_temp_variable = { MER_temp_enable_fourth_ideology = 1 }
	set_temp_variable = { MER_temp_fourth_ideology = 2 }
}
MER_enable_fourth_ideology_neutrality = {
	set_temp_variable = { MER_temp_enable_fourth_ideology = 1 }
	set_temp_variable = { MER_temp_fourth_ideology = 3 }
}
MER_enable_fourth_ideology_communism = {
	set_temp_variable = { MER_temp_enable_fourth_ideology = 1 }
	set_temp_variable = { MER_temp_fourth_ideology = 4 }
}

### Cooperation Drift Changes ###

# Cooperation - Stable #
MER_stable_cooperation_drift_add = {
	set_temp_variable = { MER_temp_drift_value = MER_drift_value_pos_2 }
	set_temp_variable = { MER_temp_sec_drift_value = MER_drift_value_pos_3 }
	set_temp_variable = { MER_temp_third_drift_value = MER_drift_value_neg_2 }
	set_temp_variable = { MER_temp_fourth_drift_value = MER_drift_value_neg_2 }
}
MER_stable_cooperation_drift_remove = {
	set_temp_variable = { MER_temp_drift_value = MER_drift_value_neg_2 }
	set_temp_variable = { MER_temp_sec_drift_value = MER_drift_value_neg_3 }
	set_temp_variable = { MER_temp_third_drift_value = MER_drift_value_pos_2 }
	set_temp_variable = { MER_temp_fourth_drift_value = MER_drift_value_pos_2 }
}

# Cooperation - Unstable #
MER_unstable_cooperation_drift_add = {
	set_temp_variable = { MER_temp_drift_value = MER_drift_value_pos_3 }
	set_temp_variable = { MER_temp_sec_drift_value = MER_drift_value_pos_2 }
	set_temp_variable = { MER_temp_third_drift_value = MER_drift_value_neg_1 }
	set_temp_variable = { MER_temp_fourth_drift_value = MER_drift_value_neg_1 }
}
MER_unstable_cooperation_drift_remove = {
	set_temp_variable = { MER_temp_drift_value = MER_drift_value_neg_3 }
	set_temp_variable = { MER_temp_sec_drift_value = MER_drift_value_neg_2 }
	set_temp_variable = { MER_temp_third_drift_value = MER_drift_value_pos_1 }
	set_temp_variable = { MER_temp_fourth_drift_value = MER_drift_value_pos_1 }
}

#######################################
### Political Decision Cost Effects ###
#######################################
MER_add_15_to_all_pol_decisions = {
	add_to_variable = {
		var = MER_fascist_political_decisions_cost
		value = 15
	}
	add_to_variable = {
		var = MER_harmonist_political_decisions_cost
		value = 15
	}
	add_to_variable = {
		var = MER_commie_political_decisions_cost
		value = 15
	}
}

######################################################
### Actual Semblance Change Effects (Not Tooltips) ###
######################################################
MER_add_1_to_non_neutral_drifts = {
	add_to_variable = {
		var = MER_communism_drift
		value = 0.01
	}
	add_to_variable = {
		var = MER_fascist_drift
		value = 0.01
	}
	add_to_variable = {
		var = MER_democratic_drift
		value = 0.01
	}
}

########################
### Balance of Power ###
########################

MER_initiate_balance_of_power = {
	set_power_balance = {
		id = MER_revolution_power_balance
		left_side = MER_moderates_side 
		right_side = MER_radicals_side
		set_default = yes 
	}
}
MER_activate_warhawk_drift = {
	hidden_effect = {
		set_country_flag = MER_warhawks_in_opposition
		country_event = { id = meridiennes_m_rev_opposition.1 days = 1 }
	}
	add_power_balance_modifier = {
		id = MER_revolution_power_balance
		modifier = MER_warhawks_opposing_drift
	}	
}
MER_activate_moderates_drift = {
	hidden_effect = {
		set_country_flag = MER_moderates_in_opposition
		#country_event = { id = #TODO days = 0 }
	}	
	add_power_balance_modifier = {
		id = MER_revolution_power_balance
		modifier = MER_moderates_opposing_drift
	}	
}
MER_add_political_power_based_on_moderate_party_pops = { #Gives PP based on Neutrality + Communalist Supp
	set_temp_variable ={ #Main variable - neutrality
		var = MER_temp_pp_main_var
		value = 100
	}
	set_temp_variable = { #Secondary variable - communalists
		var = MER_temp_pp_sec_var
		value = 100
	}
	multiply_temp_variable = {
		var = MER_temp_pp_main_var
		value = party_popularity@neutrality
	}
	multiply_temp_variable = {
		var = MER_temp_pp_sec_var
		value = party_popularity@communism
	}
	add_to_temp_variable = {
		var = MER_temp_pp_main_var
		value = MER_temp_pp_sec_var
	}
	divide_temp_variable = {
		var = MER_temp_pp_main_var
		value = 2
	}
	custom_effect_tooltip = MER_buff_ourselves_tt
}
MER_get_party_pop_values = {
    set_temp_variable = { MER_temp_supremacy_supp = party_popularity@fascism }
    set_temp_variable = { MER_temp_communal_supp = party_popularity@communism }
    set_temp_variable = { MER_temp_harmony_supp = party_popularity@democratic }
}



######################################
MER_rename_dragon_state = {
	if = {
		limit = {
			state = 4
		}
		set_state_name = MER_spa_islands_french
	}
	if = {
		limit = {
			state = 6
		}
		set_state_name = MER_charcoal_woods_french
	}
	if = {
		limit = {
			state = 7
		}
		set_state_name = MER_the_mountain_french
		set_province_name = {
			id = 13071
			name = MER_the_mountain_french
		}
	}
	if = {
		limit = {
			state = 8
		}
		set_state_name = MER_spiky_north_french
	}
	if = {
		limit = {
			state = 9
		}
		set_state_name = MER_dovashore_french
	}
	if = {
		limit = {
			state = 10
		}
		set_state_name = MER_eastward_islands_french
	}
}
MER_spawn_dragon_auxiliaries = {
	if = {
		limit = {
			state = 4
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 11755
		}
	}
	if = {
		limit = {
			state = 6
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 11843
		}
	}
	if = {
		limit = {
			state = 7
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 13071
		}
	}
	if = {
		limit = {
			state = 8
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 10113
		}
	}
	if = {
		limit = {
			state = 9
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 11943
		}
	}
	if = {
		limit = {
			state = 10
		}
		create_unit = {
			division = "name = \"Auxiliaires Ailés Mixtes\" division_template = \"Auxiliaires Ailés Mixtes\" start_experience_factor = 0.50 start_equipment_factor = 1.0"
			owner = ROOT
			prioritize_location = 10070
		}
	}
}
