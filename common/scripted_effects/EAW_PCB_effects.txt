
############################## PCB ECONOMY CALCULATION EFFECT ##############################

PCB_eco_calc_scripted_effect = {

######################### DOMESTIC GOODS #########################

	############### Coffee Plantations ###############

		##### Costs #####
		
# Calculation: plantations * cost per plantation = costs

	set_variable = {
		var = PCB_coffee_cost_per_plant
		value = PCB_coffee_supply
	}
		
	multiply_variable = {
		var = PCB_coffee_cost_per_plant
		value = 15
	}

	set_variable = {
		var = PCB_coffee_cost
		value = PCB_coffee_cost_per_plant
	}

		##### Income #####

# Calculation: supply * demand = income

	set_variable = {
		var = PCB_coffee_supdem
		value = PCB_coffee_supply
	}

	multiply_variable = {
		var = PCB_coffee_supdem
		value = PCB_coffee_demand
	}
		
	set_variable = {
		var = PCB_coffee_income
		value = PCB_coffee_supdem
	}
		
		##### Profit #####

# Calculation: income - costs = profit

	set_variable = {
		var = PCB_coffee_profit
		value = PCB_coffee_income
	}
	
	subtract_from_variable = {
		var = PCB_coffee_profit
		value = PCB_coffee_cost
	}

	############### Sugar Plantations ###############
		
		##### Costs #####

# Calculation: plantations * cost per plantation = costs

	set_variable = {
		var = PCB_sugar_cost_per_plant
		value = PCB_sugar_supply
	}
		
	multiply_variable = {
		var = PCB_sugar_cost_per_plant
		value = 10
	}

	set_variable = {
		var = PCB_sugar_cost
		value = PCB_sugar_cost_per_plant
	}
		
		##### Income #####

# Calculation: supply * demand = income

	set_variable = {
		var = PCB_sugar_supdem
		value = PCB_sugar_supply
	}

	multiply_variable = {
		var = PCB_sugar_supdem
		value = PCB_sugar_demand
	}
		
	set_variable = {
		var = PCB_sugar_income
		value = PCB_sugar_supdem
	}
		
		##### Profit #####

# Calculation: income - costs = profit

	set_variable = {
		var = PCB_sugar_profit
		value = PCB_sugar_income
	}
	
	subtract_from_variable = {
		var = PCB_sugar_profit
		value = PCB_sugar_cost
	}

	############### Cocoa Plantations ###############

		##### Costs #####
		
# Calculation: plantations * cost per plantation = costs
		
	set_variable = {
		var = PCB_cocoa_cost_per_plant
		value = PCB_cocoa_supply
	}
		
	multiply_variable = {
		var = PCB_cocoa_cost_per_plant
		value = 20
	}

	set_variable = {
		var = PCB_cocoa_cost
		value = PCB_cocoa_cost_per_plant
	}
		
		##### Income #####
		
# Calculation: supply * demand = income

	set_variable = {
		var = PCB_cocoa_supdem
		value = PCB_cocoa_supply
	}

	multiply_variable = {
		var = PCB_cocoa_supdem
		value = PCB_cocoa_demand
	}
		
	set_variable = {
		var = PCB_cocoa_income
		value = PCB_cocoa_supdem
	}
		
		##### Profit #####

# Calculation: income - costs = profit

	set_variable = {
		var = PCB_cocoa_profit
		value = PCB_cocoa_income
	}
	
	subtract_from_variable = {
		var = PCB_cocoa_profit
		value = PCB_cocoa_cost
	}

	############### Tobacco Plantations ###############

		##### Costs #####

# Calculation: plantations * cost per plantation = costs

	set_variable = {
		var = PCB_tobacco_cost_per_plant
		value = PCB_tobacco_supply
	}
		
	multiply_variable = {
		var = PCB_tobacco_cost_per_plant
		value = 10
	}

	set_variable = {
		var = PCB_tobacco_cost
		value = PCB_tobacco_cost_per_plant
	}
		
		##### Income #####
		
# Calculation: supply * demand = income

	set_variable = {
		var = PCB_tobacco_supdem
		value = PCB_tobacco_supply
	}

	multiply_variable = {
		var = PCB_tobacco_supdem
		value = PCB_tobacco_demand
	}
		
	set_variable = {
		var = PCB_tobacco_income
		value = PCB_tobacco_supdem
	}
		
		##### Profit #####
		
# Calculation: income - costs = profit
		
	set_variable = {
		var = PCB_tobacco_profit
		value = PCB_tobacco_income
	}
	
	subtract_from_variable = {
		var = PCB_tobacco_profit
		value = PCB_tobacco_cost
	}

	############### Domestic Goods Total ###############

		##### Costs #####

# Calculation: costs coffee + costs sugar + costs cocoa + costs tobacco = total costs

	set_variable = {
		var = PCB_domestic_total_cost
		value = PCB_coffee_cost
	}

	add_to_variable = {
		var = PCB_domestic_total_cost
		value = PCB_sugar_cost
	}

	add_to_variable = {
		var = PCB_domestic_total_cost
		value = PCB_cocoa_cost
	}

	add_to_variable = {
		var = PCB_domestic_total_cost
		value = PCB_tobacco_cost
	}

		##### Income #####

# Calculation: income coffee + income sugar + income cocoa + income tobacco = total income

	set_variable = {
		var = PCB_domestic_total_income
		value = PCB_coffee_income
	}

	add_to_variable = {
		var = PCB_domestic_total_income
		value = PCB_sugar_income
	}

	add_to_variable = {
		var = PCB_domestic_total_income
		value = PCB_cocoa_income
	}

	add_to_variable = {
		var = PCB_domestic_total_income
		value = PCB_tobacco_income
	}

		##### Profit #####

# Calculation: total income - total costs = total profit

	set_variable = {
		var = PCB_domestic_total_profit
		value = PCB_domestic_total_income
	}

	subtract_from_variable = {
		var = PCB_domestic_total_profit
		value = PCB_domestic_total_cost
	}

######################### OTHER FACTORS #########################

	########## Economy Laws ##########
		
		##### Setting Variables #####

	set_variable = {
		var = PCB_economy_income
		value = PCB_domestic_total_profit
	}

	set_variable = {
		var = PCB_economy_law_cost
		value = PCB_domestic_total_profit
	}

		##### Different Economy Laws #####

	if = {
		limit = {
			has_idea = civilian_economy
			}
		multiply_variable = {
			var = PCB_economy_law_income
			value = 1.1
		}
	}

	if = {
		limit = {
			has_idea = low_economic_mobilisation
			}
		multiply_variable = {
			var = PCB_economy_law_cost
			value = 0.9
		}
	}

	if = {
		limit = {
			has_idea = partial_economic_mobilisation
			}
		multiply_variable = {
			var = PCB_economy_law_cost
			value = 0.85
		}
	}

	if = {
		limit = {
			has_idea = war_economy
			}
		multiply_variable = {
			var = PCB_economy_law_cost
			value = 0.75
		}
	}

	if = {
		limit = {
			has_idea = tot_economic_mobilisation
			}
		multiply_variable = {
			var = PCB_economy_law_cost
			value = 0.6
		}
	}

		##### Adding Economy Law Income/Costs to total 'Other Factors' #####

	set_variable = {
		var = PCB_total_income_other
		value = PCB_economy_income
	}

	set_variable = {
		var = PCB_total_cost_other
		value = PCB_economy_law_cost
	}

	########## Total-Total 'Other Factors' Profit ##########
	
	set_variable = {
		var = PCB_total_profit_other
		value = PCB_total_income_other
	}

	subtract_from_variable = {
		var = PCB_total_profit_other
		value = PCB_total_cost_other
	}

######################### TOTAL INCOME, COSTS, AND PROFIT #########################

	##### Total Income #####

	set_variable = {
		var = PCB_total_income
		value = PCB_domestic_total_income
	}

	add_to_variable = {
		var = PCB_total_income
		value = PCB_total_income_other
	}

	##### Total Cost #####

	set_variable = {
		var = PCB_total_cost
		value = PCB_domestic_total_cost
	}

	add_to_variable = {
		var = PCB_total_cost
		value = PCB_total_cost_other
	}

	##### Total Profit #####

	set_variable = {
		var = PCB_total_profit
		value = PCB_total_income
	}

	subtract_from_variable = {
		var = PCB_total_profit
		value = PCB_total_cost
	}

}

############################## PCB DEMAND REFRESH EFFECT ##############################

PCB_demand_refresh_scripted_effect = {
	
		set_variable_to_random = {
		var = PCB_coffee_demand
		min = 1
		max = 50
		integer = yes
	}
	set_variable_to_random = {
		var = PCB_sugar_demand
		min = 1
		max = 50
		integer = yes
	}
	set_variable_to_random = {
		var = PCB_cocoa_demand
		min = 1
		max = 50
		integer = yes
	}
		set_variable_to_random = {
		var = PCB_tobacco_demand
		min = 1
		max = 50
		integer = yes
		}
}