@QUEST_RESEARCH_PP_COST = 30
@QUEST_RESEARCH_TIME_DAYS = 60

CES_daring_do_adventures_category = {
	CES_quest_mission_start_ping = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_start_ping"
			CES_quest_start_timout_effect = yes
		}
	}
	CES_quest_mission_continue_1_ping = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_continue_1_ping"
			CES_quest_continue_1_timout_effect = yes
		}
	}
	CES_quest_mission_continue_2_ping = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_continue_2_ping"
			CES_quest_continue_2_timout_effect = yes
		}
	}
	CES_quest_mission_end_ping = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_end_ping"
			CES_quest_end_timout_effect = yes
		}
	}
	CES_quest_mission_start_pong = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_start_pong"
			CES_quest_start_timout_effect = yes
		}
	}
	CES_quest_mission_continue_1_pong = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_continue_1_pong"
			CES_quest_continue_1_timout_effect = yes
		}
	}
	CES_quest_mission_continue_2_pong = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_continue_2_pong"
			CES_quest_continue_2_timout_effect = yes
		}
	}
	CES_quest_mission_end_pong = {
		icon = GFX_decision_CES_quest_mission
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		days_mission_timeout = CES_adventure_step_time_days
		is_good = yes
		selectable_mission = no
		on_map_mode = decision_view_only
		fixed_random_seed = no
		fire_only_once = yes
		days_remove = 0
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_quest_mission_end_pong"
			CES_quest_end_timout_effect = yes
		}
	}

	CES_prepare_adventure_the_horn_of_the_abada = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_horn_of_the_abada"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_horn_of_the_abada"
			if = {
				limit = { is_ai = yes }

				f_CES_add_artifact_the_horns_of_the_abada = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.0
				set_variable = { CES_current_quest_id = 1 }
			}
		}
	}

	CES_prepare_adventure_the_ruby = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_ruby"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_ruby"
			if = {
				limit = { is_ai = yes }

				f_CES_add_piece_ruby = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.10
				set_variable = { CES_current_quest_id = 5 }
			}
		}
	}

	CES_prepare_adventure_the_emerald = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		visible = {
			tr_CES_has_piece_ruby= yes
		}
		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_emerald"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_emerald"
			if = {
				limit = { is_ai = yes }

				f_CES_add_piece_emerald = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.20
				set_variable = { CES_current_quest_id = 6 }
			}
		}
	}

	CES_prepare_adventure_the_sapphire = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		visible = {
			tr_CES_has_piece_emerald = yes
		}
		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_sapphire"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_sapphire"
			if = {
				limit = { is_ai = yes }

				f_CES_clear_pieces = yes
				f_CES_add_artifact_the_pieces_of_powers = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.30
				set_variable = { CES_current_quest_id = 7 }
			}
		}
	}

	CES_prepare_adventure_the_rings_of_scorchero = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_rings_of_scorchero"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_rings_of_scorchero"
			if = {
				limit = { is_ai = yes }

				f_CES_add_artifact_the_rings_of_scorcheros = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.40
				set_variable = { CES_current_quest_id = 2 }
			}
		}
	}

	CES_prepare_adventure_the_key_of_unfettered_entrance = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		visible = {
			tr_CES_has_the_rings = yes
		}
		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_key_of_unfettered_entrance"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_key_of_unfettered_entrance"
			if = {
				limit = { is_ai = yes }

				f_CES_add_artifact_the_key_of_unfettered = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.50
				set_variable = { CES_current_quest_id = 3 }
			}
		}
	}

	CES_prepare_adventure_the_silver_shawl_of_shadows = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		visible = {
			tr_CES_has_the_horn = yes
		}
		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_silver_shawl_of_shadows"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_silver_shawl_of_shadows"
			if = {
				limit = { is_ai = yes }

				f_CES_add_artifact_the_silver_shawl_of_shadows = yes
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.60
				set_variable = { CES_current_quest_id = 4 }
			}
		}
	}

	CES_prepare_adventure_the_truth_talisman_of_tonatiuh = {
		icon = GFX_decision_CES_quest_mission

		days_remove = @QUEST_RESEARCH_TIME_DAYS
		fire_only_once = yes
		cost = @QUEST_RESEARCH_PP_COST

		ai_will_do = {
			base = 100
		}

		visible = {
			tr_CES_has_the_silver_shawl = yes
			tr_CES_has_the_key = yes
			tr_CES_has_pieces_of_power = yes
		}
		available = {
			NOT = { has_country_flag = CES_daring_do_is_busy_adventuring }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_prepare_adventure_the_truth_talisman_of_tonatiuh"
			set_country_flag = CES_daring_do_is_busy_adventuring
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_prepare_adventure_the_truth_talisman_of_tonatiuh"
			if = {
				limit = { is_ai = yes }

				f_CES_add_artifact_the_truth_talisman_of_tonatiuh = yes
				add_stability = 0.05
				clr_country_flag = CES_daring_do_is_busy_adventuring

			} else = {
				country_event = daring_adventure.70
				set_variable = { CES_current_quest_id = 8 }
			}
		}
	}

	# AI decision
	# The AI doesn't interact with the museum GUI, but instead use these decisions
	CES_ai_activate_artifact_truth_talisman = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 0 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_truth_talisman"
			set_temp_variable = { i_artifact_id = 0 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
	CES_ai_activate_artifact_shawl = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 1 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_shawl"
			set_temp_variable = { i_artifact_id = 1 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
	CES_ai_activate_artifact_piece_of_powers = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 2 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_piece_of_powers"
			set_temp_variable = { i_artifact_id = 2 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
	CES_ai_activate_artifact_horn_of_abada = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 3 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_horn_of_abada"
			set_temp_variable = { i_artifact_id = 3 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
	CES_ai_activate_artifact_rings_of_scorcheros = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 4 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_rings_of_scorcheros"
			set_temp_variable = { i_artifact_id = 4 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
	CES_ai_activate_artifact_key_of_entrance = {
		ai_will_do = {
			base = 100
		}

		visible = {
			is_ai = yes
			set_temp_variable = { t_artifact_id = 5 }
			tr_CES_artifact_ai_activation_condition = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ai_activate_artifact_key_of_entrance"
			set_temp_variable = { i_artifact_id = 5 }
			f_CES_activate_artifact = yes
			set_variable = { CES_current_artifact_effect_index = i_artifact_id }
		}
	}
}

CES_resistance_category = {
	CES_form_equestria_resistance = {
		icon = celestia
		ai_will_do = {
			factor = 160
		}
		days_remove = 30
		allowed = {
			original_tag = CES
		}
		available = {
			3 = {
				is_controlled_by_ROOT_or_ally = yes
			}
		}
		cancel_trigger = {
			3 = {
				is_controlled_by_ROOT_or_ally = no
			}
		}
		visible = {
			NOT = {
				has_country_flag = CES_formed_equestria
			}
		}
		cost = 100
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_form_equestria_resistance"
			hidden_effect = {
				if = {
					limit = {
						3 = { is_owned_by = CES }
					}
					EQS = {
						save_event_target_as = CES_old_canterlot_controller
					}
				}
				else = {
					var:3.owner = {
						save_event_target_as = CES_old_canterlot_controller
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_form_equestria_resistance"
			set_country_flag = CES_formed_equestria
			set_cosmetic_tag = CES_reformed_equestria
			if = {
				limit = {
					3 = {
						is_controlled_by_ROOT_or_ally = yes
						NOT = {
							is_controlled_by = CES
						}
					}
				}
				3 = {
					set_state_controller_to = CES
				}
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = EQS
						is_in_array = {
							state_original_cores = EQS
						}
					}
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				if = {
					limit = {
						NOT = { 3 = { is_owned_by = CES } }
					}
					var:3.owner = {
						save_event_target_as = CES_old_canterlot_controller
					}
				}
				country_event = {
					id = daring_resistance.25
					days = 30
				}
			}
			country_event = daring_resistance.18
		}
	}

	CES_investigate_manehattan_bombing = {
		icon = generic_intelligence_operation
		fire_only_once = yes
		ai_will_do = {
			factor = 160
		}
		allowed = {
			original_tag = CES
		}
		cost = 50
		days_remove = 30
		highlight_states = {
			highlight_state_targets = {
				state = 75
			}
		}
		available = {
			controls_state = 75
		}
		visible = {
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_investigate_manehattan_bombing"
			country_event = daring_resistance.22
		}
	}

	CES_investigate_the_chiropterrans = {
		icon = GFX_decision_generic_merge_plant_tank
		available = {
			has_country_flag = CES_resistance_war_against_BAT
		}
		visible = {
			has_country_flag = CES_resistance_war_against_BAT
		}
		allowed = {
			original_tag = CES
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		targets_dynamic = yes
		target_trigger = {
			FROM = { owns_state = 712 }
			NOT = {
				is_ally_with = ROOT
			}
		}
		target_root_trigger = {
			has_country_flag = CES_resistance_war_against_BAT
			owns_state = 3
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_investigate_the_chiropterrans target: [From.GetName]"
			if = {
				limit = {
					712 = {
						is_owned_by = BAT
					}
					BAT = {
						is_subject = no
						NOT = {
							has_government = democratic
							has_government = communism
						}
					}
				}
				country_event = daring_resistance.32
			}
			else = {
				country_event = daring_resistance.33
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_resistance_war_against_chiropterra = {
		icon = GFX_decision_generic_merge_plant_tank
		available = {
			has_country_flag = CES_resistance_war_against_BAT_available
			BAT = {
				is_subject = no
				NOT = {
					has_government = democratic
					has_government = communism
				}
			}
		}
		allowed = {
			original_tag = CES
		}
		visible = {
			has_country_flag = CES_resistance_war_against_BAT_available
			BAT = {
				is_subject = no
				NOT = {
					has_government = democratic
					has_government = communism
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 14
		war_with_target_on_remove = yes
		targets = { BAT }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = BAT }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_resistance_war_against_chiropterra target: [From.GetName]"
			declare_war_on = {
				target = BAT
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_resistance_release_chiropterra = {
		icon = soljudge
		available = {
		    is_subject = no
			has_country_flag = CES_resistance_war_against_BAT_available
			BAT = {
			    exists = no
			}
			custom_trigger_tooltip = {
				tooltip = SOL_BAT_decision_req_tt
				all_of_scopes = {
					array = BAT.core_states
					owner = {
						OR = {
							tag = CES
							is_subject_of = CES
						}
						PREV = { is_fully_controlled_by = PREV }
					}
				}
			}
		}

		allowed = {
			original_tag = CES
		}

		days_remove = 14

		fire_only_once = yes

        ai_will_do = {
			factor = 100
        }

		visible = {
			has_country_flag = CES_resistance_war_against_BAT_available
		}
		remove_effect = {
			custom_effect_tooltip = CES_resistance_release_chiropterra_tt
			country_event = daring_resistance.34
		}
    }

	CES_resistance_main_defence_line_north_west = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = CES
		}
		available = {
			controls_state = 35
		}
		visible = {
			has_country_flag = CES_unlocked_fort_supply_decisions
			35 = {
				NOT = { has_state_flag = CES_main_defences_built }
			}
		}

		ai_will_do = {
			factor = 50
		}

		cost = 25
		days_remove = 60
		highlight_states = {
			highlight_state_targets = {
				state = 35
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_resistance_release_chiropterra"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_resistance_release_chiropterra"
			35 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 6531
						id = 3641
						id = 704
						id = 3700
						id = 9620
						id = 9587
					}
				}
			}
			hidden_effect = {
				35 = {
				    set_state_flag = CES_main_defences_built
				}
			}
		}
	}

	CES_resistance_main_defence_line_north = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = CES
		}
		available = {
			controls_state = 27
		}
		visible = {
			has_country_flag = CES_unlocked_fort_supply_decisions
			27 = {
				NOT = { has_state_flag = CES_main_defences_built }
			}
		}

		ai_will_do = {
			factor = 50
		}

		cost = 25
		days_remove = 60
		highlight_states = {
			highlight_state_targets = {
				state = 27
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_resistance_main_defence_line_north"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_resistance_main_defence_line_north"
			28 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 963
						id = 3958
					}
				}
			}
			27 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 661
						id = 12098
						id = 9784
						id = 6972
					}
				}
			}
			37 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 6683
						id = 7546
					}
				}
			}
			hidden_effect = {
				27 = {
				    set_state_flag = CES_main_defences_built
				}
			}
		}
	}

	CES_resistance_main_defence_line_west = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = CES
		}
		available = {
			controls_state = 50
		}
		visible = {
			has_country_flag = CES_unlocked_fort_supply_decisions
			50 = {
				NOT = { has_state_flag = CES_main_defences_built }
			}
		}

		ai_will_do = {
			factor = 50
		}

		cost = 25
		days_remove = 60
		highlight_states = {
			highlight_state_targets = {
				state = 50
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_resistance_main_defence_line_west"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_resistance_main_defence_line_west"
			50 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = {
						id = 9572
						id = 9557
						id = 982
					}
				}
			}
			81 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 11572
				}
			}
			hidden_effect = {
				50 = {
				    set_state_flag = CES_main_defences_built
				}
			}
		}
	}

	CES_resistance_build_supply_road_1 = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = CES
		}
		available = {
			controls_state = 35
			controls_state = 81
		}
		visible = {
			has_country_flag = CES_unlocked_fort_supply_decisions
			35 = {
				NOT = { has_state_flag = SE_railroad_built }
			}
		}

		ai_will_do = {
			factor = 50
		}

		cost = 10
		days_remove = 30
		highlight_states = {
			highlight_provinces = { 11601 3650 817 9599 6970 3641 1255 11627 }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_resistance_build_supply_road_1"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_resistance_build_supply_road_1"
			build_railway = {
				level = 1
				path = { 11601 3650 817 9599 6970 }
			}
			build_railway = {
				level = 1
				path = { 11601 3641 1255 11627 }
				build_only_on_allied = no
			}
			add_equipment_to_stockpile = {
				type = train_equipment_1
				amount = 2
			}
			if = {
				limit = {
					35 = {
						NOT = { has_state_flag = SE_railroad_built }
					}
				}
				35 = {
					add_building_construction = {
						level = 1
						type = supply_node
						instant_build = yes
						province = 11601
					}
				}
			}
			hidden_effect = {
				35 = {
				    set_state_flag = SE_railroad_built
				}
			}
		}
	}
}

foreign_politics = {
	CES_ask_confederacy = {
		icon = griffon
		visible = {
			has_country_flag = CES_unlocked_diplomacy_resistance
			NOT = {
				is_in_faction_with = SCS
			}
			SCS = {
				exists = yes
				NOT = {
					has_government = fascism
				}
			}
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ask_confederacy"
			SCS = {
				country_event = daring_resistance.12
			}
		}
		ai_will_do = {
			factor = 80
		}
	}

	CES_ask_los_pegasus = {
		icon = griffon
		visible = {
			has_country_flag = CES_unlocked_diplomacy_resistance
			NOT = {
				is_in_faction_with = LSP
			}
			LSP = {
				exists = yes
				NOT = {
					has_government = fascism
					AND = {
						has_government = communism
						is_in_faction_with = STG
					}
				}
			}
		}
		cost = 0
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_ask_los_pegasus"
			LSP = {
				country_event = daring_resistance.12
			}
		}
		ai_will_do = {
			factor = 80
		}
	}
	CES_take_the_meridiennes = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_solar_invasion
			MER = {
				is_subject = no
				is_in_faction = no
			}
		}
		visible = {
			has_country_flag = CES_unlocked_solar_invasion
			MER = {
				is_subject = no
				is_in_faction = no
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 20
		war_with_target_on_remove = yes
		targets = { MER }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = MER }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_take_the_meridiennes target: [From.GetName]"
			declare_war_on = {
				target = MER
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	CES_attack_puerto_caballo = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_solar_invasion
			PCB = {
				is_subject = no
				is_in_faction = no
			}
		}
		visible = {
			has_country_flag = CES_unlocked_solar_invasion
			PCB = {
				is_subject = no
				is_in_faction = no
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = 25
		war_with_target_on_remove = yes
		targets = { PCB }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = PCB }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_attack_puerto_caballo target: [From.GetName]"
			declare_war_on = {
				target = PCB
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_attack_vanhoover = {
		icon = GFX_decision_soljudge
		available = {
			VAN = {
				is_subject = no
				NOT = {
					is_ally_with = CES
				}
				has_government = communism
			}
		}
		visible = {
			has_country_flag = CES_resistance_path
			has_completed_focus = CES_resistance_10_3
			is_subject = no
			VAN = {
				NOT = {
					is_ally_with = CES
				}
				exists = yes
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = 25
		war_with_target_on_remove = yes
		targets = { VAN }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = VAN }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_attack_vanhoover target: [From.GetName]"
			declare_war_on = {
				target = VAN
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 150
		}
	}

	CES_attack_stalliongrad = {
		icon = GFX_decision_soljudge
		available = {
			STG = {
				is_subject = no
				NOT = {
					is_in_faction_with = CES
				}
				has_government = communism
			}
			if = {
				limit = {
					NOT = {
						STG = {
							controls_state = 3
						}
					}
				}
				controls_state = 3
			}
		}
		visible = {
			has_country_flag = CES_resistance_path
			OR = {
				has_country_flag = CES_dealing_with_aggressive_stalliongrad
				has_completed_focus = CES_resistance_10_3
			}
			is_subject = no
			STG = {
				OR = {
					NOT = {
						is_in_faction_with = CES
						has_completed_focus = vasya_leader
						has_war_with = ROOT
					}
					AND = {
						controls_state = 3
						is_in_faction_with = CES
					}
				}
				exists = yes
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = 25
		war_with_target_on_remove = yes
		targets = { STG }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = STG }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_attack_stalliongrad target: [From.GetName]"
			declare_war_on = {
				target = STG
				type = annex_everything
			}
			every_state = {
				limit = {
					is_core_of = STG
				}
				add_claim_by = CES
			}
		}
		ai_will_do = {
			factor = 150
		}
	}

	CES_core_stalliongrad = {
		icon = GFX_decision_generic_merge_plant_tank
		available = {
			any_controlled_state = {
				is_core_of = STG
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		visible = {
			has_country_flag = CES_resistance_path
			has_completed_focus = CES_resistance_10_3
			is_subject = no
		}
		cost = 30
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_core_stalliongrad"
			STG = { add_to_ROOT_potential_original_cores = yes }
		}
		ai_will_do = {
			factor = 150
		}
	}

	CES_attack_sombra = {
		icon = sombra_return
		cost = 50
		ai_will_do = {
			factor = 150
		}
		available = {
			CRY = {
				has_government = fascism
				has_country_leader = { character = CRY_sombra ruling_only = yes }
				has_civil_war = no
			}
			if = {
				limit = {
					NOT = {
						CRY = {
							controls_state = 3
						}
					}
				}
				controls_state = 3
			}
		}
		fire_only_once = yes
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = {
			FROM = { original_tag = CRY }
		}

		war_with_on_remove = CRY
		target_root_trigger = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
		}
		visible = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
			has_country_flag = CES_resistance_path
			has_completed_focus = CES_resistance_10_3
			FROM = {
				original_tag = CRY
				exists = yes
				has_government = fascism
				has_country_leader = { character = CRY_sombra ruling_only = yes }
				has_civil_war = no
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		cancel_trigger = {
			FROM = {
				has_war_with = ROOT
			}
		}
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_attack_sombra target: [From.GetName]"
			declare_war_on = {
				target = CRY
				type = puppet_wargoal_focus
			}
		}
	}

	CES_the_dragon_isles = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_solar_invasion
			DRG = {
				is_subject = no
			}
		}
		visible = {
			has_country_flag = CES_unlocked_solar_invasion
			DRG = {
				is_subject = no
				is_in_faction = no
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		war_with_target_on_remove = yes
		targets = { DRG }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = DRG }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_the_dragon_isles target: [From.GetName]"
			declare_war_on = {
				target = DRG
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_the_chiropterrans_independent = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				is_subject = no
			}
		}
		visible = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				is_subject = no
				exists = yes
				NOT = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		war_with_target_on_remove = yes
		targets = { BAT }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = BAT }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_the_chiropterrans_independent target: [From.GetName]"
			declare_war_on = {
				target = BAT
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_the_chiropterrans_subject = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				exists = yes
				is_subject = yes
			}
		}
		visible = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				exists = yes
				is_subject = yes
				NOT = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		war_with_target_on_remove = yes
		targets = { BAT }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = BAT }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_the_chiropterrans_subject target: [From.GetName]"
			BAT = {
				overlord = {
					country_event = daring_solar.7
				}
			}
			custom_effect_tooltip = CES_the_chiropterrans_subject_tt
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_the_chiropterrans_annexed = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				exists = no
			}
		}
		visible = {
			has_country_flag = CES_unlocked_chiropterran_crusade
			BAT = {
				exists = no
			}
			var:712.owner = {
				NOT = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		war_with_target_on_remove = yes
		targets_dynamic = yes
		targets = { 712.owner }
		target_trigger = {
			FROM = { owns_state = 712 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_the_chiropterrans_annexed target: [From.GetName]"
			var:712.owner = {
				country_event = daring_solar.7
			}
			custom_effect_tooltip = CES_the_chiropterrans_annexed_tt
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_the_chiropterrans_late_war = {
		icon = GFX_decision_soljudge
		available = {
			has_country_flag = CES_hold_off_on_chiropterran_invasion
		}
		visible = {
			has_country_flag = CES_hold_off_on_chiropterran_invasion
			var:712.owner = {
				NOT = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 35
		war_with_target_on_remove = yes
		targets_dynamic = yes
		target_trigger = {
			FROM = { owns_state = 712 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_the_chiropterrans_late_war target: [From.GetName]"
			declare_war_on = {
				target = 712.owner
				type = annex_everything
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}
CES_shadow_path_or_not_category = {
	CES_shadow_timer_decision = {
		icon = GFX_decision_CES_quest_mission
		allowed = {
			always = no
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = CES_has_stable_government_tt
				OR = {
					has_country_flag = CES_loyalist_path
					has_country_flag = CES_resistance_path
					has_country_flag = CES_solar_path
				}
			}
		}
		visible = {
			has_country_flag = CES_initiate_solar_path
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = CES_daring_do_captured_tt
				has_country_flag = CES_daring_do_captured
			}
		}
		fire_only_once = yes
		days_mission_timeout = 110

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_shadow_timer_decision"
			custom_effect_tooltip = CES_shadow_timer_decision_tt
			hidden_effect = {
				country_event = daring_shadow.5
			}
		}

		ai_will_do = {
			factor = 100
		}
	}

	CES_look_for_daring_do = {
		icon = GFX_decision_CES_quest_mission
		fire_only_once = yes
		ai_will_do = {
			factor = 1000
		}
		allowed = {
			original_tag = CES
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = CES_disaster_at_parliament_tt
				has_country_flag = CES_parliament_burned
			}
		}
		visible = {
			custom_trigger_tooltip = {
				tooltip = CES_look_for_daring_do_visible_tt
				has_country_flag = CES_initiate_solar_path
				NOT = {
					has_country_flag = CES_shadow_path
				}
			}
		}
		cancel_if_not_visible = yes
		days_remove = 3
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_look_for_daring_do"
			custom_effect_tooltip = CES_look_for_daring_do_completed_tt
			country_event = daring_solar.15
		}
	}
}

CES_shadow_category = {

	CES_new_shadow_units = {
		icon = GFX_decision_switch_form
		activation = {
			has_country_flag = CES_shadow_path
			has_country_flag = CES_shadow_units_spawn
		}

		available = {
			always = no
		}

		visible = {
			has_country_flag = CES_shadow_units_spawn
			hidden_trigger = {
				NOT = { has_country_flag = CES_shadow_path_ended }
			}
		}

		is_good = no

		days_mission_timeout = CES_shadow_units_time_var
		days_re_enable = 0

		fire_only_once = no

		cancel_if_not_visible = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_new_shadow_units"
			hidden_effect = {
				activate_mission = CES_new_shadow_units
			}
			if = {
				limit = { has_country_flag = CES_weak_shadow_units }
				random_owned_controlled_state = {
					limit = {
						impassable = no
						is_demilitarized_zone = no
						check_variable = {
							state_land_connection_index = 3.state_land_connection_index
						}
						NOT = {
							AND = {
								OR = {
									state = 83
									state = 221
								}
								is_capital = no
							}
						}
						OR = {
							is_capital = yes
							is_fully_controlled_by = ROOT
						}
					}
					create_unit = {
						division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = CES
					}
					if = {
						limit = {
							ROOT = {
								is_ai = yes
							}
						}
						create_unit = {
							division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = CES
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						impassable = no
						is_demilitarized_zone = no
						check_variable = {
							state_land_connection_index = 3.state_land_connection_index
						}
						NOT = {
							AND = {
								OR = {
									state = 83
									state = 221
								}
								is_capital = no
							}
						}
						OR = {
							is_capital = yes
							is_fully_controlled_by = ROOT
						}
					}
					create_unit = {
						division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = CES
					}
					if = {
						limit = {
							ROOT = {
								is_ai = yes
							}
						}
						create_unit = {
							division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = CES
						}
						create_unit = {
							division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = CES
						}
					}
				}
			}
			else = {
				random_owned_controlled_state = {
					limit = {
						impassable = no
						is_demilitarized_zone = no
						check_variable = {
							state_land_connection_index = 3.state_land_connection_index
						}
						NOT = {
							AND = {
								OR = {
									state = 83
									state = 221
								}
								is_capital = no
							}
						}
						OR = {
							is_capital = yes
							is_fully_controlled_by = ROOT
						}
					}
					create_unit = {
						division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow\" start_experience_factor = 1 start_equipment_factor = 1"
						owner = CES
					}
					if = {
						limit = {
							ROOT = {
								is_ai = yes
							}
						}
						create_unit = {
							division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = CES
						}
						create_unit = {
							division = "name = \"Pony of Shadows\" division_template = \"Ponies of Shadow Garrison\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = CES
						}
					}
				}
			}
		}
	}

	CES_shadow_units_toggle = {
		icon = GFX_decision_switch_form

		available = {

		}

		allowed = {
			original_tag = CES
		}

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_country_flag = CES_shadow_units_spawn
			hidden_trigger = {
				NOT = { has_country_flag = CES_shadow_path_ended }
			}
		}

		cancel_if_not_visible = yes

		cost = 10

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_shadow_units_toggle"
			if = {
				limit = { has_country_flag = CES_weak_shadow_units }
				clr_country_flag = CES_weak_shadow_units
				custom_effect_tooltip = CES_strong_shadow_units_tt
			}
			else = {
				set_country_flag = CES_weak_shadow_units
				custom_effect_tooltip = CES_weak_shadow_units_tt
			}

		}
	}

	CES_new_shadow_reinforcements = {
		icon = GFX_decision_switch_form
		activation = {
			has_country_flag = CES_shadow_path
			has_country_flag = CES_shadow_equipment_spawn
		}

		available = {
			always = no
		}

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_country_flag = CES_shadow_equipment_spawn
			hidden_trigger = {
				NOT = { has_country_flag = CES_shadow_path_ended }
			}
		}

		is_good = no

		days_mission_timeout = 7

		days_re_enable = 0

		fire_only_once = no

		cancel_if_not_visible = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_new_shadow_reinforcements"
			hidden_effect = {
				activate_mission = CES_new_shadow_reinforcements
			}
			add_manpower = 1000
			if = {
				limit = { has_country_flag = CES_double_equipment }
				add_equipment_to_stockpile = {
					type = ponies_of_shadow_equipment_0
					amount = 100
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = ponies_of_shadow_equipment_0
					amount = 50
				}
			}
		}
	}

	CES_shadow_declaration = {
		icon = GFX_decision_switch_form

		allowed = {
		    original_tag = CES
		}

		available = {
			always = no
		}

		is_good = no

		days_mission_timeout = 30

		on_map_mode = map_and_decisions_view

		fire_only_once = yes

		war_with_target_on_remove = yes

		target_root_trigger = {
			ROOT = {
				has_country_flag = CES_shadow_path
				has_country_flag = CES_shadow_neighbours_intervening
			}
		}
		target_array = neighbors
		targets_dynamic = yes
		target_trigger = { #will check only neighbors
			FROM = {
				is_neighbor_of = ROOT #can be replaced with always = yes, but leave for 1.6.1 compatibility
				NOT = {
					OR = {
						has_war_with = ROOT
						AND = {
							tag = CRY
							has_government = fascism
							is_subject = no
							NOT = { ROOT = { has_country_flag = CES_shadow_refused_sombra_annexation } }
						}
						is_in_faction_with = ROOT
					}
				}
				OR = {
					is_on_equestrian_continent = yes
					any_controlled_state = {
						check_variable = {
							state_land_connection_index = 3.state_land_connection_index
						}
					}
					ROOT = {
						has_country_flag = CES_shadow_path_completed
					}
				}

			}
		}

		cancel_trigger = {
			FROM = {
				custom_trigger_tooltip = {
					tooltip = CES_shadow_declaration_tt
					OR = {
						has_war_with = ROOT
						AND = {
							tag = CRY
							has_government = fascism
							is_subject = no
							NOT = { ROOT = { has_country_flag = CES_shadow_refused_sombra_annexation } }
						}
						is_in_faction_with = ROOT
						is_on_equestrian_continent = no
						NOT = {
							any_controlled_state = {
								check_variable = {
									state_land_connection_index = 3.state_land_connection_index
								}
							}
						}
					}
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_shadow_declaration target: [From.GetName]"
			ROOT = {
				hidden_effect = {
					create_wargoal = {
						type = annex_everything
						target = FROM
					}
				}
				declare_war_on = { target = FROM type = annex_everything }
				if = {
					limit = { has_completed_focus = CES_shadow_cw_8_2 }
					FROM = {
						add_ideas = CES_shadow_enemy_debuff_idea
					}
				}
			}
		}
	}

	CES_shadow_join_crystal_empire = {
		icon = GFX_decision_switch_form

		allowed = {
		    original_tag = CES
		}

		available = {
			always = no
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
					NOT = {
						AND = {
							tag = CRY
							has_government = fascism
							is_subject = no
							NOT = { ROOT = { has_country_flag = CES_shadow_refused_sombra_annexation } }
						}
					}
				}
			}
		}

		is_good = no

		fire_only_once = yes

		days_mission_timeout = 30

		target_root_trigger = {
			ROOT = {
				has_country_flag = CES_shadow_path
				has_country_flag = CES_shadow_neighbours_intervening
				NOT = { has_country_flag = CES_shadow_refused_sombra_annexation }
			}
		}
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = { #will check only neighbors
			FROM = {
				is_neighbor_of = ROOT #can be replaced with always = yes, but leave for 1.6.1 compatibility
				AND = {
					tag = CRY
					has_government = fascism
					is_subject = no
					NOT = { ROOT = { has_country_flag = CES_shadow_refused_sombra_annexation } }
				}
				NOT = {
					OR = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_shadow_join_crystal_empire target: [From.GetName]"
			ROOT = {
				country_event = daring_shadow.8
			}
		}
	}

	CES_grant_daring_do_wish = {
		icon = GFX_decision_grant_daring_do_wish

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_shadow_cw_6_1
		}

		fire_only_once = yes
		available = {
			has_completed_focus = CES_shadow_cw_13_2
			custom_trigger_tooltip = {
				tooltip = CES_grant_daring_do_wish_enshrouded_tt
				NOT = {
					any_owned_state = {
						check_variable = {
							state_land_connection_index = 3.state_land_connection_index
						}
						impassable = no
						NOT = {
							has_state_flag = CES_enshrouded_state_flag
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = CES_grant_daring_do_wish_enshrouded_tt_2
				NOT = {
					any_enemy_is_on_the_same_landmass = yes
					any_neighbor_country = {
						NOT = {
							OR = {
								has_war_with = ROOT
								AND = {
									tag = CRY
									has_government = fascism
									is_subject = no
									NOT = { ROOT = { has_country_flag = CES_shadow_refused_sombra_annexation } }
								}
								is_in_faction_with = ROOT
							}
						}
						is_on_equestrian_continent = yes
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_grant_daring_do_wish"
			country_event = daring_shadow.10
			custom_effect_tooltip = CES_grant_daring_do_wish_tt
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_cement_grip_on_equus = {
		icon = GFX_decision_switch_form

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_shadow_cw_6_1
			hidden_trigger = {
				NOT = {
					has_country_flag = CES_shadow_path_completed
				}
			}
		}

		available = {
			has_completed_focus = CES_shadow_cw_13_2
			custom_trigger_tooltip = {
				tooltip = CES_cement_grip_on_equus_tt
				any_owned_state = {
					check_variable = {
						state_land_connection_index = 3.state_land_connection_index
					}
					impassable = no
					NOT = {
						has_state_flag = CES_enshrouded_state_flag
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = CES_not_cemented_control_everywhere_tt
				any_controlled_state = {
					is_fully_controlled_by = ROOT
					NOT = {
						has_state_flag = CES_enshrouded_state_flag
					}
				}
			}
		}

		cost = 200

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_cement_grip_on_equus"
			custom_effect_tooltip = CES_cement_grip_on_equus_tt_2
			every_controlled_state = {
				limit = {
					is_fully_controlled_by = ROOT
				}
				if = {
					limit = { NOT = { is_owned_by = ROOT } }
					set_state_owner_to = ROOT
				}
				add_dynamic_modifier = {
					modifier = CES_enshrouded_area_modifier
				}
				set_temp_variable = { population_percentage_change = -0.5 }
				population_change_custom = yes
				set_state_flag = CES_enshrouded_state_flag
				ROOT = {
					add_manpower = 1000
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_enshroud_state_decision = {
		icon = GFX_decision_enshrouded_area

		on_map_mode = map_only

		state_target = any_controlled_state

		target_array = controlled_states

		fire_only_once = yes

		target_trigger = {
			FROM = {
				any_neighbor_state = {
					has_state_flag = CES_enshrouded_state_flag
				}
				NOT = {
					has_state_flag = CES_enshrouded_state_flag
				}
			}
		}



		allowed = {
		    original_tag = CES
		}

		target_root_trigger = {
			ROOT = {
				has_country_flag = CES_unlock_shadow_mechanic
				has_country_flag = CES_unlock_manual_shadow_mechanic
			}
		}

		visible = {
			FROM = {
				is_controlled_by = ROOT
				any_neighbor_state = {
					has_state_flag = CES_enshrouded_state_flag
				}
				NOT = {
					has_state_flag = CES_enshrouded_state_flag
				}
			}
		}

		days_remove = 7
		cost = CES_enshroud_state_var

		available = {
			FROM = {
				is_fully_controlled_by = ROOT
			}
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_state_flag = CES_enshrouded_state_flag
					NOT = {
						is_controlled_by = ROOT
					}
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_enshroud_state_decision target: [From.GetName]"
			FROM = {
				if = {
					limit = { NOT = { is_owned_by = ROOT } }
					set_state_owner_to = ROOT
				}
                add_dynamic_modifier = {
					modifier = CES_enshrouded_area_modifier
				}
				set_temp_variable = { population_percentage_change = -0.5 }
				population_change_custom = yes
				set_state_flag = CES_enshrouded_state_flag
				if = {
					limit = {
						is_coastal = yes
					}
					ROOT = {
						add_equipment_to_stockpile = {
							type = convoy
							amount = 2
						}
					}
				}
            }
			ROOT = {
				add_manpower = 1000
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	CES_enshroud_state_decision_automatic = {
		icon = GFX_decision_enshrouded_area

		on_map_mode = map_only

		state_target = any_controlled_state

		target_array = controlled_states
		fire_only_once = yes

		target_trigger = {
			FROM = {
				is_fully_controlled_by = ROOT
				any_neighbor_state = {
					has_state_flag = CES_enshrouded_state_flag
				}
				NOT = {
					has_state_flag = CES_enshrouded_state_flag
				}
			}
		}

		target_root_trigger = {
			ROOT = {
				has_country_flag = CES_unlock_shadow_mechanic
			}
		}

		allowed = {
		    original_tag = CES
		}

		days_mission_timeout = 90

		available = {
			hidden_trigger = {
				always = no
			}
		}
		cancel_trigger = {
			FROM = {
				has_state_flag = CES_enshrouded_state_flag
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CES_enshroud_state_decision_automatic target: [From.GetName]"
			FROM = {
				if = {
					limit = { NOT = { is_owned_by = ROOT } }
					set_state_owner_to = ROOT
				}
                add_dynamic_modifier = {
					modifier = CES_enshrouded_area_modifier
				}
				set_temp_variable = { population_percentage_change = -0.5 }
				population_change_custom = yes
				set_state_flag = CES_enshrouded_state_flag
				if = {
					limit = {
						is_coastal = yes
					}
					ROOT = {
						add_equipment_to_stockpile = {
							type = convoy
							amount = 2
						}
					}
				}
            }
			ROOT = {
				add_manpower = 1000
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}

CES_solar_hymns_category = {
	CES_solar_hymn_1 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_4_1
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_1"
			country_event = daring_solar_hymn.1
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_1_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_2 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_4_2
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_2"
			country_event = daring_solar_hymn.2
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_2_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_3 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_6_1
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_3"
			country_event = daring_solar_hymn.3
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_3_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_4 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_6_5
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_4"
			country_event = daring_solar_hymn.4
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_4_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_5 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_8_2
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_5"
			country_event = daring_solar_hymn.5
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_5_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_6 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_8_4
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_6"
			country_event = daring_solar_hymn.6
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_6_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_7 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_9_3
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_7"
			country_event = daring_solar_hymn.7
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_7_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_8 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_9_4
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_8"
			country_event = daring_solar_hymn.8
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_8_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}

	CES_solar_hymn_9 = {
		icon = GFX_decision_CES_hymn_decision

		allowed = {
		    original_tag = CES
		}

		visible = {
			has_completed_focus = CES_solar_8_3
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = CES_solar_hymn_recently_taken_tt
				NOT = { has_country_flag = CES_has_taken_hymn_decision_recently }
			}
		}

		cost = 50

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solar_hymn_9"
			country_event = daring_solar_hymn.9
			effect_tooltip = {
				add_timed_idea = {
					idea = CES_solar_hymn_9_idea
					days = 90
				}
			}
			set_country_flag = {
				days = 90
				flag = CES_has_taken_hymn_decision_recently
				value = 1
			}
		}
		ai_will_do = {
			factor = 50
		}
	}
}

CES_solar_category = {
	CES_solarist_labour_reverent = {
		icon = GFX_decision_helmet
		allowed = { original_tag = CES }

		days_remove = 120

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_labour_vindictive }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_labour_vindictive }
			has_completed_focus = CES_solar_6_2
		}

		fire_only_once = yes

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_labour_reverent"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_labour_reverent
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_reverent_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_labour_reverent"
			add_popularity = {
				ideology = democratic
				popularity = 0.025
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.025
			}
			add_tech_bonus = {
				name = radar_bonus
				bonus = 1.0
				uses = 2
				category = radar_tech
			}
			351 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			79 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			83 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			88 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}

	CES_solarist_labour_vindictive = {
		icon = GFX_decision_helmet
		allowed = { original_tag = CES }

		days_remove = 120

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_labour_reverent }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_labour_reverent }
			has_completed_focus = CES_solar_6_2
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_labour_vindictive"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_labour_vindictive
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_vindictive_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_labour_vindictive"
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_tech_bonus = {
				name = industry_bonus
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			351 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			one_random_arms_factory = yes
		}
	}

	CES_solarist_mines_reverent = {
		icon = GFX_decision_chromium
		allowed = { original_tag = CES }

		days_remove = 60

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_mines_vindictive }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_mines_vindictive }
			has_completed_focus = CES_solar_6_2
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_mines_reverent"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_mines_reverent
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_reverent_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_mines_reverent"
			add_popularity = {
				ideology = democratic
				popularity = 0.025
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.025
			}
			add_resource = {
				type = chromium
				amount = 16
				state = 30
			}
			30 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	CES_solarist_mines_vindictive = {
		icon = GFX_decision_oil
		allowed = { original_tag = CES }

		days_remove = 60

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_mines_reverent }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_mines_reverent }
			has_completed_focus = CES_solar_6_2
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_mines_vindictive"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_mines_vindictive
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_vindictive_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_mines_vindictive"
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_resource = {
				type = aluminium
				amount = 8
				state = 16
			}
			add_resource = {
				type = oil
				amount = 20
				state = 16
			}
			16 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	CES_solarist_temple_foundation = {
		icon = GFX_decision_CES_lay_the_foundation
		allowed = { original_tag = CES }

		days_remove = 30

		fire_only_once = yes

		visible = {
			has_completed_focus = CES_solar_6_2
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_temple_foundation"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_temple_foundation
				add_manpower = -2000
				add_political_power = -50
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_temple_foundation"
			15 = {
				add_state_modifier = {
					modifier = {
						local_manpower = 0.2
						local_resources = 0.2
					}
				}
			}
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_temple_foundation
			}
		}
	}

	CES_solarist_consecrate_materials = {
		icon = GFX_decision_CES_consecrate_the_materials
		allowed = { original_tag = CES }

		days_remove = 30

		fire_only_once = yes

		visible = {
			has_completed_focus = CES_solar_6_4
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_consecrate_materials"
			hidden_effect = {
				add_manpower = -2000
				add_political_power = -50
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_consecrate_materials"
			add_resource = {
				type = steel
				amount = 8
				state = 15
			}
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_consecrate_materials
			}
		}
	}

	CES_solarist_open_grand_lodge = {
		icon = GFX_decision_CES_construct_the_grand_lodge
		allowed = { original_tag = CES }

		days_remove = 60

		fire_only_once = yes

		available = {
			has_country_flag = has_taken_CES_solarist_temple_foundation
			has_country_flag = has_taken_CES_solarist_consecrate_materials
		}

		visible = {
			OR = {
				has_completed_focus = CES_solar_6_2
				has_completed_focus = CES_solar_6_4
			}
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_open_grand_lodge"
			hidden_effect = {
				add_manpower = -2000
				add_political_power = -50
			}
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_open_grand_lodge"
			15 = {
				improve_state_category = yes
				add_building_construction = {
					type = air_base
					level = 3
					instant_build = yes
				}
			}
			country_event = daring_solar.35
		}
	}

	CES_solarist_dockyards_reverent = {
		icon = GFX_decision_generic_merge_plant_ship
		allowed = { original_tag = CES }

		days_remove = 120

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_dockyards_vindictive }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_dockyards_vindictive }
			has_completed_focus = CES_solar_6_4
		}

		fire_only_once = yes

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_dockyards_reverent"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_dockyards_reverent
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_reverent_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_dockyards_reverent"
			add_popularity = {
				ideology = democratic
				popularity = 0.025
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.025
			}
			352 = {
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = navy_bonus
				bonus = 0.5
				uses = 2
				category = naval_equipment
			}
			add_ideas = CES_solar_dockyard_construction
		}
	}

	CES_solarist_dockyards_vindictive = {
		icon = GFX_decision_generic_merge_plant_ship
		allowed = { original_tag = CES }

		days_remove = 120

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_dockyards_reverent }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_dockyards_reverent }
			has_completed_focus = CES_solar_6_4
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_dockyards_vindictive"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_dockyards_vindictive
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_vindictive_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_dockyards_vindictive"
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			352 = {
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = navy_bonus
				bonus = 1
				uses = 1
				category = naval_equipment
			}
			add_ideas = CES_solar_ship_production
		}
	}

	CES_solarist_ports_reverent = {
		icon = GFX_decision_SWE_set_navy_budget
		allowed = { original_tag = CES }

		days_remove = 60

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_ports_vindictive }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_ports_vindictive }
			has_completed_focus = CES_solar_6_4
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_ports_reverent"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_ports_reverent
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_reverent_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_ports_reverent"
			add_popularity = {
				ideology = democratic
				popularity = 0.025
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.025
			}
			15 = {
				add_building_construction = {
					type = naval_base
					level = 3
					instant_build = yes
					province = 586
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = 586
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			13 = {
				add_building_construction = {
					type = naval_base
					level = 3
					instant_build = yes
					province = 13011
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = 13011
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			352 = {
				add_building_construction = {
					type = naval_base
					level = 3
					instant_build = yes
					province = 405
				}
				add_building_construction = {
					type = naval_base
					level = 2
					instant_build = yes
					province = 405
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	CES_solarist_ports_vindictive = {
		icon = GFX_decision_SWE_set_navy_budget
		allowed = { original_tag = CES }

		days_remove = 60

		fire_only_once = yes

		available = {
			NOT = { has_country_flag = has_taken_CES_solarist_ports_reverent }
		}

		visible = {
			NOT = { has_country_flag = has_taken_CES_solarist_ports_reverent }
			has_completed_focus = CES_solar_6_4
		}

		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete CES_solarist_ports_vindictive"
			hidden_effect = {
				set_country_flag = has_taken_CES_solarist_ports_vindictive
				add_manpower = -2000
				add_political_power = -50
			}
			CES_more_vindictive_effect = yes
		}

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CES_solarist_ports_vindictive"
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			custom_effect_tooltip = CES_solarist_ports_vindictive_tt
			hidden_effect = {
				every_owned_state = {
					limit = {
						is_coastal = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
}
