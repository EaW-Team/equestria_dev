ABY_AF_debug_cat = {
	ABY_AF_activate_tree = {
		icon = GFX_decision_category_KIR_kaolin_industries

		allowed = {
			original_tag = ABY
		}

		available = {
			is_debug = yes
			is_ai = no
		}
		visible = {
			always = yes
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		cost = 1
		fire_only_once = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_activate_tree target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_activate_tree target: [From.GetName]"
		}
		remove_effect = {
			set_country_flag = ABY_AF_intro_done_flag
			set_country_flag = ABY_AF_midgame_start_flag
			set_country_flag = ABY_AF_endgame_start_flag
			mark_focus_tree_layout_dirty = yes
		}
	}
}

ABY_AF_gigastructural_engineering_cat = {
	ABY_AF_jungle_clearing_decision = {
		icon = GFX_decision_fire

		allowed = {
			always = no
		 } #activated by effect

		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = ABY_AF_hack_and_slash
					has_completed_focus = ABY_AF_a_night_in_canterlot
				}
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 5
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 10
		days_remove = 100
		on_map_mode = map_only

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 5
			weekly_manpower = -200
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_jungle_clearing_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 6
				save_current_manpower = yes
				add_manpower = -20000
				restore_previous_manpower = yes
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				add_dynamic_modifier = { modifier = ABY_AF_burned_jungle_state_modifier }
				add_resistance = 50
				add_compliance = -20
				hidden_effect = {
					set_building_level = {
						type = aby_af_burned_jungle_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}
	ABY_AF_build_arcology = {
		icon = GFX_decision_category_generic_political_actions

		allowed = {
			original_tag = ABY
		}

		available = {
			num_of_civilian_factories_available_for_projects > 75
		}

		target_root_trigger = {
			has_completed_focus = ABY_AF_projekt_metropol
		}

		visible = {
			hidden_trigger = { has_completed_focus = ABY_AF_projekt_metropol }
			FROM = {
				NOT = { has_state_flag = ABY_AF_has_arcology }
				any_neighbor_state = { has_state_flag = ABY_AF_has_arcology }
			}
		}

		cost = 75
		days_remove = 180
		on_map_mode = map_only
		state_target = any_controlled_state
		modifier = {
			civilian_factory_use = 75
		}
		targets = {
			776 775 785 773 778 771 772 741 774 786 740 738 807 808 810 801 792 790 795 799 812 828 827
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_build_arcology target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_build_arcology target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_build_arcology_tt
			FROM = {
				set_state_category = megalopolis
				add_extra_state_shared_building_slots = 25
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_dynamic_modifier = { modifier = ABY_AF_katown_state_modifier }
				hidden_effect = {
					set_state_flag = ABY_AF_has_arcology
					for_loop_effect = {
						end = 4
						add_manpower = 1000000
					}
					set_building_level = {
						type = aby_af_katown_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}

	ABY_AF_build_arcology_not_katown = {
		icon = GFX_decision_category_generic_political_actions

		allowed = {
			original_tag = ABY
		}

		visible = {
			FROM = {
				NOT = { has_state_flag = ABY_AF_has_arcology }
				is_controlled_by = ABY
			}
			hidden_trigger = { has_completed_focus = ABY_AF_projekt_metropol }
		}

		available = {
			num_of_civilian_factories_available_for_projects > 100
		}

		target_root_trigger = {
			has_completed_focus = ABY_AF_projekt_metropol
		}

		cost = 100
		days_remove = 180
		on_map_mode = map_and_decisions_view
		state_target = any_controlled_state
		modifier = {
			civilian_factory_use = 100
		}
		targets = {
			382 405 397 437 3 75 251 153 377 619 371 1165 684 1060 875 1163
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_build_arcology target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_build_arcology target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_build_arcology_not_katown_tt
			FROM = {
				set_state_category = megalopolis
				add_extra_state_shared_building_slots = 25
				add_core_of = ROOT
				if = {
					limit = { state = 382 }
					set_state_name = "ABY_382_name"
					set_province_name = { id = 10537 name = "ABY_382_name" }
				}
				if = {
					limit = { state = 405 }
					set_state_name = "ABY_405_name"
					set_province_name = { id = 13224 name = "ABY_405_name" }
				}
				if = {
					limit = { state = 437 }
					set_state_name = "ABY_437_name"
					set_province_name = { id = 10555 name = "ABY_437_name" }
				}
				if = {
					limit = { state = 397 }
					set_state_name = "ABY_397_name"
					set_province_name = { id = 12594 name = "ABY_397_name" }
				}
				if = {
					limit = { state = 3 }
					set_state_name = "ABY_3_name"
					set_province_name = { id = 179 name = "ABY_3_name" }
				}
				if = {
					limit = { state = 75 }
					set_state_name = "ABY_75_name"
					set_province_name = { id = 758 name = "ABY_75_name" }
					set_province_name = { id = 6734 name = "ABY_6734_name" }
					set_province_name = { id = 11710 name = "ABY_11710_name" }
				}
				if = {
					limit = { state = 251 }
					set_state_name = "ABY_251_name"
					set_province_name = { id = 11045 name = "ABY_251_name" }
				}
				if = {
					limit = { state = 153 }
					set_state_name = "ABY_153_name"
					set_province_name = { id = 488 name = "ABY_153_name" }
				}
				if = {
					limit = { state = 377 }
					set_state_name = "ABY_377_name"
					set_province_name = { id = 3164 name = "ABY_377_name" }
				}
				if = {
					limit = { state = 619 }
					set_state_name = "ABY_619_name"
					set_province_name = { id = 5013 name = "ABY_619_name" }
				}
				if = {
					limit = { state = 371 }
					set_state_name = "ABY_371_name"
					set_province_name = { id = 3144 name = "ABY_371_name" }
					set_province_name = { id = 11094 name = "ABY_11094_name" }
				}
				if = {
					limit = { state = 1165 }
					set_state_name = "ABY_1165_name"
					set_province_name = { id = 19886 name = "ABY_1165_name" }
				}
				if = {
					limit = { state = 684 }
					set_state_name = "ABY_684_name"
					set_province_name = { id = 18719 name = "ABY_684_name" }
					set_province_name = { id = 18717 name = "ABY_18717_name" }
				}
				if = {
					limit = { state = 1060 }
					set_state_name = "ABY_1060_name"
					set_province_name = { id = 4895 name = "ABY_1060_name" }
					set_province_name = { id = 3841 name = "ABY_3841_name" }
					set_province_name = { id = 3043 name = "ABY_3043_name" }
				}
				if = {
					limit = { state = 875 }
					set_state_name = "ABY_875_name"
					set_province_name = { id = 18351 name = "ABY_875_name" }
					set_province_name = { id = 18333 name = "ABY_18333_name" }
				}
				if = {
					limit = { state = 1163 }
					set_state_name = "ABY_1163_name"
					set_province_name = { id = 17707 name = "ABY_1163_name" }
				}
				add_dynamic_modifier = { modifier = ABY_AF_katown_state_modifier }
				add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
				set_state_flag = ABY_AF_has_superhighway
				every_neighbor_state = {
					limit = { is_controlled_by = ABY }
					if = {
						limit = {
							NOT = { has_state_category = large_city has_state_category = megalopolis has_state_category = metropolis }
						}
					}
					set_state_category = large_city
					add_manpower = 500000
					add_compliance = 30
				}
				hidden_effect = {
					set_state_flag = ABY_AF_has_arcology
					for_loop_effect = {
						end = 4
						add_manpower = 1000000
					}
					set_building_level = {
						type = aby_af_katown_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}

	ABY_AF_equus_griffonia_bridge = {
		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 483
			controls_state = 243
			num_of_civilian_factories_available_for_projects > 150
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_grossbrucke
			}
		}

		cost = 100
		days_remove = 360
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 150
		}

		cancel_trigger = {
			OR = {
				NOT = { controls_state = 483 }
				NOT = { controls_state = 243 }
			}
		}

		ai_will_do = {
			factor = 200
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_equus_griffonia_bridge target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_equus_griffonia_bridge target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_equus_griffonia_bridge_tt
			243 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 6122
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
								has_state_flag = ABY_AF_building_superhighway
								has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			483 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 3465
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
								has_state_flag = ABY_AF_building_superhighway
								has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			hidden_effect = {
				set_country_flag = ABY_AF_equus_griffonia_bridge_completed
				news_event = { id = katzen_AF.502 }
			}
		}
	}

	ABY_AF_griffonia_zebrica_maglev = {
		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 1095
			controls_state = 719
			controls_state = 716
			controls_state = 715
			controls_state = 717
			controls_state = 718
			controls_state = 655
			controls_state = 513
			controls_state = 657
			controls_state = 445
			num_of_civilian_factories_available_for_projects > 250
			num_of_nukes > 25
		}


		cancel_trigger = {
			OR = {
				NOT = { controls_state = 1095 }
				NOT = { controls_state = 445 }
			}
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_einheitsnukelarprojekt
			}
		}

		cost = 100
		days_remove = 360
		fire_only_once = yes

		modifier = {
			civilian_factory_use = 250
		}

		ai_will_do = {
			factor = 200
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_griffonia_zebrica_maglev target: [From.GetName]"
			add_nuclear_bombs = -25
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_griffonia_zebrica_maglev target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_griffonia_zebrica_maglev_tt
			445 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 7645
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = ABY_AF_building_superhighway
							has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			1095 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 18454
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = ABY_AF_building_superhighway
							has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			715 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 5083
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = ABY_AF_building_superhighway
							has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			513 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 2047
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = ABY_AF_building_superhighway
							has_state_flag = ABY_AF_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			hidden_effect = {
				set_country_flag = ABY_AF_griffonia_zebrica_maglev_completed
				news_event = { id = katzen_AF.503 }
			}
		}
	}


	ABY_AF_teleport_units_weter_to_skyrim = {
		icon = railroad

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 483
			controls_state = 243
			hidden_trigger = { has_country_flag = ABY_AF_equus_griffonia_bridge_completed }
		}

		visible = {
			controls_state = 483
			controls_state = 243
			hidden_trigger = { has_country_flag = ABY_AF_equus_griffonia_bridge_completed }
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = any_controlled_state
		targets = { 243 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_teleport_units_weter_to_skyrim target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_teleport_units_weter_to_skyrim target: [From.GetName]"
			243 = { teleport_armies = { to_state = 3465 } }
		}
	}

	ABY_AF_teleport_units_skyrim_to_weter = {
		icon = railroad

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 483
			controls_state = 243
			hidden_trigger = { has_country_flag = ABY_AF_equus_griffonia_bridge_completed }
		}

		visible = {
			controls_state = 483
			controls_state = 243
			hidden_trigger = { has_country_flag = ABY_AF_equus_griffonia_bridge_completed }
		}

		days_remove = 0

		on_map_mode = map_only

		state_target = any_controlled_state
		targets = { 483 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_teleport_units_skyrim_to_weter target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_teleport_units_skyrim_to_weter target: [From.GetName]"
			483 = { teleport_armies = { to_state = 6122 } }
		}
	}

	ABY_AF_teleport_units_qatrain_to_midoria = {
		icon = railroad

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 1095
			controls_state = 445
			hidden_trigger = { has_country_flag = ABY_AF_griffonia_zebrica_maglev_completed }
		}

		visible = {
			controls_state = 1095
			controls_state = 445
			hidden_trigger = { has_country_flag = ABY_AF_griffonia_zebrica_maglev_completed }
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = any_controlled_state
		targets = { 1095 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_teleport_units_qatrain_to_midoria target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_teleport_units_qatrain_to_midoria target: [From.GetName]"
			1095 = { teleport_armies = { to_state = 7645 } }
		}
	}

	ABY_AF_teleport_units_midoria_to_quatrain = {
		icon = railroad

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 1095
			controls_state = 445
			hidden_trigger = { has_country_flag = ABY_AF_griffonia_zebrica_maglev_completed }
		}

		visible = {
			controls_state = 1095
			controls_state = 445
			hidden_trigger = { has_country_flag = ABY_AF_griffonia_zebrica_maglev_completed }
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = any_controlled_state
		targets = { 445 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_teleport_units_midoria_to_quatrain target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_teleport_units_midoria_to_quatrain target: [From.GetName]"
			445 = { teleport_armies = { to_state = 18454 } }
		}
	}
	
	ABY_AF_kattown_pyramid = {
		icon = GFX_decision_category_KIR_kaolin_industries

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 775
			num_of_civilian_factories_available_for_projects > 1

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_the_kattown_pyramid
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			industrial_capacity_factory = -0.1
		}

		cost = 100
		days_remove = 180
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 775 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_kattown_pyramid target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_kattown_pyramid target: [From.GetName]"
		}
		remove_effect = {
			#add_ideas = ABY_AF_the_katown_pyramid
			add_victory_points = {
				province = 15710
				value = 60
			}
			775 = {
				add_manpower = 2000000
				add_building_construction = {
					type = bunker
					level = 10
					instant_build = yes
					province = 15710
				}
				add_building_construction = {
					type = landmark_aby_af_katown_pyramid
					level = 1
					instant_build = yes
					province = 15710
				}
			}
			set_country_flag = has_built_kattown_pyramid
		}
	}

	ABY_AF_giga_shipyards_decision = {
		desc = "ABY_AF_giga_shipyards_decision_desc"
		icon = GFX_decision_convoy_ship

		allowed = { #activated by effect
			always = no
		}

		visible = {
			hidden_trigger = {
				FROM = { is_controlled_by = ABY }
				has_completed_focus = ABY_AF_project_atominseln
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 30
		days_remove = 100

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_giga_shipyards_decisions target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_giga_shipyards_decisions target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_giga_shipyards_decisions target: [From.GetName]"
			FROM = {
					add_extra_state_shared_building_slots = 6
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = dockyard
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = nuclear_reactor
						level = 1
						instant_build = yes
					}
				add_resource = {
					type = steel
					amount = 20
				}
			}
			ROOT = {
				add_to_variable = {
					var = ABY_AF_gigashipyards_buff_modifier_dockyards_var
					value = 0.10
				}
			}
		}
	}

	ABY_AF_grossatom_reaktor = {
		desc = "ABY_AF_grossatom_reaktor_desc"
		icon = crystals

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 982
			num_of_civilian_factories_available_for_projects > 40

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_project_grossatom
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 40
			research_speed_factor = -0.1
		}

		cost = 100
		days_remove = 150
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 982 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_grossatom_reaktor target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_grossatom_reaktor target: [From.GetName]"
		}
		remove_effect = {
			982 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			ABY = {
				add_ideas = ABY_AF_grossatom_reaktor_idea
			}
		}
	}
	ABY_AF_draconic_power_plant = {
		icon = GFX_decision_candle

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 7
			controls_state = 7
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_uberreaktor
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
		}

		cost = 10
		days_remove = 150
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 7 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_grossatom_reaktor target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_grossatom_reaktor target: [From.GetName]"
		}
		remove_effect = {
			7 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			ABY = {
				add_ideas = ABY_AF_draconic_power_plant_idea
			}
		}
	}

	ABY_AF_uberreaktor_decision = {
		desc = "ABY_AF_uberreaktor_decision_desc"
		icon = crystals

		allowed = {
			always = no
		 } #activated by effect

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_sondersteinwerke
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 15
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 80
		days_remove = 100

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 20
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_uberreaktor_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_uberreaktor_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_uberreaktor_decision target: [From.GetName]"
			FROM = {
					add_extra_state_shared_building_slots = 6
					add_building_construction = {
						type = nuclear_reactor
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				add_resource = {
					type = crystals
					amount = 20
				}
			}
			ROOT = {
				add_to_variable = {
					var = ABY_AF_uberreactor_factory_output_var
					value = 0.05
				}
				add_to_variable = {
					var = ABY_AF_uberreactor_nuclear_var
					value = 0.10
				}
			}
		}
	}
	ABY_AF_zebhara_decision = {
		icon = GFX_decision_minecraft
		desc = "ABY_AF_zebhara_decision_desc"

		allowed = {
			original_tag = ABY
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_a_most_curious_device
				has_country_flag = ABY_AF_zebtropa_dam_completed
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 150
			custom_trigger_tooltip = {
				tooltip = ABY_AF_zebhara_states_tt
				all_of = {
					array = ABY_AF_zebhara_states_array
					value = state_id
					var:state_id = { is_controlled_by = ROOT }
				}
			}
			always = yes
		}

		fire_only_once = yes
		cancel_if_not_visible = yes
		cost = 200
		days_remove = 360

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 150
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_zebhara_decision "
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_zebhara_decision"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_zebhara_decision"
			custom_effect_tooltip = ABY_AF_zebhara_decision_tt
			for_each_loop = {
				array = ABY_AF_zebhara_states_array
				value = state_id
				var:state_id = {
					add_extra_state_shared_building_slots = 2
					add_manpower = 50000
					increase_state_category = yes
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_compliance = 30
					if = {
						limit = { state_population < 100000 }
						add_core_of = ABY
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = ABY_AF_grunwuste_state_modifier }
					hidden_effect = {
						set_building_level = {
							type = aby_af_grunwuste_province
							level = 1
							instant_build = yes
							province = { all_provinces = yes }
						}
					}
				}
			}
			country_event = { id =  katzen_AF.27 days = 30 }
			hidden_effect = { news_event = { id = katzen_AF.500 } }
		}
	}
	ABY_AF_eiswasser_decision = {
		icon = GFX_decision_minecraft

		allowed = {
			original_tag = ABY
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_eiswasser
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 100
			custom_trigger_tooltip = {
				tooltip = ABY_AF_eiswasser_states_tt
				all_of = {
					array = ABY_AF_eiswasser_states_array
					value = state_id
					var:state_id = { is_controlled_by = ROOT }
				}
			}
			num_of_nukes > 40
		}

		fire_only_once = yes
		cancel_if_not_visible = yes
		cost = 50
		days_remove = 4

		ai_will_do = {
			base = 1
		}

		modifier = {
			civilian_factory_use = 100
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_eiswasser_decision "
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_eiswasser_decision"
			add_nuclear_bombs = -40
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_eiswasser_decision"
			for_each_loop = {
				array = ABY_AF_eiswasser_states_array
				value = state_id
				var:state_id = {
					add_extra_state_shared_building_slots = 2
					add_manpower = 5000
					increase_state_category = yes
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = ABY_AF_eiswasser_state_modifier }
					hidden_effect = {
						set_building_level = {
							type = aby_af_eiswasser_province
							level = 1
							instant_build = yes
							province = { all_provinces = yes }
						}
					}
				}
				launch_nuke = {
					state = var:state_id
					controller = ABY
					use_nuke = no
				}
			}
		}
	}

	ABY_AF_polar_computing_complex = {
		desc = "ABY_AF_polar_computing_complex_desc"
		icon = GFX_decision_CTH_Scientifids

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 1012
			num_of_civilian_factories_available_for_projects > 50

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_we_need_more_i_need_more
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			research_speed_factor = -0.15
		}

		cost = 100
		days_remove = 180
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 1012 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_polar_computing_complex target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_polar_computing_complex target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			ABY = {
				if = {
					limit = {
						has_dlc = "La Resistance"
					}
					add_ideas = ABY_AF_polar_computing_complex_idea
				}
				else ={
					add_ideas = ABY_AF_polar_computing_complex_idea_nolar
				}

			}
		}
	}
	ABY_AF_holy_bottled_water_factory_decision = {
		icon = GFX_decision_gear

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 642
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_sacraflasche
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 25
			research_speed_factor = -0.15
			decryption_power = -400
			decryption_factor = -3
		}

		cost = 50
		days_remove = 180
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 642 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_holy_bottled_water_factory_deecisions target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_holy_bottled_water_factory_deecisions target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			ABY = {
				add_ideas = ABY_AF_holy_bottled_water_factory_idea
			}
		}
	}
	ABY_AF_grossgang_decision = {
		icon = GFX_decision_kirin_hq_down

		allowed = {
			always = no
		} #activated by effect

		available = {
			num_of_civilian_factories_available_for_projects > 50

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_grossgang
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			research_speed_factor = -0.15
			decryption_power = -500
			decryption_factor = -4
			consumer_goods_factor = 0.20
		}

		cost = 50
		days_remove = 180
		fire_only_once = yes
		state_target = any_controlled_state

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_grossgang_decision target: [From.GetName]"
			add_nuclear_bombs = -10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_grossgang_decision target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = steel
					amount = 1
				}
			}
			if = {
				limit = {
					has_country_flag = ABY_AF_one_grossgang_entrance_completed
				}
				ABY = {
					set_country_flag = ABY_AF_two_grossgang_entrances_completed
				}
			}
			else = {
				set_country_flag = ABY_AF_one_grossgang_entrance_completed
			}
		}
	}
	ABY_AF_grossgang_construction_decision = {
		icon = GFX_decision_kirin_hq_down

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 487
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			has_country_flag = ABY_AF_two_grossgang_entrances_completed
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 25
			consumer_goods_factor = 0.25
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 487 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_grossgang_construction_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_grossgang_construction_decision target: [From.GetName]"
			add_nuclear_bombs = -20
		}
		remove_effect = {
			ABY = {
				add_ideas = ABY_AF_grossgang_idea
			}
		}
	}
	ABY_AF_griffonian_power_dam_jezeragrad_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 387
			controls_state = 491
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_kraftwasser
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 387 }
		highlight_states = {
			highlight_provinces = { 12249 2203 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_griffonian_power_dam_jezeragrad_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_griffonian_power_dam_jezeragrad_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999995
				var = jezeragrad_i_dam
				x = 0
				y = 4.6
				z = -0.1
				state = 387
				province = 12249
				scale = 0.5
				rotation = -1.5
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = ABY_AF_griffonian_power_dam_tt
		}
	}
	ABY_AF_griffonian_power_dam_ponezega_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 615
			controls_state = 577
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_kraftwasser
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 615 }
		highlight_states = {
			highlight_provinces = { 4501 1522 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_griffonian_power_dam_ponezega_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_griffonian_power_dam_ponezega_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999994
				var = ponezega_i_dam
				x = 0
				y = 9.4
				z = -0.1
				state = 615
				province = 4501
				scale = 0.5
				rotation = -2
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = ABY_AF_griffonian_power_dam_tt
		}
	}
	ABY_AF_griffonian_power_dam_vinnin_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 405
			controls_state = 437
			num_of_civilian_factories_available_for_projects > 25

		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_projekt_kraftwasser
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 405 }
		highlight_states = {
			highlight_provinces = { 11961 12606 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_griffonian_power_dam_ponezega_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_griffonian_power_dam_ponezega_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999993
				var = vinnin_i_dam
				x = 1
				y = 6
				z = -0.1
				state = 405
				province = 11961
				scale = 0.5
				rotation = -2.4
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = ABY_AF_griffonian_power_dam_tt
		}
	}

	#Riesigerkatzenpanzer

	ABY_AF_build_giant_tank = {
		icon = GFX_decision_generic_merge_plant_tank

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 775
			num_of_civilian_factories_available_for_projects > 50
			has_equipment = { aby_af_giant_tank_equipment > 999 }
			has_completed_focus = ABY_AF_giant_tank
			hidden_trigger = {
				has_tech = ABY_AF_giant_tank_tech
				check_variable = { num_battalions_with_type@aby_af_giant_tank = 0 }
			}
			if = {
				limit = { is_ai = no }
				check_variable = {
					var = ABY_AF_aeternum_relics_available
					value = 1
					compare = greater_than_or_equals
				}
			}
		}
		visible = {
			hidden_trigger = {
				has_tech = ABY_AF_giant_tank_tech
				check_variable = { num_battalions_with_type@aby_af_giant_tank = 0 }
			}
			has_completed_focus = ABY_AF_giant_tank
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
		}

		cost = 150
		days_remove = 270
		#fire_only_once = yes
		state_target = any_controlled_state
		targets = { 775 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_build_giant_tank target: [From.GetName]"
		}

		complete_effect = {
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
			add_equipment_to_stockpile = {
				type = aby_af_giant_tank_equipment
				amount = -1000
			}
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_build_giant_tank target: [From.GetName]"
		}

		remove_effect = {
			if = {
				limit = { NOT = { has_country_flag = has_built_katzen_giant_tank } }
				country_event = katzen_AF.28
				set_country_flag = has_built_katzen_giant_tank
				division_template = {
					name = "The Riesigerkatzenpanzer"
					is_locked = yes
					regiments = {
						aby_af_giant_tank = { x = 0 y = 0 }
					}
					support = {
					}
				}

				775 = {
					create_unit = {
						division = "name = \"Dominiontracks\" division_template = \"The Riesigerkatzenpanzer\" start_experience_factor = 0.5 start_equipment_factor = 1"
						owner = ABY
					}
				}
			}
			else = {
				775 = {
					create_unit = {
						division = "name = \"Riesigerkatzenpanzer Division\" division_template = \"The Riesigerkatzenpanzer\" start_experience_factor = 0.5 start_equipment_factor = 1"
						owner = ABY
					}
				}
			}
		}
	}
	#Superhighway
	ABY_AF_build_superhighway = {

		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = ABY
		}

		available = {
			num_of_civilian_factories_available_for_projects > 15
			has_completed_focus = ABY_AF_superhighway
		}

		target_root_trigger = {
			has_completed_focus = ABY_AF_superhighway
		}

		cost = 10

		state_target = any_controlled_state

		on_map_mode = map_only

		days_remove = 15

		modifier = {
			civilian_factory_use = 15
		}

		target_array = owned_controlled_states

		target_trigger = {
			has_completed_focus = ABY_AF_superhighway
			FROM = {
				controller = { tag = ABY }
				infrastructure > 4
				NOT = { has_state_flag = ABY_AF_has_superhighway }
				OR = {
					AND = {
						is_coastal = yes
						OR = {
							has_state_category = metropolis
							has_state_category = megalopolis
						}
						naval_base > 9
					}
					any_neighbor_state = {
						OR = {
							has_state_flag = ABY_AF_has_superhighway
							has_state_flag = ABY_AF_building_superhighway #So you can "chain" it
						}
					}
				}
			}
		}

		visible = {
			has_completed_focus = ABY_AF_superhighway
			FROM = {
				controller = { tag = ABY }
				NOT = { has_state_flag = ABY_AF_has_superhighway }
			}
		}

		complete_effect = {
			hidden_effect = {
				FROM = {
					set_state_flag = ABY_AF_building_superhighway
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = ABY_AF_build_superhighway_tooltip
			hidden_effect = {
				random = {
					chance = 50
					country_event = { id = katzen_AF.608 }
				}
				FROM = {
					clr_state_flag = ABY_AF_building_superhighway
					set_state_flag = ABY_AF_has_superhighway
				}
			}
			FROM = {
				add_compliance = 10
				add_dynamic_modifier = { modifier = ABY_AF_superhighway_state_modifier }
			}
		}

		ai_will_do = {
			factor = 0
		}
	}
}
ABY_AF_off_with_the_sirens_heads_cat = {
	ABY_AF_nuke_the_fuckers = {

		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			num_of_nukes > 2
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = advanced_depth_charges
			}
			else = {
				has_tech = improved_destroyer
			}
			has_country_flag = ABY_AF_has_nuclear_depth_charges
		}
		fire_only_once = yes
		cost = 5
		days_remove = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = ABY_AF_nuke_the_fuckers_tt
			add_nuclear_bombs = -3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			hidden_effect = {
				country_event = katzen_AF.10
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
}
ABY_AF_aeternite_artifact_spending_cat = {
	ABY_AF_hunt_for_artifacts_decision = {
		icon = GFX_decision_aeternite_artefact
		desc = "ABY_AF_hunt_for_artifacts_decision_desc"
		allowed = {
			always = no
		} #activated by effect

		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_the_vaults_are_open
			}
		}

		available = {
			hidden_trigger = {
				FROM = { is_controlled_by = ROOT }
				has_completed_focus = ABY_AF_the_vaults_are_open
			}
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = yes
		state_target = any_controlled_state
		on_map_mode = map_only
		cancel_if_not_visible = yes
		cost = 100
		days_remove = 28

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_hunt_for_artifacts_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_hunt_for_artifacts_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_hunt_for_artifacts_decision target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_hunt_for_artifacts_decision_tt
			ROOT = {
				add_to_variable = {
					var = ABY_AF_aeternum_relics_available
					value = 3
				}
			}
		}
	}
	ABY_AF_hunt_for_artifacts_random_state_decision = {
		icon = GFX_decision_aeternite_artefact
		desc = "ABY_AF_hunt_for_artifacts_random_state_decision_desc"

		allowed = {
			always = no
		} #activated by effect

		visible = {
			hidden_trigger = {
				FROM = { is_controlled_by = ROOT }
				has_completed_focus = ABY_AF_the_vaults_are_open
			}
		}

		available = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_the_vaults_are_open
			}
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = yes
		state_target = any_controlled_state
		on_map_mode = map_only
		cancel_if_not_visible = yes
		cost = 50
		days_remove = 14

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_hunt_for_artifacts_random_state_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_hunt_for_artifacts_random_state_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_hunt_for_artifacts_random_state_decision target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_hunt_for_artifacts_decision_1_tt
			ROOT = {
				add_to_variable = {
					var = ABY_AF_aeternum_relics_available
					value = 1
				}
			}
		}
	}
	ABY_AF_searching_the_vaults_mission = {
		desc = "ABY_AF_searching_the_vaults_mission_desc"
		activation  = {
			always = no
		} # activated by effect
		available = {
			always = no
		}
		icon = GFX_decision_aeternite_artefact
		is_good = yes
		days_mission_timeout = 180
		timeout_effect = {
			custom_effect_tooltip = ABY_AF_searching_the_vaults_mission_tt
			activate_mission = ABY_AF_searching_the_vaults_mission
			ROOT = {
				add_to_variable = {
					var = ABY_AF_aeternum_relics_available
					value = 1
				}
			}
		}
	}
	ABY_AF_magic_equipment_boost_decision = {
		desc = "ABY_AF_magic_equipment_boost_decision_tt"
		icon = generic_magic
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_speed_boost_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = ABY_AF_magical_equipment_boost_idea
			}
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	ABY_AF_research_boost_decision = {
		desc = "ABY_AF_research_boost_decision_desc"
		icon = GFX_decision_generic_research
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = ABY_AF_research_temp_bonus_idea
			}
			add_tech_bonus = {
				name = YAL_cradle_tech_bonus
				ahead_reduction = 1.25
				uses = 1
				category = infantry_tech
				category = infantry_weapons
				category = industry
				category = electronics
				category = support_tech
				category = naval_equipment
				category = air_equipment
				category = artillery
				category = armor
				category = special_forces_tech
				category = night_vision
				category = rocketry
				category = nuclear
				category = jet_technology
			}
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.5
			}
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	ABY_AF_build_faster_decision = {
		desc = "ABY_AF_build_faster_decision_desc"
		icon = generic_construction
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_build_faster_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
			add_timed_idea = {
				idea = ABY_AF_construction_boost_idea
				days = 90
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	ABY_AF_speed_boost_decision = {
		desc = "ABY_AF_speed_boost_decision_desc"
		icon = GFX_decision_pegasus_wing
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_speed_boost_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = ABY_AF_speed_temp_bonus_idea
			}
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	#Make someone smart
	ABY_AF_create_scientist = {
		icon = GFX_decision_generic_brainwash
		allowed = {
			original_tag = ABY
		}
		visible = {
			has_completed_focus = ABY_AF_onwards_to_glory
		}
		available = {
			any_character = {
				is_army_leader = yes
				ROOT = { any_scientist = { NOT = { is_character = PREV.PREV } } }
			}
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 25

		days_remove = 30

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_create_scientist"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
		}

		remove_effect = {
			custom_effect_tooltip = ABY_AF_create_scientist_effect
			hidden_effect = {
				random_character = {
					limit = {
						is_army_leader = yes
						ROOT = { any_scientist = { NOT = { is_character = PREV.PREV } } }
					}
					add_attack = -1
					add_defense = -1
					add_planning = 2
					add_logistics = 2
					random_list = {
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_nuclear = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_land = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_air = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_naval = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_magical = 3 }
								}
							}
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 500
		}
	}
	ABY_AF_fill_fuel_stores_decision = {
		desc = "ABY_AF_fill_fuel_stores_decision_desc"
		icon = GFX_decision_oil
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
			set_fuel_ratio = 1.0
			add_timed_idea = {
				idea = ABY_AF_fuel_boost_idea
				days = 90
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	#Get Breakthroughs
	ABY_AF_aeternite_breakthrough = {
		icon = kirin_scroll
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 3
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_aeternite_land_breakthrough"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_3_tt
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -3
			}
			add_breakthrough_points = { specialization = all value = 1 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	ABY_AF_give_battleships_decision = {
		desc = "ABY_AF_give_battleships_decision_desc"
		icon = GFX_decision_convoy_ship
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
			hidden_trigger = {
				has_completed_focus = ABY_AF_floating_fortresses
			}
		}
		available = {
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 25

		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_give_battleships_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_tt
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				create_ship = {
					type = ship_hull_super_heavy_2
					equipment_variant = "Katzenwasserfestung Class"
					creator = ABY
					name = "Katzenwasserfestung Class"
				}
			}
			else = {
				create_ship = {
					type = SH_battleship_2
					equipment_variant = "Katzenwasserfestung Class"
					creator = ABY
					name = "Katzenwasserfestung Eins"
				}
			}
			add_to_variable = {
				var = ABY_AF_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	ABY_AF_soulbots_1_decision = {
		desc = "ABY_AF_soulbots_1_decision_desc"
		icon = GFX_decision_aeternite_robot
		allowed = {
			original_tag = ABY
		}
		visible = {
			always = yes
		}
		available = {
			num_of_civilian_factories_available_for_projects > 50
			has_tech = improved_computing_machine
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 3
				compare = greater_than_or_equals
			}
		}
		fire_only_once = yes
		cost = 100

		modifier = {
			civilian_factory_use = 50
		}

		days_remove = 270

		complete_effect = {
			add_to_variable = {
				var = ABY_AF3_aeternum_relics_available
				value = -3
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_soulbots_1_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_3_tt
			custom_effect_tooltip = ABY_AF_soulbots_1_decision_tt
			add_ideas = clockwerk_industry
			hidden_effect = {
				set_technology = { BAR_knights = 1 popup = no }
				set_technology = { BAR_knights2 = 1 popup = no }
				set_technology = { BAR_knights_upgrade = 1 popup = no }
				fix_weapon_techs = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	ABY_AF_soulbots_2_decision = {
		desc = "ABY_AF_soulbots_2_decision_desc"
		icon = GFX_decision_aeternite_robot
		allowed = {
			original_tag = ABY
		}
		visible = {
			has_tech = BAR_knights
			always = yes
		}
		available = {
			has_tech = advanced_computing_machine
			check_variable = {
				var = ABY_AF_aeternum_relics_available
				value = 6
				compare = greater_than_or_equals
			}
			num_of_civilian_factories_available_for_projects > 150
		}
		fire_only_once = yes

		cost = 200

		days_remove = 360

		modifier = {
			civilian_factory_use = 150
		}

		complete_effect = {
			add_to_variable = {
				var = ABY_AF3_aeternum_relics_available
				value = -6
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_soulbots_2_decision"
			custom_effect_tooltip = ABY_AF_spend_aeternite_relics_6_tt
			custom_effect_tooltip = ABY_AF_soulbots_2_decision_tt
			add_ideas = ABY_AF_soulbots_idea
			every_army_leader = {
				add_trait = { #The flesh is weak
					trait = ABY_AF_soulbot
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}

ABY_AF_the_ticking_clock_cat = {
	ABY_AF_clock_is_ticking_kattail_mission = {
		desc = "ABY_AF_clock_is_ticking_kattail_mission_desc"
		activation  = {
			has_completed_focus = ABY_AF_let_loose_the_cries_of_war
			NOT = {
				has_completed_focus = ABY_AF_a_success
			}
		}
		available = {
			always = no
		}
		icon = GFX_decision_clock_decision
		is_good = no
		fire_only_once = yes
		days_mission_timeout = 180
		timeout_effect = {
			custom_effect_tooltip = ABY_AF_clock_is_ticking_kattail_mission_tt
			country_event = katzen_AF.999
		}
	}
	ABY_AF_extend_the_kaiserdorf_program = {
		desc = "ABY_AF_extend_the_kaiserdorf_program_desc"
		icon = GFX_decision_bearbook
		allowed = {
			original_tag = ABY
		}
		visible = {
			has_idea = ABY_AF_the_kaiserdorf_program_idea
		}
		available = {
			num_of_civilian_factories_available_for_projects > 30
		}
		days_remove = 120
		modifier = {
			civilian_factory_use = 30
		}

		cost = 75

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			add_timed_idea = {
				days = 160
				idea = ABY_AF_the_kaiserdorf_program_idea
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_off_with_the_sirens_heads_cat"
			hidden_effect = {
				activate_decision = ABY_AF_extend_the_kaiserdorf_program
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
}

ABY_AF_exotic_weapons_cat = {
	ABY_AF_caseless_rifles = {
		icon = GFX_decision_ger_military_buildup
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
		}
		visible = {
			has_completed_focus = ABY_AF_a_curious_proposal
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_caseless_rifles"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_caseless_rifles"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_caseless_rifle = 1
				popup = no
			}
			custom_effect_tooltip = HIP_caseless_rifles_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_helicopter_assault = {
		icon = GFX_decision_war_thunder
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_helicopter_assault"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_helicopter_assault"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			if = {
				limit = {
					NOT = {
						has_tech = experimental_helicopter
					}
				}
				set_technology = {
					experimental_helicopter = 1
				}
			}
			else = {
				add_tech_bonus = {
					name = secret_bonus
					bonus = 2
					uses = 1
					category = helicopter_tech
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_future_tank = {
		icon = GFX_decision_generic_intelligence_operation
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_future_tank"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_future_tank"
			clr_country_flag = ABY_AF_exotic_weapon_researching

			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				add_tech_bonus = {
					name = secret_bonus
					technology = super_heavy_tank_chassis_a
					technology = super_heavy_tank_chassis_b
					technology = super_heavy_tank_chassis_c
					bonus = 1
					uses = 1
					ahead_reduction = 2
				}
			}
			else = {
				add_tech_bonus = {
					name = secret_bonus
					technology = super_heavy_tank
					technology = super_heavy_tank_a
					technology = super_heavy_tank_b
					bonus = 1
					uses = 1
					ahead_reduction = 2
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_ground_effect_vehicle = {
		icon = GFX_decision_war_thunder
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			has_tech = jet_engines
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_ground_effect_vehicle"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_ground_effect_vehicle"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_ground_effect_vehicle_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_ground_effect_vehicle_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_depth_charges = {
		icon = GFX_decision_crossed_swords
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = advanced_depth_charges
			}
			else = {
				has_tech = improved_destroyer
			}
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_depth_charges"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_depth_charges"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				set_technology = {
					HIP_nuclear_depth_charges_full = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_depth_charges_full_effect
			}
			else = {
				set_technology = {
					HIP_nuclear_depth_charges_full_nomtg = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_depth_charges_full_nomtg_effect
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
			set_country_flag = ABY_AF_has_nuclear_depth_charges
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_naval_mines = {
		icon = GFX_decision_generic_naval
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		visible = {
			has_dlc = "Man the Guns"
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_naval_mines"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_naval_mines"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_naval_mines_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_naval_mines_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_torpedos = {
		icon = GFX_decision_generic_naval
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_torpedos"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_torpedos"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_torpedos_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_torpedos_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_air_to_air_missiles = {
		icon = GFX_decision_generic_air
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_air_to_air_missiles"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_air_to_air_missiles"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					HIP_nuclear_air_to_air_missiles_tech_bba = 1
				}
			}
			else = {
				set_technology = {
					HIP_nuclear_air_to_air_missiles_tech = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_air_to_air_missiles_effect
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_land_mines = {
		icon = GFX_decision_hol_drain_water_lines
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_land_mines"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_land_mines"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_land_mines_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_land_mines_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_nuclear_rocket_artillery = {
		icon = GFX_decision_generic_ignite_civil_war
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_nuclear_rocket_artillery"
			set_country_flag = ABY_AF_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_nuclear_rocket_artillery"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_rocket_artillery_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_air_launched_cruise_missiles = {
		icon = GFX_decision_gear
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			num_of_nukes > 4
			has_tech = semi_modern_rocket_engines
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_air_launched_cruise_missiles"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_air_launched_cruise_missiles"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_air_launched_cruise_missiles_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_air_launched_cruise_missiles_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	ABY_AF_personal_grenade_launcher = {
		icon = GFX_decision_hol_engelandvaarders
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = ABY
		}
		available = {
			NOT = {
				has_country_flag = ABY_AF_exotic_weapon_researching
			}
			has_tech = support_weapons_d
			has_tech = advanced_infantry_weapons_c
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_personal_grenade_launcher"
			set_country_flag = ABY_AF_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_personal_grenade_launcher"
			clr_country_flag = ABY_AF_exotic_weapon_researching
			set_technology = {
				HIP_personal_grenade_launcher_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_personal_grenade_launcher_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
}

ABY_AF_zebtropa_project_cat = {
	ABY_AF_zebtropa_dam = {
		icon = generic_construction

		allowed = {
			original_tag = ABY
		}

		available = {
			controls_state = 869
			controls_state = 874
			num_of_civilian_factories_available_for_projects > 100
		}
		visible = {
			hidden_trigger = {
				has_completed_focus = ABY_AF_project_zebtropa
			}
		}

		cost = 150
		days_remove = 360
		fire_only_once = yes
		state_target = any_controlled_state
		targets = { 869 }
		modifier = {
			civilian_factory_use = 100
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_zebtropa_dam target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_zebtropa_dam target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = landmark_aby_af_zebtropa_dam
					level = 1
					instant_build = yes
					province = 14646
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999998
				var = zebtropa_i_dam
				x = 28
				y = 8.2
				z = -0.1
				state = 869
				province = 14632
				scale = 1.1
				rotation = 1.5
				min_zoom = 3000.0
			}
			hidden_effect = {
				#Initialize variables to drain the sea
				set_variable = { zebtropa_sea_level_drop = 0 }
				set_variable = { zebtropa_dam_power_output = 1 }
				set_variable = { zebtropa_teraliters = 0 }
				set_variable = { zebtropa_next_designation_threshold = 100 }
				country_event = { id = katzen_AF.607 days = 180 }
				set_country_flag = ABY_AF_zebtropa_dam_completed
			}
			custom_effect_tooltip = ABY_AF_zebtropa_dam_decision_tt
			# TODO WUW CLOSE THE STRAIT?
			add_ideas = ABY_AF_the_zebtropa_dam_idea
			hidden_effect = { news_event = { id = katzen_AF.505 } }
		}
	}

	ABY_AF_build_zebtropa_mirror_array = {
		icon = GFX_decision_category_generic_political_actions

		allowed = {
			original_tag = ABY
		}

		visible = {
			FROM = {
				NOT = { has_state_flag = ABY_AF_has_mirror_array }
				is_controlled_by = ABY
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 50
		}

		cost = 25
		days_remove = 180
		on_map_mode = map_and_decisions_view
		state_target = any_controlled_state
		modifier = {
			civilian_factory_use = 100
		}
		
		target_array = ABY_AF_zebtropa_states_array

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_build_zebtropa_mirror_array target: [From.GetName]"
		}
		remove_effect = {
			custom_effect_tooltip = ABY_AF_build_zebtropa_mirror_array_tt
			log = "[GetDateText]: [Root.GetName]: Decision remove ABY_AF_build_zebtropa_mirror_array target: [From.GetName]"
			FROM = {
				hidden_effect = {
					set_state_flag = ABY_AF_has_mirror_array
				}
			}
		}
	}

	ABY_AF_zebtropa_settlement_designation = {
		icon = GFX_decision_generic_factory

		allowed = {
			original_tag = ABY
		}

		visible = {
			FROM = {
				is_controlled_by = ABY
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_only
		state_target = any_controlled_state
		target_array = ABY_AF_zebtropa_states_array

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_zebtropa_seabed_designation_tt
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_zebtropa_settlement_designation ABY_AF_build_zebtropa_mirror_array target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 2
				add_manpower = 100000
				hidden_effect = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
			}
		}
	}

	ABY_AF_zebtropa_dredging_designation = {
		icon = GFX_decision_generic_construction

		allowed = {
			original_tag = ABY
		}

		visible = {
			FROM = {
				is_controlled_by = ABY
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_only
		state_target = any_controlled_state
		target_array = ABY_AF_zebtropa_states_array

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_zebtropa_dredging_designation target: [From.GetName]"
			custom_effect_tooltip = ABY_AF_zebtropa_seabed_designation_tt
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ABY_AF_zebtropa_dredging_designation target: [From.GetName]"
			add_resource = { type = aluminium amount = 10 state = FROM }
			add_resource = { type = steel amount = 10 state = FROM }
			add_resource = { type = tungsten amount = 5 state = FROM }
			add_resource = { type = chromium amount = 5 state = FROM }
			add_resource = { type = crystals amount = 5 state = FROM }
			FROM = { hidden_effect = { subtract_from_variable = { zebtropa_state_spec_count = 1 } } }
		}
	}
}

ABY_AF_terraforming_project_cat = {
	ABY_AF_terraform_zebhara_state = {
		icon = GFX_decision_minecraft
		desc = "ABY_AF_zebhara_decision_desc"

		allowed = {
			original_tag = ABY
		}

		visible = {
			FROM = {
				OR = {
					any_neighbor_state = {
						OR = {
							has_state_flag = ABY_AF_terraformed_zebhara_state
							NOT = { is_in_array = { array = ABY_AF_zebhara_states_array value = THIS } }
						}
					}
					is_coastal = yes
				}
				is_controlled_by = ABY
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 29
			always = yes
		}

		on_map_mode = map_only
		state_target = any_controlled_state
		target_array = ABY_AF_zebhara_states_array
		cancel_if_not_visible = yes

		cost = 20
		days_remove = 180

		ai_will_do = { base = 200 }

		modifier = {
			civilian_factory_use = 30
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ABY_AF_terraform_zebhara_state "
			hidden_effect = {
				FROM = {
					clr_state_flag = ABY_AF_terraformed_zebhara_state
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete ABY_AF_terraform_zebhara_state"
			hidden_effect = {
				FROM = {
					set_state_flag = ABY_AF_terraformed_zebhara_state
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  ABY_AF_terraform_zebhara_state"
			custom_effect_tooltip = ABY_AF_zebhara_decision_tt
			FROM = {
				increase_state_category = yes
				increase_state_category = yes
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_compliance = 30
				if = {
					limit = { state_population < 100000 }
					add_core_of = ABY
				}
				add_dynamic_modifier = { modifier = ABY_AF_grunwuste_state_modifier }
				hidden_effect = {
					set_state_flag = ABY_AF_terraformed_state
					set_building_level = {
						type = aby_af_grunwuste_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
					ABY = {
						add_to_variable = { ABY_AF_terraformed_zebhara_state_count = 1 }
						set_variable = { ABY_AF_terraformed_zebhara_state_perc = ABY_AF_terraformed_zebhara_state_count }
						divide_variable = { ABY_AF_terraformed_zebhara_state_perc = ABY.ABY_AF_zebhara_states_array^num }
						if = {
							limit = { check_variable = { ABY_AF_terraformed_zebhara_state_perc = 1 } }
							hidden_effect = { news_event = { id = katzen_AF.500 } }
						}
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			country_event = { id =  katzen_AF.27 days = 30 }
 		}
	}
}