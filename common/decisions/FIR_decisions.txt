FIR_special_decisions_category = {
	FIR_spiritual_journey = {
		icon = celestia
		available = {}
		visible = {
			NOT = {has_country_flag = FIR_went_to_woods}
			has_completed_focus = FIR_inward_perfection
		}
		cost = 100
		ai_will_do = {
			factor = 100
		}
		days_re_enable = 180
		complete_effect = {
			country_event = {
				hours = 1 id = FIR.5
			}
		}
	}

	FIR_spiritual_journey_postavatar = {
		icon = celestia
		available = {}
		visible = {
			has_country_flag = FIR_went_to_woods
			has_completed_focus = FIR_inward_perfection
		}
		cost = 100
		days_re_enable = 180
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			country_event = {
				hours = 1 id = FIR.7
			}
		}
	}

	FIR_pilgrimage_decision = {
		icon = book
		available = {}
		visible = {
			has_completed_focus = FIR_pilgrimage_magehold
			NOT = {
				has_country_flag = FIR_is_necromancer
			}
		}
		days_re_enable = 180
		cost = 100
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			country_event = { hours = 1 id = FIR.10}
		}
	}
}

FIR_evil_magic_decisions_category = {

	FIR_mana_batteries = {#use your own people as magical batteries (crystals)
		icon = crystals
		days_remove = 14
		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			hidden_trigger = {
				has_political_power > 49
				has_manpower > 1999
			}
		}
		custom_cost_trigger = {
			has_political_power > 49
			has_manpower > 1999
		}
		complete_effect = {
			hidden_effect = { add_manpower = -2000 add_political_power = -50 }
		}
		custom_cost_text = decision_cost_pp_50_manpower_2000
		remove_effect = {
			add_resource = {
				type = crystals
				amount = 2
				state = 454
			}
		}
	}

	FIR_construction_boost = {
		icon = crystals
		cost = 50
		days_re_enable = 365

		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			NOT = {has_idea = FIR_necro_building}
			custom_trigger_tooltip = {
				tooltip = AT_LEAST_2_CRYSTALS
				check_variable = { resource_produced@crystals > 1 }
			}
		}

		complete_effect = {
			add_timed_idea = {idea = FIR_necro_building days = 365}
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}

	FIR_productivity_boost = {
		icon = crystals
		cost = 50
		days_re_enable = 365

		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			NOT = {has_idea = FIR_necro_productivity}
			custom_trigger_tooltip = {
				tooltip = AT_LEAST_2_CRYSTALS
				check_variable = { resource_produced@crystals > 1 }
			}
		}

		complete_effect = {
			add_timed_idea = {idea = FIR_necro_productivity days = 365}
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}

	FIR_labor_boost = {
		icon = crystals
		cost = 50
		days_re_enable = 365
		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			NOT = {has_idea = FIR_necro_labor}

			custom_trigger_tooltip = {
				tooltip = AT_LEAST_2_CRYSTALS
				check_variable = { resource_produced@crystals > 1 }
			}

		}

		complete_effect = {
			add_timed_idea = {idea = FIR_necro_labor days = 365}
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}

	FIR_inspiration_boost = {
		icon = crystals
		cost = 50
		days_re_enable = 365
		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			NOT = {has_idea = FIR_necro_inspiration}
			custom_trigger_tooltip = {
				tooltip = AT_LEAST_2_CRYSTALS
				check_variable = { resource_produced@crystals > 1 }
			}
		}

		complete_effect = {
			add_timed_idea = {idea = FIR_necro_inspiration days = 365}
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}

	FIR_army_boost = {
		icon = crystals
		cost = 50
		visible = {
			has_country_flag = FIR_evil_magic
		}
		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			NOT = {has_idea = FIR_necro_armybuff}
			custom_trigger_tooltip = {
				tooltip = AT_LEAST_2_CRYSTALS
				check_variable = { resource_produced@crystals > 1 }
			}
		}

		complete_effect = {
			add_timed_idea = {idea = FIR_necro_armybuff days = 365}
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}

	FIR_raise_dead = {
		icon = crystals
		cost = 30

		visible = {
			has_country_flag = FIR_evil_magic
			has_country_flag = FIR_is_necromancer
		}

		available = {
			454 = { is_owned_and_controlled_by = ROOT }
			has_resources_amount = { resource = crystals amount > 1 state = 454 }
			hidden_trigger = {
			}
		}
		complete_effect = {
			add_manpower = 10000
			add_resource = {
				type = crystals
				amount = -2
				state = 454
			}
		}
	}
}

FIR_riv_fed_dev_decisions_category = {
	FIR_federal_education_grant = {
		icon = modern_city
		cost = 50
		visible = {
			NOT = {
				has_idea = proper_science_base
			}
		}
		days_re_enable = 365
		complete_effect = {
			if = {
				limit = {
					has_idea = poor_science_base
				}
				add_ideas = better_science_base
				decrease_illiteracy = yes
			}
			else_if = {
				limit = {
					has_idea = better_science_base
				}
				add_ideas = big_science_base
				decrease_illiteracy = yes
			}
			else_if = {
				limit = {
					has_idea = big_science_base
				}
				add_ideas = proper_science_base
				decrease_illiteracy = yes
			}
		}
	}


	FIR_fed_trade = {
		icon = modern_city
		cost = 50
		days_re_enable = 365
		available = {
			NOT = {
				has_idea = FIR_riv_trade_idea
			}
		}
		complete_effect = {
			add_timed_idea = {idea = FIR_riv_trade_idea days = 365}
		}
	}

	FIR_investment_infrastructure = {
		icon = modern_city
		cost = 50
		days_re_enable = 365
		available = {
			NOT = {
				has_idea = FIR_riv_roads_idea
			}
		}
		complete_effect = {
			add_timed_idea = {idea = FIR_riv_roads_idea days = 365}
		}
	}

	FIR_army_coordination = {
		icon = rifles
		cost = 50
		days_re_enable = 365
		available = {
			NOT = {
				has_idea = FIR_riv_army_idea
			}
		}
		complete_effect = {
			add_timed_idea = {idea = FIR_riv_army_idea days = 365}
		}
	}
}

FIR_raiding_decisions_category = {
	FIR_prepare_raid = {
		icon = griffon_bandits

		available = {
			any_state = {
				is_owned_and_controlled_by = FROM
				any_neighbor_state = {
					is_fully_controlled_by = ROOT
					set_temp_variable = { var:attacker_state_temp = id }
					has_ROOT_at_least_1_div_in_current_state_scope = yes
				}
				set_temp_variable = { var:defender_state_temp = id }
			}
			NOT = { has_non_aggression_pact_with = FROM }
			ROOT = {
				NOT = { has_country_flag = MNC_raid_succeeded }
				NOT = { has_country_flag = MNC_raid_failed }
				NOT = { has_country_flag = MNC_preparing_raid }
			}
		}

		visible = {
			NOT = { has_country_flag = FIR_preparing_raid }
			FROM = { exists = yes }
			NOT = { has_war_with = FROM }
			FROM = {
				NOT = { is_subject_of = ROOT }
				NOT = { is_in_faction_with = ROOT }
				NOT = { has_idea = detached_country}
			}
			NOT = { is_subject_of = FROM }
			NOT = {
				has_government = democratic
				has_government = communism
			}
			OR = {
				NOT = { has_border_war_with = FROM }
				any_state = {
					is_owned_and_controlled_by = FROM
					any_neighbor_state = {
						is_fully_controlled_by = ROOT
					}
				}
			}
		}

		target_trigger = {
			FROM = {
				is_neighbor_of = ROOT
			}
		}

		highlight_states = {
			OR = {
				state = FROM.defender_state_vs_@ROOT
				AND = {
					is_owned_and_controlled_by = FROM
					any_neighbor_state = {
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						is_fully_controlled_by = ROOT
					}
				}
			}
		}

		ai_will_do = {
			base = 100
			modifier = {

			}
		}

		cost = 25

		fire_only_once = no

		days_re_enable = 180
		days_remove = 30

		complete_effect = {
			hidden_effect = {
				random_state = {
					limit = {
						is_owned_and_controlled_by = FROM
						any_neighbor_state = {
							has_ROOT_at_least_1_div_in_current_state_scope = yes
							is_fully_controlled_by = ROOT
						}
					}
					save_event_target_as = defender_state
					set_variable = { FROM.defender_state_vs_@ROOT = id }
					set_temp_variable = { defender_state_temp = id }
				}
				random_state = {
					limit = {
						is_fully_controlled_by = ROOT
						has_ROOT_at_least_1_div_in_current_state_scope = yes
						any_neighbor_state = {
							state = var:FROM.defender_state_vs_@ROOT
						}
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
				}
				set_country_flag = FIR_preparing_raid
			}
		}
		remove_effect = {
			activate_targeted_decision = { target = FROM decision = FIR_initiate_raid }
		}
	}

	FIR_initiate_raid = {

		icon = griffon_bandits

		allowed = { always = no } #Activated from effect

		available = {
			var:FROM.attacker_state_vs_@ROOT = {
				is_fully_controlled_by = ROOT
			}
			divisions_in_border_state = {
				state = var:FROM.attacker_state_vs_@ROOT
				border_state = var:FROM.defender_state_vs_@ROOT
				size > 0
			}
		}
		highlight_states = {
			state = var:FROM.attacker_state_vs_@ROOT
		}

		ai_will_do = {
			base = 100
			modifier = {

			}
		}

		cancel_trigger = {
			is_in_faction_with = FROM
		}

		fire_only_once = yes #Reactivation handled in effect

		selectable_mission = yes

		days_mission_timeout = 30

		timeout_effect = {
			hidden_effect = {
				FROM = {
					clear_variable = attacker_state_vs_@ROOT
					clear_variable = defender_state_vs_@ROOT
				}
				clr_country_flag = FIR_preparing_raid
				remove_targeted_decision = { target = FROM decision = FIR_initiate_raid }
				activate_targeted_decision = { target = FROM decision = FIR_prepare_raid }
			}
		}

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = var:FROM.attacker_state_vs_@ROOT
					num_provinces = 4
					on_win = mountain.22
					on_lose = mountain.24
					on_cancel = mountain.23
				}

				defender = {
					state = var:FROM.defender_state_vs_@ROOT
					num_provinces = 4
					on_win = mountain.27
					on_lose = mountain.25
					on_cancel = mountain.26
				}
			}
			hidden_effect = {
				set_country_flag = MNC_preparing_raid
				clr_country_flag = FIR_preparing_raid
				remove_targeted_decision = { target = FROM decision = FIR_initiate_raid }
				activate_targeted_decision = { target = FROM decision = FIR_prepare_raid }
			}
		}
	}
	
	FIR_divide_loot = {
		icon = griffon_bandits
		visible = {
			NOT = {
				has_government = democratic
				has_government = communism
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = MNC_more_than_1_loot_tp
				check_variable  = {
					var = loot
					value = 1
					compare = greater_than
				}
			}
		}
		days_remove = 20
		complete_effect = {
			subtract_from_variable = {
				var = loot
				value = 1
			}
		}
		remove_effect = {
			add_stability = 0.03
			add_war_support = 0.02
			add_political_power = 25
		}
		ai_will_do = {
			factor = 40
		}
	}

	FIR_fresh_blood = {
		icon = griffon_bandits
		visible = {
			NOT = {
				has_government = democratic
				has_government = communism
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = MNC_more_than_1_loot_tp
				check_variable  = {
					var = loot
					value = 1
					compare = greater_than
				}
			}
		}
		days_remove = 30
		complete_effect = {
			subtract_from_variable = {
				var = loot
				value = 2
			}
		}
		remove_effect = {
			add_manpower = 11000
		}
		ai_will_do = {
			factor = 70
		}
	}

	FIR_toasters = {
		icon = griffon_bandits
		visible = {
			NOT = {
				has_government = democratic
				has_government = communism
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = MNC_more_than_4_loot_tp
				check_variable  = {
					var = loot
					value = 4
					compare = greater_than
				}
			}
		}
		days_remove = 70
		complete_effect = {
			subtract_from_variable = {
				var = loot
				value = 5
			}
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FIR_gun_factory = {
		icon = griffon_bandits
		visible = {
			NOT = {
				has_government = democratic
				has_government = communism
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = MNC_more_than_4_loot_tp
				check_variable  = {
					var = loot
					value = 4
					compare = greater_than
				}
			}
		}
		days_remove = 70
		complete_effect = {
			subtract_from_variable = {
				var = loot
				value = 5
			}
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	
}

