KTZ_debug_cat = {
	KTZ_activate_tree = {
		icon = GFX_decision_category_KIR_kaolin_industries

		allowed = {
			OR = {
				original_tag = KTZ
				original_tag = KTZ
			}
		}

		available = {
			is_debug = yes
			is_ai = no
		}
		visible = {
			always = yes
		}
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				has_political_power < 200
			}
		}

		cost = 1
		fire_only_once = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_activate_tree target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_activate_tree target: [From.GetName]"
		}
		remove_effect = {
			set_country_flag = KTZ_intro_done_flag
			set_country_flag = KTZ_midgame_start_flag
			set_country_flag = KTZ_endgame_start_flag
			mark_focus_tree_layout_dirty = yes
		}
	}
}

KTZ_gigastructural_engineering_cat = {
	KTZ_jungle_clearing_decision = {
		icon = GFX_decision_fire

		allowed = {
			always = no
		 } #activated by effect

		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = KTZ_hack_and_slash
					has_completed_focus = KTZ_a_night_in_canterlot
				}
			}
		}
		available = {
			ROOT = {
				num_of_civilian_factories_available_for_projects > 5
			}
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 10
		days_remove = 100
		on_map_mode = map_only

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 5
			weekly_manpower = -200
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_jungle_clearing_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 6
				save_current_manpower = yes
				add_manpower = -20000
				restore_previous_manpower = yes
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				add_dynamic_modifier = { modifier = KTZ_burned_jungle_state_modifier }
				add_resistance = 50
				add_compliance = -20
				hidden_effect = {
					set_building_level = {
						type = KTZ_burned_jungle_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}
	KTZ_build_arcology = {
		icon = GFX_decision_category_generic_political_actions

		allowed = {
			original_tag = KTZ
		}

		available = {
			num_of_civilian_factories_available_for_projects > 75
		}

		target_root_trigger = {
			has_completed_focus = KTZ_projekt_metropol
		}

		visible = {
			ROOT = {
				hidden_trigger = { has_completed_focus = KTZ_projekt_metropol }
			}
			FROM = {
				NOT = { has_state_flag = KTZ_has_arcology }
				any_neighbor_state = { has_state_flag = KTZ_has_arcology }
				is_controlled_by = ROOT
			}
		}

		cost = 75
		days_remove = 180
		on_map_mode = map_only
		state_target = yes
		modifier = {
			civilian_factory_use = 75
		}
		targets = {
			776 775 785 773 778 771 772 741 774 786 740 738 807 808 810 801 792 790 795 799 812 828 827
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_build_arcology target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_build_arcology target: [From.GetName]"
			custom_effect_tooltip = KTZ_build_arcology_tt
			FROM = {
				set_state_category = megalopolis
				add_extra_state_shared_building_slots = 25
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_dynamic_modifier = { modifier = KTZ_katown_state_modifier }
				hidden_effect = {
					set_state_flag = KTZ_has_arcology
					for_loop_effect = {
						end = 4
						add_manpower = 1000000
					}
					set_building_level = {
						type = KTZ_katown_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}

	KTZ_build_arcology_not_katown = {
		icon = GFX_decision_category_generic_political_actions

		allowed = {
			original_tag = KTZ
		}

		visible = {
			FROM = {
				NOT = { has_state_flag = KTZ_has_arcology }
				is_controlled_by = KTZ
			}
			ROOT = {
				hidden_trigger = { has_completed_focus = KTZ_projekt_metropol }
			}
		}

		available = {
			ROOT = {
				num_of_civilian_factories_available_for_projects > 100
			}
		}

		target_root_trigger = {
			has_completed_focus = KTZ_projekt_metropol
		}

		cost = 100
		days_remove = 180
		on_map_mode = map_and_decisions_view
		state_target = yes
		modifier = {
			civilian_factory_use = 100
		}
		targets = {
			382 405 397 437 3 75 251 153 377 619 371 1165 684 1060 875 1163
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_build_arcology target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_build_arcology target: [From.GetName]"
			custom_effect_tooltip = KTZ_build_arcology_not_katown_tt
			FROM = {
				set_state_category = megalopolis
				add_extra_state_shared_building_slots = 25
				add_core_of = ROOT
				if = {
					limit = { state = 382 }
					set_state_name = "KTZ_382_name"
					set_province_name = { id = 10537 name = "KTZ_382_name" }
				}
				if = {
					limit = { state = 405 }
					set_state_name = "KTZ_405_name"
					set_province_name = { id = 13224 name = "KTZ_405_name" }
				}
				if = {
					limit = { state = 437 }
					set_state_name = "KTZ_437_name"
					set_province_name = { id = 10555 name = "KTZ_437_name" }
				}
				if = {
					limit = { state = 397 }
					set_state_name = "KTZ_397_name"
					set_province_name = { id = 12594 name = "KTZ_397_name" }
				}
				if = {
					limit = { state = 3 }
					set_state_name = "KTZ_3_name"
					set_province_name = { id = 179 name = "KTZ_3_name" }
				}
				if = {
					limit = { state = 75 }
					set_state_name = "KTZ_75_name"
					set_province_name = { id = 758 name = "KTZ_75_name" }
					set_province_name = { id = 6734 name = "KTZ_6734_name" }
					set_province_name = { id = 11710 name = "KTZ_11710_name" }
				}
				if = {
					limit = { state = 251 }
					set_state_name = "KTZ_251_name"
					set_province_name = { id = 11045 name = "KTZ_251_name" }
				}
				if = {
					limit = { state = 153 }
					set_state_name = "KTZ_153_name"
					set_province_name = { id = 488 name = "KTZ_153_name" }
				}
				if = {
					limit = { state = 377 }
					set_state_name = "KTZ_377_name"
					set_province_name = { id = 3164 name = "KTZ_377_name" }
				}
				if = {
					limit = { state = 619 }
					set_state_name = "KTZ_619_name"
					set_province_name = { id = 5013 name = "KTZ_619_name" }
				}
				if = {
					limit = { state = 371 }
					set_state_name = "KTZ_371_name"
					set_province_name = { id = 3144 name = "KTZ_371_name" }
					set_province_name = { id = 11094 name = "KTZ_11094_name" }
				}
				if = {
					limit = { state = 1165 }
					set_state_name = "KTZ_1165_name"
					set_province_name = { id = 19886 name = "KTZ_1165_name" }
				}
				if = {
					limit = { state = 684 }
					set_state_name = "KTZ_684_name"
					set_province_name = { id = 18719 name = "KTZ_684_name" }
					set_province_name = { id = 18717 name = "KTZ_18717_name" }
				}
				if = {
					limit = { state = 1060 }
					set_state_name = "KTZ_1060_name"
					set_province_name = { id = 4895 name = "KTZ_1060_name" }
					set_province_name = { id = 3841 name = "KTZ_3841_name" }
					set_province_name = { id = 3043 name = "KTZ_3043_name" }
				}
				if = {
					limit = { state = 875 }
					set_state_name = "KTZ_875_name"
					set_province_name = { id = 18351 name = "KTZ_875_name" }
					set_province_name = { id = 18333 name = "KTZ_18333_name" }
				}
				if = {
					limit = { state = 1163 }
					set_state_name = "KTZ_1163_name"
					set_province_name = { id = 17707 name = "KTZ_1163_name" }
				}
				add_dynamic_modifier = { modifier = KTZ_katown_state_modifier }
				add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
				set_state_flag = KTZ_has_superhighway
				every_neighbor_state = {
					limit = { is_controlled_by = KTZ }
					if = {
						limit = {
							NOT = { has_state_category = large_city has_state_category = megalopolis has_state_category = metropolis }
						}
					}
					set_state_category = large_city
					add_manpower = 500000
					add_compliance = 30
				}
				hidden_effect = {
					set_state_flag = KTZ_has_arcology
					for_loop_effect = {
						end = 4
						add_manpower = 1000000
					}
					set_building_level = {
						type = KTZ_katown_province
						level = 1
						instant_build = yes
						province = { all_provinces = yes }
					}
				}
			}
		}
	}

	KTZ_equus_griffonia_bridge = {
		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = KTZ
		}

		available = {
			controls_state = 483
			controls_state = 243
			num_of_civilian_factories_available_for_projects > 150
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = KTZ_grossbrucke
			}
		}

		cost = 100
		days_remove = 360
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 150
		}

		cancel_trigger = {
			OR = {
				NOT = { controls_state = 483 }
				NOT = { controls_state = 243 }
			}
		}

		ai_will_do = {
			factor = 200
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_equus_griffonia_bridge target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_equus_griffonia_bridge target: [From.GetName]"
			custom_effect_tooltip = KTZ_equus_griffonia_bridge_tt
			243 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 6122
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
								has_state_flag = KTZ_building_superhighway
								has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			483 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 3465
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
								has_state_flag = KTZ_building_superhighway
								has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			hidden_effect = {
				set_country_flag = KTZ_equus_griffonia_bridge_completed
				news_event = { id = katzen_AF.502 }
			}
		}
	}

	KTZ_griffonia_zebrica_maglev = {
		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = KTZ
		}

		available = {
			controls_state = 1095
			controls_state = 719
			controls_state = 716
			controls_state = 715
			controls_state = 717
			controls_state = 718
			controls_state = 655
			controls_state = 513
			controls_state = 657
			controls_state = 445
			num_of_civilian_factories_available_for_projects > 250
			num_of_nukes > 25
		}


		cancel_trigger = {
			OR = {
				NOT = { controls_state = 1095 }
				NOT = { controls_state = 445 }
			}
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = KTZ_einheitsnukelarprojekt
			}
		}

		cost = 100
		days_remove = 360
		fire_only_once = yes

		modifier = {
			civilian_factory_use = 250
		}

		ai_will_do = {
			factor = 200
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_griffonia_zebrica_maglev target: [From.GetName]"
			add_nuclear_bombs = -25
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_griffonia_zebrica_maglev target: [From.GetName]"
			custom_effect_tooltip = KTZ_griffonia_zebrica_maglev_tt
			445 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 7645
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = KTZ_building_superhighway
							has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			1095 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 18454
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = KTZ_building_superhighway
							has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			715 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 5083
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = KTZ_building_superhighway
							has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			513 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 10
					instant_build = yes
					province = 2047
				}
				add_compliance = 10
				if = {
					limit = {
						NOT = {
							OR = {
							has_state_flag = KTZ_building_superhighway
							has_state_flag = KTZ_has_superhighway
							}
						}
					}
					add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
					set_state_flag = KTZ_has_superhighway
				}
			}
			hidden_effect = {
				set_country_flag = KTZ_griffonia_zebrica_maglev_completed
				news_event = { id = katzen_AF.503 }
			}
		}
	}


	KTZ_teleport_units_weter_to_skyrim = {
		icon = railroad

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 483
				controls_state = 243
				hidden_trigger = { has_country_flag = KTZ_equus_griffonia_bridge_completed }
			}
		}

		visible = {
			ROOT = {
				controls_state = 483
				controls_state = 243
				hidden_trigger = { has_country_flag = KTZ_equus_griffonia_bridge_completed }
			}
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = yes
		targets = { 243 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_teleport_units_weter_to_skyrim target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_teleport_units_weter_to_skyrim target: [From.GetName]"
			243 = { teleport_armies = { to_state = 3465 } }
		}
	}

	KTZ_teleport_units_skyrim_to_weter = {
		icon = railroad

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 483
				controls_state = 243
				hidden_trigger = { has_country_flag = KTZ_equus_griffonia_bridge_completed }
			}
		}

		visible = {
			ROOT = {
				controls_state = 483
				controls_state = 243
				hidden_trigger = { has_country_flag = KTZ_equus_griffonia_bridge_completed }
			}
		}

		days_remove = 0

		on_map_mode = map_only

		state_target = yes
		targets = { 483 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_teleport_units_skyrim_to_weter target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_teleport_units_skyrim_to_weter target: [From.GetName]"
			483 = { teleport_armies = { to_state = 6122 } }
		}
	}

	KTZ_teleport_units_qatrain_to_midoria = {
		icon = railroad

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 1095
				controls_state = 445
				hidden_trigger = { has_country_flag = KTZ_griffonia_zebrica_maglev_completed }
			}
		}

		visible = {
			ROOT = {
				controls_state = 1095
				controls_state = 445
				hidden_trigger = { has_country_flag = KTZ_griffonia_zebrica_maglev_completed }
			}
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = yes
		targets = { 1095 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_teleport_units_qatrain_to_midoria target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_teleport_units_qatrain_to_midoria target: [From.GetName]"
			1095 = { teleport_armies = { to_state = 7645 } }
		}
	}

	KTZ_teleport_units_midoria_to_quatrain = {
		icon = railroad

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 1095
				controls_state = 445
				hidden_trigger = { has_country_flag = KTZ_griffonia_zebrica_maglev_completed }
			}
		}

		visible = {
			ROOT = {
				controls_state = 1095
				controls_state = 445
				hidden_trigger = { has_country_flag = KTZ_griffonia_zebrica_maglev_completed }
			}
		}

		on_map_mode = map_only

		days_remove = 0

		state_target = yes
		targets = { 445 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_teleport_units_midoria_to_quatrain target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_teleport_units_midoria_to_quatrain target: [From.GetName]"
			445 = { teleport_armies = { to_state = 18454 } }
		}
	}

	KTZ_kattown_pyramid = {
		icon = GFX_decision_category_KIR_kaolin_industries

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 775
				num_of_civilian_factories_available_for_projects > 50
			}

		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_the_kattown_pyramid
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			industrial_capacity_factory = -0.1
		}

		cost = 100
		days_remove = 180
		fire_only_once = yes
		state_target = yes
		targets = { 775 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_kattown_pyramid target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_kattown_pyramid target: [From.GetName]"
		}
		remove_effect = {
			#add_ideas = KTZ_the_katown_pyramid
			add_victory_points = {
				province = 15710
				value = 60
			}
			775 = {
				add_manpower = 2000000
				add_building_construction = {
					type = bunker
					level = 10
					instant_build = yes
					province = 15710
				}
				add_building_construction = {
					type = landmark_KTZ_katown_pyramid
					level = 1
					instant_build = yes
					province = 15710
				}
			}
			set_country_flag = has_built_kattown_pyramid
		}
	}
	KTZ_zebtropa_dam = {
		icon = GFX_decision_ktz_dam

		allowed = {
			original_tag = KTZ
		}

		available = {
			controls_state = 869
			controls_state = 874
			num_of_civilian_factories_available_for_projects > 100
		}
		visible = {
			hidden_trigger = {
				has_completed_focus = KTZ_project_zebtropa
			}
		}

		cost = 150
		days_remove = 360
		fire_only_once = yes
		state_target = any
		targets = { 869 }
		modifier = {
			civilian_factory_use = 100
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_dam target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_zebtropa_dam target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_building_construction = {
					type = landmark_KTZ_zebtropa_dam
					level = 1
					instant_build = yes
					province = 14646
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999998
				var = zebtropa_i_dam
				x = 28
				y = 8.2
				z = -0.1
				state = 869
				province = 14632
				scale = 1.1
				rotation = 1.5
				min_zoom = 3000.0
			}
			hidden_effect = {
				#Initialize variables to drain the sea
				set_variable = { zebtropa_monthly_sea_level_drop = 2 }

				set_variable = { zebtropa_sea_level_drop = 0 }
				set_variable = { zebtropa_draining_level = 1 }

				set_variable = { zebtropa_dam_power_output = 1 }
				set_variable = { zebtropa_dam_power_output_per_m = 0.2 }

				set_variable = { zebtropa_petaliters = 0 }
				set_variable = { zebtropa_petaliters_per_m = 2 }

				set_variable = { zebtropa_next_designation_threshold = 100 }
				set_variable = { KTZ_zebtropa_solar_buff = 0 }

				country_event = { id = katzen_AF.607 days = 180 }
				set_country_flag = KTZ_zebtropa_dam_completed
				851 = { add_to_variable = { zebtropa_state_spec_count = 1 } }
				1002 = { add_to_variable = { zebtropa_state_spec_count = 1 } }
				199 = { add_to_variable = { zebtropa_state_spec_count = 1 } }
				818 = { add_to_variable = { zebtropa_state_spec_count = 1 } }
				788 = { add_to_variable = { zebtropa_state_spec_count = 1 } }
			}
			custom_effect_tooltip = KTZ_zebtropa_dam_decision_tt
			# TODO WUW CLOSE THE STRAIT?
			add_dynamic_modifier = { modifier = KTZ_the_zebtropa_dam_modifier }
			hidden_effect = { news_event = { id = katzen_AF.505 } }
		}
	}


	KTZ_giga_shipyards_decision = {
		desc = "KTZ_giga_shipyards_decision_desc"
		icon = GFX_decision_convoy_ship

		allowed = { #activated by effect
			always = no
		}

		visible = {
			hidden_trigger = {
				FROM = { is_controlled_by = KTZ }
				has_completed_focus = KTZ_project_atominseln
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 30
		days_remove = 100

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_giga_shipyards_decisions target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_giga_shipyards_decisions target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_giga_shipyards_decisions target: [From.GetName]"
			FROM = {
					add_extra_state_shared_building_slots = 6
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = dockyard
						level = 4
						instant_build = yes
					}
					add_building_construction = {
						type = nuclear_reactor
						level = 1
						instant_build = yes
					}
				add_resource = {
					type = steel
					amount = 20
				}
			}
			ROOT = {
				add_to_variable = {
					var = KTZ_gigashipyards_buff_modifier_dockyards_var
					value = 0.10
				}
			}
		}
	}

	KTZ_grossatom_reaktor = {
		desc = "KTZ_grossatom_reaktor_desc"
		icon = crystals

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 982
				num_of_civilian_factories_available_for_projects > 40
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_project_grossatom
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 40
			research_speed_factor = -0.1
		}

		cost = 100
		days_remove = 150
		fire_only_once = yes
		state_target = yes
		targets = { 982 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_grossatom_reaktor target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_grossatom_reaktor target: [From.GetName]"
		}
		remove_effect = {
			982 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			KTZ = {
				add_ideas = KTZ_grossatom_reaktor_idea
			}
		}
	}
	KTZ_draconic_power_plant = {
		icon = GFX_decision_candle

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 7
				controls_state = 7
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_uberreaktor
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
		}

		cost = 10
		days_remove = 150
		fire_only_once = yes
		state_target = yes
		targets = { 7 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_grossatom_reaktor target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_grossatom_reaktor target: [From.GetName]"
		}
		remove_effect = {
			7 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = nuclear_reactor
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			KTZ = {
				add_ideas = KTZ_draconic_power_plant_idea
			}
		}
	}

	KTZ_uberreaktor_decision = {
		desc = "KTZ_uberreaktor_decision_desc"
		icon = crystals

		allowed = {
			always = no
		 } #activated by effect

		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_sondersteinwerke
				}
			}
		}
		available = {
			ROOT = {
				num_of_civilian_factories_available_for_projects > 15
			}
		}

		fire_only_once = yes
		state_target = any_controlled_state
		cancel_if_not_visible = yes
		cost = 80
		days_remove = 100

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 20
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_uberreaktor_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_uberreaktor_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_uberreaktor_decision target: [From.GetName]"
			FROM = {
					add_extra_state_shared_building_slots = 6
					add_building_construction = {
						type = nuclear_reactor
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				add_resource = {
					type = crystals
					amount = 20
				}
			}
			ROOT = {
				add_to_variable = {
					var = KTZ_uberreactor_factory_output_var
					value = 0.05
				}
				add_to_variable = {
					var = KTZ_uberreactor_nuclear_var
					value = 0.10
				}
			}
		}
	}
	KTZ_zebhara_decision = {
		icon = GFX_decision_minecraft
		desc = "KTZ_zebhara_decision_desc"

		allowed = {
			original_tag = KTZ
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = KTZ_a_most_curious_device
				has_country_flag = KTZ_zebtropa_dam_completed
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 150
			custom_trigger_tooltip = {
				tooltip = KTZ_zebhara_states_tt
				all_of = {
					array = KTZ_zebhara_states_array
					value = state_id
					var:state_id = { is_controlled_by = ROOT }
				}
			}
			always = yes
		}

		fire_only_once = yes
		cancel_if_not_visible = yes
		cost = 200
		days_remove = 360

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 150
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_zebhara_decision "
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_zebhara_decision"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_zebhara_decision"
			custom_effect_tooltip = KTZ_zebhara_decision_tt
			for_each_loop = {
				array = KTZ_zebhara_states_array
				value = state_id
				var:state_id = {
					add_extra_state_shared_building_slots = 2
					add_manpower = 50000
					increase_state_category = yes
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_compliance = 30
					if = {
						limit = { state_population < 100000 }
						add_core_of = KTZ
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = KTZ_grunwuste_state_modifier }
					hidden_effect = {
						set_building_level = {
							type = KTZ_grunwuste_province
							level = 1
							instant_build = yes
							province = { all_provinces = yes }
						}
					}
				}
			}
			KTZ_increase_food_2 = yes
			country_event = { id =  katzen_AF.27 days = 30 }
			hidden_effect = { news_event = { id = katzen_AF.500 } }
		}
	}
	KTZ_eiswasser_decision = {
		icon = GFX_decision_minecraft

		allowed = {
			original_tag = KTZ
		}

		visible = {
			hidden_trigger = {
				has_completed_focus = KTZ_projekt_eiswasser
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 100
			custom_trigger_tooltip = {
				tooltip = KTZ_eiswasser_states_tt
				all_of = {
					array = KTZ_eiswasser_states_array
					value = state_id
					var:state_id = { is_controlled_by = ROOT }
				}
			}
			num_of_nukes > 40
		}

		fire_only_once = yes
		cancel_if_not_visible = yes
		cost = 50
		days_remove = 4

		ai_will_do = {
			base = 1
		}

		modifier = {
			civilian_factory_use = 100
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_eiswasser_decision "
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_eiswasser_decision"
			add_nuclear_bombs = -40
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_eiswasser_decision"
			KTZ_increase_food = yes
			for_each_loop = {
				array = KTZ_eiswasser_states_array
				value = state_id
				var:state_id = {
					add_extra_state_shared_building_slots = 2
					add_manpower = 5000
					increase_state_category = yes
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = KTZ_eiswasser_state_modifier }
					hidden_effect = {
						set_building_level = {
							type = KTZ_eiswasser_province
							level = 1
							instant_build = yes
							province = { all_provinces = yes }
						}
					}
				}
				launch_nuke = {
					state = var:state_id
					controller = KTZ
					use_nuke = no
				}
			}
		}
	}

	KTZ_polar_computing_complex = {
		desc = "KTZ_polar_computing_complex_desc"
		icon = GFX_decision_CTH_Scientifids

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 1012
				num_of_civilian_factories_available_for_projects > 50
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_we_need_more_i_need_more
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			research_speed_factor = -0.15
		}

		cost = 100
		days_remove = 180
		fire_only_once = yes
		state_target = yes
		targets = { 1012 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_polar_computing_complex target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_polar_computing_complex target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			KTZ = {
				if = {
					limit = {
						has_dlc = "La Resistance"
					}
					add_ideas = KTZ_polar_computing_complex_idea
				}
				else ={
					add_ideas = KTZ_polar_computing_complex_idea_nolar
				}

			}
		}
	}
	KTZ_holy_bottled_water_factory_decision = {
		icon = GFX_decision_gear

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 642
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_sacraflasche
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 25
			research_speed_factor = -0.15
			decryption_power = -400
			decryption_factor = -3
		}

		cost = 50
		days_remove = 180
		fire_only_once = yes
		state_target = yes
		targets = { 642 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_holy_bottled_water_factory_deecisions target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_holy_bottled_water_factory_deecisions target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = crystals
					amount = 10
				}
			}
			KTZ = {
				add_ideas = KTZ_holy_bottled_water_factory_idea
			}
		}
	}
	KTZ_grossgang_decision = {
		icon = GFX_decision_kirin_hq_down

		allowed = {
			always = no
		} #activated by effect

		available = {
			ROOT = {
				num_of_civilian_factories_available_for_projects > 50
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_grossgang
				}
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
			research_speed_factor = -0.15
			decryption_power = -500
			decryption_factor = -4
			consumer_goods_factor = 0.20
		}

		cost = 50
		days_remove = 180
		fire_only_once = yes
		state_target = any_controlled_state

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_grossgang_decision target: [From.GetName]"
			add_nuclear_bombs = -10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_grossgang_decision target: [From.GetName]"
		}
		remove_effect = {
			FROM = {
				add_resource = {
					type = steel
					amount = 1
				}
			}
			if = {
				limit = {
					has_country_flag = KTZ_one_grossgang_entrance_completed
				}
				KTZ = {
					set_country_flag = KTZ_two_grossgang_entrances_completed
				}
			}
			else = {
				set_country_flag = KTZ_one_grossgang_entrance_completed
			}
		}
	}
	KTZ_grossgang_construction_decision = {
		icon = GFX_decision_kirin_hq_down

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 487
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				has_country_flag = KTZ_two_grossgang_entrances_completed
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 25
			consumer_goods_factor = 0.25
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = yes
		targets = { 487 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_grossgang_construction_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_grossgang_construction_decision target: [From.GetName]"
			add_nuclear_bombs = -20
		}
		remove_effect = {
			KTZ = {
				add_ideas = KTZ_grossgang_idea
			}
		}
	}
	KTZ_griffonian_power_dam_jezeragrad_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 387
				controls_state = 491
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_kraftwasser
				}
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = yes
		targets = { 387 }
		highlight_states = {
			highlight_provinces = { 12249 2203 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_griffonian_power_dam_jezeragrad_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_griffonian_power_dam_jezeragrad_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999995
				var = jezeragrad_i_dam
				x = 0
				y = 4.6
				z = -0.1
				state = 387
				province = 12249
				scale = 0.5
				rotation = -1.5
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = KTZ_griffonian_power_dam_tt
		}
	}
	KTZ_griffonian_power_dam_ponezega_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 615
				controls_state = 577
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_kraftwasser
				}
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = yes
		targets = { 615 }
		highlight_states = {
			highlight_provinces = { 4501 1522 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_griffonian_power_dam_ponezega_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_griffonian_power_dam_ponezega_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999994
				var = ponezega_i_dam
				x = 0
				y = 9.4
				z = -0.1
				state = 615
				province = 4501
				scale = 0.5
				rotation = -2
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = KTZ_griffonian_power_dam_tt
		}
	}
	KTZ_griffonian_power_dam_vinnin_decision = {
		icon = GFX_decision_kirin_corvee_up

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 405
				controls_state = 437
				num_of_civilian_factories_available_for_projects > 25
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_projekt_kraftwasser
				}
			}
		}

		cost = 50
		days_remove = 360
		fire_only_once = yes
		state_target = yes
		targets = { 405 }
		highlight_states = {
			highlight_provinces = { 11961 12606 }
		}

		modifier = {
			civilian_factory_use = 25
		}

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_griffonian_power_dam_ponezega_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_griffonian_power_dam_ponezega_decision target: [From.GetName]"
			FROM = {
				add_extra_state_shared_building_slots = 20
				add_building_construction = {
					type = industrial_complex
					level = 10
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 5
					instant_build = yes
				}
			}
			create_entity = {
				entity = tno_reference
				id = 9999993
				var = vinnin_i_dam
				x = 1
				y = 6
				z = -0.1
				state = 405
				province = 11961
				scale = 0.5
				rotation = -2.4
				min_zoom = 3000.0
			}
			# TODO WUW ADD A DAM
			custom_effect_tooltip = KTZ_griffonian_power_dam_tt
		}
	}

	#Riesigerkatzenpanzer

	KTZ_build_giant_tank = {
		icon = GFX_decision_generic_merge_plant_tank

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				controls_state = 775
				num_of_civilian_factories_available_for_projects > 50
				has_equipment = { KTZ_giant_tank_equipment > 999 }
				has_completed_focus = KTZ_giant_tank_focus
				hidden_trigger = {
					has_tech = KTZ_giant_tank_tech
					check_variable = { num_battalions_with_type@KTZ_giant_tank = 0 }
				}
				if = {
					limit = { is_ai = no }
					check_variable = {
						var = KTZ_aeternum_relics_available
						value = 1
						compare = greater_than_or_equals
					}
				}
			}
		}
		visible = {
			ROOT = {
				hidden_trigger = {
					has_tech = KTZ_giant_tank_tech
					check_variable = { num_battalions_with_type@KTZ_giant_tank = 0 }
				}
				has_completed_focus = KTZ_giant_tank_focus
			}
		}
		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 50
		}

		cost = 150
		days_remove = 270
		#fire_only_once = yes
		state_target = yes
		targets = { 775 }

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_build_giant_tank target: [From.GetName]"
		}

		complete_effect = {
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
			add_equipment_to_stockpile = {
				type = KTZ_giant_tank_equipment
				amount = -1000
			}
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_build_giant_tank target: [From.GetName]"
		}

		remove_effect = {
			if = {
				limit = { NOT = { has_country_flag = has_built_katzen_giant_tank } }
				country_event = katzen_AF.28
				set_country_flag = has_built_katzen_giant_tank
				division_template = {
					name = "The Riesigerkatzenpanzer"
					is_locked = yes
					regiments = {
						KTZ_giant_tank = { x = 0 y = 0 }
					}
					support = {
					}
				}

				775 = {
					create_unit = {
						division = "name = \"Dominiontracks\" division_template = \"The Riesigerkatzenpanzer\" start_experience_factor = 0.5 start_equipment_factor = 1"
						owner = KTZ
					}
				}
			}
			else = {
				775 = {
					create_unit = {
						division = "name = \"Riesigerkatzenpanzer Division\" division_template = \"The Riesigerkatzenpanzer\" start_experience_factor = 0.5 start_equipment_factor = 1"
						owner = KTZ
					}
				}
			}
		}
	}
	#Superhighway
	KTZ_build_superhighway = {

		icon = GFX_decision_build_superhighway

		allowed = {
			original_tag = KTZ
		}

		available = {
			ROOT = {
				num_of_civilian_factories_available_for_projects > 15
				has_completed_focus = KTZ_superhighway
			}
		}

		target_root_trigger = {
			ROOT = {
				has_completed_focus = KTZ_superhighway
			}
		}

		cost = 10

		state_target = yes

		on_map_mode = map_only

		days_remove = 15

		modifier = {
			civilian_factory_use = 15
		}

		target_array = owned_controlled_states

		target_trigger = {
			has_completed_focus = KTZ_superhighway
			FROM = {
				controller = { tag = KTZ }
				infrastructure > 4
				NOT = { has_state_flag = KTZ_has_superhighway }
				OR = {
					AND = {
						is_coastal = yes
						OR = {
							has_state_category = metropolis
							has_state_category = megalopolis
						}
						naval_base > 9
					}
					any_neighbor_state = {
						OR = {
							has_state_flag = KTZ_has_superhighway
							has_state_flag = KTZ_building_superhighway #So you can "chain" it
						}
					}
				}
			}
		}

		visible = {
			has_completed_focus = KTZ_superhighway
			FROM = {
				controller = { tag = KTZ }
				NOT = { has_state_flag = KTZ_has_superhighway }
			}
		}

		complete_effect = {
			hidden_effect = {
				FROM = {
					set_state_flag = KTZ_building_superhighway
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = KTZ_build_superhighway_tooltip
			hidden_effect = {
				random = {
					chance = 50
					country_event = { id = katzen_AF.608 }
				}
				FROM = {
					clr_state_flag = KTZ_building_superhighway
					set_state_flag = KTZ_has_superhighway
				}
			}
			FROM = {
				add_compliance = 10
				add_dynamic_modifier = { modifier = KTZ_superhighway_state_modifier }
			}
		}

		ai_will_do = {
			factor = 0
		}
	}
}
KTZ_off_with_the_sirens_heads_cat = {
	KTZ_nuke_the_fuckers = {

		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			num_of_nukes > 2
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = advanced_depth_charges
			}
			else = {
				has_tech = improved_destroyer
			}
			has_country_flag = KTZ_has_nuclear_depth_charges
		}
		fire_only_once = yes
		cost = 5
		days_remove = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = KTZ_nuke_the_fuckers_tt
			add_nuclear_bombs = -3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			hidden_effect = {
				country_event = katzen_AF.10
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
}
KTZ_aeternite_artifact_spending_cat = {
	KTZ_hunt_for_artifacts_decision = {
		icon = GFX_decision_aeternite_artefact
		desc = "KTZ_hunt_for_artifacts_decision_desc"
		allowed = {
			always = no
		} #activated by effect

		visible = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_the_vaults_are_open
				}
			}
		}

		available = {
			hidden_trigger = {
				FROM = { is_controlled_by = ROOT }
				ROOT = {
					has_completed_focus = KTZ_the_vaults_are_open
				}
			}
			ROOT = {
				num_of_civilian_factories_available_for_projects > 10
			}
		}

		fire_only_once = yes
		state_target = any_controlled_state
		on_map_mode = map_only
		cancel_if_not_visible = yes
		cost = 100
		days_remove = 28

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_hunt_for_artifacts_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_hunt_for_artifacts_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_hunt_for_artifacts_decision target: [From.GetName]"
			custom_effect_tooltip = KTZ_hunt_for_artifacts_decision_tt
			ROOT = {
				add_to_variable = {
					var = KTZ_aeternum_relics_available
					value = 3
				}
			}
		}
	}
	KTZ_hunt_for_artifacts_random_state_decision = {
		icon = GFX_decision_aeternite_artefact
		desc = "KTZ_hunt_for_artifacts_random_state_decision_desc"

		allowed = {
			always = no
		} #activated by effect

		visible = {
			hidden_trigger = {
				FROM = { is_controlled_by = ROOT }
				ROOT = {
					has_completed_focus = KTZ_the_vaults_are_open
				}
			}
		}

		available = {
			ROOT = {
				hidden_trigger = {
					has_completed_focus = KTZ_the_vaults_are_open
				}
				num_of_civilian_factories_available_for_projects > 10
			}
		}

		fire_only_once = yes
		state_target = any_controlled_state
		on_map_mode = map_only
		cancel_if_not_visible = yes
		cost = 50
		days_remove = 14

		ai_will_do = {
			base = 200
		}

		modifier = {
			civilian_factory_use = 10
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KTZ_hunt_for_artifacts_random_state_decision target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_hunt_for_artifacts_random_state_decision target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove  KTZ_hunt_for_artifacts_random_state_decision target: [From.GetName]"
			custom_effect_tooltip = KTZ_hunt_for_artifacts_decision_1_tt
			ROOT = {
				add_to_variable = {
					var = KTZ_aeternum_relics_available
					value = 1
				}
			}
		}
	}
	KTZ_searching_the_vaults_mission = {
		desc = "KTZ_searching_the_vaults_mission_desc"
		activation  = {
			always = no
		} # activated by effect
		available = {
			always = no
		}
		icon = GFX_decision_aeternite_artefact
		is_good = yes
		days_mission_timeout = 180
		timeout_effect = {
			custom_effect_tooltip = KTZ_searching_the_vaults_mission_tt
			activate_mission = KTZ_searching_the_vaults_mission
			ROOT = {
				add_to_variable = {
					var = KTZ_aeternum_relics_available
					value = 1
				}
			}
		}
	}
	KTZ_magic_equipment_boost_decision = {
		desc = "KTZ_magic_equipment_boost_decision_tt"
		icon = generic_magic
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_speed_boost_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = KTZ_magical_equipment_boost_idea
			}
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	KTZ_research_boost_decision = {
		desc = "KTZ_research_boost_decision_desc"
		icon = GFX_decision_generic_research
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = KTZ_research_temp_bonus_idea
			}
			add_tech_bonus = {
				name = YAL_cradle_tech_bonus
				ahead_reduction = 1.25
				uses = 1
				category = infantry_tech
				category = infantry_weapons
				category = industry
				category = electronics
				category = support_tech
				category = naval_equipment
				category = air_equipment
				category = artillery
				category = armor
				category = special_forces_tech
				category = night_vision
				category = rocketry
				category = nuclear
				category = jet_technology
			}
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.5
			}
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.5
			}
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	KTZ_build_faster_decision = {
		desc = "KTZ_build_faster_decision_desc"
		icon = generic_construction
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_build_faster_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
			add_timed_idea = {
				idea = KTZ_construction_boost_idea
				days = 90
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	KTZ_speed_boost_decision = {
		desc = "KTZ_speed_boost_decision_desc"
		icon = GFX_decision_pegasus_wing
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_speed_boost_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_timed_idea = {
				days = 90
				idea = KTZ_speed_temp_bonus_idea
			}
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	#Make someone smart
	KTZ_create_scientist = {
		icon = GFX_decision_generic_brainwash
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_completed_focus = KTZ_onwards_to_glory
		}
		available = {
			any_character = {
				is_army_leader = yes
				NOT = { has_character_flag = KTZ_scientist }
			}
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 25

		days_remove = 30

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_create_scientist"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
		}

		remove_effect = {
			custom_effect_tooltip = KTZ_create_scientist_effect
			hidden_effect = {
				random_character = {
					limit = {
						is_army_leader = yes
						NOT = { has_character_flag = KTZ_scientist }
					}
					set_character_flag = KTZ_scientist
					add_attack = -1
					add_defense = -1
					add_planning = 2
					add_logistics = 2
					random_list = {
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_nuclear = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_land = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_air = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_naval = 3 }
								}
							}
						}
						1 = {
							add_scientist_role = {
								scientist = {
									traits = { scientist_trait_bright }
									skills = { specialization_magical = 3 }
								}
							}
						}
					}
				}
			}
		}

		ai_will_do = {
			factor = 500
		}
	}
	KTZ_fill_fuel_stores_decision = {
		desc = "KTZ_fill_fuel_stores_decision_desc"
		icon = GFX_decision_oil
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 90

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
			set_fuel_ratio = 1.0
			add_timed_idea = {
				idea = KTZ_fuel_boost_idea
				days = 90
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	#Get Breakthroughs
	KTZ_aeternite_breakthrough = {
		icon = kirin_scroll
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 3
				compare = greater_than_or_equals
			}
		}
		cost = 10

		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_aeternite_land_breakthrough"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_3_tt
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -3
			}
			add_breakthrough_points = { specialization = all value = 1 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}
	KTZ_give_battleships_decision = {
		desc = "KTZ_give_battleships_decision_desc"
		icon = GFX_decision_convoy_ship
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
			hidden_trigger = {
				has_completed_focus = KTZ_floating_fortresses
			}
		}
		available = {
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 1
				compare = greater_than_or_equals
			}
		}
		cost = 25

		days_remove = 15

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_give_battleships_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_tt
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				create_ship = {
					type = ship_hull_super_heavy_2
					equipment_variant = "Katzenwasserfestung Class"
					creator = KTZ
					name = "Katzenwasserfestung Class"
				}
			}
			else = {
				create_ship = {
					type = SH_battleship_2
					equipment_variant = "Katzenwasserfestung Class"
					creator = KTZ
					name = "Katzenwasserfestung Eins"
				}
			}
			add_to_variable = {
				var = KTZ_aeternum_relics_available
				value = -1
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	KTZ_soulbots_1_decision = {
		desc = "KTZ_soulbots_1_decision_desc"
		icon = GFX_decision_aeternite_robot
		allowed = {
			original_tag = KTZ
		}
		visible = {
			always = yes
		}
		available = {
			num_of_civilian_factories_available_for_projects > 50
			has_tech = improved_computing_machine
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 3
				compare = greater_than_or_equals
			}
		}
		fire_only_once = yes
		cost = 100

		modifier = {
			civilian_factory_use = 50
		}

		days_remove = 270

		complete_effect = {
			add_to_variable = {
				var = KTZ3_aeternum_relics_available
				value = -3
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_soulbots_1_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_3_tt
			custom_effect_tooltip = KTZ_soulbots_1_decision_tt
			add_ideas = clockwerk_industry
			hidden_effect = {
				set_technology = { BAR_knights = 1 popup = no }
				set_technology = { BAR_knights2 = 1 popup = no }
				set_technology = { BAR_knights_upgrade = 1 popup = no }
				fix_weapon_techs = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	KTZ_soulbots_2_decision = {
		desc = "KTZ_soulbots_2_decision_desc"
		icon = GFX_decision_aeternite_robot
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_tech = BAR_knights
			always = yes
		}
		available = {
			has_tech = advanced_computing_machine
			check_variable = {
				var = KTZ_aeternum_relics_available
				value = 6
				compare = greater_than_or_equals
			}
			num_of_civilian_factories_available_for_projects > 150
		}
		fire_only_once = yes

		cost = 200

		days_remove = 360

		modifier = {
			civilian_factory_use = 150
		}

		complete_effect = {
			add_to_variable = {
				var = KTZ3_aeternum_relics_available
				value = -6
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_soulbots_2_decision"
			custom_effect_tooltip = KTZ_spend_aeternite_relics_6_tt
			custom_effect_tooltip = KTZ_soulbots_2_decision_tt
			add_ideas = KTZ_soulbots_idea
			every_army_leader = {
				add_trait = { #The flesh is weak
					trait = KTZ_soulbot
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}

KTZ_the_ticking_clock_cat = {
	# KTZ_clock_is_ticking_kattail_mission = {
	# 	desc = "KTZ_clock_is_ticking_kattail_mission_desc"
	# 	activation  = {
	# 		has_completed_focus = KTZ_let_loose_the_cries_of_war
	# 		NOT = { has_completed_focus = KTZ_a_success }
	# 		NOT = { has_country_flag = KTZ_kaiser_left }
	# 	}
	# 	available = {
	# 		always = no
	# 	}
	# 	icon = GFX_decision_clock_decision
	# 	is_good = no
	# 	fire_only_once = yes
	# 	days_mission_timeout = 180
	# 	timeout_effect = {
	# 		custom_effect_tooltip = KTZ_clock_is_ticking_kattail_mission_tt
	# 		country_event = katzen_AF.999
	# 	}
	# }
	KTZ_extend_the_kaiserdorf_program = {
		desc = "KTZ_extend_the_kaiserdorf_program_desc"
		icon = GFX_decision_bearbook
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_idea = KTZ_the_kaiserdorf_program_idea
		}
		available = {
			num_of_civilian_factories_available_for_projects > 30
		}
		days_remove = 120
		modifier = {
			civilian_factory_use = 30
		}

		cost = 75

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			add_timed_idea = {
				days = 160
				idea = KTZ_the_kaiserdorf_program_idea
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KTZ_off_with_the_sirens_heads_cat"
			hidden_effect = {
				activate_decision = KTZ_extend_the_kaiserdorf_program
			}
		}
		ai_will_do = {
			factor = 200
		}
	}
}

KTZ_exotic_weapons_cat = {
	KTZ_nuclear_ramjet = {
		icon = GFX_decision_generic_air
		cost = 25
		days_remove = 360
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			is_special_project_completed = sp:sp_air_jet_engine
			has_tech = nuclear_reactor
		}
		visible = {
			has_dlc = "By Blood Alone"
			has_completed_focus = KTZ_a_curious_proposal
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_ramjet"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_ramjet"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				KTZ_nuclear_ramjet_tech = 1
				popup = no
			}
			custom_effect_tooltip = KTZ_nuclear_ramjet_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_air_to_air_missiles = {
		icon = GFX_decision_generic_air
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_air_to_air_missiles"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_air_to_air_missiles"
			clr_country_flag = KTZ_exotic_weapon_researching
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					HIP_nuclear_air_to_air_missiles_tech_bba = 1
				}
			}
			else = {
				set_technology = {
					HIP_nuclear_air_to_air_missiles_tech = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_air_to_air_missiles_effect
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_caseless_rifles = {
		icon = GFX_decision_ger_military_buildup
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
		}
		visible = {
			has_completed_focus = KTZ_a_curious_proposal
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_caseless_rifles"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_caseless_rifles"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_caseless_rifle = 1
				popup = no
			}
			custom_effect_tooltip = HIP_caseless_rifles_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	# KTZ_helicopter_assault = {
	# 	icon = GFX_decision_war_thunder
	# 	cost = 25
	# 	days_remove = 180
	# 	fire_only_once = yes
	# 	allowed = {
	# 		original_tag = KTZ
	# 	}
	# 	available = {
	# 		NOT = {
	# 			has_country_flag = KTZ_exotic_weapon_researching
	# 		}
	# 	}
	# 	modifier = {
	# 		research_speed_factor = -0.1
	# 		consumer_goods_factor = 0.1
	# 	}
	# 	complete_effect = {
	# 		log = "[GetDateText]: [Root.GetName]: Decision KTZ_helicopter_assault"
	# 		set_country_flag = KTZ_exotic_weapon_researching
	# 	}
	# 	remove_effect = {
	# 		log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_helicopter_assault"
	# 		clr_country_flag = KTZ_exotic_weapon_researching
	# 		if = {
	# 			limit = {
	# 				NOT = {
	# 					has_tech = experimental_helicopter
	# 				}
	# 			}
	# 			set_technology = {
	# 				experimental_helicopter = 1
	# 			}
	# 		}
	# 		else = {
	# 			add_tech_bonus = {
	# 				name = secret_bonus
	# 				bonus = 2
	# 				uses = 1
	# 				category = helicopter_tech
	# 			}
	# 		}
	# 	}

	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			has_political_power < 175
	# 			factor = 0
	# 		}
	# 		modifier = {
	# 			has_war = yes
	# 			factor = 2
	# 		}
	# 	}
	# }
	KTZ_future_tank = {
		icon = GFX_decision_generic_intelligence_operation
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
		}
		modifier = {
			research_speed_factor = -0.10
			consumer_goods_factor = 0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_future_tank"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_future_tank"
			clr_country_flag = KTZ_exotic_weapon_researching

			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				add_tech_bonus = {
					name = secret_bonus
					technology = super_heavy_tank_chassis_a
					technology = super_heavy_tank_chassis_b
					technology = super_heavy_tank_chassis_c
					bonus = 1
					uses = 1
					ahead_reduction = 2
				}
			}
			else = {
				add_tech_bonus = {
					name = secret_bonus
					technology = super_heavy_tank
					technology = super_heavy_tank_a
					technology = super_heavy_tank_b
					bonus = 1
					uses = 1
					ahead_reduction = 2
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_ground_effect_vehicle = {
		icon = GFX_decision_war_thunder
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			is_special_project_completed = sp:sp_air_jet_engine
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_ground_effect_vehicle"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_ground_effect_vehicle"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_ground_effect_vehicle_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_ground_effect_vehicle_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_depth_charges = {
		icon = GFX_decision_crossed_swords
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = advanced_depth_charges
			}
			else = {
				has_tech = improved_destroyer
			}
		}
		modifier = {
			research_speed_factor = -0.15
			consumer_goods_factor = 0.15
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_depth_charges"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_depth_charges"
			clr_country_flag = KTZ_exotic_weapon_researching
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				set_technology = {
					HIP_nuclear_depth_charges_full = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_depth_charges_full_effect
			}
			else = {
				set_technology = {
					HIP_nuclear_depth_charges_full_nomtg = 1
					popup = no
				}
				custom_effect_tooltip = HIP_nuclear_depth_charges_full_nomtg_effect
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
			set_country_flag = KTZ_has_nuclear_depth_charges
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_naval_mines = {
		icon = GFX_decision_generic_naval
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		visible = {
			has_dlc = "Man the Guns"
		}
		modifier = {
			research_speed_factor = -0.15
			consumer_goods_factor = 0.15
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_naval_mines"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_naval_mines"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_naval_mines_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_naval_mines_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_torpedos = {
		icon = GFX_decision_generic_naval
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_torpedos"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_torpedos"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_torpedos_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_torpedos_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_land_mines = {
		icon = GFX_decision_hol_drain_water_lines
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_land_mines"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_land_mines"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_land_mines_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_nuclear_land_mines_effect
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_nuclear_rocket_artillery = {
		icon = GFX_decision_generic_ignite_civil_war
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_nuclear_rocket_artillery"
			set_country_flag = KTZ_exotic_weapon_researching
			add_nuclear_bombs = -5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_nuclear_rocket_artillery"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_nuclear_rocket_artillery_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_one_nuke_a_month
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_air_launched_cruise_missiles = {
		icon = GFX_decision_gear
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			num_of_nukes > 4
			has_tech = sp_rockets_dual_chamber_rocket_engine_1
		}
		modifier = {
			research_speed_factor = -0.20
			consumer_goods_factor = 0.20
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_air_launched_cruise_missiles"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_air_launched_cruise_missiles"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_air_launched_cruise_missiles_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_air_launched_cruise_missiles_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_personal_grenade_launcher = {
		icon = GFX_decision_hol_engelandvaarders
		cost = 25
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			NOT = {
				has_country_flag = KTZ_exotic_weapon_researching
			}
			has_tech = support_weapons_d
			has_tech = advanced_infantry_weapons_c
		}
		modifier = {
			research_speed_factor = -0.1
			consumer_goods_factor = 0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_personal_grenade_launcher"
			set_country_flag = KTZ_exotic_weapon_researching
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_personal_grenade_launcher"
			clr_country_flag = KTZ_exotic_weapon_researching
			set_technology = {
				HIP_personal_grenade_launcher_tech = 1
				popup = no
			}
			custom_effect_tooltip = HIP_personal_grenade_launcher_effect
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
}

KTZ_fixing_abyssinia_cat = {
	KTZ_develop_abyssinian_front_state = {
		icon = GFX_decision_build_superhighway
		cost = 30
		days_remove = 45
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_country_flag = KTZ_old_abyssinian_front_active
			FROM = { has_state_flag = KTZ_old_abyssinian_front_state }
		}
		available = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { has_state_flag = KTZ_kattail_does_stuff_in_state }
			}
			custom_trigger_tooltip = {
				tooltip = needs_max_infra_in_state
				hidden_trigger = {
					FROM = {
						check_variable = { building_level@infrastructure > 4 }
					}
				}
			}
		}
		modifier = { industrial_capacity_factory = -0.20 }

		fire_only_once = yes

		on_map_mode = map_only

		state_target = yes

		target_array = owned_controlled_states

		complete_effect = {
			FROM = { set_state_flag = KTZ_kattail_does_stuff_in_state }
		}

		remove_effect = {
			custom_effect_tooltip = KTZ_develop_abyssinian_front_state_tt
			custom_effect_tooltip = KTZ_reduce_abyssinian_front_severity_tt
			FROM = {
				increase_state_category = yes
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
				}
				add_resource = {
					type = steel
					amount = 20
					state = THIS
				}
				add_resource = {
					type = chromium
					amount = 20
					state = THIS
				}
				clr_state_flag = KTZ_kattail_does_stuff_in_state
			}
			hidden_effect = {
				random_list = {
					70 = {
						add_to_variable = { KTZ_old_abyssinian_front_modifier_resistance_growth = -0.10 }
						add_to_variable = { KTZ_old_abyssinian_front_modifier_compliance_growth = 0.10 }
						FROM = {
							add_core_of = KTZ
							clr_state_flag = KTZ_old_abyssinian_front_state
							save_event_target_as = ktz_new_loyal_state
						}
						country_event = { id = katzen_AF.644 days = 1 }
					}
					30 = {}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_tour_abyssinian_front_state = {
		icon = GFX_decision_kattail
		cost = 50
		days_remove = 30
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_country_flag = KTZ_old_abyssinian_front_active
			FROM = { has_state_flag = KTZ_old_abyssinian_front_state }
		}
		available = {
			FROM = { is_controlled_by = ROOT NOT = { has_state_flag = KTZ_kattail_does_stuff_in_state } }
			NOT = { has_country_flag = KTZ_kattail_on_tour }
		}

		state_target = yes

		target_array = owned_controlled_states

		on_map_mode = map_only

		modifier = {
			stability_factor = -0.20
			war_support_factor = -0.20
		}

		complete_effect = {
			add_stability = -0.06
			FROM = { set_state_flag = KTZ_kattail_does_stuff_in_state }
			set_country_flag = KTZ_kattail_on_tour
		}

		remove_effect = {
			custom_effect_tooltip = KTZ_tour_abyssinian_front_state_tt
			custom_effect_tooltip = KTZ_reduce_abyssinian_front_severity_tt
			clr_country_flag = KTZ_kattail_on_tour
			FROM = { clr_state_flag = KTZ_kattail_does_stuff_in_state }
			hidden_effect = {
				random_list = {
					50 = {
						add_to_variable = { KTZ_old_abyssinian_front_modifier_resistance_growth = -0.10 }
						add_to_variable = { KTZ_old_abyssinian_front_modifier_compliance_growth = 0.10 }
						FROM = {
							add_core_of = KTZ
							clr_state_flag = KTZ_old_abyssinian_front_state
							save_event_target_as = ktz_new_loyal_state
						}
						country_event = { id = katzen_AF.644 days = 1 }
					}
					50 = {}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_peace_for_abyssinian_front = {
		icon = GFX_decision_flower
		cost = 100
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		visible = {
			has_country_flag = KTZ_old_abyssinian_front_active
		}
		available = {
			has_war = no
		}

		complete_effect = {
			custom_effect_tooltip = KTZ_peace_for_abyssinian_front_tt
			add_war_support = -0.10
			add_stability = 0.05
			set_country_flag = KTZ_kattail_no_war
			every_state = {
				limit = { has_state_flag = KTZ_old_abyssinian_front_state }
				hidden_effect = {
					random_list = {
						50 = {
							add_core_of = KTZ
							clr_state_flag = KTZ_old_abyssinian_front_state
							save_event_target_as = ktz_new_loyal_state
							ROOT = { country_event = { id = katzen_AF.644 days = 1 } }
						}
						50 = {}
					}
				}
			}
		}

		remove_effect = {
			custom_effect_tooltip = KTZ_peace_for_abyssinian_front_effect_tt
			custom_effect_tooltip = KTZ_reduce_abyssinian_front_severity_tt
			clr_country_flag = KTZ_kattail_no_war
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_raise_kitten_policy = {
		icon = GFX_decision_diamond_dog_paw
		cost = 100
		days_remove = 90
		allowed = {
			original_tag = KTZ
		}
		visible = {
			check_variable = { KTZ_kitten_policy_count < 10 }
			has_completed_focus = KTZ_food_for_the_masses
		}
		modifier = { political_power_cost = 0.5 }

		remove_effect = {
			custom_effect_tooltip = KTZ_raise_kitten_policy_tt
			hidden_effect = {
				add_to_variable = { KTZ_kitten_policy_count = 1 }
				add_to_variable = { KTZ_next_kitten_policy_count = 1 }
				add_to_variable = { KTZ_kittens_policy_compliance_growth = 0.05 }
				add_to_variable = { KTZ_kittens_policy_recruitable_population_factor = 0.025 }
				add_to_variable = { KTZ_kittens_policy_modifier_monthly_population = 0.20 }
				add_to_variable = { KTZ_kittens_policy_modifier_stability_factor = -0.05 }
			}
			KTZ_decrease_food_1 = yes
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_katzenify_the_nobles = {
		icon = GFX_decision_hol_exchange_intelligence_data
		cost = 200
		days_remove = 90
		allowed = {
			original_tag = KTZ
		}
		fire_only_once = yes
		visible = {
			is_ai = no
			has_completed_focus = KTZ_cementing_my_grasp
		}
		modifier = { political_power_cost = 2 }

		remove_effect = {
			KTZ_decrease_governor_noble_influence = yes
			add_command_power = 100
			army_experience = 100
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_educate_the_nobles = {
		icon = GFX_decision_bearbook
		cost = 200
		days_remove = 120
		allowed = {
			original_tag = KTZ
		}
		visible = {
			is_ai = no
			has_completed_focus = KTZ_cementing_my_grasp
		}
		fire_only_once = yes
		modifier = { research_speed_factor = -0.5 }

		remove_effect = {
			KTZ_decrease_governor_noble_influence = yes
			add_tech_bonus = {
				name = race_tech_bonus
				bonus = 1.0
				uses = 2
				category = race_tech
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_subdue_nobles = {
		icon = GFX_decision_generic_break_treaty
		cost = 150
		days_remove = 90
		allowed = {
			original_tag = KTZ
		}
		fire_only_once = yes
		visible = {
			is_ai = no
			has_completed_focus = KTZ_cementing_my_grasp
		}
		available = {
			num_of_controlled_states > 50
		}

		complete_effect = {
			KTZ_decrease_governor_noble_influence = yes
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	# KTZ_crush_remaining_nobles = {
	# 	icon = GFX_decision_CHL_carabineros
	# 	cost = 100
	# 	days_remove = 90
	# 	allowed = {
	# 		original_tag = KTZ
	# 	}
	# 	visible = {
	# 		has_completed_focus = KTZ_cementing_my_grasp
	# 	}
	# 	modifier = { research_speed_factor = -0.5 }

	# 	complete_effect = {
	# 		custom_effect_tooltip = KTZ_raise_kitten_policy_tt
	# 		hidden_effect = {
	# 			add_to_variable = { KTZ_kitten_policy_count = 1 }
	# 			add_to_variable = { KTZ_next_kitten_policy_count = 1 }
	# 			add_to_variable = { KTZ_kittens_policy_compliance_growth = 0.025 }
	# 			add_to_variable = { KTZ_kittens_policy_recruitable_population_factor = 0.025 }
	# 			add_to_variable = { KTZ_kittens_policy_modifier_monthly_population = 0.20 }
	# 			add_to_variable = { KTZ_kittens_policy_modifier_stability_factor = -0.10 }
	# 		}
	# 		KTZ_decrease_food = yes
	# 	}

	# 	ai_will_do = {
	# 		factor = 1
	# 		modifier = {
	# 			has_political_power < 175
	# 			factor = 0
	# 		}
	# 		modifier = {
	# 			has_war = yes
	# 			factor = 2
	# 		}
	# 	}
	# }
}

KTZ_feeding_abyssinia_cat = {
	KTZ_invest_in_abyssinia_proper = {
		icon = GFX_decision_flower
		cost = 25
		days_remove = 180
		allowed = {
			original_tag = KTZ
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = KTZ_invest_in_abyssinia_proper_tt
				hidden_trigger = {
					all_of = {
						array = KTZ_abyssinia_breadbasket_array
						value = state_id
						var:state_id = {
							is_controlled_by = ROOT
							OR = {
								check_variable = { building_level@infrastructure > 3 }
								impassable = yes
							}
						}
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 9
		}
		visible = {
			hidden_trigger = {
				check_variable = { KTZ_invest_in_abyssinia_proper_done_count < 2 }
			}
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_abyssinia_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }

		modifier = { civilian_factory_use = 10 }

		remove_effect = {
			KTZ_increase_food = yes
			hidden_effect = {
				add_to_variable = { KTZ_invest_in_abyssinia_proper_done_count = 1 }
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_the_great_lakes_breadbasket = {
		icon = GFX_decision_swamp
		cost = 50
		days_remove = 180
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_great_lakes_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
			num_of_civilian_factories_available_for_projects > 19
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_great_lakes_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }

		modifier = { civilian_factory_use = 20 }

		remove_effect = {
			KTZ_increase_food = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_arabia_breadbasket = {
		icon = GFX_decision_changeling_wing
		cost = 50
		days_remove = 90
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_arabia_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_arabia_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }
		remove_effect = {
			KTZ_increase_food = yes
		}
		modifier = { consumer_goods_factor = 0.20 }

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_hippogriffia_breadbasket = {
		icon = GFX_decision_CTH_Landowners
		cost = 50
		days_remove = 90
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_hippogriffia_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_hippogriffia_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }

		remove_effect = {
			KTZ_increase_food = yes
		}

		modifier = { political_power_cost = 1 }

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_herzlands_breadbasket = {
		icon = GFX_decision_HIE_tree
		cost = 25
		days_remove = 360
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_herzlands_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
			num_of_civilian_factories_available_for_projects > 19
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}

		modifier = { civilian_factory_use = 20 }

		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_herzlands_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }
		remove_effect = {
			KTZ_increase_food = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_kiria_breadbasket = {
		icon = GFX_decision_straw_hat
		cost = 50
		days_remove = 120
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_kiria_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
			num_of_civilian_factories_available_for_projects > 29
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_kiria_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }

		remove_effect = {
			KTZ_increase_food = yes
		}

		modifier = { civilian_factory_use = 30 }

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_gryphus_breadbasket = {
		icon = GFX_decision_wheat_bundle
		cost = 50
		days_remove = 90
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_gryphus_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
			num_of_civilian_factories_available_for_projects > 29
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}
		# highlight_states = {
		# 	highlight_states_trigger = {
		# 		is_in_array = {
		# 			array = ROOT.KTZ_gryphus_breadbasket_array
		# 			value = THIS.id
		# 		}
		# 	}
		# }

		remove_effect = {
			KTZ_increase_food = yes
		}

		modifier = { civilian_factory_use = 30 }

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	KTZ_equestria_breadbasket = {
		icon = GFX_decision_celestia
		cost = 50
		days_remove = 90
		fire_only_once = yes
		allowed = {
			original_tag = KTZ
		}
		available = {
			all_of = {
				array = KTZ_equestria_breadbasket_array
				value = state_id
				var:state_id = { is_controlled_by = ROOT }
			}
			num_of_civilian_factories_available_for_projects > 49
		}
		visible = {
			has_completed_focus = KTZ_food_for_the_masses
		}

		remove_effect = {
			KTZ_increase_food_2 = yes
		}

		modifier = { civilian_factory_use = 50 }

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
}

KTZ_zebtropa_project_cat = {
	# KTZ_zebtropa_dam = {
	# 	icon = generic_construction

	# 	allowed = {
	# 		original_tag = KTZ
	# 	}

	# 	available = {
	# 		controls_state = 869
	# 		controls_state = 874
	# 		num_of_civilian_factories_available_for_projects > 100
	# 	}
	# 	visible = {
	# 		hidden_trigger = {
	# 			has_completed_focus = KTZ_project_zebtropa
	# 		}
	# 	}

	# 	cost = 150
	# 	days_remove = 360
	# 	fire_only_once = yes
	# 	state_target = any_controlled_state
	# 	targets = { 869 }
	# 	modifier = {
	# 		civilian_factory_use = 100
	# 	}

	# 	ai_will_do = {
	# 		factor = 50
	# 	}
	# 	complete_effect = {
	# 		log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_dam target: [From.GetName]"
	# 	}
	# 	remove_effect = {
	# 		log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_zebtropa_dam target: [From.GetName]"
	# 		FROM = {
	# 			add_extra_state_shared_building_slots = 1
	# 			add_building_construction = {
	# 				type = industrial_complex
	# 				level = 1
	# 				instant_build = yes
	# 			}
	# 			add_building_construction = {
	# 				type = infrastructure
	# 				level = 5
	# 				instant_build = yes
	# 			}
	# 			add_building_construction = {
	# 				type = landmark_KTZ_zebtropa_dam
	# 				level = 1
	# 				instant_build = yes
	# 				province = 14646
	# 			}
	# 		}
	# 		create_entity = {
	# 			entity = tno_reference
	# 			id = 9999998
	# 			var = zebtropa_i_dam
	# 			x = 28
	# 			y = 8.2
	# 			z = -0.1
	# 			state = 869
	# 			province = 14632
	# 			scale = 1.1
	# 			rotation = 1.5
	# 			min_zoom = 3000.0
	# 		}
	# 		hidden_effect = {
	# 			#Initialize variables to drain the sea
	# 			set_variable = { zebtropa_sea_level_drop = 0 }
	# 			set_variable = { zebtropa_draining_level = 1 }

	# 			set_variable = { zebtropa_dam_power_output = 1 }
	# 			set_variable = { zebtropa_dam_power_output_per_m = 0.1 }

	# 			set_variable = { zebtropa_petaliters = 0 }
	# 			set_variable = { zebtropa_petaliters_per_m = 2 }

	# 			set_variable = { zebtropa_next_designation_threshold = 100 }
	# 			set_variable = { KTZ_zebtropa_solar_buff = 0 }

	# 			country_event = { id = katzen_AF.607 days = 180 }
	# 			set_country_flag = KTZ_zebtropa_dam_completed
	# 		}
	# 		custom_effect_tooltip = KTZ_zebtropa_dam_decision_tt
	# 		# TODO WUW CLOSE THE STRAIT?
	# 		add_dynamic_modifier = { modifier = KTZ_the_zebtropa_dam_modifier }
	# 		hidden_effect = { news_event = { id = katzen_AF.505 } }
	# 	}
	# }

	KTZ_build_zebtropa_mirror_array = {
		icon = celestia

		allowed = {
			original_tag = KTZ
		}

		visible = {
			hidden_trigger = {
				has_country_flag = KTZ_zebtropa_dam_completed
				FROM = {
					NOT = { has_state_flag = KTZ_has_mirror_array }
					is_controlled_by = KTZ
				}		
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 50
		}

		cost = 25
		days_remove = 90
		on_map_mode = map_only
		modifier = {
			civilian_factory_use = 49
		}
		state_target = any
		target_array = KTZ_zebtropa_states_array

		target_trigger = {
			FROM = {
				NOT = { has_state_flag = KTZ_has_mirror_array }
			}
		}
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_build_zebtropa_mirror_array target: [From.GetName]"
		}
		remove_effect = {
			custom_effect_tooltip = KTZ_build_zebtropa_mirror_array_tt
			log = "[GetDateText]: [Root.GetName]: Decision remove KTZ_build_zebtropa_mirror_array target: [From.GetName]"
			hidden_effect = {
				KTZ = {
					add_to_variable = { zebtropa_monthly_sea_level_drop = 0.5 }
					add_to_variable = { KTZ_zebtropa_decision_gui_dirty = 1 }
				}
			}
			FROM = {
				hidden_effect = {
					set_state_flag = KTZ_has_mirror_array
				}
			}
		}
	}

	#Designation
	KTZ_zebtropa_designation_arabian_coast = {
		icon = generic_construction

		allowed = {
			original_tag = KTZ
		}

		visible = {
			has_country_flag = KTZ_zebtropa_dam_completed
			FROM = {
				is_controlled_by = KTZ
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 870
				state = 869
				state = 871
				state = 860
				state = 859
				state = 861
				state = 858
				state = 851
				state = 849
				state = 848
				state = 846
			}
		}

		targets = { 851 }
		state_target = any

		available = {
			hidden_trigger = {
				NOT = {
					OR = {
						has_country_flag = KTZ_zebtropa_designation_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_maretonian_coast
						has_country_flag = KTZ_zebtropa_designation_riseia_coast
						has_country_flag = KTZ_zebtropa_designation_north_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_yemane_coast
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_and_decisions_view

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = KTZ_zebtropa_seabed_designation_tt
			set_country_flag = KTZ_zebtropa_designation_arabian_coast
			country_event = { id = katzen_AF.630 }
			FROM = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			if = {
				limit = { 851 = { has_state_flag = KTZ_settlement_designation } }
				851 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_arabia_array
					add_manpower = 25000
					increase_state_category = yes
				}
			}
			else_if = {
				limit = { 851 = { has_state_flag = KTZ_dredging_designation } }
				851 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_arabia_array
					add_manpower = 10000
					KTZ = {
						add_resource = { type = aluminium 	amount = 10 state = PREV }
						add_resource = { type = steel 		amount = 10 state = PREV }
						add_resource = { type = tungsten 	amount = 5 state = PREV }
						add_resource = { type = chromium 	amount = 5 state = PREV }
						add_resource = { type = crystals 	amount = 5 state = PREV }
					}
				}
			}
			else_if = {
				limit = { 851 = { has_state_flag = KTZ_solar_designation } }
				851 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_arabia_array
					add_manpower = 10000
					KTZ = { add_to_variable = { KTZ_zebtropa_solar_buff = 0.001 } }
				}
			}
		}
	}

	KTZ_zebtropa_designation_maretonian_coast = {
		icon = generic_construction

		allowed = {
			original_tag = KTZ
		}

		visible = {
			has_country_flag = KTZ_zebtropa_dam_completed
			FROM = {
				is_controlled_by = KTZ
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 874
				state = 999
				state = 998
				state = 214
				state = 1002
				state = 1003
				state = 1006
				state = 1005
				state = 1007
			}
		}

		targets = { 1002 }
		state_target = any

		available = {
			hidden_trigger = {
				NOT = {
					OR = {
						has_country_flag = KTZ_zebtropa_designation_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_maretonian_coast
						has_country_flag = KTZ_zebtropa_designation_riseia_coast
						has_country_flag = KTZ_zebtropa_designation_north_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_yemane_coast
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_and_decisions_view

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = KTZ_zebtropa_seabed_designation_tt
			set_country_flag = KTZ_zebtropa_designation_maretonian_coast
			country_event = { id = katzen_AF.630 }
			FROM = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			if = {
				limit = { 1002 = { has_state_flag = KTZ_settlement_designation } }
				1002 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_maretonia_array
					add_manpower = 25000
					increase_state_category = yes
				}
			}
			else_if = {
				limit = { 1002 = { has_state_flag = KTZ_dredging_designation } }
				1002 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_maretonia_array
					add_manpower = 10000
					KTZ = {
						add_resource = { type = aluminium 	amount = 10 state = PREV }
						add_resource = { type = steel 		amount = 10 state = PREV }
						add_resource = { type = tungsten 	amount = 5 state = PREV }
						add_resource = { type = chromium 	amount = 5 state = PREV }
						add_resource = { type = crystals 	amount = 5 state = PREV }
					}
				}
			}
			else_if = {
				limit = { 1002 = { has_state_flag = KTZ_solar_designation } }
				1002 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_maretonia_array
					add_manpower = 10000
					KTZ = { add_to_variable = { KTZ_zebtropa_solar_buff = 0.001 } }
				}
			}
		}
	}

	KTZ_zebtropa_designation_riseia_coast = {
		icon = generic_construction

		allowed = {
			original_tag = KTZ
		}

		visible = {
			has_country_flag = KTZ_zebtropa_dam_completed
			FROM = {
				is_controlled_by = KTZ
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 962
				state = 994
				state = 997
				state = 995
				state = 199
				state = 986
				state = 987
				state = 988
				state = 989
			}
		}

		targets = { 199 }
		state_target = any

		available = {
			hidden_trigger = {
				NOT = {
					OR = {
						has_country_flag = KTZ_zebtropa_designation_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_maretonian_coast
						has_country_flag = KTZ_zebtropa_designation_riseia_coast
						has_country_flag = KTZ_zebtropa_designation_north_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_yemane_coast
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_and_decisions_view

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = KTZ_zebtropa_seabed_designation_tt
			set_country_flag = KTZ_zebtropa_designation_riseia_coast
			country_event = { id = katzen_AF.630 }
			FROM = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			if = {
				limit = { 199 = { has_state_flag = KTZ_settlement_designation } }
				199 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_riseia_array
					add_manpower = 25000
					increase_state_category = yes
				}
			}
			else_if = {
				limit = { 199 = { has_state_flag = KTZ_dredging_designation } }
				199 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_riseia_array
					add_manpower = 10000
					KTZ = {
						add_resource = { type = aluminium 	amount = 10 state = PREV }
						add_resource = { type = steel 		amount = 10 state = PREV }
						add_resource = { type = tungsten 	amount = 5 state = PREV }
						add_resource = { type = chromium 	amount = 5 state = PREV }
						add_resource = { type = crystals 	amount = 5 state = PREV }
					}
				}
			}
			else_if = {
				limit = { 199 = { has_state_flag = KTZ_solar_designation } }
				199 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_riseia_array
					add_manpower = 10000
					KTZ = { add_to_variable = { KTZ_zebtropa_solar_buff = 0.001 } }
				}
			}
		}
	}

	KTZ_zebtropa_designation_north_arabian_coast = {
		icon = generic_construction

		allowed = {
			original_tag = KTZ
		}

		visible = {
			has_country_flag = KTZ_zebtropa_dam_completed
			FROM = {
				is_controlled_by = KTZ
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 845
				state = 826
				state = 824
				state = 814
				state = 813
				state = 872
				state = 987
			}
		}
		state_target = any

		targets = { 818 }

		available = {
			hidden_trigger = {
				NOT = {
					OR = {
						has_country_flag = KTZ_zebtropa_designation_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_maretonian_coast
						has_country_flag = KTZ_zebtropa_designation_riseia_coast
						has_country_flag = KTZ_zebtropa_designation_north_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_yemane_coast
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_and_decisions_view

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = KTZ_zebtropa_seabed_designation_tt
			set_country_flag = KTZ_zebtropa_designation_north_arabian_coast
			country_event = { id = katzen_AF.630 }
			FROM = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			if = {
				limit = { 818 = { has_state_flag = KTZ_settlement_designation } }
				818 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_north_arabia_array
					add_manpower = 25000
					increase_state_category = yes
				}
			}
			else_if = {
				limit = { 818 = { has_state_flag = KTZ_dredging_designation } }
				818 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_north_arabia_array
					add_manpower = 10000
					KTZ = {
						add_resource = { type = aluminium 	amount = 10 state = PREV }
						add_resource = { type = steel 		amount = 10 state = PREV }
						add_resource = { type = tungsten 	amount = 5 state = PREV }
						add_resource = { type = chromium 	amount = 5 state = PREV }
						add_resource = { type = crystals 	amount = 5 state = PREV }
					}
				}
			}
			else_if = {
				limit = { 818 = { has_state_flag = KTZ_solar_designation } }
				818 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_north_arabia_array
					add_manpower = 10000
					KTZ = { add_to_variable = { KTZ_zebtropa_solar_buff = 0.001 } }
				}
			}
		}
	}

	KTZ_zebtropa_designation_yemane_coast = {
		icon = generic_construction

		allowed = {
			original_tag = KTZ
		}

		visible = {
			has_country_flag = KTZ_zebtropa_dam_completed
			FROM = {
				is_controlled_by = KTZ
				check_variable = { zebtropa_state_spec_count > 0 }
			}
		}

		highlight_states = {
			highlight_state_targets = {
				state = 990
				state = 991
				state = 956
				state = 954
				state = 789
				state = 788
				state = 795
				state = 799
				state = 798
			}
		}

		state_target = any
		targets = { 788 }

		available = {
			hidden_trigger = {
				NOT = {
					OR = {
						has_country_flag = KTZ_zebtropa_designation_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_maretonian_coast
						has_country_flag = KTZ_zebtropa_designation_riseia_coast
						has_country_flag = KTZ_zebtropa_designation_north_arabian_coast
						has_country_flag = KTZ_zebtropa_designation_yemane_coast
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 29
		}

		modifier = {
			civilian_factory_use = 30
		}

		days_remove = 90
		on_map_mode = map_and_decisions_view

		ai_will_do = { factor = 50 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			custom_effect_tooltip = KTZ_zebtropa_seabed_designation_tt
			set_country_flag = KTZ_zebtropa_designation_yemane_coast
			country_event = { id = katzen_AF.630 }
			FROM = { subtract_from_variable = { zebtropa_state_spec_count = 1 } }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KTZ_zebtropa_settlement_designation target: [From.GetName]"
			if = {
				limit = { 788 = { has_state_flag = KTZ_settlement_designation } }
				788 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_yemane_array
					add_manpower = 25000
					increase_state_category = yes
				}
			}
			else_if = {
				limit = { 788 = { has_state_flag = KTZ_dredging_designation } }
				788 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_yemane_array
					add_manpower = 10000
					KTZ = {
						add_resource = { type = aluminium 	amount = 10 state = PREV }
						add_resource = { type = steel 		amount = 10 state = PREV }
						add_resource = { type = tungsten 	amount = 5 state = PREV }
						add_resource = { type = chromium 	amount = 5 state = PREV }
						add_resource = { type = crystals 	amount = 5 state = PREV }
					}
				}
			}
			else_if = {
				limit = { 788 = { has_state_flag = KTZ_solar_designation } }
				788 = { KTZ_clear_state_designation_flags = yes }
				for_each_scope_loop = {
					array = KTZ_zebtropa_states_yemane_array
					add_manpower = 10000
					KTZ = { add_to_variable = { KTZ_zebtropa_solar_buff = 0.001 } }
				}
			}
		}
	}
}