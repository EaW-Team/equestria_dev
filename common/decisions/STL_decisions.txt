form_equ_stg = {
	form_stg = {
		icon = equalistdec
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			any_owned_state = {
				is_core_of = STG
			}
			OR = {
				has_government = communism
			}
		}
        available = {			
			has_war = no
			custom_trigger_tooltip = {
    			tooltip = STL_stg_check
				owns_state = 240
				owns_state = 334
				owns_state = 678
				owns_state = 165
				owns_state = 153
				owns_state = 235
				owns_state = 237
				owns_state = 153
				owns_state = 161
				owns_state = 225
				owns_state = 168
				owns_state = 166
				owns_state = 233
				owns_state = 332
				owns_state = 234
			}
			NOT = {
				country_exists = STG
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			custom_effect_tooltip = form_stg_tt1
			if = {
				limit = {
					has_government = communism
					NOT = {
						has_country_leader = {
							character = STL_burlap
							ruling_only = yes
						}
					}
				}
				set_cosmetic_tag = STG_OUR
			}
			if = {
				limit = {
					has_country_leader = {
						character = STL_double_diamond
						ruling_only = yes
					}
				}
				load_focus_tree = stl_double_diamond_expanded
			}
			else_if = {
				limit = {
					has_government = communism
					has_country_leader = {
						character = STL_burlap
						ruling_only = yes
					}
				}
				set_cosmetic_tag = STG_EQUAL
			}

			
			add_stability = 0.1
			set_party_name = { 
			    ideology = communism
    			long_name = STL_STG_communism_party_long 
    			name = STL_STG_communism_party
			}
			set_party_name = { 
    			ideology = democratic 
			    long_name = STL_STG_democratic_party_long 
    			name = STL_STG_democratic_party
			}
			set_party_name = { 
    			ideology = neutrality 
    			long_name = STL_STG_neutrality_party_long 
    			name = STL_STG_neutrality_party
			}
			set_party_name = { 
    			ideology = fascism
			    long_name = STL_STG_fascism_party
			    name = STL_STG_fascism_party
			}
			
			custom_effect_tooltip = form_stg_tt2
			153 = {
				set_state_name = STL_vp_our_stalliongrad
			}
			set_capital = { 
				state = 153 
				remember_old_capital = no
			}
			235 = {
				set_state_name = STL_vp_starlight_glimmer
			}
			166 = {
				set_state_name = STL_vp_ourhoof 
			}
			add_victory_points = {
				province = 3335
				value = 10
			}
			custom_effect_tooltip = form_stg_tt5
			STG = { STL = { transfer_technology = yes } }
			custom_effect_tooltip =	form_stg_tt3
		    set_rule = { can_create_factions = yes }
			create_faction = STL_FACTION
			custom_effect_tooltip =	form_stg_tt4
			set_country_flag = formed_stg_stl
			STG = {
				every_character = {
					limit = {
						is_country_leader = no
						OR = {
							is_character = STG_vinous_kostylev
							is_character = STG_alexia_goldgear
							is_character = STG_cherry_swirl
							#is_character = STG_katya_ironstead
						}
					}
					set_nationality = ROOT
				}
			}
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = STG
							is_in_array = {
								state_original_cores = STG
							}
						}
					}
					add_core_of = STL
				}
			}
		}
	}
	form_eqs = {
		icon = equalistdec
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
		has_country_flag = formed_stg_stl
			any_owned_state = {
				is_core_of = EQS
			}
			OR = {
				has_government = communism
			}
		}
        available = {		
			has_war = no
			has_country_flag = formed_stg_stl
			custom_trigger_tooltip = {
    			tooltip = form_eqs_check
			owns_state = 3
			owns_state = 75
			owns_state = 70
			owns_state = 74
			owns_state = 12
			}
			NOT = {
				country_exists = EQS
				country_exists = NLR
				country_exists = ELF
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			custom_effect_tooltip = form_EQS_tt3
			if = {
				limit = {
					has_government = communism
					NOT = {
						has_country_leader = {
							character = STL_burlap
							ruling_only = yes
						}
					}
				}
				set_cosmetic_tag = EQS_OUR
			}
			else_if = {
				limit = {
					has_government = communism
					has_country_leader = {
						character = STL_burlap
						ruling_only = yes
					}
				}
				set_cosmetic_tag = EQS_EQUAL
			}
			
			add_stability = 0.1
			set_party_name = { 
			    ideology = communism
    			long_name = STL_EQS_communism_party_long 
    			name = STL_EQS_communism_party
			}
			set_party_name = { 
    			ideology = democratic 
			    long_name = STL_EQS_democratic_party_long 
    			name = STL_EQS_democratic_party
			}
			set_party_name = { 
    			ideology = neutrality 
    			long_name = STL_EQS_neutrality_party_long 
    			name = STL_EQS_neutrality_party
			}
			set_party_name = { 
    			ideology = fascism
			    long_name = STL_EQS_fascism_party
			    name = STL_EQS_fascism_party
			}
			
			custom_effect_tooltip = form_EQS_tt
			3 = {
				set_state_name = STL_vp_our_canterlot
				set_state_category = megalopolis
			}
			set_province_name = {
    			id = 179
    			name = STL_vp_our_canterlot
			}
			set_capital = { 
				state = 3 
				remember_old_capital = no
			}
			add_victory_points = {
				province = 3335
				value = 5
			}
			custom_effect_tooltip = form_EQS_tt2
			EQS = { STL = { transfer_technology = yes } }
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = EQS
							is_in_array = {
								state_original_cores = EQS
							}
						}
					}
					add_core_of = STL
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = CRY
							is_in_array = {
								state_original_cores = CRY
							}
						}
					}
					add_core_of = STL
				}
			}
		}
	}
}

STL_double_diamond_social_engineering = {
	STL_true_friendship_countdown = {
		icon = equalistdec
		available = {
			always = no
		}
		allowed = {
			always = no
		}
		is_good = no
		days_mission_timeout = 365
		fire_only_once = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CHN_PLB_border_war_timeout"
			country_event = double_diamond.34
		}
	}
	STL_design_new_music = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_1
			custom_effect_tooltip = STL_new_music_tt
			hidden_effect = {
				country_event = double_diamond.1
			}
		}
	}
	STL_write_new_stories = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_2
			custom_effect_tooltip = STL_new_stories_tt
			hidden_effect = {
				country_event = double_diamond.2
			}
		}
	}
	STL_reorganize_the_family = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_3
			custom_effect_tooltip = STL_new_families_tt
			hidden_effect = {
				country_event = double_diamond.3
			}
		}
	}
	STL_form_the_equal_little_ones = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_4
			custom_effect_tooltip = STL_new_kids_tt
			hidden_effect = {
				country_event = double_diamond.4
			}
		}
	}
	STL_abolish_racist_language = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_5
			custom_effect_tooltip = STL_no_more_racism_tt
			hidden_effect = {
				country_event = double_diamond.5
			}
		}
	}
	STL_new_military_division_design = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
			has_tech = mechanised_infantry
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_6
			custom_effect_tooltip = STL_mech_for_all_tt
			hidden_effect = {
				country_event = double_diamond.6
			}
		}
	}
	STL_non_hierarchical_military = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_7
			custom_effect_tooltip = STL_no_more_generals_tt
			hidden_effect = {
				country_event = double_diamond.7
			}
		}
	}
	STL_horizontal_factory_life = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_8
			custom_effect_tooltip = STL_no_more_bosses_tt
			hidden_effect = {
				country_event = double_diamond.8
			}
		}
	}
	STL_the_song_of_liberation = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_9
			custom_effect_tooltip = STL_guaranteed_liberties_tt
			hidden_effect = {
				country_event = double_diamond.9
			}
		}
	}
	STL_glorious_future = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_10
			custom_effect_tooltip = STL_glorious_future_tt
			hidden_effect = {
				country_event = double_diamond.10
			}
		}
	}
}

STL_bring_equality = {
	STL_spread_equal_assimilation = {
		
		icon = GFX_decision_starlight_glimmer
		ai_will_do = {
			factor = 20
		}
		cost = 25
		days_remove = 30
		fire_only_once = no
		on_map_mode = map_only 
		state_target = yes
		target_array = owned_controlled_states
		target_root_trigger = {
			has_completed_focus = STL_new_equal_friends
		}
		target_trigger = {
			FROM = {
				is_on_continent = europe
				NOT = {
					is_core_of = ROOT
					is_core_of = CRY
					is_core_of = EQS
					is_core_of = STG
					is_in_array = {
						state_original_cores = CRY
					}
					is_in_array = {
						state_original_cores = EQS
					}
					is_in_array = {
						state_original_cores = STG
					}
					has_dynamic_modifier = {
						modifier = STL_equal_assimilation
					}
				}
			}
		}
		remove_effect = {
			FROM = {
				add_compliance = 10
				add_resistance = -10
				add_dynamic_modifier = {
					modifier = STL_equal_assimilation
				}
			}
		}
	}
}

STL_leftist_power_balance_decisions = {
	
	STL_fortify_the_town = {
		
		icon = GFX_decision_bunkers

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value < 0.1
			}
		}

		days_remove = 30 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = -0.1
			}		
		}

		remove_effect = {
			57 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3335
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}

	}
	
	STL_modernize_the_town = {
		
		icon = GFX_decision_roads

		priority = 99 

		allowed = { original_tag = STL }
		cost = 30
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value > -0.1
			}
		}

		days_remove = 30 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = 0.1
			}		
		}

		remove_effect = {
			add_stability = 0.05
			57 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

	}
	STL_give_night_glider_an_airbase = {
		
		icon = GFX_decision_biplane

		priority = 99 

		allowed = { original_tag = STL }
		cost = 30
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 30 	

		complete_effect = {
			if = {
				limit = {
					is_power_balance_side_active = {
						id = STL_leftist_bop
						side = STL_leftist_bop_equalist
					}
				}
				add_power_balance_value = {
					id = STL_leftist_bop
					value = 0.05
				}	
			}	
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = STL_leftist_bop
						side = STL_leftist_bop_reformist
					}
				}
				add_power_balance_value = {
					id = STL_leftist_bop
					value = -0.05
				}	
			}
		}

		remove_effect = {
			57 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = STL_10_planes
			hidden_effect = {
				if = {
					limit = {
						has_dlc = "By Blood Alone"
					}
					load_oob = "STL_night_glider_bba"
				}
				else = {
					load_oob = "STL_night_glider_legacy"
				}
			}
		}

	}
	STL_declare_state_of_siege = {
		
		icon = GFX_decision_megaphone_alert

		priority = 99 

		allowed = { original_tag = STL }
		cost = 75
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value < -0.5
			}
		}

		days_remove = 45

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = -0.15
			}
		}

		remove_effect = {
			add_war_support = 0.05
			add_manpower = 5000
			EAW_raise_economic_law = yes
		}

	}
	STL_invite_foreign_capital = {
		
		icon = GFX_decision_piggybank

		priority = 99 

		allowed = { original_tag = STL }
		cost = 75
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value > 0.5
			}
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = 0.15
			}
		}

		remove_effect = {
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 200
			}
		}

	}
	
}
STL_equalist_power_balance_decisions = {
	
	STL_revise_quotas_downward = {
		
		icon = GFX_decision_gear

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		days_re_enable = 180
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
		}

		modifier = {
			stability_weekly_factor = 0.01
			production_factory_max_efficiency_factor = -0.02
		}

	}
	STL_stoke_glimmerite_nostalgia = {
		
		icon = GFX_decision_starlight_glimmer

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		days_re_enable = 180
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
		}

		modifier = {
			resistance_growth = 0.1
			war_support_weekly = 0.01
		}

	}
	STL_allow_voluntary_cutie_mark_removal = {
		
		icon = equalistdec

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.2
			}		
		}

		remove_effect = {
			add_political_power = 200
			add_stability = -0.05
			hidden_effect = {
				country_event = double_diamond.24
			}
		}

	}
	STL_create_heavy_fortified_artillery = {
		
		icon = GFX_decision_generic_scorched_earth

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}
		available = {
			has_equipment = {
				artillery_equipment > 120
			}
		}

		days_remove = 45 	

		complete_effect = {
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = -120
			}
			add_power_balance_value = {
				id = STL_equalist_bop
				value = 0.1
			}		
		}

		remove_effect = {
			57 = {
				add_dynamic_modifier = {
					modifier = WAR_armored_battery
				}
			}
		}

	}
	STL_nothing_but_the_rifle = {
		
		icon = GFX_decision_rifles

		priority = 99 

		allowed = { original_tag = STL }
		days_re_enable = 180
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 60 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
			add_ideas = STL_cheaply_made_rifles
		}

		remove_effect = {
			remove_ideas = STL_cheaply_made_rifles
		}

	}
	
}