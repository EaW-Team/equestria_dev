form_equ_stg = {
	form_stg = {
		icon = equalistdec
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			any_owned_state = {
				is_core_of = STG
			}
			NOT = {
				has_government = fascism
			}
		}
        available = {			
			has_war = no
			custom_trigger_tooltip = {
    			tooltip = STL_stg_check
				owns_state = 240
				owns_state = 334
				owns_state = 678
				owns_state = 165
				owns_state = 153
				owns_state = 235
				owns_state = 237
				owns_state = 153
				owns_state = 161
				owns_state = 225
				owns_state = 168
				owns_state = 166
				owns_state = 233
				owns_state = 332
				owns_state = 234
			}
			NOT = {
				country_exists = STG
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			custom_effect_tooltip = form_stg_tt1
			if = {
				limit = {
					has_country_leader = {
						character = STL_double_diamond
						ruling_only = yes
					}
				}
				set_cosmetic_tag = STG_OUR
				load_focus_tree = stl_double_diamond_expanded
				hidden_effect = {
					news_event = { id = ourtown_news.1 hours = 1 }
				}
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = STL_night_glider
						ruling_only = yes
					}
				}
				set_cosmetic_tag = STG_nightglider
				load_focus_tree = stl_night_glider_expanded
				set_variable = {
					ng_stg_var_political_power_gain = -0.2
				}
				set_variable = {
					ng_stg_var_stability_factor = -0.3
				}
				set_variable = {
					ng_stg_var_war_support_factor = -0.15
				}
				set_variable = {
					ng_stg_var_consumer_goods_factor = 0.2
				}
				set_variable = {
					ng_stg_var_conscription_factor = -0.2
				}
				set_variable = {
					ng_stg_var_production_speed_buildings_factor = -0.1
				}
				set_variable = {
					ng_stg_var_industrial_capacity_factory = -0.1
				}
				set_variable = {
					ng_stg_var_surrender_limit = -0.1
				}
				add_dynamic_modifier = {
					modifier = STL_nightglider_stalliongrad
				}
				hidden_effect = {
					news_event = { id = ourtown_news.4 hours = 1 }
				}
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = STL_sugar_belle
						ruling_only = yes
					}
				}
				if = {
					limit = {
						has_country_flag = STG_attacked_STL
					}
					load_focus_tree = stl_sugar_belle_mean 
					set_cosmetic_tag = STG_golden_mountain_alt
				}
				else = {
					load_focus_tree = stl_sugar_belle_nice  
					set_cosmetic_tag = STG_golden_mountain
				}
				hidden_effect = {
					news_event = { id = ourtown_news.6 hours = 1 }
				}
			}
			else_if = {
				limit = {
					has_government = communism
					has_country_leader = {
						character = STL_burlap
						ruling_only = yes
					}
				}
				set_cosmetic_tag = STG_EQUAL
			}

			
			add_stability = 0.1
			if = {
				limit = {
					has_country_leader_ideology = equalism
				}
				set_party_name = { 
			    	ideology = communism
    				long_name = STL_STG_communism_party_long 
    				name = STL_STG_communism_party
				}
				set_party_name = { 
					ideology = democratic 
					long_name = STL_STG_democratic_party_long 
					name = STL_STG_democratic_party
				}
			}
			set_party_name = { 
    			ideology = neutrality 
    			long_name = STL_STG_neutrality_party_long 
    			name = STL_STG_neutrality_party
			}
			set_party_name = { 
    			ideology = fascism
			    long_name = STL_STG_fascism_party
			    name = STL_STG_fascism_party
			}
			
			custom_effect_tooltip = form_stg_tt2
			if = {
				limit = {
					has_country_leader_ideology = equalism
				}
				153 = {
					set_state_name = STL_vp_our_stalliongrad
				}
				235 = {
					set_state_name = STL_vp_starlight_glimmer
				}
				166 = {
					set_state_name = STL_vp_ourhoof 
				}
			}
			if = {
				limit = {
					NOT = {
						has_government = communism
					}
				}
				153 = {
					set_state_name = STL_vp_respulikansk_on_severyana
				}
				235 = {
					set_state_name = STL_vp_kremloyv
				}
				166 = {
					set_state_name = STL_vp_primorsk 
				}
			}
			add_victory_points = {
				province = 3335
				value = 10
			}
			set_capital = { 
				state = 153 
				remember_old_capital = no
			}
			custom_effect_tooltip = form_stg_tt5
			STG = { STL = { transfer_technology = yes } }
			custom_effect_tooltip =	form_stg_tt3
		    set_rule = { can_create_factions = yes }
			create_faction = STL_FACTION
			custom_effect_tooltip =	form_stg_tt4
			set_country_flag = formed_stg_stl
			STG = {
				every_character = {
					limit = {
						is_country_leader = no
						OR = {
							is_character = STG_vinous_kostylev
							is_character = STG_alexia_goldgear
							is_character = STG_cherry_swirl
							#is_character = STG_katya_ironstead
						}
					}
					set_nationality = ROOT
				}
			}
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = STG
							is_in_array = {
								state_original_cores = STG
							}
						}
					}
					add_core_of = STL
				}
			}
		}
	}
	form_eqs = {
		icon = equalistdec
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
		has_country_flag = formed_stg_stl
			any_owned_state = {
				is_core_of = EQS
			}
			OR = {
				has_government = communism
			}
		}
        available = {		
			has_war = no
			has_country_flag = formed_stg_stl
			custom_trigger_tooltip = {
    			tooltip = form_eqs_check
			owns_state = 3
			owns_state = 75
			owns_state = 70
			owns_state = 74
			owns_state = 12
			owns_state = 38
			owns_state = 66
			}
			NOT = {
				country_exists = EQS
				country_exists = NLR
				country_exists = ELF
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			custom_effect_tooltip = form_EQS_tt3
			if = {
				limit = {
					has_country_leader = {
						character = STL_double_diamond
						ruling_only = yes
					}
				}
				set_cosmetic_tag = EQS_OUR
				hidden_effect = {
					news_event = { id = ourtown_news.2 hours = 1 }
				}
			}
			if = {
				limit = {
					has_country_leader = {
						character = STL_night_glider
						ruling_only = yes
					}
					has_idea = STL_ng_all_things
				}
				set_cosmetic_tag = EQS_nightglider
				load_focus_tree = stl_night_glider_expanded_again
				hidden_effect = {
					news_event = { id = ourtown_news.5 hours = 1 }
				}
			}
			else_if = {
				limit = {
					has_government = communism
					has_country_leader = {
						character = STL_burlap
						ruling_only = yes
					}
				}
				set_cosmetic_tag = EQS_EQUAL
			}
			
			add_stability = 0.1
			if = {
				limit = {
					has_country_leader_ideology = equalism
				}
				set_party_name = { 
				    ideology = communism
    				long_name = STL_EQS_communism_party_long 
    				name = STL_EQS_communism_party
				}
			}
			set_party_name = { 
    			ideology = democratic 
			    long_name = STL_EQS_democratic_party_long 
    			name = STL_EQS_democratic_party
			}
			set_party_name = { 
    			ideology = neutrality 
    			long_name = STL_EQS_neutrality_party_long 
    			name = STL_EQS_neutrality_party
			}
			set_party_name = { 
    			ideology = fascism
			    long_name = STL_EQS_fascism_party
			    name = STL_EQS_fascism_party
			}
			
			custom_effect_tooltip = form_EQS_tt
			set_country_flag = formed_eqs_stl
			if = {
				limit = {
					has_country_leader_ideology = equalism
				}
				3 = {
					set_state_name = STL_vp_our_canterlot
					set_state_category = megalopolis
				}
				set_province_name = {
    				id = 179
	    			name = STL_vp_our_canterlot
				}
			}
			set_capital = { 
				state = 3 
				remember_old_capital = no
			}
			add_victory_points = {
				province = 3335
				value = 5
			}
			custom_effect_tooltip = form_EQS_tt2
			EQS = { STL = { transfer_technology = yes } }
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = EQS
							is_in_array = {
								state_original_cores = EQS
							}
						}
					}
					add_core_of = STL
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = CRY
							is_in_array = {
								state_original_cores = CRY
							}
						}
					}
					add_core_of = STL
				}
			}
		}
	}
	form_equus = {
		icon = equalistdec
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_country_flag = formed_eqs_stl
			has_country_leader_ideology = equalism
		}
        available = {		
			has_war = no
			has_country_flag = formed_eqs_stl
			custom_trigger_tooltip = {
    			tooltip = form_equus_check
				all_of = {
					array = global.europe_states
					var:v = { 
						OR = {
							is_owned_by = ROOT
							state = 1196 # we don't need les meridiennes
							state = 1197
							state = 1198
						}
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			custom_effect_tooltip = form_equus_tt3
			if = {
				limit = {
					has_government = communism
					NOT = {
						has_country_leader = {
							character = STL_burlap
							ruling_only = yes
						}
					}
				}
				set_cosmetic_tag = EQUUS_OUR
			}
			
			add_stability = 0.1
			set_party_name = { 
			    ideology = communism
    			long_name = STL_EQUUS_communism_party_long 
    			name = STL_EQUUS_communism_party
			}
			set_party_name = { 
    			ideology = democratic 
			    long_name = STL_EQUUS_democratic_party_long 
    			name = STL_EQUUS_democratic_party
			}
			set_party_name = { 
    			ideology = neutrality 
    			long_name = STL_EQUUS_neutrality_party_long 
    			name = STL_EQUUS_neutrality_party
			}
			set_party_name = { 
    			ideology = fascism
			    long_name = STL_EQUUS_fascism_party_long
			    name = STL_EQUUS_fascism_party
			}
			
			251 = {
				set_state_name = STL_vp_our_hives
			}
			set_province_name = {
    			id = 11045
    			name = STL_vp_our_hives
			}
			every_owned_state = {
				limit = {
					is_on_continent = europe
					NOT = {
						is_core_of = ROOT
					}
				}
				add_compliance = 20
				add_resistance = -20
			}
			hidden_effect = {
				news_event = { id = ourtown_news.3 hours = 1 }
			}
		}
	}
}

STL_double_diamond_social_engineering = {
	STL_true_friendship_countdown = {
		icon = equalistdec
		available = {
			always = no
		}
		allowed = {
			always = no
		}
		is_good = no
		days_mission_timeout = 365
		fire_only_once = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout CHN_PLB_border_war_timeout"
			country_event = double_diamond.34
		}
	}
	STL_design_new_music = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_1
			custom_effect_tooltip = STL_new_music_tt
			hidden_effect = {
				country_event = double_diamond.1
			}
		}
	}
	STL_write_new_stories = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_2
			custom_effect_tooltip = STL_new_stories_tt
			hidden_effect = {
				country_event = double_diamond.2
			}
		}
	}
	STL_reorganize_the_family = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_3
			custom_effect_tooltip = STL_new_families_tt
			hidden_effect = {
				country_event = double_diamond.3
			}
		}
	}
	STL_form_the_equal_little_ones = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_4
			custom_effect_tooltip = STL_new_kids_tt
			hidden_effect = {
				country_event = double_diamond.4
			}
		}
	}
	STL_abolish_racist_language = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_5
			custom_effect_tooltip = STL_no_more_racism_tt
			hidden_effect = {
				country_event = double_diamond.5
			}
		}
	}
	STL_new_military_division_design = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
			has_tech = mechanised_infantry
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_6
			custom_effect_tooltip = STL_mech_for_all_tt
			hidden_effect = {
				country_event = double_diamond.6
			}
		}
	}
	STL_non_hierarchical_military = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_7
			custom_effect_tooltip = STL_no_more_generals_tt
			hidden_effect = {
				country_event = double_diamond.7
			}
		}
	}
	STL_horizontal_factory_life = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_8
			custom_effect_tooltip = STL_no_more_bosses_tt
			hidden_effect = {
				country_event = double_diamond.8
			}
		}
	}
	STL_the_song_of_liberation = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_9
			custom_effect_tooltip = STL_guaranteed_liberties_tt
			hidden_effect = {
				country_event = double_diamond.9
			}
		}
	}
	STL_glorious_future = {
		icon = equalistdec
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
        available = {		
			has_war = no
			NOT = {
				has_country_flag = STL_doing_social_engineering
			}
		}
		complete_effect = {
			set_country_flag = STL_doing_social_engineering
		}
		days_remove = STL_social_engineering_time?120
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_design_new_music"
			clr_country_flag = STL_doing_social_engineering
			set_country_flag = STL_dd_decision_10
			custom_effect_tooltip = STL_glorious_future_tt
			hidden_effect = {
				country_event = double_diamond.10
			}
		}
	}
}

STL_bring_equality = {
	STL_spread_equal_assimilation = {
		
		icon = GFX_decision_starlight_glimmer
		ai_will_do = {
			factor = 20
		}
		cost = 25
		days_remove = 30
		fire_only_once = no
		on_map_mode = map_only 
		state_target = europe
		target_array = owned_controlled_states
		target_root_trigger = {
			has_completed_focus = STL_new_equal_friends
		}
		target_trigger = {
			FROM = {
				NOT = {
					is_core_of = ROOT
					is_core_of = CRY
					is_core_of = EQS
					is_core_of = STG
					is_in_array = {
						state_original_cores = CRY
					}
					is_in_array = {
						state_original_cores = EQS
					}
					is_in_array = {
						state_original_cores = STG
					}
					has_dynamic_modifier = {
						modifier = STL_equal_assimilation
					}
				}
			}
		}
		remove_effect = {
			FROM = {
				add_compliance = 10
				add_resistance = -10
				add_dynamic_modifier = {
					modifier = STL_equal_assimilation
				}
			}
		}
	}
}

STL_leftist_power_balance_decisions = {
	
	STL_fortify_the_town = {
		
		icon = GFX_decision_bunkers

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value < 0.1
			}
		}

		days_remove = 30 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = -0.1
			}		
		}

		remove_effect = {
			57 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 3335
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}

	}
	
	STL_modernize_the_town = {
		
		icon = GFX_decision_roads

		priority = 99 

		allowed = { original_tag = STL }
		cost = 30
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value > -0.1
			}
		}

		days_remove = 30 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = 0.1
			}		
		}

		remove_effect = {
			add_stability = 0.05
			57 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

	}
	STL_give_night_glider_an_airbase = {
		
		icon = GFX_decision_biplane

		priority = 99 

		allowed = { original_tag = STL }
		cost = 30
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 30 	

		complete_effect = {
			if = {
				limit = {
					is_power_balance_side_active = {
						id = STL_leftist_bop
						side = STL_leftist_bop_equalist
					}
				}
				add_power_balance_value = {
					id = STL_leftist_bop
					value = 0.05
				}	
			}	
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = STL_leftist_bop
						side = STL_leftist_bop_reformist
					}
				}
				add_power_balance_value = {
					id = STL_leftist_bop
					value = -0.05
				}	
			}
		}

		remove_effect = {
			57 = {
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = STL_10_planes
			hidden_effect = {
				if = {
					limit = {
						has_dlc = "By Blood Alone"
					}
					load_oob = "STL_night_glider_bba"
				}
				else = {
					load_oob = "STL_night_glider_legacy"
				}
			}
		}

	}
	STL_declare_state_of_siege = {
		
		icon = GFX_decision_megaphone_alert

		priority = 99 

		allowed = { original_tag = STL }
		cost = 75
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value < -0.5
			}
		}

		days_remove = 45

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = -0.15
			}
		}

		remove_effect = {
			add_war_support = 0.05
			add_manpower = 5000
			EAW_raise_economic_law = yes
		}

	}
	STL_invite_foreign_capital = {
		
		icon = GFX_decision_piggybank

		priority = 99 

		allowed = { original_tag = STL }
		cost = 75
		fire_only_once = yes
		visible = {
			always = yes
		}

		available = {
			power_balance_value = {
				id = STL_leftist_bop
				value > 0.5
			}
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_leftist_bop
				value = 0.15
			}
		}

		remove_effect = {
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 200
			}
		}

	}
	
}
STL_equalist_power_balance_decisions = {
	
	STL_revise_quotas_downward = {
		
		icon = GFX_decision_gear

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		days_re_enable = 180
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
		}

		modifier = {
			stability_weekly_factor = 0.01
			production_factory_max_efficiency_factor = -0.02
		}

	}
	STL_stoke_glimmerite_nostalgia = {
		
		icon = GFX_decision_starlight_glimmer

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		days_re_enable = 180
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
		}

		modifier = {
			resistance_growth = 0.1
			war_support_weekly = 0.01
		}

	}
	STL_allow_voluntary_cutie_mark_removal = {
		
		icon = equalistdec

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 45 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.2
			}		
		}

		remove_effect = {
			add_political_power = 200
			add_stability = -0.05
			hidden_effect = {
				country_event = double_diamond.24
			}
		}

	}
	STL_create_heavy_fortified_artillery = {
		
		icon = GFX_decision_generic_scorched_earth

		priority = 99 

		allowed = { original_tag = STL }
		cost = 25
		fire_only_once = yes
		visible = {
			always = yes
		}
		available = {
			has_equipment = {
				artillery_equipment > 120
			}
		}

		days_remove = 45 	

		complete_effect = {
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = -120
			}
			add_power_balance_value = {
				id = STL_equalist_bop
				value = 0.1
			}		
		}

		remove_effect = {
			57 = {
				add_dynamic_modifier = {
					modifier = WAR_armored_battery
				}
			}
		}

	}
	STL_nothing_but_the_rifle = {
		
		icon = GFX_decision_rifles

		priority = 99 

		allowed = { original_tag = STL }
		days_re_enable = 180
		fire_only_once = yes
		visible = {
			always = yes
		}

		days_remove = 60 	

		complete_effect = {
			add_power_balance_value = {
				id = STL_equalist_bop
				value = -0.1
			}		
			add_ideas = STL_cheaply_made_rifles
		}

		remove_effect = {
			remove_ideas = STL_cheaply_made_rifles
		}

	}
	
}

STL_ng_interventions = {
	STL_GRF_help_the_republicans = {
		
		icon = GFX_decision_rifles

		priority = 99 
		cost = 25

		allowed = { original_tag = STL }
		fire_only_once = yes
		visible = {
			
			is_subject = no
			GRF = {
				has_civil_war = yes
			}
			STG = {
				has_war_with = GRF
				NOT = {
					has_country_leader = {
						character = STG_sinister_serov
						ruling_only = yes
					}
					
					has_country_leader = {
						character = STG_masha_norushkina
						ruling_only = yes
					}
				}
			}
		}

		days_remove = 60 	

		war_with_on_remove = GRF

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_join_the_war target: [From.GetName]"
			GRF = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove WNG_join_the_war target: [From.GetName]"
			GRF = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			# this doesn't actually DO anything yet
			# it will in the future :)
		}

	}
	STL_YAK_assist = {
		
		icon = GFX_decision_rifles

		priority = 99 
		cost = 25

		allowed = { original_tag = STL }
		fire_only_once = yes
		visible = {
			YAK = {
				has_war_with = JAK
			}
		}
		available = {
			OR = {
				is_lend_leasing	= YAK
				YAK = {
					
					has_volunteers_amount_from = {
						tag = ROOT
						count > 0
					}
				}
			}
		}
		cancel_trigger = { # if you're not helping, no bonus!
			AND = {
				YAK = {
					has_volunteers_amount_from = {
						tag = ROOT
						count < 1
					}
				}
				
				NOT = {
					is_lend_leasing = YAK
				}
				JAK = {
					exists = yes
				}
				
			}
		}

		days_remove = 60 	

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_YAK_assist"
			
		}
		modifier = {
			weekly_manpower = 100
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_YAK_assist"
			add_manpower = 5000
		}

	}
	STL_CRY_assist = { # Night Glider will stay neutral in the CRY commie civil war
		
		icon = GFX_decision_rifles

		priority = 99 
		cost = 25

		allowed = { original_tag = STL }
		fire_only_once = yes
		visible = {
			any_other_country = {
				tag = event_target:dem_CRY
				has_civil_war = yes
				has_volunteers_amount_from = {
					tag = ROOT
					count > 1
				}
			}
			any_other_country = {
				has_country_leader = {
					character = CRY_sombra
					ruling_only = yes
				}
			}
			has_global_flag = sombra_returned
		}
		available = {
			OR = {
				is_lend_leasing	= event_target:dem_CRY
				event_target:dem_CRY = {
					
					has_volunteers_amount_from = {
						tag = ROOT
						count > 0
					}
				}
			}
		}
		cancel_trigger = {
			AND = {
				event_target:dem_CRY = {
					has_volunteers_amount_from = {
						tag = ROOT
						count < 1
					}
				}
				event_target:dem_CRY = {
					has_war = no
				}
				NOT = {
					is_lend_leasing = event_target:dem_CRY
				}
			}
		}
		modifier = {
			experience_gain_army = 0.1
		}
		days_remove = 60 	

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_YAK_assist"
			
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_YAK_assist"
			army_experience = 25
			add_tech_bonus = {
				name = magical_tech_bonus
				bonus = 0.75
				uses = 2
				category = magical_tech
			}
			add_doctrine_cost_reduction = {
				name = land_doctrine
				cost_reduction = 0.25
				uses = 1
				category = land_doctrine
			}
		}

	}
	STL_PLB_assist = { 
		
		icon = GFX_decision_rifles

		priority = 99 
		cost = 25

		allowed = { original_tag = STL }
		fire_only_once = yes
		visible = {
			OR = {
				AND = {
					PLB = {
						has_government = democratic
						has_war_with = PNG
					}
					PNG = {
						has_government = fascism
					}
				}
				AND = {
					PLB = {
						has_country_leader_ideology = republicanism
						has_defensive_war_with = PNG
					}
					PNG = {
						has_government = fascism
					}
				}
				PLB = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
					has_defensive_war_with = CHN
				}
			}
		}
		available = {
			OR = {
				is_lend_leasing	= PLB
				PLB = {
					
					has_volunteers_amount_from = {
						tag = ROOT
						count > 0
					}
				}
			}
		}
		cancel_trigger = {
			AND = {
				PLB = {
					has_volunteers_amount_from = {
						tag = ROOT
						count < 1
					}
				}
				PLB = {
					has_war = no
				}
				NOT = {
					is_lend_leasing = event_target:PLB
				}
			}
		}
		modifier = {
			acclimatization_cold_climate_gain_factor = 0.1
		}
		days_remove = 60 	

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_YAK_assist"
			
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_YAK_assist"
			custom_effect_tooltip = SRS_winter_warfare_tech_tt
			hidden_effect = { set_technology = { popup = no SRS_winter_warfare = 1 } }
			custom_effect_tooltip = FIN_winter_warfare_battalion_tt

			hidden_effect = {
				set_technology = {
					winter_logistics_support_tech = 1
					popup = no
				}
			}
		}

	}
	
	STL_PNG_assist = { 
		
		icon = GFX_decision_rifles

		priority = 99 
		cost = 25

		allowed = { original_tag = STL }
		fire_only_once = yes
		visible = {
			OR = {
				AND = {
					PNG = {
						OR = {
							has_government = democratic
							has_government = communism
						}
						has_war_with = PLB
					}
					PLB = {
						NOT = {
							has_government = democratic
						}
					}
				}
			}
		}
		available = {
			OR = {
				is_lend_leasing	= PNG
				PNG = {
					
					has_volunteers_amount_from = {
						tag = ROOT
						count > 0
					}
				}
			}
		}
		cancel_trigger = {
			AND = {
				PNG = {
					has_volunteers_amount_from = {
						tag = ROOT
						count < 1
					}
				}
				PNG = {
					has_war = no
				}
				NOT = {
					is_lend_leasing = event_target:PNG
				}
			}
		}
		modifier = {
			acclimatization_cold_climate_gain_factor = 0.1
		}
		days_remove = 60 	

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STL_YAK_assist"
			
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_YAK_assist"
			custom_effect_tooltip = SRS_winter_warfare_tech_tt
			hidden_effect = { set_technology = { popup = no SRS_winter_warfare = 1 } }
			custom_effect_tooltip = FIN_winter_warfare_battalion_tt

			hidden_effect = {
				set_technology = {
					winter_logistics_support_tech = 1
					popup = no
				}
			}
		}

	}
}

STL_leader_information = { # handled in gui

}


prospect_for_resources = {
    STL_intensify_steel_production = { 
		icon = steel
		allowed = {
            original_tag = STL
		}
		highlight_states = {
			highlight_state_targets = {
				state = 57
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 57
			controls_state = 57
			has_tech = excavation1
		}
		visible = {
		    has_completed_focus = STL_extract_the_mountain
			owns_state = 57
			controls_state = 57
		}
		
		fire_only_once = yes
		
		cost = 10
		days_remove = 60
		
		modifier = {
			civilian_factory_use = 2
		}
		ai_will_do = {
			factor = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_intensify_steel_production"
			add_resource = {
				type = steel
				amount = 12
				state = 57
			}
		}
	}
	STL_find_aluminum = { 
		icon = aluminium
		allowed = {
            original_tag = STL
		}
		highlight_states = {
			highlight_state_targets = {
				state = 57
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 57
			controls_state = 57
			has_tech = excavation2
		}
		visible = {
		    has_completed_focus = STL_extract_the_mountain
			owns_state = 57
			controls_state = 57
		}
		
		fire_only_once = yes
		
		cost = 10
		days_remove = 60
		
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_find_aluminum"
			add_resource = {
				type = aluminium
				amount = 4
				state = 57
			}
		}
	}
	STL_find_chromium = { 
		icon = chromium
		allowed = {
            original_tag = STL
		}
		highlight_states = {
			highlight_state_targets = {
				state = 57
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 3
			owns_state = 57
			controls_state = 57
			has_tech = excavation3
		}
		visible = {
		    has_completed_focus = STL_extract_the_mountain
			owns_state = 57
			controls_state = 57
		}
		
		fire_only_once = yes
		
		cost = 10
		days_remove = 60
		
		modifier = {
			civilian_factory_use = 4
		}
		ai_will_do = {
			factor = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STL_find_chromium"
			add_resource = {
				type = chromium
				amount = 4
				state = 57
			}
		}
	}
}


STL_escalation_war_category = {
	# War escalates over time, no matter what 
	STL_time_based_war_escalation_mission = {   
		icon = GFX_decision_generic_ignite_civil_war
		allowed = { 
			original_tag = STL
		}    
		available = { 
			hidden_trigger ={ always = no }
		}
	
		activation = { 
			has_war_with = STG
			has_global_flag = STG_STL_fighting
			check_variable = { STL.STL_war_escalation_level < 10}
		}
		visible = { hidden_trigger = { has_global_flag = STG_STL_fighting } }
		cancel_if_not_visible = yes 
		is_good = yes 
		fire_only_once = no                            
		selectable_mission = no  
		days_mission_timeout = 80
		timeout_effect = {
			STL_escalate_the_war_effect = yes 
			add_to_variable = { STL.STL_escalation_time_increase_total = 1 }
		}
	} 
	# Same Mission for stalliongrad - but with correct colors and tooltips
	STG_time_based_war_escalation_mission = {  
		icon = GFX_decision_generic_operation # TODO_TA set correct icon   
		allowed = { 	
			original_tag = STG
		}    
		available = { 
			hidden_trigger ={ always = no }
		}
	
		activation = { 
			has_war_with = STL
			has_global_flag = STG_STL_fighting
			check_variable = { STL.STL_war_escalation_level < 10 }
		}
		visible = { hidden_trigger = { has_global_flag = STG_STL_fighting } }
		cancel_if_not_visible = yes 
		is_good = no 
		fire_only_once = no                            
		selectable_mission = no  
		days_mission_timeout = 80
		timeout_effect = {
			custom_effect_tooltip = ITA_war_escalation_inc_tt
		}
	} 
}

STL_sb_ponypower_category = {
	STL_new_settlers_decision = {
		allowed = { 
			original_tag = STL
		}    
		available = { 
			always = yes
		}
		visible = {
			has_completed_focus = STL_new_settlers
			NOT = {has_idea = STL_settlers_idea_6}
		}
		
		fire_only_once = no
		cost = 50
		days_remove = 30
		
		remove_effect = {
			STL_upgrade_settlers_effect = yes
		}
	}
	
	STL_expand_housing_decision = {
		allowed = { 
			original_tag = STL
		}    
		available = { 
			always = yes
		}
		visible = {
			has_completed_focus = STL_sb_housing_expand
		}
		
		fire_only_once = no
		cost = 50
		days_remove = 30
		
		remove_effect = {
			add_manpower = 5000
		}
	}
}
STL_sb_propaganda = {
	STL_sb_propaganda_1 = {
		
		allowed = { 
			original_tag = STL
		}    
		available = { 
			has_war_with = STG
		}
		visible = {
			has_completed_focus = STL_sugar_belle_stg_prop_department
		}
		
		fire_only_once = no
		cost = 50
		days_re_enable = 120
		
		complete_effect = {
			STG = {
				add_timed_idea = {
					idea = STL_STG_sabotaged_rations
					days = 60
				}
			}
		}
	}
	STL_sb_propaganda_2 = {
		
		allowed = { 
			original_tag = STL
		}    
		available = { 
			has_war_with = STG
		}
		visible = {
			has_completed_focus = STL_sugar_belle_stg_prop_department
		}
		
		fire_only_once = no
		cost = 50
		days_re_enable = 120
		
		complete_effect = {
			STG = {
				add_timed_idea = {
					idea = STL_STG_sabotaged_industries
					days = 60
				}
			}
		}
	}
	STL_sb_propaganda_3 = {
		
		allowed = { 
			original_tag = STL
		}    
		available = { 
			has_war_with = STG
		}
		visible = {
			has_completed_focus = STL_sugar_belle_stg_prop_department
		}
		
		fire_only_once = no
		cost = 50
		days_re_enable = 120
		
		complete_effect = {
			STG = {
				add_timed_idea = {
					idea = STL_STG_sabotaged_railroads
					days = 60
				}
			}
		}
	}
}