@DAYS_DETERMINED = 180 #Used for propaganda campaign SOV_heroes_forward -> Value should be the same as SOV_default_propaganda_campaign_duration

STG_special_constructions = {
	STG_abandon_construction_of_palace = {
		icon = red_star
		available = {
			NOT = {
				has_war = yes
			}
			custom_trigger_tooltip = {
				tooltip = STG_palace_constructed_tt
				NOT = {
					has_country_flag = cant_abandon_anymore
					has_country_flag = the_palace_constructed
				}
			}
		}
		cost = 70
		ai_will_do = {
			base = 5
			modifier = {
				date < 1011.9.1
				factor = 0
			}
		}
		fire_only_once = yes
		visible = {
			NOT = {
				has_war = yes
			}
			NOT = {
				OR = {
					has_country_flag = cant_abandon_anymore
					has_country_flag = the_palace_constructed
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_abandon_construction_of_palace"
			add_stability = -0.15
			set_country_flag = palace_project_abandoned
			deconstruct_the_palace_stg = yes
		}
	}
	STG_abandon_construction_of_palace_war_time = {
		icon = red_star
		available = {
			has_war = yes
			NOT = {
				OR = {
					has_country_flag = the_palace_constructed
					has_country_flag = palace_project_abandoned
					has_country_flag = cant_abandon_anymore
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 5
		}
		fire_only_once = yes
		visible = {
			has_war = yes
			NOT = {
				OR = {
					has_country_flag = the_palace_constructed
					has_country_flag = palace_project_abandoned
					has_country_flag = cant_abandon_anymore
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_abandon_construction_of_palace_war_time"
			add_stability = -0.05
			set_country_flag = palace_project_abandoned
			deconstruct_the_palace_stg = yes
			if = {
				limit = {
					check_variable = { var = palace_construction value = 14 compare = greater_than_or_equals }
				}
				one_random_arms_factory = yes
			}
		}
	}
	STG_palace_the_statue = {
		icon = statue

		available = {
			#has_completed_focus = the_palace
			#has_country_flag = construction_of_the_palace_began
			check_variable = { var = palace_construction value = 20 compare = greater_than_or_equals }
			OR = {
				has_government = communism
				has_country_leader = {
					ruling_only = yes
					character = STG_dark_wing
				}
			}
			is_subject = no
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		visible = {
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		cost = 40
		days_remove = 50

		ai_will_do = {
			base = 175
			modifier = {
				has_political_power > 50
				factor = 5
			}
		}
		fire_only_once = yes
		cancel_trigger = {
			OR = {
				has_country_flag = the_palace_constructed
				has_country_flag = palace_project_abandoned
			}
		}
		modifier = {
			political_power_gain = -0.085
			civilian_factory_use = 1
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STG_palace_the_statue"
			set_country_flag = statue_obtained
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_palace_the_statue"

		}
	}
	STG_palace_construction_effort_final = {
		icon = STG_palace_construction_effort

		available = {
			#has_completed_focus = the_palace
			#has_country_flag = construction_of_the_palace_began
			check_variable = { var = palace_construction value = 20 compare = greater_than_or_equals }
			has_country_flag = statue_obtained
			OR = {
				has_government = communism
				has_country_leader = {
					ruling_only = yes
					character = STG_dark_wing
				}
			}
			is_subject = no
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		visible = {
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		cost = 40
		days_remove = 140

		ai_will_do = {
			base = 200
		}
		fire_only_once = yes
		cancel_trigger = {
			OR = {
				has_country_flag = the_palace_constructed
				has_country_flag = palace_project_abandoned
			}
		}
		modifier = {
			stability_weekly = 0.003
			communism_drift = 0.02
			civilian_factory_use = 4
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STG_palace_construction_effort_final"
			country_event = stalliongrad_old.92
			four_random_industrial_complex = yes
			set_country_flag = the_palace_constructed
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_palace_construction_effort_final"
			set_country_flag = cant_abandon_anymore
		}
	}
	STG_palace_construction_effort_2 = {
		icon = STG_palace_construction_effort

		available = {
			OR = {
				has_government = communism
				has_country_leader = {
					ruling_only = yes
					character = STG_dark_wing
				}
			}
			is_subject = no
			check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals }
			check_variable = { var = palace_construction value = 20 compare = less_than }
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		visible = {
			check_variable = { var = palace_construction value = 20 compare = less_than }
			NOT = {
				has_country_flag = palace_project_abandoned
			}
		}
		cost = 30
		days_remove = 75

		ai_will_do = {
			base = 35
			modifier = {
				has_political_power > 50
				factor = 10
			}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	factor = 5
			#}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	has_war = no
			#	factor = 5
			#}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	has_war = no
			#	NOT = { has_idea = incomplete_industrialization }
			#	factor = 10
			#}
		}
		cancel_trigger = {
			OR = {
				has_country_flag = palace_project_abandoned
				has_country_flag = the_palace_constructed
			}
		}

		modifier = {
			stability_weekly = 0.0025
			communism_drift = 0.01
			civilian_factory_use = 2
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STG_palace_construction_effort_2"

		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_palace_construction_effort_2"
			modify_var_stg_construction_2 = yes
		}
	}
	STG_palace_construction_effort = {
		available = {
			#has_completed_focus = the_palace
			#has_country_flag = construction_of_the_palace_began
			OR = {
				has_government = communism
				has_country_leader = {
					ruling_only = yes
					character = STG_dark_wing
				}
			}
			is_subject = no
			has_political_power > 0
			NOT = {
				has_country_flag = palace_project_abandoned
				has_country_flag = the_palace_constructed
			}
		}
		activation = {
			#has_country_flag = construction_of_the_palace_began
			OR = {
				has_government = communism
				has_country_leader = {
					ruling_only = yes
					character = STG_dark_wing
				}
			}
			is_subject = no
			NOT = {
				check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals }
				has_country_flag = palace_project_abandoned
				has_country_flag = the_palace_constructed
			}
		}
		cost = 15

		days_remove = 35

		selectable_mission = yes
		is_good = yes
		days_mission_timeout = 1000
		fire_only_once = yes
		visible = {
			NOT = {
				has_country_flag = palace_project_abandoned
				has_country_flag = the_palace_constructed
			}
		}
		modifier = {
			stability_weekly = 0.001
			civilian_factory_use = 1
		}
		cancel_trigger = {
			OR = {
				check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals }
				has_country_flag = palace_project_abandoned
				has_country_flag = the_palace_constructed
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STG_palace_construction_effort"
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							check_variable = { var = palace_construction value = 10 compare = greater_than_or_equals }
							has_country_flag = palace_project_abandoned
							has_country_flag = the_palace_constructed
						}
					}

					activate_mission = STG_palace_construction_effort
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_palace_construction_effort"
			add_stability = 0.01
			if = {
				limit = {
					OR = { has_food_shortages_STG = yes has_war = yes }
				}
				add_to_variable = { var = palace_construction value = 2 }
			}
			else_if = {
				limit = {
					has_war = no
					NOT = { has_food_shortages_STG = yes }
				}
				add_to_variable = { var = palace_construction value = 3 }
			}
			else_if = {
				limit = {
					has_war = no
					NOT = { has_food_shortages_STG = yes }
				}
				add_to_variable = { var = palace_construction value = 4 }
			}
		}
		ai_will_do = {
			base = 25
			modifier = {
				has_political_power > 50
				factor = 4
			}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	factor = 5
			#}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	has_war = no
			#	factor = 5
			#}
			#modifier = {
			#	NOT = { has_food_shortages_STG = yes }
			#	has_war = no
			#	NOT = { has_idea = incomplete_industrialization }
			#	factor = 5
			#}
		}
	}


}

STG_foreign_affairs = {
	STG_invite_people_to_faction = {
		icon = hammer_and_horseshoe_decision
		cost = 25
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 5
				has_war = yes
				FROM = {
					has_war = yes
					any_enemy_country = {
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0.25
				has_war = no
				FROM = { has_war = yes }
			}
		}
		visible = {
			OR = {
				is_faction_leader = yes
				has_country_flag = was_in_STG_faction
			}
			FROM = {
				OR = {
					original_tag = YAK
					original_tag = JAK
					original_tag = GRF
					original_tag = PNG
					original_tag = CRY
					original_tag = OLE
					original_tag = CHN
					original_tag = CCN
				}
				exists = yes
				has_government = communism
				is_subject = no
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
					has_country_flag = STG_invitation_cooldown
					has_civil_war = yes
				}
			}
		}
		target_root_trigger = {
			OR = {
				is_faction_leader = yes
				has_country_flag = was_in_STG_faction
			}
		}
		targets = { GRF PNG CRY OLE CHN CCN }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = GRF
					original_tag = PNG
					original_tag = CRY
					original_tag = OLE
					original_tag = CHN
					original_tag = CCN
				}
				has_government = communism
				NOT = {
					is_in_faction_with = ROOT
				}
				is_subject = no
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_invite_people_to_faction target: [From.GetName]"
			FROM = {
				country_event = generic.5
				set_country_flag = { flag = STG_invitation_cooldown value = 1 days = 360 }
			}
		}
	}
	STG_claim_EQS_cores = {
		icon = stg_cores
		cost = 15
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_global_flag = the_war
			NOT = {
				has_war_with = CHN
			}
			OR = {
				NOT = { country_exists = CHN }
				CHN = { is_subject = yes }
				CHN = { has_government = democratic }
				CHN = { has_government = communism }
			}
			NOT = {
				has_country_flag = claimed_EQS_territory_already
			}
		}
		visible = {
			has_global_flag = the_war
			NOT = {
				has_war_with = CHN
			}
			OR = {
				NOT = { country_exists = CHN }
				CHN = { is_subject = yes }
				CHN = { has_government = democratic }
				CHN = { has_government = communism }
			}
			NOT = {
				has_country_flag = claimed_EQS_territory_already
			}
			OR = {
				has_country_flag = war_help
				is_in_faction_with = FROM
				has_completed_focus = fighting_for_victory
			}
			FROM = {
				exists = yes
				has_capitulated = no
			}
		}
		targets = { EQS ELF }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = EQS
					original_tag = ELF
				}
			}
		}
		available = {
			FROM = {
				exists = yes
				has_capitulated = no
				is_subject = no
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_claim_EQS_cores target: [From.GetName]"
			FROM = { country_event = equestria.40 }
			add_war_support = -0.1
			set_country_flag = claimed_EQS_territory_already
		}
	}
	STG_grab_cores_during_LCW = {
		icon = stg_cores
		cost = 0
		selectable_mission = yes
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		is_good = yes
		activation = {
			always = no
		}
		days_mission_timeout = 14
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout STG_grab_cores_during_LCW"
			add_political_power = 250
			add_popularity = { ideology = communism popularity = -0.2 }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_grab_cores_during_LCW"
			custom_effect_tooltip = stg_annexes_cores_civil_war
			hidden_effect = {
				transfer_state = 154
				transfer_state = 155
				transfer_state = 156
				transfer_state = 157
				transfer_state = 158
				transfer_state = 160
				transfer_state = 326
				transfer_state = 164
				transfer_state = 162
				transfer_state = 159
				transfer_state = 167
				transfer_state = 229
				transfer_state = 67
				transfer_state = 653
				transfer_state = 661
				transfer_state = 662
				news_event = { id = stalliongrad_news.110 days = 1 }
			}
			NLR = {
				add_opinion_modifier = { target = ROOT modifier = stg_annexed_states }
			}
		}
	}
	STG_transfer_frontier_to_GRF = {
		icon = hammer_and_horseshoe_decision
		cost = 5
		ai_will_do = {
			factor = 100
		}
		visible = {
			AND = {
				GRF = { is_subject_of = STG }
				GFF = { is_subject_of = STG }
			}
		}
		available = {
			STG = {
				exists = yes
				has_capitulated = no
				is_subject = no
			}
			AND = {
				GRF = { is_subject_of = STG }
				GFF = { is_subject_of = STG }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_transfer_frontier_to_GRF target: [From.GetName]"
			GRF = { country_event = griffons.19 }
		}
	}
	STG_transfer_yak_lend_to_yaks = {
		icon = hammer_and_horseshoe_decision
		cost = 5
		ai_will_do = {
			factor = 100
		}
		visible = {
			AND = {
				YAK = { is_subject_of = ROOT }
				any_owned_state = { 	
					OR = {
						is_core_of = YAK 
						is_core_of = JAK
					}
				}
			}
		}
		available = {
			STG = {
				exists = yes
				has_capitulated = no
				is_subject = no
			}
			YAK = { is_subject_of = ROOT }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_transfer_yak_lend_to_yaks target: [From.GetName]"
			ROOT = { 
				every_owned_state = { 
					limit = {
						is_core_of = YAK
					}
					transfer_state_to = YAK
				}
			}
			if = {
				limit = {
					JAK = {
						exists = yes
						is_subject_of = ROOT
					}
				}
				YAK = {
					annex_country = {
						target = JAK
						transfer_troops = yes
					}
				}
			}
		}
	}
}

prospect_for_resources = {
	STG_sinnie_crystal_obsession = { #678

		icon = crystals

		allowed = {
			original_tag = STG
		}

		highlight_states = {
			highlight_state_targets = {
				state = 678
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 678
			controls_state = 678
			if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 8
					}
				}
				has_tech = excavation_d
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 7
					}
				}
				has_tech = excavation_c
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 6
					}
				}
				has_tech = excavation_b
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 5
					}
				}
				has_tech = excavation_a
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 4
					}
				}
				has_tech = excavation5
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 3
					}
				}
				has_tech = excavation4
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 2
					}
				}
				has_tech = excavation3
			}
			else_if = {
				limit = {
					check_variable = {
						STG_sinnie_crystal_counter > 1
					}
				}
				has_tech = excavation2
			}
			else = {
				has_tech = excavation1
			}
		}
		visible = {
			has_completed_focus = STG_pcdi
			check_variable = {
				STG_sinnie_crystal_counter < 10
			}
			owns_state = 678
			controls_state = 678
		}

		fire_only_once = yes

		cost = 35
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove STG_sinnie_crystal_obsession"
			add_to_variable = {
				STG_sinnie_crystal_counter = 1
			}
			678 = {
				add_resource = {
					type = crystals
					amount = 5
				}
			}
		}
	}
}
STG_protection = {
	STG_vasily_speech_against_CHN = {
		icon = vasily_cutiemark
		available = {
			has_defensive_war_with = FROM
			has_completed_focus = vasya_leader
			is_subject = no
		}
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = vasya_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = vasya_leader
			is_subject = no
			has_defensive_war_with = FROM
		}
		targets = { CHN }
		target_trigger = {
			FROM = { tag = CHN }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_vasily_speech_against_CHN target: [From.GetName]"
			country_event = stalliongrad_old.125
			add_war_support = 0.05
		}
	}
	STG_vasily_speech_against_EQS = {
		icon = vasily_cutiemark
		available = {
			has_defensive_war_with = FROM
			has_completed_focus = vasya_leader
			is_subject = no
		}
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = vasya_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = vasya_leader
			is_subject = no
			has_defensive_war_with = FROM
			FROM = { exists = yes }
		}
		targets = { EQS ELF }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = EQS
					original_tag = ELF
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_vasily_speech_against_EQS target: [From.GetName]"
			country_event = stalliongrad_old.126
			add_war_support = 0.05
		}
	}
	STG_vasily_speech_against_EQS_offensive = {
		icon = vasily_cutiemark
		available = {
			has_offensive_war_with = FROM
			has_completed_focus = vasya_leader
			is_subject = no
		}
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = vasya_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = vasya_leader
			is_subject = no
			has_offensive_war_with = FROM
			FROM = { exists = yes }
		}
		targets = { EQS ELF }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = EQS
					original_tag = ELF
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_vasily_speech_against_EQS_offensive target: [From.GetName]"
			country_event = stalliongrad_old.127
			add_war_support = 0.05
		}
	}
	STG_vasily_speech_defensive_generic = {
		icon = vasily_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = vasya_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = vasya_leader
			is_subject = no
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						has_offensive_war = yes
						has_added_tension_amount > 30
					}
					is_justifying_wargoal_against = ROOT
					has_offensive_war_with = ROOT
				}
			}
		}
		target_array = global.majors
		target_trigger = {
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						has_offensive_war = yes
						has_added_tension_amount > 30
					}
					is_justifying_wargoal_against = ROOT
					has_offensive_war_with = ROOT
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_vasily_speech_defensive_generic target: [From.GetName]"
			hidden_effect = {
				FROM = {
					save_event_target_as = target
				}
				country_event = stalliongrad_old.128
			}
			add_war_support = 0.05
		}
	}
	STG_vasily_speech_offensive_generic = {
		icon = vasily_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = vasya_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = vasya_leader
			is_subject = no
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				is_major = yes
				OR = {
					ROOT = {
						is_justifying_wargoal_against = FROM
					}
					ROOT = {
						has_offensive_war_with = FROM
					}
				}
			}
		}
		target_array = global.majors
		target_trigger = {
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				is_major = yes
				OR = {
					ROOT = {
						is_justifying_wargoal_against = FROM
					}
					ROOT = {
						has_offensive_war_with = FROM
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_vasily_speech_offensive_generic target: [From.GetName]"
			hidden_effect = {
				FROM = {
					save_event_target_as = target
				}
				country_event = stalliongrad_old.129
			}
			add_war_support = 0.025
		}
	}
	#### SINISTER'S SPEECHES ####
	STG_sinister_speech_against_CHN_offensive = {
		icon = sinister_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = sinister_leader
			is_subject = no
			OR = {
				has_offensive_war_with = FROM
				is_justifying_wargoal_against = FROM
			}
		}
		target_root_trigger = {
			has_completed_focus = sinister_leader
			is_subject = no
		}
		targets = { CHN }
		target_trigger = {
			FROM = { tag = CHN }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinister_speech_against_CHN_offensive target: [From.GetName]"
			country_event = stalliongrad_old.131
			add_war_support = 0.025
		}
	}
	STG_sinister_speech_against_CHN_defensive = {
		icon = sinister_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = sinister_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = sinister_leader
			is_subject = no
			has_defensive_war_with = FROM
		}
		targets = { CHN }
		target_trigger = {
			FROM = { tag = CHN }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinister_speech_against_CHN_defensive target: [From.GetName]"
			country_event = stalliongrad_old.132
			add_war_support = 0.05
		}
	}
	STG_sinister_speech_against_EQS_defensive = {
		icon = sinister_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = sinister_leader
			is_subject = no
			has_defensive_war_with = FROM
			FROM = { exists = yes }
		}
		target_root_trigger = {
			has_completed_focus = sinister_leader
			is_subject = no
		}
		targets = { EQS ELF }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = EQS
					original_tag = ELF
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinister_speech_against_EQS_defensive target: [From.GetName]"
			country_event = stalliongrad_old.133
			add_war_support = 0.05
		}
	}
	STG_sinister_speech_against_EQS_offensive = {
		icon = sinister_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = sinister_leader
			is_subject = no
			OR = {
				has_offensive_war_with = FROM
				is_justifying_wargoal_against = FROM
			}
			FROM = { exists = yes }
		}
		target_root_trigger = {
			has_completed_focus = sinister_leader
			is_subject = no
		}
		targets = { EQS ELF }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = EQS
					original_tag = ELF
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinister_speech_against_EQS_offensive target: [From.GetName]"
			country_event = stalliongrad_old.134
			add_war_support = 0.05
			set_country_flag = chernushka_get
		}
	}
	STG_sinister_speech_offensive_generic = {
		icon = sinister_cutiemark
		cost = 35
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		target_root_trigger = {
			has_completed_focus = sinister_leader
			is_subject = no
		}
		visible = {
			has_completed_focus = sinister_leader
			is_subject = no
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				is_major = yes
				OR = {
					ROOT = {
						is_justifying_wargoal_against = FROM
					}
					ROOT = {
						has_offensive_war_with = FROM
					}
				}
			}
		}
		target_array = global.majors
		target_trigger = {
			FROM = {
				is_major = yes
				exists = yes
				NOT = {
					original_tag = EQS
					original_tag = ELF
					tag = CHN
				}
				is_major = yes
				OR = {
					ROOT = {
						is_justifying_wargoal_against = FROM
					}
					ROOT = {
						has_offensive_war_with = FROM
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinister_speech_offensive_generic target: [From.GetName]"
			hidden_effect = {
				FROM = { country_event = stalliongrad_old.136 }
			}
			add_war_support = 0.05
		}
	}
}
form_equestrian_socialist_union_category = {
	form_equestrian_socialist_republic = {
		icon = red_star
		available = {
			3 = { is_owned_and_controlled_by = ROOT }
			has_war = no
		}
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			3 = { is_owned_by = ROOT }
			has_government = communism
			is_subject = no
			NOT = {
				original_tag = BAL
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_equestrian_socialist_republic"
			drop_cosmetic_tag = yes
			set_cosmetic_tag = EQS_COM
		}
	}
	form_equestrian_socialist_union = {
		icon = equestrian_union
		available = {
			controls_fillydelphia = yes
			controls_manehattan = yes
			controls_canterlot = yes
			controls_los_pegasus = yes
			controls_baltimare = yes
			controls_stableside = yes
			controls_stalliongrad = yes
			controls_canterlot = yes
			controls_crystal_city = yes
			controls_startlight_country = yes
			has_war = no
		}
		cost = 300
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			is_subject = no
			controls_stalliongrad = yes
			controls_canterlot = yes
			has_government = communism
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_equestrian_socialist_union"
			drop_cosmetic_tag = yes
			set_cosmetic_tag = EQS_COMUNI
			set_global_flag = union_formed
			every_state = {
				limit = {
					OR = {
						is_core_of = STG
						is_core_of = EQS
						is_core_of = CRY
						is_core_of = STL
						is_in_array = {
							state_original_cores = EQS
						}
					}
				}
				add_core_of = ROOT
			}
			every_other_country = {
				limit = {
					OR = {
						is_eqs_civil_war_tag = yes
						original_tag = CRY
						original_tag = STL
					}
					has_government = communism
					OR = { is_subject = no is_subject_of = ROOT }
					has_war = no
				}
				country_event = stalliongrad_old.148
			}
		}
	}
}
economy_decisions = {
	#### Vasily's plans ####
	STG_reopen_factories_in_Stalliongrad_as_civilian = {
		visible = {
			original_tag = STG
			has_country_flag = alevtina_qubysheva_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 153
			controls_state = 153
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			153 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_reopen_factories_in_Petershoof_as_civilian = {
		visible = {
			original_tag = STG
			has_country_flag = alevtina_qubysheva_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 166
			controls_state = 166
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			166 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_reopen_factories_in_Caramel_Marks_as_civilian = {
		visible = {
			original_tag = STG
			has_country_flag = alevtina_qubysheva_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 235
			controls_state = 235
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			235 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_restore_railroad_infrasructure = {
		visible = {
			original_tag = STG
			has_country_flag = alevtina_qubysheva_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 4
			AND = {
				owns_state = 168
				controls_state = 168
				owns_state = 334
				controls_state = 334
				owns_state = 225
				controls_state = 225
				owns_state = 233
				controls_state = 233
				owns_state = 165
				controls_state = 165
				owns_state = 678
				controls_state = 678
			}
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 3
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			168 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			334 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			225 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			233 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			678 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	#### Karamelka's plans ####
	STG_reopen_factories_in_Stalliongrad_as_military = {
		visible = {
			original_tag = STG
			has_country_flag = spike_spigel_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 153
			controls_state = 153
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			153 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_reopen_factories_in_Petershoof_as_military = {
		visible = {
			original_tag = STG
			has_country_flag = spike_spigel_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 166
			controls_state = 166
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			166 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_reopen_factories_in_Caramel_Marks_as_military = {
		visible = {
			original_tag = STG
			has_country_flag = spike_spigel_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 235
			controls_state = 235
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 1
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			235 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_reopen_factories_in_Severokholm_as_civilian = {
		visible = {
			original_tag = STG
			has_country_flag = spike_spigel_restore_plan
		}
		available = {
			num_of_civilian_factories_available_for_projects > 3
			owns_state = 168
			controls_state = 168
		}
		ai_will_do = {
			factor = 300
		}
		modifier = {
			civilian_factory_use = 2
		}
		fire_only_once = yes
		days_remove = 21
		remove_effect = {
			168 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}
political_actions = {
	STG_help_EQS_in_war = {
		allowed = {
			original_tag = STG
		}
		target_root_trigger = {
			is_historical_focus_on = yes
			NOT = { has_country_flag = war_help }
			NOT = { has_global_flag = EQS_no_war_help }
			is_ai = yes
			is_subject = no
			has_war = no
		}
		visible = {
			is_historical_focus_on = yes
			NOT = { has_country_flag = war_help }
			NOT = { has_global_flag = EQS_no_war_help }
			is_ai = yes
			is_subject = no
			ROOT = {
				has_war = no # required for weird behavior
			}
			FROM = {
				is_ai = yes
				exists = yes
				original_tag = EQS
				has_government = democratic
				has_war_with = CHN
				surrender_progress > 0.40
			}
		}
		ai_will_do = {
			factor = 10000
		}
		targets = { EQS }
		targets_dynamic = yes
		target_trigger = {
			FROM = { tag = event_target:equestria }
		}
		war_with_on_complete = CHN
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_help_EQS_in_war target: [From.GetName]"
			country_event = stalliongrad_old.75
		}
	}
	STG_rename_STG_to_STG = {
		allowed = {
			original_tag = STG
		}
		visible = {
			owns_state = 153
			has_country_flag = stg_renamed
		}
		ai_will_do = {
			factor = 0
		}
		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
			highlight_provinces = {
				488
			}
		}
		fire_only_once = yes
		cost = 25
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_rename_STG_to_STG"
			153 = { set_state_name = VICTORY_POINT_STALLIONGRAD }
		}
	}
	STG_rename_STG_to_Princessyn = {
		allowed = {
			original_tag = STG
		}
		visible = {
			NOT = {
				has_government = communism
				has_country_leader = {
					character = STG_dark_wing
					ruling_only = yes
				}
				has_country_flag = stg_renamed
			}
			owns_state = 153
		}
		ai_will_do = {
			factor = 0
		}
		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
			highlight_provinces = {
				488
			}
		}
		fire_only_once = yes
		cost = 25
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_rename_STG_to_Princessyn"
			153 = { set_state_name = EQS_vp_princessyn }
			set_country_flag = stg_renamed
		}
	}
	STG_rename_Konzan_to_Sinistergrad = {
		icon = sinister_cutiemark
		available = {
			custom_trigger_tooltip = {
				tooltip = STG_no_problems
				NOT = {
					has_food_shortages_STG = yes
				}
			}
		}
		allowed = {
			tag = STG
		}
		visible = {
			owns_state = 225
			has_completed_focus = sinister_leader
			has_government = communism
			OR = {
				controls_manehattan = yes
				controls_canterlot = yes
				controls_baltimare = yes
			}
		}
		ai_will_do = {
			factor = 100
		}
		highlight_states = {
			highlight_state_targets = {
				state = 225
			}
			highlight_provinces = {
				200
			}
		}
		fire_only_once = yes
		cost = 25
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_rename_Konzan_to_Sinistergrad"
			225 = { set_province_name = { id = 200 name = "Sinistergrad"} }
		}
	}
	STG_rename_Severokholm_to_Altytown = {
		icon = modern_city
		allowed = {
			tag = STG
		}
		visible = {
			has_country_flag = altidiya_died
			has_government = communism
			owns_state = 168
		}
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		cost = 25
		highlight_states = {
			highlight_state_targets = {
				state = 168
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_rename_Severokholm_to_Altytown"
			168 = { set_state_name = STG_vp_altytown }
		}
	}
	STG_resend_negotiations = {
		icon = modern_city
		allowed = {
			tag = STG
		}
		visible = {
			check_variable = {
				STG_asking_times < 4
			}
			has_country_flag = STG_can_ask_EQS
		}
		ai_will_do = {
			factor = 100
		}
		cost = 25
		days_remove = 30
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_rename_Severokholm_to_Altytown"
			country_event = stalliongrad_vasily.7
		}
	}
	STG_send_rifles_to_griffon_comrades = {
		icon = rifles
		allowed = { tag = STG }
		visible = { 
			AND = {
				has_country_flag = griffon_intervention
				GRF = { has_civil_war = yes }
			}
		}
		available = {
			has_war = no
			#has_equipment = {
			#	infantry_equipment > 1001
			#}
		}
		ai_will_do = {
			factor = 500
		}
		days_remove = 30
		days_re_enable = 75
		modifier = {
			experience_gain_army = 0.5
			consumer_goods_factor = 0.05
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sent_rifles_to_griffon_comrades"
			#add_equipment_to_stockpile = {
			#	type = infantry_equipment
			#	amount = -1000
			#	producer = STG
			#}
			GRA = {
				country_event = { id = griffons.129 days = 3 }
			}
		}
	}
	STG_send_support_equipment_to_griffon_comrades = {
		icon = rifles
		allowed = { tag = STG }
		visible = { 
			AND = {
				has_country_flag = griffon_intervention
				GRF = { has_civil_war = yes }
			}
		}
		available = {
			has_war = no
			#has_equipment = {
			#	support_equipment > 101
			#}
		}
		ai_will_do = {
			factor = 500
		}
		days_remove = 30
		days_re_enable = 75
		modifier = {
			experience_gain_army = 0.5
			consumer_goods_factor = 0.05
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_send_support_equipment_to_griffon_comrades"
			#add_equipment_to_stockpile = {
			#	type = support_equipment
			#	amount = -100
			#	producer = STG
			#}
			GRA = {
				country_event = { id = griffons.130 days = 3 }
			}
		}
	}
	STG_send_artillery_to_griffon_comrades = {
		icon = rifles
		allowed = { tag = STG }
		visible = { 
			AND = {
				has_country_flag = griffon_intervention
				GRF = { has_civil_war = yes }
			}
		}
		available = {
			has_war = no
			#has_equipment = {
			#	artillery_equipment > 101
			#}
		}
		ai_will_do = {
			factor = 500
		}
		days_remove = 30
		days_re_enable = 75
		modifier = {
			experience_gain_army = 0.5
			consumer_goods_factor = 0.05
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_send_artillery_to_griffon_comrades"
			#add_equipment_to_stockpile = {
			#	type = artillery_equipment
			#	amount = -100
			#	producer = STG
			#}
			GRA = {
				country_event = { id = griffons.131 days = 3 }
			}
		}
	}
	STG_sent_international_warriors_to_griffon_comrades = {
		icon = rifles
		allowed = { tag = STG }
		visible = { 
			AND = {
				has_country_flag = griffon_intervention
				GRF = { has_civil_war = yes }
			}
		}
		available = {
			has_war = no
			has_manpower > 10000
		}
		ai_will_do = {
			factor = 500
		}
		days_remove = 60
		fire_only_once = yes
		modifier = {
			experience_gain_army = 0.5
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sent_international_warriors_to_griffon_comrades"
			GRA = {
				country_event = { id = griffons.132 days = 3 }
				set_country_flag = STG_sent_volonteer_internationalists_to_GRF
			}
		}
	}
	STG_promote_young_blood = {
		icon = rifles
		allowed = { tag = STG }
		visible = { 
			date > 1008.1.1
			has_government = communism
		}
		available = {
			always = no
			#has_war = no
			#has_government = communism
			#is_subject = no
			#OR = {
			#	NOT = { has_country_flag = polya_chosen }
			#	NOT = { 
			#		has_country_leader = {
			#			ruling_only = yes
			#			character = STG_dark_wing
			#		}
			#		has_country_leader = {
			#			ruling_only = yes
			#			character = STG_supreme_soviet
			#		}
			#	}
			#	has_completed_focus = purge
			#}
		}
		custom_cost_trigger = {
			check_variable = { var = command_power value = 30 compare = greater_than_or_equals }
		}
		custom_cost_text = decision_cost_CP_30
		ai_will_do = {
			factor = 500
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_sent_international_warriors_to_griffon_comrades"
			add_corps_commander_role = {
				character = STG_apple_fritter
				traits={ pony_race_trait career_officer trait_unpredictable organizer aggressive_assaulter }
				skill=3
				attack_skill=4
				defense_skill=3
				planning_skill=1
				logistics_skill=2
			}
			add_corps_commander_role = {
				character = STG_sunshower_raindrops
				traits={ pony_race_trait arrow air_force_commander trait_hurricane }
				skill=2
				attack_skill=3
				defense_skill=2
				planning_skill=1
				logistics_skill=1
			}
			add_corps_commander_role = {
				character = STG_blossomforth
				traits={ pony_race_trait inflexible_strategist trait_talented_coordinator organizer thorough_planner }
				skill=3
				attack_skill=2
				defense_skill=2
				planning_skill=4
				logistics_skill=2
			}
			hidden_effect = {
				add_command_power = -30
				STG_apple_fritter = { 
					add_timed_unit_leader_trait = {
						trait = recently_promoted
						days = 180
					}
				}
				STG_sunshower_raindrops = { 
					add_timed_unit_leader_trait = {
						trait = recently_promoted
						days = 180
					}
				}
				STG_blossomforth = { 
					add_timed_unit_leader_trait = {
						trait = recently_promoted
						days = 150
					}
				}
			}
		}
	}
}
form_the_socialist_world_republic = {
	form_the_socialist_world_republic_decision = {
		icon = red_star
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_government = communism
			check_variable = { num_owned_controlled_states = global.total_state_count }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_the_socialist_world_republic_decision"
			drop_cosmetic_tag = yes
			set_cosmetic_tag = COM_world
		}
	}
}
STG_debug_category = {
	
	STG_debug_populate_new_comecon_majors_list = {
		 
		complete_effect = {
		
			add_dynamic_modifier = { modifier = STG_SEV_modifier }
			
			clear_array = STG_comecon_majors_list
			add_to_array = { STG_comecon_majors_list = STG }
			add_to_array = { STG_comecon_majors_list = EQS }
			add_to_array = { STG_comecon_majors_list = CHN }
			add_to_array = { STG_comecon_majors_list = GRF }
			add_to_array = { STG_comecon_majors_list = YAK }
			
			clear_array = STG_comecon_minors_list
			every_other_country = {
				limit = {
					NOT = { 
						original_tag = EQS 
						original_tag = CHN 
						original_tag = YAK 
						original_tag = GRF 
					}
				}
				add_to_array = { PREV.STG_comecon_minors_list = THIS }
			}
			
			clear_array = STG_comecon_categories_array
			add_to_array = { STG_comecon_categories_array = 0 }
			add_to_array = { STG_comecon_categories_array = 1 }
			add_to_array = { STG_comecon_categories_array = 2 }
			add_to_array = { STG_comecon_categories_array = 3 }
			add_to_array = { STG_comecon_categories_array = 4 }
			add_to_array = { STG_comecon_categories_array = 5 }
			add_to_array = { STG_comecon_categories_array = 6 }  
			add_to_array = { STG_comecon_categories_array = 7 }
			clear_array = STG_comecon_categories_heavyeq_array
			add_to_array = { STG_comecon_categories_heavyeq_array = 8 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 9 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 10 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 11 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 12 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 13 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 14 }
			add_to_array = { STG_comecon_categories_heavyeq_array = 15 } 
			add_to_array = { STG_comecon_categories_heavyeq_array = 16 }
			clear_array = STG_comecon_categories_misc_array
			add_to_array = { STG_comecon_categories_misc_array = 17 }
			add_to_array = { STG_comecon_categories_misc_array = 18 }
			add_to_array = { STG_comecon_categories_misc_array = 19 }
			add_to_array = { STG_comecon_categories_misc_array = 20 }
			add_to_array = { STG_comecon_categories_misc_array = 21 }
			add_to_array = { STG_comecon_categories_misc_array = 22 }
			add_to_array = { STG_comecon_categories_misc_array = 23 }
			add_to_array = { STG_comecon_categories_misc_array = 24 }
			add_to_array = { STG_comecon_categories_misc_array = 25 }
			add_to_array = { STG_comecon_categories_misc_array = 26 }
			
			set_country_flag = available_comecon_flag
			
		}
	}

	STG_KRMLK_activate = {
		icon = red_star
		complete_effect = {
			STG_advisors_init = yes
		}
	}
	
	STG_debug_vasily = {
		icon = ger_reichskommissariats
		complete_effect = {
			mark_focus_tree_layout_dirty = yes
			remove_targeted_decision = { target = STG decision = STG_10th_Congress }
				clr_country_flag = STG_10th_congress_flag
				unlock_national_focus = STG_12th_year_of_revolution
				unlock_national_focus = STG_problems_in_party
				unlock_national_focus = STG_socialism_program
				unlock_national_focus = STG_cominform
				unlock_national_focus = STG_skynavia_kekw
				unlock_national_focus = STG_prywhen_why
				unlock_national_focus = STG_Zebrica_4head
				unlock_national_focus = STG_only_thing_we_all_agree_on
				unlock_national_focus = STG_about_freedom_and_unity
				unlock_national_focus = STG_doubters_on_left
				unlock_national_focus = STG_reliable_center
				unlock_national_focus = STG_pessimists_on_right
				unlock_national_focus = STG_send_in_sosister
				unlock_national_focus = STG_can_there_be_unity
				unlock_national_focus = STG_peasants_and_workers
				unlock_national_focus = STG_telegraph_agency
				unlock_national_focus = STG_state_warehouse_system
				unlock_national_focus = STG_petershoof_foreign_trade
				unlock_national_focus = STG_amogus_trade
				unlock_national_focus = STG_support_the_colhoz
				unlock_national_focus = STG_draka_s_kulakami
				unlock_national_focus = STG_another_year_of_stability
				unlock_national_focus = STG_scp_congress
			set_country_flag = STG_flag_unity_in_party
			retire_country_leader = yes
			promote_character = STG_vasiliy_wheatin
			load_focus_tree = stalliongrad_vasya
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
	STG_debug_status_quo_vasya = {
		icon = ger_reichskommissariats
		complete_effect = {
			retire_country_leader = yes
			promote_character = STG_vasiliy_wheatin
			load_focus_tree = stalliongrad_vasya_status_quo
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
	STG_debug_sinnie = {
		icon = ger_reichskommissariats
		complete_effect = {
			retire_country_leader = yes
			promote_character = STG_sinister_serov
			load_focus_tree = stalliongrad_sinne
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
	STG_debug_masha = {
		icon = ger_reichskommissariats
		complete_effect = {
			STG_sinister_serov = {
				retire = yes
			}
			load_focus_tree = STG_masha_focus
			promote_character = STG_masha_norushkina
			set_cosmetic_tag = STG_masha
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
	STG_debug_sladkova = {
		icon = ger_reichskommissariats
		complete_effect = {
			retire_country_leader = yes
			promote_character = STG_caramelka_sladkaya
			load_focus_tree = stalliongrad_sladkova
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
	STG_debug_dark_wing = {
		icon = ger_reichskommissariats
		complete_effect = {
			country_event = stalliongrad_darkwing.1
			clr_country_flag = STG_avaliable_party_mechainc
			remove_dynamic_modifier = {
				modifier = STG_left_center_right_buffs
			}
		}
	}
}
STG_elections_category_2 = {
	STG_sinister_coup = {

		icon = border_war

		activation = { has_country_flag = STG_sinnie_coup_flag }
		visible = {
			has_country_flag = STG_sinnie_coup_flag
		}

		available = {
			always = no
		}
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}

		is_good = no

		days_mission_timeout = 37

		fire_only_once = yes

		timeout_effect = {
			country_event = { id = stalliongrad_start.84 }
			hidden_effect = {
				remove_targeted_decision = { target = STG decision = STG_sinister_coup }
				clr_country_flag = STG_10th_congress_flag
				clr_country_flag = STG_sinnie_coup_flag
			}
		}
	}

	STG_sinnie_prepares_0 = {		#Find loyal commanders
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			NOT = {
				OR = {
					has_country_flag = STG_vasily_preapares_flag
					has_country_flag = STG_karamelka_preapares_flag
				}
			}
		}
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		cost = 50
		days_remove = 999

		complete_effect = {
			country_event = { id=stalliongrad_start.68 days = 3 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_0"
			hidden_effect = {
				set_country_flag = STG_sinnie_preapares_flag
			}
		}
	}

	STG_sinnie_prepares_1 = {		#secret transfer of loyal units closer to stalliongrad
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sinnie_coup_flag_0
		}
		cost = 15
		modifier = {
			consumer_goods_factor = 0.1
		}
		days_remove = 999

		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}

		complete_effect = {
			country_event = { id=stalliongrad_start.70 days = 4 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_1"
		}
	}

	STG_sinnie_prepares_2 = {		#preparation of armories
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sinnie_coup_flag_1
		}
		cost = 15
		modifier = {
			production_factory_efficiency_gain_factor = -0.20
		}
		days_remove = 999
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.83 days = 5 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_2"
		}
	}

	STG_sinnie_prepares_3 = {		#preparing cutting telephone and telegraph lines
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sinnie_coup_flag_2
		}

		cost = 75
		days_remove = 999
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.71 days = 6 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_3"
		}
	}

	STG_sinnie_prepares_vasya = {		#Ask Vasily to support the actions
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sinnie_coup_flag_3
		}
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		cost = 50
		days_remove = 999

		complete_effect = {
			country_event = { id=stalliongrad_start.63 days = 4 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_vasya"
		}
	}

	STG_sinnie_prepares_4 = {		#Coup
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sinnie_coup_flag_3
		}
		custom_cost_trigger = {
			command_power > 29
			has_political_power > 24
		}
		custom_cost_text = decision_cost_CP_30_pp_25
		complete_effect = {
			country_event = { id=stalliongrad_start.72 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sinnie_prepares_4"
			hidden_effect = {
				clr_country_flag = STG_sinnie_coup_flag_0
				clr_country_flag = STG_sinnie_coup_flag_1
				clr_country_flag = STG_sinnie_coup_flag_2
				clr_country_flag = STG_sinnie_coup_flag_3
				clr_country_flag = STG_sinnie_preapares_flag
				clr_country_flag = STG_sinnie_coup_flag
				set_country_flag = STG_sinnie_coup_flag_4
				add_command_power = -30
				add_political_power = -25
			}
		}
	}

	STG_sladkova_prepares_0 = {		#finding allies after the Congress
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			NOT = {
				OR = {
					has_country_flag = STG_sinnie_preapares_flag
					has_country_flag = STG_vasily_preapares_flag
				}
			}
		}

		cost = 25

		days_remove = 999
		modifier = {
			political_power_factor = -0.05
		}
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.85 days = 1 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_0"
			hidden_effect = {
				set_country_flag = STG_karamelka_preapares_flag
			}
		}
	}

	STG_sladkova_prepares_1 = {		#confirming the loyalty of police forces
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sladkova_prepares_flag_0
		}
		custom_cost_trigger = {
			command_power > 29
			has_army_experience > 15
		}
		custom_cost_text = decision_cost_CP_30_army_xp_15
		days_remove = 999
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.78 days = 1 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_1"
		}
	}
	STG_sladkova_prepares_2 = {		#replacing the composition of the radio security with a loyal
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sladkova_prepares_flag_1
		}
		cost = 15
		modifier = {
			political_power_factor = -0.15
		}
		days_remove = 999
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.86 days = 1 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_2"
		}
	}
	STG_sladkova_prepares_3 = {		#anti-leftist publications in newspapers that denigrate Sinister and anti-Vasily's too
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sladkova_prepares_flag_2
		}
		cost = 15
		days_remove = 999
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		complete_effect = {
			country_event = { id=stalliongrad_start.87 days = 1 }
			add_popularity = {
				ideology = communism
				popularity = -0.10
			}
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_3"
		}
	}

	STG_sladkova_prepares_vasya = {		#Ask Vasily to support the actions
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sladkova_prepares_flag_3
		}
		cancel_trigger = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
		}
		cost = 50
		days_remove = 999

		complete_effect = {
			country_event = { id=stalliongrad_start.66 days = 1 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_vasya"
		}
	}

	STG_sladkova_prepares_4 = {		#karamelka remove Vasiliy and Sinister from the party
		visible = {
			has_country_flag = STG_sinnie_coup_flag
			has_country_flag = STG_sladkova_prepares_flag_3
		}
		cost = 50
		complete_effect = {
			country_event = { id=stalliongrad_start.79 days = 1 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_sladkova_prepares_4"
			hidden_effect = {
				clr_country_flag = STG_sladkova_prepares_flag_0
				clr_country_flag = STG_sladkova_prepares_flag_1
				clr_country_flag = STG_sladkova_prepares_flag_2
				clr_country_flag = STG_sladkova_prepares_flag_3
				clr_country_flag = STG_sinnie_coup_flag
				clr_country_flag = STG_karamelka_preapares_flag
				set_country_flag = STG_sladkova_prepares_flag_4
				country_event = { id=stalliongrad_start.82 days = 1 }
			}
		}
	}

	STG_10th_Congress = {

		icon = border_war

		allowed = { tag = STG }

		visible = {
			has_country_flag = STG_10th_congress_flag
		}

		available = {
			always = no
		}

		is_good = no

		days_mission_timeout = 359

		fire_only_once = yes

		timeout_effect = {
			complete_national_focus = STG_scp_congress
			custom_effect_tooltip = STG_lock_focuses
			hidden_effect = {
				remove_targeted_decision = { target = STG decision = STG_10th_Congress }
				clr_country_flag = STG_10th_congress_flag
				unlock_national_focus = STG_12th_year_of_revolution
				unlock_national_focus = STG_problems_in_party
				unlock_national_focus = STG_socialism_program
				unlock_national_focus = STG_cominform
				unlock_national_focus = STG_skynavia_kekw
				unlock_national_focus = STG_prywhen_why
				unlock_national_focus = STG_Zebrica_4head
				unlock_national_focus = STG_only_thing_we_all_agree_on
				unlock_national_focus = STG_about_freedom_and_unity
				unlock_national_focus = STG_doubters_on_left
				unlock_national_focus = STG_reliable_center
				unlock_national_focus = STG_pessimists_on_right
				unlock_national_focus = STG_send_in_sosister
				unlock_national_focus = STG_can_there_be_unity
				unlock_national_focus = STG_peasants_and_workers
				unlock_national_focus = STG_telegraph_agency
				unlock_national_focus = STG_state_warehouse_system
				unlock_national_focus = STG_petershoof_foreign_trade
				unlock_national_focus = STG_amogus_trade
				unlock_national_focus = STG_support_the_colhoz
				unlock_national_focus = STG_draka_s_kulakami
				unlock_national_focus = STG_another_year_of_stability
			}
		}
	}

	#STG_center_and_left_alliance = {
	#	available = {
	#		NOT = {
	#			OR = {
	#				has_decision = STG_center_and_right_alliance
	#				has_decision = STG_right_and_left_alliance
	#			}
	#		}
	#	}
	#	visible = {
	#		NOT = { has_country_flag = STG_sinnie_coup_flag }
	#	}
	#	cost = 25
	#
	#	days_remove = 14
	#
	#	modifier = {
	#		political_power_gain = -0.50
	#	}
	#
	#	complete_effect = {
	#		set_country_flag = STG_alliance_between_center_and_left_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_center_and_left_alliance"
	#	}
	#	remove_effect = {
	#		clr_country_flag = STG_alliance_between_center_and_left_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_center_and_left_alliance"
	#	}
	#}
	#STG_center_and_right_alliance = {
	#	available = {
	#		NOT = {
	#			OR = {
	#				has_decision = STG_center_and_left_alliance
	#				has_decision = STG_right_and_left_alliance
	#			}
	#		}
	#	}
	#	visible = {
	#		NOT = { has_country_flag = STG_sinnie_coup_flag }
	#	}
	#	cost = 25
	#
	#	days_remove = 14
	#
	#	modifier = {
	#		political_power_gain = -0.50
	#	}
	#
	#	complete_effect = {
	#		set_country_flag = STG_alliance_between_center_and_right_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_center_and_right_alliance"
	#	}
	#	remove_effect = {
	#		clr_country_flag = STG_alliance_between_center_and_right_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_center_and_right_alliance"
	#	}
	#}
	#STG_right_and_left_alliance = {
	#	available = {
	#		NOT = {
	#			OR = {
	#				has_decision = STG_center_and_left_alliance
	#				has_decision = STG_center_and_right_alliance
	#			}
	#		}
	#	}
	#	visible = {
	#		NOT = { has_country_flag = STG_sinnie_coup_flag }
	#	}
	#	cost = 25
	#
	#	days_remove = 14
	#
	#	modifier = {
	#		political_power_gain = -0.50
	#	}
	#
	#	complete_effect = {
	#		set_country_flag = STG_alliance_between_right_and_left_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_right_and_left_alliance"
	#	}
	#	remove_effect = {
	#		clr_country_flag = STG_alliance_between_right_and_left_flag
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_right_and_left_alliance"
	#	}
	#}
	STG_production_plan = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_peasants_and_workers
		}
		cost = 25

		complete_effect = {
			country_event = { id = stalliongrad_start.91 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_production_plan"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}

	#STG_plan_choise_des = {
	#	visible = {
	#		has_completed_focus = STG_reorganize_the_industry
	#		NOT = { has_country_flag = STG_sinnie_coup_flag }
	#	}
	#	cost = 25
	#
	#	fire_only_once = yes
	#
	#	complete_effect = {
	#		country_event = { id = stalliongrad_start.29  }
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_plan_choise_des"
	#		hidden_effect = {
	#			set_country_flag = {
	#				flag = STG_activated_political_plan
	#				days = 90
	#				value = 1
	#			}
	#		}
	#	}
	#}

	STG_unplanned_profit_plan = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_peasants_and_workers
		}
		cost = 25

		complete_effect = {
			country_event = { id = stalliongrad_start.92 }
			log = "[GetDateText]: [Root.GetName]: Decision STG_unplanned_profit_plan"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}
	STG_research_focus_plan = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_amogus_trade
		}
		cost = 25
		fire_only_once = yes
		complete_effect = {
			country_event = { id = stalliongrad_start.93  }
			unlock_decision_tooltip = STG_another_research_focus_plan
			log = "[GetDateText]: [Root.GetName]: Decision STG_research_focus_plan"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}

	STG_another_research_focus_plan = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_amogus_trade
		}
		cost = 25
		fire_only_once = yes
		complete_effect = {
			country_event = { id = stalliongrad_start.94  }
			log = "[GetDateText]: [Root.GetName]: Decision STG_another_research_focus_plan"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}
	STG_some_extra_funds_plan = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_petershoof_foreign_trade
		}
		cost = 25

		complete_effect = {
			country_event = { id = stalliongrad_start.95  }
			log = "[GetDateText]: [Root.GetName]: Decision STG_some_extra_funds_plan"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}
	STG_some_extra_funds_plan_2 = {
		available = {
			NOT = { has_country_flag = STG_activated_political_plan }
		}
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_petershoof_foreign_trade
		}
		cost = 25

		complete_effect = {
			country_event = { id = stalliongrad_start.96  }
			log = "[GetDateText]: [Root.GetName]: Decision STG_some_extra_funds_plan_2"
			hidden_effect = {
				set_country_flag = {
					flag = STG_activated_political_plan
					days = 90
					value = 1
				}
			}
		}
	}
	#STG_discuss_about_delegate_in_CRY = {
	#	visible = {
	#		NOT = { has_country_flag = STG_sinnie_coup_flag }
	#		CRY = {
	#			exists = yes
	#			has_war = no
	#			NOT = {
	#				has_government = fascism
	#			}
	#		}
	#		has_completed_focus = STG_reorganize_the_industry
	#	}
	#	cost = 50
	#	fire_only_once = yes
	#	complete_effect = {
	#		country_event = { id = stalliongrad_start.97 }
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_discuss_about_delegate_in_CRY"
	#	}
	#}

	STG_discuss_about_delegate_in_SRS = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			SRS = {
				exists = yes
				has_government = communism
			}
			has_completed_focus = STG_skynavia_kekw
		}
		cost = 50
		fire_only_once = yes
		complete_effect = {
			country_event = { id = stalliongrad_start.102  }
			log = "[GetDateText]: [Root.GetName]: Decision STG_discuss_about_delegate_in_SRS"
		}
	}

	STG_discuss_about_delegate_in_GRW = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			GRW = {
				exists = yes
				has_government = communism
			}
			has_completed_focus = STG_prywhen_why
		}
		cost = 50
		fire_only_once = yes
		complete_effect = {
			country_event = { id = stalliongrad_start.107  }
			log = "[GetDateText]: [Root.GetName]: Decision STG_discuss_about_delegate_in_GRW"
		}
	}
	STG_publish_karamelkas_memoirs = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_about_freedom_and_unity
			check_variable = {
				karamelka_deep_lore < 3
			}
		}
		days_remove = 20
		cost = 30
		remove_effect = {
			country_event = stalliongrad_start.23
			log = "[GetDateText]: [Root.GetName]: Decision STG_publish_karamelkas_memoirs"
		}
	}
	STG_publish_stallions_archive = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_about_freedom_and_unity
			check_variable = {
				majority_deep_lore < 3
			}
		}
		days_remove = 20
		cost = 30
		remove_effect = {
			country_event = stalliongrad_start.24
			log = "[GetDateText]: [Root.GetName]: Decision STG_publish_stallions_archive"
		}
	}
	STG_publish_notes_on_the_current_situation = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_completed_focus = STG_about_freedom_and_unity
			check_variable = {
				masha_deep_lore < 3
			}
		}
		days_remove = 20
		cost = 30
		remove_effect = {
			country_event = stalliongrad_start.25
			log = "[GetDateText]: [Root.GetName]: Decision STG_publish_notes_on_the_current_situation"
		}
	}
	STG_write_mashas_answer = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_country_flag = STG_left_critics
		}
		days_remove = 7
		cost = 30
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_write_mashas_answer"
			country_event = stalliongrad_start.21
		}
	}
	STG_write_karamelkas_answer = {
		visible = {
			NOT = { has_country_flag = STG_sinnie_coup_flag }
			has_country_flag = STG_right_critics
		}
		days_remove = 7
		cost = 30
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision STG_write_karamelkas_answer"
			country_event = stalliongrad_start.22
		}
	}

	STG_choose_main = {
		visible = { is_debug = yes }
		complete_effect = {
			set_variable = { STG_player_debug_choise = 1 }
		}
	}
	STG_choose_left = {
		visible = { is_debug = yes }
		complete_effect = {
			set_variable = { STG_player_debug_choise = 2 }
		}
	}
	STG_choose_right = {
		visible = { is_debug = yes }
		complete_effect = {
			set_variable = { STG_player_debug_choise = 3 }
		}
	}
	STG_debug_add_10_main_party = {
		visible = {
			check_variable = { STG_player_debug_choise = 1 }
		 	is_debug = yes
		}
		complete_effect = {
			add_to_variable = { STG_main_party_support = 10 }
			clamp_variable = { var = STG_main_party_support max = 100 }
			add_to_variable = { STG_left_opposition_support = -5 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -5 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}
	STG_debug_add_20_main_party = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 1 }
		}
		complete_effect = {
			add_to_variable = { STG_main_party_support = 20 }
			clamp_variable = { var = STG_main_party_support max = 100 }
			add_to_variable = { STG_left_opposition_support = -10 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -10 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}
	STG_debug_add_50_main_party = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 1 }
		}
		complete_effect = {
			add_to_variable = { STG_main_party_support = 50 }
			clamp_variable = { var = STG_main_party_support max = 100 }
			add_to_variable = { STG_left_opposition_support = -25 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -25 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}

	STG_debug_add_10_left_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 2 }
		}
		complete_effect = {
			add_to_variable = { STG_left_opposition_support = 10 }
			clamp_variable = { var = STG_left_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -5 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -5 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}
	STG_debug_add_20_left_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 2 }
		}
		complete_effect = {
			add_to_variable = { STG_left_opposition_support = 20 }
			clamp_variable = { var = STG_left_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -10 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -10 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}
	STG_debug_add_50_left_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 2 }
		}
		complete_effect = {
			add_to_variable = { STG_left_opposition_support = 50 }
			clamp_variable = { var = STG_left_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -25 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_right_opposition_support = -25 }
			clamp_variable = { var = STG_right_opposition_support min = 0 }
		}
	}

	STG_debug_add_10_right_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 3 }
		}
		complete_effect = {
			add_to_variable = { STG_right_opposition_support = 10 }
			clamp_variable = { var = STG_right_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -5 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_left_opposition_support = -5 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
		}
	}
	STG_debug_add_20_right_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 3 }
		}
		complete_effect = {
			add_to_variable = { STG_right_opposition_support = 20 }
			clamp_variable = { var = STG_right_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -10 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_left_opposition_support = -10 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
		}
	}
	STG_debug_add_50_right_oppos = {
		visible = {
			is_debug = yes
			check_variable = { STG_player_debug_choise = 3 }
		}
		complete_effect = {
			add_to_variable = { STG_right_opposition_support = 50 }
			clamp_variable = { var = STG_right_opposition_support max = 100 }
			add_to_variable = { STG_main_party_support = -25 }
			clamp_variable = { var = STG_main_party_support min = 0 }
			add_to_variable = { STG_left_opposition_support = -25 }
			clamp_variable = { var = STG_left_opposition_support min = 0 }
		}
	}
}
#STG_elections_category = {
	#STG_pick_vasya_2_decision = {
	#	icon = ger_reichskommissariats
	#	visible = {
	#		has_completed_focus = status_quo
	#		NOT = {
	#		    OR = {
	#			    has_country_flag = STG_vasya_support_2
	#				has_country_flag = STG_right_wing
	#				has_country_flag = STG_left_wing
	#			}
	#		}
	#	}
	#	available = {
	#		is_subject = no
	#	}
	#	complete_effect = {
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_pick_vasya_2_decision"
	#		custom_effect_tooltip = STG_pick_vasya_2_decision
	#		hidden_effect = {
	#		    set_country_flag = STG_vasya_support_2
	#		}
	#	}
	#	#ai_will_do = {
	#	#	factor = 2500
	#	#}
	#}
	#STG_pick_right_wing_decision = {
	#	icon = ger_reichskommissariats
	#	visible = {
	#		has_completed_focus = status_quo
	#		NOT = {
	#		    OR = {
	#			    has_country_flag = STG_vasya_support_2
	#				has_country_flag = STG_right_wing
	#				has_country_flag = STG_left_wing
	#			}
	#		}
	#	}
	#	available = {
	#		is_subject = no
	#	}
	#	complete_effect = {
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_pick_right_wing_decision"
	#		custom_effect_tooltip = STG_pick_right_wing_decision_tp
	#		hidden_effect = {
	#		    set_country_flag = STG_right_wing
	#		}
	#	}
		#ai_will_do = {
		#	factor = 2500
		#}
	#}
	#STG_pick_left_wing_decision = {
	#	icon = ger_reichskommissariats
	#	visible = {
	#		has_completed_focus = status_quo
	#		NOT = {
	#		    OR = {
	#			    has_country_flag = STG_vasya_support_2
	#				has_country_flag = STG_right_wing
	#				has_country_flag = STG_left_wing
	#			}
	#		}
	#	}
	#	available = {
	#		is_subject = no
	#	}
	#	complete_effect = {
	#		log = "[GetDateText]: [Root.GetName]: Decision STG_pick_left_wing_decision"
	#		custom_effect_tooltip = STG_pick_left_wing_decision_tp
	#		hidden_effect = {
	#		    set_country_flag = STG_left_wing
	#		}
	#	}
		#ai_will_do = {
		#	factor = 2500
		#}
	#}
#}
military_training_category = {
	STG_improved_molniya_class = {
		icon = generic_naval
		available = {
			has_tech = basic_dp_light_battery
		}
		visible = {
			tag = STG
			has_dlc = "Man the Guns"
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			has_political_power > 29
		}

		custom_cost_text = decision_cost_pp_30

		modifier = {
			civilian_factory_use = 1
		}

		fire_only_once = yes

		days_remove = 30

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_cruiser_submarine_2"
			hidden_effect = {
				add_political_power = -30
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_cruiser_submarine_2"
			create_equipment_variant = {
				name = "Slava Class"
				type = ship_hull_cruiser_2
				name_group = STG_CL_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_medium_battery_2
					fixed_ship_anti_air_slot = ship_anti_air_2
					fixed_ship_fire_control_system_slot = ship_fire_control_system_1
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = cruiser_ship_engine_2
					fixed_ship_armor_slot = ship_armor_cruiser_1
					fixed_ship_secondaries_slot = dp_ship_secondaries_1
					front_1_custom_slot = ship_anti_air_2
					mid_1_custom_slot = dp_ship_secondaries_1
					mid_2_custom_slot = ship_medium_battery_2
					rear_1_custom_slot = empty
				}
			}
		}
	}
	STG_improved_gnevny_class = {
		icon = generic_naval
		available = {
			has_tech = basic_dp_light_battery
		}
		visible = {
			tag = STG
			has_dlc = "Man the Guns"
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			has_political_power > 29
		}

		custom_cost_text = decision_cost_pp_30

		modifier = {
			civilian_factory_use = 1
		}

		fire_only_once = yes

		days_remove = 30

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_cruiser_submarine_2"
			hidden_effect = {
				add_political_power = -30
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_cruiser_submarine_2"
			create_equipment_variant = {
				name = "Razyashchiy Class"
				type = ship_hull_light_2
				name_group = STG_DD_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = dp_light_battery_1
					fixed_ship_anti_air_slot = ship_anti_air_2
					fixed_ship_fire_control_system_slot = ship_fire_control_system_1
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = light_ship_engine_2
					fixed_ship_torpedo_slot = ship_torpedo_2
					mid_1_custom_slot = ship_depth_charge_2
					rear_1_custom_slot = dp_light_battery_1
				}
			}
		}
	}
}

# STG_hunger = {
# 	STG_debug_add_15_hunger = {
# 		allowed = {
# 			is_debug = yes
# 		}

# 		complete_effect = {

# 			add_to_variable = { hunger_level_100 = 15 tooltip = change_stg_hunger_level }
# 			clamp_variable = { var = hunger_level_100 max = 100 }
# 		}
# 	}

# 	STG_debug_take_15_hunger = {
# 		allowed = {
# 			is_debug = yes
# 		}

# 		complete_effect = {
# 			log = "[GetDateText]: [Root.GetName]: Debug removing 15 hunger"
# 			add_to_variable = { hunger_level_100 = -15 tooltip = change_stg_hunger_level }

# 		}
# 	}

# 	STG_kulaki_food = {

# 		cost = 25
# 		days_re_enable = 30
# 		days_remove = 30
# 		modifier = {
# 			consumer_goods_factor = 0.05
# 		}
# 		complete_effect = {
# 			add_to_variable = { hunger_level_100 = 10 tooltip = change_food_satisfaction }
# 		}

# 	}

# 	STG_colhoz_food = {

# 		cost = 25
# 		days_re_enable = 30
# 		days_remove = 30
# 		available = {
# 			num_of_civilian_factories_available_for_projects > 0
# 		}
# 		modifier = {
# 			civilian_factory_use = 1
# 		}
# 		complete_effect = {
# 			add_to_variable = { hunger_level_100 = 10 tooltip = change_food_satisfaction }
# 		}

# 	}

# 	STG_gospred_food = {
# 		cost = 25
# 		days_re_enable = 30
# 		days_remove = 30

# 		modifier = {
# 			industrial_capacity_factory = -0.1
# 			industrial_capacity_dockyard = -0.1
# 		}
# 		complete_effect = {
# 			add_to_variable = { hunger_level_100 = 10 tooltip = change_food_satisfaction }
# 		}

# 	}

# 	STG_podsobhoz_food = {
# 		cost = 25
# 		days_re_enable = 30
# 		days_remove = 30

# 		modifier = {
# 			political_power_factor = -0.25
# 		}
# 		complete_effect = {
# 			add_to_variable = { hunger_level_100 = 10 tooltip = change_food_satisfaction }
# 		}

# 	}

# 	STG_import_food = {
# 		cost = 75
# 		days_re_enable = 30
# 		days_remove = 30

# 		complete_effect = {
# 			add_to_variable = { hunger_level_100 = 10 tooltip = change_food_satisfaction }
# 		}

# 	}
# }


STG_resource_effort = {

	STG_ravenskoe_chromium = {

		visible = {
			OR = {
				has_tech = excavation3
				has_completed_focus = STG_geological_expeditions_in_the_north
			}
		}

		available = {
			has_tech = excavation3
			has_completed_focus = STG_geological_expeditions_in_the_north
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 332
			controls_state = 332
		}

		days_remove = 30
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 2
		}
		cost = 25
		remove_effect = {
			332 = {
				add_resource = {
					type = chromium
					amount = 12
				}
			}

		}
	}

	STG_caramel_marks_oil_dec = {

		visible = {
			has_completed_focus = STG_straits_oil_refinery
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 235
			controls_state = 235
		}

		days_remove = 30
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 2
		}
		cost = 25
		remove_effect = {
			235 = {
				add_resource = {
					type = oil
					amount = 8
				}
			}

		}
	}

	STG_zvezdopadovo_tungsten = {
		visible = {
			has_completed_focus = STG_expanding_old_mines
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 678
			controls_state = 678
		}

		days_remove = 30
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 2
		}
		cost = 25
		remove_effect = {
			678 = {
				add_resource = {
					type = tungsten
					amount = 12
				}
			}

		}
	}

	STG_severokholm_steel = {
		visible = {
			has_completed_focus = STG_expanding_old_mines
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 168
			controls_state = 168
		}

		days_remove = 30
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 2
		}
		cost = 25
		remove_effect = {
			168 = {
				add_resource = {
					type = steel
					amount = 20
				}
			}

		}
	}
	STG_konzan_aluminium = {
		visible = {
			has_completed_focus = STG_improve_the_excavation_system
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 225
			controls_state = 225
		}

		days_remove = 30
		fire_only_once = yes
		modifier = {
			civilian_factory_use = 2
		}
		cost = 25
		remove_effect = {
			225 = {
				add_resource = {
					type = aluminium
					amount = 15
				}
			}

		}
	}

}

STG_the_plan = {
	STG_first_plan = {
		days_mission_timeout = 180
		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			num_of_civilian_factories > ROOT.STG_plan_target_civs
			num_of_military_factories > ROOT.STG_plan_target_mils
			166 = {
				infrastructure > 4
			}
		}
		activation = {
			always = no
		}
		is_good = yes
		fire_only_once = yes
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			activate_mission = STG_second_plan
			set_variable = { STG_plan_target_civs = ROOT.num_of_civilian_factories }
			add_to_variable = { STG_plan_target_civs = 2 }
			set_variable = { STG_plan_target_mils = ROOT.num_of_military_factories }
			set_variable = { STG_plan_target_dock = ROOT.num_of_naval_factories }
			set_country_flag = STG_first_plan_success
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_first_plan

		}
	}
	STG_second_plan = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		days_mission_timeout = 180
		is_good = yes
		available = {
			num_of_civilian_factories > ROOT.STG_plan_target_civs
			num_of_military_factories > ROOT.STG_plan_target_mils
			num_of_naval_factories > ROOT.STG_plan_target_dock
			any_owned_state = {
				NOT = {
					state = 166
				}
				is_coastal = yes
				infrastructure > 4
			}
		}
		activation = {
			always = no
		}
		fire_only_once = yes
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			activate_mission = STG_third_plan
			set_variable = { STG_plan_target_civs = ROOT.num_of_civilian_factories }
			add_to_variable = { STG_plan_target_civs = 1 }
			set_variable = { STG_plan_target_mils = ROOT.num_of_military_factories }
			add_to_variable = { STG_plan_target_mils = 1 }
			set_country_flag = STG_second_plan_success
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_second_plan
		}
	}
	STG_third_plan = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			num_of_civilian_factories > ROOT.STG_plan_target_civs
			num_of_military_factories > ROOT.STG_plan_target_mils
			153 = {
				air_base > 9
			}
			all_owned_state = {
				infrastructure > 0
			}
		}
		activation = {
			always = no
		}
		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			set_country_flag = STG_third_plan_success
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_third_plan
		}
	}

	# Plan Civilian
	STG_plan_priority_civs_dec = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_plan_priority_civil_factories
		}
		fire_only_once = yes
		complete_effect = {
			set_variable = { STG_plan_priority_target_civs = ROOT.num_of_civilian_factories }
			multiply_variable = { STG_plan_priority_target_civs = 1.1 }
			add_to_variable = { STG_plan_priority_target_civs = -0.5 }
			round_variable = STG_plan_priority_target_civs
			activate_mission = STG_plan_priority_civs_mis
			STG_stop_plan_effect = yes
		}
	}
	STG_plan_priority_civs_mis = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			num_of_civilian_factories > ROOT.STG_plan_priority_target_civs
		}
		activation = {
			always = no
		}
		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			STG_plan_restart_effect = yes
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_plan_priority_civs_mis
		}
	}

	# Plan : Misc building
	STG_plan_priority_build_dec = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_plan_priority_building
		}
		fire_only_once = yes
		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
					}
				}

				set_variable = {
					STG.STG_state_to_build = THIS.id
				}
				set_variable = {
					STG_starting_infra = infrastructure_level
				}
				add_to_variable = {
					STG_starting_infra = 2
				}
				set_variable = {
					STG_starting_mil = arms_factory_level
				}
				set_variable = {
					STG_starting_civ = industrial_complex_level
				}
			}

			activate_mission = STG_plan_priority_build_mis
			STG_stop_plan_effect = yes
		}
	}
	STG_plan_priority_build_mis = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			var:STG_state_to_build = {
				OR = {
					infrastructure > 4
					check_variable = {
						var = infrastructure_level
						value = STG_starting_infra
						compare = greater_than_or_equals
					}
				}
				check_variable = { arms_factory_level > STG_starting_mil }
				check_variable = { industrial_complex_level > STG_starting_civ }
			}
		}
		activation = {
			always = no
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			STG_plan_restart_effect = yes
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_plan_priority_build_mis
		}
	}

	# Plan : Military factories
	STG_plan_priority_mils_dec = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_plan_priority_military_factories
		}
		fire_only_once = yes

		complete_effect = {
			set_variable      = { STG_plan_priority_target_mils = ROOT.num_of_arms_factories }
			multiply_variable = { STG_plan_priority_target_mils = 1.1 }
			add_to_variable   = { STG_plan_priority_target_mils = -0.5 }
			round_variable    = STG_plan_priority_target_mils

			set_variable      = { STG_plan_priority_target_dockyards = ROOT.num_of_naval_factories }
			multiply_variable = { STG_plan_priority_target_dockyards = 1.05 }
			add_to_variable   = { STG_plan_priority_target_dockyards = -0.5 }
			round_variable    = STG_plan_priority_target_dockyards

			activate_mission = STG_plan_priority_build_mils_mission
			STG_stop_plan_effect = yes
		}
	}

	STG_plan_priority_build_mils_mission = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			num_of_military_factories > STG_plan_priority_target_mils
			num_of_naval_factories    > STG_plan_priority_target_dockyards
		}
		activation = {
			always = no
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			STG_plan_restart_effect = yes
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_plan_priority_build_mils_mission
		}
	}

	# Plan : Ressources factories
	STG_plan_priority_ressources_dec = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_plan_priority_resources
		}
		fire_only_once = yes

		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 3
					}
					free_building_slots = {
						building = synthetic_refinery
						size > 0
					}
				}

				set_variable = {
					STG.STG_state_to_build = THIS.id
				}
				# Target infrastuctures
				set_variable = {
					STG_starting_infra = infrastructure_level
				}
				add_to_variable = {
					STG_starting_infra = 2
				}
				# Target civilian factories
				set_variable = {
					STG_starting_civ = industrial_complex_level
				}
				add_to_variable = { STG_starting_civ = 1 }
				set_variable = {
					STG_target_synthetic = building_level
				}
				# Target synthetic
				set_variable = {
					STG_starting_synthetic = building_level@synthetic_refinery
				}
				# Target fuel silo
				set_variable = {
					STG_starting_fuel_silo = building_level@fuel_silo
				}
			}

			activate_mission = STG_plan_priority_build_ressources_mission
			STG_stop_plan_effect = yes
		}
	}

	STG_plan_priority_build_ressources_mission = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			var:STG_state_to_build = {
				OR = {
					infrastructure > 4
					check_variable = {
						var = infrastructure_level
						value = STG_starting_infra
						compare = greater_than_or_equals
					}
				}
				check_variable = { arms_factory_level > STG_starting_mil }
				check_variable = { industrial_complex_level > STG_starting_civ }
				check_variable = { building_level@synthetic_refinery > STG_starting_synthetic }
				check_variable = { building_level@fuel_silo > STG_starting_fuel_silo }
			}
		}
		activation = {
			always = no
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			STG_plan_restart_effect = yes
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_plan_priority_build_ressources_mission
		}
	}

	# Plan : Ressources infrastructures
	STG_plan_priority_infrastructures_dec = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_plan_priority_infrastructure
		}
		fire_only_once = yes

		complete_effect = {
			# Default value that are different from a state id
			set_variable = { STG_state_to_build = STG }
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					check_variable = { infrastructure_level < 3 }
				}

				set_variable = {
					STG.STG_state_to_build = THIS.id
				}
				# Target infrastuctures
				set_variable = {
					STG_starting_infra = infrastructure_level
				}
				add_to_variable = {
					STG_starting_infra = 3
				}
			}

			# If we found a state that correspond to the mission, start the mission
			if = {
				limit = { NOT = { check_variable = { STG_state_to_build = STG } } }
				activate_mission = STG_plan_priority_build_infrastructures_mission
				STG_stop_plan_effect = yes
			}
		}
	}

	STG_plan_priority_build_infrastructures_mission = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			var:STG_state_to_build = {
				check_variable = {
					var = infrastructure_level
					value = STG_starting_infra
					compare = greater_than_or_equals
				}
			}
		}
		activation = {
			always = no
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
			add_political_power = 60
			add_stability = 0.06
			STG_plan_restart_effect = yes
		}
		timeout_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.06
			}
			add_political_power = -60
			add_stability = -0.06
			activate_mission = STG_plan_priority_build_infrastructures_mission
		}
	}
}

STG_vasily_war_stuff = {

	STG_boosting_allied_airbases = {

		icon = GFX_decision_SOV_the_stalin_constitution
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_air_bases_building
		}
		days_remove = 120
		modifier = {
			consumer_goods_factor = 0.1
		}
		targeted_modifier = {
			tag = EQS
			production_speed_air_base_factor = 1
			repair_speed_air_base_factor = 1
		}
	}
	STG_cooperative_tanks = {

		icon = GFX_decision_SOV_secure_the_administration
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_technologies_exchange
		}
		days_remove = 120
		fire_only_once = yes
		modifier = {
			consumer_goods_factor = 0.1
		}
		remove_effect = {
			custom_effect_tooltip = STG_technologies_exchange_1_ns_tt
			set_country_flag = STG_cooperative_tanks_made
			hidden_effect = {
				add_ideas = STG_tank_discount
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
					}
					add_ideas = STG_tank_discount
				}
			}
		}
	}
	STG_cooperative_planes = {

		icon = GFX_decision_SOV_secure_the_administration
		allowed = { original_tag = STG }
		available = {
			has_completed_focus = STG_technologies_exchange
		}
		days_remove = 120
		fire_only_once = yes
		modifier = {
			consumer_goods_factor = 0.1
		}
		remove_effect = {
			custom_effect_tooltip = STG_technologies_exchange_2_ns_tt
			set_country_flag = STG_cooperative_planes_made
			hidden_effect = {
				add_ideas = STG_plane_discount
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
					}
					add_ideas = STG_plane_discount
				}
			}
		}
	}
	STG_super_designer_tank = {

		icon = GFX_decision_SOV_secure_the_administration
		allowed = {
			original_tag = STG
			NOT = {
				has_dlc = "Arms Against Tyranny"
			}
		}
		available = {
			has_completed_focus = STG_joint_equipment_designers
		}
		days_remove = 120
		fire_only_once = yes
		modifier = {
			consumer_goods_factor = 0.1
		}
		remove_effect = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = STG_CRY_EQS_joint_designer
			set_country_flag = STG_super_designer_made
		}
	}
}

STG_comecon_category = {

	debug_start_comecon = {

		visible = {
			is_debug = yes
		}

		complete_effect = {
			add_dynamic_modifier = { modifier = STG_comecon_leader_vasily }
			promote_character = STG_vasiliy_wheatin
			STG_update_comecon_modifier = yes
		}
	} 

	debug_populate_major_array = {

		visible = {
			is_debug = yes
		}

		complete_effect = {
			EQS = { STG_add_scope_to_comecon = yes } 
			CHN = { STG_add_scope_to_comecon = yes }
			OLE = { STG_add_scope_to_comecon = yes }
		}
	}
	debug_clear_comecon = {
		visible = {
			is_debug = yes
		}

		complete_effect = {
			clear_array = STG_COMECON_majors_array
			clear_array = STG_COMECON_minors_array
		}
	}

	debug_update_comecon = {

		visible = {
			is_debug = yes
		}

		complete_effect = {
			STG_update_comecon_modifier = yes
		}
	}

	comecon_debug_populate_comecon_mm = {
		visible = {
			always = yes
		}
		complete_effect = {
			every_other_country = {

				STG_add_scope_to_comecon = yes
			}
		}
	}
	
}

STG_comecon_leader_category = {
	comecon_invite_country_to_comecon = {
		target_trigger = {
			FROM = {
				if = {
					limit = {
						STG = { 
							has_dynamic_modifier = {
								modifier = STG_comecon_leader_vasily
							} 
						} 
					}
					STG_vasily_comecon_member_list = yes
				} 

				else_if = {
					limit = {
						STG = { 
							has_dynamic_modifier = {
								modifier = STG_comecon_leader_karamelka
							} 
						} 
					}
					STG_karamelka_comecon_member_list = yes
				}

				else_if = {
					limit = {
						STG = { 
							has_dynamic_modifier = {
								modifier = STG_comecon_leader_sinister
							} 
						}
					}
					STG_sinister_comecon_member_list = yes
				}

				else_if = {
					limit = {
						STG = { 
							has_dynamic_modifier = {
								modifier = STG_comecon_leader_masha
							} 
						} 
					}
					STG_masha_comecon_member_list = yes
				}
				NOT = { has_country_flag = country_refused_to_join_comecon }				
			}
		}

		complete_effect = {
			FROM = {
				country_event = { id = stalliongrad_comecon.1 }
			}
		}
	}
}

STG_comecon_member_category = {

	comecon_member_mission_delay = {
		allowed = {
			always = no
		}

		days_mission_timeout = 15
		selectable_mission = no
		available = {
			always = no
		}
		cancel_trigger = {
			always = no
		}
		timeout_effect = {
			clr_country_flag = COMECON_decision_active
		}
	}

	comecon_member_pp_bonus = {
		visible = {
			always = yes
		}
		available = {
			NOT = {
				has_country_flag = COMECON_decision_active
			}
		}

		cost = 50
		days_remove = 10
		modifier = {
			political_power_gain = 0.10
		}
		complete_effect = {
			hidden_effect = {
				set_country_flag = COMECON_decision_active
				activate_mission = comecon_mission_delay
			}
		}
	}

	comecon_member_factory_bonus = {
		visible = {
			always = yes
		}
		available = {
			NOT = {
				has_country_flag = COMECON_decision_active
			}
		}

		cost = 50
		days_remove = 10
		modifier = {
			industrial_capacity_factory = 0.10
		}
		complete_effect = {
			hidden_effect = {
				set_country_flag = COMECON_decision_active
				activate_mission = comecon_mission_delay
			}
		}
	}

	comecon_member_construction_speed_bonus = {
		visible = {
			always = yes
		}
		available = {
			NOT = {
				has_country_flag = COMECON_decision_active
			}
		}

		cost = 50
		days_remove = 10
		modifier = {
			production_speed_buildings_factor = 0.10
		}
		complete_effect = {
			hidden_effect = {
				set_country_flag = COMECON_decision_active
				activate_mission = comecon_mission_delay
			}
		}
	}
}


STG_sinister_industry_category = {

	STG_sinister_industry_civilian_factories = {

		available = {
			crystals > 23
		}
		cost = 50
		fire_only_once = yes
		days_remove = 150
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_civilian_factories complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_civilian_factories remove_effect"
			235 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			163 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	STG_sinister_industry_arms_factories = {
		available = {
			crystals > 23
			has_completed_focus = STG_investments_in_crystal_mining
		}
		cost = 50
		fire_only_once = yes
		days_remove = 150
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories remove_effect"
			334 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			165 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	STG_sinister_industry_civ_factories_phase_two = {
		available = {
			crystals > 29
			has_completed_focus = STG_investments_in_crystal_mining
		}
		cost = 50
		fire_only_once = yes
		days_remove = 180
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_civ_factories_phase_two complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_civ_factories_phase_two remove_effect"
			235 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			163 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			237 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	STG_sinister_industry_arms_factories_zvezdopadovo = {
		available = {
			crystals > 29
		}
		cost = 50
		fire_only_once = yes
		days_remove = 180
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories_zvezdopadovo complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories_zvezdopadovo remove_effect"
			678 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}
	STG_sinister_industry_arms_factories_krasivsk = {
		available = {
			crystals > 29
		}
		cost = 50
		fire_only_once = yes
		days_remove = 180
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories_krasivsk complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_sinister_industry_arms_factories_krasivsk remove_effect"
			234 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}
}
STG_sinnie_3_year_plan_cat = {
	
	STG_sinnies_3_year_plan = {
		available = {
			always = no
		}
		activation = {
			always = no
		}
		cancel_trigger = {
			has_completed_focus = STG_first_profits_of_magic_industry
			OR = {
				has_completed_focus = STG_rapid_offensive
				has_completed_focus = STG_experiment_with_magic
			}
			OR = {
				has_completed_focus = STG_sinister_constitution
				has_completed_focus = STG_under_sinister_leadership
			}
		}
		days_mission_timeout = 1095
		is_good = no

		timeout_effect = {
			add_to_variable = {
				STG_sinnie_madness_points = 3
			}
			STG_sinnie_madness_check = yes
		}
		cancel_effect = {
			add_political_power = 50
			add_stability = 0.1
			add_war_support = 0.05
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
		}
	}
	STG_sinnies_army_task = {
		available = {
			always = no
		}
		activation = {
			always = no
		}
		cancel_trigger = {
			count_triggers = {
				amount = 2
				custom_trigger_tooltip = {					#1500 rn. it's like 3 30w(8/7) divisions, in 8 tanks is 480 lights
					tooltip = STG_1000_light_tanks
					check_variable = {
						num_equipment_in_armies@light_tank_chassis > STG_sinnies_army_task_light_var
					}
				}
				custom_trigger_tooltip = {					#1000 rn. it's like 2.5 30w(8/7) divisions, in 8 tanks is 400 mediums
					tooltip = STG_800_medium_tanks
					check_variable = {
						num_equipment_in_armies@medium_tank_chassis > STG_sinnies_army_task_medium_var
					}
				}
				custom_trigger_tooltip = {					#if you wanna complete it with modern you are crazy, lol
					tooltip = STG_800_modern_tanks
					check_variable = {
						num_equipment_in_armies@modern_tank_chassis > STG_sinnies_army_task_modern_var
					}
				}
				custom_trigger_tooltip = {					#500 rn. it's like 2 30w(8/7) divisions, in 8 tanks is 320 heavies
					tooltip = STG_500_heavy_tanks		
					check_variable = {
						num_equipment_in_armies@heavy_tank_chassis > STG_sinnies_army_task_heavy_var
					}
				}
				custom_trigger_tooltip = {					#if you wanna complete it with superheavy you are twice crazy, lol
					tooltip = STG_100_super_heavy_tanks
					check_variable = {
						num_equipment_in_armies@super_heavy_tank_chassis > STG_sinnies_army_task_super_heavy_var
					}
				}
				if = {
					limit = {
						has_completed_focus = STG_experiment_with_magic
					}
					custom_trigger_tooltip = {
						tooltip = STG_100_super_heavy_tanks
						check_variable = {
							num_equipment_in_armies@magical_equipment > 23999 # 24000, or 24 20ws
						}
					}
				}
			}
		}
		days_mission_timeout = 1100
		is_good = no

		timeout_effect = {
			add_to_variable = {
				STG_sinnie_madness_points = 1
			}
			STG_sinnie_madness_check = yes
		}
		cancel_effect = {
			army_experience = 100
			add_doctrine_cost_reduction = {
				cost_reduction = 0.5
				name = land_doctrine
				uses = 1
				category = land_doctrine
			}
			add_tech_bonus = {
				name = armor_bonus
				category = armor
				uses = 1
				bonus = 1
			}
		}
	}
	STG_sinnies_navy_task = {
		available = {
			always = no
		}
		activation = {
			always = no
		}
		cancel_trigger = {# VARIABLES ARE BUGGED, THIS IS A WORKAROUND
			if = {
				limit = {
					has_country_flag = STG_task_surface_reduction
				}
				has_navy_size = {
					size > 3
					archetype = ship_hull_heavy
				}
				has_navy_size = {
					size > 18
					archetype = ship_hull_cruiser
				}
				has_navy_size = {
					size > 33
					archetype = ship_hull_light
				}
			}
			else = {
				has_navy_size = {
					size > 4
					archetype = ship_hull_heavy
				}
				has_navy_size = {
					size > 23
					archetype = ship_hull_cruiser
				}
				has_navy_size = {
					size > 39
					archetype = ship_hull_light
				}
			}
			if = {
				limit = {
					has_country_flag = STG_task_sub_reduction
				}
				has_navy_size = {
					size > 29
					type = submarine
				}
			}
			else = {
				has_navy_size = {
					size > 39
					type = submarine
				}
			}
		}
		days_mission_timeout = 1100
		is_good = no

		timeout_effect = {
			add_to_variable = {
				STG_sinnie_madness_points = 1
			}
			STG_sinnie_madness_check = yes
		}
		cancel_effect = {
			navy_experience = 100
			add_doctrine_cost_reduction = {
				cost_reduction = 0.5
				name = naval_doctrine
				uses = 1
				category = naval_doctrine
			}
			add_tech_bonus = {
				name = navy_bonus
				category = naval_equipment
				uses = 1
				bonus = 1
			}
		}
	}
	STG_sinnies_air_task = {
		available = {
			always = no
		}
		activation = {
			always = no
		}
		cancel_trigger = {
			AND = {
				OR = {
					custom_trigger_tooltip = {
						tooltip = STG_1000_fighters
						has_deployed_air_force_size = {
							size > STG_sinnies_air_task_fighter_var
							type = fighter
						}
					}
					custom_trigger_tooltip = {
						tooltip = STG_600_heavy_fighters
						has_deployed_air_force_size = {
							size > STG_sinnies_air_task_heavy_fighter_var
							type = heavy_fighter
						}
					}
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = STG_500_cas
						has_deployed_air_force_size = {
							size > STG_sinnies_air_task_cas_var
							type = cas
						}
					}
					custom_trigger_tooltip = {
						tooltip = STG_250_tactical_bombers
						has_deployed_air_force_size = {
							size > STG_sinnies_air_task_tac_var
							type = tactical_bomber
						}
					}
				}
			}
		}
		days_mission_timeout = 1100
		is_good = no

		timeout_effect = {
			add_to_variable = {
				STG_sinnie_madness_points = 1
			}
			STG_sinnie_madness_check = yes
		}
		cancel_effect = {
			air_experience = 100
			add_doctrine_cost_reduction = {
				cost_reduction = 0.5
				name = air_doctrine
				uses = 1
				category = air_doctrine
			}
			add_tech_bonus = {
				name = air_bonus
				category = air_equipment
				uses = 1
				bonus = 1
			}
		}
	}
	STG_sinnies_size_task = {
		available = {
			always = no
		}
		activation = {
			always = no
		}
		cancel_trigger = {
			set_temp_variable = { STG_final_manpower = deployed_army_manpower_k }
			add_to_temp_variable = { STG_final_manpower = deployed_navy_manpower_k }
			add_to_temp_variable = { STG_final_manpower = deployed_airforce_manpower_k }
			custom_trigger_tooltip = {
				tooltip = STG_final_manpower_trigger	
				AND = {
					check_variable = {
						STG_final_manpower > 899
					}
					check_variable = { 
						num_equipment_in_armies@infantry_equipment > 90000 
					}
				}
			}
		}
		days_mission_timeout = 1100
		is_good = no

		timeout_effect = {
			add_to_variable = {
				STG_sinnie_madness_points = 1
			}
			STG_sinnie_madness_check = yes
		}
		cancel_effect = {
			add_political_power = 300
		}
	}
}

STG_equestrian_revolution_category = {

	STG_debug_remove_revolution = {
		complete_effect = {
			every_state = {
				limit = {
					AND = {
						is_core_of = EQS
						NOT = { is_owned_by = STG }
					}
				}
				transfer_state_to = EQS
			}
		}
	}
	
	STG_debug_populate_targets_array_rev =	{
		visible = { is_debug = yes }
		
		complete_effect = {
			clear_array = STG_rev_targets
			add_to_array = { STG_rev_targets = 14 }
			add_to_array = { STG_rev_targets = 66 }
			add_to_array = { STG_rev_targets = 13 }
			add_to_array = { STG_rev_targets = 75 }
		}
	}

	STG_debug_load_revolution = {

		complete_effect = {
			###STG_equestrian_revolution_initiate_potential_cores = yes
			hidden_effect = {
				STG_equestrian_revolution_initiate_potential_cores = yes
				create_dynamic_country  = {
					original_tag = EQS
					copy_tag = EQS
					save_global_event_target_as = EQS_commie
					set_cosmetic_tag = EQS_MAN_COMMIE
					STG_inititate_manehattan_uprising = yes
					inherit_technology = EQS
					load_oob = "STG_revolt_templates"
					STG_spawn_armies_revolt = yes 
				}
				VAN = {
					STG_initiate_proper_level_resistance = yes
					STL = {
						UESR_country_leader = {
							set_nationality = VAN 
							add_country_leader_role = {
								promote_leader = yes
								country_leader = {
									ideology = leninism
									expire = "1965.1.1.1"
									traits = { war_industrialist }
								}
							}
						}
					}
					inherit_technology = EQS
					load_oob = "STG_revolt_templates"
					STG_spawn_armies_revolt = yes 
				}
				BAL = {
					STG_initiate_proper_level_resistance = yes
					inherit_technology = EQS
					load_oob = "STG_revolt_templates"
					STG_spawn_armies_revolt = yes 
				}
				LSP = {
					STG_initiate_proper_level_resistance = yes
					inherit_technology = EQS
					load_oob = "STG_revolt_templates"
					STG_spawn_armies_revolt = yes 
				}
			}
		}
	}

	STG_debug_play_with_numbers = {

		complete_effect = {
			14 = {
				set_variable = { STG_labor_union_power = 1 }
				set_variable = { STG_population_support_level = 7 }
				set_variable = { STG_royal_forces_level = 1 }
			}
			66 = {
				set_variable = { STG_labor_union_power = 1 }
				set_variable = { STG_population_support_level = 7 }
				set_variable = { STG_royal_forces_level = 1 }
			}
			13 = {
				set_variable = { STG_labor_union_power = 1 }
				set_variable = { STG_population_support_level = 7 }
				set_variable = { STG_royal_forces_level = 1 }
			}
			75 = {
				set_variable = { STG_labor_union_power = 1 }
				set_variable = { STG_population_support_level = 7 }
				set_variable = { STG_royal_forces_level = 1 }
			}
		}
	}

	STG_debug_change_labor_str = {

		complete_effect = {
			14 = {
				set_temp_variable = { STG_ls_change_var = 1 }
				set_temp_variable = { STG_ps_change_var = 2 }
				set_temp_variable = { STG_rr_change_var = 3 }
				STG_increase_decrease_labor_strength_effect = yes
				STG_increase_decrease_popularity_support_effect = yes
				STG_increase_decrease_royal_resistance_effect = yes
			}
			13 = {
				set_temp_variable = { STG_ls_change_var = 3 }
				set_temp_variable = { STG_ps_change_var = 3 }
				set_temp_variable = { STG_rr_change_var = 3 }
				STG_increase_decrease_labor_strength_effect = yes
				STG_increase_decrease_popularity_support_effect = yes
				STG_increase_decrease_royal_resistance_effect = yes
			}
			75 = {
				set_temp_variable = { STG_ls_change_var = -3 }
				set_temp_variable = { STG_ps_change_var = -2 }
				set_temp_variable = { STG_rr_change_var = -1 }
				STG_increase_decrease_labor_strength_effect = yes
				STG_increase_decrease_popularity_support_effect = yes
				STG_increase_decrease_royal_resistance_effect = yes
			}
			66 = {
				set_temp_variable = { STG_ls_change_var = -2 }
				set_temp_variable = { STG_ps_change_var = -3 }
				set_temp_variable = { STG_rr_change_var = -2 }
				STG_increase_decrease_labor_strength_effect = yes
				STG_increase_decrease_popularity_support_effect = yes
				STG_increase_decrease_royal_resistance_effect = yes
			}
		}
	}
	
	STG_one_year_timer = {
		activation = {
			has_country_flag = STG_revolution_prep_start
		}
		
		is_good = no 
		selectable_mission = yes 
		days_mission_timeout = 365 
		fire_only_once = yes 
		
		available = {
			custom_trigger_tooltip = {
				tooltip = STG_HAS_ENOUGH_LABOR_SUPPORT
				count_triggers = {
					amount = 2 
					check_variable = { 14.STG_revolt_chance_state > 8 }
					check_variable = { 13.STG_revolt_chance_state > 8 }
					check_variable = { 66.STG_revolt_chance_state > 8 }
					check_variable = { 75.STG_revolt_chance_state > 8 }
				}
			}
		}
		
		complete_effect = {
			### Good Ending
			if = {
				limit = {
					count_triggers = {
						amount = 2 
						check_variable = { 14.STG_revolt_chance_state > 8 }
						check_variable = { 13.STG_revolt_chance_state > 8 }
						check_variable = { 66.STG_revolt_chance_state > 8 }
						check_variable = { 75.STG_revolt_chance_state > 8 }
					}
				}
				custom_effect_tooltip = STG_start_eqs_revolt
				set_country_flag = EQS_rev_start_by_player
				hidden_effect = {
					STG_equestrian_revolution_initiate_potential_cores = yes
					create_dynamic_country  = {
						original_tag = EQS
						copy_tag = EQS
						save_global_event_target_as = EQS_commie
						set_cosmetic_tag = EQS_MAN_COMMIE
						STG_inititate_manehattan_uprising = yes
						inherit_technology = EQS
						load_oob = "STG_revolt_templates"
						STG_spawn_armies_revolt = yes 
					}
					VAN = {
						STG_initiate_proper_level_resistance = yes
						STL = {
							UESR_country_leader = {
								set_nationality = VAN 
								add_country_leader_role = {
									promote_leader = yes
									country_leader = {
										ideology = leninism
										expire = "1965.1.1.1"
										traits = { war_industrialist }
									}
								}
							}
						}
						inherit_technology = EQS
						load_oob = "STG_revolt_templates"
						STG_spawn_armies_revolt = yes 
					}
					BAL = {
						STG_initiate_proper_level_resistance = yes
						inherit_technology = EQS
						load_oob = "STG_revolt_templates"
						STG_spawn_armies_revolt = yes 
					}
					LSP = {
						STG_initiate_proper_level_resistance = yes
						inherit_technology = EQS
						load_oob = "STG_revolt_templates"
						STG_spawn_armies_revolt = yes 
					}
				}
			}
			else_if = {
				limit = {
					count_triggers = {
						amount = 4 
						check_variable = { 14.STG_revolt_chance_state > 8 }
						check_variable = { 13.STG_revolt_chance_state > 8 }
						check_variable = { 66.STG_revolt_chance_state > 8 }
						check_variable = { 75.STG_revolt_chance_state > 8 }
					}
				}
				custom_effect_tooltip = STG_bloodless_revolt
				set_country_flag = EQS_bloodless_revolt
				complete_national_focus = STG_victory_of_revolution
			}
		}
		
		timeout_effect = {
			EQS = {
				country_event = { id = stalliongrad_vasily.27 days = 5 }
			}
		}					
	}

	STG_example_decision_increase_labor_strength = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 1 }
		}

		complete_effect = {
			set_variable = { STG_ls_expand_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_ls_expand_state_var = {
				set_temp_variable = { STG_ls_change_var = 1 }
				STG_increase_decrease_labor_strength_effect = yes
			}
		}
	}
	STG_example_decision_increase_population_support = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 2 }
		}

		complete_effect = {
			set_variable = { STG_ps_expand_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_ps_expand_state_var = {
				set_temp_variable = { STG_ps_change_var = 1 }
				STG_increase_decrease_popularity_support_effect = yes
			}
		}
	}
	STG_example_decision_decrease_royal_resistance = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 3 }
		}

		complete_effect = {
			set_variable = { STG_rr_expand_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_rr_expand_state_var = {
				set_temp_variable = { STG_rr_change_var = -1 }
				STG_increase_decrease_royal_resistance_effect = yes
			}
		}
	}
	STG_example_decision_decrease_labor_strength = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 1 }
		}

		complete_effect = {
			set_variable = { STG_ls_decrease_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_ls_decrease_state_var = {
				set_temp_variable = { STG_ls_change_var = -1 }
				STG_increase_decrease_labor_strength_effect = yes
			}
		}
	}
	STG_example_decision_decrease_population_support = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 2 }
		}

		complete_effect = {
			set_variable = { STG_ps_decrease_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_ps_decrease_state_var = {
				set_temp_variable = { STG_ps_change_var = -1 }
				STG_increase_decrease_popularity_support_effect = yes
			}
		}
	}
	STG_example_decision_increase_royal_resistance = {

		cost = 25
		days_remove = 25
		fire_only_once = no
		days_re_enable = 5

		visible = {
			check_variable = { STG_revolution_decision_type_check = 3 }
		}

		complete_effect = {
			set_variable = { STG_rr_decrease_state_var = STG_actual_choise_var }
		}

		remove_effect = {
			var:STG_rr_decrease_state_var = {
				set_temp_variable = { STG_rr_change_var = 1 }
				STG_increase_decrease_royal_resistance_effect = yes
			}
		}
	}

}

STG_propaganda_campaigns = { 

	debug_initiate_agitprop_array = {
	
		visible = { is_debug = yes }
		
		complete_effect = { 
			clear_array = STG_agitprop_posters_array
			add_to_array = { STG_agitprop_posters_array = 2 }
			add_to_array = { STG_agitprop_posters_array = 1 }
			add_to_array = { STG_agitprop_posters_array = 1 }

		} 
	}
	
	debug_unlock_poster_x = {
		 
		visible = { is_debug = yes }
		 
		complete_effect = { 
			add_to_variable = { STG_num_unlocked_slots_agitprop = 1 }
			STG_unlock_propaganda_campaign_slot_effect = yes 
		} 
	}
	
	
	debug_initiate_decision_costs_array = {
	
		visible = { is_debug = yes }
		
		complete_effect = {
			clear_array = STG_agitprop_costs_array
			add_to_array = { STG_agitprop_costs_array = 0 }
			add_to_array = { STG_agitprop_costs_array = 0 }
			
			resize_array = { 
				array = STG_agitprop_costs_array 
				value = 15
				size = 26
			}
		}
	}
	
	debug_tokenize_blab = {
		visible = { is_debug = yes }
		
		complete_effect = {
			clear_array = stg_agp_flags
			add_to_array = { stg_agp_flags = token:STG_poster_days_flag_19 }
		}
	}
	
	STG_propaganda_motherland_calls = { # ID = 3
		priority = 2

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				surrender_progress > 0.4
			}
			modifier = {
				add = 10
				has_manpower < 500000
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_motherland_calls_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_motherland_calls_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_motherland_calls_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^2

		modifier = {
			weekly_manpower = 1000
			training_time_factor = -0.1
			minimum_training_level = -0.1
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 3 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 3 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 2 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_victory_at_hand = { # ID = 4
		priority = 3

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_victory_at_hand_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_victory_at_hand_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_victory_at_hand_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			surrender_progress < 0.01
			any_enemy_country = {
				is_major = yes
				ROOT = {
					any_controlled_state = {
						is_core_of = PREV.PREV
					}
				}
			}
			# STG_propaganda_victory_at_hand_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^3

		modifier = {
			army_attack_factor = 0.05
			army_speed_factor = 0.1
			org_loss_when_moving = -0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 4 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 4 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 3 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_defend_moscow = { # ID = 5
		priority = 4

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 500
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_defend_moscow_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_defend_moscow_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_defend_moscow_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			controls_state = 153 #Stalliongrad
			153 = {
				any_neighbor_state = {
					controller = {
						has_war_with = ROOT
					}
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^4
		
		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 5 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			
			153 = { #Moscow
				add_dynamic_modifier = { modifier = SOV_defend_moscow scope = STG }
				every_neighbor_state = {
					add_dynamic_modifier = { modifier = SOV_defend_moscow scope = STG }
				}
			}
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 5 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 4 }
			STG_increase_propaganda_campaign_cost_effect = yes
			153 = { #Moscow
				remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				every_neighbor_state = {
					remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				}
			}
			
			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_fight_to_the_last = { # ID = 6
		priority = 5

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.75
			modifier = {
				factor = 10
				OR = {
					AND = {
						stockpile_ratio = {
							archetype = train_equipment
							ratio < 0.75
						}
						stockpile_ratio = {
							archetype = motorized_equipment
							ratio < 0.75
						}
					}
					stockpile_ratio = {
						archetype = convoy
						ratio < 5
					}
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_fight_to_the_last_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_fight_to_the_last_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_fight_to_the_last_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
			has_war = yes
			surrender_progress > 0.1
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown


		cost = STG_agitprop_costs_array^5

		modifier = {
			army_org_factor = 0.05
			out_of_supply_factor = -0.1
			no_supply_grace = 70
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 6 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 6 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 5 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_hit_of_hammer = { # ID = 7
		priority = 6

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_hit_of_hammer_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_hit_of_hammer_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_hit_of_hammer_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^6

		modifier = {
			industrial_capacity_factory = 0.05
			industrial_capacity_dockyard = 0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 7 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 7 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 6 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_transport = { # ID = 8
		priority = 7

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.7
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_transport_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_transport_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_transport_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^7

		modifier = {
			production_speed_supply_node_factor = 0.15
			production_speed_rail_way_factor = 0.15
			supply_consumption_factor = -0.1
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 8 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 8 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 7 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_oil_for_the_motherland = { # ID = 9
		priority = 8

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				fuel_ratio < 0.5
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_oil_for_the_motherland_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_oil_for_the_motherland_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_oil_for_the_motherland_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			any_controlled_state = {
				has_resources_amount = {
					resource = oil
					amount > 0
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^8

		modifier = {
			fuel_gain_factor = 0.1
			army_fuel_consumption_factor = -0.1
			air_fuel_consumption_factor = -0.1
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 9 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 9 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 8 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_more_metal = { # ID = 10
		priority = 9

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.8
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_more_metal_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_more_metal_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_more_metal_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			any_controlled_state = {
				OR = {
					has_resources_amount = {
						resource = steel
						amount > 0
					}
					has_resources_amount = {
						resource = aluminium
						amount > 0
					}
					has_resources_amount = {
						resource = chromium
						amount > 0
					}
					has_resources_amount = {
						resource = tungsten
						amount > 0
					}
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^9


		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 10 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			hidden_effect = {
				capital_scope = {
					set_variable = { SOV_steel_bonus = 0 }
					set_variable = { SOV_aluminium_bonus = 0 }
					set_variable = { SOV_chromium_bonus = 0 }
					set_variable = { SOV_tungsten_bonus = 0 }
				}
				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_steel_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = aluminium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_aluminium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = chromium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_chromium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = tungsten
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_tungsten_bonus = 1 } }
				}
			}

			capital_scope = {
				add_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}
		}

		remove_effect = {
			capital_scope = {
				remove_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}

			set_temp_variable = { stg_agp_poster_num_r = 10 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 9 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_high_yield = { # ID = 11
		priority = 10

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_high_yield_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_high_yield_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_high_yield_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			surrender_progress < 0.15
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^10

		modifier = {
			consumer_goods_factor = -0.1
		}


		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 11 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 11 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 10 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_for_the_motherland = { # ID = 12
		priority = 11

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				has_manpower < 300000
			}
			modifier = {
				factor = 2
				OR = {
					command_power < 25
					has_army_experience < 25
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_for_the_motherland_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_for_the_motherland_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_for_the_motherland_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^11

		modifier = {
			experience_gain_army_factor = 0.1
			command_power_gain_mult = 0.15
			breakthrough_factor = 0.075
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 12 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 12 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 11 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_heroes_forward = { # ID = 13
		priority = 12

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_heroes_forward_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_heroes_forward_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_heroes_forward_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_unit_leader = {
				is_assigned = yes
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^12

		modifier = {
			army_morale_factor = 0.07
		}
		
		
		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 13 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			custom_effect_tooltip = STG_propaganda_heroes_forward_tt

			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 5 compare = less_than }
				}
				if = {
					limit = {
						any_unit_leader = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_determined }
						}
					}
					random_unit_leader = {
						limit = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_determined }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_determined
							days = @DAYS_DETERMINED #Does not seem to support vars
						}
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = trait_SOV_determined }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_determined
							days = @DAYS_DETERMINED #Does not seem to support vars
						}
					}
				}
				add_to_temp_variable = { temp_targets_index = 1 }
			}
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 13 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 12 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_anti_capitalism = { # ID = 14
		priority = 13

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
					has_government = democratic
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_anti_capitalism_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_anti_capitalism_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_anti_capitalism_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			any_country = {
				has_government = democratic
				is_major = yes
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^13

		modifier = {
			opinion_gain_monthly_same_ideology_factor = 0.25
			democratic_acceptance = -100
			democratic_drift = -0.1
		}
		
		

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 14 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			#Choose the "most powerful" capitalist country based on num of factories
			if = {
				limit = {
					EQS = {
						has_government = democratic
						exists = yes
					 }
				}
				add_timed_idea = {
					idea = STG_anti_capitalist_campaign_eqs
					days = STG_default_propaganda_campaign_duration
				}
			}
			if = {
				limit = {
					CRY = {
						has_government = democratic
						exists = yes
					 }
				}
				add_timed_idea = {
					idea = STG_anti_capitalist_campaign_cry
					days = STG_default_propaganda_campaign_duration
				}
			}
			if = {
				limit = {
					CHN = {
						has_government = democratic
					}
				}
				add_timed_idea = {
					idea = STG_anti_capitalist_campaign_chn
					days = STG_default_propaganda_campaign_duration
				}
			}

		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 14 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 13 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}

	}

	STG_propaganda_anti_fascism = { # ID = 15
		priority = 14

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
					has_government = democratic
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_anti_fascism_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_anti_fascism_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_anti_fascism_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			any_country = {
				has_government = fascism
				is_major = yes
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^14

		modifier = {
			opinion_gain_monthly_same_ideology_factor = 0.25
			fascism_acceptance = -100
			fascism_drift = -0.1
		}
	
		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 15 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			if = {
				limit = {
					CHN = {
						has_government = fascism
						exists = yes
					}
				}
				add_timed_idea = {
					idea = STG_anti_fascist_campaign_chn
					days = STG_default_propaganda_campaign_duration
				}
			}
			if = {
				limit = {
					EQS = {
						has_government = fascism
						exists = yes
					}
				}
				add_timed_idea = {
					idea = STG_anti_fascist_campaign_eqs
					days = STG_default_propaganda_campaign_duration
				}
			}
			if = {
				limit = {
					NLR = {
						has_government = fascism
						exists = yes
					}
				}
				add_timed_idea = {
					idea = STG_anti_fascist_campaign_nlr
					days = STG_default_propaganda_campaign_duration
				}
			}
			if = {
				limit = {
					CRY = {
						has_government = fascism
						exists = yes
					}
				}
				add_timed_idea = {
					idea = STG_anti_fascist_campaign_cry
					days = STG_default_propaganda_campaign_duration
				}
			}
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 15 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 14 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_treacherous_enemy = { # ID = 16
		priority = 15

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				agency_upgrade_number > 4
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_treacherous_enemy_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_treacherous_enemy_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_treacherous_enemy_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
			has_dlc = "La Resistance"
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^15

		modifier = {
			crypto_strength = 2
			enemy_operative_detection_chance_factor = 0.75
			enemy_operative_capture_chance_factor = 0.75
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 16 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 16 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 15 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_do_not_blab = { # ID = 17
		priority = 16

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_war = yes
			}
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_do_not_blab_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_do_not_blab_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_do_not_blab_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^16

		modifier = {
			army_intel_to_others = -50
			navy_intel_to_others = -50
			airforce_intel_to_others = -50
			civilian_intel_to_others = -50
			foreign_subversive_activites = -0.25
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 17 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 17 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 16 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_sweep_scum_out = { # ID = 18
		priority = 17

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.5
			modifier = {
				add = 100
				has_country_flag = { flag = STG_great_patriotic_war_flag days > 365 }
			}
			modifier = {
				factor = 0.1
				surrender_progress > 0.75
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_sweep_scum_out_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_sweep_scum_out_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_sweep_scum_out_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^17

		modifier = {
			army_core_attack_factor = 0.1
			army_core_defence_factor = 0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 18 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 18 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 17 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_knowledge = { # ID = 19
		priority = 18

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 5
			modifier = {
				factor = 10
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_knowledge_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_knowledge_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_knowledge_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^18

		modifier = {
			research_speed_factor = 0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 19 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 19 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 18 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_builders_of_communism = { # ID = 20
		priority = 19

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 2
			modifier = {
				factor = 10
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_builders_of_communism_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_builders_of_communism_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_builders_of_communism_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^19

		modifier = {
			research_speed_factor = 0.02
			communism_drift = 0.1
			opinion_gain_monthly_same_ideology_factor = 0.25
		}
		
		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 20 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			if = {
				limit = {
					any_country = {
						is_subject_of = ROOT
					}
				}
				hidden_effect = {
					every_country = {
						limit = {
							is_subject_of = ROOT
						}
						country_event = Stalliongrad_propaganda_capmaign_events.1
					}
				}
			}
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 20 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 19 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_glory_to_partisans = { # ID = 21
		priority = 20

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 10
				agency_upgrade_number > 4
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_glory_to_partisans_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_glory_to_partisans_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_glory_to_partisans_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				NOT = { original_tag = STG }
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^20

		modifier = {
			operation_targeted_sabotage_resources_outcome = 0.25
			operation_targeted_sabotage_infrastructure_outcome = 0.25
			operation_targeted_sabotage_industry_outcome = 0.25
			operation_make_resistance_contacts_outcome = 0.25
			operation_boost_resistance_outcome = 0.25
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 21 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 21 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 20 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_death_to_invaders = { # ID = 22
		priority = 21

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_death_to_invaders_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_death_to_invaders_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_death_to_invaders_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				NOT = { original_tag = STG }
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^21

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 22 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			set_global_flag = STG_propaganda_death_to_invaders_active_flag #This is used to dynamically add/remove the state modifier when a state is gained/lost by SOV

			if = {
				limit = {
					any_enemy_country = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
				}
				every_enemy_country = {
					limit = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
					every_controlled_state = {
						limit = {
							is_core_of = ROOT
						}
						add_dynamic_modifier = { modifier = SOV_invaders_must_die }
					}
				}
			}
			else = {
				custom_effect_tooltip = STG_propaganda_death_to_invaders_no_invaders_tt
			}
			custom_effect_tooltip = STG_propaganda_death_to_invaders_state_modifier_tt
		}

		remove_effect = {
			every_state = {
				limit = {
					has_dynamic_modifier = { modifier = SOV_invaders_must_die }
				}
				remove_dynamic_modifier = { modifier = SOV_invaders_must_die }
			}

			clr_global_flag = STG_propaganda_death_to_invaders_active_flag

			set_temp_variable = { stg_agp_poster_num_r = 22 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 21 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}

	}

	STG_propaganda_stalin = { # ID = 23
		priority = 22

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 5
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_stalin_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_stalin_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_stalin_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_completed_focus = STG_maneuvers_on_eqs_borders
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^22

		modifier = {
			political_power_factor = 0.07
			command_power_gain_mult = 0.1
			war_support_weekly = 0.002
			communism_drift = 0.1
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 23 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 23 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 22 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_rebuild_to_glory = { # ID = 24
		priority = 23

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 3
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_rebuild_to_glory_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_rebuild_to_glory_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_rebuild_to_glory_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^23

		modifier = {
			industry_repair_factor = 0.15
			production_speed_buildings_factor = 0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 24 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 24 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 23 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}

	STG_propaganda_peace = { # ID = 25
		priority = 24

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 2
			modifier = {
				factor = 0
				any_country = {
					STG = { is_justifying_wargoal_against = PREV }
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_peace_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_peace_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_peace_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			has_war = no
			NOT = { has_country_flag = STG_punished_for_breaking_flag }
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
			NOT = { has_country_flag = STG_punished_for_breaking_flag }
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^24

		modifier = {
			stability_weekly = 0.005
			consumer_goods_factor = -0.06
			opinion_gain_monthly_factor = 0.25
			enemy_justify_war_goal_time = 0.50
			war_support_weekly = -0.005
			industrial_capacity_factory = -0.05
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 25 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
			set_rule = { can_send_volunteers = no }

			set_country_flag = STG_propaganda_peace_active_flag
		}

		remove_effect = {
			set_rule = { can_send_volunteers = yes }

			clr_country_flag = STG_propaganda_peace_active_flag

			set_temp_variable = { stg_agp_poster_num_r = 25 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 24 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}

	}

	STG_propaganda_happy_life = { # ID = 26
		priority = 25

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 3
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 10
				has_stability < 0.4
			}
			modifier = {
				factor = 10
				has_stability < 0.2
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_happy_life_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { STG_propaganda_happy_life_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { STG_propaganda_happy_life_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = STG
		}

		available = {
			STG_propaganda_poster_slot_available = yes

			surrender_progress < 0.01
		}

		visible = {
			OR = {
				#has_completed_focus = STG_expanding_the_cultural_revolution
				has_country_flag = STG_debug_unlock_propaganda_campaigns_flag_two #debug
			}
		}

		days_remove = STG_default_propaganda_campaign_duration

		days_re_enable = STG_default_propaganda_campaign_cooldown

		cost = STG_agitprop_costs_array^25

		modifier = {
			stability_weekly = 0.01
			compliance_growth = 0.05
			resistance_decay = 0.05
			resistance_damage_to_garrison = 0.15
			consumer_goods_factor = 0.06
		}

		complete_effect = {
			set_temp_variable = { stg_agp_poster_num = 26 }
			STG_agitprop_populate_next_poster = yes
			STG_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_temp_variable = { stg_agp_poster_num_r = 26 }
			STG_agitprop_remove_required_poster = yes
			set_temp_variable = { stg_agp_cost_increase = 25 }
			STG_increase_propaganda_campaign_cost_effect = yes

			custom_effect_tooltip = STG_propaganda_campaign_cooldown_tt
		}
	}
}
STG_mashas_reforms = {
	STG_prepare_northward_intervention = {

		available = {
			has_global_flag = GRF_civil_war_begun
			any_country_with_original_tag = {
				original_tag_to_check = GRF
				exists = yes
				NOT = {
					has_government = communism
				}
			}
		}
		cost = 25
		fire_only_once = yes
		days_remove = 30
		war_with_on_remove = GRB
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_prepare_northward_intervention complete_effect"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_prepare_northward_intervention remove_effect"
			every_country_with_original_tag = {
				original_tag_to_check = GRF
				limit = {
					exists = yes
					NOT = {
						has_government = communism
					}
				}
				display_individual_scopes = yes
				ROOT = {
					create_wargoal = {
						target = PREV
						type = puppet_wargoal_focus
					}
					declare_war_on = {
						target = PREV
						type = puppet_wargoal_focus
					}
				}
			}
		}
	}
	STG_install_ulla = {

		available = {
			GRF = {
				OR = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
			is_faction_leader = yes
		}
		cost = 25
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_install_ulla complete_effect"
			country_event = stalliongrad_masha.7
		}
	}
	STG_agitate_in_southern_severyana = {
		
		cost = 150
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetTag] decision STG_install_ulla complete_effect"
			STG = {
				every_core_state = {
					limit = {
						OR = {
							is_core_of = EQS
							is_core_of = NLR
						}
					}
					if = {
						limit = {
							is_core_of = NLR
						}
						remove_core_of = NLR
					}
					remove_core_of = EQS
					force_enable_resistance = {
						occupied = STG
					}
					start_resistance = STG
					set_resistance = 10
				}
			}
			EQS = {
				country_event = stalliongrad_masha.8
			}
			if = {
				limit = {
					country_exists = NLR
				}
				NLR = {
					country_event = stalliongrad_masha.8
				}
			}
		}
	}
}