KXN_Conquest_Category = {
	KXN_Conquest_Mission_1 = {
		icon = daggers
		allowed = { original_tag = KXN }
		activation = { always = no }
		ai_will_do = { factor = 450 }
		selectable_mission = yes ## Needed to enable custom_cost_text
		custom_cost_trigger = { always = yes }
		custom_cost_text = KXN_Conquest_Mission_1_Cost_tt ## Stage Indicator
		days_mission_timeout = KXN_Conquest_Mission_1_Days_Timeout
		
		available = {
			event_target:KXN_Conquest_Target_1 = { ## Enemy country defeated
				OR = {
					exists = no
					is_subject_of = ROOT
					has_capitulated = yes
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KXN_Conquest_Mission_1"
			add_political_power = 150
			hidden_effect = {
				clr_country_flag = KXN_Conquest_Mission_1_Active ## Frees up mission
				clear_global_event_target = KXN_Conquest_Target_1
				activate_mission = KXN_Conquest_Mission_1 ## Removes the mission from the menu
				remove_mission = KXN_Conquest_Mission_1
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KXN_Conquest_Mission_1"
			if = {
				limit = {
					event_target:KXN_Conquest_Target_1 = { ## If prerequisites have been met but player forgot to click
						OR = {
							exists = no
							is_subject_of = ROOT
							has_capitulated = yes
						}
					}
				}
				add_political_power = 150
			}
			else = {
				add_political_power = -300
			}
			hidden_effect = {
				clr_country_flag = KXN_Conquest_Mission_1_Active
				clear_global_event_target = KXN_Conquest_Target_1
				activate_mission = KXN_Conquest_Mission_1
				remove_mission = KXN_Conquest_Mission_1
			}
		}

		cancel_trigger = {
			hidden_trigger = {
				event_target:KXN_Conquest_Target_1 = { ## White peace with enemy country
					exists = yes
					NOT = {
						is_subject_of = ROOT
						has_war_with = ROOT
					}
				}
			}
		}
		
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KXN_Conquest_Mission_1"
			clr_country_flag = KXN_Conquest_Mission_1_Active
			clear_global_event_target = KXN_Conquest_Target_1
		}
	}
}