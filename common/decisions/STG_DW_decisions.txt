STG_DW_reforms_category = {
	STG_DW_pp_for_stability = {
		allowed = {
			original_tag = STG
		}
		visible = {
			has_country_flag = STG_DW_minigame_enabled
		}
		available = {
			NOT = {
				has_country_flag = STG_DW_reform_decision_in_progress
			}
			has_stability < 0.60
		}
		cost = 20
		days_remove = 35

		modifier = {
			stability_weekly = 0.01
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_reform_decision_in_progress
			}
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
			}
		}

		cancel_if_not_visible = yes
		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			clr_country_flag = STG_DW_reform_decision_in_progress
		}
	}

	STG_DW_stability_for_points = {
		allowed = {
			original_tag = STG
		}
		visible = {
			has_country_flag = STG_DW_minigame_enabled
		}
		available = {
			NOT = {
				has_country_flag = STG_DW_reform_decision_in_progress
				has_country_flag = STG_DW_reform_crisis_in_progress
			}
		}
		cost = 20
		days_remove = 35

		modifier = {
			stability_weekly = -0.01
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_reform_decision_in_progress
			}
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
			}

			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 25 }
			STG_DW_add_points_f = yes
		}

		cancel_if_not_visible = yes
		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			clr_country_flag = STG_DW_reform_decision_in_progress
		}
	}

	STG_DW_reforms_better_system_0 = {
		
	}

	STG_DW_reforms_better_system = {
		allowed = {
			original_tag = STG
		}
		visible = {
			hidden_trigger = {
				# has_completed_focus = TBD #TODO
				has_country_flag = STG_DW_minigame_enabled # DEBUG
			}
		}
		available = {
			NOT = {
				has_country_flag = STG_DW_reform_decision_in_progress
				has_country_flag = STG_DW_reform_crisis_in_progress
			}
		}
		cost = STG_DW_reform_better_system_pp_cost
		days_remove = STG_DW_reform_better_system_days_remove

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_reform_decision_in_progress
				set_country_flag = STG_DW_reform_better_system_decision_in_progress
				add_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability_disp = STG_DW_reform_better_system_modifier_stability
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain_disp = STG_DW_reform_better_system_modifier_pp_gain
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability = STG_DW_reform_better_system_modifier_stability
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain = STG_DW_reform_better_system_modifier_pp_gain
			}
			custom_effect_tooltip = STG_DW_reforms_better_system_modifier_tt
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_system_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}

			if = {
				limit = {
					check_variable = {
						var = STG_DW_reform_better_system_desired_level
						value = STG_DW_reform_better_system_level
						compare = not_equals
					}
				}

				STG_DW_set_better_system_decisions_level_f = yes
			}

			set_temp_variable = { temp_STG_DW_reform_points_increase_value = STG_DW_reform_better_system_reform_points }
			STG_DW_add_points_f = yes
		}

		cancel_if_not_visible = yes
		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_system_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
				if = {
					limit = {
						check_variable = {
							var = STG_DW_reform_better_system_desired_level
							value = STG_DW_reform_better_system_level
							compare = not_equals
						}
					}

					STG_DW_set_better_system_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_reforms_better_industry = {
		allowed = {
			original_tag = STG
		}
		visible = {
			hidden_trigger = {
				# has_completed_focus = TBD #TODO
				has_country_flag = STG_DW_minigame_enabled # DEBUG
			}
		}
		available = {
			NOT = {
				has_country_flag = STG_DW_reform_decision_in_progress
				has_country_flag = STG_DW_reform_crisis_in_progress
			}
		}
		cost = STG_DW_reform_better_industry_pp_cost
		days_remove = STG_DW_reform_better_industry_days_remove

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_reform_decision_in_progress
				set_country_flag = STG_DW_reform_better_industry_decision_in_progress
				add_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability_disp = STG_DW_reform_better_industry_modifier_stability
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain_disp = STG_DW_reform_better_industry_modifier_pp_gain
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability = STG_DW_reform_better_industry_modifier_stability
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain = STG_DW_reform_better_industry_modifier_pp_gain
			}
			custom_effect_tooltip = STG_DW_reforms_better_industry_modifier_tt
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_industry_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}

			if = {
				limit = {
					check_variable = {
						var = STG_DW_reform_better_industry_desired_level
						value = STG_DW_reform_better_industry_level
						compare = not_equals
					}
				}

				STG_DW_set_better_industry_decisions_level_f = yes
			}

			set_temp_variable = { temp_STG_DW_reform_points_increase_value = STG_DW_reform_better_industry_reform_points }
			STG_DW_add_points_f = yes
		}

		cancel_if_not_visible = yes
		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_industry_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
				if = {
					limit = {
						check_variable = {
							var = STG_DW_reform_better_industry_desired_level
							value = STG_DW_reform_better_industry_level
							compare = not_equals
						}
					}

					STG_DW_set_better_industry_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_reforms_better_tomorrow = {
		allowed = {
			original_tag = STG
		}
		visible = {
			hidden_trigger = {
				# has_completed_focus = TBD #TODO
				has_country_flag = STG_DW_minigame_enabled # DEBUG
			}
		}
		available = {
			NOT = {
				has_country_flag = STG_DW_reform_decision_in_progress
				has_country_flag = STG_DW_reform_crisis_in_progress
			}
		}
		cost = STG_DW_reform_better_tomorrow_pp_cost
		days_remove = STG_DW_reform_better_tomorrow_days_remove

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_reform_decision_in_progress
				set_country_flag = STG_DW_reform_better_tomorrow_decision_in_progress
				add_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability_disp = STG_DW_reform_better_tomorrow_modifier_stability
			}
			set_temp_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain_disp = STG_DW_reform_better_tomorrow_modifier_pp_gain
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_stability = STG_DW_reform_better_tomorrow_modifier_stability
			}
			set_variable = {
				STG_DW_reform_upgradable_decisions_modifier_pp_gain = STG_DW_reform_better_tomorrow_modifier_pp_gain
			}
			custom_effect_tooltip = STG_DW_reforms_better_tomorrow_modifier_tt
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_tomorrow_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
			}

			if = {
				limit = {
					check_variable = {
						var = STG_DW_reform_better_tomorrow_desired_level
						value = STG_DW_reform_better_tomorrow_level
						compare = not_equals
					}
				}

				STG_DW_set_better_tomorrow_decisions_level_f = yes
			}

			set_temp_variable = { temp_STG_DW_reform_points_increase_value = STG_DW_reform_better_tomorrow_reform_points }
			STG_DW_add_points_f = yes
		}

		cancel_if_not_visible = yes
		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_reform_decision_in_progress
				clr_country_flag = STG_DW_reform_better_tomorrow_decision_in_progress
				remove_dynamic_modifier = {
					modifier = STG_DW_reform_upgradable_decisions_modifier
				}
				if = {
					limit = {
						check_variable = {
							var = STG_DW_reform_better_tomorrow_desired_level
							value = STG_DW_reform_better_tomorrow_level
							compare = not_equals
						}
					}

					STG_DW_set_better_tomorrow_decisions_level_f = yes
				}
			}
		}
	}
}

STG_DW_regional_influence_category = {
	STG_DW_build_building_1 = {
		allowed = {
			original_tag = STG
		}
		visible = {
			check_variable = { STG_DW_region_selected > -1 }
			NOT = {
				has_country_flag = STG_DW_region_building
				has_country_flag = STG_DW_reform_crisis_in_progress
			}
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = STG_DW_region_require_building_slot_tt
				check_variable = { STG_DW_building_slot_available > 0 }
			}
		}

		cost = 20
		days_remove = 10

		complete_effect = {
			hidden_effect = {
				set_country_flag = STG_DW_region_building
			}
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_region_building
			}

			# Build
		}

		cancel_trigger = {
			has_country_flag = STG_DW_reform_crisis_in_progress
		}
		cancel_effect = {
			hidden_effect = {
				clr_country_flag = STG_DW_region_building
			}
		}
	}
}

STG_DW_minigame_debug = {
	STG_DW_start_minigame = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_country_flag = STG_DW_minigame_enabled
			STG_DW_setup_reforms_minigame_f = yes
		}
	}

	STG_DW_debug_allow_regional_influence = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			STG_DW_setup_regional_influence_f = yes
		}
	}

	STG_DW_debug_reset_reform_points = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_variable = { STG_DW_reform_points = 0 }
		}
	}

	STG_DW_debug_go_to_next_stage = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
			check_variable = { STG_DW_reform_stage < STG_DW_reform_point_stage_values_array^num }
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = STG_DW_reform_point_stage_values_array^STG_DW_reform_stage }
			subtract_from_temp_variable = { temp_STG_DW_reform_points_increase_value = STG_DW_reform_points }
			STG_DW_add_points_f = yes
		}
	}

	STG_DW_debug_upgrade_better_system = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
			set_temp_variable = { temp_var = STG_DW_reform_better_system_desired_level }
			add_to_temp_variable = { temp_var = 1}
			check_variable = { temp_var < STG_DW_reform_better_system_modifier_stability_array^num }
		}

		complete_effect = {
			add_to_variable = { STG_DW_reform_better_system_desired_level = 1 }
			custom_effect_tooltip = STG_DW_reforms_better_system_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_system_decision_in_progress }
					}

					STG_DW_set_better_system_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_reset_better_system = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_variable = { STG_DW_reform_better_system_desired_level = 0 }
			custom_effect_tooltip = STG_DW_reforms_better_system_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_system_decision_in_progress }
					}

					STG_DW_set_better_system_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_upgrade_better_industry = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
			set_temp_variable = { temp_var = STG_DW_reform_better_industry_desired_level }
			add_to_temp_variable = { temp_var = 1}
			check_variable = { temp_var < STG_DW_reform_better_industry_modifier_stability_array^num }
		}

		complete_effect = {
			add_to_variable = { STG_DW_reform_better_industry_desired_level = 1 }
			custom_effect_tooltip = STG_DW_reforms_better_industry_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_industry_decision_in_progress }
					}

					STG_DW_set_better_industry_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_reset_better_industry = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_variable = { STG_DW_reform_better_industry_desired_level = 0 }
			custom_effect_tooltip = STG_DW_reforms_better_industry_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_industry_decision_in_progress }
					}

					STG_DW_set_better_industry_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_upgrade_better_tomorrow = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
			set_temp_variable = { temp_var = STG_DW_reform_better_tomorrow_desired_level }
			add_to_temp_variable = { temp_var = 1}
			check_variable = { temp_var < STG_DW_reform_better_tomorrow_modifier_stability_array^num }
		}

		complete_effect = {
			add_to_variable = { STG_DW_reform_better_tomorrow_desired_level = 1 }
			custom_effect_tooltip = STG_DW_reforms_better_tomorrow_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_tomorrow_decision_in_progress }
					}

					STG_DW_set_better_tomorrow_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_reset_better_tomorrow = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_variable = { STG_DW_reform_better_tomorrow_desired_level = 0 }
			custom_effect_tooltip = STG_DW_reforms_better_tomorrow_upgrade_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = STG_DW_reform_better_tomorrow_decision_in_progress }
					}

					STG_DW_set_better_tomorrow_decisions_level_f = yes
				}
			}
		}
	}

	STG_DW_debug_incr_reform_points_min = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 10 }
			STG_DW_add_points_f = yes
		}
	}

	STG_DW_debug_incr_reform_points_moderate = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 30 }
			STG_DW_add_points_f = yes
		}
	}

	STG_DW_debug_incr_reform_points_consequent = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 70 }
			STG_DW_add_points_f = yes
		}
	}

	STG_DW_debug_incr_reform_points_large = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 100 }
			STG_DW_add_points_f = yes
		}
	}

	STG_DW_debug_incr_reform_points_enormous = {
		allowed = {
			original_tag = STG
		}
		visible = {
			is_debug = yes
			has_country_leader = {
				character = STG_dark_wing
				ruling_only = yes
			}
		}

		complete_effect = {
			set_temp_variable = { temp_STG_DW_reform_points_increase_value = 120 }
			STG_DW_add_points_f = yes
		}
	}
}