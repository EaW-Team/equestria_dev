FEA_fund_rural_areas = {
	FEA_improve_area = {
		state_target = yes
		target_root_trigger = {
			has_completed_focus = FEA_limited_land_reform
		}
		target_array = owned_controlled_states
		target_trigger = {
			FROM = {
				has_state_category = rural
			}
		}
		on_map_mode = map_and_decisions_view
		cost = 50
		days_remove = 120
		modifier = {
			political_power_gain = -0.2
		}
		remove_effect = {
			FROM = {
				set_state_category = city
				add_manpower = 50000
			}
		} 
	}
}


FEA_civil_war_category = {
	
	FEA_looming_ceasefire = {
		icon = griffon

		allowed = {
			original_tag = FEA
		}
		activation = {
			always = no
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = FEA_any_cw_decision_taken
				
				OR = {
					has_country_flag = FEA_fight_for_rottenedam_fired
					has_country_flag = FEA_fight_for_buckmour_fired
					has_country_flag = FEA_fight_for_mirabelle_fired
					has_country_flag = FEA_fight_for_aiwle_fired
					has_country_flag = FEA_fight_for_central_fired
					has_country_flag = FEA_fight_for_luxwingburg_fired
					has_country_flag = FEA_fight_for_reitschild_fired
					has_country_flag = FEA_fight_for_rima_fired
				}
			}
		}
		is_good = no
		days_mission_timeout = 45
		war_with_on_timeout = GRD
		timeout_effect = {
			country_event = feathisia_cw.12
			create_wargoal = {
				target = GRD
				type = annex_everything
			}
			declare_war_on = {
				target = GRD
				type = annex_everything
			}
		}
	}
	FEA_check_civil_war = {
		icon = griffon

		available = {
			always = no
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_check_civil_war"
		}

		ai_will_do = {
			factor = 0
		}
	}

	FEA_fight_for_rottenedam = {
		icon = griffon
		visible = {
			owns_state = 433
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 433
			}
		}
		days_remove = 30
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_rottenedam"
			hidden_effect = {
				set_country_flag = FEA_fight_for_rottenedam_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_rottenedam"
			country_event = { id = feathisia_cw.1 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_buckmour = {
		icon = griffon
		visible = {
			owns_state = 498
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 498
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_buckmour"
			hidden_effect = {
				set_country_flag = FEA_fight_for_buckmour_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_buckmour"
			country_event = { id = feathisia_cw.2 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_mirabelle = {
		icon = griffon
		visible = {
			owns_state = 538
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 538
			}
		}
		days_remove = 30
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_mirabelle"
			hidden_effect = {
				set_country_flag = FEA_fight_for_mirabelle_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_mirabelle"
			country_event = { id = feathisia_cw.3 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_aiwle = {
		icon = griffon
		visible = {
			owns_state = 497
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 497	
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_aiwle"
			hidden_effect = {
				set_country_flag = FEA_fight_for_aiwle_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_aiwle"
			country_event = { id = feathisia_cw.4 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_central = {
		icon = griffon
		visible = {
			owns_state = 434
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 434
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_central"
			hidden_effect = {
				set_country_flag = FEA_fight_for_central_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_central"
			country_event = { id = feathisia_cw.5 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_luxwingburg = {
		icon = griffon
		visible = {
			owns_state = 441
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 441
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_luxwingburg"
			hidden_effect = {
				set_country_flag = FEA_fight_for_luxwingburg_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_luxwingburg"
			country_event = { id = feathisia_cw.6 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_reitschild = {
		icon = griffon
		visible = {
			owns_state = 440
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 440
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_reitschild"
			hidden_effect = {
				set_country_flag = FEA_fight_for_reitschild_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_reitschild"
			country_event = { id = feathisia_cw.7 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_fight_for_rima = {
		icon = griffon
		visible = {
			owns_state = 666
		}
		available = {
			NOT = { has_war_with = GRI }
			NOT = { has_country_flag = FEA_ongoing_battle }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 666
			}
		}
		days_remove = 15
		fire_only_once = yes
		modifier = {
			political_power_gain = -0.50
			stability_factor = -0.10
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_fight_for_rima"
			hidden_effect = {
				set_country_flag = FEA_fight_for_rima_fired
				set_country_flag = FEA_ongoing_battle
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_fight_for_rima"
			country_event = { id = feathisia_cw.8 days = 1 }
			hidden_effect = {
				clr_country_flag = FEA_ongoing_battle
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

	FEA_call_a_truce = {
		icon = griffon
		visible = {
			has_war_with = GRI
		}
		days_remove = 7
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FEA_call_a_truce"
			country_event = { id = feathisia_cw.11 days = 1 }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_call_a_truce"
			hidden_effect = {
				set_country_flag = FEA_call_a_truce_fired
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}

political_actions = { #TODO custom decision category?
	FEA_setup_slave_state_heeren = { #TODO cleanup of tooltips, icon choice, etc.
		available = {
			original_tag = FEA
		}
		visible = {
			has_completed_focus = FEA_smite_the_ancient_enemy
		}
		available = {
			NOT = {
				FIR = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				WAT = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				FBK = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				DMT = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				BAK = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				DEP = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				LCT = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				RCT = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				WIT = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				NIM = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				FRE = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				BAR = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				ZES = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
				OLV = {
					OR = {
						exists = no
						is_subject_of = ROOT
					}
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			release_autonomy = {
				target = RCT
				autonomy_state = autonomy_reichsprotectorate
			}
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = RCT
						is_core_of = LCT
						is_core_of = DEP
						is_core_of = BAK
						is_core_of = DMT
						is_core_of = NIM
						is_core_of = WIT
						is_core_of = ZES
						is_core_of = OLV
						is_core_of = BAR
						is_core_of = FRE

						is_core_of = FBK
						is_core_of = FIR
						is_core_of = WAT
					}
				}
				transfer_state_to = RCT
			}
			RCT = {
				set_cosmetic_tag = FEA_slave_protectorate
				add_country_leader_role = {
					character = RCT_river_swirl
					promote_leader = yes
					country_leader = {
						ideology = neofeudalism
					}
				}
			}
		}
	}
}

FEA_debug_load_trees = {
	FEA_load_starting_focus = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_starting_focus"
			
			load_focus_tree = feathisia_starting_focus
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_marriage_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_marriage_path"
			
			load_focus_tree = feathisia_marriage_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_insane_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_insane_path"
			
			load_focus_tree = feathisia_insane_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_rozenkamp_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_rozenkamp_path"
			
			load_focus_tree = feathisia_rozenkamp_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_heeren_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_heeren_path"
			
			load_focus_tree = feathisia_heeren_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_kogchel_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_kogchel_path"
			
			load_focus_tree = feathisia_kogchel_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	FEA_load_pechvogel_path = {
		icon = GFX_decision_generic_decision
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision FEA_load_pechvogel_path"
			
			load_focus_tree = feathisia_pechvogel_path
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}