EQS_prewar_diplomacy_category = {
	EQS_support_the_yaks = {
		icon = celestia
		available = {
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 199
			}
		}
		visible = {
			YAK = {
				exists = yes
			}
			JAK = {
				exists = yes
			}
			has_completed_focus = EQS_look_northward
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_support_the_yaks"
			send_equipment = { target = YAK type = infantry_equipment amount = 2000 }
			send_equipment = { target = YAK type = support_equipment amount = 200 }
			YAK = {
				country_event = equestria.3
			}
			custom_effect_tooltip = EQS_YAK_harmonic_influence_tt
		}
	}
	EQS_yak_pony_friendship_treaty = {
		icon = celestia
		available = {
			YAK = {
				exists = yes
				has_government = democratic
				has_completed_focus = YAK_harmony_win
				has_war = no
			}
			JAK = {
				exists = no
			}
		}
		visible = {
			YAK = {
				exists = yes
				has_government = democratic
			}
			has_completed_focus = EQS_look_northward
		}
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_yak_pony_friendship_treaty"
			give_guarantee = YAK
			add_opinion_modifier = { target = YAK modifier = EQS_friendship_treaty }
			YAK = {
				add_opinion_modifier = { target = ROOT modifier = EQS_friendship_treaty }
			}
			YAK = {
				country_event = equestria.4
			}
			custom_effect_tooltip = EQS_YAK_help_available_tt
			set_country_flag = EQS_YAK_friendship_treaty
		}
	}
	EQS_shelter_prince_rutherford = {
		icon = celestia
		available = {
			YAK = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_YAK_friendship_treaty
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_prince_rutherford"
			country_event = equestria.5
		}
	}
	EQS_reapproach_stalliongrad = {
		icon = celestia
		available = {
			STG = {
				has_country_leader = {
					character = STG_vasiliy_pantsushenko
					ruling_only = yes
				}
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_dealt_with_stalliongrad
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reapproach_stalliongrad"
			STG = {
				country_event = equestria.6
			}
			custom_effect_tooltip = EQS_STG_less_aggression_tt
		}
	}
	EQS_issue_stalliongradian_embargo = {
		icon = celestia
		available = {
			OR = {
				STG = {
					has_country_leader = {
						character = STG_sinister_serov
						ruling_only = yes
					}
				}
				has_country_flag = EQS_STG_reconcilation_denied
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_dealt_with_stalliongrad
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_issue_stalliongradian_embargo"
			set_country_flag = EQS_dealt_with_stalliongrad
			STG = {
				country_event = equestria.9
			}
			every_other_country = {
				limit = {
					exists = yes
					is_subject_of = EQS
				}
				country_event = equestria.10
			}
		}
	}
	EQS_buffalo_integration = {
		icon = celestia
		available = {
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = yes
				is_subject = no
			}
			NOT = {
				has_country_flag = EQS_BUF_hostile_war
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_buffalo_integration"
			BUF = {
				country_event = equestria.11
			}
		}
	}
	EQS_save_the_buffalo = {
		icon = celestia
		available = {
			BUF = {
				has_government = fascism
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = yes
				is_subject = no
				has_government = fascism
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		days_remove = 20
		war_with_target_on_remove = yes
		targets = { BUF }
		target_trigger = {
			FROM = { tag = BUF }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_save_the_buffalo"
			set_country_flag = EQS_BUF_hostile_war
		}
		remove_effect = {
			declare_war_on = {
				target = BUF
				type = annex_everything
			}
		}
	}
	EQS_integrate_buffalo_states = {
		icon = celestia
		available = {
			owns_state = 78
			owns_state = 89
			owns_state = 80
			owns_state = 91
			owns_state = 92
			owns_state = 93
			BUF = {
				exists = no
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_buffalo_states"
			every_state = {
				limit = {
					OR = {
						state = 78
						state = 89
						state = 80
						state = 91
						state = 92
						state = 93
					}
				}
				add_core_of = EQS
			}
			set_country_flag = EQS_buffalo_integrated
			custom_effect_tooltip = EQS_buffalo_divisions_tt
			hidden_effect = {
				load_oob = "EQS_buffalo_volunteers"
			}
			country_event = equestria.14
		}
	}
	EQS_dragon_diplomacy = {
		icon = celestia
		available = {
			DRG = {
				has_government = democratic
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			DRG = {
				exists = yes
				is_subject = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_dragon_diplomacy"
			DRG = {
				country_event = equestria.15
			}
		}
	}
	EQS_bolster_the_empire = {
		icon = celestia
		available = {
			CRY = {
				has_war = no
			}
			has_manpower > 9999
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bolster_the_empire"
			custom_effect_tooltip = EQS_CRY_sombra_bonuses_tt
			add_manpower = -10000
			CRY = {
				country_event = equestria.18
			}
		}
	}
	EQS_industrialize_rainbow_falls = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 3
			98 = { is_owned_and_controlled_by = CRY }
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 50
		modifier = {
			civilian_factory_use = 4
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_industrialize_rainbow_falls"
			98 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_crystal_magitech_center = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 4
			142 = { is_owned_and_controlled_by = CRY }
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_crystal_magitech_center"
			142 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_aid_economic_recovery = {
		icon = celestia
		available = {
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		days_remove = 100
		modifier = {
			consumer_goods_factor = 0.05
			political_power_gain = -0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_economic_recovery"
			EQC = {
				country_event = equestria.19
			}
		}
	}
	EQS_new_manehattan_investments = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 3
			362 = { is_owned_and_controlled_by = EQC }
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 4
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_new_manehattan_investments"
			362 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_applelaide_arms_factory = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 4
			357 = { is_owned_and_controlled_by = EQC }
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_applelaide_arms_factory"
			357 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_fund_port_expansion = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 1
			1194 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 20
		modifier = {
			civilian_factory_use = 2
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_fund_port_expansion"
			1194 = {
				add_building_construction = {
					type = naval_base
					level = 2
					province = 20724
					instant_build = yes
				}
			}
			PCB = {
				add_stability = 0.05
				add_political_power = 50
			}
		}
	}
	EQS_support_matrotanzas_manufacturing = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 2
			1194 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_support_matrotanzas_manufacturing"
			1194 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	EQS_expand_puerto_caballo_dockyards = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 2
			1193 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 20
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_expand_puerto_caballo_dockyards"
			1193 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
	EQS_shelter_olenians = {
		icon = celestia
		available = {
			OLE = {
				NOT = {
					has_government = democratic
					is_subject_of = CHN
				}
				has_country_flag = OLE_situation_stable
				has_war = no
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OLE = {
				exists = yes
				NOT = {
					has_government = democratic
					is_subject_of = CHN
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 90
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_olenians"
			country_event = equestria.22
		}
	}
	EQS_aid_velvet = {
		icon = celestia
		available = {
			OLE = {
				has_government = democratic
				has_war_with = CHN
			}
			has_equipment = {
				infantry_equipment > 1999
				support_equipment > 399
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OLE = {
				exists = yes
				has_government = democratic
				NOT = {
					is_in_faction_with = EQS
				}
			}
			CHN = {
				NOT = {
					has_government = democratic
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_velvet"
			send_equipment = { target = OLE type = infantry_equipment amount = 2000 }
			send_equipment = { target = OLE type = support_equipment amount = 400 }
			send_equipment = { target = OLE type = artillery_equipment amount = 400 }
			OLE = {
				country_event = equestria.23
			}
		}
	}
	EQS_aid_nova_griffonia = {
		icon = celestia
		available = {
			GRF = {
				has_government = democratic
				has_war_with = STG
			}
			has_equipment = {
				infantry_equipment > 1999
				support_equipment > 399
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			GRF = {
				exists = yes
				has_government = democratic
				NOT = {
					is_in_faction_with = EQS
				}
			}
			STG = {
				NOT = {
					has_government = democratic
					is_subject_of = EQS
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_nova_griffonia"
			send_equipment = { target = GRF type = infantry_equipment amount = 2000 }
			send_equipment = { target = GRF type = support_equipment amount = 400 }
			send_equipment = { target = GRF type = artillery_equipment amount = 400 }
			GRF = {
				country_event = equestria.24
			}
		}
	}
	EQS_shelter_dragon_lord = {
		icon = celestia
		available = {
			DRG = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			DRG = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		cost = 50
		ai_will_do ={
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_dragon_lord"
			country_event = equestria.25
		}
	}
	EQS_griffonstone_refugees = {
		icon = celestia
		available = {
			389 = {
				owner = {
					NOT = {
						has_government = democratic
						has_government = neutrality
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			389 = {
				owner = {
					NOT = {
						has_government = democratic
						has_government = neutrality
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 80
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_griffonstone_refugees"
			country_event = equestria.26
		}
	}
	EQS_shelter_hippogriffian_royal_family = {
		available = {
			HIP = {
				OR = {
					exists = no
					AND = {
						has_government = fascism
						NOT = {
							has_idea = HIP_hostage_novo
						}
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			HIP = {
				OR = {
					exists = no
					AND = {
						has_government = fascism
						NOT = {
							has_idea = HIP_hostage_novo
						}
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_hippogriffian_royal_family"
			country_event = equestria.27
		}
	}
	EQS_aid_hippogriffia = {
		available = {
			HIP = {
				exists = yes
				has_government = democratic
				has_war = yes
			}
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 399
			}
			has_equipment = {
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			HIP = {
				exists = yes
				has_government = democratic
				has_war = yes
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_hippogriffia"
			send_equipment = { target = HIP type = infantry_equipment amount = 2000 }
			send_equipment = { target = HIP type = support_equipment amount = 400 }
			send_equipment = { target = HIP type = artillery_equipment amount = 400 }
			HIP = {
				country_event = equestria.28
			}
		}
	}
	EQS_mend_arabian_ties = {
		available = {
			OR = {
				SDS = {
					exists = yes
					has_war = no
				}
				SDL = {
					exists = yes
					has_war = no
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OR = {
				SDS = {
					exists = yes
				}
				SDL = {
					exists = yes
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_mend_arabian_ties"
			if = {
				limit = {
					SDL = {
						exists = yes
					}
				}
				SDL = {
					country_event = equestria.31
				}
			}
			else = {
				SDS = {
					country_event = equestria.31
				}
			}
		}
	}
	EQS_shelter_somnambula = {
		available = {
			MGY = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			MGY = {
				OR = {
					exists =no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_somnambula"
			country_event = equestria.34
		}
	}
	EQS_aid_thorax = {
		available = {
			CCN = {
				exists = yes
				has_war_with = CHN
				has_government = democratic
			}
			has_equipment = {
				infantry_equipment > 1999
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			CCN = {
				exists = yes
				has_war_with = CHN
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_thorax"
			send_equipment = { target = CCN type = infantry_equipment amount = 2000 }
			CCN = {
				country_event = equestria.35
			}
		}
	}
	EQS_invite_changeling_students = {
		available = {
			CCN = {
				exists = yes
				has_war = no
				has_government = democratic
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			CCN = {
				exists = yes
				has_war = no
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_invite_changeling_students"
			country_event = equestria.36
		}
	}
	EQS_shelter_thoraxians = {
		available = {
			CCN = {
				exists = no
			}
		}
		visible = {
			CHN = {
				has_completed_focus = thoraxian_betrayal
			}
			CCN = {
				exists = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_thoraxians"
			country_event = equestria.37
		}
	}
}
EQS_construction_projects_category = {
	EQS_central_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		modifier = {
			political_power_gain = -0.1
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_central_equestria_railroads"
			set_country_flag = EQS_central_railroads_built
			build_railway = {
                level = 1
                path = { 179 11114 911 3768 776 9741 3604 9598 11734 6789 9590 3589 6613 11593 590 6770 782 }
            }
			build_railway = {
                level = 1
                path = { 6789 9752 6985 11568 773 }
            }
			build_railway = {
                level = 1
                path = { 9470 3271 6218 9494 6580 11399 }
            }
			build_railway = {
                level = 1
                path = { 6259 11492 493 9457 }
            }
			build_railway = {
                level = 1
                path = { 11596 897 3771 9734 3915 }
            }
			build_railway = {
                level = 1
                path = { 3893 974 11856 6930 3884 11414 11372 3381 9375 }
            }
			every_owned_state = {
				limit = {
					OR = {
						state = 116
						state = 97
						state = 121
						state = 122
						state = 101
						state = 119
						state = 99
						state = 129
						state = 105
						state = 179
						state = 181
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			3 = {
				add_extra_state_shared_building_slots = 1
			}
			106 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_eastern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 75
			}
		}
		modifier = {
			political_power_gain = -0.1
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_eastern_equestria_railroads"
			set_country_flag = EQS_eastern_railroads_built
			build_railway = {
                level = 1
                path = { 3887 6878 3933 962 9431 6504 3946 6917 6931 }
            }
			build_railway = {
                level = 1
                path = { 6598 11518 13068 6071 9126 6185 11052 }
            }
			build_railway = {
                level = 1
                path = { 12096 11860 940 6384 6335 11332 11299 351 }
            }
			build_railway = {
                level = 1
                path = { 11877 9840 3794 3918 12289 6749 11885 6996 }
            }
			every_owned_state = {
				limit = {
					OR = {
						state = 109
						state = 107
						state = 188
						state = 40
						state = 223
						state = 349
						state = 29
						state = 108
						state = 185
						state = 106
						state = 102
						state = 227
						state = 229
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			157 = {
				add_extra_state_shared_building_slots = 1
			}
			349 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_western_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 59
			}
		}
		modifier = {
			political_power_gain = -0.1
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_western_equestria_railroads"
			set_country_flag = EQS_western_railroads_built
			build_railway = {
                level = 1
                path = { 511 11397 3557 3492 11244 457 }
            }
			build_railway = {
                level = 1
                path = { 9351 700 3668 7624 3774 }
            }
			build_railway = {
                level = 1
                path = { 6233 9371 354 9351 323 11241 4477 4545 6763 3711 714 11678 6753 748 }
            }
			every_owned_state = {
				limit = {
					OR = {
						state = 60
						state = 175
						state = 96
						state = 72
						state = 126
						state = 131
						state = 169
						state = 172
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			136 = {
				add_extra_state_shared_building_slots = 1
			}
			132 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_southwestern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_buffalo_integrated
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 38
			}
		}
		modifier = {
			political_power_gain = -0.1
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_southwestern_equestria_railroads"
			set_country_flag = EQS_southwestern_railroads_built
			build_railway = {
                level = 1
                path = { 11511 6080 199 3188 11037 }
            }
			build_railway = {
                level = 1
                path = { 11037 6306 11528 6415 }
            }
			build_railway = {
                level = 1
                path = { 6415 9520 657 11580 }
            }
			build_railway = {
                level = 1
                path = { 11580 3617 6790 3627 9608 }
            }
			build_railway = {
                level = 1
                path = { 9608 619 6611 3859 3395 11663 11679 9660 690 11619 }
            }
			build_railway = {
                level = 1
                path = { 11580 9621 614 679 9606 596 11735 11564 9646 }
            }
			every_owned_state = {
				limit = {
					OR = {
						state = 38
						state = 89
						state = 92
						state = 51
						state = 19
						state = 80
						state = 100
						state = 94
						state = 23
						state = 91
						state = 93
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			38 = {
				add_extra_state_shared_building_slots = 1
			}
			89 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_southeastern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_moonshine_resolved
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 13
			}
		}
		modifier = {
			political_power_gain = -0.1
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_southeastern_equestria_railroads"
			set_country_flag = EQS_southeastern_railroads_built
			build_railway = {
                level = 1
                path = { 11627 6690 11666 6739 9529 3716 12066 10027 3901 12098 }
            }
			build_railway = {
                level = 1
                path = { 11499 3690 6568 6570 6469 11519 9574 6440 3444 6241 9486 8622 }
            }
			build_railway = {
                level = 1
                path = { 8622 6444 309 241 7979 8111 247 11264 }
            }
			build_railway = {
                level = 1
                path = { 8622 10107 7203 10045 4018 9541 11525 569 }
            }
			build_railway = {
                level = 1
                path = { 9572 953 11845 6889 6957 6970 9586 3943 3956 569 }
            }
			every_owned_state = {
				limit = {
					OR = {
						state = 113
						state = 90
						state = 348
						state = 16
						state = 24
						state = 30
						state = 50
						state = 352
						state = 351
						state = 34
						state = 15
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			16 = {
				add_extra_state_shared_building_slots = 1
			}
			30 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_canterlot_industry = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_canterlot_industry"
			3 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_south_severyanian_reconstruction = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 157
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_south_severyanian_reconstruction"
			157 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_baltimare_economic_retuning = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_moonshine_resolved
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 13
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_baltimare_economic_retuning"
			13 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_las_pegasus_toasters = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 66
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 150
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_las_pegasus_toasters"
			66 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}
	EQS_coltifoalnian_investment = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 46
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 150
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_coltifoalnian_investment"
			46 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			59 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			60 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}
EQS_resource_prospecting_category = {
	develop_baltimare_aluminium = { #13

		icon = aluminium

		allowed = {

		}

		highlight_states = {
			highlight_state_targets = {
				state = 13
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 13
			controls_state = 13
		}
		visible = {
			owns_state = 13
			controls_state = 13
			13 = {
				NOT = {
					has_state_flag = baltimare_alluminium
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 60

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@steel < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_baltimare_aluminium"
			13 = { set_state_flag = baltimare_alluminium }
			13 = {
				add_resource = {
					type = aluminium
					amount = 8
				}
			}
		}
	}
	develop_apple_groove_mines = { #107

		icon = generic_construction
		allowed = {

		}
		highlight_states = {
			highlight_state_targets = {
				state = 107
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 0
			owns_state = 107
			controls_state = 107

		}
		visible = {
			owns_state = 107
			controls_state = 107
			107 = {
				NOT = {
					has_state_flag = apple_groove_mines_developed
				}
			}
		}
		fire_only_once = yes
		cost = 25
		days_remove = 140

		modifier = {
			civilian_factory_use = 1
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_apple_groove_mines"
			107 = { set_state_flag = apple_groove_mines_developed }
			custom_effect_tooltip = apple_groove_mines_developed_tt
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 0.15
				uses = 1
				category = industry
			}
		}
	}
	develop_freeside_steel_factories = { #110

		icon = steel
		allowed = {

		}
		highlight_states = {
			highlight_state_targets = {
				state = 110
			}
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 110
			controls_state = 110
			107 = {
				has_state_flag = apple_groove_mines_developed
			}
		}
		visible = {
			owns_state = 110
			controls_state = 110
			110 = {
				NOT = {
					has_state_flag = freeside_steel_factories
				}
			}
		}
		fire_only_once = yes
		cost = 60
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@steel < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_freeside_steel_factories"
			110 = { set_state_flag = freeside_steel_factories }
			110 = {
				add_resource = {
					type = steel
					amount = 12
				}
			}
		}
	}
	develop_ghastly_gorge_crystals = { #123

		icon = crystals

		allowed = {

		}
		highlight_states = {
			highlight_state_targets = {
				state = 123
			}
		}
		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 123
			controls_state = 123
		}

		visible = {
			has_tech = excavation1
			owns_state = 123
			controls_state = 123
			123 = {
				NOT = {
					has_state_flag = ghastly_gorge_crystal_deposits
				}
			}
		}

		fire_only_once = yes

		cost = 40
		days_remove = 88

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@crystals < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_ghastly_gorge_crystals"
			123 = { set_state_flag = ghastly_gorge_crystal_deposits }
			123 = {
				add_resource = {
					type = crystals
					amount = 6
				}
			}
		}
	}
	develop_welcoming_hills_tungsten_deposits = { #135
		icon = tungsten
		allowed = {
		}
		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 135
			controls_state = 135
		}
		highlight_states = {
			highlight_state_targets = {
				state = 135
			}
		}
		visible = {
			owns_state = 135
			controls_state = 135
			135 = {
				NOT = {
					has_state_flag = welcoming_hills_tungsten
				}
			}
		}
		fire_only_once = yes
		cost = 27
		days_remove = 60
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@tungsten < 5 }
				factor = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_welcoming_hills_tungsten_deposits"
			135 = { set_state_flag = welcoming_hills_tungsten }
			135 = {
				add_resource = {
					type = tungsten #standin for phosphates
					amount = 4
				}
			}
		}
	}
	neighgara_falls_crystals_develop = { #56
		icon = crystals
		allowed = {
		}
		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 56
			controls_state = 56
		}
		highlight_states = {
			highlight_state_targets = {
				state = 56
			}
		}
		visible = {
			owns_state = 56
			controls_state = 56
			56 = {
				NOT = {
					has_state_flag = neighgara_falls_crystals
				}
			}
		}
		fire_only_once = yes
		cost = 30
		days_remove = 80
		modifier = {
			civilian_factory_use = 2
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@crystals < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove neighgara_falls_crystals_develop"
			56 = { set_state_flag = neighgara_falls_crystals }
			56 = {
				add_resource = {
					type = crystals #standin for phosphates
					amount = 4
				}
			}
		}
	}
	some_magical_plateu_oil = { #227
		icon = oil
		allowed = {
		}
		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 227
			controls_state = 227
		}
		highlight_states = {
			highlight_state_targets = {
				state = 227
			}
		}
		visible = {
			owns_state = 227
			controls_state = 227
			227 = {
				NOT = {
					has_state_flag = oil_in_magical_plateu_developed
				}
			}
		}
		fire_only_once = yes
		cost = 27
		days_remove = 77
		modifier = {
			civilian_factory_use = 2
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@oil < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove some_magical_plateu_oil"
			227 = { set_state_flag = oil_in_magical_plateu_developed }
			227 = {
				add_resource = {
					type = oil
					amount = 4
				}
			}
		}
	}
	upper_unicorn_range_chromium = { #73
		icon = chromium
		allowed = {
		}
		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 73
			controls_state = 73
		}
		highlight_states = {
			highlight_state_targets = {
				state = 73
			}
		}
		visible = {
			owns_state = 73
			controls_state = 73
			73 = {
				NOT = {
					has_state_flag = unicorn_range_chrom_deposit
				}
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 75
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@chromium < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove upper_unicorn_range_chromium"
			73 = { set_state_flag = unicorn_range_chrom_deposit }
			73 = {
				add_resource = {
					type = chromium #standin for phosphates
					amount = 12
				}
			}
		}
	}
	bogg_toxic_marsh_oil = { #327
		icon = oil
		allowed = {
		}
		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 327
			controls_state = 327
		}
		highlight_states = {
			highlight_state_targets = {
				state = 327
			}
		}
		visible = {
			owns_state = 327
			controls_state = 327
			327 = {
				NOT = {
					has_state_flag = bogg_developed
				}
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 60
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@oil < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove bogg_toxic_marsh_oil"
			327 = { set_state_flag = bogg_developed }
			327 = {
				add_resource = {
					type = oil #standin for phosphates
					amount = 5
				}
			}
		}
	}
	bogg_toxic_marsh_rubber = { #327
		icon = rubber
		allowed = {
		}
		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 1
			owns_state = 327
			controls_state = 327
			327 = { has_state_flag = bogg_developed }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 327
			}
		}
		visible = {
			owns_state = 327
			controls_state = 327
			327 = {
				has_state_flag = bogg_developed
				NOT = {
					has_state_flag = bogg_developed_rubber
				}
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 60
		modifier = {
			civilian_factory_use = 2
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@rubber < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove bogg_toxic_marsh_rubber"
			327 = { set_state_flag = bogg_developed_rubber }
			327 = {
				add_resource = {
					type = rubber #standin for phosphates
					amount = 3
				}
			}
		}
	}
	haysead_marsh_rubber = { #27
		icon = rubber
		allowed = {
		}
		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 27
			controls_state = 27
		}
		highlight_states = {
			highlight_state_targets = {
				state = 27
			}
		}
		visible = {
			owns_state = 27
			controls_state = 27
			27 = {
				NOT = {
					has_state_flag = haysead_marsh_rubber_developed
				}
			}
		}
		fire_only_once = yes
		cost = 30
		days_remove = 100
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@rubber < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove haysead_marsh_rubber"
			27 = { set_state_flag = haysead_marsh_rubber_developed }
			27 = {
				add_resource = {
					type = rubber #standin for phosphates
					amount = 11
				}
			}
		}
	}
	
	haysead_marsh_rubber_2 = { #27
		icon = rubber
		allowed = {
		}
		available = {
			has_tech = excavation5
			num_of_civilian_factories_available_for_projects > 4
			owns_state = 27
			controls_state = 27
		}
		highlight_states = {
			highlight_state_targets = {
				state = 27
			}
		}
		visible = {
			owns_state = 27
			controls_state = 27
			27 = {
				NOT = {
					has_state_flag = haysead_marsh_rubber_developed_2
				}
				has_state_flag = haysead_marsh_rubber_developed
			}
		}
		fire_only_once = yes
		cost = 30
		days_remove = 100
		modifier = {
			civilian_factory_use = 5
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@rubber < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove haysead_marsh_rubber_2"
			27 = { set_state_flag = haysead_marsh_rubber_developed_2 }
			27 = {
				add_resource = {
					type = rubber #standin for phosphates
					amount = 11
				}
			}
		}
	}
	albion_aluminium_aircraft = { #525
		icon = aluminium
		allowed = {
		}
		available = {
			has_tech = improved_machine_tools
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 525
			controls_state = 525
		}
		highlight_states = {
			highlight_state_targets = {
				state = 525
			}
		}
		visible = {
			owns_state = 525
			controls_state = 525
			525 = {
				NOT = {
					has_state_flag = albion_aluminium_developed
				}
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 100
		modifier = {
			civilian_factory_use = 3
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@aluminium < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove albion_aluminium_aircraft"
			525 = { set_state_flag = albion_aluminium_developed }
			525 = {
				add_resource = {
					type = aluminium #standin for phosphates
					amount = 6
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	canterlot_crystal_mines = {
        
        icon = crystals

        allowed = {

        }

        highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
        available = {
            has_tech = excavation5
            num_of_civilian_factories_available_for_projects > 3
            owns_state = 3
            controls_state = 3
        }
        visible = {
            owns_state = 3
            controls_state = 3
            3 = {
                NOT = {
                    has_state_flag = canterlot_crystal_1
                }
            }
        }

        fire_only_once = yes

        cost = 25
        days_remove = 60

        modifier = {
            civilian_factory_use = 4
        }

        ai_will_do = {
            factor = 0
            modifier = {
                check_variable = { resource@crystals < 5 }
                add = 1
            }
        }
        remove_effect = {
            log = "[GetDateText]: [Root.GetName]: Decision remove canterlot_crystal_mines"
            3 = { set_state_flag = canterlot_crystal_1 }
            3 = {
                add_resource = {
                    type = crystals
                    amount = 12
                }
            }
        }
    }
    
    canterlot_crystal_mines_2 = {
        
        icon = crystals

        allowed = {

        }

        highlight_states = {
			highlight_state_targets = {
				state = 28
			}
		}
        available = {
            has_tech = excavation_b
            num_of_civilian_factories_available_for_projects > 5
            owns_state = 3
            controls_state = 3
        }
        visible = {
            owns_state = 3
            controls_state = 3
            3 = {
                NOT = {
                    has_state_flag = canterlot_crystal_2
                }
                has_state_flag = canterlot_crystal_1
            }
        }

        fire_only_once = yes

        cost = 25
        days_remove = 60

        modifier = {
            civilian_factory_use = 6
        }

        ai_will_do = {
            factor = 0
            modifier = {
                check_variable = { resource@crystals < 5 }
                add = 1
            }
        }
        remove_effect = {
            log = "[GetDateText]: [Root.GetName]: Decision remove canterlot_crystal_mines_2"
            3 = { set_state_flag = canterlot_crystal_2 }
            3 = {
                add_resource = {
                    type = crystals
                    amount = 12
                }
            }
        }
    }
    
    canterlot_crystal_mines_3 = {
        
        icon = crystals

        allowed = {

        }

        highlight_states = {
			highlight_state_targets = {
				state = 28
			}
		}
        available = {
            has_tech = excavation_d
            num_of_civilian_factories_available_for_projects > 9
            owns_state = 3
            controls_state = 3
        }
        visible = {
            owns_state = 3
            controls_state = 3
            3 = {
                NOT = {
                    has_state_flag = canterlot_crystal_3
                }
                has_state_flag = canterlot_crystal_2
            }
        }

        fire_only_once = yes

        cost = 25
        days_remove = 60

        modifier = {
            civilian_factory_use = 10
        }

        ai_will_do = {
            factor = 0
            modifier = {
                check_variable = { resource@crystals < 5 }
                add = 1
            }
        }
        remove_effect = {
            log = "[GetDateText]: [Root.GetName]: Decision remove canterlot_crystal_mines_3"
            3 = { set_state_flag = canterlot_crystal_3 }
            3 = {
                add_resource = {
                    type = crystals
                    amount = 24
                }
            }
        }
    }
	furry_mountains_chromium_excavation = { #71
		icon = chromium
		allowed = {
		}
		available = {
			has_tech = excavation5
			num_of_civilian_factories_available_for_projects > 4
			owns_state = 71
			controls_state = 71
		}
		highlight_states = {
			highlight_state_targets = {
				state = 71
			}
		}
		visible = {
			owns_state = 71
			controls_state = 71
			71 = {
				NOT = {
					has_state_flag = furry_mountains_chromium
				}
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 75
		modifier = {
			civilian_factory_use = 5
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { resource@chromium < 5 }
				add = 1
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove furry_mountains_chromium_excavation"
			71 = { set_state_flag = furry_mountains_chromium }
			71 = {
				add_resource = {
					type = chromium #standin for phosphates
					amount = 14
				}
			}
		}
	}
}
EQS_breakaway_diplomacy_category = {
	EQS_las_pegasus_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
			NOT = {
				has_country_flag = EQS_southwest_war_ongoing
			}
		}
		visible = {
			LSP = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			has_completed_focus = EQS_cities_and_deserts
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_las_pegasus_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.13
		}
	}
	EQS_rock_union_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
			NOT = {
				has_country_flag = EQS_southwest_war_ongoing
			}
		}
		visible = {
			ROC = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			has_completed_focus = EQS_cities_and_deserts
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_rock_union_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.18
		}
	}
	EQS_confederacy_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
			NOT = {
				has_country_flag = EQS_southwest_war_ongoing
			}
		}
		visible = {
			SCS = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			has_completed_focus = EQS_cities_and_deserts
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_confederacy_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.23
		}
	}
	EQS_buffalo_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
			NOT = {
				has_country_flag = EQS_southwest_war_ongoing
			}
		}
		visible = {
			BUF = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			has_completed_focus = EQS_cities_and_deserts
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_buffalo_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.26
		}
	}
	EQS_reunify_southeast = {
		icon = celestia
		available = {
			has_war = no
			count_triggers = {
				amount = 2 #at least 2 triggers are true
				country_exists = CES
				country_exists = JUN
				country_exists = NMS
				country_exists = BAL
			}
		}
		visible = {
			count_triggers = {
				amount = 2 #at least 2 triggers are true
				country_exists = CES
				country_exists = JUN
				country_exists = NMS
				country_exists = BAL
			}
			has_completed_focus = EQS_jungles_and_mountains
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reunify_southeast"
			if = {
				limit = {
					CES = {
						exists = yes
					}
				}
				puppet = CES
			}
			if = {
				limit = {
					JUN = {
						exists = yes
					}
				}
				declare_war_on = {
					target = JUN
					type = annex_everything
				}
			}
			if = {
				limit = {
					NMS = {
						exists = yes
					}
				}
				declare_war_on = {
					target = NMS
					type = annex_everything
				}
			}
			if = {
				limit = {
					BAL = {
						exists = yes
					}
				}
				declare_war_on = {
					target = BAL
					type = annex_everything
				}
			}
			set_country_flag = EQS_southeast_warunification
		}
	}
	EQS_celestial_state_annexation = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
		}
		visible = {
			CES = {
				exists = yes
				is_subject_of = EQS
			}
			JUN = {
				exists = no
			}
			NMS = {
				exists = no
			}
			BAL = {
				exists = no
			}
			has_completed_focus = EQS_jungles_and_mountains
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_celestial_state_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.30
		}
	}
	EQS_aztlan_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
		}
		visible = {
			JUN = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			CES = {
				exists = no
			}
			NMS = {
				exists = no
			}
			BAL = {
				exists = no
			}
			has_completed_focus = EQS_jungles_and_mountains
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aztlan_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.31
		}
	}
	EQS_tzinacatlia_negotiations = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
		}
		visible = {
			NMS = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			CES = {
				exists = no
			}
			JUN = {
				exists = no
			}
			BAL = {
				exists = no
			}
			has_completed_focus = EQS_jungles_and_mountains
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_tzinacatlia_negotiations"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.35
		}
	}
	EQS_kill_baltimare = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
		}
		visible = {
			BAL = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = EQS
				}
			}
			CES = {
				exists = no
			}
			JUN = {
				exists = no
			}
			NMS = {
				exists = no
			}
			has_completed_focus = EQS_jungles_and_mountains
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_kill_baltimare"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			country_event = equestria_celestia.39
		}
	}
	EQS_annex_puerto_caballo = {
		icon = celestia
		available = {
			has_war = no
			NOT = {
				has_country_flag = EQS_breakaway_negotiations_ongoing
			}
		}
		visible = {
			PCB = {
				exists = yes
			}
			has_completed_focus = EQS_beyond_the_celestial_sea
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_annex_puerto_caballo"
			set_country_flag = EQS_breakaway_negotiations_ongoing
			PCB = {
				country_event = equestria_celestia.42
			}
		}
	}
	EQS_invite_les_meridiennes = {
		icon = celestia
		available = {
			has_war = no
			MER = {
				is_in_faction = no
				is_subject = no
				exists = yes
			}
		}
		visible = {
			MER = {
				is_in_faction = no
				is_subject = no
				exists = yes
			}
			has_completed_focus = EQS_beyond_the_celestial_sea
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_invite_les_meridiennes"
			puppet = MER
		}
	}
	EQS_secure_dragons = {
		icon = celestia
		available = {
			has_war = no
			OR = {
				AND = {
					DRG = {
						exists = no
					}
					NOT = {
						owns_state = 7
					}
				}
				NOT = {
					DRG = {
						is_in_faction_with = EQS
					}
				}
			}
		}
		visible = {
			OR = {
				AND = {
					DRG = {
						exists = no
					}
					NOT = {
						owns_state = 7
					}
				}
				NOT = {
					DRG = {
						is_in_faction_with = EQS
					}
				}
			}
			has_completed_focus = EQS_beyond_the_celestial_sea
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_secure_dragons"
			if = {
				limit = {
					DRG = {
						exists = yes
						has_government = democratic
					}
				}
				add_to_faction = DRG
			}
			else_if = {
				limit = {
					DRG = {
						exists = yes
					}
				}
				declare_war_on = {
					target = DRG
					type = puppet_wargoal_focus
				}
			}
			else = {
				declare_war_on = {
					target = 7.owner
					type = annex_everything
				}
			}
		}
	}
	EQS_save_new_mareland = {
		icon = celestia
		available = {
			has_war = no
			EQC = {
				exists = yes
				is_subject = no
				OR = {
					has_government = fascism
					has_government = communism
				}
			}
		}
		visible = {
			EQC = {
				exists = yes
				is_subject = no
				OR = {
					has_government = fascism
					has_government = communism
				}
			}
			has_completed_focus = EQS_beyond_the_celestial_sea
		}
		cost = 30
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_save_new_mareland"
			declare_war_on = {
				target = EQC
				type = puppet_wargoal_focus
			}
		}
	}
	EQS_integrate_crystal_empire = {
		icon = celestia
		available = {
			CRY = {
				exists = no
			}
			owns_state = 344
		}
		visible = {
			CRY = {
				exists = no
			}
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_crystal_empire"
			set_country_flag = EQS_CRY_absolestia_integration
			mark_focus_tree_layout_dirty = yes
		}
	}
	EQS_integrate_stalliongrad = {
		icon = celestia
		available = {
			STG = {
				exists = no
			}
			owns_state = 153
			owns_state = 166
		}
		visible = {
			OR = {
				AND = {
					STG = {
						exists = no
					}
					OR = {
						owns_state = 153
						owns_state = 166
					}
				}
				has_completed_focus = EQS_a_revolution_rectified
			}
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_stalliongrad"
			set_country_flag = EQS_STG_absolestia_integration
			mark_focus_tree_layout_dirty = yes
		}
	}
}
EQS_celestia_selfdestruct_category = {
	EQS_celestia_degrade_timer = {
		icon = celestia
		allowed = {
			original_tag = EQS
		}
		visible = {
			has_country_flag = EQS_celestia_selfdestruct_enabled
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = EQS_celestia_nostop_tt
				NOT = {
					has_country_flag = EQS_celestia_selfdestruct_enabled
				}
			}
		}

		days_mission_timeout = 150

		activation = {
			has_country_flag = EQS_celestia_selfdestruct_enabled
		}
		
		fixed_random_seed = no
		fire_only_once = no
		is_good = no

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout EQS_celestia_degrade_timer"
			custom_effect_tooltip = EQS_celestia_worsen_tt
		}
	}
}
EQS_celestia_evil_meter_category = {
	EQS_become_daybreaker_decision = {
		icon = celestia
		available = {
			hidden_trigger = {
				has_country_flag = { flag = celestia_evil_meter value > 46 }
			}
			if = {
				limit = { has_country_flag = { flag = celestia_evil_meter value > 46 }  }
				OR = {
					AND = {
						has_war = yes
						fascism > 0.3
					}
					fascism > 0.5
				}
			}
		}
		visible = {
			has_country_leader = { character = EQS_princess_celestia ruling_only = yes }
			
			is_subject = no
			NOT = {
				focus_progress = { focus = eqs_come_to_compromise progress > 0 }
				has_completed_focus = eqs_come_to_compromise
			}
			is_EQS_SOL = no
			OR = {
				has_war = yes
				hidden_trigger = { has_country_flag = { flag = celestia_evil_meter value > 8 } }
			}
			NOT = { has_country_flag = supernova_fired }
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_become_daybreaker_decision"
			if = {
				limit = { hidden_trigger = { has_country_flag = { flag = celestia_evil_meter value > 46 } } }
				set_country_flag = supernova_by_decision
				country_event = equestria.154
			}
		}
	}
	EQS_celestia_speech_decision = {
		icon = celestia
		visible = {
			has_war_with = CHN
			has_completed_focus = Extreme_war_comittee

			has_country_leader = { ruling_only = yes character = EQS_princess_celestia }
			
		}
		cost = 25
		ai_will_do = {
			factor = 1000
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_celestia_speech_decision"
			country_event = equestria.143
			hidden_effect = {
				if = {
					limit = { is_ai = yes }
					add_political_power = 300
				}
			}
		}
	}
	EQS_enact_war_plan_decision = {
		icon = war_plan_eqs
		visible = {
			OR = {
				is_EQS_SOL = yes
				has_completed_focus = War_Plan
			}
			NOT = {
				has_idea = war_plan_equestria_mild
				has_idea = war_plan_equestria
				has_idea = war_plan_equestria_extreme
			}
		}
		available = {
			NOT = { has_country_flag = war_plan_timeout }
			has_war = yes
			OR = {
				has_war_support > 0.5
				surrender_progress > 0.15
				AND = {
					has_defensive_war = yes
					any_enemy_country = {
						is_major = yes
					}
				}
			}
		}
		cost = 100
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				surrender_progress < 0.3
				OR = {
					has_stability < 0.75
					has_war_support < 0.75
					surrender_progress < 0.1
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_enact_war_plan_decision"
			if = {
				limit = { has_country_flag = EQS_war_plan_equestria_mild }
				add_ideas = war_plan_equestria_mild
			}
			else_if = {
				limit = { has_country_flag = EQS_war_plan_equestria }
				add_ideas = war_plan_equestria
			}
			else_if = {
				limit = { has_country_flag = EQS_war_plan_equestria_extreme }
				add_ideas = war_plan_equestria_extreme
			}
			else = {
				country_event = equestria.152
				if = {
					limit = {
						NOT = {
							has_idea = war_economy
							has_idea = tot_economic_mobilisation
						}
					}
					add_ideas = war_economy
				}
			}
			hidden_effect = {
				set_country_flag = { flag = war_plan_timeout days = 60 value = 1 }
			}
		}
	}
	EQS_turn_off_war_plan_decision = {
		icon = war_plan_eqs
		visible = {
			OR = {
			}
		}
		available = {
			NOT = { has_country_flag = war_plan_timeout }
		}
		cost = 50
		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				surrender_progress < 0.1
				OR = {
					has_stability < 0.75
					has_war_support < 0.75
				}
			}
			modifier = {
				add = 25
				surrender_progress < 0.2
				OR = {
					has_stability < 0.5
					has_war_support < 0.5
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_turn_off_war_plan_decision"
			hidden_effect = {
				set_country_flag = { flag = war_plan_timeout days = 60 value = 1 }
			}
		}
	}
	EQS_support_thorax_decision = {
		icon = rifles
		visible = {
			has_government = democratic
			CHN = { has_war_with = CCN }
		}
		available = {
			has_equipment = { infantry_equipment > 499 }
		}
		cost = 50
		ai_will_do = {
			factor = 100
			modifier = {
				has_global_flag = EQS_evil_celestia
				factor = 0
			}
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_support_thorax_decision"
			send_equipment = { target = CCN type = infantry_equipment amount = 500 }
			reverse_add_opinion_modifier = { target = CCN modifier = OLE_civil_war_support }
			hidden_effect = {
				add_ai_strategy = {
					type = support
					id = "CCN"
					value = 300
				}
				set_country_flag = EQS_helped_CCN
			}
		}
	}
}
SOL_dealing_with_resistance = {
	SOL_resistance_crisis = {
		icon = revolt
		activation = {
			democratic > 0.3
			has_idea = SOL_harmonic_resistance_idea3
			has_war = no
		}
		available = {
			NOT = {
				has_idea = SOL_harmonic_resistance_idea3
			}
		}
		cancel_trigger = {
			hidden_trigger = { has_war = yes }
		}
		is_good = no
		days_mission_timeout = 240
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SOL_resistance_crisis"
			set_variable = { civ_war_size = party_popularity@democratic }
			multiply_variable = { civ_war_size = 2 }
			clamp_variable = {
				var = civ_war_size
				min = 0.4
				max = 0.65
			}
			add_stability = -0.3
			add_war_support = -0.3
			add_political_power = -250
			start_civil_war = {
				ideology = democratic
				size = civ_war_size
			}
			clear_variable = civ_war_size
			hidden_effect = {
				remove_ideas = SOL_harmonic_resistance_idea3
				random_other_country = {
					limit = {
						original_tag = EQS
						has_government = democratic
					}
					#load_focus_tree = { tree = equestria_focus keep_completed = yes }
					set_capital = { 
						state = 75 
						remember_old_capital = no
					}
					add_political_power = 450
					set_party_name = { ideology = fascism long_name = EQS_fascism_generic_party_long name = EQS_fascism_generic_party }
					set_country_flag = EQS_force_republic
					complete_national_focus = eqs_come_to_compromise
					complete_national_focus = eqs_allow_the_vote
					set_country_flag = congress_president
					set_cosmetic_tag = EQS_DEM1
					set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
					country_event = { hours = 24 id = equestriadem.1 }
					set_country_flag = { flag = celestia_evil_meter value = 0 }
					save_global_event_target_as = equestria
					every_character = {
						limit = {
							is_country_leader = no
							OR = {
								is_character = EQS_prince_blueblood
								is_character = EQS_august_fon_eisenstadt
								is_character = EQS_SOL_comet_trail
								is_character = EQS_SOL_Stormchaser
								is_character = EQS_SOL_comm_rush
								is_character = EQS_SOL_Capsaicin
								is_character = EQS_SOL_midwinter_halo
							}
						}
						set_nationality = event_target:solar_empire
					}
					ROOT = {
						every_character = {
							limit = {
								is_country_leader = no
								OR = {
									is_character = EQS_applejack
									is_character = EQS_sergeant_reckless
									is_character = EQS_big_macintosh
									#has_id = 8
									is_character = EQS_pinkie_pie
									is_character = EQS_caltrop_decay
									is_character = EQS_braeburn
									is_character = EQS_NLR_tempest_wind
									is_character = EQS_NLR_midnight_oil
									is_character = EQS_NLR_bipen
									is_character = EQS_oli_equites
								}
							}
							set_nationality = PREV.PREV
						}
					}
				}
				news_event = { id = news.sol.5 hours = 1 }
			}
		}
	}
	SOL_laws = {
		icon = anti_harmony
		visible = {
			OR = {
				has_completed_focus = SOL_Freedom_from_Fear
				has_completed_focus = SOL_Firm_but_Fair
				has_completed_focus = SOL_Imperial_Inquisition
			}
			OR = {
				has_idea = SOL_harmonic_resistance_idea
				has_idea = SOL_harmonic_resistance_idea2
				has_idea = SOL_harmonic_resistance_idea3
			}
		}
		fire_only_once = yes
		cost = 70
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_laws"
			unlock_decision_tooltip = SOL_wrap_up
			unlock_decision_tooltip = SOL_raids_2
			unlock_decision_tooltip = SOL_raids
			hidden_effect = { set_country_flag = SOL_laws_done }
		}
		ai_will_do = {
			factor = 20
		}
	}
	SOL_raids = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea3
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		cost = 140
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_raids"
			swap_ideas = { add_idea = SOL_harmonic_resistance_idea2 remove_idea = SOL_harmonic_resistance_idea3 }
		}
		modifier = {
			democratic_drift = -0.02
			stability_factor = -0.05
			political_power_cost = 0.2
		}
		ai_will_do = {
			factor = 100
		}
	}
	SOL_raids_2 = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea2
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		cost = 70
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_raids_2"
			swap_ideas = { add_idea = SOL_harmonic_resistance_idea remove_idea = SOL_harmonic_resistance_idea2 }
			hidden_effect = {
				clr_country_flag = SOL_raids_2_in_progress
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_raids_2"
			hidden_effect = {
				set_country_flag = SOL_raids_2_in_progress
			}
		}
		modifier = {
			democratic_drift = -0.02
		}
		ai_will_do = {
			factor = 20
		}
	}
	SOL_wrap_up = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		fire_only_once = yes
		cost = 100
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_wrap_up"
			remove_ideas = SOL_harmonic_resistance_idea
			add_popularity = {
				ideology = democratic
				popularity = -0.05
			}
			hidden_effect = { clr_country_flag = SOL_wrap_up_in_progress }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_wrap_up"
			hidden_effect = {
				set_country_flag = SOL_wrap_up_in_progress
				country_event = { id = solarempire.30 days = 35 }
			}
		}
		ai_will_do = {
			factor = 20
		}
	}
}
SOL_trolling_chiropterra = {
	SOL_bat_puppeting = {
		icon = soljudge
		available = {
		    is_subject = no
		    has_DB_ruler = yes
			BAT = {
			    exists = no
			}
			custom_trigger_tooltip = {
				tooltip = SOL_BAT_decision_req_tt
				all_of_scopes = {
					array = BAT.core_states
					owner = {
						OR = {
							tag = EQS
							is_subject_of = EQS
						}
						PREV = { is_fully_controlled_by = PREV }
					}
				}
			}
		}

		cost = 50

		days_remove = 1

		fire_only_once = yes

        ai_will_do = {
			factor = 15
        }

		visible = {
			has_government = fascism
			is_subject = no
		    has_DB_ruler = yes
			all_of_scopes = {
				array = BAT.core_states
				owner = {
					OR = {
						tag = EQS
						is_subject_of = EQS
					}
					PREV = { is_fully_controlled_by = PREV }
				}
			}
		}

		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			custom_effect_tooltip = SOL_BAT_puppet_tt0
			custom_effect_tooltip = BAR_viira_puppet_break
			custom_effect_tooltip = SOL_BAT_puppet_tt1
			713 = {
				add_manpower = -343468
				set_state_category = wasteland
			}
			set_province_name = {
				id = 18601
				name =  EQS_SOL_port
			}
			set_capital = {
				state = 713
				remember_old_capital = no
			}
			712 = {
				add_manpower = -620322
				set_state_category = wasteland
			}
			custom_effect_tooltip = BAR_viira_puppet_genocide2_5
			custom_effect_tooltip = EQS_SOL_BAT_GAMER1
			add_victory_points = {
				province = 18570
				value = -19
			}
			set_province_name = {
				id = 18570
				name = EQS_SOL_batcityburnt
			}
			690 = {
				add_manpower = -138034
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER2
			add_victory_points = {
				province = 18583
				value = -3
			}
			689 = {
				add_manpower = -356244
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER3
			add_victory_points = {
				province = 18526
				value = -5
			}
			691 = {
				add_manpower = -448210
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER4
			add_victory_points = {
				province = 18499
				value = -3
			}
			815 = {
				add_manpower = -204763
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER5
			add_victory_points = {
				province = 18477
				value = -3
			}
			custom_effect_tooltip = BAR_viira_puppet_break
			custom_effect_tooltip = SOL_BAT_puppet_tt3
			show_ideas_tooltip = SOL_BAT_order
			hidden_effect = {
			712 = {
					remove_building = {
    					type = arms_factory
    					level = 100
					}
					remove_building = {
    					type = infrastructure
    					level = 5
					}
					remove_building = {
    					type = dockyard
    					level = 100
					}
					remove_building = {
    					type = industrial_complex
    					level = 100
					}
			}
			712 = {
					remove_building = {
    					type = arms_factory
    					level = 100
					}
					remove_building = {
    					type = infrastructure
    					level = 5
					}
					remove_building = {
    					type = dockyard
    					level = 100
					}
					remove_building = {
    					type = industrial_complex
    					level = 100
					}
			}
			create_dynamic_country = {
                original_tag = BAT
                set_country_flag = BAT_SOLAR
                set_politics = {
                    ruling_party = fascism
                    elections_allowed = no
                }
                set_cosmetic_tag = BAT_SOL
                set_research_slots = 3
				set_AI_strategies_on_every_possible_country_delayed = yes
            }
			EQS_SOL_batcouncil = {
				set_nationality = BTS
			}
			BTS = {
			    add_ideas = {
	                pony_race
			        modern_society
			        proper_science_base
			        no_lack_of_scientists
			        no_poverty
			    }
				    add_ideas = SOL_BAT_order
					load_focus_tree = barrad_focus_viira_bonus
					set_party_name = { 
						ideology = fascism 
						name = BAT_SOL_PUPPET_fash
						long_name = BAT_SOL_PUPPET_fash_long
					}
					add_country_leader_role = {
						character = EQS_SOL_batcouncil
						promote_leader = yes

						country_leader = {
							expire = "1965.1.1"
							ideology = falangism
							traits = { }
						}
					}
					transfer_state = 713
					transfer_state = 712
					transfer_state = 690
					transfer_state = 691
					transfer_state = 689
					transfer_state = 815
				    add_state_core = 713
					add_state_core = 712
					add_state_core = 690
					add_state_core = 691
					add_state_core = 689
					add_state_core = 815
				}
            puppet = BTS
			}
		}
    }
}
demobilization = {
	EQS_remove_fascism_decision = {
		icon = generic_political_actions
		visible = {
			tag = EQS
			has_war = no
			has_country_flag = { flag = celestia_evil_meter value < 34 }
			OR = {
			}
		}
		cost = 75
		ai_will_do = {
			factor = 10
			modifier = {
				fascism > 0.3
				factor = 2
			}
			modifier = {
				has_global_flag = EQS_nice_celestia
				factor = 5
			}
			modifier = {
				has_global_flag = EQS_evil_celestia
				factor = 0
			}
		}
		fire_only_once = yes
		days_remove = 60
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_remove_fascism_decision"
			remove_ideas = {
			}
		}
		modifier = {
			fascism_drift = -0.08
		}
	}
}
political_actions = {
	EQS_oc_general_unlock = {
		icon = generic_army_support
		fire_only_once = yes
		allowed = {
			original_tag = EQS
		}
		cost = 0
		visible = {
			has_country_flag = EQS_wartime_generals
		}
		complete_effect = {
			country_event = equestria_other.1
		}
	}
	SOL_rehabilitate_generals = {

		icon = generic_army_support

		fire_only_once = yes
		allowed = {
			original_tag = EQS
		}
		cost = sol_redemption_cost?200
		visible = {
			is_EQS_SOL = yes
			has_completed_focus = SOL_rehabilitate
			NOT = {
				country_exists = event_target:equestria
			}
			NOT = {
				has_character = EQS_soarin
				has_character = EQS_fast_clip
				has_character = EQS_whiplash
				has_character = EQS_sergeant_reckless
				has_character = EQS_madoor_stronghammer
				has_character = EQS_evening_squall
				has_character = EQS_fizzlepop
				has_character = EQS_bernard_hoofgonery
				has_character = EQS_allen_spark
				has_character = EQS_swift_wing
				has_character = EQS_sun_marble
				has_character = EQS_sentinel
				has_character = EQS_fireflight
			}
		}

		available = {
			is_subject = no
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_rehabilitate_generals"
			if = {
				limit = { NOT = { has_character = EQS_soarin } }
				every_possible_country = {
					limit = {
						has_character = EQS_soarin
					}
					EQS_soarin = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_fast_clip } }
				every_possible_country = {
					limit = {
						has_character = EQS_fast_clip
					}
					EQS_fast_clip = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_whiplash } }
				every_possible_country = {
					limit = {
						has_character = EQS_whiplash
					}
					EQS_whiplash = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sergeant_reckless } }
				every_possible_country = {
					limit = {
						has_character = EQS_sergeant_reckless
					}
					EQS_sergeant_reckless = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_fizzlepop } }
				every_possible_country = {
					limit = {
						has_character = EQS_fizzlepop
					}
					EQS_fizzlepop = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_bernard_hoofgonery } }
				every_possible_country = {
					limit = {
						has_character = EQS_bernard_hoofgonery
					}
					EQS_bernard_hoofgonery = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_madoor_stronghammer } }
				every_possible_country = {
					limit = {
						has_character = EQS_madoor_stronghammer
					}
					EQS_madoor_stronghammer = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_evening_squall } }
				every_possible_country = {
					limit = {
						has_character = EQS_evening_squall
					}
					EQS_evening_squall = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_allen_spark } }
				every_possible_country = {
					limit = {
						has_character = EQS_allen_spark
					}
					EQS_allen_spark = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_swift_wing } }
				every_possible_country = {
					limit = {
						has_character = EQS_swift_wing
					}
					EQS_swift_wing = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sentinel } }
				every_possible_country = {
					limit = {
						has_character = EQS_sentinel
					}
					EQS_sentinel = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sun_marble } }
				every_possible_country = {
					limit = {
						has_character = EQS_sun_marble
					}
					EQS_sun_marble = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_fireflight } }
				every_possible_country = {
					limit = {
						has_character = EQS_ireflight
					}
					EQS_fireflight = {
						set_nationality = ROOT 
					}
				}
			}
		}

		ai_will_do = {
			factor = 50
		}
	}
	EQS_rename_stalliongrad_decision = {
		icon = anti_communist
		allowed = {
			original_tag = EQS
		}
		visible = {
			owns_state = 153
			OR = {
				has_government = fascism
				has_country_flag = war_with_stg
			}
			NOT = { has_country_flag = stg_renamed_eqs }
			NOT = { has_country_flag = EQS_april_fools }
		}


		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
		}

		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_rename_stalliongrad_decision"
			country_event = equestria.133
			hidden_effect = {
				168 = {
					reset_state_name = yes
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	EQS_generic_rename_stalliongrad_decision = {
		icon = anti_communist
		allowed = {
			NOT = {
				original_tag = EQS
				original_tag = NLR
				original_tag = CHN
				original_tag = MAN
				original_tag = STG
				original_tag = STL
			}
		}
		visible = {
			NOT = {
				has_global_flag = stg_renamed
				has_government = communism
			}
			owns_state = 153
		}
		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_generic_rename_stalliongrad_decision"
			153 = { set_state_name = EQS_vp_trottersburg }
			235 = { set_state_name = EQS_vp_ladimir }
			168 = {
				reset_state_name = yes
			}
			set_global_flag = stg_renamed
		}
	}
}
foreign_politics = {
	EQS_annex_darkwing = {
		icon = stg_cores
		allowed = { original_tag = EQS }
		available = {
			FROM = {
				is_subject_of = ROOT
				has_country_flag = darwking_puppet
				NOT = { has_country_flag = darkwing_not_ready_to_be_annexed }
			}
		}
		visible = {
			has_government = democratic
			FROM = {
				original_tag = STG
				exists = yes
				is_subject_of = ROOT
			}
		}
		target_root_trigger = {
			has_government = democratic
		}
		targets = { STG }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				original_tag = STG
				is_subject_of = ROOT
			}
		}
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_annex_darkwing target: [From.GetName]"
			FROM = {
				country_event = stalliongrad.143
			}
		}
	}
	EQS_stop_commies = {
		 visible = {
               has_country_flag = EQS_remove_stalliongradian_influence
          }
		icon = red_star

		cost = 200
		
		ai_will_do = {
			factor = 150
		}
		
		fire_only_once = yes
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision YAK_stop_commies"
			add_stability = -0.1
			remove_ideas = internationalism
			remove_ideas = stalliongrad_propaganda
			clr_country_flag = EQS_remove_stalliongradian_influence
		}
	}
}
EQS_bring_back_puppets = {
	EQS_bring_back_puppet = {
		icon = generic_political_actions
		days_re_enable = 30
		visible = {
			is_subject = no
			eqs_not_has_civil_war = yes
			OR = {
				has_completed_focus = SOL_end_of_civil_war
				AND = {
					is_original_EQS = yes
					OR = {
						has_completed_focus = EQS_Civil_War_End
						has_global_flag = equestrian_civil_war_daybreaker_ended
					}
				}
			}
			FROM = {
				exists = yes
				is_subject = no
				has_country_flag = former_EQS_puppet
				is_former_subject = yes
				has_war = no
			}
		}
		target_root_trigger = {
			is_subject = no
			eqs_not_has_civil_war = yes
			OR = {
				has_completed_focus = SOL_end_of_civil_war
				AND = {
					is_original_EQS = yes
					OR = {
						has_completed_focus = EQS_Civil_War_End
						has_global_flag = equestrian_civil_war_daybreaker_ended
					}
				}
			}
		}
		target_array = global.former_EQS_puppets
		target_trigger = {
			FROM = {
				exists = yes
				is_subject = no
				has_country_flag = former_EQS_puppet
				is_former_subject = yes
				has_war = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					enemies_strength_ratio > 1.5
					strength_ratio = { tag = FROM ratio < 1 }
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_puppet target: [From.GetName]"
			if = {
				limit = { is_EQS_SOL = yes }
				FROM = { country_event = { id = solarempire.12 days = 1 } }
			}
			else_if = {
				limit = { is_original_EQS = yes }
				FROM = { country_event = { id = solarempire.123 days = 1 } }
			}
		}
	}
}
EQS_bring_back_civil_war_countries = {
	EQS_bring_back_SCS = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { SCS }
		target_trigger = {
			FROM = {
				tag = SCS
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_SCS target: [From.GetName]"
			country_event = equestria.117
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
	EQS_bring_back_BAL = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { BAL }
		target_trigger = {
			FROM = {
				tag = BAL
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_BAL target: [From.GetName]"
			country_event = equestria.119
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
	EQS_bring_back_JUN = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { JUN }
		target_trigger = {
			FROM = {
				tag = JUN
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_JUN target: [From.GetName]"
			country_event = equestria.112
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
		EQS_bring_back_LSP = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { LSP }
		target_trigger = {
			FROM = {
				tag = LSP
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_LSP target: [From.GetName]"
			country_event = equestria.1170  
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
}
military_training_category = {
	EQS_improve_tank = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		visible = {
			has_idea = EQS_bad_tanks
		}
		ai_will_do = {
			factor = 10
		}
		custom_cost_trigger = {
			has_army_experience > 9
		}
		custom_cost_text = decision_cost_army_xp_10
		fire_only_once = yes
		complete_effect = {
			swap_ideas = {
				remove_idea = EQS_bad_tanks
				add_idea = EQS_bad_tanks2
			}
			hidden_effect = {
				army_experience = -10
			}
		}
	}
	EQS_improve_tank2 = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		custom_cost_trigger = {
			has_army_experience > 19
		}
		custom_cost_text = decision_cost_army_xp_20
		visible = {
			has_idea = EQS_bad_tanks2
		}
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes
		complete_effect = {
			swap_ideas = {
				remove_idea = EQS_bad_tanks2
				add_idea = EQS_bad_tanks3
			}
			hidden_effect = {
				army_experience = -20
			}
		}
	}
	EQS_improve_tank3 = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		custom_cost_trigger = {
			has_army_experience > 29
		}
		custom_cost_text = decision_cost_army_xp_30
		visible = {
			has_idea = EQS_bad_tanks3
		}
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes
		complete_effect = {
			remove_ideas = EQS_bad_tanks3
			hidden_effect = {
				army_experience = -30
			}
		}
	}
	
}
EQS_militias = {
	EQS_militias_north_central_region = {			#8 divisions
		icon = rifles_whinnyapolis
		available = {
			179 = { is_owned_and_controlled_by = EQS }
			74 = { is_owned_and_controlled_by = EQS }
			178 = { is_owned_and_controlled_by = EQS }
			70 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 500
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 30
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_north_central_region"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_north_central_region"
			custom_effect_tooltip = EQS_north_cent_militia_tt
			hidden_effect = {
				load_oob = "EQS_north_central_militia"
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_east_coast = {				#8 divisions
		icon = rifles_manehattan
		available = {
			75 = { is_owned_and_controlled_by = EQS }
			110 = { is_owned_and_controlled_by = EQS }
			12 = { is_owned_and_controlled_by = EQS }
			187 = { is_owned_and_controlled_by = EQS }
			230 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 35
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_east_coast"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_east_coast"
			custom_effect_tooltip = EQS_east_coast_militia_tt
			hidden_effect = {
				load_oob = "EQS_east_coast_militia"
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_central_equestria = {		#12 divisions
		icon = rifles_canterlot
		available = {
			1 = { is_owned_and_controlled_by = EQS }
			2 = { is_owned_and_controlled_by = EQS }
			3 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 70
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_central_equestria"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_central_equestria"
			custom_effect_tooltip = EQS_equestrian_heart_militia_tt
			hidden_effect = {
				load_oob = "EQS_equestrian_heart_militia"
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_south_west = {				#10 divisions
		icon = rifles_appleloosa
		available = {
			66 = { is_owned_and_controlled_by = EQS }
			38 = { is_owned_and_controlled_by = EQS }
			21 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 250
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 40
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_south_east"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_south_east"
			custom_effect_tooltip = EQS_south_east_militia_tt
			hidden_effect = {
				load_oob = "EQS_south_east_militia"
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_south_east = {				#8 divisions
		icon = rifles_temple
		available = {
			13 = { is_owned_and_controlled_by = EQS }
			16 = { is_owned_and_controlled_by = EQS }
			15 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		visible = {
			NOT = { BAL = { exists = yes } }
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 45
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_south_west"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_south_west"
			custom_effect_tooltip = EQS_south_west_militia_tt
			hidden_effect = {
				load_oob = "EQS_south_west_militia"
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
}
EQS_foreign_affairs = {
	EQS_call_yakyakistan_to_war_CHN = {
		icon = rifles

		fire_only_once = yes
		available = {
			surrender_progress > 0.1
		}
		visible = {
			has_completed_focus = pinkie_pie
			has_defensive_war_with = CHN
			FROM = {
				exists = yes 
				is_subject = no
				has_war = no
				has_government = democratic
			}
		}
		target_root_trigger = {
			has_completed_focus = pinkie_pie
			has_defensive_war_with = CHN
		}
		targets = { YAK }
		target_trigger = {
			FROM = { tag = YAK }
		}
		cost = 20
		ai_will_do = {
			factor = 0
			modifier = {
				add = 14
				surrender_progress > 0.1
			}
			modifier = {
				add = 40
				surrender_progress > 0.2
			}
			modifier = {
				add = 70
				surrender_progress > 0.35
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_call_yakyakistan_to_war_CHN target: [From.GetName]"
			YAK = { country_event = equestria.72 }
		}
	}
	EQS_sombra_return_civil_war_help = {
		icon = sombra_return
		available = {
			has_war_support > 0.10
		}
		cost = 50
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = {
			FROM = { original_tag = CRY }
		}

		visible = {
			FROM = { 
				has_civil_war = yes
				exists = yes
				original_tag = CRY
				has_global_flag = sombra_returned 
				has_government = fascism
			}
		}
		cancel_trigger = {
			FROM = {
				has_civil_war = no
			}
		}
		war_with_target_on_remove = yes
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_sombra_return_civil_war_help target: [From.GetName]"
			random_other_country = {
				limit = { original_tag = CRY has_government = democratic}
				save_event_target_as = cry_dem
				add_political_power = 150
				add_manpower = 50000
				custom_effect_tooltip = sombra_civil_war_tt
				hidden_effect = {
					load_oob = "EQS_sombra_civil_war"
					ROOT = {
						add_ai_strategy = {
							type = support
							id = PREV
							value = 300
						}
					}
				}
			}
			country_event = {
				id = equestria.53 days = 1
			}
		}
		modifier = {
			political_power_gain = -0.3
		}
	}
	EQS_sombra_return_war = {
		icon = sombra_return
		available = {
			has_war_support > 0.10
		}
		cost = 50
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = {
			FROM = { original_tag = CRY }
		}

		war_with_on_remove = CRY
		target_root_trigger = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
		}
		visible = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
			FROM = {
				original_tag = CRY
				exists = yes
				has_government = fascism
				has_country_leader = { character = CRY_sombra ruling_only = yes }
				has_civil_war = no
			}
		}
		cancel_trigger = {
			FROM = {
				has_war_with = ROOT
			}
		}
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_sombra_return_war target: [From.GetName]"
			country_event = {
				id = equestria.54 days = 1
			}
		}
		modifier = {
			political_power_gain = -0.3
		}
	}
	EQS_operation_sunrise_freedom = {
		icon = rifles
		cost = 100
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes

		war_with_target_on_remove = yes
		targets = { EQC }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				original_tag = EQC
				has_country_flag = is_maresoc
				has_government = communism
			}
		}
		target_root_trigger = {
			has_country_flag = EQS_will_war_with_maresoc
			is_subject = no
		}
		visible = {
			has_country_flag = EQS_will_war_with_maresoc
			FROM = {
				exists = yes
				original_tag = EQC
				has_country_flag = is_maresoc
				has_government = communism
				NOT = { has_war_with = ROOT }
			}
		}
		days_remove = 70

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_operation_sunrise_freedom target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			FROM = {
				activate_targeted_decision = { target = ROOT decision = EQC_equestria_anti_maresoc }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_operation_sunrise_freedom target: [From.GetName]"
			log = "[GetDateText] [Root.GetName]: decision EQS_operation_sunrise_freedom"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			hidden_effect = {
				create_wargoal = { 
					type = puppet_wargoal_focus 
					target = FROM 
				}
			}
			declare_war_on = {
				type = puppet_wargoal_focus
				target = FROM
			}
			every_country ={
				limit = { has_country_flag = will_help_against_maresoc }
				country_event = { id = mareland.63 hours = 2 }
			}
		}

		modifier = {
			war_support_weekly = 0.025
			political_power_gain = -0.05
		}
	}
}
