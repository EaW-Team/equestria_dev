FLY_elements_of_harmony_category = {
	FLY_rescue_rainbow_dash = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 100
		allowed = {
			always = no
		}
		available = {
			106 = {
				is_controlled_by_ROOT_or_ally = yes
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 106
			}
		}
		timeout_effect = {
			country_event = { id = fillydelphia_manesix.5 }
			effect_tooltip = {
				EQS_rainbowdash = {
					add_timed_unit_leader_trait = {
						trait = wounded
						days = 120
					}
				}
			}
		}
		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_rescue_rainbow_dash"
			country_event = { id = fillydelphia_manesix.4 }
			custom_effect_tooltip = FLY_gain_following_rewards
			effect_tooltip = {
				add_political_power = 150
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 10
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
			}
		}
	}
	FLY_twilight_move = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 50
		allowed = {
			always = no
		}
		cancel_trigger = {
			3 = {
				is_controlled_by_ROOT_or_ally = yes
			}
		}
		available = {
			OR = {
				70 = {
					is_controlled_by_ROOT_or_ally = yes
				}
				custom_trigger_tooltip = {
					tooltip = FLY_canterlot_enrcicled_tp
					AND = {
						65 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						1 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						2 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						103 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						104 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						39 = {
							is_controlled_by_ROOT_or_ally = yes
						}
					}
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		timeout_effect = {
			3 = {
				clr_state_flag = FLY_twilight_here
			}
			70 = {
				set_state_flag = FLY_twiligt_here
			}
			country_event = { id = fillydelphia_manesix.15 }
		}
	}
	FLY_rarity_move = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 50
		allowed = {
			always = no
		}
		cancel_trigger = {
			75 = {
				is_controlled_by_ROOT_or_ally = yes
			}
		}
		available = {
			OR = {
				525 = {
					is_controlled_by_ROOT_or_ally = yes
				}
				custom_trigger_tooltip = {
					tooltip = FLY_manehattan_enrcicled_tp
					AND = {
						110 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						187 = {
							is_controlled_by_ROOT_or_ally = yes
						}
						184 = {
							is_controlled_by_ROOT_or_ally = yes
						}
					}
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 75
			}
		}
		timeout_effect = {
			75 = {
				clr_state_flag = FLY_rarity_here
			}
			525 = {
				set_state_flag = FLY_rarity_here
			}
			country_event = { id = fillydelphia_manesix.12 }
		}
	}
	FLY_elements_of_harmony = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			custom_trigger_tooltip = {
				tooltip = FLY_elements_gathered_tp
				has_completed_focus = FLY_laughter
				has_completed_focus = FLY_loyalty
				has_completed_focus = FLY_generosity
				has_completed_focus = FLY_honesty
				has_completed_focus = FLY_kindness
				has_completed_focus = FLY_magic
			}
		}
		visible = {
			hidden_trigger = {
				has_country_flag = FLY_searching_for_elements
				OR = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
					NLR = {
						exists = yes
						#has_war_with = FLY
					}
				}
			}
		}
		cost = 0

		ai_will_do = {
			base = 150
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_elements_of_harmony"
			if = {
				limit = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
				}
				EQS = {
					add_ideas = FLY_elements_of_harmony_debuff
				}
			}
			if = {
				limit = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
				}
				NLR = {
					add_ideas = FLY_elements_of_harmony_debuff
				}
			}
		}
	}
}
FLY_legitimacy_category = {
	FLY_civil_war_coring = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			has_completed_focus = FLY_declare_republic
		}
		visible = {
			has_completed_focus = FLY_declare_republic
			NOT = {
				has_cosmetic_tag = EQS_FLY_republic_1
				has_cosmetic_tag = EQS_FLY_republic_2
				has_cosmetic_tag = EQS_FLY_republic_3
			}
		}
		target_root_trigger = {
            has_completed_focus = FLY_declare_republic
        }
		target_trigger = {
			FROM = {
				compliance > 14
			}
		}
		
        state_target = any_controlled_state
        target_array = EQS.core_states
        on_map_mode = map_only

		ai_will_do = {
			base = 100
		}

		cost = FLY_coring_pp_cost

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_civil_war_coring"
			if = {
				limit = {
					has_completed_focus = FLY_magic_of_friendship_is_what_its_about
				}
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 1
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
			FROM = {
			    add_core_of = FLY
			}
		}
	}
    FLY_vanhoover_defence = {
		icon = GFX_decision_crossed_swords
		days_mission_timeout = 100
		is_good = yes
		allowed = {
			always = no
		}
		available = {
			NOT = {
				AND = {
					has_war_with = EQS
					has_war_with = NLR
				}
				14 = {
					is_controlled_by_ROOT_or_ally = yes
				}
			}
		}
		timeout_effect = {
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
			14 = {
				add_core_of = FLY
				create_unit = {
					division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
					owner = FLY
					count = 2
					prioritize_location = 585
					allow_spawning_on_enemy_provs = no
				}
			}
		}
	}
	FLY_extreme_measures_manpower = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_5
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 4.99
			}
		}
		days_remove = 35

		modifier = {
			weekly_manpower = 750
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_manpower"
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_defence = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_5
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 4.99
			}
		}
		days_remove = 50

		modifier = {
			defence = 0.1
			max_dig_in_factor = 0.25
			dig_in_speed_factor = 0.25
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_defence"
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_militia = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 9.99
			}
		}
		days_remove = 35

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_militia"
			if = {
				limit = {
					12 = {
						is_controlled_by = ROOT
					}
				}
				12 = {
					create_unit = {
						division = "name = \"Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
						owner = FLY
						count = 4
						prioritize_location = 12081
						allow_spawning_on_enemy_provs = no
					}
				}
			}
			else = {
				random_controlled_state = {
					create_unit = {
						division = "name = \"Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
						owner = FLY
						count = 4
						prioritize_location = 12081
						allow_spawning_on_enemy_provs = no
					}
				}
			}
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -10
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_attack = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 9.99
			}
		}
		days_remove = 50

		modifier = {
			offence = 0.15
			breakthrough_factor = 0.25
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_attack"
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -10
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_output = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 9.99
			}
		}
		days_remove = 75

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_output"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = FLY
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 450
				producer = FLY
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 250
				producer = FLY
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 150
				producer = FLY
			}
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				amount = 120
				producer = FLY
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
				producer = FLY
			}
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -10
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_draft = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_2_active
					has_country_flag = FLY_extreme_measure_3_active
				}
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_1_active
					has_country_flag = FLY_extreme_measure_2_active
				}
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 14.99
			}
		}
		days_remove = -1

		modifier = {
			political_power_cost = 0.15
			democratic_drift = -0.05
			conscription = 0.025
			mobilization_speed = 0.25
			training_time_factor = -0.15
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_draft"
			custom_effect_tooltip = FLY_explain_final_extreme_measures_tp
			set_country_flag = FLY_extreme_measure_1_active
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -15
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_order = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_1_active
					has_country_flag = FLY_extreme_measure_3_active
				}
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_1_active
					has_country_flag = FLY_extreme_measure_2_active
				}
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 14.99
			}
		}
		days_remove = -1

		modifier = {
			political_power_cost = 0.15
			democratic_drift = -0.05
			army_org_factor = 0.1
			army_morale_factor = 0.1
			org_loss_at_low_org_factor = -0.15
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_order"
			custom_effect_tooltip = FLY_explain_final_extreme_measures_tp
			set_country_flag = FLY_extreme_measure_2_active
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -15
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
	FLY_extreme_measures_call = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_1_active
					has_country_flag = FLY_extreme_measure_2_active
				}
			}
		}
		visible = {
			AND = {
				has_completed_focus = FLY_extreme_measures
				has_country_flag = FLY_extreme_measures_available
				NOT = {
					has_country_flag = FLY_extreme_measure_1_active
					has_country_flag = FLY_extreme_measure_2_active
				}
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_10
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 14.99
			}
		}
		days_remove = -1

		modifier = {
			political_power_cost = 0.15
			democratic_drift = -0.05
			industrial_capacity_factory = 0.15
			industrial_capacity_dockyard = 0.15
			production_factory_max_efficiency_factor = 0.15
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_order"
			custom_effect_tooltip = FLY_explain_final_extreme_measures_tp
			set_country_flag = FLY_extreme_measure_3_active
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -15
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}
}
FLY_loot_armouries = {
	FLY_loot_armouries_decision = {
		icon = ger_military_buildup
		allowed = {
			tag = FLY
		}
		state_target = yes
		on_map_mode = map_only
		target_array = FLY.FLY_loot_armouries_states_array
		visible = {
			FROM = {
				is_controlled_by = ROOT
			}
		}
		target_trigger = {
			FROM = {
				NOT = {
					has_state_flag = FLY_state_armouries_looted
				}
				OR = {
					is_owned_by = SOL
					is_owned_by = NLR
					is_owned_by = CHN
				}
			}
		}

		cost = 10
		days_remove = 7
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove FLY_loot_armouries_decision"
			FROM = {
				set_state_flag = FLY_state_armouries_looted
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 350
			}
		}
	}
}