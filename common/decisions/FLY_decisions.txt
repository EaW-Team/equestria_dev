FLY_elements_of_harmony_category = {
	FLY_rescue_rainbow_dash = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 100
		allowed = {
			always = no
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = [Root.FLY_rainbow_state_location_tp]
				any_owned_state = {
					has_state_flag = FLY_rd_hiding_here_2
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = var:FLY_rainbow_dash_location
			}
		}
		timeout_effect = {
			country_event = { id = fillydelphia_manesix.4 }
			effect_tooltip = {
				EQS_rainbowdash = {
					add_timed_unit_leader_trait = {
						trait = wounded
						days = 80
					}
				}
			}
		}
		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_rescue_rainbow_dash"
			effect_tooltip = {
				add_political_power = 75
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 5
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
			}
		}
	}
	FLY_twilight_move = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 50
		allowed = {
			always = no
		}
		available = {
			OR = {
				3 = {
					is_controlled_by = FLY
				}
				70 = {
					is_controlled_by = FLY
				}
				custom_trigger_tooltip = {
					tooltip = FLY_canterlot_enrcicled_tp
					AND = {
						65 = {
							is_controlled_by = FLY
						}
						1 = {
							is_controlled_by = FLY
						}
						2 = {
							is_controlled_by = FLY
						}
						103 = {
							is_controlled_by = FLY
						}
						104 = {
							is_controlled_by = FLY
						}
						39 = {
							is_controlled_by = FLY
						}
					}
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		timeout_effect = {
			3 = {
				clr_state_flag = FLY_twilight_here
			}
			70 = {
				set_state_flag = FLY_twiligt_here
			}
			country_event = { id = fillydelphia_manesix.15 }
		}
	}
	FLY_rarity_move = {
		icon = GFX_decision_eng_propaganda_campaigns
		days_mission_timeout = 50
		allowed = {
			always = no
		}
		available = {
			OR = {
				75 = {
					is_controlled_by = FLY
				}
				525 = {
					is_controlled_by = FLY
				}
				custom_trigger_tooltip = {
					tooltip = FLY_manehattan_enrcicled_tp
					AND = {
						110 = {
							is_controlled_by = FLY
						}
						187 = {
							is_controlled_by = FLY
						}
						184 = {
							is_controlled_by = FLY
						}
					}
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 75
			}
		}
		timeout_effect = {
			75 = {
				clr_state_flag = FLY_rarity_here
			}
			525 = {
				set_state_flag = FLY_rarity_here
			}
			country_event = { id = fillydelphia_manesix.12 }
		}
	}
	FLY_elements_of_harmony = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			custom_trigger_tooltip = {
				tooltip = FLY_elements_gathered_tp
				has_completed_focus = FLY_laughter
				has_completed_focus = FLY_loyalty
				has_completed_focus = FLY_generosity
				has_completed_focus = FLY_honesty
				has_completed_focus = FLY_kindness
				has_completed_focus = FLY_magic
			}
		}
		visible = {
			hidden_trigger = {
				has_country_flag = FLY_searching_for_elements
				OR = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
					NLR = {
						exists = yes
						#has_war_with = FLY
					}
				}
			}
		}
		cost = 0

		ai_will_do = {
			base = 150
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_elements_of_harmony"
			if = {
				limit = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
				}
				EQS = {
					add_ideas = FLY_elements_of_harmony_debuff
				}
			}
			if = {
				limit = {
					EQS = {
						exists = yes
						#has_war_with = FLY
					}
				}
				NLR = {
					add_ideas = FLY_elements_of_harmony_debuff
				}
			}
		}
	}
}
FLY_legitimacy_category = {
	FLY_civil_war_coring = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			has_completed_focus = FLY_declare_republic
		}
		visible = {
			has_completed_focus = FLY_declare_republic
			NOT = {
				has_cosmetic_tag = EQS_FLY_republic_1
				has_cosmetic_tag = EQS_FLY_republic_2
				has_cosmetic_tag = EQS_FLY_republic_3
			}
		}
		target_root_trigger = {
            has_completed_focus = FLY_declare_republic
        }
		target_trigger = {
			FROM = {
				compliance > 14
			}
		}
		
        state_target = any_controlled_state
        target_array = EQS.core_states
        on_map_mode = map_only

		ai_will_do = {
			base = 100
		}

		cost = FLY_coring_pp_cost

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_civil_war_coring"
			if = {
				limit = {
					has_completed_focus = FLY_magic_of_friendship_is_what_its_about
				}
				set_temp_variable = {
					var = FLY_legitimacy_temp
					value = 1
				}
				custom_effect_tooltip = FLY_add_legitimacy_tp
				add_to_variable = {
					FLY_legitimacy = FLY_legitimacy_temp
				}
				clamp_variable = {
					var = FLY_legitimacy
					min = 0
					max = FLY_legitimacy_max
				}
			}
			FROM = {
			    add_core_of = FLY
			}
		}
	}

    FLY_vanhoover_defence = {
		icon = GFX_decision_crossed_swords
		days_mission_timeout = 100
		is_good = yes
		allowed = {
			always = no
		}
		available = {
			NOT = {
				AND = {
					has_war_with = EQS
					has_war_with = NLR
				}
				14 = {
					is_controlled_by = FLY
				}
			}
		}
		timeout_effect = {
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = 10
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
			14 = {
				add_core_of = FLY
				create_unit = {
					division = "name = \"Vanhoover Militia\" division_template = \"Militia Brigade\" start_experience_factor  = 0.1"
					owner = FLY
					count = 2
					prioritize_location = 585
					allow_spawning_on_enemy_provs = no
				}
			}
		}
	}

	FLY_extreme_measures_manpower = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			has_completed_focus = FLY_extreme_measures
		}
		visible = {
			has_completed_focus = FLY_extreme_measures
			NOT = {
				has_cosmetic_tag = EQS_FLY_republic_1
				has_cosmetic_tag = EQS_FLY_republic_2
				has_cosmetic_tag = EQS_FLY_republic_3
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_5
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 4.99
			}
		}
		days_remove = 35

		modifier = {
			weekly_manpower = 750
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_manpower"
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}

	FLY_extreme_measures_production = {
		icon = GFX_decision_eng_propaganda_campaigns
		available = {
			has_completed_focus = FLY_extreme_measures
		}
		visible = {
			has_completed_focus = FLY_extreme_measures
			NOT = {
				has_cosmetic_tag = EQS_FLY_republic_1
				has_cosmetic_tag = EQS_FLY_republic_2
				has_cosmetic_tag = EQS_FLY_republic_3
			}
		}

		ai_will_do = {
			base = 0
		}

		custom_cost_text = FLY_decision_cost_legitimacy_5
		custom_cost_trigger = {
			check_variable = {
				FLY_legitimacy > 4.99
			}
		}
		days_remove = 50

		modifier = {
			production_factory_efficiency_gain_factor = 0.15
			line_change_production_efficiency_factor = 0.15
		}

		complete_effect = {
		    log = "[GetDateText]: [Root.GetName]: Decision FLY_extreme_measures_production"
			set_temp_variable = {
                var = FLY_legitimacy_temp
                value = -5
            }
            custom_effect_tooltip = FLY_add_legitimacy_tp
            add_to_variable = {
                FLY_legitimacy = FLY_legitimacy_temp
            }
			clamp_variable = {
                var = FLY_legitimacy
                min = 0
                max = FLY_legitimacy_max
            }
		}
	}

}