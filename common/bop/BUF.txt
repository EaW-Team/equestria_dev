BUF_power_balance = {
	initial_value = 0.1
	left_side = BUF_bad_side
	right_side = BUF_good_side
	decision_category = BUF_balance_of_power_category

	### Medium trust
	range = {
		id = BUF_medium_trust_range
		min = -0.10
		max = 0.10
		modifier = {
		}
		on_activate = { #TODO_Manu: Scripted effect checking for leader and swapping to appropriate GFX
			set_power_balance_gfx = {
				id = BUF_power_balance
				side = BUF_bad_side
				gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_side"
			}
			set_power_balance_gfx = {
				id = BUF_power_balance
				side = BUF_good_side
				gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_side"
			}

			# MANAGE stubborness NS - Doing in this way to prevent issues when bypassing an entire range for whatever reason
			if = {
				limit = {
					has_idea = BUF_stubbornness_1
				}
				swap_ideas = {
					remove_idea = BUF_stubbornness_1
					add_idea = BUF_stubbornness_3
				}
			}
			else_if = {
				limit = {
					has_idea = BUF_stubbornness_2
				}
				swap_ideas = {
					remove_idea = BUF_stubbornness_2
					add_idea = BUF_stubbornness_3
				}
			}
			else_if = {
				limit = {
					has_idea = BUF_stubbornness_4
				}
				swap_ideas = {
					remove_idea = BUF_stubbornness_4
					add_idea = BUF_stubbornness_3
				}
			}
			else_if = {
				limit = {
					has_idea = BUF_stubbornness_5
				}
				swap_ideas = {
					remove_idea = BUF_stubbornness_5
					add_idea = BUF_stubbornness_3
				}
			}
			else = {
				effect_tooltip = {
					add_ideas = BUF_stubbornness_3
				}
			}

			#MOTION OF NO CONFIDENCE COST
			#set_variable = { BUF_motion_of_no_confidence_dec_cost = 250 tooltip = BUF_motion_of_no_confidence_cost_medium_range_tt }
		}
		on_deactivate = {
			if = {
				limit = {
					is_power_balance_side_active = {
						id = BUF_power_balance
						side = BUF_good_side
					}
				}
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_bad_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_side"
				}
			}
			else = {
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_good_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_side"
				}
			}
		}
	}

	### Bad Side
	side = {
		id = BUF_bad_side	
		icon = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_side"

		range = {
			id = BUF_low_trust_range
			min = -0.6
			max = -0.1
			modifier = {
				stability_factor = -0.05
				war_support_factor = -0.05
				political_power_factor = -0.1
			}
			on_activate = { #TODO_Manu: Scripted effect checking for leader and swapping to appropriate GFX
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_bad_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_improved_side"
				}
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_good_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_side"
				}

				# MANAGE stubborness NS
				if = {
					limit = {
						has_idea = BUF_stubbornness_1
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_1
						add_idea = BUF_stubbornness_2
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_3
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_3
						add_idea = BUF_stubbornness_2
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_4
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_4
						add_idea = BUF_stubbornness_2
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_5
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_5
						add_idea = BUF_stubbornness_2
					}
				}
				else = {
					effect_tooltip = {
						add_ideas = BUF_stubbornness_2
					}
				}

				#MOTION OF NO CONFIDENCE COST
				#set_variable = { BUF_motion_of_no_confidence_dec_cost = 150 tooltip = BUF_motion_of_no_confidence_cost_bad_range_tt }
			}
			on_deactivate = {
			
			}
		}

		range = {
			id = BUF_very_low_trust_range
			min = -1
			max = -0.6
			modifier = {
				stability_factor = -0.1
				war_support_factor = -0.1
				political_power_factor = -0.2
			}
			on_activate = {
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_bad_side
					gfx = "GFX_bop_BUF_bad_rubble_side"
				}
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_good_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_side"
				}

				# MANAGE stubborness NS
				if = {
					limit = {
						has_idea = BUF_stubbornness_2
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_2
						add_idea = BUF_stubbornness_1
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_3
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_3
						add_idea = BUF_stubbornness_1
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_4
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_4
						add_idea = BUF_stubbornness_1
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_5
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_5
						add_idea = BUF_stubbornness_1
					}
				}
				else = {
					effect_tooltip = {
						add_ideas = BUF_stubbornness_1
					}
				}

				#MOTION OF NO CONFIDENCE COST
				#set_variable = { BUF_motion_of_no_confidence_dec_cost = 50 tooltip = BUF_motion_of_no_confidence_cost_very_bad_range_tt }
			}
			on_deactivate = {
				
			}
		}
	}

	### Good Side
	side = {
		id = BUF_good_side	
		icon = "GFX_bop_BUF_[GetLeaderBopIcon]_good_side"

		range = {
			id = BUF_high_trust_range
			min = 0.1
			max = 0.6
			modifier = {
				stability_factor = 0.05
				war_support_factor = 0.05
				conscription_factor = 0.05
			}
			on_activate = { #TODO_Manu: Scripted effect checking for leader and swapping to appropriate GFX
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_good_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_improved_side"
				}
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_bad_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_side"
				}

				# MANAGE stubborness NS
				if = {
					limit = {
						has_idea = BUF_stubbornness_1
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_1
						add_idea = BUF_stubbornness_4
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_2
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_2
						add_idea = BUF_stubbornness_4
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_3
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_3
						add_idea = BUF_stubbornness_4
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_5
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_5
						add_idea = BUF_stubbornness_4
					}
				}
				else = {
					effect_tooltip = {
						add_ideas = BUF_stubbornness_4
					}
				}

				#MOTION OF NO CONFIDENCE COST - In case of bypassing the medium range
				#set_variable = { BUF_motion_of_no_confidence_dec_cost = 250 tooltip = BUF_motion_of_no_confidence_cost_unavailable_tt }
			}
			on_deactivate = {
				
			}
		}

		range = {
			id = BUF_very_high_trust_range
			min = 0.6
			max = 1
			modifier = {
				stability_factor = 0.1
				war_support_factor = 0.1
				conscription_factor = 0.1
			}
			on_activate = {
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_good_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_good_improved_side"
				}
				set_power_balance_gfx = {
					id = BUF_power_balance
					side = BUF_bad_side
					gfx = "GFX_bop_BUF_[GetLeaderBopIcon]_bad_side"
				}

				# MANAGE stubborness NS
				if = {
					limit = {
						has_idea = BUF_stubbornness_1
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_1
						add_idea = BUF_stubbornness_5
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_2
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_2
						add_idea = BUF_stubbornness_5
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_3
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_3
						add_idea = BUF_stubbornness_5
					}
				}
				else_if = {
					limit = {
						has_idea = BUF_stubbornness_4
					}
					swap_ideas = {
						remove_idea = BUF_stubbornness_4
						add_idea = BUF_stubbornness_5
					}
				}
				else = {
					effect_tooltip = {
						add_ideas = BUF_stubbornness_5
					}
				}

				#MOTION OF NO CONFIDENCE COST - In case of bypassing the medium range
				#set_variable = { BUF_motion_of_no_confidence_dec_cost = 250 tooltip = BUF_motion_of_no_confidence_cost_unavailable_tt }
			}
			on_deactivate = {
				
			}
		}
	}
}